"use strict";var cke=Object.create;var uT=Object.defineProperty;var Oee=Object.getOwnPropertyDescriptor;var uke=Object.getOwnPropertyNames;var lke=Object.getPrototypeOf,dke=Object.prototype.hasOwnProperty;var I=(t,e)=>()=>(t&&(e=t(t=0)),e);var P=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),rn=(t,e)=>{for(var r in e)uT(t,r,{get:e[r],enumerable:!0})},Mee=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of uke(e))!dke.call(t,i)&&i!==r&&uT(t,i,{get:()=>e[i],enumerable:!(n=Oee(e,i))||n.enumerable});return t};var W=(t,e,r)=>(r=t!=null?cke(lke(t)):{},Mee(e||!t||!t.__esModule?uT(r,"default",{value:t,enumerable:!0}):r,t)),Ai=t=>Mee(uT({},"__esModule",{value:!0}),t),we=(t,e,r,n)=>{for(var i=n>1?void 0:n?Oee(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&uT(e,r,i),i},de=(t,e)=>(r,n)=>e(r,n,t);var lr=P((Ect,qee)=>{"use strict";var M9=Object.defineProperty,pke=Object.getOwnPropertyDescriptor,fke=Object.getOwnPropertyNames,mke=Object.prototype.hasOwnProperty,hke=(t,e)=>{for(var r in e)M9(t,r,{get:e[r],enumerable:!0})},gke=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fke(e))!mke.call(t,i)&&i!==r&&M9(t,i,{get:()=>e[i],enumerable:!(n=pke(e,i))||n.enumerable});return t},vke=t=>gke(M9({},"__esModule",{value:!0}),t),Uee={};hke(Uee,{config:()=>Ske,t:()=>Bee});qee.exports=vke(Uee);var yke=require("fs"),bke=require("fs/promises");async function _ke(t){if(t.protocol==="file:")return await(0,bke.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let n=`Unexpected ${e.status} response while trying to read ${t}`;try{n+=`: ${await e.text()}`}catch{}throw new Error(n)}return await e.text()}throw new Error("Unsupported protocol")}function xke(t){return(0,yke.readFileSync)(t,"utf8")}var lT;function Ske(t){if("contents"in t){typeof t.contents=="string"?lT=JSON.parse(t.contents):lT=t.contents;return}if("fsPath"in t){let e=xke(t.fsPath),r=JSON.parse(e);lT=Fee(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=_ke(e).then(o=>{try{let s=JSON.parse(o);lT=Fee(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function Bee(...t){let e=t[0],r,n,i;if(typeof e=="string")r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return Bee(a,...s)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=lT?.[r];return o?typeof o=="string"?AR(o,i):o.comment?AR(o.message,i):AR(n,i):AR(n,i)}var Eke=/{([^}]+)}/g;function AR(t,e){return Object.keys(e).length===0?t:t.replace(Eke,(r,n)=>e[n]??r)}function Fee(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var jee=P(F9=>{var Hee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");F9.encode=function(t){if(0<=t&&t<Hee.length)return Hee[t];throw new TypeError("Must be between 0 and 63: "+t)};F9.decode=function(t){var e=65,r=90,n=97,i=122,o=48,s=57,a=43,c=47,u=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=s?t-o+l:t==a?62:t==c?63:-1}});var q9=P(B9=>{var Gee=jee(),U9=5,Vee=1<<U9,zee=Vee-1,$ee=Vee;function Tke(t){return t<0?(-t<<1)+1:(t<<1)+0}function Ike(t){var e=(t&1)===1,r=t>>1;return e?-r:r}B9.encode=function(e){var r="",n,i=Tke(e);do n=i&zee,i>>>=U9,i>0&&(n|=$ee),r+=Gee.encode(n);while(i>0);return r};B9.decode=function(e,r,n){var i=e.length,o=0,s=0,a,c;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=Gee.decode(e.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(c&$ee),c&=zee,o=o+(c<<s),s+=U9}while(a);n.value=Ike(o),n.rest=r}});var Sb=P(cs=>{function Cke(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}cs.getArg=Cke;var Wee=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,wke=/^data:.+\,.+$/;function dT(t){var e=t.match(Wee);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}cs.urlParse=dT;function _b(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}cs.urlGenerate=_b;function H9(t){var e=t,r=dT(t);if(r){if(!r.path)return t;e=r.path}for(var n=cs.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,_b(r)):e}cs.normalize=H9;function Kee(t,e){t===""&&(t="."),e===""&&(e=".");var r=dT(e),n=dT(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),_b(r);if(r||e.match(wke))return e;if(n&&!n.host&&!n.path)return n.host=e,_b(n);var i=e.charAt(0)==="/"?e:H9(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,_b(n)):i}cs.join=Kee;cs.isAbsolute=function(t){return t.charAt(0)==="/"||Wee.test(t)};function Rke(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}cs.relative=Rke;var Yee=function(){var t=Object.create(null);return!("__proto__"in t)}();function Qee(t){return t}function Ake(t){return Xee(t)?"$"+t:t}cs.toSetString=Yee?Qee:Ake;function Pke(t){return Xee(t)?t.slice(1):t}cs.fromSetString=Yee?Qee:Pke;function Xee(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function kke(t,e,r){var n=xb(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:xb(t.name,e.name)}cs.compareByOriginalPositions=kke;function Dke(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=xb(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:xb(t.name,e.name)}cs.compareByGeneratedPositionsDeflated=Dke;function xb(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Nke(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=xb(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:xb(t.name,e.name)}cs.compareByGeneratedPositionsInflated=Nke;function Lke(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}cs.parseSourceMapInput=Lke;function Oke(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=dT(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=Kee(_b(n),e)}return H9(e)}cs.computeSourceURL=Oke});var V9=P(Jee=>{var j9=Sb(),G9=Object.prototype.hasOwnProperty,S0=typeof Map<"u";function gp(){this._array=[],this._set=S0?new Map:Object.create(null)}gp.fromArray=function(e,r){for(var n=new gp,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n};gp.prototype.size=function(){return S0?this._set.size:Object.getOwnPropertyNames(this._set).length};gp.prototype.add=function(e,r){var n=S0?e:j9.toSetString(e),i=S0?this.has(e):G9.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(S0?this._set.set(e,o):this._set[n]=o)};gp.prototype.has=function(e){if(S0)return this._set.has(e);var r=j9.toSetString(e);return G9.call(this._set,r)};gp.prototype.indexOf=function(e){if(S0){var r=this._set.get(e);if(r>=0)return r}else{var n=j9.toSetString(e);if(G9.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};gp.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};gp.prototype.toArray=function(){return this._array.slice()};Jee.ArraySet=gp});var tte=P(ete=>{var Zee=Sb();function Mke(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||Zee.compareByGeneratedPositionsInflated(t,e)<=0}function PR(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}PR.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};PR.prototype.add=function(e){Mke(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};PR.prototype.toArray=function(){return this._sorted||(this._array.sort(Zee.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};ete.MappingList=PR});var z9=P(rte=>{var pT=q9(),Pi=Sb(),kR=V9().ArraySet,Fke=tte().MappingList;function _c(t){t||(t={}),this._file=Pi.getArg(t,"file",null),this._sourceRoot=Pi.getArg(t,"sourceRoot",null),this._skipValidation=Pi.getArg(t,"skipValidation",!1),this._sources=new kR,this._names=new kR,this._mappings=new Fke,this._sourcesContents=null}_c.prototype._version=3;_c.fromSourceMap=function(e){var r=e.sourceRoot,n=new _c({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Pi.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Pi.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};_c.prototype.addMapping=function(e){var r=Pi.getArg(e,"generated"),n=Pi.getArg(e,"original",null),i=Pi.getArg(e,"source",null),o=Pi.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};_c.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Pi.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Pi.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Pi.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};_c.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Pi.relative(o,i));var s=new kR,a=new kR;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=Pi.join(n,c.source)),o!=null&&(c.source=Pi.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var l=c.source;l!=null&&!s.has(l)&&s.add(l);var d=c.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=s,this._names=a,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=Pi.join(n,c)),o!=null&&(c=Pi.relative(o,c)),this.setSourceContent(c,u))},this)};_c.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};_c.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,o=0,s=0,a="",c,u,l,d,p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(u=p[f],c="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)c+=";",r++;else if(f>0){if(!Pi.compareByGeneratedPositionsInflated(u,p[f-1]))continue;c+=","}c+=pT.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(d=this._sources.indexOf(u.source),c+=pT.encode(d-s),s=d,c+=pT.encode(u.originalLine-1-i),i=u.originalLine-1,c+=pT.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(l=this._names.indexOf(u.name),c+=pT.encode(l-o),o=l)),a+=c}return a};_c.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Pi.relative(r,n));var i=Pi.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};_c.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};_c.prototype.toString=function(){return JSON.stringify(this.toJSON())};rte.SourceMapGenerator=_c});var nte=P(E0=>{E0.GREATEST_LOWER_BOUND=1;E0.LEAST_UPPER_BOUND=2;function $9(t,e,r,n,i,o){var s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?$9(s,e,r,n,i,o):o==E0.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?$9(t,s,r,n,i,o):o==E0.LEAST_UPPER_BOUND?s:t<0?-1:t}E0.search=function(e,r,n,i){if(r.length===0)return-1;var o=$9(-1,r.length,e,r,n,i||E0.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var ote=P(ite=>{function W9(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Uke(t,e){return Math.round(t+Math.random()*(e-t))}function K9(t,e,r,n){if(r<n){var i=Uke(r,n),o=r-1;W9(t,i,n);for(var s=t[n],a=r;a<n;a++)e(t[a],s)<=0&&(o+=1,W9(t,o,a));W9(t,o+1,a);var c=o+1;K9(t,e,r,c-1),K9(t,e,c+1,n)}}ite.quickSort=function(t,e){K9(t,e,0,t.length-1)}});var ate=P(DR=>{var Xe=Sb(),Y9=nte(),Eb=V9().ArraySet,Bke=q9(),fT=ote().quickSort;function bn(t,e){var r=t;return typeof t=="string"&&(r=Xe.parseSourceMapInput(t)),r.sections!=null?new Iu(r,e):new Fo(r,e)}bn.fromSourceMap=function(t,e){return Fo.fromSourceMap(t,e)};bn.prototype._version=3;bn.prototype.__generatedMappings=null;Object.defineProperty(bn.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});bn.prototype.__originalMappings=null;Object.defineProperty(bn.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});bn.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};bn.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};bn.GENERATED_ORDER=1;bn.ORIGINAL_ORDER=2;bn.GREATEST_LOWER_BOUND=1;bn.LEAST_UPPER_BOUND=2;bn.prototype.eachMapping=function(e,r,n){var i=r||null,o=n||bn.GENERATED_ORDER,s;switch(o){case bn.GENERATED_ORDER:s=this._generatedMappings;break;case bn.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=Xe.computeSourceURL(a,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)};bn.prototype.allGeneratedPositionsFor=function(e){var r=Xe.getArg(e,"line"),n={source:Xe.getArg(e,"source"),originalLine:r,originalColumn:Xe.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Xe.compareByOriginalPositions,Y9.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:Xe.getArg(s,"generatedLine",null),column:Xe.getArg(s,"generatedColumn",null),lastColumn:Xe.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var c=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==c;)i.push({line:Xe.getArg(s,"generatedLine",null),column:Xe.getArg(s,"generatedColumn",null),lastColumn:Xe.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};DR.SourceMapConsumer=bn;function Fo(t,e){var r=t;typeof t=="string"&&(r=Xe.parseSourceMapInput(t));var n=Xe.getArg(r,"version"),i=Xe.getArg(r,"sources"),o=Xe.getArg(r,"names",[]),s=Xe.getArg(r,"sourceRoot",null),a=Xe.getArg(r,"sourcesContent",null),c=Xe.getArg(r,"mappings"),u=Xe.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=Xe.normalize(s)),i=i.map(String).map(Xe.normalize).map(function(l){return s&&Xe.isAbsolute(s)&&Xe.isAbsolute(l)?Xe.relative(s,l):l}),this._names=Eb.fromArray(o.map(String),!0),this._sources=Eb.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(l){return Xe.computeSourceURL(s,l,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=c,this._sourceMapURL=e,this.file=u}Fo.prototype=Object.create(bn.prototype);Fo.prototype.consumer=bn;Fo.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Xe.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Fo.fromSourceMap=function(e,r){var n=Object.create(Fo.prototype),i=n._names=Eb.fromArray(e._names.toArray(),!0),o=n._sources=Eb.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return Xe.computeSourceURL(n.sourceRoot,f,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,l=s.length;u<l;u++){var d=s[u],p=new ste;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=o.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=i.indexOf(d.name)),c.push(p)),a.push(p)}return fT(n.__originalMappings,Xe.compareByOriginalPositions),n};Fo.prototype._version=3;Object.defineProperty(Fo.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function ste(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Fo.prototype._parseMappings=function(e,r){for(var n=1,i=0,o=0,s=0,a=0,c=0,u=e.length,l=0,d={},p={},f=[],m=[],h,g,v,b,y;l<u;)if(e.charAt(l)===";")n++,l++,i=0;else if(e.charAt(l)===",")l++;else{for(h=new ste,h.generatedLine=n,b=l;b<u&&!this._charIsMappingSeparator(e,b);b++);if(g=e.slice(l,b),v=d[g],v)l+=g.length;else{for(v=[];l<b;)Bke.decode(e,l,p),y=p.value,l=p.rest,v.push(y);if(v.length===2)throw new Error("Found a source, but no line and column");if(v.length===3)throw new Error("Found a source and line, but no column");d[g]=v}h.generatedColumn=i+v[0],i=h.generatedColumn,v.length>1&&(h.source=a+v[1],a+=v[1],h.originalLine=o+v[2],o=h.originalLine,h.originalLine+=1,h.originalColumn=s+v[3],s=h.originalColumn,v.length>4&&(h.name=c+v[4],c+=v[4])),m.push(h),typeof h.originalLine=="number"&&f.push(h)}fT(m,Xe.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,fT(f,Xe.compareByOriginalPositions),this.__originalMappings=f};Fo.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return Y9.search(e,r,o,s)};Fo.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};Fo.prototype.originalPositionFor=function(e){var r={generatedLine:Xe.getArg(e,"line"),generatedColumn:Xe.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Xe.compareByGeneratedPositionsDeflated,Xe.getArg(e,"bias",bn.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Xe.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Xe.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=Xe.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:Xe.getArg(i,"originalLine",null),column:Xe.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};Fo.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Fo.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Xe.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Xe.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};Fo.prototype.generatedPositionFor=function(e){var r=Xe.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Xe.getArg(e,"line"),originalColumn:Xe.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Xe.compareByOriginalPositions,Xe.getArg(e,"bias",bn.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Xe.getArg(o,"generatedLine",null),column:Xe.getArg(o,"generatedColumn",null),lastColumn:Xe.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};DR.BasicSourceMapConsumer=Fo;function Iu(t,e){var r=t;typeof t=="string"&&(r=Xe.parseSourceMapInput(t));var n=Xe.getArg(r,"version"),i=Xe.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new Eb,this._names=new Eb;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=Xe.getArg(s,"offset"),c=Xe.getArg(a,"line"),u=Xe.getArg(a,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new bn(Xe.getArg(s,"map"),e)}})}Iu.prototype=Object.create(bn.prototype);Iu.prototype.constructor=bn;Iu.prototype._version=3;Object.defineProperty(Iu.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});Iu.prototype.originalPositionFor=function(e){var r={generatedLine:Xe.getArg(e,"line"),generatedColumn:Xe.getArg(e,"column")},n=Y9.search(r,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Iu.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Iu.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Iu.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Xe.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};Iu.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],c=i.consumer._sources.at(a.source);c=Xe.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;a.name&&(u=i.consumer._names.at(a.name),this._names.add(u),u=this._names.indexOf(u));var l={source:c,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}fT(this.__generatedMappings,Xe.compareByGeneratedPositionsDeflated),fT(this.__originalMappings,Xe.compareByOriginalPositions)};DR.IndexedSourceMapConsumer=Iu});var ute=P(cte=>{var qke=z9().SourceMapGenerator,NR=Sb(),Hke=/(\r?\n)/,jke=10,Tb="$$$isSourceNode$$$";function Ya(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[Tb]=!0,n!=null&&this.add(n)}Ya.fromStringWithSourceMap=function(e,r,n){var i=new Ya,o=e.split(Hke),s=0,a=function(){var p=m(),f=m()||"";return p+f;function m(){return s<o.length?o[s++]:void 0}},c=1,u=0,l=null;return r.eachMapping(function(p){if(l!==null)if(c<p.generatedLine)d(l,a()),c++,u=0;else{var f=o[s]||"",m=f.substr(0,p.generatedColumn-u);o[s]=f.substr(p.generatedColumn-u),u=p.generatedColumn,d(l,m),l=p;return}for(;c<p.generatedLine;)i.add(a()),c++;if(u<p.generatedColumn){var f=o[s]||"";i.add(f.substr(0,p.generatedColumn)),o[s]=f.substr(p.generatedColumn),u=p.generatedColumn}l=p},this),s<o.length&&(l&&d(l,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=NR.join(n,p)),i.setSourceContent(p,f))}),i;function d(p,f){if(p===null||p.source===void 0)i.add(f);else{var m=n?NR.join(n,p.source):p.source;i.add(new Ya(p.originalLine,p.originalColumn,m,f,p.name))}}};Ya.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Tb]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Ya.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Tb]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Ya.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Tb]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Ya.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};Ya.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Tb]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};Ya.prototype.setSourceContent=function(e,r){this.sourceContents[NR.toSetString(e)]=r};Ya.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Tb]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(NR.fromSetString(i[r]),this.sourceContents[i[r]])};Ya.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};Ya.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new qke(e),i=!1,o=null,s=null,a=null,c=null;return this.walk(function(u,l){r.code+=u,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||c!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),o=l.source,s=l.line,a=l.column,c=l.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var d=0,p=u.length;d<p;d++)u.charCodeAt(d)===jke?(r.line++,r.column=0,d+1===p?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(u,l){n.setSourceContent(u,l)}),{code:r.code,map:n}};cte.SourceNode=Ya});var lte=P(LR=>{LR.SourceMapGenerator=z9().SourceMapGenerator;LR.SourceMapConsumer=ate().SourceMapConsumer;LR.SourceNode=ute().SourceNode});var pte=P((Oct,dte)=>{var Gke=Object.prototype.toString,Q9=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Vke(t){return Gke.call(t).slice(8,-1)==="ArrayBuffer"}function zke(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return Q9?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function $ke(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Q9?Buffer.from(t,e):new Buffer(t,e)}function Wke(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Vke(t)?zke(t,e,r):typeof t=="string"?$ke(t,e):Q9?Buffer.from(t):new Buffer(t)}dte.exports=Wke});var _te=P((I0,eF)=>{var Kke=lte().SourceMapConsumer,X9=require("path"),_l;try{_l=require("fs"),(!_l.existsSync||!_l.readFileSync)&&(_l=null)}catch{}var Yke=pte();function fte(t,e){return t.require(e)}var mte=!1,hte=!1,J9=!1,mT="auto",T0={},hT={},Qke=/^data:application\/json[^,]+base64,/,cm=[],um=[];function tF(){return mT==="browser"?!0:mT==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function Xke(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function Jke(){return typeof process=="object"&&process!==null?process.version:""}function Zke(){if(typeof process=="object"&&process!==null)return process.stderr}function eDe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function OR(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var rF=OR(cm);cm.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in T0)return T0[t];var e="";try{if(_l)_l.existsSync(t)&&(e=_l.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return T0[t]=e});function Z9(t,e){if(!t)return e;var r=X9.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+X9.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+X9.resolve(r.slice(i.length),e)}function tDe(t){var e;if(tF())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=rF(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var nF=OR(um);um.push(function(t){var e=tDe(t);if(!e)return null;var r;if(Qke.test(e)){var n=e.slice(e.indexOf(",")+1);r=Yke(n,"base64").toString(),e=t}else e=Z9(t,e),r=rF(e);return r?{url:e,map:r}:null});function iF(t){var e=hT[t.source];if(!e){var r=nF(t.source);r?(e=hT[t.source]={url:r.url,map:new Kke(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=Z9(e.url,i);T0[a]=s}})):e=hT[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=Z9(e.url,n.source),n}return t}function vte(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=iF({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+vte(e[2])+")":t}function rDe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),c=!(this.isToplevel()||a);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var l=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,l&&o.indexOf("."+l)!=o.length-l.length-1&&(i+=" [as "+l+"]")):i+=u+"."+(l||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function gte(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=rDe,e}function yte(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(Jke())?0:62;n===1&&i>s&&!tF()&&!t.isEval()&&(i-=s);var a=iF({source:r,line:n,column:i});e.curPosition=a,t=gte(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=vte(u),t=gte(t),t.getEvalOrigin=function(){return u}),t}function nDe(t,e){J9&&(T0={},hT={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+yte(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function bte(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=T0[r];if(!o&&_l&&_l.existsSync(r))try{o=_l.readFileSync(r,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function iDe(t){var e=bte(t),r=Zke();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),eDe(1)}function oDe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return iDe(arguments[1])}return t.apply(this,arguments)}}var sDe=cm.slice(0),aDe=um.slice(0);I0.wrapCallSite=yte;I0.getErrorSource=bte;I0.mapSourcePosition=iF;I0.retrieveSourceMap=nF;I0.install=function(t){if(t=t||{},t.environment&&(mT=t.environment,["node","browser","auto"].indexOf(mT)===-1))throw new Error("environment "+mT+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(cm.length=0),cm.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(um.length=0),um.unshift(t.retrieveSourceMap)),t.hookRequire&&!tF()){var e=fte(eF,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,s){return T0[s]=o,hT[s]=void 0,r.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(J9||(J9="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),mte||(mte=!0,Error.prepareStackTrace=nDe),!hte){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=fte(eF,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&Xke()&&(hte=!0,oDe())}};I0.resetRetrieveHandlers=function(){cm.length=0,um.length=0,cm=sDe.slice(0),um=aDe.slice(0),nF=OR(um),rF=OR(cm)}});var yre=P((Xlt,vNe)=>{vNe.exports={name:"copilot-chat",displayName:"GitHub Copilot Chat",description:"AI chat features powered by Copilot",version:"0.15.0",build:"1",internalAIKey:"1058ec22-3c95-4951-8443-f26c1f325911",ariaKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",buildType:"prod",publisher:"GitHub",homepage:"https://github.com/features/copilot?editor=vscode",license:"SEE LICENSE IN LICENSE.txt",repository:{type:"git",url:"https://github.com/microsoft/vscode-copilot-release"},bugs:{url:"https://aka.ms/microsoft/vscode-copilot-release"},qna:"https://github.com/github-community/community/discussions/categories/copilot",icon:"assets/Copilot-App-Icon.png",pricing:"Trial",engines:{vscode:"^1.89.0-20240424",npm:">=9.0.0",node:">=18.0.0"},categories:["Programming Languages","Machine Learning","Education","Snippets"],keywords:["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],badges:[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"%github.copilot.badge.signUp%"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"%github.copilot.badge.star%"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"%github.copilot.badge.youtube%"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"%github.copilot.badge.twitter%"}],activationEvents:["onStartupFinished","onLanguageModelAccess:copilot-gpt-3.5-turbo","onLanguageModelAccess:copilot-gpt-4"],main:"./dist/extension",l10n:"./l10n",enabledApiProposals:["extensionsAny","newSymbolNamesProvider","interactive","chatProvider","codeActionAI","findTextInFiles","findFiles2","textSearchProvider","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","mappedEditsProvider","aiRelatedInformation","chatParticipant","chatParticipantAdditions","defaultChatParticipant","chatVariableResolver","contribSourceControlInputBoxMenu","authLearnMore","testObserver","aiTextSearchProvider"],contributes:{chatParticipants:[{id:"github.copilot.default",name:"GitHub Copilot",description:"%copilot.description%",isDefault:!0,locations:["panel"]},{id:"github.copilot.editor",name:"GitHub Copilot",description:"%copilot.description%",isDefault:!0,locations:["editor"],defaultImplicitVariables:["_inlineChatContext","_inlineChatDocument"],commands:[{name:"doc",description:"%copilot.workspace.doc.description%"},{name:"fix",description:"%copilot.workspace.fix.description%"},{name:"explain",description:"%copilot.workspace.explain.description%"},{name:"tests",description:"%copilot.workspace.tests.description%"},{name:"fixTestFailure",description:"%copilot.workspace.fixTestFailure.description%",when:"github.copilot.chat.fixTestFailures.enabled"}]},{id:"github.copilot.workspace",name:"workspace",description:"%copilot.workspace.description%",commands:[{name:"explain",description:"%copilot.workspace.explain.description%"},{name:"review",description:"%copilot.workspace.review.description%",when:"config.github.copilot.advanced.review.intent"},{name:"tests",description:"%copilot.workspace.tests.description%"},{name:"fix",description:"%copilot.workspace.fix.description%",sampleRequest:"%copilot.workspace.fix.sampleRequest%"},{name:"new",description:"%copilot.workspace.new.description%",sampleRequest:"%copilot.workspace.new.sampleRequest%",isSticky:!0},{name:"newNotebook",description:"%copilot.workspace.newNotebook.description%",sampleRequest:"%copilot.workspace.newNotebook.sampleRequest"},{name:"fixTestFailure",description:"%copilot.workspace.fixTestFailure.description%",when:"github.copilot.chat.fixTestFailures.enabled"},{name:"semanticSearch",description:"%copilot.workspace.semanticSearch.description%",sampleRequest:"%copilot.workspace.semanticSearch.sampleRequest%",when:"config.github.copilot.semanticSearch.enabled"}]},{id:"github.copilot.vscode",name:"vscode",description:"%copilot.vscode.description%",commands:[{name:"search",description:"%copilot.vscode.search.description%",sampleRequest:"%copilot.vscode.search.sampleRequest%"},{name:"api",description:"%copilot.vscode.api.description%",sampleRequest:"%copilot.vscode.api.sampleRequest%"}]},{id:"github.copilot.terminal",name:"terminal",description:"%copilot.terminal.description%",locations:["panel","terminal"],commands:[{name:"explain",description:"%copilot.terminal.explain.description%",sampleRequest:"%copilot.terminal.explain.sampleRequest%"}]}],interactiveSession:[{label:"GitHub Copilot",id:"copilot",icon:"",when:"!github.copilot.interactiveSession.disabled"}],viewsWelcome:[{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.signIn%",when:"!github.copilot.activated && !github.copilot.offline && !github.copilot.interactiveSession.individual.disabled && !github.copilot.interactiveSession.individual.expired && !github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual%",when:"github.copilot.interactiveSession.individual.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual.expired%",when:"github.copilot.interactiveSession.individual.expired"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.enterprise%",when:"github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.offline%",when:"github.copilot.offline"}],commands:[{command:"github.copilotChat.signIn",title:"%github.copilot.command.signIn%",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.explain",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.explain.palette",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.review",title:"%github.copilot.command.reviewThis%",enablement:"config.github.copilot.advanced.review.intent && !github.copilot.interactiveSession.disabled",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.review.palette",title:"%github.copilot.command.reviewThis%",enablement:"config.github.copilot.advanced.review.palette && !github.copilot.interactiveSession.disabled",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generate",title:"%github.copilot.command.generateThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateDocs",title:"%github.copilot.command.generateDocs%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateTests",title:"%github.copilot.command.generateTests%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.fix",title:"%github.copilot.command.fixThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveSession.feedback",title:"%github.copilot.command.sendChatFeedback%",enablement:"github.copilot.activated && !github.copilot.interactiveSession.disabled",icon:"$(feedback)",category:"GitHub Copilot"},{command:"github.copilot.debug.workbenchState",title:"%github.copilot.command.logWorkbenchState%",category:"Developer"},{command:"github.copilot.ghpr.applySuggestion",title:"%github.copilot.command.applySuggestionWithCopilot%",icon:"$(sparkle)",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelection",title:"%github.copilot.command.explainTerminalSelection%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",title:"%github.copilot.command.explainTerminalSelectionContextMenu%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalLastCommand",title:"%github.copilot.command.explainTerminalLastCommand%",category:"GitHub Copilot"},{command:"github.copilot.git.generateCommitMessage",title:"%github.copilot.git.generateCommitMessage%",icon:"$(sparkle)",enablement:"!github.copilot.interactiveSession.disabled",category:"GitHub Copilot"},{command:"github.copilot.devcontainer.generateDevContainerConfig",title:"%github.copilot.devcontainer.generateDevContainerConfig%",category:"GitHub Copilot"},{command:"github.copilot.debug.contentExclusions",title:"%github.copilot.command.contentExclusions%",category:"GitHub Copilot",enablement:"github.copilot.copilotIgnoreEnabled"},{command:"github.copilot.tests.fixTestFailure",icon:"$(sparkle)",title:"%github.copilot.command.fixTestFailure%",category:"GitHub Copilot"}],configuration:{title:"Copilot",properties:{"github.copilot.editor.enableCodeActions":{type:"boolean",default:!0,description:"%github.copilot.config.enableCodeActions%"},"github.copilot.chat.localeOverride":{type:"string",enum:["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],enumDescriptions:["Use VS Code's configured display language","English","fran\xE7ais","italiano","Deutsch","espa\xF1ol","\u0440\u0443\u0441\u0441\u043A\u0438\u0439","\u4E2D\u6587(\u7B80\u4F53)","\u4E2D\u6587(\u7E41\u9AD4)","\u65E5\u672C\u8A9E","\uD55C\uAD6D\uC5B4","\u010De\u0161tina","portugu\xEAs","T\xFCrk\xE7e","polski"],default:"auto",markdownDescription:"%github.copilot.config.localeOverride%"},"github.copilot.chat.welcomeMessage":{type:"string",default:"first",markdownDescription:"%github.copilot.config.welcomeMessage%",markdownEnumDescriptions:["%github.copilot.config.welcomeMessage.first%","%github.copilot.config.welcomeMessage.always%","%github.copilot.config.welcomeMessage.never%"],enum:["first","always","never"]},"github.copilot.chat.terminalChatLocation":{type:"string",default:"chatView",markdownDescription:"%github.copilot.config.terminalChatLocation%",markdownEnumDescriptions:["%github.copilot.config.terminalChatLocation.chatView%","%github.copilot.config.terminalChatLocation.quickChat%","%github.copilot.config.terminalChatLocation.terminal%"],enum:["chatView","quickChat","terminal"]},"github.copilot.chat.scopeSelection":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.scopeSelection%",tags:["experimental"]},"github.copilot.chat.useProjectTemplates":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.useProjectTemplates%"}}},submenus:[{id:"copilot",label:"%github.copilot.submenu.copilot.label%"}],menus:{"editor/context":[{submenu:"copilot",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"1_copilot@0"}],copilot:[{command:"inlineChat.start",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilot@1"},{command:"github.copilot.interactiveEditor.explain",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@1"},{command:"github.copilot.interactiveEditor.fix",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@2"},{command:"github.copilot.interactiveEditor.review",when:"config.github.copilot.advanced.review.intent && !github.copilot.interactiveSession.disabled",group:"copilotAction@3"},{command:"github.copilot.interactiveEditor.generateDocs",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@4"},{command:"github.copilot.interactiveEditor.generateTests",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@5"}],"terminal/context":[{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",group:"1_copilot@0"}],commandPalette:[{command:"github.copilot.interactiveSession.feedback",when:"github.copilot.activated && !github.copilot.interactiveSession.disabled"},{command:"github.copilot.debug.workbenchState",when:"true"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",when:"false"},{command:"github.copilot.git.generateCommitMessage",when:"false"},{command:"github.copilot.interactiveEditor.explain",when:"false"},{command:"github.copilot.interactiveEditor.review",when:"false"},{command:"github.copilot.interactiveEditor.review.palette",when:"config.github.copilot.advanced.review.palette && !github.copilot.interactiveSession.disabled"},{command:"github.copilot.devcontainer.generateDevContainerConfig",when:"false"},{command:"github.copilot.tests.fixTestFailure",when:"false"}],"view/title":[{command:"github.copilot.interactiveSession.feedback",when:"view == workbench.panel.chat.view.copilot"},{command:"github.copilot.debug.contentExclusions",when:"view == workbench.panel.chat.view.copilot && github.copilot.copilotIgnoreEnabled"}],"comments/comment/title":[{command:"github.copilot.ghpr.applySuggestion",title:"Apply Suggestion with Copilot",group:"inline@0",when:"commentController =~ /^github-review/ && !(comment =~ /hasSuggestion/)"}],"scm/inputBox":[{command:"github.copilot.git.generateCommitMessage",when:"scmProvider == git"}],"testing/message/context":[{command:"github.copilot.tests.fixTestFailure",when:"testing.testItemHasUri && github.copilot.chat.fixTestFailures.enabled",group:"inline@1"}]},icons:{"copilot-logo":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0041"}},"copilot-warning":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0042"}},"copilot-notconnected":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0043"}}},iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],terminalQuickFixes:[{id:"copilot-chat.fixWithCopilot",commandLineMatcher:".+",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0},kind:"explain"},{id:"copilot-chat.generateCommitMessage",commandLineMatcher:"git add .+",commandExitResult:"success",kind:"explain",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0}}],languages:[{id:"ignore",filenamePatterns:[".copilotignore"]}]},extensionPack:["GitHub.copilot"],scripts:{postinstall:"tsx ./script/postinstall.ts",prepare:"tsx script/setup/prepare.ts","husky:install":"husky install","vscode:prepublish":"npm run build","vscode-dts:dev":"npx vscode-dts dev && mv vscode.proposed.*.ts src/extension",build:"tsx .esbuild.ts",compile:"tsx .esbuild.ts --dev",watch:"npm-run-all -p watch:*","watch:esbuild":"tsx .esbuild.ts --watch --dev","watch:tsc-extension":"tsc --noEmit --watch --project tsconfig.json","watch:tsc-simulation-workbench":"tsc --noEmit --watch --project test/simulation/workbench/tsconfig.json",typecheck:"tsc --noEmit -project tsconfig.json && tsc --noEmit --project test/simulation/workbench/tsconfig.json",lint:"eslint src test --max-warnings=0 --ext ts --ext tsx","lint-staged":"eslint --max-warnings=0 --ext ts --ext tsx",tsfmt:"npx tsfmt -r --verify",test:"npm-run-all test:*","test:extension":"vscode-test","test:unit":"mocha -u tdd dist/test-unit.js --require source-map-support/register --exit --timeout=5000","test:unit_vitest":"vitest --run",vitest:"vitest",get_token:"tsx script/setup/getToken.mts","patch-release":"tsx script/build/applyPatchForRelease.ts","patch-prerelease":"tsx script/build/applyPatchForRelease.ts -- --prerelease",prettier:"prettier --list-different --write --cache .",simulate:"node dist/simulationMain.js","simulate-ci":"node dist/simulationMain.js --ci --require-cache","simulate-baseline":"node dist/simulationMain.js --update-baseline",setup:"python script/setup/setup.py && npm run get_token","setup:dotnet":"run-script-os","setup:dotnet:darwin:linux":"curl -O https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.sh && chmod u+x dotnet-install.sh && ./dotnet-install.sh --version latest --quality GA --channel STS && rm dotnet-install.sh","setup:dotnet:win32":"Invoke-WebRequest -Uri https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.ps1 && chmod u+x dotnet-install.ps1 && ./dotnet-install.ps1 --version latest --quality GA --channel STS && rm dotnet-install.ps1",aml:"python test/aml/run.py",package:"vsce package"},devDependencies:{"@fluentui/react-components":"^9.44.4","@fluentui/react-icons":"^2.0.224","@nteract/messaging":"^7.0.20","@parcel/watcher":"^2.4.1","@types/eslint":"8.44.8","@types/kerberos":"^1.1.5","@types/markdown-it":"^13.0.7","@types/minimist":"^1.2.5","@types/mocha":"^10.0.6","@types/node":"^20.10.3","@types/picomatch":"^2.3.3","@types/react":"17.0.44","@types/react-dom":"^18.2.17","@types/sinon":"^17.0.2","@types/source-map-support":"^0.5.10","@types/tar":"^6.1.10","@types/vscode":"^1.85.0","@typescript-eslint/eslint-plugin":"^6.13.2","@typescript-eslint/parser":"^6.13.2","@typescript-eslint/typescript-estree":"^6.13.2","@vitest/snapshot":"^1.5.0","@vscode/dts":"^0.4.0","@vscode/test-cli":"^0.0.4","@vscode/test-electron":"^2.3.9","@vscode/vsce":"2.22.0","@vscode/zeromq":"0.2.0","csv-parse":"^5.5.2",dotenv:"^16.3.1",electron:"^27.1.3",esbuild:"^0.19.8",eslint:"^8.55.0","eslint-import-resolver-typescript":"^3.6.1","eslint-plugin-header":"^3.1.1","eslint-plugin-import":"^2.29.0","eslint-plugin-jsdoc":"^46.9.0","eslint-plugin-local":"^1.0.0","eslint-plugin-no-only-tests":"^3.1.0",glob:"^10.3.10",husky:"^8.0.3","lint-staged":"^15.2.0",minimist:"^1.2.8",mobx:"^6.12.0","mobx-react-lite":"^4.0.5",mocha:"^10.2.0","monaco-editor":"0.44.0","npm-run-all":"^4.1.5",open:"^10.0.4",outdent:"^0.8.0",picomatch:"^3.0.1",prettier:"^2.8.7",react:"^17.0.2","react-dom":"17.0.2","run-script-os":"^1.1.6",sinon:"^17.0.1",tar:"^6.2.0","tree-sitter-c-sharp":"^0.20.0","tree-sitter-cli":"^0.20.8","tree-sitter-cpp":"^0.20.3","tree-sitter-go":"^0.20.0","tree-sitter-java":"^0.20.2","tree-sitter-javascript":"^0.20.1","tree-sitter-python":"^0.20.4","tree-sitter-ruby":"^0.19.0","tree-sitter-rust":"^0.20.4","tree-sitter-typescript":"^0.20.3","ts-dedent":"^2.2.0","ts-node":"^10.9.1",tsx:"^4.6.2",typescript:"^5.3.2","typescript-formatter":"7.2.2","vite-plugin-top-level-await":"^1.4.1","vite-plugin-wasm":"^3.3.0",vitest:"^1.5.0",zeromq:"github:rebornix/zeromq.js#a19e8e373b3abc677f91b936d3f00d49b1b61792",zlib:"^1.0.5"},dependencies:{"@adobe/helix-fetch":"github:devm33/helix-fetch#eaa2f1344d93625e1bddb83d6846be5eea007e94","@humanwhocodes/gitignore-to-minimatch":"1.0.2","@roamhq/mac-ca":"^1.0.7","@vscode/extension-telemetry":"^0.9.4","@vscode/l10n":"^0.0.17","@vscode/prompt-tsx":"^0.1.5-alpha",applicationinsights:"^2.9.1",ignore:"^5.3.0",isbinaryfile:"^5.0.0","jsonc-parser":"^3.2.0","markdown-it":"^14.0.0",minimatch:"^9.0.3","source-map-support":"^0.5.21","vscode-tas-client":"^0.1.84","web-tree-sitter":"^0.20.8"},isPreRelease:!1}});var Wb=P(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.BaseTokensPerName=Cl.BaseTokensPerMessage=Cl.BaseTokensPerCompletion=Cl.ChatRole=void 0;var Pre;(function(t){t.System="system",t.User="user",t.Assistant="assistant"})(Pre||(Cl.ChatRole=Pre={}));Cl.BaseTokensPerCompletion=3;Cl.BaseTokensPerMessage=3;Cl.BaseTokensPerName=1});var Dre=P(()=>{"use strict";function MNe(t,e,...r){return{ctor:t,props:e,children:r.flat()}}function kre(){throw new Error("This should not be invoked!")}kre.isFragment=!0;globalThis.vscpp=MNe;globalThis.vscppf=kre});var qF=P(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});FA.PromptElement=void 0;Dre();var BF=class{get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};FA.PromptElement=BF});var zF=P(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.PrioritizedList=us.TextChunk=us.AssistantMessage=us.UserMessage=us.SystemMessage=us.BaseChatMessage=us.isChatMessagePromptElement=void 0;var GF=Wb(),VF=qF();function FNe(t){return t instanceof UA||t instanceof BA||t instanceof qA}us.isChatMessagePromptElement=FNe;var Kb=class extends VF.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};us.BaseChatMessage=Kb;var UA=class extends Kb{constructor(e){e.role=GF.ChatRole.System,super(e)}};us.SystemMessage=UA;var BA=class extends Kb{constructor(e){e.role=GF.ChatRole.User,super(e)}};us.UserMessage=BA;var qA=class extends Kb{constructor(e){e.role=GF.ChatRole.Assistant,super(e)}};us.AssistantMessage=qA;var HF=class extends VF.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};us.TextChunk=HF;var jF=class extends VF.PromptElement{render(){let e=this.props.children;if(e)return vscpp(vscppf,null,e.map((r,n)=>(r.props??(r.props={}),r.props.priority=this.props.descending?this.props.priority-n:this.props.priority-e.length+n,r)))}};us.PrioritizedList=jF});var Nre=P(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.bytePairEncode=Rl.BinaryMap=Rl.binaryMapKey=void 0;var UNe=(t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,s=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),a=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&s;return o+16777216*a};Rl.binaryMapKey=UNe;var $F=class t{constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,Rl.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,Rl.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let s=new t;s.set(e.subarray(6),r),this.nested.set(n,s)}}};Rl.BinaryMap=$F;var wl=new Int32Array(128),Fs=new Int32Array(128);function BNe(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;wl.length<r*2;)Fs=new Int32Array(Fs.length*2),wl=new Int32Array(wl.length*2);for(let c=0;c<r-1;c++){let u=e.get(t,c,c+2)??2147483647;u<n&&(n=u,i=c),Fs[c]=c,wl[c]=u}Fs[r-1]=r-1,wl[r-1]=2147483647,Fs[r]=r,wl[r]=2147483647;let o=r+1;function s(c,u=0){if(c+u+2<o){let l=e.get(t,Fs[c],Fs[c+u+2]);if(l!==void 0)return l}return 2147483647}for(;n!==2147483647;){wl[Fs[i]]=s(i,1),i>0&&(wl[Fs[i-1]]=s(i-1,1));for(let c=i+1;c<o-1;c++)Fs[c]=Fs[c+1];o--,i=-1,n=2147483647;for(let c=0;c<o-1;c++){let u=wl[Fs[c]];wl[Fs[c]]<n&&(n=u,i=c)}}let a=[];for(let c=0;c<o-1;c++)a.push(e.get(t,Fs[c],Fs[c+1]));return a}Rl.bytePairEncode=BNe});var Lre=P(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0});HA.makeTextEncoder=void 0;var WF=class{constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},KF=class{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},qNe=()=>typeof Buffer<"u"?new KF:new WF;HA.makeTextEncoder=qNe});var Ore=P(jA=>{"use strict";Object.defineProperty(jA,"__esModule",{value:!0});jA.LRUCache=void 0;var YF=class{constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new QF(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};jA.LRUCache=YF;var QF=class{constructor(e,r){this.key=e,this.value=r}}});var JF=P(VA=>{"use strict";Object.defineProperty(VA,"__esModule",{value:!0});VA.TikTokenizer=void 0;var HNe=require("fs"),jNe=require("util"),GA=Nre(),GNe=Lre(),VNe=Ore();function zNe(t){let e=new Map;try{let n=HNe.readFileSync(t,"utf-8");return r(n),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let s=new Uint8Array(Buffer.from(o[0],"base64")),a=parseInt(o[1]);if(!isNaN(a))e.set(s,a);else throw new Error(`Can't parse ${o[1]} to integer`)}}}function $Ne(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var XF=class{constructor(e,r,n,i=8192){this.textEncoder=(0,GNe.makeTextEncoder)(),this.textDecoder=new jNe.TextDecoder("utf-8"),this.cache=new VNe.LRUCache(i);let o=zNe(e);this.init(o,r,n)}init(e,r,n){this.encoder=new GA.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>$Ne(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let s=o?i+o.index:e.length;return[o,s]}encode(e,r){let n=[],i=0;for(;;){let o,s;if([o,s]=this.findNextSpecialToken(e,i,r),s>i&&this.encodeByIndex(e,n,i,s),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,s=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(s);){let a=this.cache.get(o[0]);if(a)for(let c of a)r.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let l=(0,GA.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let d of l)r.push(d);this.cache.set(o[0],l)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,s,a){let c,u=e.substring(n,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let l=c[0],d=this.cache.get(l);if(d)if(s+d.length<=o)s+=d.length,a+=l.length,r.push(...d);else{let p=o-s;s+=p,a+=l.length,r.push(...d.slice(0,p));break}else{let p=this.textEncoder.encode(l),f=this.encoder.get(p,0,p.length);if(f!==void 0)if(this.cache.set(l,[f]),s+1<=o)s++,a+=l.length,r.push(f);else break;else{let m=(0,GA.bytePairEncode)(p,this.encoder,this.textEncoder.length);if(this.cache.set(l,m),s+m.length<=o){s+=m.length,a+=l.length;for(let h of m)r.push(h)}else{let h=o-s;s+=h,a+=l.length;for(let g=0;g<h;g++)r.push(m[g]);break}}}if(s>=o)break}return{tokenCount:s,encodeLength:a}}encodeTrimSuffix(e,r,n){let i=[],o=0,s=0,a=0;for(;;){let u,l;if([u,l]=this.findNextSpecialToken(e,o,n),l>o){let{tokenCount:d,encodeLength:p}=this.encodeTrimSuffixByIndex(e,i,o,l,r,s,a);if(s=d,a=p,s>=r)break}if(u!==null){if(s++,s<=r&&(o=o+this.encodeSpecialToken(i,u),a+=u[0].length,o>=e.length)||s>=r)break}else break}let c=a===e.length?e:e.slice(0,a);return{tokenIds:i,text:c}}encodeTrimPrefix(e,r,n){let i=[],o=0,s=0,a=0,c=new Map;for(c.set(s,a);;){let p,f;if([p,f]=this.findNextSpecialToken(e,o,n),f>o){let m,h=e.substring(o,f);for(this.regex.lastIndex=0;m=this.regex.exec(h);){let g=m[0],v=this.cache.get(g);if(v)s+=v.length,a+=g.length,i.push(...v),c.set(s,a);else{let b=this.textEncoder.encode(g),y=this.encoder.get(b);if(y!==void 0)this.cache.set(g,[y]),s++,a+=g.length,i.push(y),c.set(s,a);else{let S=(0,GA.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(g,S),s+=S.length,a+=g.length;for(let x of S)i.push(x);c.set(s,a)}}}}if(p!==null){if(o=o+this.encodeSpecialToken(i,p),s++,a+=p[0].length,c.set(s,a),o>=e.length)break}else break}if(s<=r)return{tokenIds:i,text:e};let u=s-r,l=0,d=0;for(let[p,f]of c)if(p>=u){l=p,d=f;break}if(l>r){let p=this.encode(e,n),f=p.slice(p.length-r);return{tokenIds:f,text:this.decode(f)}}return{tokenIds:i.slice(l),text:e.slice(d)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let s=this.specialTokensDecoder?.get(n);if(s!==void 0){let a=this.textEncoder.encode(s);i=Array.from(a.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};VA.TikTokenizer=XF});var Gre=P(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.createTokenizer=Di.createByEncoderName=Di.createByModelName=Di.getRegexByModel=Di.getRegexByEncoder=Di.getSpecialTokensByModel=Di.getSpecialTokensByEncoder=Di.MODEL_TO_ENCODING=void 0;var zA=require("fs"),ZF=require("path"),WNe=JF(),KNe=new Map([["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"]]);Di.MODEL_TO_ENCODING=new Map([["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var e7="<|endoftext|>",Mre="<|fim_prefix|>",Fre="<|fim_middle|>",Ure="<|fim_suffix|>",YNe="<|endofprompt|>",UT="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",Bre="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+";function t7(t){let e="";if(Di.MODEL_TO_ENCODING.has(t))e=Di.MODEL_TO_ENCODING.get(t);else for(let[r,n]of KNe)if(t.startsWith(r)){e=n;break}return e}async function QNe(t,e){let r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let n=await r.text();zA.writeFileSync(e,n)}function r7(t){let e=new Map([[e7,50256]]);switch(t){case"cl100k_base":e=new Map([[e7,100257],[Mre,100258],[Fre,100259],[Ure,100260],[YNe,100276]]);break;case"p50k_edit":e=new Map([[e7,50256],[Mre,50281],[Fre,50282],[Ure,50283]]);break;default:break}return e}Di.getSpecialTokensByEncoder=r7;function XNe(t){let e=t7(t);return r7(e)}Di.getSpecialTokensByModel=XNe;function qre(t){switch(t){case"cl100k_base":return Bre;default:break}return UT}Di.getRegexByEncoder=qre;function JNe(t){let e=t7(t);return qre(e)}Di.getRegexByModel=JNe;async function ZNe(t,e=null){return Hre(t7(t),e)}Di.createByModelName=ZNe;async function Hre(t,e=null){let r,n,i=r7(t);switch(t){case"cl100k_base":r=Bre,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=UT,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=UT,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=UT,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=UT,n="https://pythia.blob.core.windows.net/public/encoding/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=ZF.basename(n),s=ZF.resolve(__dirname,"..","model");zA.existsSync(s)||zA.mkdirSync(s,{recursive:!0});let a=ZF.resolve(s,o);return zA.existsSync(a)||(console.log(`Downloading file from ${n}`),await QNe(n,a),console.log(`Saved file to ${a}`)),jre(a,i,r)}Di.createByEncoderName=Hre;function jre(t,e,r,n=8192){return new WNe.TikTokenizer(t,e,r,n)}Di.createTokenizer=jre});var Vre=P(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.createTokenizer=Ni.createByEncoderName=Ni.createByModelName=Ni.getSpecialTokensByModel=Ni.getSpecialTokensByEncoder=Ni.getRegexByModel=Ni.getRegexByEncoder=Ni.MODEL_TO_ENCODING=Ni.TikTokenizer=void 0;var e4e=JF();Object.defineProperty(Ni,"TikTokenizer",{enumerable:!0,get:function(){return e4e.TikTokenizer}});var Sm=Gre();Object.defineProperty(Ni,"MODEL_TO_ENCODING",{enumerable:!0,get:function(){return Sm.MODEL_TO_ENCODING}});Object.defineProperty(Ni,"getRegexByEncoder",{enumerable:!0,get:function(){return Sm.getRegexByEncoder}});Object.defineProperty(Ni,"getRegexByModel",{enumerable:!0,get:function(){return Sm.getRegexByModel}});Object.defineProperty(Ni,"getSpecialTokensByEncoder",{enumerable:!0,get:function(){return Sm.getSpecialTokensByEncoder}});Object.defineProperty(Ni,"getSpecialTokensByModel",{enumerable:!0,get:function(){return Sm.getSpecialTokensByModel}});Object.defineProperty(Ni,"createByModelName",{enumerable:!0,get:function(){return Sm.createByModelName}});Object.defineProperty(Ni,"createByEncoderName",{enumerable:!0,get:function(){return Sm.createByEncoderName}});Object.defineProperty(Ni,"createTokenizer",{enumerable:!0,get:function(){return Sm.createTokenizer}})});var o7=P(WA=>{"use strict";Object.defineProperty(WA,"__esModule",{value:!0});WA.Cl100KBaseTokenizer=void 0;var n7=Vre(),t4e=require("path"),$A=Wb(),i7=class{constructor(){this.models=["gpt-4","gpt-3.5-turbo","text-embedding-ada-002"],this.baseTokensPerMessage=$A.BaseTokensPerMessage,this.baseTokensPerName=$A.BaseTokensPerName,this.baseTokensPerCompletion=$A.BaseTokensPerCompletion}tokenize(e){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encode(e)}encodeTrimSuffix(e,r){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encodeTrimSuffix(e,r,[]).text}tokenLength(e){return e?this.tokenize(e).length:0}countMessageTokens(e){let r=this.baseTokensPerMessage;for(let[n,i]of Object.entries(e))i&&(r+=this.tokenLength(i),n==="name"&&(r+=this.baseTokensPerName));return r}countCompletionTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r+=$A.BaseTokensPerCompletion,r}initTokenizer(){return(0,n7.createTokenizer)((0,t4e.join)(__dirname,"./cl100k_base.tiktoken"),(0,n7.getSpecialTokensByEncoder)("cl100k_base"),(0,n7.getRegexByEncoder)("cl100k_base"),64e3)}};WA.Cl100KBaseTokenizer=i7});var zre=P(KA=>{"use strict";Object.defineProperty(KA,"__esModule",{value:!0});KA.coalesce=void 0;function r4e(t){return t.filter(e=>!!e)}KA.coalesce=r4e});var p7=P(Yb=>{"use strict";Object.defineProperty(Yb,"__esModule",{value:!0});Yb.PromptRenderer=Yb.MetadataMap=void 0;var n4e=Wb(),XA=zF(),i4e=o7(),YA=zre(),$re;(function(t){t.empty={get:()=>{}}})($re||(Yb.MetadataMap=$re={}));var s7=class{constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._meta=new Map,this._usedContext=[],this._ignoredFiles=[],this._replyInterpreterFactory=null,this._queue=[],this._root=new l7(null,0,{tokenBudget:this._endpoint.modelMaxPromptTokens,endpoint:this._endpoint}),this._references=[],this._tokenizer=i??new i4e.Cl100KBaseTokenizer,this._queue.push({node:this._root,ctor:this._ctor,props:this._props,children:[]})}getAllMeta(){let e=this._meta;return{get(r){return e.get(r)}}}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getMeta(e){return this._meta.get(e)}getUsedContext(){return this._usedContext}getReplyInterpreterFactory(){return this._replyInterpreterFactory}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r){for(;this._queue.length>0;){let n=[];for(let i of this._queue.values()){if(Array.isArray(i.children)&&(i.props=i.props??{},i.props.children=i.children),!i.ctor)throw new Error("Invalid ChatMessage child! Child must be a TSX component that extends PromptElement.");let o=this.createElement(i);i.node.setObj(o),n.push({element:i,promptElementInstance:o})}this._queue.splice(0,this._queue.length),await Promise.all(n.map(({element:i,promptElementInstance:o})=>o.prepare?.(i.node.sizing,e,r).then(s=>i.node.setState(s))));for(let{element:i,promptElementInstance:o}of n){let s=o.render(i.node.getState(),i.node.sizing);if(!s)continue;let a=Wre(s),{flexChildrenSum:c,parentTokenBudgetWithoutLiterals:u}=o4e(this._tokenizer,i,o,a);for(let l of a)this._handlePromptPiece(i,l,c,u)}}}_prioritize(e,r,n){let i=[],o=[],s=0;for(;s<e.length;){if(!e[s].isImplicitLinebreak){let c=e[s-1]?.isImplicitLinebreak?{index:s,precedingLinebreak:s-1}:{index:s};i.push(c),o[s]=null}s+=1}i.sort((c,u)=>r(e[c.index],e[u.index]));let a=this._endpoint.modelMaxPromptTokens-this._tokenizer.baseTokensPerCompletion;for(;i.length>0;){let c=i.shift(),u=c.index,l=e[u],d=n(l),p;if(c.precedingLinebreak&&(p=e[c.precedingLinebreak],d+=n(p)),d>a)break;o[u]=l,c.precedingLinebreak&&p&&(o[c.precedingLinebreak]=p),a-=d}return{result:(0,YA.coalesce)(o),tokenCount:this._endpoint.modelMaxPromptTokens-a}}async render(e,r){await this._processPromptPieces(e,r);let{result:n,resultChunks:i}=this._root.materialize(),o=new Set,{result:s}=this._prioritize(i,(f,m)=>F0.cmp(f,m),f=>{let m=this._tokenizer.tokenLength(f.text);return o.has(f.message)||(o.add(f.message),m=this._tokenizer.countMessageTokens(f.toChatMessage())),m}),a=new Map;for(let f of(0,YA.coalesce)(s)){let m=a.get(f.message)??[];m[f.childIndex]=f,a.set(f.message,m)}let c=[];for(let f of n){let m=a.get(f);if(m){f.chunks=(0,YA.coalesce)(m);for(let h of m)h&&h.references.length>0&&f.references.push(...h.references);c.push(f)}}let{result:u,tokenCount:l}=this._prioritize(c,(f,m)=>JA.cmp(f,m),f=>this._tokenizer.countMessageTokens(f.toChatMessage())),d=u.map(f=>f?.toChatMessage()),{references:p}=u.reduce((f,m)=>([...this._references,...m.references].forEach(h=>{let g="variableName"in h.anchor;g&&!f.names.has(h.anchor.variableName)?(f.references.push(h),f.names.add(h.anchor.variableName)):g||f.references.push(h)}),f),{references:[],names:new Set});return{messages:this._validate(d),hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:(0,YA.coalesce)(p)}}_validate(e){let r=e[e.length-1];return r&&r.role!==n4e.ChatRole.User&&console.error("Sorry, this message is too long. Please try a shorter question."),e}_handlePromptPiece(e,r,n,i){if(r.kind==="literal"){e.node.appendStringChild(r.value,e.props.priority??Number.MAX_SAFE_INTEGER);return}if(r.kind==="intrinsic"){this._handleIntrinsic(e.node,r.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...r.props},QA(r.children));return}if(r.ctor===XA.TextChunk){this._handleExtrinsicTextChunk(e.node,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...r.props},QA(r.children));return}let o=e.node.createChild({tokenBudget:Math.floor(i*(r.props?.flex??1)/n),endpoint:this._endpoint});this._queue.push({node:o,ctor:r.ctor,props:{priority:e.props.priority,...r.props},children:r.children})}_handleIntrinsic(e,r,n,i){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"replyInterpreter":return this._handleIntrinsicReplyInterpreter(e,n,i)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");let i=Object.getPrototypeOf(r.value).constructor;if(this._meta.has(i))throw new Error(`Duplicate metadata ${i.name}!`);this._meta.set(i,r.value)}_handleIntrinsicLineBreak(e,r,n,i){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(!0,i??Number.MAX_SAFE_INTEGER)}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");e.addReferences(r.value),this._references.push(...r.value)}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleIntrinsicReplyInterpreter(e,r,n){if(n.length>0)throw new Error("<replyInterpreter /> must not have children!");this._replyInterpreterFactory=r.value}_handleExtrinsicTextChunk(e,r,n){let i=[],o=[];for(let s of n){if(s.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");s.kind==="literal"&&i.push(s.value),s.kind==="intrinsic"&&(s.name==="br"?i.push(`
`):s.name==="references"?o.push(...s.props.value):this._handleIntrinsic(e,s.name,s.props,QA(s.children)))}e.appendLineBreak(!1),e.appendStringChild(i.join(""),r?.priority??Number.MAX_SAFE_INTEGER,o)}};Yb.PromptRenderer=s7;function o4e(t,e,r,n){let i=0,o=e.node.sizing.tokenBudget;(0,XA.isChatMessagePromptElement)(r)&&(o-=t.baseTokensPerMessage,e.props.name&&(o-=t.baseTokensPerName),e.props.role&&(o-=t.tokenLength(e.props.role)));for(let s of n)s.kind==="literal"?o-=t.tokenLength(s.value):i+=s.props?.flex??1;return{parentTokenBudgetWithoutLiterals:o,flexChildrenSum:i}}function Wre(t){return typeof t>"u"||typeof t=="boolean"?[]:typeof t=="string"||typeof t=="number"?[new u7(String(t))]:s4e(t)?[...QA(t.children)]:typeof t.ctor=="string"?[new a7(t.ctor,t.props,t.children)]:[new c7(t.ctor,t.props,t.children)]}function QA(t){return(t??[]).reduce((e,r)=>(e.push(...Wre(r)),e),[])}var a7=class{constructor(e,r,n){this.name=e,this.props=r,this.children=n,this.kind="intrinsic"}},c7=class{constructor(e,r,n){this.ctor=e,this.props=r,this.children=n,this.kind="extrinsic"}},u7=class{constructor(e,r){this.value=e,this.priority=r,this.kind="literal"}},l7=class t{constructor(e=null,r,n){this.parent=e,this.childIndex=r,this._sizing=n,this.kind=0,this._obj=null,this._state=void 0,this._children=[],this._references=[]}set sizing(e){this._sizing=e}get sizing(){return this._sizing}setObj(e){this._obj=e}setState(e){this._state=e}getState(){return this._state}createChild(e){let r=new t(this,this._children.length,e);return this._children.push(r),r}appendStringChild(e,r,n){this._children.push(new d7(this,e,r,n))}appendLineBreak(e=!0,r){this._children.push(new ZA(this,e,r))}materialize(){let e=[],r=[];return this._materialize(e,r),{result:e,resultChunks:r}}_materialize(e,r){if(this._obj instanceof XA.BaseChatMessage){if(!this._obj.props.role)throw new Error("Invalid ChatMessage!");let n=[];for(let a of this._children)a.collectLeafs(n);let i=[],o=new JA(this._obj.props.role,this._obj.props.name,this._obj.props.priority,this.childIndex,i),s=r.length;n.forEach((a,c)=>{a.kind===1?i.push(new F0(o,a.text,a.priority,s++,!1,a.references??this._references)):a.isExplicit?i.push(new F0(o,`
`,a.priority,s++)):(i.length>0&&i[i.length-1].text!==`
`||i[c-1]&&i[c-1].text!==`
`)&&i.push(new F0(o,`
`,a.priority,s++,!0))}),r.push(...i),e.push(o)}else for(let n of this._children){if(n.kind===1)throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${n.text}"`);if(n.kind===2)throw new Error("Cannot have a line break node outside a ChatMessage!");n._materialize(e,r)}}collectLeafs(e){if(this._obj instanceof XA.BaseChatMessage)throw new Error("Cannot have a ChatMessage nested inside a ChatMessage!");this._obj?.insertLineBreakBefore&&e.push(new ZA(this,!1));for(let r of this._children)r.collectLeafs(e)}addReferences(e){this._references.push(...e)}},F0=class{constructor(e,r,n,i,o=!1,s=[]){this.message=e,this.text=r,this.priority=n,this.childIndex=i,this.isImplicitLinebreak=o,this.references=s}static cmp(e,r){return e.priority!==void 0&&r.priority!==void 0&&e.priority===r.priority?e.message===r.message?e.childIndex-r.childIndex:r.childIndex-e.childIndex:e.priority!==void 0&&r.priority!==void 0&&e.priority!==r.priority?r.priority-e.priority:e.childIndex-r.childIndex}toChatMessage(){return{role:this.message.role,content:this.text,...this.message.name?{name:this.message.name}:{}}}},JA=class{constructor(e,r,n,i,o,s=[]){this.role=e,this.name=r,this.priority=n,this.childIndex=i,this._chunks=o,this.references=s}set chunks(e){this._chunks=e.sort(F0.cmp)}get text(){return this._chunks.reduce((e,r,n)=>((n!==this._chunks.length-1||!r.isImplicitLinebreak)&&(e+=r.text),e),"")}toChatMessage(){return{role:this.role,content:this.text,...this.name?{name:this.name}:{}}}static cmp(e,r){return e.priority!==r.priority?(r.priority||0)-(e.priority||0):r.childIndex-e.childIndex}},d7=class{constructor(e,r,n,i){this.parent=e,this.text=r,this.priority=n,this.references=i,this.kind=1}collectLeafs(e){e.push(this)}},ZA=class{constructor(e,r,n){this.parent=e,this.isExplicit=r,this.priority=n,this.kind=2}collectLeafs(e){e.push(this)}};function s4e(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}});var Kre=P(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});Qb.PromptReference=Qb.PromptMetadata=void 0;var f7=class{toString(){return Object.getPrototypeOf(this).constructor.name}};Qb.PromptMetadata=f7;var m7=class{constructor(e){this.anchor=e}};Qb.PromptReference=m7});var Qre=P(Yre=>{"use strict";Object.defineProperty(Yre,"__esModule",{value:!0})});var Jre=P(Xre=>{"use strict";Object.defineProperty(Xre,"__esModule",{value:!0})});var st=P(Tr=>{"use strict";var a4e=Tr&&Tr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),g7=Tr&&Tr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&a4e(e,t,r)};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.toVsCodeChatMessages=Tr.renderPrompt=Tr.PromptRenderer=Tr.MetadataMap=Tr.PromptElement=Tr.UserMessage=Tr.TextChunk=Tr.SystemMessage=Tr.PrioritizedList=Tr.AssistantMessage=Tr.Cl100KBaseTokenizer=Tr.ChatRole=void 0;var h7=Wb(),c4e=p7(),u4e=Wb();Object.defineProperty(Tr,"ChatRole",{enumerable:!0,get:function(){return u4e.ChatRole}});g7(Kre(),Tr);var l4e=o7();Object.defineProperty(Tr,"Cl100KBaseTokenizer",{enumerable:!0,get:function(){return l4e.Cl100KBaseTokenizer}});g7(Qre(),Tr);g7(Jre(),Tr);var BT=zF();Object.defineProperty(Tr,"AssistantMessage",{enumerable:!0,get:function(){return BT.AssistantMessage}});Object.defineProperty(Tr,"PrioritizedList",{enumerable:!0,get:function(){return BT.PrioritizedList}});Object.defineProperty(Tr,"SystemMessage",{enumerable:!0,get:function(){return BT.SystemMessage}});Object.defineProperty(Tr,"TextChunk",{enumerable:!0,get:function(){return BT.TextChunk}});Object.defineProperty(Tr,"UserMessage",{enumerable:!0,get:function(){return BT.UserMessage}});var d4e=qF();Object.defineProperty(Tr,"PromptElement",{enumerable:!0,get:function(){return d4e.PromptElement}});var Zre=p7();Object.defineProperty(Tr,"MetadataMap",{enumerable:!0,get:function(){return Zre.MetadataMap}});Object.defineProperty(Tr,"PromptRenderer",{enumerable:!0,get:function(){return Zre.PromptRenderer}});async function p4e(t,e,r,n,i,o,s="vscode"){let a=new c4e.PromptRenderer(r,t,e,n),{messages:c,tokenCount:u,references:l}=await a.render(i,o),d=a.getAllMeta(),p=a.getUsedContext();return s==="vscode"&&(c=ene(c)),{messages:c,tokenCount:u,metadatas:d,usedContext:p,references:l}}Tr.renderPrompt=p4e;function ene(t){let e=require("vscode");return t.map(r=>{switch(r.role){case h7.ChatRole.System:return new e.LanguageModelChatSystemMessage(r.content);case h7.ChatRole.Assistant:return new e.LanguageModelChatAssistantMessage(r.content,r.name);case h7.ChatRole.User:return new e.LanguageModelChatUserMessage(r.content,r.name)}})}Tr.toVsCodeChatMessages=ene});var tie=P((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),readBinary=t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},readAsync=(t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=t=>document.title=t);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var s=t[e++];if(128&s){var a=63&t[e++];if((224&s)!=192){var c=63&t[e++];if((s=(240&s)==224?(15&s)<<12|a<<6|c:(7&s)<<18|a<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),a<=127){if(r>=o)break;e[r++]=a}else if(a<=2047){if(r+1>=o)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=o)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}return e[r]=0,r-i}function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}function isFileURI(t){return t.startsWith("file://")}function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var s=i.exports;s=relocateExports(s,1024);var a=getDylinkMetadata(o);a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(s,"main"),Module.asm=s,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function r(i){e(i.instance,i.module)}function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r}};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}function getDylinkMetadata(t){var e=0,r=0;function n(){for(var v=0,b=1;;){var y=t[e++];if(v+=(127&y)*b,b*=128,!(128&y))break}return v}function i(){var v=n();return UTF8ArrayToString(t,(e+=v)-v,v)}function o(v,b){if(v)throw new Error(b)}var s="dylink.0";if(t instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(t,s);a.length===0&&(s="dylink",a=WebAssembly.Module.customSections(t,s)),o(a.length===0,"need dylink section"),r=(t=new Uint8Array(a[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=n();r=e+c,s=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(s=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var l=n(),d=0;d<l;++d){var p=i();u.neededDynlibs.push(p)}}else for(o(s!=="dylink.0");e<r;){var f=t[e++],m=n();if(f===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(f===2)for(l=n(),d=0;d<l;++d)p=i(),u.neededDynlibs.push(p);else if(f===3)for(var h=n();h--;){var g=i();256&n()&&u.tlsExports.add(g)}else if(f===4)for(h=n();h--;)i(),g=i(),(3&n())==1&&u.weakImports.add(g);else e+=m}return u}function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}function alignMemory(t,e){return Math.ceil(t/e)*e}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(a){if(e.fs&&e.fs.findObject(a)){var c=e.fs.readFile(a,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(a=locateFile(a),e.loadAsync)return new Promise(function(u,l){readAsync(a,d=>u(new Uint8Array(d)),l)});if(!readBinary)throw new Error(a+": file not found, and synchronous loading of external files is not available");return readBinary(a)}function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var a=preloadedWasm[t];return e.loadAsync?Promise.resolve(a):a}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,r)}):loadWebAssemblyModule(i(t),e,r)}function s(a){n.global&&mergeLibSymbols(a,t),n.module=a}return n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(a){return s(a),!0}):(s(o()),!0)}function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((s=65536)-o%s)%s)))return!0}var o,s;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},doStat:function(t,e,r){try{var n=t(e)}catch(a){if(a&&a.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(a.node)))return-54;throw a}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),s=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=s%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(t){return UTF8ToString(t)},getStreamFromFD:function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e}};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var s=SYSCALLS.getStreamFromFD(t);return FS.llseek(s,o,n),tempI64=[s.position>>>0,(tempDouble=s.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],s.getdents&&o===0&&n===0&&(s.getdents=null),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var s=HEAPU32[e>>2],a=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,s,a,n);if(c<0)return-1;i+=c,n!==void 0&&(n+=c)}return i}function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var s=t.charCodeAt(o);HEAP16[e>>1]=s,e+=2}return HEAP16[e>>1]=0,e-n}function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(s=>{HEAP32[i++]=allocateUTF8OnStack(s)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(s){return handleException(s)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=(c,u,l)=>e.slice(c,l);else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,n.includedRanges[u]),c+=SIZE_OF_RANGE}let s=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!s)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let a=new Tree(INTERNAL,s,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,a}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let s=0;s<r;s++)i[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let l=0,d=o.length;l<d;l++)e.includes(o[l])&&i.push(l);let s=C._malloc(SIZE_OF_INT*i.length);for(let l=0,d=i.length;l<d;l++)setValue(s+l*SIZE_OF_INT,i[l],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],s,i.length,r.row,r.column,n.row,n.column);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(a);if(a>0){let l=c;for(let d=0;d<a;d++)u[d]=unmarshalNode(this.tree,l),l+=SIZE_OF_NODE}return C._free(c),C._free(s),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,v=e.substr(g,100).split(`
`)[0],b,y=v.match(QUERY_WORD_REGEX)[0];switch(h){case 2:b=new RangeError(`Bad node name '${y}'`);break;case 3:b=new RangeError(`Bad field name '${y}'`);break;case 4:b=new RangeError(`Bad capture name @${y}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${g}: '${v}'...`),y="";break;default:b=new SyntaxError(`Bad syntax at offset ${g}: '${v}'...`),y=""}throw b.index=g,b.length=y.length,C._free(n),b}let o=C._ts_query_string_count(i),s=C._ts_query_capture_count(i),a=C._ts_query_pattern_count(i),c=new Array(s),u=new Array(o);for(let h=0;h<s;h++){let g=C._ts_query_capture_name_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");c[h]=UTF8ToString(g,v)}for(let h=0;h<o;h++){let g=C._ts_query_string_value_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");u[h]=UTF8ToString(g,v)}let l=new Array(a),d=new Array(a),p=new Array(a),f=new Array(a),m=new Array(a);for(let h=0;h<a;h++){let g=C._ts_query_predicates_for_pattern(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");f[h]=[],m[h]=[];let b=[],y=g;for(let S=0;S<v;S++){let x=getValue(y,"i32");y+=SIZE_OF_INT;let T=getValue(y,"i32");if(y+=SIZE_OF_INT,x===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:c[T]});else if(x===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[T]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let L=b[0].value,M=!0;switch(L){case"not-eq?":M=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let z=b[1].name,D=b[2].name;m[h].push(function(E){let k,F;for(let N of E)N.name===z&&(k=N.node),N.name===D&&(F=N.node);return k===void 0||F===void 0||k.text===F.text===M})}else{let z=b[1].name,D=b[2].value;m[h].push(function(E){for(let k of E)if(k.name===z)return k.node.text===D===M;return!0})}break;case"not-match?":M=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let q=b[1].name,O=new RegExp(b[2].value);m[h].push(function(z){for(let D of z)if(D.name===q)return O.test(D.node.text)===M;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(z=>z.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');l[h]||(l[h]={}),l[h][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${L}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(z=>z.type!=="string"))throw new Error(`Arguments to \`#${L}\` predicate must be a strings.".`);let Z=L==="is?"?d:p;Z[h]||(Z[h]={}),Z[h][b[1].value]=b[2]?b[2].value:null;break;default:f[h].push({operator:L,operands:b.slice(1)})}b.length=0}}Object.freeze(l[h]),Object.freeze(d[h]),Object.freeze(p[h])}return C._free(n),new Query(INTERNAL,i,c,m,f,Object.freeze(l),Object.freeze(d),Object.freeze(p))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let a=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${a}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),s=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let a=i[s]();return new Language(INTERNAL,a)})}}class Query{constructor(e,r,n,i,o,s,a,c){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=s,this.assertedProperties=a,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(s);this.exceededMatchLimit=!!c;let l=0,d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=new Array(m);if(d=unmarshalCaptures(this,e.tree,d,h),this.textPredicates[f].every(g=>g(h))){u[l++]={pattern:f,captures:h};let g=this.setProperties[f];g&&(u[p].setProperties=g);let v=this.assertedProperties[f];v&&(u[p].assertedProperties=v);let b=this.refutedProperties[f];b&&(u[p].refutedProperties=b)}}return u.length=l,C._free(a),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let l=[],d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=getValue(d,"i32");if(d+=SIZE_OF_INT,l.length=m,d=unmarshalCaptures(this,e.tree,d,l),this.textPredicates[f].every(g=>g(l))){let g=l[h],v=this.setProperties[f];v&&(g.setProperties=v);let b=this.assertedProperties[f];b&&(g.assertedProperties=b);let y=this.refutedProperties[f];y&&(g.refutedProperties=y),u.push(g)}}return C._free(a),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let s=getValue(r,"i32"),a=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[s],node:a}}return r}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,t);return a.id=r,a.startIndex=n,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var iU=P(Xt=>{"use strict";var rU=Xt&&Xt.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},nU=Xt&&Xt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.getShallowFileSize=Xt.getShallowDirectorySizeSync=Xt.getShallowDirectorySize=Xt.confirmDirExists=Xt.unlinkAsync=Xt.readdirAsync=Xt.readFileAsync=Xt.writeFileAsync=Xt.appendFileAsync=Xt.accessAsync=Xt.mkdirAsync=Xt.lstatAsync=Xt.statAsync=void 0;var Lu=require("fs"),fie=require("path"),wp=require("util");Xt.statAsync=wp.promisify(Lu.stat);Xt.lstatAsync=wp.promisify(Lu.lstat);Xt.mkdirAsync=wp.promisify(Lu.mkdir);Xt.accessAsync=wp.promisify(Lu.access);Xt.appendFileAsync=wp.promisify(Lu.appendFile);Xt.writeFileAsync=wp.promisify(Lu.writeFile);Xt.readFileAsync=wp.promisify(Lu.readFile);Xt.readdirAsync=wp.promisify(Lu.readdir);Xt.unlinkAsync=wp.promisify(Lu.unlink);var dLe=function(t){return rU(void 0,void 0,void 0,function(){var e,r,n;return nU(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Xt.lstatAsync(t)];case 1:if(e=i.sent(),!e.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(r=i.sent(),!(r&&r.code==="ENOENT"))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,Xt.mkdirAsync(t)];case 4:return i.sent(),[3,6];case 5:if(n=i.sent(),n&&n.code!=="EEXIST")throw n;return[3,6];case 6:return[3,7];case 7:return[2]}})})};Xt.confirmDirExists=dLe;var pLe=function(t){return rU(void 0,void 0,void 0,function(){var e,r,n,i,o,s;return nU(this,function(a){switch(a.label){case 0:return[4,Xt.readdirAsync(t)];case 1:e=a.sent(),r=0,n=0,i=e,a.label=2;case 2:return n<i.length?(o=i[n],[4,Xt.statAsync(fie.join(t,o))]):[3,5];case 3:s=a.sent(),s.isFile()&&(r+=s.size),a.label=4;case 4:return n++,[3,2];case 5:return[2,r]}})})};Xt.getShallowDirectorySize=pLe;var fLe=function(t){for(var e=Lu.readdirSync(t),r=0,n=0;n<e.length;n++)r+=Lu.statSync(fie.join(t,e[n])).size;return r};Xt.getShallowDirectorySizeSync=fLe;var mLe=function(t){return rU(void 0,void 0,void 0,function(){var e;return nU(this,function(r){switch(r.label){case 0:return[4,Xt.statAsync(t)];case 1:return e=r.sent(),e.isFile()?[2,e.size]:[2]}})})};Xt.getShallowFileSize=mLe});var gie=P((G0,hie)=>{"use strict";var oU=G0&&G0.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},sU=G0&&G0.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},mie=G0&&G0.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},hLe=require("fs"),gLe=require("os"),j0=require("path"),Hl=iU(),vLe=function(){function t(){var e=this;this.TAG="Logger",this._cleanupTimeOut=60*30*1e3,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var r=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;r=="file+console"&&(this._logToFile=!0),r=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var n=process.env.APPLICATIONINSIGHTS_LOGDIR;n?j0.isAbsolute(n)?this._tempDir=n:this._tempDir=j0.join(process.cwd(),n):this._tempDir=j0.join(gLe.tmpdir(),"appInsights-node"),this._fileFullPath=j0.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(t._fileCleanupTimer||(t._fileCleanupTimer=setInterval(function(){e._fileCleanupTask()},this._cleanupTimeOut),t._fileCleanupTimer.unref()))}return t.prototype.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?mie([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},t.prototype.warning=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?mie([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._storeToDisk=function(e){return oU(this,void 0,void 0,function(){var r,n,i,o,s,a;return sU(this,function(c){switch(c.label){case 0:r=e+`\r
`,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Hl.confirmDirExists(this._tempDir)];case 2:return c.sent(),[3,4];case 3:return n=c.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return c.trys.push([4,6,,11]),[4,Hl.accessAsync(this._fileFullPath,hLe.constants.F_OK)];case 5:return c.sent(),[3,11];case 6:i=c.sent(),c.label=7;case 7:return c.trys.push([7,9,,10]),[4,Hl.appendFileAsync(this._fileFullPath,r)];case 8:return c.sent(),[2];case 9:return o=c.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return c.trys.push([11,17,,18]),[4,Hl.getShallowFileSize(this._fileFullPath)];case 12:return s=c.sent(),s>this.maxSizeBytes?[4,this._createBackupFile(r)]:[3,14];case 13:return c.sent(),[3,16];case 14:return[4,Hl.appendFileAsync(this._fileFullPath,r)];case 15:c.sent(),c.label=16;case 16:return[3,18];case 17:return a=c.sent(),console.log(this.TAG,"Failed to create backup file: "+(a&&a.message)),[3,18];case 18:return[2]}})})},t.prototype._createBackupFile=function(e){return oU(this,void 0,void 0,function(){var r,n,i;return sU(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,Hl.readFileAsync(this._fileFullPath)];case 1:return r=o.sent(),n=j0.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,Hl.writeFileAsync(n,r)];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return Hl.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}})})},t.prototype._fileCleanupTask=function(){return oU(this,void 0,void 0,function(){var e,r,n,i,o,s=this;return sU(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,Hl.readdirAsync(this._tempDir)];case 1:e=a.sent(),e=e.filter(function(c){return j0.basename(c).indexOf(s._backUpNameFormat)>-1}),e.sort(function(c,u){var l=new Date(parseInt(c.split(s._backUpNameFormat)[0])),d=new Date(parseInt(u.split(s._backUpNameFormat)[0]));if(l<d)return-1;if(l>=d)return 1}),r=e.length,n=0,a.label=2;case 2:return n<r-this.maxHistory?(i=j0.join(this._tempDir,e[n]),[4,Hl.unlinkAsync(i)]):[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=a.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}})})},t._fileCleanupTimer=null,t}();hie.exports=vLe});var xn=P((Lvt,yie)=>{"use strict";var vie=gie(),yLe="APPLICATION_INSIGHTS_ENABLE_DEBUG_LOGS",bLe="APPLICATION_INSIGHTS_DISABLE_WARNING_LOGS",_Le=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.enableDebug&&vie.getInstance().info(this.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.disableWarnings||vie.getInstance().warning(this.TAG+e,r)},t.enableDebug=!!process.env[yLe],t.disableWarnings=!!process.env[bLe],t.TAG="ApplicationInsights:",t}();yie.exports=_Le});var XP=P(QP=>{"use strict";Object.defineProperty(QP,"__esModule",{value:!0});QP.JsonConfig=void 0;var xLe=require("fs"),YP=require("path"),aU=xn(),SLe="APPLICATIONINSIGHTS_CONFIGURATION_FILE",ELe="APPLICATIONINSIGHTS_CONNECTION_STRING",bie="APPSETTING_",_ie="APPINSIGHTS_INSTRUMENTATIONKEY",xie="APPINSIGHTS_INSTRUMENTATION_KEY",TLe="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",ILe="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",CLe="http_proxy",wLe="https_proxy",RLe="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",ALe="APPLICATION_INSIGHTS_NO_STATSBEAT",PLe="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",kLe="APPLICATION_INSIGHTS_NO_PATCH_MODULES",DLe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",NLe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",LLe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",OLe="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",MLe="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",FLe=function(){function t(){this.connectionString=process.env[ELe],this.instrumentationKey=process.env[_ie]||process.env[bie+_ie]||process.env[xie]||process.env[bie+xie],!this.connectionString&&this.instrumentationKey&&aU.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[ILe],this.extendedMetricDisablers=process.env[TLe],this.proxyHttpUrl=process.env[CLe],this.proxyHttpsUrl=process.env[wLe],this.noDiagnosticChannel=!!process.env[RLe],this.disableStatsbeat=!!process.env[ALe],this.noHttpAgentKeepAlive=!!process.env[PLe],this.noPatchModules=process.env[kLe]||"",this.enableWebInstrumentation=!!process.env[DLe]||!!process.env[OLe],this.webInstrumentationSrc=process.env[LLe]||"",this.webInstrumentationConnectionString=process.env[NLe]||process.env[MLe]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._loadJsonFile=function(){var e="",r="{}";if(r)e=r;else{var n="applicationinsights.json",i=YP.join(__dirname,"../../"),o=YP.join(i,n),s=process.env[SLe];s&&(YP.isAbsolute(s)?o=s:o=YP.join(i,s));try{e=xLe.readFileSync(o,"utf8")}catch(c){aU.warn("Failed to read JSON config file: ",c)}}try{var a=JSON.parse(e);a.disableStatsbeat!=null&&(this.disableStatsbeat=a.disableStatsbeat),a.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=a.disableStatsbeat),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=a.noHttpAgentKeepAlive),a.connectionString!=null&&(this.connectionString=a.connectionString),a.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=a.extendedMetricDisablers),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.proxyHttpUrl!=null&&(this.proxyHttpUrl=a.proxyHttpUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.noPatchModules!=null&&(this.noPatchModules=a.noPatchModules),a.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=a.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=a.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=a.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=a.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=a.webInstrumentationConfig),a.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=a.webInstrumentationSrc),a.enableLoggerErrorToTrace!=null&&(this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace),this.endpointUrl=a.endpointUrl,this.maxBatchSize=a.maxBatchSize,this.maxBatchIntervalMs=a.maxBatchIntervalMs,this.disableAppInsights=a.disableAppInsights,this.samplingPercentage=a.samplingPercentage,this.correlationIdRetryIntervalMs=a.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=a.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=a.ignoreLegacyHeaders,this.distributedTracingMode=a.distributedTracingMode,this.enableAutoCollectExternalLoggers=a.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=a.enableAutoCollectConsole,this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=a.enableAutoCollectExceptions,this.enableAutoCollectPerformance=a.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=a.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=a.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=a.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=a.enableAutoCollectRequests,this.enableAutoCollectDependencies=a.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=a.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=a.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=a.enableUseAsyncHooks,this.enableUseDiskRetryCaching=a.enableUseDiskRetryCaching,this.enableResendInterval=a.enableResendInterval,this.enableMaxBytesOnDisk=a.enableMaxBytesOnDisk,this.enableInternalDebugLogging=a.enableInternalDebugLogging,this.enableInternalWarningLogging=a.enableInternalWarningLogging,this.enableSendLiveMetrics=a.enableSendLiveMetrics,this.quickPulseHost=a.quickPulseHost}catch(c){aU.warn("Invalid JSON config file: ",c)}},t}();QP.JsonConfig=FLe});var KT=P((Mvt,Sie)=>{var ULe="2.0.0",BLe=Number.MAX_SAFE_INTEGER||9007199254740991,qLe=16,HLe=250,jLe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Sie.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:qLe,MAX_SAFE_BUILD_LENGTH:HLe,MAX_SAFE_INTEGER:BLe,RELEASE_TYPES:jLe,SEMVER_SPEC_VERSION:ULe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var YT=P((Fvt,Eie)=>{var GLe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Eie.exports=GLe});var m_=P((Rp,Tie)=>{var{MAX_SAFE_COMPONENT_LENGTH:cU,MAX_SAFE_BUILD_LENGTH:VLe,MAX_LENGTH:zLe}=KT(),$Le=YT();Rp=Tie.exports={};var WLe=Rp.re=[],KLe=Rp.safeRe=[],Ze=Rp.src=[],et=Rp.t={},YLe=0,uU="[a-zA-Z0-9-]",QLe=[["\\s",1],["\\d",zLe],[uU,VLe]],XLe=t=>{for(let[e,r]of QLe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},jt=(t,e,r)=>{let n=XLe(e),i=YLe++;$Le(t,i,e),et[t]=i,Ze[i]=e,WLe[i]=new RegExp(e,r?"g":void 0),KLe[i]=new RegExp(n,r?"g":void 0)};jt("NUMERICIDENTIFIER","0|[1-9]\\d*");jt("NUMERICIDENTIFIERLOOSE","\\d+");jt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${uU}*`);jt("MAINVERSION",`(${Ze[et.NUMERICIDENTIFIER]})\\.(${Ze[et.NUMERICIDENTIFIER]})\\.(${Ze[et.NUMERICIDENTIFIER]})`);jt("MAINVERSIONLOOSE",`(${Ze[et.NUMERICIDENTIFIERLOOSE]})\\.(${Ze[et.NUMERICIDENTIFIERLOOSE]})\\.(${Ze[et.NUMERICIDENTIFIERLOOSE]})`);jt("PRERELEASEIDENTIFIER",`(?:${Ze[et.NUMERICIDENTIFIER]}|${Ze[et.NONNUMERICIDENTIFIER]})`);jt("PRERELEASEIDENTIFIERLOOSE",`(?:${Ze[et.NUMERICIDENTIFIERLOOSE]}|${Ze[et.NONNUMERICIDENTIFIER]})`);jt("PRERELEASE",`(?:-(${Ze[et.PRERELEASEIDENTIFIER]}(?:\\.${Ze[et.PRERELEASEIDENTIFIER]})*))`);jt("PRERELEASELOOSE",`(?:-?(${Ze[et.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ze[et.PRERELEASEIDENTIFIERLOOSE]})*))`);jt("BUILDIDENTIFIER",`${uU}+`);jt("BUILD",`(?:\\+(${Ze[et.BUILDIDENTIFIER]}(?:\\.${Ze[et.BUILDIDENTIFIER]})*))`);jt("FULLPLAIN",`v?${Ze[et.MAINVERSION]}${Ze[et.PRERELEASE]}?${Ze[et.BUILD]}?`);jt("FULL",`^${Ze[et.FULLPLAIN]}$`);jt("LOOSEPLAIN",`[v=\\s]*${Ze[et.MAINVERSIONLOOSE]}${Ze[et.PRERELEASELOOSE]}?${Ze[et.BUILD]}?`);jt("LOOSE",`^${Ze[et.LOOSEPLAIN]}$`);jt("GTLT","((?:<|>)?=?)");jt("XRANGEIDENTIFIERLOOSE",`${Ze[et.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);jt("XRANGEIDENTIFIER",`${Ze[et.NUMERICIDENTIFIER]}|x|X|\\*`);jt("XRANGEPLAIN",`[v=\\s]*(${Ze[et.XRANGEIDENTIFIER]})(?:\\.(${Ze[et.XRANGEIDENTIFIER]})(?:\\.(${Ze[et.XRANGEIDENTIFIER]})(?:${Ze[et.PRERELEASE]})?${Ze[et.BUILD]}?)?)?`);jt("XRANGEPLAINLOOSE",`[v=\\s]*(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:${Ze[et.PRERELEASELOOSE]})?${Ze[et.BUILD]}?)?)?`);jt("XRANGE",`^${Ze[et.GTLT]}\\s*${Ze[et.XRANGEPLAIN]}$`);jt("XRANGELOOSE",`^${Ze[et.GTLT]}\\s*${Ze[et.XRANGEPLAINLOOSE]}$`);jt("COERCE",`(^|[^\\d])(\\d{1,${cU}})(?:\\.(\\d{1,${cU}}))?(?:\\.(\\d{1,${cU}}))?(?:$|[^\\d])`);jt("COERCERTL",Ze[et.COERCE],!0);jt("LONETILDE","(?:~>?)");jt("TILDETRIM",`(\\s*)${Ze[et.LONETILDE]}\\s+`,!0);Rp.tildeTrimReplace="$1~";jt("TILDE",`^${Ze[et.LONETILDE]}${Ze[et.XRANGEPLAIN]}$`);jt("TILDELOOSE",`^${Ze[et.LONETILDE]}${Ze[et.XRANGEPLAINLOOSE]}$`);jt("LONECARET","(?:\\^)");jt("CARETTRIM",`(\\s*)${Ze[et.LONECARET]}\\s+`,!0);Rp.caretTrimReplace="$1^";jt("CARET",`^${Ze[et.LONECARET]}${Ze[et.XRANGEPLAIN]}$`);jt("CARETLOOSE",`^${Ze[et.LONECARET]}${Ze[et.XRANGEPLAINLOOSE]}$`);jt("COMPARATORLOOSE",`^${Ze[et.GTLT]}\\s*(${Ze[et.LOOSEPLAIN]})$|^$`);jt("COMPARATOR",`^${Ze[et.GTLT]}\\s*(${Ze[et.FULLPLAIN]})$|^$`);jt("COMPARATORTRIM",`(\\s*)${Ze[et.GTLT]}\\s*(${Ze[et.LOOSEPLAIN]}|${Ze[et.XRANGEPLAIN]})`,!0);Rp.comparatorTrimReplace="$1$2$3";jt("HYPHENRANGE",`^\\s*(${Ze[et.XRANGEPLAIN]})\\s+-\\s+(${Ze[et.XRANGEPLAIN]})\\s*$`);jt("HYPHENRANGELOOSE",`^\\s*(${Ze[et.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ze[et.XRANGEPLAINLOOSE]})\\s*$`);jt("STAR","(<|>)?=?\\s*\\*");jt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");jt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var JP=P((Uvt,Iie)=>{var JLe=Object.freeze({loose:!0}),ZLe=Object.freeze({}),e3e=t=>t?typeof t!="object"?JLe:t:ZLe;Iie.exports=e3e});var lU=P((Bvt,Rie)=>{var Cie=/^[0-9]+$/,wie=(t,e)=>{let r=Cie.test(t),n=Cie.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},t3e=(t,e)=>wie(e,t);Rie.exports={compareIdentifiers:wie,rcompareIdentifiers:t3e}});var ps=P((qvt,Die)=>{var ZP=YT(),{MAX_LENGTH:Aie,MAX_SAFE_INTEGER:ek}=KT(),{safeRe:Pie,t:kie}=m_(),r3e=JP(),{compareIdentifiers:h_}=lU(),dU=class t{constructor(e,r){if(r=r3e(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Aie)throw new TypeError(`version is longer than ${Aie} characters`);ZP("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Pie[kie.LOOSE]:Pie[kie.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ek||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ek||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ek||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<ek)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ZP("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),h_(this.major,e.major)||h_(this.minor,e.minor)||h_(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(ZP("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return h_(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(ZP("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return h_(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),h_(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Die.exports=dU});var V0=P((Hvt,Lie)=>{var Nie=ps(),n3e=(t,e,r=!1)=>{if(t instanceof Nie)return t;try{return new Nie(t,e)}catch(n){if(!r)return null;throw n}};Lie.exports=n3e});var Mie=P((jvt,Oie)=>{var i3e=V0(),o3e=(t,e)=>{let r=i3e(t,e);return r?r.version:null};Oie.exports=o3e});var Uie=P((Gvt,Fie)=>{var s3e=V0(),a3e=(t,e)=>{let r=s3e(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Fie.exports=a3e});var Hie=P((Vvt,qie)=>{var Bie=ps(),c3e=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Bie(t instanceof Bie?t.version:t,r).inc(e,n,i).version}catch{return null}};qie.exports=c3e});var Vie=P((zvt,Gie)=>{var jie=V0(),u3e=(t,e)=>{let r=jie(t,null,!0),n=jie(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,s=o?r:n,a=o?n:r,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};Gie.exports=u3e});var $ie=P(($vt,zie)=>{var l3e=ps(),d3e=(t,e)=>new l3e(t,e).major;zie.exports=d3e});var Kie=P((Wvt,Wie)=>{var p3e=ps(),f3e=(t,e)=>new p3e(t,e).minor;Wie.exports=f3e});var Qie=P((Kvt,Yie)=>{var m3e=ps(),h3e=(t,e)=>new m3e(t,e).patch;Yie.exports=h3e});var Jie=P((Yvt,Xie)=>{var g3e=V0(),v3e=(t,e)=>{let r=g3e(t,e);return r&&r.prerelease.length?r.prerelease:null};Xie.exports=v3e});var wc=P((Qvt,eoe)=>{var Zie=ps(),y3e=(t,e,r)=>new Zie(t,r).compare(new Zie(e,r));eoe.exports=y3e});var roe=P((Xvt,toe)=>{var b3e=wc(),_3e=(t,e,r)=>b3e(e,t,r);toe.exports=_3e});var ioe=P((Jvt,noe)=>{var x3e=wc(),S3e=(t,e)=>x3e(t,e,!0);noe.exports=S3e});var tk=P((Zvt,soe)=>{var ooe=ps(),E3e=(t,e,r)=>{let n=new ooe(t,r),i=new ooe(e,r);return n.compare(i)||n.compareBuild(i)};soe.exports=E3e});var coe=P((eyt,aoe)=>{var T3e=tk(),I3e=(t,e)=>t.sort((r,n)=>T3e(r,n,e));aoe.exports=I3e});var loe=P((tyt,uoe)=>{var C3e=tk(),w3e=(t,e)=>t.sort((r,n)=>C3e(n,r,e));uoe.exports=w3e});var QT=P((ryt,doe)=>{var R3e=wc(),A3e=(t,e,r)=>R3e(t,e,r)>0;doe.exports=A3e});var rk=P((nyt,poe)=>{var P3e=wc(),k3e=(t,e,r)=>P3e(t,e,r)<0;poe.exports=k3e});var pU=P((iyt,foe)=>{var D3e=wc(),N3e=(t,e,r)=>D3e(t,e,r)===0;foe.exports=N3e});var fU=P((oyt,moe)=>{var L3e=wc(),O3e=(t,e,r)=>L3e(t,e,r)!==0;moe.exports=O3e});var nk=P((syt,hoe)=>{var M3e=wc(),F3e=(t,e,r)=>M3e(t,e,r)>=0;hoe.exports=F3e});var ik=P((ayt,goe)=>{var U3e=wc(),B3e=(t,e,r)=>U3e(t,e,r)<=0;goe.exports=B3e});var mU=P((cyt,voe)=>{var q3e=pU(),H3e=fU(),j3e=QT(),G3e=nk(),V3e=rk(),z3e=ik(),$3e=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return q3e(t,r,n);case"!=":return H3e(t,r,n);case">":return j3e(t,r,n);case">=":return G3e(t,r,n);case"<":return V3e(t,r,n);case"<=":return z3e(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};voe.exports=$3e});var boe=P((uyt,yoe)=>{var W3e=ps(),K3e=V0(),{safeRe:ok,t:sk}=m_(),Y3e=(t,e)=>{if(t instanceof W3e)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(ok[sk.COERCE]);else{let n;for(;(n=ok[sk.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),ok[sk.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ok[sk.COERCERTL].lastIndex=-1}return r===null?null:K3e(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};yoe.exports=Y3e});var xoe=P((lyt,_oe)=>{"use strict";_oe.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Eoe=P((dyt,Soe)=>{"use strict";Soe.exports=kr;kr.Node=z0;kr.create=kr;function kr(t){var e=this;if(e instanceof kr||(e=new kr),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}kr.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};kr.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};kr.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};kr.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)X3e(this,arguments[t]);return this.length};kr.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)J3e(this,arguments[t]);return this.length};kr.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};kr.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};kr.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};kr.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};kr.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};kr.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};kr.prototype.map=function(t,e){e=e||this;for(var r=new kr,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};kr.prototype.mapReverse=function(t,e){e=e||this;for(var r=new kr,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};kr.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};kr.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};kr.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};kr.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};kr.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new kr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};kr.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new kr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};kr.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=Q3e(this,i,r[n]);return o};kr.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function Q3e(t,e,r){var n=e===t.head?new z0(r,null,e,t):new z0(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function X3e(t,e){t.tail=new z0(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function J3e(t,e){t.head=new z0(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function z0(t,e,r,n){if(!(this instanceof z0))return new z0(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{xoe()(kr)}catch{}});var Roe=P((pyt,woe)=>{"use strict";var Z3e=Eoe(),$0=Symbol("max"),Pp=Symbol("length"),g_=Symbol("lengthCalculator"),JT=Symbol("allowStale"),W0=Symbol("maxAge"),Ap=Symbol("dispose"),Toe=Symbol("noDisposeOnSet"),vo=Symbol("lruList"),Ou=Symbol("cache"),Coe=Symbol("updateAgeOnGet"),hU=()=>1,vU=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[$0]=e.max||1/0,n=e.length||hU;if(this[g_]=typeof n!="function"?hU:n,this[JT]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[W0]=e.maxAge||0,this[Ap]=e.dispose,this[Toe]=e.noDisposeOnSet||!1,this[Coe]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[$0]=e||1/0,XT(this)}get max(){return this[$0]}set allowStale(e){this[JT]=!!e}get allowStale(){return this[JT]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[W0]=e,XT(this)}get maxAge(){return this[W0]}set lengthCalculator(e){typeof e!="function"&&(e=hU),e!==this[g_]&&(this[g_]=e,this[Pp]=0,this[vo].forEach(r=>{r.length=this[g_](r.value,r.key),this[Pp]+=r.length})),XT(this)}get lengthCalculator(){return this[g_]}get length(){return this[Pp]}get itemCount(){return this[vo].length}rforEach(e,r){r=r||this;for(let n=this[vo].tail;n!==null;){let i=n.prev;Ioe(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[vo].head;n!==null;){let i=n.next;Ioe(this,e,n,r),n=i}}keys(){return this[vo].toArray().map(e=>e.key)}values(){return this[vo].toArray().map(e=>e.value)}reset(){this[Ap]&&this[vo]&&this[vo].length&&this[vo].forEach(e=>this[Ap](e.key,e.value)),this[Ou]=new Map,this[vo]=new Z3e,this[Pp]=0}dump(){return this[vo].map(e=>ak(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[vo]}set(e,r,n){if(n=n||this[W0],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[g_](r,e);if(this[Ou].has(e)){if(o>this[$0])return v_(this,this[Ou].get(e)),!1;let c=this[Ou].get(e).value;return this[Ap]&&(this[Toe]||this[Ap](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Pp]+=o-c.length,c.length=o,this.get(e),XT(this),!0}let s=new yU(e,r,o,i,n);return s.length>this[$0]?(this[Ap]&&this[Ap](e,r),!1):(this[Pp]+=s.length,this[vo].unshift(s),this[Ou].set(e,this[vo].head),XT(this),!0)}has(e){if(!this[Ou].has(e))return!1;let r=this[Ou].get(e).value;return!ak(this,r)}get(e){return gU(this,e,!0)}peek(e){return gU(this,e,!1)}pop(){let e=this[vo].tail;return e?(v_(this,e),e.value):null}del(e){v_(this,this[Ou].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Ou].forEach((e,r)=>gU(this,r,!1))}},gU=(t,e,r)=>{let n=t[Ou].get(e);if(n){let i=n.value;if(ak(t,i)){if(v_(t,n),!t[JT])return}else r&&(t[Coe]&&(n.value.now=Date.now()),t[vo].unshiftNode(n));return i.value}},ak=(t,e)=>{if(!e||!e.maxAge&&!t[W0])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[W0]&&r>t[W0]},XT=t=>{if(t[Pp]>t[$0])for(let e=t[vo].tail;t[Pp]>t[$0]&&e!==null;){let r=e.prev;v_(t,e),e=r}},v_=(t,e)=>{if(e){let r=e.value;t[Ap]&&t[Ap](r.key,r.value),t[Pp]-=r.length,t[Ou].delete(r.key),t[vo].removeNode(e)}},yU=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},Ioe=(t,e,r,n)=>{let i=r.value;ak(t,i)&&(v_(t,r),t[JT]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};woe.exports=vU});var Rc=P((fyt,Doe)=>{var bU=class t{constructor(e,r){if(r=tOe(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof _U)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Poe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&cOe(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&sOe)|(this.options.loose&&aOe))+":"+e,i=Aoe.get(n);if(i)return i;let o=this.options.loose,s=o?ba[qs.HYPHENRANGELOOSE]:ba[qs.HYPHENRANGE];e=e.replace(s,yOe(this.options.includePrerelease)),Sn("hyphen replace",e),e=e.replace(ba[qs.COMPARATORTRIM],nOe),Sn("comparator trim",e),e=e.replace(ba[qs.TILDETRIM],iOe),Sn("tilde trim",e),e=e.replace(ba[qs.CARETTRIM],oOe),Sn("caret trim",e);let a=e.split(" ").map(d=>uOe(d,this.options)).join(" ").split(/\s+/).map(d=>vOe(d,this.options));o&&(a=a.filter(d=>(Sn("loose invalid filter",d,this.options),!!d.match(ba[qs.COMPARATORLOOSE])))),Sn("range list",a);let c=new Map,u=a.map(d=>new _U(d,this.options));for(let d of u){if(Poe(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return Aoe.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>koe(n,r)&&e.set.some(i=>koe(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new rOe(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(bOe(this.set[r],e,this.options))return!0;return!1}};Doe.exports=bU;var eOe=Roe(),Aoe=new eOe({max:1e3}),tOe=JP(),_U=ZT(),Sn=YT(),rOe=ps(),{safeRe:ba,t:qs,comparatorTrimReplace:nOe,tildeTrimReplace:iOe,caretTrimReplace:oOe}=m_(),{FLAG_INCLUDE_PRERELEASE:sOe,FLAG_LOOSE:aOe}=KT(),Poe=t=>t.value==="<0.0.0-0",cOe=t=>t.value==="",koe=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},uOe=(t,e)=>(Sn("comp",t,e),t=pOe(t,e),Sn("caret",t),t=lOe(t,e),Sn("tildes",t),t=mOe(t,e),Sn("xrange",t),t=gOe(t,e),Sn("stars",t),t),Hs=t=>!t||t.toLowerCase()==="x"||t==="*",lOe=(t,e)=>t.trim().split(/\s+/).map(r=>dOe(r,e)).join(" "),dOe=(t,e)=>{let r=e.loose?ba[qs.TILDELOOSE]:ba[qs.TILDE];return t.replace(r,(n,i,o,s,a)=>{Sn("tilde",t,n,i,o,s,a);let c;return Hs(i)?c="":Hs(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Hs(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Sn("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Sn("tilde return",c),c})},pOe=(t,e)=>t.trim().split(/\s+/).map(r=>fOe(r,e)).join(" "),fOe=(t,e)=>{Sn("caret",t,e);let r=e.loose?ba[qs.CARETLOOSE]:ba[qs.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{Sn("caret",t,i,o,s,a,c);let u;return Hs(o)?u="":Hs(s)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Hs(a)?o==="0"?u=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(Sn("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Sn("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Sn("caret return",u),u})},mOe=(t,e)=>(Sn("replaceXRanges",t,e),t.split(/\s+/).map(r=>hOe(r,e)).join(" ")),hOe=(t,e)=>{t=t.trim();let r=e.loose?ba[qs.XRANGELOOSE]:ba[qs.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{Sn("xRange",t,n,i,o,s,a,c);let u=Hs(o),l=u||Hs(s),d=l||Hs(a),p=d;return i==="="&&p&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):l?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Sn("xRange return",n),n})},gOe=(t,e)=>(Sn("replaceStars",t,e),t.trim().replace(ba[qs.STAR],"")),vOe=(t,e)=>(Sn("replaceGTE0",t,e),t.trim().replace(ba[e.includePrerelease?qs.GTE0PRE:qs.GTE0],"")),yOe=t=>(e,r,n,i,o,s,a,c,u,l,d,p,f)=>(Hs(n)?r="":Hs(i)?r=`>=${n}.0.0${t?"-0":""}`:Hs(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Hs(u)?c="":Hs(l)?c=`<${+u+1}.0.0-0`:Hs(d)?c=`<${u}.${+l+1}.0-0`:p?c=`<=${u}.${l}.${d}-${p}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),bOe=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Sn(t[n].semver),t[n].semver!==_U.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ZT=P((myt,Uoe)=>{var eI=Symbol("SemVer ANY"),EU=class t{static get ANY(){return eI}constructor(e,r){if(r=Noe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),SU("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===eI?this.value="":this.value=this.operator+this.semver.version,SU("comp",this)}parse(e){let r=this.options.loose?Loe[Ooe.COMPARATORLOOSE]:Loe[Ooe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Moe(n[2],this.options.loose):this.semver=eI}toString(){return this.value}test(e){if(SU("Comparator.test",e,this.options.loose),this.semver===eI||e===eI)return!0;if(typeof e=="string")try{e=new Moe(e,this.options)}catch{return!1}return xU(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Foe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Foe(this.value,r).test(e.semver):(r=Noe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||xU(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||xU(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Uoe.exports=EU;var Noe=JP(),{safeRe:Loe,t:Ooe}=m_(),xU=mU(),SU=YT(),Moe=ps(),Foe=Rc()});var tI=P((hyt,Boe)=>{var _Oe=Rc(),xOe=(t,e,r)=>{try{e=new _Oe(e,r)}catch{return!1}return e.test(t)};Boe.exports=xOe});var Hoe=P((gyt,qoe)=>{var SOe=Rc(),EOe=(t,e)=>new SOe(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));qoe.exports=EOe});var Goe=P((vyt,joe)=>{var TOe=ps(),IOe=Rc(),COe=(t,e,r)=>{let n=null,i=null,o=null;try{o=new IOe(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new TOe(n,r))}),n};joe.exports=COe});var zoe=P((yyt,Voe)=>{var wOe=ps(),ROe=Rc(),AOe=(t,e,r)=>{let n=null,i=null,o=null;try{o=new ROe(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new wOe(n,r))}),n};Voe.exports=AOe});var Koe=P((byt,Woe)=>{var TU=ps(),POe=Rc(),$oe=QT(),kOe=(t,e)=>{t=new POe(t,e);let r=new TU("0.0.0");if(t.test(r)||(r=new TU("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new TU(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||$oe(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||$oe(r,o))&&(r=o)}return r&&t.test(r)?r:null};Woe.exports=kOe});var Qoe=P((_yt,Yoe)=>{var DOe=Rc(),NOe=(t,e)=>{try{return new DOe(t,e).range||"*"}catch{return null}};Yoe.exports=NOe});var ck=P((xyt,ese)=>{var LOe=ps(),Zoe=ZT(),{ANY:OOe}=Zoe,MOe=Rc(),FOe=tI(),Xoe=QT(),Joe=rk(),UOe=ik(),BOe=nk(),qOe=(t,e,r,n)=>{t=new LOe(t,n),e=new MOe(e,n);let i,o,s,a,c;switch(r){case">":i=Xoe,o=UOe,s=Joe,a=">",c=">=";break;case"<":i=Joe,o=BOe,s=Xoe,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(FOe(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,p=null;if(l.forEach(f=>{f.semver===OOe&&(f=new Zoe(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0};ese.exports=qOe});var rse=P((Syt,tse)=>{var HOe=ck(),jOe=(t,e,r)=>HOe(t,e,">",r);tse.exports=jOe});var ise=P((Eyt,nse)=>{var GOe=ck(),VOe=(t,e,r)=>GOe(t,e,"<",r);nse.exports=VOe});var ase=P((Tyt,sse)=>{var ose=Rc(),zOe=(t,e,r)=>(t=new ose(t,r),e=new ose(e,r),t.intersects(e,r));sse.exports=zOe});var use=P((Iyt,cse)=>{var $Oe=tI(),WOe=wc();cse.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((l,d)=>WOe(l,d,r));for(let l of s)$Oe(l,e,r)?(o=l,i||(i=l)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===s[0]?a.push("*"):d?l===s[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var hse=P((Cyt,mse)=>{var lse=Rc(),CU=ZT(),{ANY:IU}=CU,rI=tI(),wU=wc(),KOe=(t,e,r={})=>{if(t===e)return!0;t=new lse(t,r),e=new lse(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=QOe(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},YOe=[new CU(">=0.0.0-0")],dse=[new CU(">=0.0.0")],QOe=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===IU){if(e.length===1&&e[0].semver===IU)return!0;r.includePrerelease?t=YOe:t=dse}if(e.length===1&&e[0].semver===IU){if(r.includePrerelease)return!0;e=dse}let n=new Set,i,o;for(let f of t)f.operator===">"||f.operator===">="?i=pse(i,f,r):f.operator==="<"||f.operator==="<="?o=fse(o,f,r):n.add(f.semver);if(n.size>1)return null;let s;if(i&&o){if(s=wU(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of n){if(i&&!rI(f,String(i),r)||o&&!rI(f,String(o),r))return null;for(let m of e)if(!rI(f,String(m),r))return!1;return!0}let a,c,u,l,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",u=u||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=pse(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!rI(i.semver,String(f),r))return!1}if(o){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(c=fse(o,f,r),c===f&&c!==o)return!1}else if(o.operator==="<="&&!rI(o.semver,String(f),r))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&l&&!i&&s!==0||p||d)},pse=(t,e,r)=>{if(!t)return e;let n=wU(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},fse=(t,e,r)=>{if(!t)return e;let n=wU(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};mse.exports=KOe});var bse=P((wyt,yse)=>{var RU=m_(),gse=KT(),XOe=ps(),vse=lU(),JOe=V0(),ZOe=Mie(),e5e=Uie(),t5e=Hie(),r5e=Vie(),n5e=$ie(),i5e=Kie(),o5e=Qie(),s5e=Jie(),a5e=wc(),c5e=roe(),u5e=ioe(),l5e=tk(),d5e=coe(),p5e=loe(),f5e=QT(),m5e=rk(),h5e=pU(),g5e=fU(),v5e=nk(),y5e=ik(),b5e=mU(),_5e=boe(),x5e=ZT(),S5e=Rc(),E5e=tI(),T5e=Hoe(),I5e=Goe(),C5e=zoe(),w5e=Koe(),R5e=Qoe(),A5e=ck(),P5e=rse(),k5e=ise(),D5e=ase(),N5e=use(),L5e=hse();yse.exports={parse:JOe,valid:ZOe,clean:e5e,inc:t5e,diff:r5e,major:n5e,minor:i5e,patch:o5e,prerelease:s5e,compare:a5e,rcompare:c5e,compareLoose:u5e,compareBuild:l5e,sort:d5e,rsort:p5e,gt:f5e,lt:m5e,eq:h5e,neq:g5e,gte:v5e,lte:y5e,cmp:b5e,coerce:_5e,Comparator:x5e,Range:S5e,satisfies:E5e,toComparators:T5e,maxSatisfying:I5e,minSatisfying:C5e,minVersion:w5e,validRange:R5e,outside:A5e,gtr:P5e,ltr:k5e,intersects:D5e,simplifyRange:N5e,subset:L5e,SemVer:XOe,re:RU.re,src:RU.src,tokens:RU.t,SEMVER_SPEC_VERSION:gse.SEMVER_SPEC_VERSION,RELEASE_TYPES:gse.RELEASE_TYPES,compareIdentifiers:vse.compareIdentifiers,rcompareIdentifiers:vse.rcompareIdentifiers}});var AU=P(uk=>{"use strict";Object.defineProperty(uk,"__esModule",{value:!0});uk.makePatchingRequire=void 0;var O5e=require("path"),M5e=bse(),_se=ri(),Sse=require("module"),F5e=Object.keys(process.binding("natives")),xse=Sse.prototype.require;function U5e(t){var e={};return function(n){var i=xse.apply(this,arguments);if(t[n]){var o=Sse._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(F5e.indexOf(n)<0)try{s=xse.call(this,O5e.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var c=i,u=0,l=t[n];u<l.length;u++){var d=l[u];if(M5e.satisfies(s,d.versionSpecifier)&&(c=d.patch(c,o),_se.channel)){var p=d.publisherName||n;_se.channel.addPatchedModule(p,s)}}return e[o]=c}return i}}uk.makePatchingRequire=U5e});var Ese=P((Ayt,B5e)=>{B5e.exports={name:"diagnostic-channel",version:"1.1.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"eslint ./ --fix",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^7.5.3"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var ri=P(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.channel=Ac.ContextPreservingEventEmitter=Ac.trueFilter=Ac.makePatchingRequire=void 0;var q5e=AU(),H5e=AU();Object.defineProperty(Ac,"makePatchingRequire",{enumerable:!0,get:function(){return H5e.makePatchingRequire}});var j5e=function(t){return!0};Ac.trueFilter=j5e;var Ise=function(){function t(){this.version=Ese().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n,i){n===void 0&&(n=Ac.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n,patchCallback:i});var o=this.checkIfModuleIsAlreadyPatched(e);o&&i&&i(o.name,o.version)},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=Ac.trueFilter);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t.prototype.addPatchedModule=function(e,r){for(var n=0,i=this.modulesPatched;n<i.length;n++){var o=i[n];if(o.name===e)return}this.modulesPatched.push({name:e,version:r});var s=this.subscribers[e];s&&s.forEach(function(a){a.patchCallback&&a.patchCallback(e,r)})},t.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var r=0,n=this.modulesPatched;r<n.length;r++){var i=n[r];if(i.name===e)return i}return null},t}();Ac.ContextPreservingEventEmitter=Ise;global.diagnosticsSource||(global.diagnosticsSource=new Ise,Tse=require("module"),Tse.prototype.require=q5e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var Tse;Ac.channel=global.diagnosticsSource});var Cse,wse=I(()=>{Cse=typeof globalThis=="object"?globalThis:global});var Rse=I(()=>{wse()});var Ase=I(()=>{Rse()});var kp,PU=I(()=>{kp="1.6.0"});function G5e(t){var e=new Set([t]),r=new Set,n=t.match(Pse);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(c){return c===t};function o(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var u=c.match(Pse);if(!u)return o(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||i.major!==l.major?o(c):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(c):o(c):i.minor<=l.minor?s(c):o(c)}}var Pse,kse,Dse=I(()=>{PU();Pse=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;kse=G5e(kp)});function jl(t,e,r,n){var i;n===void 0&&(n=!1);var o=iI[nI]=(i=iI[nI])!==null&&i!==void 0?i:{version:kp};if(!n&&o[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(o.version!==kp){var s=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+kp);return r.error(s.stack||s.message),!1}return o[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+kp+"."),!0}function ec(t){var e,r,n=(e=iI[nI])===null||e===void 0?void 0:e.version;if(!(!n||!kse(n)))return(r=iI[nI])===null||r===void 0?void 0:r[t]}function Gl(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+kp+".");var r=iI[nI];r&&delete r[t]}var V5e,nI,iI,K0=I(()=>{Ase();PU();Dse();V5e=kp.split(".")[0],nI=Symbol.for("opentelemetry.js.api."+V5e),iI=Cse});function oI(t,e,r){var n=ec("diag");if(n)return r.unshift(e),n[t].apply(n,$5e([],z5e(r),!1))}var z5e,$5e,Nse,Lse=I(()=>{K0();z5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},$5e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Nse=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return oI("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return oI("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return oI("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return oI("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return oI("verbose",this._namespace,e)},t}()});var un,lk=I(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(un||(un={}))});function Ose(t,e){t<un.NONE?t=un.NONE:t>un.ALL&&(t=un.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",un.ERROR),warn:r("warn",un.WARN),info:r("info",un.INFO),debug:r("debug",un.DEBUG),verbose:r("verbose",un.VERBOSE)}}var Mse=I(()=>{lk()});var W5e,K5e,Y5e,ms,Y0=I(()=>{Lse();Mse();lk();K0();W5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},K5e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Y5e="diag",ms=function(){function t(){function e(i){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=ec("diag");if(a)return a[i].apply(a,K5e([],W5e(o),!1))}}var r=this,n=function(i,o){var s,a,c;if(o===void 0&&(o={logLevel:un.INFO}),i===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof o=="number"&&(o={logLevel:o});var l=ec("diag"),d=Ose((a=o.logLevel)!==null&&a!==void 0?a:un.INFO,i);if(l&&!o.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return jl("diag",d,r,!0)};r.setLogger=n,r.disable=function(){Gl(Y5e,r)},r.createComponentLogger=function(i){return new Nse(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}()});var Q5e,X5e,Fse,Use=I(()=>{Q5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},X5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fse=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=Q5e(e,2),n=r[0],i=r[1];return[n,i]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=new t(this._entries);try{for(var s=X5e(n),a=s.next();!a.done;a=s.next()){var c=a.value;o._entries.delete(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}()});var Bse,qse=I(()=>{Bse=Symbol("BaggageEntryMetadata")});function Hse(t){return t===void 0&&(t={}),new Fse(new Map(Object.entries(t)))}function dk(t){return typeof t!="string"&&(J5e.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:Bse,toString:function(){return t}}}var J5e,kU=I(()=>{Y0();Use();qse();J5e=ms.instance()});function Vl(t){return Symbol.for(t)}var Z5e,pk,sI=I(()=>{Z5e=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),pk=new Z5e});var DU,jse,Gse=I(()=>{DU=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],jse=function(){function t(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var s=console[n];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,i)}}}for(var r=0;r<DU.length;r++)this[DU[r].n]=e(DU[r].c)}return t}()});function Vse(){return OU}var y_,e6e,NU,t6e,r6e,n6e,LU,i6e,o6e,s6e,OU,a6e,c6e,u6e,l6e,d6e,p6e,MU=I(()=>{y_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e6e=function(){function t(){}return t.prototype.createHistogram=function(e,r){return c6e},t.prototype.createCounter=function(e,r){return a6e},t.prototype.createUpDownCounter=function(e,r){return u6e},t.prototype.createObservableGauge=function(e,r){return d6e},t.prototype.createObservableCounter=function(e,r){return l6e},t.prototype.createObservableUpDownCounter=function(e,r){return p6e},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),NU=function(){function t(){}return t}(),t6e=function(t){y_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(NU),r6e=function(t){y_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(NU),n6e=function(t){y_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(NU),LU=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),i6e=function(t){y_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(LU),o6e=function(t){y_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(LU),s6e=function(t){y_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(LU),OU=new e6e,a6e=new t6e,c6e=new n6e,u6e=new r6e,l6e=new i6e,d6e=new o6e,p6e=new s6e});var fk,zse=I(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(fk||(fk={}))});var mk,hk,FU=I(()=>{mk={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},hk={set:function(t,e,r){t!=null&&(t[e]=r)}}});var f6e,m6e,$se,Wse=I(()=>{sI();f6e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},m6e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},$se=function(){function t(){}return t.prototype.active=function(){return pk},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,m6e([n],f6e(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}()});var h6e,g6e,UU,v6e,Dm,aI=I(()=>{Wse();K0();Y0();h6e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},g6e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},UU="context",v6e=new $se,Dm=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return jl(UU,e,ms.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,g6e([e,r,n],h6e(o),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return ec(UU)||v6e},t.prototype.disable=function(){this._getContextManager().disable(),Gl(UU,ms.instance())},t}()});var yi,BU=I(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(yi||(yi={}))});var cI,uI,b_,gk=I(()=>{BU();cI="0000000000000000",uI="00000000000000000000000000000000",b_={traceId:uI,spanId:cI,traceFlags:yi.NONE}});var Nm,vk=I(()=>{gk();Nm=function(){function t(e){e===void 0&&(e=b_),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}()});function yk(t){return t.getValue(qU)||void 0}function Kse(){return yk(Dm.getInstance().active())}function lI(t,e){return t.setValue(qU,e)}function Yse(t){return t.deleteValue(qU)}function Qse(t,e){return lI(t,new Nm(e))}function bk(t){var e;return(e=yk(t))===null||e===void 0?void 0:e.spanContext()}var qU,HU=I(()=>{sI();vk();aI();qU=Vl("OpenTelemetry Context Key SPAN")});function Q0(t){return y6e.test(t)&&t!==uI}function jU(t){return b6e.test(t)&&t!==cI}function Pc(t){return Q0(t.traceId)&&jU(t.spanId)}function Xse(t){return new Nm(t)}var y6e,b6e,_k=I(()=>{gk();vk();y6e=/^([0-9a-f]{32})$/i,b6e=/^[0-9a-f]{16}$/i});function _6e(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var GU,xk,VU=I(()=>{aI();HU();vk();_k();GU=Dm.getInstance(),xk=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=GU.active());var i=!!r?.root;if(i)return new Nm;var o=n&&bk(n);return _6e(o)&&Pc(o)?new Nm(o):new Nm},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s??GU.active(),u=this.startSpan(e,o,c),l=lI(c,u);return GU.with(l,a,void 0,u)}},t}()});var x6e,Sk,zU=I(()=>{VU();x6e=new xk,Sk=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):x6e},t}()});var Jse,Zse=I(()=>{VU();Jse=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new xk},t}()});var S6e,dI,$U=I(()=>{zU();Zse();S6e=new Jse,dI=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new Sk(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:S6e},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}()});var _a,eae=I(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(_a||(_a={}))});var __,tae=I(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(__||(__={}))});var x_,rae=I(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(x_||(x_={}))});function nae(t){return I6e.test(t)}function iae(t){return C6e.test(t)&&!w6e.test(t)}var WU,E6e,T6e,I6e,C6e,w6e,oae=I(()=>{WU="[_0-9a-z-*/]",E6e="[a-z]"+WU+"{0,255}",T6e="[a-z0-9]"+WU+"{0,240}@[a-z]"+WU+"{0,13}",I6e=new RegExp("^(?:"+E6e+"|"+T6e+")$"),C6e=/^[ -~]{0,255}[!-~]$/,w6e=/,|=/});var sae,R6e,aae,cae,uae,lae=I(()=>{oae();sae=32,R6e=512,aae=",",cae="=",uae=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+cae+e.get(n)),r},[]).join(aae)},t.prototype._parse=function(e){e.length>R6e||(this._internalState=e.split(aae).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(cae);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);nae(s)&&iae(a)&&r.set(s,a)}return r},new Map),this._internalState.size>sae&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,sae))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function dae(t){return new uae(t)}var pae=I(()=>{lae()});var js,fae=I(()=>{aI();js=Dm.getInstance()});var at,mae=I(()=>{Y0();at=ms.instance()});var A6e,hae,gae=I(()=>{MU();A6e=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return OU},t}(),hae=new A6e});var KU,vae,yae=I(()=>{gae();K0();Y0();KU="metrics",vae=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return jl(KU,e,ms.instance())},t.prototype.getMeterProvider=function(){return ec(KU)||hae},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){Gl(KU,ms.instance())},t}()});var YU,bae=I(()=>{yae();YU=vae.getInstance()});var _ae,xae=I(()=>{_ae=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}()});function XU(t){return t.getValue(QU)||void 0}function Sae(){return XU(Dm.getInstance().active())}function Eae(t,e){return t.setValue(QU,e)}function Tae(t){return t.deleteValue(QU)}var QU,Iae=I(()=>{aI();sI();QU=Vl("OpenTelemetry Baggage Key")});var JU,P6e,Cae,wae=I(()=>{K0();xae();FU();Iae();kU();Y0();JU="propagation",P6e=new _ae,Cae=function(){function t(){this.createBaggage=Hse,this.getBaggage=XU,this.getActiveBaggage=Sae,this.setBaggage=Eae,this.deleteBaggage=Tae}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return jl(JU,e,ms.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=hk),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=mk),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Gl(JU,ms.instance())},t.prototype._getGlobalPropagator=function(){return ec(JU)||P6e},t}()});var Dp,Rae=I(()=>{wae();Dp=Cae.getInstance()});var ZU,Aae,Pae=I(()=>{K0();$U();_k();HU();Y0();ZU="trace",Aae=function(){function t(){this._proxyTracerProvider=new dI,this.wrapSpanContext=Xse,this.isSpanContextValid=Pc,this.deleteSpan=Yse,this.getSpan=yk,this.getActiveSpan=Kse,this.getSpanContext=bk,this.setSpan=lI,this.setSpanContext=Qse}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=jl(ZU,this._proxyTracerProvider,ms.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return ec(ZU)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Gl(ZU,ms.instance()),this._proxyTracerProvider=new dI},t}()});var eo,kae=I(()=>{Pae();eo=Aae.getInstance()});var S_={};rn(S_,{DiagConsoleLogger:()=>jse,DiagLogLevel:()=>un,INVALID_SPANID:()=>cI,INVALID_SPAN_CONTEXT:()=>b_,INVALID_TRACEID:()=>uI,ProxyTracer:()=>Sk,ProxyTracerProvider:()=>dI,ROOT_CONTEXT:()=>pk,SamplingDecision:()=>_a,SpanKind:()=>__,SpanStatusCode:()=>x_,TraceFlags:()=>yi,ValueType:()=>fk,baggageEntryMetadataFromString:()=>dk,context:()=>js,createContextKey:()=>Vl,createNoopMeter:()=>Vse,createTraceState:()=>dae,default:()=>k6e,defaultTextMapGetter:()=>mk,defaultTextMapSetter:()=>hk,diag:()=>at,isSpanContextValid:()=>Pc,isValidSpanId:()=>jU,isValidTraceId:()=>Q0,metrics:()=>YU,propagation:()=>Dp,trace:()=>eo});var k6e,ir=I(()=>{kU();sI();Gse();lk();MU();zse();FU();zU();$U();eae();tae();rae();BU();pae();_k();gk();fae();mae();bae();Rae();kae();k6e={context:js,diag:at,metrics:YU,propagation:Dp,trace:eo}});function pI(t){return t.setValue(eB,!0)}function D6e(t){return t.deleteValue(eB)}function X0(t){return t.getValue(eB)===!0}var eB,fI=I(()=>{ir();eB=Vl("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var Dae,Ek,E_,Tk,Nae,Lae,Oae,tB=I(()=>{Dae="=",Ek=";",E_=",",Tk="baggage",Nae=180,Lae=4096,Oae=8192});var iB={};rn(iB,{getKeyPairs:()=>nB,parseKeyPairsIntoRecord:()=>L6e,parsePairKeyValue:()=>Ik,serializeKeyPairs:()=>rB});function rB(t){return t.reduce(function(e,r){var n=""+e+(e!==""?E_:"")+r;return n.length>Oae?e:n},"")}function nB(t){return t.getAllEntries().map(function(e){var r=N6e(e,2),n=r[0],i=r[1],o=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=Ek+i.metadata.toString()),o})}function Ik(t){var e=t.split(Ek);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(Dae);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),o=decodeURIComponent(r.substring(n+1).trim()),s;return e.length>0&&(s=dk(e.join(Ek))),{key:i,value:o,metadata:s}}}}}function L6e(t){return typeof t!="string"||t.length===0?{}:t.split(E_).map(function(e){return Ik(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var N6e,oB=I(()=>{ir();tB();N6e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});var sB,Mae=I(()=>{ir();fI();tB();oB();sB=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=Dp.getBaggage(e);if(!(!i||X0(e))){var o=nB(i).filter(function(a){return a.length<=Lae}).slice(0,Nae),s=rB(o);s.length>0&&n.set(r,Tk,s)}},t.prototype.extract=function(e,r,n){var i=n.get(r,Tk),o=Array.isArray(i)?i.join(E_):i;if(!o)return e;var s={};if(o.length===0)return e;var a=o.split(E_);return a.forEach(function(c){var u=Ik(c);if(u){var l={value:u.value};u.metadata&&(l.metadata=u.metadata),s[u.key]=l}}),Object.entries(s).length===0?e:Dp.setBaggage(e,Dp.createBaggage(s))},t.prototype.fields=function(){return[Tk]},t}()});var O6e,Fae=I(()=>{O6e=function(){function t(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}return t.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},t}()});function J0(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=Uae(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=M6e(o.value,2),a=s[0],c=s[1];if(!Bae(a)){at.warn("Invalid attribute key: "+a);continue}if(!Ck(c)){at.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(c)?n[a]=c.slice():n[a]=c}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function Bae(t){return typeof t=="string"&&t.length>0}function Ck(t){return t==null?!0:Array.isArray(t)?F6e(t):qae(t)}function F6e(t){var e,r,n;try{for(var i=Uae(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!=null){if(!n){if(qae(s)){n=typeof s;continue}return!1}if(typeof s!==n)return!1}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function qae(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var Uae,M6e,Hae=I(()=>{ir();Uae=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M6e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});function aB(){return function(t){at.error(U6e(t))}}function U6e(t){return typeof t=="string"?t:JSON.stringify(B6e(t))}function B6e(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var cB=I(()=>{ir()});function q6e(t){jae=t}function xa(t){try{jae(t)}catch{}}var jae,uB=I(()=>{cB();jae=aB()});var tc,lB=I(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(tc||(tc={}))});var Gae,Vae=I(()=>{Gae=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});function G6e(t){return j6e.indexOf(t)>-1}function z6e(t){return V6e.indexOf(t)>-1}function W6e(t){return $6e.indexOf(t)>-1}function K6e(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function Y6e(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function Q6e(t,e,r,n){n===void 0&&(n=H6e);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(o){return o.trim()}))}function J6e(t,e,r){var n=r[t];if(typeof n=="string"){var i=X6e[n.toUpperCase()];i!=null&&(e[t]=i)}}function mI(t){var e={};for(var r in wk){var n=r;switch(n){case"OTEL_LOG_LEVEL":J6e(n,e,t);break;default:if(G6e(n))K6e(n,e,t);else if(z6e(n))Y6e(n,e,t);else if(W6e(n))Q6e(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}function dB(){return typeof process<"u"&&process&&process.env?mI(process.env):mI(Gae)}var H6e,j6e,V6e,$6e,T_,I_,zae,$ae,wk,X6e,pB=I(()=>{ir();lB();Vae();H6e=",",j6e=["OTEL_SDK_DISABLED"];V6e=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];$6e=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];T_=1/0,I_=128,zae=128,$ae=128,wk={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:un.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:T_,OTEL_ATTRIBUTE_COUNT_LIMIT:I_,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:T_,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:I_,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:T_,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:I_,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:zae,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:$ae,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:tc.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};X6e={ALL:un.ALL,VERBOSE:un.VERBOSE,DEBUG:un.DEBUG,INFO:un.INFO,WARN:un.WARN,ERROR:un.ERROR,NONE:un.NONE}});function to(){var t=mI(process.env);return Object.assign({HOSTNAME:Wae.hostname()},wk,t)}var Wae,Kae=I(()=>{Wae=W(require("os"));pB()});var Z6e,Yae=I(()=>{Z6e=typeof globalThis=="object"?globalThis:global});function Qae(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function r8e(t){var e;t.length===16?e=e8e:t.length===32?e=t8e:e=Buffer.alloc(t.length/2);for(var r=0,n=0;n<t.length;n+=2){var i=Qae(t.charCodeAt(n)),o=Qae(t.charCodeAt(n+1));e.writeUInt8(i<<4|o,r++)}return e.toString("base64")}var e8e,t8e,Xae=I(()=>{e8e=Buffer.alloc(8),t8e=Buffer.alloc(16)});function Jae(t){return function(){for(var r=0;r<t/4;r++)Rk.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(Rk[r]>0);r++)r===t-1&&(Rk[t-1]=1);return Rk.toString("hex",0,t)}}var n8e,Zae,i8e,Rk,ece=I(()=>{n8e=8,Zae=16,i8e=function(){function t(){this.generateTraceId=Jae(Zae),this.generateSpanId=Jae(n8e)}return t}(),Rk=Buffer.allocUnsafe(Zae)});var tce,Np,rce=I(()=>{tce=require("perf_hooks"),Np=tce.performance});var fB,Ak=I(()=>{fB="1.17.0"});var Lp,o8e,s8e,a8e,c8e,u8e,l8e,d8e,p8e,f8e,m8e,h8e,g8e,v8e,nce=I(()=>{Lp={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},o8e={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},s8e={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},a8e={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},c8e={INSERT:"insert",EDIT:"edit",DELETE:"delete"},u8e={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},l8e={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},d8e={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},p8e={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},f8e={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},m8e={QUEUE:"queue",TOPIC:"topic"},h8e={RECEIVE:"receive",PROCESS:"process"},g8e={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},v8e={SENT:"SENT",RECEIVED:"RECEIVED"}});var ice=I(()=>{nce()});var Kt,y8e,b8e,_8e,x8e,S8e,mB,oce=I(()=>{Kt={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},y8e={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},b8e={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},_8e={EC2:"ec2",FARGATE:"fargate"},x8e={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},S8e={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},mB={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var sce=I(()=>{oce()});var hB={};rn(hB,{AwsEcsLaunchtypeValues:()=>_8e,CloudPlatformValues:()=>b8e,CloudProviderValues:()=>y8e,DbCassandraConsistencyLevelValues:()=>s8e,DbSystemValues:()=>o8e,FaasDocumentOperationValues:()=>c8e,FaasInvokedProviderValues:()=>u8e,FaasTriggerValues:()=>a8e,HostArchValues:()=>x8e,HttpFlavorValues:()=>f8e,MessageTypeValues:()=>v8e,MessagingDestinationKindValues:()=>m8e,MessagingOperationValues:()=>h8e,NetHostConnectionSubtypeValues:()=>p8e,NetHostConnectionTypeValues:()=>d8e,NetTransportValues:()=>l8e,OsTypeValues:()=>S8e,RpcGrpcStatusCodeValues:()=>g8e,SemanticAttributes:()=>Lp,SemanticResourceAttributes:()=>Kt,TelemetrySdkLanguageValues:()=>mB});var Mu=I(()=>{ice();sce()});var C_,hI,ace=I(()=>{Ak();Mu();hI=(C_={},C_[Kt.TELEMETRY_SDK_NAME]="opentelemetry",C_[Kt.PROCESS_RUNTIME_NAME]="node",C_[Kt.TELEMETRY_SDK_LANGUAGE]=mB.NODEJS,C_[Kt.TELEMETRY_SDK_VERSION]=fB,C_)});function gB(t){t.unref()}var cce=I(()=>{});var uce=I(()=>{Kae();Yae();Xae();ece();rce();ace();cce()});var vB=I(()=>{uce()});function zl(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*T8e);return[r,n]}function gI(){var t=Np.timeOrigin;if(typeof t!="number"){var e=Np;t=e.timing&&e.timing.fetchStart}return t}function kk(t){var e=zl(gI()),r=zl(typeof t=="number"?t:Np.now());return Lk(e,r)}function I8e(t){if(vI(t))return t;if(typeof t=="number")return t<gI()?kk(t):zl(t);if(t instanceof Date)return zl(t.getTime());throw TypeError("Invalid input type")}function yB(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=Pk),[r,n]}function C8e(t){var e=lce,r=""+"0".repeat(e)+t[1]+"Z",n=r.substr(r.length-e-1),i=new Date(t[0]*1e3).toISOString();return i.replace("000Z",n)}function w8e(t){return t[0]*Pk+t[1]}function R8e(t){return t[0]*1e3+t[1]/1e6}function Dk(t){return t[0]*1e6+t[1]/1e3}function vI(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function Nk(t){return vI(t)||typeof t=="number"||t instanceof Date}function Lk(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=Pk&&(r[1]-=Pk,r[0]+=1),r}var lce,E8e,T8e,Pk,dce=I(()=>{vB();lce=9,E8e=6,T8e=Math.pow(10,E8e),Pk=Math.pow(10,lce)});var pce=I(()=>{});var kc,fce=I(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(kc||(kc={}))});var A8e,bB,mce=I(()=>{ir();A8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bB=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,o;try{for(var s=A8e(this._propagators),a=s.next();!a.done;a=s.next()){var c=a.value;try{c.inject(e,r,n)}catch(u){at.warn("Failed to inject with "+c.constructor.name+". Err: "+u.message)}}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(s){at.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}()});function hce(t){return D8e.test(t)}function gce(t){return N8e.test(t)&&!L8e.test(t)}var _B,P8e,k8e,D8e,N8e,L8e,vce=I(()=>{_B="[_0-9a-z-*/]",P8e="[a-z]"+_B+"{0,255}",k8e="[a-z0-9]"+_B+"{0,240}@[a-z]"+_B+"{0,13}",D8e=new RegExp("^(?:"+P8e+"|"+k8e+")$"),N8e=/^[ -~]{0,255}[!-~]$/,L8e=/,|=/});var yce,O8e,bce,_ce,xB,SB=I(()=>{vce();yce=32,O8e=512,bce=",",_ce="=",xB=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+_ce+e.get(n)),r},[]).join(bce)},t.prototype._parse=function(e){e.length>O8e||(this._internalState=e.split(bce).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(_ce);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);hce(s)&&gce(a)&&r.set(s,a)}return r},new Map),this._internalState.size>yce&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,yce))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function xce(t){var e=H8e.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var Ok,Mk,M8e,F8e,U8e,B8e,q8e,H8e,EB,Sce=I(()=>{ir();fI();SB();Ok="traceparent",Mk="tracestate",M8e="00",F8e="(?!ff)[\\da-f]{2}",U8e="(?![0]{32})[\\da-f]{32}",B8e="(?![0]{16})[\\da-f]{16}",q8e="[\\da-f]{2}",H8e=new RegExp("^\\s?("+F8e+")-("+U8e+")-("+B8e+")-("+q8e+")(-.*)?\\s?$");EB=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=eo.getSpanContext(e);if(!(!i||X0(e)||!Pc(i))){var o=M8e+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||yi.NONE).toString(16);n.set(r,Ok,o),i.traceState&&n.set(r,Mk,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,Ok);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;var s=xce(o);if(!s)return e;s.isRemote=!0;var a=n.get(r,Mk);if(a){var c=Array.isArray(a)?a.join(","):a;s.traceState=new xB(typeof c=="string"?c:void 0)}return eo.setSpanContext(e,s)},t.prototype.fields=function(){return[Ok,Mk]},t}()});var Ece=I(()=>{});function j8e(t,e){return t.setValue(IB,e)}function G8e(t){return t.deleteValue(IB)}function V8e(t){return t.getValue(IB)}var IB,TB,Tce=I(()=>{ir();IB=Vl("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(TB||(TB={}))});var Fk,CB=I(()=>{ir();Fk=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:_a.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var yI,wB=I(()=>{ir();yI=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:_a.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var z8e,Ice=I(()=>{ir();uB();CB();wB();z8e=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(xa(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new yI),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new yI,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new Fk,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new yI,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new Fk}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=eo.getSpanContext(e);return!a||!Pc(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&yi.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&yi.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var $8e,Cce=I(()=>{ir();$8e=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Q0(r)&&this._accumulate(r)<this._upperBound?_a.RECORD_AND_SAMPLED:_a.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function Z8e(t,e){return function(r){return t(e(r))}}function RB(t){if(!eMe(t)||tMe(t)!==W8e)return!1;var e=J8e(t);if(e===null)return!0;var r=Ace.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&wce.call(r)===X8e}function eMe(t){return t!=null&&typeof t=="object"}function tMe(t){return t==null?t===void 0?Y8e:K8e:Z0&&Z0 in Object(t)?rMe(t):nMe(t)}function rMe(t){var e=Ace.call(t,Z0),r=t[Z0],n=!1;try{t[Z0]=void 0,n=!0}catch{}var i=Pce.call(t);return n&&(e?t[Z0]=r:delete t[Z0]),i}function nMe(t){return Pce.call(t)}var W8e,K8e,Y8e,Q8e,wce,X8e,J8e,Rce,Ace,Z0,Pce,kce=I(()=>{W8e="[object Object]",K8e="[object Null]",Y8e="[object Undefined]",Q8e=Function.prototype,wce=Q8e.toString,X8e=wce.call(Object),J8e=Z8e(Object.getPrototypeOf,Object),Rce=Object.prototype,Ace=Rce.hasOwnProperty,Z0=Symbol?Symbol.toStringTag:void 0,Pce=Rce.toString});function PB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=Nce(r,t.shift(),0,n);return r}function AB(t){return Bk(t)?t.slice():t}function Nce(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>iMe)){if(r++,Uk(t)||Uk(e)||Lce(e))i=AB(e);else if(Bk(t)){if(i=t.slice(),Bk(e))for(var o=0,s=e.length;o<s;o++)i.push(AB(e[o]));else if(bI(e))for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var c=a[o];i[c]=AB(e[c])}}else if(bI(t))if(bI(e)){if(!oMe(t,e))return e;i=Object.assign({},t);for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var c=a[o],u=e[c];if(Uk(u))typeof u>"u"?delete i[c]:i[c]=u;else{var l=i[c],d=u;if(Dce(t,c,n)||Dce(e,c,n))delete i[c];else{if(bI(l)&&bI(d)){var p=n.get(l)||[],f=n.get(d)||[];p.push({obj:t,key:c}),f.push({obj:e,key:c}),n.set(l,p),n.set(d,f)}i[c]=Nce(i[c],u,r,n)}}}}else i=e;return i}}function Dce(t,e,r){for(var n=r.get(t[e])||[],i=0,o=n.length;i<o;i++){var s=n[i];if(s.key===e&&s.obj===t)return!0}return!1}function Bk(t){return Array.isArray(t)}function Lce(t){return typeof t=="function"}function bI(t){return!Uk(t)&&!Bk(t)&&!Lce(t)&&typeof t=="object"}function Uk(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function oMe(t,e){return!(!RB(t)||!RB(e))}var iMe,Oce=I(()=>{kce();iMe=20});function aMe(t,e){var r,n=new Promise(function(o,s){r=setTimeout(function(){s(new Mce("Operation timed out."))},e)});return Promise.race([t,n]).then(function(i){return clearTimeout(r),i},function(i){throw clearTimeout(r),i})}var sMe,Mce,Fce=I(()=>{sMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mce=function(t){sMe(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error)});function Uce(t,e){return typeof e=="string"?t===e:!!t.match(e)}function uMe(t,e){var r,n;if(!e)return!1;try{for(var i=cMe(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(Uce(t,s))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}var cMe,Bce=I(()=>{cMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});function lMe(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var qce=I(()=>{});var Hce,jce=I(()=>{Hce=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}()});var dMe,pMe,_I,Gce=I(()=>{jce();dMe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},pMe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},_I=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new Hce}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,pMe([this._that],dMe(n),!1))).then(function(o){return r._deferred.resolve(o)},function(o){return r._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},t}()});function Vce(t,e){return new Promise(function(r){js.with(pI(js.active()),function(){t.export(e,function(n){r(n)})})})}var zce=I(()=>{ir();fI()});var $ce={};rn($ce,{AlwaysOffSampler:()=>Fk,AlwaysOnSampler:()=>yI,AnchoredClock:()=>O6e,BindOnceFuture:()=>_I,CompositePropagator:()=>bB,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>I_,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>T_,DEFAULT_ENVIRONMENT:()=>wk,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>zae,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>$ae,ExportResultCode:()=>kc,ParentBasedSampler:()=>z8e,RPCType:()=>TB,RandomIdGenerator:()=>i8e,SDK_INFO:()=>hI,TRACE_PARENT_HEADER:()=>Ok,TRACE_STATE_HEADER:()=>Mk,TimeoutError:()=>Mce,TraceIdRatioBasedSampler:()=>$8e,TraceState:()=>xB,TracesSamplerValues:()=>tc,VERSION:()=>fB,W3CBaggagePropagator:()=>sB,W3CTraceContextPropagator:()=>EB,_globalThis:()=>Z6e,addHrTimes:()=>Lk,baggageUtils:()=>iB,callWithTimeout:()=>aMe,deleteRPCMetadata:()=>G8e,getEnv:()=>to,getEnvWithoutDefaults:()=>dB,getRPCMetadata:()=>V8e,getTimeOrigin:()=>gI,globalErrorHandler:()=>xa,hexToBase64:()=>r8e,hrTime:()=>kk,hrTimeDuration:()=>yB,hrTimeToMicroseconds:()=>Dk,hrTimeToMilliseconds:()=>R8e,hrTimeToNanoseconds:()=>w8e,hrTimeToTimeStamp:()=>C8e,internal:()=>kB,isAttributeKey:()=>Bae,isAttributeValue:()=>Ck,isTimeInput:()=>Nk,isTimeInputHrTime:()=>vI,isTracingSuppressed:()=>X0,isUrlIgnored:()=>uMe,isWrapped:()=>lMe,loggingErrorHandler:()=>aB,merge:()=>PB,millisToHrTime:()=>zl,otperformance:()=>Np,parseEnvironment:()=>mI,parseTraceParent:()=>xce,sanitizeAttributes:()=>J0,setGlobalErrorHandler:()=>q6e,setRPCMetadata:()=>j8e,suppressTracing:()=>pI,timeInputToHrTime:()=>I8e,unrefTimer:()=>gB,unsuppressTracing:()=>D6e,urlMatches:()=>Uce});var kB,Gs=I(()=>{Mae();Fae();Hae();uB();cB();dce();pce();fce();Ak();oB();vB();mce();Sce();Ece();Tce();CB();wB();Ice();Cce();fI();SB();pB();Oce();lB();Fce();Bce();qce();Gce();Ak();zce();kB={_export:Vce}});var Wce,Kce=I(()=>{Wce="exception"});var fMe,mMe,DB,NB=I(()=>{ir();Gs();Mu();Kce();fMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mMe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},DB=function(){function t(e,r,n,i,o,s,a,c,u){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:x_.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a;var l=Date.now();this._performanceStartTime=Np.now(),this._performanceOffset=l-(this._performanceStartTime+gI()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(at.warn("Invalid attribute key: "+e),this):Ck(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(at.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=fMe(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=mMe(o.value,2),a=s[0],c=s[1];this.setAttribute(a,c)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return at.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(at.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Nk(r)&&(Nk(n)||(n=r),r=void 0);var i=J0(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){at.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=yB(this.startTime,this.endTime),this._duration[0]<0&&(at.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<Np.now())return kk(e+this._performanceOffset);if(typeof e=="number")return zl(e);if(e instanceof Date)return zl(e.getTime());if(vI(e))return e;if(this._startTimeProvided)return zl(Date.now());var r=Np.now()-this._performanceStartTime;return Lk(this.startTime,zl(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[Lp.EXCEPTION_MESSAGE]=e:e&&(e.code?n[Lp.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[Lp.EXCEPTION_TYPE]=e.name),e.message&&(n[Lp.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[Lp.EXCEPTION_STACKTRACE]=e.stack)),n[Lp.EXCEPTION_TYPE]||n[Lp.EXCEPTION_MESSAGE]?this.addEvent(Wce,n,r):at.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&at.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(at.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}()});var $l,xI=I(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})($l||($l={}))});var ev,qk=I(()=>{xI();ev=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:$l.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var Op,Hk=I(()=>{xI();Op=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:$l.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var SI,LB=I(()=>{ir();Gs();qk();Hk();SI=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(xa(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Op),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new Op,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new ev,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new Op,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new ev}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=eo.getSpanContext(e);return!a||!Pc(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&yi.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&yi.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var jk,OB=I(()=>{ir();xI();jk=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Q0(r)&&this._accumulate(r)<this._upperBound?$l.RECORD_AND_SAMPLED:$l.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function Gk(){return{sampler:MB(hMe),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:to().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:to().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:to().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:to().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:to().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:to().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:to().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:to().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function MB(t){switch(t===void 0&&(t=to()),t.OTEL_TRACES_SAMPLER){case tc.AlwaysOn:return new Op;case tc.AlwaysOff:return new ev;case tc.ParentBasedAlwaysOn:return new SI({root:new Op});case tc.ParentBasedAlwaysOff:return new SI({root:new ev});case tc.TraceIdRatio:return new jk(Yce(t));case tc.ParentBasedTraceIdRatio:return new SI({root:new jk(Yce(t))});default:return at.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+gMe+'".'),new Op}}function Yce(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return at.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+w_+"."),w_;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(at.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+w_+"."),w_):e<0||e>1?(at.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+w_+"."),w_):e}var hMe,gMe,w_,FB=I(()=>{ir();Gs();qk();Hk();LB();OB();hMe=to(),gMe=tc.AlwaysOn,w_=1});function Qce(t){var e={sampler:MB()},r=Gk(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function Xce(t){var e,r,n,i,o,s,a,c,u,l,d,p,f=Object.assign({},t.spanLimits),m=dB();return f.attributeCountLimit=(s=(o=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:I_,f.attributeValueLengthLimit=(p=(d=(l=(c=(a=t.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&c!==void 0?c:(u=t.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&l!==void 0?l:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:T_,Object.assign({},t,{spanLimits:f})}var UB=I(()=>{FB();Gs()});var Jce,Zce=I(()=>{ir();Gs();Jce=function(){function t(e,r){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=to();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new _I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(at.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&yi.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&at.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(at.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);js.with(pI(js.active()),function(){var o=e._finishedSpans.splice(0,e._maxExportBatchSize),s=function(){return e._exporter.export(o,function(c){var u;clearTimeout(i),c.code===kc.SUCCESS?r():n((u=c.error)!==null&&u!==void 0?u:new Error("BatchSpanProcessor: span export failed"))})},a=o.map(function(c){return c.resource}).filter(function(c){return c.asyncAttributesPending});a.length===0?s():Promise.all(a.map(function(c){var u;return(u=c.waitForAsyncAttributes)===null||u===void 0?void 0:u.call(c)})).then(s,function(c){xa(c),n(c)})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){xa(r)})},this._scheduledDelayMillis),gB(this._timer))},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}()});var vMe,BB,eue=I(()=>{Zce();vMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BB=function(t){vMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onShutdown=function(){},e}(Jce)});function tue(t){return function(){for(var r=0;r<t/4;r++)Vk.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(Vk[r]>0);r++)r===t-1&&(Vk[t-1]=1);return Vk.toString("hex",0,t)}}var yMe,rue,qB,Vk,nue=I(()=>{yMe=8,rue=16,qB=function(){function t(){this.generateTraceId=tue(rue),this.generateSpanId=tue(yMe)}return t}(),Vk=Buffer.allocUnsafe(rue)});var iue=I(()=>{eue();nue()});var zk=I(()=>{iue()});var HB,oue=I(()=>{ir();Gs();NB();UB();zk();HB=function(){function t(e,r,n){this._tracerProvider=n;var i=Qce(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new qB,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,o,s;r===void 0&&(r={}),n===void 0&&(n=js.active()),r.root&&(n=eo.deleteSpan(n));var a=eo.getSpan(n);if(X0(n)){at.debug("Instrumentation suppressed, returning Noop Span");var c=eo.wrapSpanContext(b_);return c}var u=a?.spanContext(),l=this._idGenerator.generateSpanId(),d,p,f;!u||!eo.isSpanContextValid(u)?d=this._idGenerator.generateTraceId():(d=u.traceId,p=u.traceState,f=u.spanId);var m=(i=r.kind)!==null&&i!==void 0?i:__.INTERNAL,h=((o=r.links)!==null&&o!==void 0?o:[]).map(function(T){return{context:T.context,attributes:J0(T.attributes)}}),g=J0(r.attributes),v=this._sampler.shouldSample(n,d,e,m,g,h);p=(s=v.traceState)!==null&&s!==void 0?s:p;var b=v.decision===_a.RECORD_AND_SAMPLED?yi.SAMPLED:yi.NONE,y={traceId:d,spanId:l,traceFlags:b,traceState:p};if(v.decision===_a.NOT_RECORD){at.debug("Recording is off, propagating context in a non-recording span");var c=eo.wrapSpanContext(y);return c}var S=new DB(this,n,e,y,m,f,h,r.startTime),x=J0(Object.assign(g,v.attributes));return S.setAttributes(x),S},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s??js.active(),u=this.startSpan(e,o,c),l=eo.setSpan(c,u);return js.with(l,a,void 0,u)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}()});function sue(){return"unknown_service:"+process.argv0}var aue=I(()=>{});var cue,uue,jB=I(()=>{cue=function(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},uue=function(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}});var lue,due,R_,$k=I(()=>{lue=W(require("child_process")),due=W(require("util")),R_=due.promisify(lue.exec)});var pue={};rn(pue,{getMachineId:()=>xMe});function xMe(){return bMe(this,void 0,void 0,function(){var t,e,r,n;return _Me(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,R_('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:return t=i.sent(),e=t.stdout.split(`
`).find(function(o){return o.includes("IOPlatformUUID")}),e?(r=e.split('" = "'),r.length===2?[2,r[1].slice(0,-1)]:[3,3]):[2,""];case 2:return n=i.sent(),at.debug("error reading machine id: "+n),[3,3];case 3:return[2,""]}})})}var bMe,_Me,fue=I(()=>{$k();ir();bMe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},_Me=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var hue={};rn(hue,{getMachineId:()=>IMe});function IMe(){return SMe(this,void 0,void 0,function(){var t,e,r,n,i,o,s,a,c;return EMe(this,function(u){switch(u.label){case 0:t=["/etc/machine-id","/var/lib/dbus/machine-id"],u.label=1;case 1:u.trys.push([1,8,9,10]),e=TMe(t),r=e.next(),u.label=2;case 2:if(r.done)return[3,7];n=r.value,u.label=3;case 3:return u.trys.push([3,5,,6]),[4,mue.promises.readFile(n,{encoding:"utf8"})];case 4:return i=u.sent(),[2,i.trim()];case 5:return o=u.sent(),at.debug("error reading machine id: "+o),[3,6];case 6:return r=e.next(),[3,2];case 7:return[3,10];case 8:return s=u.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(c=e.return)&&c.call(e)}finally{if(a)throw a.error}return[7];case 10:return[2,""]}})})}var mue,SMe,EMe,TMe,gue=I(()=>{mue=require("fs");ir();SMe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},EMe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},TMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});var yue={};rn(yue,{getMachineId:()=>RMe});function RMe(){return CMe(this,void 0,void 0,function(){var e,t,e,r;return wMe(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,vue.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return e=n.sent(),[2,e.trim()];case 2:return t=n.sent(),at.debug("error reading machine id: "+t),[3,3];case 3:return n.trys.push([3,5,,6]),[4,R_("kenv -q smbios.system.uuid")];case 4:return e=n.sent(),[2,e.stdout.trim()];case 5:return r=n.sent(),at.debug("error reading machine id: "+r),[3,6];case 6:return[2,""]}})})}var vue,CMe,wMe,bue=I(()=>{vue=require("fs");$k();ir();CMe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},wMe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var _ue={};rn(_ue,{getMachineId:()=>kMe});function kMe(){return AMe(this,void 0,void 0,function(){var t,e,r,n,i;return PMe(this,function(o){switch(o.label){case 0:t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe",Wk.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in Wk.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,R_(e+" "+t)];case 2:return r=o.sent(),n=r.stdout.split("REG_SZ"),n.length===2?[2,n[1].trim()]:[3,4];case 3:return i=o.sent(),at.debug("error reading machine id: "+i),[3,4];case 4:return[2,""]}})})}var Wk,AMe,PMe,xue=I(()=>{Wk=W(require("process"));$k();ir();AMe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},PMe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var Sue={};rn(Sue,{getMachineId:()=>LMe});function LMe(){return DMe(this,void 0,void 0,function(){return NMe(this,function(t){return at.debug("could not read machine-id: unsupported platform"),[2,""]})})}var DMe,NMe,Eue=I(()=>{ir();DMe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},NMe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var Tue,tv,Iue=I(()=>{Tue=W(require("process"));switch(Tue.platform){case"darwin":tv=(fue(),Ai(pue)).getMachineId;break;case"linux":tv=(gue(),Ai(hue)).getMachineId;break;case"freebsd":tv=(bue(),Ai(yue)).getMachineId;break;case"win32":tv=(xue(),Ai(_ue)).getMachineId;break;default:tv=(Eue(),Ai(Sue)).getMachineId}});var Kk,OMe,Cue,GB=I(()=>{Mu();A_();Kk=require("os");jB();Iue();OMe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Kt.HOST_NAME]=(0,Kk.hostname)(),r[Kt.HOST_ARCH]=cue((0,Kk.arch)()),r);return new Vs(n,this._getAsyncAttributes())},t.prototype._getAsyncAttributes=function(){return tv().then(function(e){var r={};return e&&(r[Kt.HOST_ID]=e),r})},t}(),Cue=new OMe});var MMe,fEt,wue=I(()=>{GB();MMe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Cue.detect(e))},t}(),fEt=new MMe});var Yk,FMe,Rue,VB=I(()=>{Mu();A_();Yk=require("os");jB();FMe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Kt.OS_TYPE]=uue((0,Yk.platform)()),r[Kt.OS_VERSION]=(0,Yk.release)(),r);return new Vs(n)},t}(),Rue=new FMe});var UMe,_Et,Aue=I(()=>{VB();UMe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Rue.detect(e))},t}(),_Et=new UMe});var Due,Pue,kue,BMe,Nue,zB=I(()=>{ir();Mu();A_();Due=W(require("os")),Pue=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},kue=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},BMe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Kt.PROCESS_PID]=process.pid,r[Kt.PROCESS_EXECUTABLE_NAME]=process.title,r[Kt.PROCESS_EXECUTABLE_PATH]=process.execPath,r[Kt.PROCESS_COMMAND_ARGS]=kue(kue([process.argv[0]],Pue(process.execArgv),!1),Pue(process.argv.slice(1)),!1),r[Kt.PROCESS_RUNTIME_VERSION]=process.versions.node,r[Kt.PROCESS_RUNTIME_NAME]="nodejs",r[Kt.PROCESS_RUNTIME_DESCRIPTION]="Node.js",r);process.argv.length>1&&(n[Kt.PROCESS_COMMAND]=process.argv[1]);try{var i=Due.userInfo();n[Kt.PROCESS_OWNER]=i.username}catch(o){at.debug("error obtaining process owner: "+o)}return new Vs(n)},t}(),Nue=new BMe});var qMe,wEt,Lue=I(()=>{zB();qMe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Nue.detect(e))},t}(),wEt=new qMe});var Oue=I(()=>{aue();wue();Aue();GB();VB();Lue();zB()});var $B=I(()=>{Oue()});var Lm,HMe,jMe,GMe,Vs,A_=I(()=>{ir();Mu();Gs();$B();Lm=function(){return Lm=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lm.apply(this,arguments)},HMe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},jMe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},GMe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Vs=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r?.then(function(o){return n._attributes=Object.assign({},n._attributes,o),n.asyncAttributesPending=!1,o},function(o){return at.debug("a resource's async attributes promise rejected: %s",o),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[Kt.SERVICE_NAME]=sue(),e[Kt.TELEMETRY_SDK_LANGUAGE]=hI[Kt.TELEMETRY_SDK_LANGUAGE],e[Kt.TELEMETRY_SDK_NAME]=hI[Kt.TELEMETRY_SDK_NAME],e[Kt.TELEMETRY_SDK_VERSION]=hI[Kt.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&at.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return HMe(this,void 0,void 0,function(){return jMe(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=Lm(Lm({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(s){var a,c=GMe(s,2),u=c[0],l=c[1];return Lm(Lm(Lm(Lm({},r._syncAttributes),u),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),l)});return new t(i,o)},t.EMPTY=new t({}),t}()});var Mue=I(()=>{});var Fue=I(()=>{});var Uue=I(()=>{});var VMe,zEt,Bue=I(()=>{Qk();VMe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(que.detect(e))},t}(),zEt=new VMe});var zMe,$Me,WMe,Hue,WB=I(()=>{ir();Gs();Mu();A_();zMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$Me=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},WMe=function(){function t(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return t.prototype.detect=function(e){var r={},n=to(),i=n.OTEL_RESOURCE_ATTRIBUTES,o=n.OTEL_SERVICE_NAME;if(i)try{var s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(a){at.debug("EnvDetector failed: "+a.message)}return o&&(r[Kt.SERVICE_NAME]=o),new Vs(r)},t.prototype._parseResourceAttributes=function(e){var r,n;if(!e)return{};var i={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var s=zMe(o),a=s.next();!a.done;a=s.next()){var c=a.value,u=c.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length===2){var l=$Me(u,2),d=l[0],p=l[1];if(d=d.trim(),p=p.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(d))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(p))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);i[d]=decodeURIComponent(p)}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},t.prototype._isBaggageOctetString=function(e){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0},t.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},t}(),Hue=new WMe});var KMe,ZEt,jue=I(()=>{WB();KMe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Hue.detect(e))},t}(),ZEt=new KMe});var KB,YMe,que,Gue=I(()=>{Mu();Qk();ir();KB=function(){return KB=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},KB.apply(this,arguments)},YMe=function(){function t(){}return t.prototype.detect=function(e){var r,n=typeof navigator<"u";if(!n)return Vs.empty();var i=(r={},r[Kt.PROCESS_RUNTIME_NAME]="browser",r[Kt.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",r[Kt.PROCESS_RUNTIME_VERSION]=navigator.userAgent,r);return this._getResourceAttributes(i,e)},t.prototype._getResourceAttributes=function(e,r){return e[Kt.PROCESS_RUNTIME_VERSION]===""?(at.debug("BrowserDetector failed: Unable to find required browser resources. "),Vs.empty()):new Vs(KB({},e))},t}(),que=new YMe});var Vue=I(()=>{Bue();jue();Gue();WB()});var zue=I(()=>{});var Qk=I(()=>{A_();Mue();$B();Fue();Uue();Vue();zue()});var Xk,$ue,Wue=I(()=>{Gs();Xk=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$ue=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=Xk(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.forceFlush())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(c){xa(c||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var o=Xk(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onStart(e,r)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=Xk(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onEnd(e)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=Xk(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.shutdown())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a,c){Promise.all(n).then(function(){a()},c)})},t}()});var YB,QB=I(()=>{YB=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}()});var Om,QMe,Kue=I(()=>{ir();Gs();Qk();XB();FB();Wue();QB();zk();UB();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(Om||(Om={}));QMe=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=PB({},Gk(),Xce(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Vs.empty(),this.resource=Vs.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new BB(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new YB}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(i)||this._tracers.set(i,new HB({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return at.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new $ue(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),eo.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&js.setGlobalContextManager(e.contextManager),e.propagator&&Dp.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),o=Om.timeout},e);n.forceFlush().then(function(){clearTimeout(s),o!==Om.timeout&&(o=Om.resolved,i(o))}).catch(function(a){clearTimeout(s),o=Om.error,i(a)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var s=o.filter(function(a){return a!==Om.resolved});s.length>0?i(s):n()}).catch(function(o){return i([o])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(to().OTEL_PROPAGATORS)),n=r.map(function(o){var s=e._getPropagator(o);return s||at.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=n.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return r.length===1?i[0]:new bB({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=to().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||at.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new EB}],["baggage",function(){return new sB}]]),t._registeredExporters=new Map,t}()});var XMe,JMe,Yue=I(()=>{Gs();XMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JMe=function(){function t(){}return t.prototype.export=function(e,r){return this._sendSpans(e,r)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var r;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:Dk(e.startTime),duration:Dk(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,r){var n,i;try{for(var o=XMe(e),s=o.next();!s.done;s=o.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(r)return r({code:kc.SUCCESS})},t}()});var ZMe,e9e,t9e,Que=I(()=>{Gs();ZMe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},e9e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},t9e=function(){function t(){this._finishedSpans=[],this._stopped=!1}return t.prototype.export=function(e,r){var n;if(this._stopped)return r({code:kc.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,e9e([],ZMe(e),!1)),setTimeout(function(){return r({code:kc.SUCCESS})},0)},t.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this._finishedSpans=[]},t.prototype.getFinishedSpans=function(){return this._finishedSpans},t}()});var Xue=I(()=>{});var r9e,n9e,i9e,Jue=I(()=>{ir();Gs();r9e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},n9e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},i9e=function(){function t(e){this._exporter=e,this._shutdownOnce=new _I(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return r9e(this,void 0,void 0,function(){return n9e(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){var r=this,n,i;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&yi.SAMPLED){var o=function(){return kB._export(r._exporter,[e]).then(function(a){var c;a.code!==kc.SUCCESS&&xa((c=a.error)!==null&&c!==void 0?c:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){xa(a)})};if(e.resource.asyncAttributesPending){var s=(i=(n=e.resource).waitForAsyncAttributes)===null||i===void 0?void 0:i.call(n).then(function(){return s!=null&&r._unresolvedExports.delete(s),o()},function(a){return xa(a)});s!=null&&this._unresolvedExports.add(s)}else o()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}()});var Zue=I(()=>{});var ele=I(()=>{});var tle=I(()=>{});var rle=I(()=>{});var nle=I(()=>{});var ile={};rn(ile,{AlwaysOffSampler:()=>ev,AlwaysOnSampler:()=>Op,BasicTracerProvider:()=>QMe,BatchSpanProcessor:()=>BB,ConsoleSpanExporter:()=>JMe,ForceFlushState:()=>Om,InMemorySpanExporter:()=>t9e,NoopSpanProcessor:()=>YB,ParentBasedSampler:()=>SI,RandomIdGenerator:()=>qB,SamplingDecision:()=>$l,SimpleSpanProcessor:()=>i9e,Span:()=>DB,TraceIdRatioBasedSampler:()=>jk,Tracer:()=>HB});var XB=I(()=>{oue();Kue();zk();Yue();Que();Xue();Jue();Zue();QB();qk();Hk();LB();OB();xI();NB();ele();tle();rle();nle()});var sle=P(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.enable=Dc.azureCoreTracing=Dc.AzureMonitorSymbol=void 0;var JB=ri();Dc.AzureMonitorSymbol="Azure_Monitor_Tracer";var ZB="azure-coretracing",ole=!1,o9e=function(t){if(ole)return t;try{var e=(XB(),Ai(ile)),r=(ir(),Ai(S_)),n=new e.BasicTracerProvider,i=n.getTracer("applicationinsights tracer");if(t.setTracer){var o=t.setTracer;t.setTracer=function(u){var l=u.startSpan;u.startSpan=function(d,p,f){var m=l.call(this,d,p,f),h=m.end;return m.end=function(){var g=h.apply(this,arguments);return JB.channel.publish(ZB,m),g},m},u[Dc.AzureMonitorSymbol]=!0,o.call(this,u)},r.trace.getSpan(r.context.active()),t.setTracer(i)}else{var s=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(u){var l=u.getTracer;return u.getTracer=function(d,p){var f=l.call(this,d,p);if(!f[Dc.AzureMonitorSymbol]){var m=f.startSpan;f.startSpan=function(h,g,v){var b=m.call(this,h,g,v),y=b.end;return b.end=function(){var S=y.apply(this,arguments);return JB.channel.publish(ZB,b),S},b},f[Dc.AzureMonitorSymbol]=!0}return f},s.call(this,u)},n.register(),r.trace.getSpan(r.context.active());var a=require("@opentelemetry/instrumentation"),c=require("@azure/opentelemetry-instrumentation-azure-sdk");a.registerInstrumentations({instrumentations:[c.createAzureSdkInstrumentation()]})}ole=!0}catch{}return t};Dc.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:o9e,publisherName:ZB};function s9e(){JB.channel.registerMonkeyPatch("@azure/core-tracing",Dc.azureCoreTracing)}Dc.enable=s9e});var cle=P(rv=>{"use strict";Object.defineProperty(rv,"__esModule",{value:!0});rv.enable=rv.bunyan=void 0;var ale=ri(),a9e=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,r,!0)),ale.channel.publish("bunyan",{level:r.level,result:o})}return i},t};rv.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:a9e};function c9e(){ale.channel.registerMonkeyPatch("bunyan",rv.bunyan)}rv.enable=c9e});var lle=P(nv=>{"use strict";Object.defineProperty(nv,"__esModule",{value:!0});nv.enable=nv.console=void 0;var eq=ri(),ule=require("stream"),u9e=function(t){var e=new ule.Writable,r=new ule.Writable;e.write=function(u){if(!u)return!0;var l=u.toString();return eq.channel.publish("console",{message:l}),!0},r.write=function(u){if(!u)return!0;var l=u.toString();return eq.channel.publish("console",{message:l,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(u){var l=t[u];l&&(t[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch{}return l.apply(t,arguments)})},s=0,a=i;s<a.length;s++){var c=a[s];o(c)}return t};nv.console={versionSpecifier:">= 4.0.0",patch:u9e};function l9e(){eq.channel.registerMonkeyPatch("console",nv.console),require("console")}nv.enable=l9e});var dle=P(iv=>{"use strict";Object.defineProperty(iv,"__esModule",{value:!0});iv.enable=iv.mongoCore=void 0;var tq=ri(),d9e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=tq.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=tq.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t};iv.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:d9e};function p9e(){tq.channel.registerMonkeyPatch("mongodb-core",iv.mongoCore)}iv.enable=p9e});var ple=P(zs=>{"use strict";var P_=zs&&zs.__assign||function(){return P_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},P_.apply(this,arguments)};Object.defineProperty(zs,"__esModule",{value:!0});zs.enable=zs.mongo330=zs.mongo3=zs.mongo2=void 0;var hs=ri(),f9e=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return hs.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=P_(P_({},n),{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return hs.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):hs.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return hs.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):hs.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},m9e=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=hs.channel.bindToContext(function(o){return o()}),r[i.requestId]=P_(P_({},i),{time:new Date}))}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return hs.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return hs.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t},h9e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=hs.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=hs.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t},g9e=function(t){h9e(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=hs.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return hs.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return hs.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t};zs.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:f9e};zs.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:m9e};zs.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:g9e};function v9e(){hs.channel.registerMonkeyPatch("mongodb",zs.mongo2),hs.channel.registerMonkeyPatch("mongodb",zs.mongo3),hs.channel.registerMonkeyPatch("mongodb",zs.mongo330)}zs.enable=v9e});var mle=P(ov=>{"use strict";Object.defineProperty(ov,"__esModule",{value:!0});ov.enable=ov.mysql=void 0;var Jk=ri(),fle=require("path"),y9e=function(t,e){var r=function(c,u){return function(l,d){var p=c[l];p&&(c[l]=function(){for(var m=arguments.length-1,h=arguments.length-1;h>=0;--h)if(typeof arguments[h]=="function"){m=h;break}else if(typeof arguments[h]<"u")break;var g=arguments[m],v={result:null,startTime:null,startDate:null};typeof g=="function"&&(d?(v.startTime=process.hrtime(),v.startDate=new Date,arguments[m]=Jk.channel.bindToContext(d(v,g))):arguments[m]=Jk.channel.bindToContext(g));var b=p.apply(this,arguments);return v.result=b,b})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(fle.dirname(e)+"/lib/Connection");i.forEach(function(c){return n(o,"Connection")(c)}),r(o,"Connection")("createQuery",function(c,u){return function(l){var d=process.hrtime(c.startTime),p=d[0]*1e3+d[1]/1e6|0;Jk.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:l,duration:p,time:c.startDate}),u.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(fle.dirname(e)+"/lib/Pool");return s.forEach(function(c){return n(a,"Pool")(c)}),t};ov.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:y9e};function b9e(){Jk.channel.registerMonkeyPatch("mysql",ov.mysql)}ov.enable=b9e});var gle=P(sv=>{"use strict";Object.defineProperty(sv,"__esModule",{value:!0});sv.enable=sv.postgresPool1=void 0;var hle=ri();function _9e(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=hle.channel.bindToContext(n)),e.apply(this,arguments)},t}sv.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:_9e};function x9e(){hle.channel.registerMonkeyPatch("pg-pool",sv.postgresPool1)}sv.enable=x9e});var yle=P(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.enable=Wl.postgres=Wl.postgres6=void 0;var k_=ri(),vle=require("events"),rq="postgres";function S9e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),l;function d(p){p&&p[n]&&(p=p[n]);var f=k_.channel.bindToContext(function(m,h){var g=process.hrtime(u);if(c.result=h&&{rowCount:h.rowCount,command:h.command},c.error=m,c.duration=Math.ceil(g[0]*1e3+g[1]/1e6),k_.channel.publish(rq,c),m){if(p)return p.apply(this,arguments);l&&l instanceof vle.EventEmitter&&l.emit("error",m)}else p&&p.apply(this,arguments)});try{return Object.defineProperty(f,n,{value:p}),f}catch{return p}}try{typeof o=="string"?s instanceof Array?(c.query.preparable={text:o,args:s},a=d(a)):(c.query.text=o,a?a=d(a):s=d(s)):(typeof o.name=="string"?c.query.plan=o.name:o.values instanceof Array?c.query.preparable={text:o.text,args:o.values}:c.query.text=o.text,a?a=d(a):s?s=d(s):o.callback=d(o.callback))}catch{return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,l=r.apply(this,arguments),l},t}function E9e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c=this,u,l,d=!!a,p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f,m=process.hrtime();function h(b){b&&b[n]&&(b=b[n]);var y=k_.channel.bindToContext(function(S,x){var T=process.hrtime(m);if(p.result=x&&{rowCount:x.rowCount,command:x.command},p.error=S,p.duration=Math.ceil(T[0]*1e3+T[1]/1e6),k_.channel.publish(rq,p),S){if(b)return b.apply(this,arguments);f&&f instanceof vle.EventEmitter&&f.emit("error",S)}else b&&b.apply(this,arguments)});try{return Object.defineProperty(y,n,{value:b}),y}catch{return b}}try{typeof o=="string"?s instanceof Array?(p.query.preparable={text:o,args:s},d=typeof a=="function",a=d?h(a):a):(p.query.text=o,a?(d=typeof a=="function",a=d?h(a):a):(d=typeof s=="function",s=d?h(s):s)):(typeof o.name=="string"?p.query.plan=o.name:o.values instanceof Array?p.query.preparable={text:o.text,args:o.values}:o.cursor?p.query.text=(u=o.cursor)===null||u===void 0?void 0:u.text:p.query.text=o.text,a?(d=typeof a=="function",a=h(a)):s?(d=typeof s=="function",s=d?h(s):s):(d=typeof o.callback=="function",o.callback=d?h(o.callback):o.callback))}catch{return r.apply(this,arguments)}arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3;try{f=r.apply(this,arguments)}catch(b){throw h()(b,void 0),b}if(!d){if(f instanceof Promise)return f.then(function(b){return h()(void 0,b),new c._Promise(function(y,S){y(b)})}).catch(function(b){return h()(b,void 0),new c._Promise(function(y,S){S(b)})});var g=f.text?f.text:"";if(f.cursor&&(g=(l=f.cursor)===null||l===void 0?void 0:l.text),g){var v={command:g,rowCount:0};h()(void 0,v)}}return f},t}Wl.postgres6={versionSpecifier:"6.*",patch:S9e};Wl.postgres={versionSpecifier:">=7.* <=8.*",patch:E9e,publisherName:rq};function T9e(){k_.channel.registerMonkeyPatch("pg",Wl.postgres6),k_.channel.registerMonkeyPatch("pg",Wl.postgres)}Wl.enable=T9e});var ble=P(av=>{"use strict";Object.defineProperty(av,"__esModule",{value:!0});av.enable=av.redis=void 0;var nq=ri(),I9e=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=nq.channel.bindToContext(function(a,c){var u=process.hrtime(o),l=u[0]*1e3+u[1]/1e6|0;nq.channel.publish("redis",{duration:l,address:i,commandObj:r,err:a,result:c,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};av.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:I9e};function C9e(){nq.channel.registerMonkeyPatch("redis",av.redis)}av.enable=C9e});var _le=P(Mp=>{"use strict";var Zk=Mp&&Mp.__assign||function(){return Zk=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zk.apply(this,arguments)};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.enable=Mp.tedious=void 0;var iq=ri(),w9e=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return iq.channel.bindToContext(function(c,u,l){var d=process.hrtime(s);a=Zk(Zk({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:l},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(d[0]*1e3+d[1]/1e6)}),iq.channel.publish("tedious",a),o.call(this,c,u,l)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};Mp.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:w9e};function R9e(){iq.channel.registerMonkeyPatch("tedious",Mp.tedious)}Mp.enable=R9e});var xle=P(Sa=>{"use strict";var A9e=Sa&&Sa.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P9e=Sa&&Sa.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.enable=Sa.winston2=Sa.winston3=void 0;var eD=ri(),k9e=function(t){var e=t.Logger.prototype.log,r,n=function(i,o,s){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",eD.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},t},D9e=function(t){var e=function(s,a){var c;return s.config.npm.levels[a]!=null?c="npm":s.config.syslog.levels[a]!=null?c="syslog":c="unknown",c},r=function(s){A9e(a,s);function a(c,u){var l=s.call(this,u)||this;return l.winston=c,l}return a.prototype.log=function(c,u){var l=c.message,d=c.level,p=c.meta,f=P9e(c,["message","level","meta"]);d=typeof Symbol.for=="function"?c[Symbol.for("level")]:d,l=c instanceof Error?c:l;var m=e(this.winston,d);p=p||{};for(var h in f)f.hasOwnProperty(h)&&(p[h]=f[h]);eD.channel.publish("winston",{message:l,level:d,levelKind:m,meta:p}),u()},a}(t.Transport);function n(){var s=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(s=arguments[0].levels);var a;for(var c in s)s.hasOwnProperty(c)&&(a=a===void 0||s[c]>s[a]?c:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(a=arguments[0].levels);var c;for(var u in a)a.hasOwnProperty(u)&&(c=c===void 0||a[u]>a[c]?u:c);var l=i.apply(this,arguments);l.add(new r(t,{level:c}));var d=l.configure;return l.configure=function(){d.apply(this,arguments),n.apply(this,arguments)},l};var o=t.configure;return t.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};Sa.winston3={versionSpecifier:"3.x",patch:D9e};Sa.winston2={versionSpecifier:"2.x",patch:k9e};function N9e(){eD.channel.registerMonkeyPatch("winston",Sa.winston2),eD.channel.registerMonkeyPatch("winston",Sa.winston3)}Sa.enable=N9e});var Nle=P(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.enable=ln.tedious=ln.pgPool=ln.pg=ln.winston=ln.redis=ln.mysql=ln.mongodb=ln.mongodbCore=ln.console=ln.bunyan=ln.azuresdk=void 0;var Sle=sle();ln.azuresdk=Sle;var Ele=cle();ln.bunyan=Ele;var Tle=lle();ln.console=Tle;var Ile=dle();ln.mongodbCore=Ile;var Cle=ple();ln.mongodb=Cle;var wle=mle();ln.mysql=wle;var Rle=gle();ln.pgPool=Rle;var Ale=yle();ln.pg=Ale;var Ple=ble();ln.redis=Ple;var kle=_le();ln.tedious=kle;var Dle=xle();ln.winston=Dle;function L9e(){Ele.enable(),Tle.enable(),Ile.enable(),Cle.enable(),wle.enable(),Ale.enable(),Rle.enable(),Ple.enable(),Dle.enable(),Sle.enable(),kle.enable()}ln.enable=L9e});var nD=P(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.registerContextPreservation=Mm.IsInitialized=void 0;var oq=xn(),Ole=XP();Mm.IsInitialized=!Ole.JsonConfig.getInstance().noDiagnosticChannel;var sq="DiagnosticChannel";if(Mm.IsInitialized){Fu=Nle(),Lle=Ole.JsonConfig.getInstance().noPatchModules,tD=Lle.split(","),aq={bunyan:Fu.bunyan,console:Fu.console,mongodb:Fu.mongodb,mongodbCore:Fu.mongodbCore,mysql:Fu.mysql,redis:Fu.redis,pg:Fu.pg,pgPool:Fu.pgPool,winston:Fu.winston,azuresdk:Fu.azuresdk};for(rD in aq)tD.indexOf(rD)===-1&&(aq[rD].enable(),oq.info(sq,"Subscribed to "+rD+" events"));tD.length>0&&oq.info(sq,"Some modules will not be patched",tD)}else oq.info(sq,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Fu,Lle,tD,aq,rD;function O9e(t){if(Mm.IsInitialized){var e=ri();e.channel.addContextPreservation(t)}}Mm.registerContextPreservation=O9e});var D_=P((vIt,Mle)=>{"use strict";Mle.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Ho=P((lq,Fle)=>{"use strict";var Um=lq&&lq.__assign||function(){return Um=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Um.apply(this,arguments)},M9e=require("http"),cq=require("https"),uq=require("url"),Fm=require("constants"),cv=xn(),N_=D_(),F9e=XP(),U9e=function(){function t(){t._addCloseHandler()}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,c){return String.fromCharCode(a>>c&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return Object.prototype.toString.call(e)==="[object Error]"},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){cv.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",o=e[n],s=typeof o;if(t.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){cv.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(o)?o:t.extractObject(o);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(c){i=o.constructor.name.toString()+" (Error: "+c.message+")",cv.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(o.test(new uq.URL(r).hostname))return!1}catch{}}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[N_.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},t.makeRequest=function(e,r,n,i,o,s){o===void 0&&(o=!0),s===void 0&&(s=!0),r&&r.indexOf("//")===0&&(r="https:"+r);var a=new uq.URL(r),c=Um(Um({},n),{host:a.hostname,port:a.port,path:a.pathname}),u=void 0;if(o&&(a.protocol==="https:"&&(u=e.proxyHttpsUrl||void 0),a.protocol==="http:"&&(u=e.proxyHttpUrl||void 0),u)){u.indexOf("//")===0&&(u="http:"+u);try{var l=new uq.URL(u);l.protocol==="https:"?(cv.info("Proxies that use HTTPS are not supported"),u=void 0):c=Um(Um({},c),{host:l.hostname,port:l.port||"80",path:r,headers:Um(Um({},c.headers),{Host:a.hostname})})}catch{cv.warn("Wrong proxy URL provided")}}var d=a.protocol==="https:"&&!u;return s&&(d&&e.httpsAgent!==void 0?c.agent=e.httpsAgent:!d&&e.httpAgent!==void 0?c.agent=e.httpAgent:d&&(c.agent=t._useKeepAlive?t.keepAliveAgent:t.tlsRestrictedAgent)),d?cq.request(c,i):M9e.request(c,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){cv.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(N_.requestContextHeader,N_.requestContextSourceKey+"="+e.config.correlationId)},t.dumpObj=function(e){if(e)try{var r=Object.prototype.toString.call(e),n="";return r==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":n=this.stringify(e),r+n}catch{return e.toString()}},t.stringify=function(e){try{return JSON.stringify(e)}catch(r){cv.warn("Failed to serialize payload",r,e)}},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),o=N_.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(N_.requestContextHeader,n+","+N_.requestContextSourceKey+"="+e.config.correlationId)},t._addCloseHandler=function(){t._listenerAttached||(process.on("exit",function(){t.isNodeExit=!0,t._useKeepAlive=!1}),t._listenerAttached=!0)},t._useKeepAlive=!F9e.JsonConfig.getInstance().noHttpAgentKeepAlive,t._listenerAttached=!1,t.MAX_PROPERTY_LENGTH=8192,t.keepAliveAgent=new cq.Agent({keepAlive:!0,maxSockets:25,secureOptions:Fm.SSL_OP_NO_SSLv2|Fm.SSL_OP_NO_SSLv3|Fm.SSL_OP_NO_TLSv1|Fm.SSL_OP_NO_TLSv1_1}),t.tlsRestrictedAgent=new cq.Agent({secureOptions:Fm.SSL_OP_NO_SSLv2|Fm.SSL_OP_NO_SSLv3|Fm.SSL_OP_NO_TLSv1|Fm.SSL_OP_NO_TLSv1_1}),t.isNodeExit=!1,t}();Fle.exports=U9e});var uv=P((yIt,Ule)=>{"use strict";var dq=Ho(),B9e=function(){function t(){}return t.queryCorrelationId=function(e,r){},t.cancelCorrelationIdQuery=function(e,r){},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+dq.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return t.generateRootId();for(r=dq.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.HTTP_TIMEOUT=2500,t.requestIdMaxLength=1024,t.currentRootId=dq.randomu32(),t}();Ule.exports=B9e});var iD=P((bIt,Ble)=>{"use strict";var jo=Ho(),q9e=uv(),H9e=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=jo.w3cTraceId(),this.spanId=jo.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=jo.w3cTraceId(),this.spanId=jo.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=jo.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=jo.w3cTraceId(),this.spanId=jo.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=jo.w3cTraceId(),this.spanId=jo.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=jo.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=jo.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=jo.w3cTraceId().substr(0,16),this.traceId=jo.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=q9e.getRootId(r);t.isValidTraceId(o)||(this.legacyRootId=o,o=jo.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=jo.w3cTraceId(),this.spanId=jo.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.formatOpenTelemetryTraceFlags=function(e){var r="0"+e.toString(16);return r.substring(r.length-2)},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=jo.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();Ble.exports=H9e});var pq=P((_It,qle)=>{"use strict";var j9e=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=!!n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),s=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return o&&s}else if(r.length==1)return!!e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],c=a.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!t.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},t.strict=!0,t}();qle.exports=j9e});var Fp=P((xIt,Hle)=>{"use strict";var G9e=function(){function t(){}return t}();Hle.exports=G9e});var Gle=P((fq,jle)=>{"use strict";var V9e=fq&&fq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z9e=Fp(),$9e=function(t){V9e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(z9e);jle.exports=$9e});var mq=P((SIt,Vle)=>{"use strict";var W9e=function(){function t(){}return t}();Vle.exports=W9e});var $le=P((EIt,zle)=>{"use strict";var K9e=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();zle.exports=K9e});var Kle=P((hq,Wle)=>{"use strict";var Y9e=hq&&hq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q9e=mq(),X9e=function(t){Y9e(e,t);function e(){return t.call(this)||this}return e}(Q9e);Wle.exports=X9e});var vq=P((TIt,Yle)=>{"use strict";var gq;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(gq||(gq={}));Yle.exports=gq});var Xle=P((IIt,Qle)=>{"use strict";var J9e=vq(),Z9e=function(){function t(){this.kind=J9e.Measurement}return t}();Qle.exports=Z9e});var Zle=P((CIt,Jle)=>{"use strict";var eFe=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();Jle.exports=eFe});var bq=P((yq,ede)=>{"use strict";var tFe=yq&&yq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rFe=Fp(),nFe=function(t){tFe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(rFe);ede.exports=nFe});var rde=P((_q,tde)=>{"use strict";var iFe=_q&&_q.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oFe=Fp(),sFe=function(t){iFe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(oFe);tde.exports=sFe});var ide=P((wIt,nde)=>{"use strict";var aFe=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();nde.exports=aFe});var sde=P((xq,ode)=>{"use strict";var cFe=xq&&xq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uFe=Fp(),lFe=function(t){cFe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(uFe);ode.exports=lFe});var cde=P((Sq,ade)=>{"use strict";var dFe=Sq&&Sq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pFe=Fp(),fFe=function(t){dFe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(pFe);ade.exports=fFe});var lde=P((Eq,ude)=>{"use strict";var mFe=Eq&&Eq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hFe=bq(),gFe=function(t){mFe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(hFe);ude.exports=gFe});var pde=P((Tq,dde)=>{"use strict";var vFe=Tq&&Tq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yFe=Fp(),bFe=function(t){vFe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(yFe);dde.exports=bFe});var mde=P((Iq,fde)=>{"use strict";var _Fe=Iq&&Iq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xFe=Fp(),SFe=function(t){_Fe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(xFe);fde.exports=SFe});var gde=P((RIt,hde)=>{"use strict";var Cq;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(Cq||(Cq={}));hde.exports=Cq});var yde=P((AIt,vde)=>{"use strict";var EFe=function(){function t(){}return t}();vde.exports=EFe});var wq=P(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.AvailabilityData=Gle();Mi.Base=mq();Mi.ContextTagKeys=$le();Mi.Data=Kle();Mi.DataPoint=Xle();Mi.DataPointType=vq();Mi.Domain=Fp();Mi.Envelope=Zle();Mi.EventData=bq();Mi.ExceptionData=rde();Mi.ExceptionDetails=ide();Mi.MessageData=sde();Mi.MetricData=cde();Mi.PageViewData=lde();Mi.RemoteDependencyData=pde();Mi.RequestData=mde();Mi.SeverityLevel=gde();Mi.StackFrame=yde()});var bde=P(L_=>{"use strict";Object.defineProperty(L_,"__esModule",{value:!0});L_.domainSupportsProperties=L_.RemoteDependencyDataConstants=void 0;var lv=wq(),TFe=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();L_.RemoteDependencyDataConstants=TFe;function IFe(t){return"properties"in t||t instanceof lv.EventData||t instanceof lv.ExceptionData||t instanceof lv.MessageData||t instanceof lv.MetricData||t instanceof lv.PageViewData||t instanceof lv.RemoteDependencyData||t instanceof lv.RequestData}L_.domainSupportsProperties=IFe});var xde=P(_de=>{"use strict";Object.defineProperty(_de,"__esModule",{value:!0})});var Ede=P(Sde=>{"use strict";Object.defineProperty(Sde,"__esModule",{value:!0})});var Ide=P(Tde=>{"use strict";Object.defineProperty(Tde,"__esModule",{value:!0})});var wde=P(Cde=>{"use strict";Object.defineProperty(Cde,"__esModule",{value:!0})});var Ade=P(Rde=>{"use strict";Object.defineProperty(Rde,"__esModule",{value:!0})});var kde=P(Pde=>{"use strict";Object.defineProperty(Pde,"__esModule",{value:!0})});var Nde=P(Dde=>{"use strict";Object.defineProperty(Dde,"__esModule",{value:!0})});var Ode=P(Lde=>{"use strict";Object.defineProperty(Lde,"__esModule",{value:!0})});var Fde=P(Mde=>{"use strict";Object.defineProperty(Mde,"__esModule",{value:!0})});var Bde=P(Ude=>{"use strict";Object.defineProperty(Ude,"__esModule",{value:!0})});var Hde=P(qde=>{"use strict";Object.defineProperty(qde,"__esModule",{value:!0})});var Gde=P(jde=>{"use strict";Object.defineProperty(jde,"__esModule",{value:!0})});var Vde=P(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.TelemetryType=Uu.TelemetryTypeString=Uu.baseTypeToTelemetryType=Uu.telemetryTypeToBaseType=void 0;function CFe(t){switch(t){case Go.Event:return"EventData";case Go.Exception:return"ExceptionData";case Go.Trace:return"MessageData";case Go.Metric:return"MetricData";case Go.Request:return"RequestData";case Go.Dependency:return"RemoteDependencyData";case Go.Availability:return"AvailabilityData";case Go.PageView:return"PageViewData"}}Uu.telemetryTypeToBaseType=CFe;function wFe(t){switch(t){case"EventData":return Go.Event;case"ExceptionData":return Go.Exception;case"MessageData":return Go.Trace;case"MetricData":return Go.Metric;case"RequestData":return Go.Request;case"RemoteDependencyData":return Go.Dependency;case"AvailabilityData":return Go.Availability;case"PageViewData":return Go.PageView}}Uu.baseTypeToTelemetryType=wFe;Uu.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var Go;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(Go=Uu.TelemetryType||(Uu.TelemetryType={}))});var zde=P(ro=>{"use strict";var RFe=ro&&ro.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rc=ro&&ro.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&RFe(e,t,r)};Object.defineProperty(ro,"__esModule",{value:!0});rc(xde(),ro);rc(Ede(),ro);rc(Ide(),ro);rc(wde(),ro);rc(Ade(),ro);rc(kde(),ro);rc(Nde(),ro);rc(Ode(),ro);rc(Fde(),ro);rc(Bde(),ro);rc(Hde(),ro);rc(Gde(),ro);rc(Vde(),ro)});var Wde=P($de=>{"use strict";Object.defineProperty($de,"__esModule",{value:!0})});var Yde=P(Kde=>{"use strict";Object.defineProperty(Kde,"__esModule",{value:!0})});var Xde=P(Qde=>{"use strict";Object.defineProperty(Qde,"__esModule",{value:!0})});var Zde=P(Jde=>{"use strict";Object.defineProperty(Jde,"__esModule",{value:!0})});var tpe=P(epe=>{"use strict";Object.defineProperty(epe,"__esModule",{value:!0})});var npe=P(rpe=>{"use strict";Object.defineProperty(rpe,"__esModule",{value:!0})});var ope=P(ipe=>{"use strict";Object.defineProperty(ipe,"__esModule",{value:!0})});var ape=P(spe=>{"use strict";Object.defineProperty(spe,"__esModule",{value:!0})});var cpe=P(Ea=>{"use strict";var AFe=Ea&&Ea.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bm=Ea&&Ea.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&AFe(e,t,r)};Object.defineProperty(Ea,"__esModule",{value:!0});Bm(Wde(),Ea);Bm(Yde(),Ea);Bm(Xde(),Ea);Bm(Zde(),Ea);Bm(tpe(),Ea);Bm(npe(),Ea);Bm(ope(),Ea);Bm(ape(),Ea)});var gs=P(Kl=>{"use strict";var PFe=Kl&&Kl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),oD=Kl&&Kl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&PFe(e,t,r)};Object.defineProperty(Kl,"__esModule",{value:!0});oD(bde(),Kl);oD(wq(),Kl);oD(zde(),Kl);oD(cpe(),Kl)});var Rq=P((rCt,upe)=>{"use strict";var kFe=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();upe.exports=kFe});var qn=P(Le=>{"use strict";var Bu;Object.defineProperty(Le,"__esModule",{value:!0});Le.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=Le.WEB_INSTRUMENTATION_DEFAULT_SOURCE=Le.TIME_SINCE_ENQUEUED=Le.ENQUEUED_TIME=Le.MessageBusDestination=Le.MicrosoftEventHub=Le.AzNamespace=Le.HttpRequestCookieNames=Le.StatsbeatNetworkCategory=Le.StatsbeatFeatureType=Le.StatsbeatInstrumentation=Le.StatsbeatFeature=Le.StatsbeatCounter=Le.StatsbeatAttach=Le.StatsbeatResourceProvider=Le.StatsbeatTelemetryName=Le.HeartBeatMetricName=Le.DependencyTypeName=Le.TelemetryTypeStringToQuickPulseDocumentType=Le.TelemetryTypeStringToQuickPulseType=Le.QuickPulseType=Le.QuickPulseDocumentType=Le.PerformanceToQuickPulseCounter=Le.MetricId=Le.PerformanceCounter=Le.QuickPulseCounter=Le.DEFAULT_LIVEMETRICS_HOST=Le.DEFAULT_LIVEMETRICS_ENDPOINT=Le.DEFAULT_BREEZE_ENDPOINT=Le.APPLICATION_INSIGHTS_SDK_VERSION=void 0;Le.APPLICATION_INSIGHTS_SDK_VERSION="2.9.1";Le.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Le.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";Le.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var vs;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(vs=Le.QuickPulseCounter||(Le.QuickPulseCounter={}));var sD;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(sD=Le.PerformanceCounter||(Le.PerformanceCounter={}));var DFe;(function(t){t.REQUESTS_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count"})(DFe=Le.MetricId||(Le.MetricId={}));Le.PerformanceToQuickPulseCounter=(Bu={},Bu[sD.PROCESSOR_TIME]=vs.PROCESSOR_TIME,Bu[sD.REQUEST_RATE]=vs.REQUEST_RATE,Bu[sD.REQUEST_DURATION]=vs.REQUEST_DURATION,Bu[vs.COMMITTED_BYTES]=vs.COMMITTED_BYTES,Bu[vs.REQUEST_FAILURE_RATE]=vs.REQUEST_FAILURE_RATE,Bu[vs.DEPENDENCY_RATE]=vs.DEPENDENCY_RATE,Bu[vs.DEPENDENCY_FAILURE_RATE]=vs.DEPENDENCY_FAILURE_RATE,Bu[vs.DEPENDENCY_DURATION]=vs.DEPENDENCY_DURATION,Bu[vs.EXCEPTION_RATE]=vs.EXCEPTION_RATE,Bu);Le.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};Le.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};Le.TelemetryTypeStringToQuickPulseType={EventData:Le.QuickPulseType.Event,ExceptionData:Le.QuickPulseType.Exception,MessageData:Le.QuickPulseType.Trace,MetricData:Le.QuickPulseType.Metric,RequestData:Le.QuickPulseType.Request,RemoteDependencyData:Le.QuickPulseType.Dependency,AvailabilityData:Le.QuickPulseType.Availability,PageViewData:Le.QuickPulseType.PageView};Le.TelemetryTypeStringToQuickPulseDocumentType={EventData:Le.QuickPulseDocumentType.Event,ExceptionData:Le.QuickPulseDocumentType.Exception,MessageData:Le.QuickPulseDocumentType.Trace,MetricData:Le.QuickPulseDocumentType.Metric,RequestData:Le.QuickPulseDocumentType.Request,RemoteDependencyData:Le.QuickPulseDocumentType.Dependency,AvailabilityData:Le.QuickPulseDocumentType.Availability,PageViewData:Le.QuickPulseDocumentType.PageView};Le.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};Le.HeartBeatMetricName="HeartbeatState";Le.StatsbeatTelemetryName="Statsbeat";Le.StatsbeatResourceProvider={appsvc:"appsvc",aks:"aks",functions:"functions",vm:"vm",unknown:"unknown"};Le.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};Le.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var NFe;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.WEB_SNIPPET=4]="WEB_SNIPPET"})(NFe=Le.StatsbeatFeature||(Le.StatsbeatFeature={}));var LFe;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CONSOLE=128]="CONSOLE"})(LFe=Le.StatsbeatInstrumentation||(Le.StatsbeatInstrumentation={}));var OFe;(function(t){t[t.Feature=0]="Feature",t[t.Instrumentation=1]="Instrumentation"})(OFe=Le.StatsbeatFeatureType||(Le.StatsbeatFeatureType={}));var MFe;(function(t){t[t.Breeze=0]="Breeze",t[t.Quickpulse=1]="Quickpulse"})(MFe=Le.StatsbeatNetworkCategory||(Le.StatsbeatNetworkCategory={}));var FFe;(function(t){t.SESSION="ai_session",t.USER="ai_user",t.AUTH_USER="ai_authUser"})(FFe=Le.HttpRequestCookieNames||(Le.HttpRequestCookieNames={}));Le.AzNamespace="az.namespace";Le.MicrosoftEventHub="Microsoft.EventHub";Le.MessageBusDestination="message_bus.destination";Le.ENQUEUED_TIME="enqueuedTime";Le.TIME_SINCE_ENQUEUED="timeSinceEnqueued";Le.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";Le.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var Dq=P((kq,lpe)=>{"use strict";var UFe=kq&&kq.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aD=require("url"),BFe=gs(),Aq=Ho(),nc=D_(),qFe=Rq(),qm=uv(),HFe=pq(),Pq=iD(),jFe=xn(),cD=qn(),GFe=function(t){UFe(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n=this.method;try{n+=" "+new aD.URL(this.url).pathname}catch{}var i={id:this.requestId,name:n,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?i.time=r.time:this.startTime&&(i.time=new Date(this.startTime)),r){for(var o in r)i[o]||(i[o]=r[o]);if(r.properties)for(var o in r.properties)i.properties[o]=r.properties[o]}return i},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId(cD.HttpRequestCookieNames.SESSION),n[e.keys.userId]=r[e.keys.userId]||this._getId(cD.HttpRequestCookieNames.USER),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId(cD.HttpRequestCookieNames.AUTH_USER),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){if(r[e.keys.operationName])return r[e.keys.operationName];var n="";try{n=new aD.URL(this.url).pathname}catch{}var i=this.method;return n&&(i+=" "+n),i},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+r.headers.host+"/",s="",a="";try{var c=new aD.URL(r.url,o);s=c.pathname,a=c.search}catch{}var u=aD.format({protocol:i,host:r.headers.host,pathname:s,search:a});return u},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"";if(r===cD.HttpRequestCookieNames.AUTH_USER)try{n=decodeURI(n)}catch(o){n="",jFe.warn("Could not decode the auth cookie with error: ",Aq.dumpObj(o))}var i=e.parseId(Aq.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=Aq.getCorrelationContextTarget(r,nc.requestContextSourceKey),r.headers){var i=r.headers[nc.traceStateHeader]?r.headers[nc.traceStateHeader].toString():null,o=r.headers[nc.traceparentHeader]?r.headers[nc.traceparentHeader].toString():null,s=r.headers[nc.requestIdHeader]?r.headers[nc.requestIdHeader].toString():null,a=r.headers[nc.parentIdHeader]?r.headers[nc.parentIdHeader].toString():null,c=r.headers[nc.rootIdHeader]?r.headers[nc.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[nc.correlationContextHeader]?r.headers[nc.correlationContextHeader].toString():null,qm.w3cEnabled&&(o||i)?(this.traceparent=new Pq(o?o.toString():null),this.tracestate=o&&i&&new HFe(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?qm.w3cEnabled?(this.traceparent=new Pq(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=qm.generateRequestId(this.parentId),this.operationId=qm.getRootId(this.requestId)):qm.w3cEnabled?(this.traceparent=new Pq,this.traceparent.parentId=a,this.traceparent.legacyRootId=c||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=qm.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=qm.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=qm.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new BFe.ContextTagKeys,e}(qFe);lpe.exports=GFe});var wpe=P((Pt,Cpe)=>{Pt=Cpe.exports=pr;var Qr;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Qr=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Qr=function(){};Pt.SEMVER_SPEC_VERSION="2.0.0";var EI=256,uD=Number.MAX_SAFE_INTEGER||9007199254740991,Nq=16,VFe=EI-6,TI=Pt.re=[],dn=Pt.safeRe=[],Se=Pt.src=[],or=0,Uq="[a-zA-Z0-9-]",Lq=[["\\s",1],["\\d",EI],[Uq,VFe]];function hD(t){for(var e=0;e<Lq.length;e++){var r=Lq[e][0],n=Lq[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var O_=or++;Se[O_]="0|[1-9]\\d*";var M_=or++;Se[M_]="\\d+";var Bq=or++;Se[Bq]="\\d*[a-zA-Z-]"+Uq+"*";var ppe=or++;Se[ppe]="("+Se[O_]+")\\.("+Se[O_]+")\\.("+Se[O_]+")";var fpe=or++;Se[fpe]="("+Se[M_]+")\\.("+Se[M_]+")\\.("+Se[M_]+")";var Oq=or++;Se[Oq]="(?:"+Se[O_]+"|"+Se[Bq]+")";var Mq=or++;Se[Mq]="(?:"+Se[M_]+"|"+Se[Bq]+")";var qq=or++;Se[qq]="(?:-("+Se[Oq]+"(?:\\."+Se[Oq]+")*))";var Hq=or++;Se[Hq]="(?:-?("+Se[Mq]+"(?:\\."+Se[Mq]+")*))";var Fq=or++;Se[Fq]=Uq+"+";var CI=or++;Se[CI]="(?:\\+("+Se[Fq]+"(?:\\."+Se[Fq]+")*))";var jq=or++,mpe="v?"+Se[ppe]+Se[qq]+"?"+Se[CI]+"?";Se[jq]="^"+mpe+"$";var Gq="[v=\\s]*"+Se[fpe]+Se[Hq]+"?"+Se[CI]+"?",Vq=or++;Se[Vq]="^"+Gq+"$";var H_=or++;Se[H_]="((?:<|>)?=?)";var lD=or++;Se[lD]=Se[M_]+"|x|X|\\*";var dD=or++;Se[dD]=Se[O_]+"|x|X|\\*";var dv=or++;Se[dv]="[v=\\s]*("+Se[dD]+")(?:\\.("+Se[dD]+")(?:\\.("+Se[dD]+")(?:"+Se[qq]+")?"+Se[CI]+"?)?)?";var U_=or++;Se[U_]="[v=\\s]*("+Se[lD]+")(?:\\.("+Se[lD]+")(?:\\.("+Se[lD]+")(?:"+Se[Hq]+")?"+Se[CI]+"?)?)?";var hpe=or++;Se[hpe]="^"+Se[H_]+"\\s*"+Se[dv]+"$";var gpe=or++;Se[gpe]="^"+Se[H_]+"\\s*"+Se[U_]+"$";var vpe=or++;Se[vpe]="(?:^|[^\\d])(\\d{1,"+Nq+"})(?:\\.(\\d{1,"+Nq+"}))?(?:\\.(\\d{1,"+Nq+"}))?(?:$|[^\\d])";var gD=or++;Se[gD]="(?:~>?)";var B_=or++;Se[B_]="(\\s*)"+Se[gD]+"\\s+";TI[B_]=new RegExp(Se[B_],"g");dn[B_]=new RegExp(hD(Se[B_]),"g");var zFe="$1~",ype=or++;Se[ype]="^"+Se[gD]+Se[dv]+"$";var bpe=or++;Se[bpe]="^"+Se[gD]+Se[U_]+"$";var vD=or++;Se[vD]="(?:\\^)";var q_=or++;Se[q_]="(\\s*)"+Se[vD]+"\\s+";TI[q_]=new RegExp(Se[q_],"g");dn[q_]=new RegExp(hD(Se[q_]),"g");var $Fe="$1^",_pe=or++;Se[_pe]="^"+Se[vD]+Se[dv]+"$";var xpe=or++;Se[xpe]="^"+Se[vD]+Se[U_]+"$";var zq=or++;Se[zq]="^"+Se[H_]+"\\s*("+Gq+")$|^$";var $q=or++;Se[$q]="^"+Se[H_]+"\\s*("+mpe+")$|^$";var pv=or++;Se[pv]="(\\s*)"+Se[H_]+"\\s*("+Gq+"|"+Se[dv]+")";TI[pv]=new RegExp(Se[pv],"g");dn[pv]=new RegExp(hD(Se[pv]),"g");var WFe="$1$2$3",Spe=or++;Se[Spe]="^\\s*("+Se[dv]+")\\s+-\\s+("+Se[dv]+")\\s*$";var Epe=or++;Se[Epe]="^\\s*("+Se[U_]+")\\s+-\\s+("+Se[U_]+")\\s*$";var Tpe=or++;Se[Tpe]="(<|>)?=?\\s*\\*";for(Yl=0;Yl<or;Yl++)Qr(Yl,Se[Yl]),TI[Yl]||(TI[Yl]=new RegExp(Se[Yl]),dn[Yl]=new RegExp(hD(Se[Yl])));var Yl;Pt.parse=fv;function fv(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof pr)return t;if(typeof t!="string"||t.length>EI)return null;var r=e.loose?dn[Vq]:dn[jq];if(!r.test(t))return null;try{return new pr(t,e)}catch{return null}}Pt.valid=KFe;function KFe(t,e){var r=fv(t,e);return r?r.version:null}Pt.clean=YFe;function YFe(t,e){var r=fv(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Pt.SemVer=pr;function pr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof pr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>EI)throw new TypeError("version is longer than "+EI+" characters");if(!(this instanceof pr))return new pr(t,e);Qr("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?dn[Vq]:dn[jq]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>uD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>uD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>uD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<uD)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}pr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};pr.prototype.toString=function(){return this.version};pr.prototype.compare=function(t){return Qr("SemVer.compare",this.version,this.options,t),t instanceof pr||(t=new pr(t,this.options)),this.compareMain(t)||this.comparePre(t)};pr.prototype.compareMain=function(t){return t instanceof pr||(t=new pr(t,this.options)),F_(this.major,t.major)||F_(this.minor,t.minor)||F_(this.patch,t.patch)};pr.prototype.comparePre=function(t){if(t instanceof pr||(t=new pr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Qr("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return F_(r,n)}while(++e)};pr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Pt.inc=QFe;function QFe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new pr(t,r).inc(e,n).version}catch{return null}}Pt.diff=XFe;function XFe(t,e){if(Wq(t,e))return null;var r=fv(t),n=fv(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Pt.compareIdentifiers=F_;var dpe=/^[0-9]+$/;function F_(t,e){var r=dpe.test(t),n=dpe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Pt.rcompareIdentifiers=JFe;function JFe(t,e){return F_(e,t)}Pt.major=ZFe;function ZFe(t,e){return new pr(t,e).major}Pt.minor=e7e;function e7e(t,e){return new pr(t,e).minor}Pt.patch=t7e;function t7e(t,e){return new pr(t,e).patch}Pt.compare=Up;function Up(t,e,r){return new pr(t,r).compare(new pr(e,r))}Pt.compareLoose=r7e;function r7e(t,e){return Up(t,e,!0)}Pt.rcompare=n7e;function n7e(t,e,r){return Up(e,t,r)}Pt.sort=i7e;function i7e(t,e){return t.sort(function(r,n){return Pt.compare(r,n,e)})}Pt.rsort=o7e;function o7e(t,e){return t.sort(function(r,n){return Pt.rcompare(r,n,e)})}Pt.gt=II;function II(t,e,r){return Up(t,e,r)>0}Pt.lt=pD;function pD(t,e,r){return Up(t,e,r)<0}Pt.eq=Wq;function Wq(t,e,r){return Up(t,e,r)===0}Pt.neq=Ipe;function Ipe(t,e,r){return Up(t,e,r)!==0}Pt.gte=Kq;function Kq(t,e,r){return Up(t,e,r)>=0}Pt.lte=Yq;function Yq(t,e,r){return Up(t,e,r)<=0}Pt.cmp=fD;function fD(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Wq(t,r,n);case"!=":return Ipe(t,r,n);case">":return II(t,r,n);case">=":return Kq(t,r,n);case"<":return pD(t,r,n);case"<=":return Yq(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Pt.Comparator=Nc;function Nc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Nc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Nc))return new Nc(t,e);t=t.trim().split(/\s+/).join(" "),Qr("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===wI?this.value="":this.value=this.operator+this.semver.version,Qr("comp",this)}var wI={};Nc.prototype.parse=function(t){var e=this.options.loose?dn[zq]:dn[$q],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new pr(r[2],this.options.loose):this.semver=wI};Nc.prototype.toString=function(){return this.value};Nc.prototype.test=function(t){return Qr("Comparator.test",t,this.options.loose),this.semver===wI?!0:(typeof t=="string"&&(t=new pr(t,this.options)),fD(t,this.operator,this.semver,this.options))};Nc.prototype.intersects=function(t,e){if(!(t instanceof Nc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Hn(t.value,e),mD(this.value,r,e);if(t.operator==="")return r=new Hn(this.value,e),mD(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=fD(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=fD(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};Pt.Range=Hn;function Hn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Hn)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Hn(t.raw,e);if(t instanceof Nc)return new Hn(t.value,e);if(!(this instanceof Hn))return new Hn(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Hn.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Hn.prototype.toString=function(){return this.range};Hn.prototype.parseRange=function(t){var e=this.options.loose,r=e?dn[Epe]:dn[Spe];t=t.replace(r,h7e),Qr("hyphen replace",t),t=t.replace(dn[pv],WFe),Qr("comparator trim",t,dn[pv]),t=t.replace(dn[B_],zFe),t=t.replace(dn[q_],$Fe);var n=e?dn[zq]:dn[$q],i=t.split(" ").map(function(o){return a7e(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Nc(o,this.options)},this),i};Hn.prototype.intersects=function(t,e){if(!(t instanceof Hn))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Pt.toComparators=s7e;function s7e(t,e){return new Hn(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function a7e(t,e){return Qr("comp",t,e),t=l7e(t,e),Qr("caret",t),t=c7e(t,e),Qr("tildes",t),t=p7e(t,e),Qr("xrange",t),t=m7e(t,e),Qr("stars",t),t}function $s(t){return!t||t.toLowerCase()==="x"||t==="*"}function c7e(t,e){return t.trim().split(/\s+/).map(function(r){return u7e(r,e)}).join(" ")}function u7e(t,e){var r=e.loose?dn[bpe]:dn[ype];return t.replace(r,function(n,i,o,s,a){Qr("tilde",t,n,i,o,s,a);var c;return $s(i)?c="":$s(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":$s(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Qr("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Qr("tilde return",c),c})}function l7e(t,e){return t.trim().split(/\s+/).map(function(r){return d7e(r,e)}).join(" ")}function d7e(t,e){Qr("caret",t,e);var r=e.loose?dn[xpe]:dn[_pe];return t.replace(r,function(n,i,o,s,a){Qr("caret",t,n,i,o,s,a);var c;return $s(i)?c="":$s(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":$s(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Qr("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Qr("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Qr("caret return",c),c})}function p7e(t,e){return Qr("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return f7e(r,e)}).join(" ")}function f7e(t,e){t=t.trim();var r=e.loose?dn[gpe]:dn[hpe];return t.replace(r,function(n,i,o,s,a,c){Qr("xRange",t,n,i,o,s,a,c);var u=$s(o),l=u||$s(s),d=l||$s(a),p=d;return i==="="&&p&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Qr("xRange return",n),n})}function m7e(t,e){return Qr("replaceStars",t,e),t.trim().replace(dn[Tpe],"")}function h7e(t,e,r,n,i,o,s,a,c,u,l,d,p){return $s(r)?e="":$s(n)?e=">="+r+".0.0":$s(i)?e=">="+r+"."+n+".0":e=">="+e,$s(c)?a="":$s(u)?a="<"+(+c+1)+".0.0":$s(l)?a="<"+c+"."+(+u+1)+".0":d?a="<="+c+"."+u+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}Hn.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new pr(t,this.options));for(var e=0;e<this.set.length;e++)if(g7e(this.set[e],t,this.options))return!0;return!1};function g7e(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Qr(t[n].semver),t[n].semver!==wI&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Pt.satisfies=mD;function mD(t,e,r){try{e=new Hn(e,r)}catch{return!1}return e.test(t)}Pt.maxSatisfying=v7e;function v7e(t,e,r){var n=null,i=null;try{var o=new Hn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new pr(n,r))}),n}Pt.minSatisfying=y7e;function y7e(t,e,r){var n=null,i=null;try{var o=new Hn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new pr(n,r))}),n}Pt.minVersion=b7e;function b7e(t,e){t=new Hn(t,e);var r=new pr("0.0.0");if(t.test(r)||(r=new pr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new pr(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||II(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Pt.validRange=_7e;function _7e(t,e){try{return new Hn(t,e).range||"*"}catch{return null}}Pt.ltr=x7e;function x7e(t,e,r){return Qq(t,e,"<",r)}Pt.gtr=S7e;function S7e(t,e,r){return Qq(t,e,">",r)}Pt.outside=Qq;function Qq(t,e,r,n){t=new pr(t,n),e=new Hn(e,n);var i,o,s,a,c;switch(r){case">":i=II,o=Yq,s=pD,a=">",c=">=";break;case"<":i=pD,o=Kq,s=II,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(mD(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],d=null,p=null;if(l.forEach(function(f){f.semver===wI&&(f=new Nc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0}Pt.prerelease=E7e;function E7e(t,e){var r=fv(t,e);return r&&r.prerelease.length?r.prerelease:null}Pt.intersects=T7e;function T7e(t,e,r){return t=new Hn(t,r),e=new Hn(e,r),t.intersects(e)}Pt.coerce=I7e;function I7e(t){if(t instanceof pr)return t;if(typeof t!="string")return null;var e=t.match(dn[vpe]);return e==null?null:fv(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var yD=P((iCt,Ppe)=>{"use strict";function Xq(t){return typeof t=="function"}var Ws=console.error.bind(console);function RI(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function AI(t){t&&t.logger&&(Xq(t.logger)?Ws=t.logger:Ws("new logger isn't a function, not replacing"))}function Rpe(t,e,r){if(!t||!t[e]){Ws("no original function "+e+" to wrap");return}if(!r){Ws("no wrapper function"),Ws(new Error().stack);return}if(!Xq(t[e])||!Xq(r)){Ws("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return RI(i,"__original",n),RI(i,"__unwrap",function(){t[e]===i&&RI(t,e,n)}),RI(i,"__wrapped",!0),RI(t,e,i),i}function C7e(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Ws("must provide one or more modules to patch"),Ws(new Error().stack);return}if(!(e&&Array.isArray(e))){Ws("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){Rpe(n,i,r)})})}function Ape(t,e){if(!t||!t[e]){Ws("no function to unwrap."),Ws(new Error().stack);return}if(!t[e].__unwrap)Ws("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function w7e(t,e){if(t)Array.isArray(t)||(t=[t]);else{Ws("must provide one or more modules to patch"),Ws(new Error().stack);return}if(!(e&&Array.isArray(e))){Ws("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){Ape(r,n)})})}AI.wrap=Rpe;AI.massWrap=C7e;AI.unwrap=Ape;AI.massUnwrap=w7e;Ppe.exports=AI});var xD=P((oCt,Lpe)=>{"use strict";var Dpe=yD(),j_=Dpe.wrap,bD=Dpe.unwrap,Bp="wrap@before";function _D(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function R7e(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],o=t[Bp];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Npe(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function A7e(t,e,r){var n=Npe(t,e),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&R7e(t,i)}function kpe(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}Lpe.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(c,u){var l=Npe(this,c).slice();try{var d=s.call(this,c,u);return A7e(this,c,l),d}finally{this.on.__wrapped||j_(this,"on",i),this.addListener.__wrapped||j_(this,"addListener",i)}}}function o(s){return function(c){if(!this._events||!this._events[c])return s.apply(this,arguments);var u=this._events[c];function l(d){return function(){this._events[c]=u;try{return d.apply(this,arguments)}finally{u=this._events[c],this._events[c]=kpe(u,n)}}}j_(this,"removeListener",l);try{return this._events[c]=kpe(u,n),s.apply(this,arguments)}finally{bD(this,"removeListener"),this._events[c]=u}}}e[Bp]?typeof e[Bp]=="function"?_D(e,Bp,[e[Bp],r]):Array.isArray(e[Bp])&&e[Bp].push(r):_D(e,Bp,r),e.__wrapped||(j_(e,"addListener",i),j_(e,"on",i),j_(e,"emit",o),_D(e,"__unwrap",function(){bD(e,"addListener"),bD(e,"on"),bD(e,"emit"),delete e[Bp],delete e.__wrapped}),_D(e,"__wrapped",!0))}});var Upe=P((sCt,Fpe)=>{"use strict";var Mr=require("util"),qp=require("assert"),P7e=xD(),En=require("async_hooks"),PI="cls@contexts",kI="error@context",jn=process.env.DEBUG_CLS_HOOKED,Or=-1;Fpe.exports={getNamespace:Ope,createNamespace:k7e,destroyNamespace:Mpe,reset:D7e,ERROR_SYMBOL:kI};function Lc(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Lc.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,jn){let n=" ".repeat(this._indent<0?0:this._indent);Pn(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+Or+" active:"+Mr.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Lc.prototype.get=function(e){if(!this.active){if(jn){let r=En.currentId(),n=En.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Pn(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${Or} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(jn){let r=En.executionAsyncId(),n=En.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Pn(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+Or+" active:"+Mr.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Pn(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${Or} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${Mr.inspect(this.active)}`)}return this.active[e]};Lc.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=Or,jn){let r=En.executionAsyncId(),n=En.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Pn(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Or} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${Mr.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Lc.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(jn){let n=En.triggerAsyncId(),i=En.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Pn(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Or} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${Mr.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[kI]=r),n}finally{if(jn){let n=En.triggerAsyncId(),i=En.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Pn(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${Or} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${Mr.inspect(r)}`)}this.exit(r)}};Lc.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Lc.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return jn&&Pn("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Or+" len:"+this._set.length+" "+Mr.inspect(r)),n.then(i=>(jn&&Pn("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Or+" len:"+this._set.length+" "+Mr.inspect(r)),this.exit(r),i)).catch(i=>{throw i[kI]=r,jn&&Pn("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Or+" len:"+this._set.length+" "+Mr.inspect(r)),this.exit(r),i})};Lc.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[kI]=r),o}finally{n.exit(r)}}};Lc.prototype.enter=function(e){if(qp.ok(e,"context must be provided for entering"),jn){let r=En.executionAsyncId(),n=En.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Pn(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Or} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${Mr.inspect(e)}`)}this._set.push(this.active),this.active=e};Lc.prototype.exit=function(e){if(qp.ok(e,"context must be provided for exiting"),jn){let n=En.executionAsyncId(),i=En.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Pn(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${Or} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${Mr.inspect(e)}`)}if(this.active===e){qp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(jn&&Pn("??ERROR?? context exiting but not entered - ignoring: "+Mr.inspect(e)),qp.ok(r>=0,`context not currently entered; can't exit. 
`+Mr.inspect(this)+`
`+Mr.inspect(e))):(qp.ok(r,"can't remove top context"),this._set.splice(r,1))};Lc.prototype.bindEmitter=function(e){qp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[PI]||(s[PI]=Object.create(null)),s[PI][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[PI]))return s;let a=s,c=s[PI];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}P7e(e,i,o)};Lc.prototype.fromException=function(e){return e[kI]};function Ope(t){return process.namespaces[t]}function k7e(t){qp.ok(t,"namespace must be given a name."),jn&&Pn(`NS-CREATING NAMESPACE (${t})`);let e=new Lc(t);return e.id=Or,En.createHook({init(n,i,o,s){if(Or=En.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),jn){let a=" ".repeat(e._indent<0?0:e._indent);Pn(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${Or} triggerId:${o} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Or===0){let a=En.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),jn){let u=" ".repeat(e._indent<0?0:e._indent);Pn(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${Or} triggerId:${a} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(jn){let u=" ".repeat(e._indent<0?0:e._indent);Pn(`${u}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${Or} triggerId:${a} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(jn&&i==="PROMISE"){Pn(Mr.inspect(s,{showHidden:!0}));let a=s.parentId,c=" ".repeat(e._indent<0?0:e._indent);Pn(`${c}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${Or} triggerId:${o} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){Or=En.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Or),i){if(jn){let o=En.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Pn(`${s}BEFORE (${t}) asyncId:${n} currentUid:${Or} triggerId:${o} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Mr.inspect(i)}`),e._indent+=2}e.enter(i)}else if(jn){let o=En.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Pn(`${s}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Or} triggerId:${o} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${Mr.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){Or=En.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Or),i){if(jn){let o=En.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);Pn(`${s}AFTER (${t}) asyncId:${n} currentUid:${Or} triggerId:${o} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Mr.inspect(i)}`)}e.exit(i)}else if(jn){let o=En.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);Pn(`${s}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Or} triggerId:${o} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Mr.inspect(i)}`)}},destroy(n){if(Or=En.executionAsyncId(),jn){let i=En.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);Pn(`${o}DESTROY (${t}) currentUid:${Or} asyncId:${n} triggerId:${i} active:${Mr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Mr.inspect(e._contexts.get(Or))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function Mpe(t){let e=Ope(t);qp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),qp.ok(e.id,"don't assign to process.namespaces directly! "+Mr.inspect(e)),process.namespaces[t]=null}function D7e(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Mpe(t)}),process.namespaces=Object.create(null)}process.namespaces={};function Pn(...t){jn&&process._rawDebug(`${Mr.format(...t)}`)}});var qpe=P((aCt,Bpe)=>{"use strict";function N7e(){}Bpe.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new N7e,a=--r.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let c=!0;try{o.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(s,a,!0),e.destroy.call(null,a)})}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var jpe=P((cCt,Hpe)=>{"use strict";function L7e(){}Hpe.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function o(u,l,d,p){return typeof u!="function"?p?s(d):a(d):function(){e.pre.call(l,d);try{return u.apply(this,arguments)}finally{e.post.call(l,d,!1),e.destroy.call(null,d)}}}function s(u){return function(d){return e.destroy.call(null,u),d}}function a(u){return function(d){throw e.destroy.call(null,u),d}}function c(u,l){if(!r.enabled)return i.call(this,u,l);let d=new L7e,p=--r.counter;return e.init.call(d,p,0,null,null),i.call(this,o(u,d,p,!0),o(l,d,p,!1))}}});var Vpe=P((uCt,Gpe)=>{"use strict";var ic=require("timers");function O7e(){}function M7e(){}function F7e(){}var U7e=new Map,B7e=new Map,q7e=new Map,Jq=null,Zq=!1;Gpe.exports=function(){eH(this._hooks,this._state,"setTimeout","clearTimeout",O7e,U7e,!0),eH(this._hooks,this._state,"setInterval","clearInterval",M7e,B7e,!1),eH(this._hooks,this._state,"setImmediate","clearImmediate",F7e,q7e,!0),global.setTimeout=ic.setTimeout,global.setInterval=ic.setInterval,global.setImmediate=ic.setImmediate,global.clearTimeout=ic.clearTimeout,global.clearInterval=ic.clearInterval,global.clearImmediate=ic.clearImmediate};function eH(t,e,r,n,i,o,s){let a=ic[r],c=ic[n];ic[r]=function(){if(!e.enabled)return a.apply(ic,arguments);let u=new Array(arguments.length);for(let m=0;m<arguments.length;m++)u[m]=arguments[m];let l=u[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let d=new i,p=--e.counter,f;return t.init.call(d,p,0,null,null),u[0]=function(){Jq=f,t.pre.call(d,p);let m=!0;try{l.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(d,p,!0),o.delete(f),t.destroy.call(null,p)})}t.post.call(d,p,!1),Jq=null,(s||Zq)&&(Zq=!1,o.delete(f),t.destroy.call(null,p))},f=a.apply(ic,u),o.set(f,p),f},ic[n]=function(u){if(Jq===u&&u!==null)Zq=!0;else if(o.has(u)){let l=o.get(u);o.delete(u),t.destroy.call(null,l)}c.apply(ic,arguments)}}});var tH=P((lCt,H7e)=>{H7e.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var Wpe=P((dCt,$pe)=>{"use strict";var NI=process.binding("async_wrap"),j7e=NI.Providers.TIMERWRAP,zpe={nextTick:qpe(),promise:jpe(),timers:Vpe()},DI=new Set;function G7e(){this.enabled=!1,this.counter=0}function rH(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===j7e){DI.add(i);return}for(let c of t)c(i,this,o,s,a)},this.pre=function(i){if(!DI.has(i))for(let o of e)o(i,this)},this.post=function(i,o){if(!DI.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(DI.has(i)){DI.delete(i);return}for(let o of n)o(i)}}rH.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function SD(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}rH.prototype.remove=function(t){t.init&&SD(this.initFns,t.init),t.pre&&SD(this.preFns,t.pre),t.post&&SD(this.postFns,t.post),t.destroy&&SD(this.destroyFns,t.destroy)};function LI(){this._state=new G7e,this._hooks=new rH,this.version=tH().version,this.providers=NI.Providers;for(let t of Object.keys(zpe))zpe[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),NI.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}$pe.exports=LI;LI.prototype.addHooks=function(t){this._hooks.add(t)};LI.prototype.removeHooks=function(t){this._hooks.remove(t)};LI.prototype.enable=function(){this._state.enabled=!0,NI.enable()};LI.prototype.disable=function(){this._state.enabled=!1,NI.disable()}});var nH=P((pCt,V7e)=>{V7e.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var Ype=P((fCt,Kpe)=>{function z7e(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}Kpe.exports=function(e,r){var n=[];n.push(z7e(e));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var Zpe=P((mCt,Jpe)=>{var ED=Ype();function Xpe(){this.extend=new OI,this.filter=new OI,this.format=new MI,this.version=nH().version}var oH=!1;Xpe.prototype.callSite=function t(e){e||(e={}),oH=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return oH=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var Hm=new Xpe;function OI(){this._modifiers=[]}OI.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};OI.prototype.attach=function(t){this._modifiers.push(t)};OI.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function MI(){this._formater=ED,this._previous=void 0}MI.prototype.replace=function(t){t?this._formater=t:this.restore()};MI.prototype.restore=function(){this._formater=ED,this._previous=void 0};MI.prototype._backup=function(){this._previous=this._formater};MI.prototype._roolback=function(){this._previous===ED?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&Hm.format.replace(Error.prepareStackTrace);var iH=!1;function Qpe(t,e){if(oH)return e;if(iH)return ED(t,e);var r=e.concat();r=Hm.extend._modify(t,r),r=Hm.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),iH=!0;var n=Hm.format._formater(t,r);return iH=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return Qpe},set:function(t){t===Qpe?Hm.format._roolback():(Hm.format._backup(),Hm.format.replace(t))}});function $7e(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:$7e,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});Jpe.exports=Hm});var aH=P((hCt,sH)=>{if(global._stackChain)if(global._stackChain.version===nH().version)sH.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else sH.exports=global._stackChain=Zpe()});var efe=P((gCt,cH)=>{"use strict";var W7e=Wpe();if(global._asyncHook)if(global._asyncHook.version===tH().version)cH.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else aH().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),cH.exports=global._asyncHook=new W7e});var sfe=P((vCt,ofe)=>{"use strict";var _i=require("util"),Hp=require("assert"),K7e=xD(),G_=efe(),FI="cls@contexts",UI="error@context",rfe=[];for(let t in G_.providers)rfe[G_.providers[t]]=t;var ni=process.env.DEBUG_CLS_HOOKED,Fi=-1;ofe.exports={getNamespace:nfe,createNamespace:Y7e,destroyNamespace:ife,reset:Q7e,ERROR_SYMBOL:UI};function Oc(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Oc.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return ni&&bi("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+Fi+" active:"+_i.inspect(this.active,!0)),this.active[e]=r,r};Oc.prototype.get=function(e){if(!this.active){ni&&bi("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+Fi+" active:"+_i.inspect(this.active,!0));return}return ni&&bi("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+Fi+" active:"+_i.inspect(this.active,!0)),this.active[e]};Oc.prototype.createContext=function(){ni&&bi("   CREATING Context: "+this.name+" uid:"+Fi+" len:"+this._set.length+"  active:"+_i.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=Fi,ni&&bi("   CREATED Context: "+this.name+" uid:"+Fi+" len:"+this._set.length+"  context:"+_i.inspect(e,!0,2,!0)),e};Oc.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return ni&&bi(" BEFORE RUN: "+this.name+" uid:"+Fi+" len:"+this._set.length+" "+_i.inspect(r)),e(r),r}catch(n){throw n&&(n[UI]=r),n}finally{ni&&bi(" AFTER RUN: "+this.name+" uid:"+Fi+" len:"+this._set.length+" "+_i.inspect(r)),this.exit(r)}};Oc.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};Oc.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return ni&&bi(" BEFORE runPromise: "+this.name+" uid:"+Fi+" len:"+this._set.length+" "+_i.inspect(r)),n.then(i=>(ni&&bi(" AFTER runPromise: "+this.name+" uid:"+Fi+" len:"+this._set.length+" "+_i.inspect(r)),this.exit(r),i)).catch(i=>{throw i[UI]=r,ni&&bi(" AFTER runPromise: "+this.name+" uid:"+Fi+" len:"+this._set.length+" "+_i.inspect(r)),this.exit(r),i})};Oc.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[UI]=r),o}finally{n.exit(r)}}};Oc.prototype.enter=function(e){Hp.ok(e,"context must be provided for entering"),ni&&bi("  ENTER "+this.name+" uid:"+Fi+" len:"+this._set.length+" context: "+_i.inspect(e)),this._set.push(this.active),this.active=e};Oc.prototype.exit=function(e){if(Hp.ok(e,"context must be provided for exiting"),ni&&bi("  EXIT "+this.name+" uid:"+Fi+" len:"+this._set.length+" context: "+_i.inspect(e)),this.active===e){Hp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(ni&&bi("??ERROR?? context exiting but not entered - ignoring: "+_i.inspect(e)),Hp.ok(r>=0,`context not currently entered; can't exit. 
`+_i.inspect(this)+`
`+_i.inspect(e))):(Hp.ok(r,"can't remove top context"),this._set.splice(r,1))};Oc.prototype.bindEmitter=function(e){Hp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[FI]||(s[FI]=Object.create(null)),s[FI][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[FI]))return s;let a=s,c=s[FI];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}K7e(e,i,o)};Oc.prototype.fromException=function(e){return e[UI]};function nfe(t){return process.namespaces[t]}function Y7e(t){Hp.ok(t,"namespace must be given a name."),ni&&bi("CREATING NAMESPACE "+t);let e=new Oc(t);return e.id=Fi,G_.addHooks({init(r,n,i,o,s){Fi=r,o?(e._contexts.set(r,e._contexts.get(o)),ni&&bi("PARENTID: "+t+" uid:"+r+" parent:"+o+" provider:"+i)):e._contexts.set(Fi,e.active),ni&&bi("INIT "+t+" uid:"+r+" parent:"+o+" provider:"+rfe[i]+" active:"+_i.inspect(e.active,!0))},pre(r,n){Fi=r;let i=e._contexts.get(r);i?(ni&&bi(" PRE "+t+" uid:"+r+" handle:"+TD(n)+" context:"+_i.inspect(i)),e.enter(i)):ni&&bi(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+TD(n))},post(r,n){Fi=r;let i=e._contexts.get(r);i?(ni&&bi(" POST "+t+" uid:"+r+" handle:"+TD(n)+" context:"+_i.inspect(i)),e.exit(i)):ni&&bi(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+TD(n))},destroy(r){Fi=r,ni&&bi("DESTROY "+t+" uid:"+r+" context:"+_i.inspect(e._contexts.get(Fi))+" active:"+_i.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function ife(t){let e=nfe(t);Hp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Hp.ok(e.id,"don't assign to process.namespaces directly! "+_i.inspect(e)),process.namespaces[t]=null}function Q7e(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){ife(t)}),process.namespaces=Object.create(null)}process.namespaces={};G_._state&&!G_._state.enabled&&G_.enable();function bi(t){process.env.DEBUG&&process._rawDebug(t)}function TD(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(ni){uH=aH();for(tfe in uH.filter._modifiers)uH.filter.deattach(tfe)}var uH,tfe});var afe=P((yCt,lH)=>{"use strict";var X7e=wpe();process&&X7e.gte(process.versions.node,"8.0.0")?lH.exports=Upe():lH.exports=sfe()});var Tfe=P((kt,Efe)=>{kt=Efe.exports=fr;var Xr;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Xr=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Xr=function(){};kt.SEMVER_SPEC_VERSION="2.0.0";var BI=256,ID=Number.MAX_SAFE_INTEGER||9007199254740991,dH=16,J7e=BI-6,qI=kt.re=[],pn=kt.safeRe=[],Ee=kt.src=[],sr=0,gH="[a-zA-Z0-9-]",pH=[["\\s",1],["\\d",BI],[gH,J7e]];function kD(t){for(var e=0;e<pH.length;e++){var r=pH[e][0],n=pH[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var V_=sr++;Ee[V_]="0|[1-9]\\d*";var z_=sr++;Ee[z_]="\\d+";var vH=sr++;Ee[vH]="\\d*[a-zA-Z-]"+gH+"*";var ufe=sr++;Ee[ufe]="("+Ee[V_]+")\\.("+Ee[V_]+")\\.("+Ee[V_]+")";var lfe=sr++;Ee[lfe]="("+Ee[z_]+")\\.("+Ee[z_]+")\\.("+Ee[z_]+")";var fH=sr++;Ee[fH]="(?:"+Ee[V_]+"|"+Ee[vH]+")";var mH=sr++;Ee[mH]="(?:"+Ee[z_]+"|"+Ee[vH]+")";var yH=sr++;Ee[yH]="(?:-("+Ee[fH]+"(?:\\."+Ee[fH]+")*))";var bH=sr++;Ee[bH]="(?:-?("+Ee[mH]+"(?:\\."+Ee[mH]+")*))";var hH=sr++;Ee[hH]=gH+"+";var jI=sr++;Ee[jI]="(?:\\+("+Ee[hH]+"(?:\\."+Ee[hH]+")*))";var _H=sr++,dfe="v?"+Ee[ufe]+Ee[yH]+"?"+Ee[jI]+"?";Ee[_H]="^"+dfe+"$";var xH="[v=\\s]*"+Ee[lfe]+Ee[bH]+"?"+Ee[jI]+"?",SH=sr++;Ee[SH]="^"+xH+"$";var Q_=sr++;Ee[Q_]="((?:<|>)?=?)";var CD=sr++;Ee[CD]=Ee[z_]+"|x|X|\\*";var wD=sr++;Ee[wD]=Ee[V_]+"|x|X|\\*";var mv=sr++;Ee[mv]="[v=\\s]*("+Ee[wD]+")(?:\\.("+Ee[wD]+")(?:\\.("+Ee[wD]+")(?:"+Ee[yH]+")?"+Ee[jI]+"?)?)?";var W_=sr++;Ee[W_]="[v=\\s]*("+Ee[CD]+")(?:\\.("+Ee[CD]+")(?:\\.("+Ee[CD]+")(?:"+Ee[bH]+")?"+Ee[jI]+"?)?)?";var pfe=sr++;Ee[pfe]="^"+Ee[Q_]+"\\s*"+Ee[mv]+"$";var ffe=sr++;Ee[ffe]="^"+Ee[Q_]+"\\s*"+Ee[W_]+"$";var mfe=sr++;Ee[mfe]="(?:^|[^\\d])(\\d{1,"+dH+"})(?:\\.(\\d{1,"+dH+"}))?(?:\\.(\\d{1,"+dH+"}))?(?:$|[^\\d])";var DD=sr++;Ee[DD]="(?:~>?)";var K_=sr++;Ee[K_]="(\\s*)"+Ee[DD]+"\\s+";qI[K_]=new RegExp(Ee[K_],"g");pn[K_]=new RegExp(kD(Ee[K_]),"g");var Z7e="$1~",hfe=sr++;Ee[hfe]="^"+Ee[DD]+Ee[mv]+"$";var gfe=sr++;Ee[gfe]="^"+Ee[DD]+Ee[W_]+"$";var ND=sr++;Ee[ND]="(?:\\^)";var Y_=sr++;Ee[Y_]="(\\s*)"+Ee[ND]+"\\s+";qI[Y_]=new RegExp(Ee[Y_],"g");pn[Y_]=new RegExp(kD(Ee[Y_]),"g");var eUe="$1^",vfe=sr++;Ee[vfe]="^"+Ee[ND]+Ee[mv]+"$";var yfe=sr++;Ee[yfe]="^"+Ee[ND]+Ee[W_]+"$";var EH=sr++;Ee[EH]="^"+Ee[Q_]+"\\s*("+xH+")$|^$";var TH=sr++;Ee[TH]="^"+Ee[Q_]+"\\s*("+dfe+")$|^$";var hv=sr++;Ee[hv]="(\\s*)"+Ee[Q_]+"\\s*("+xH+"|"+Ee[mv]+")";qI[hv]=new RegExp(Ee[hv],"g");pn[hv]=new RegExp(kD(Ee[hv]),"g");var tUe="$1$2$3",bfe=sr++;Ee[bfe]="^\\s*("+Ee[mv]+")\\s+-\\s+("+Ee[mv]+")\\s*$";var _fe=sr++;Ee[_fe]="^\\s*("+Ee[W_]+")\\s+-\\s+("+Ee[W_]+")\\s*$";var xfe=sr++;Ee[xfe]="(<|>)?=?\\s*\\*";for(Ql=0;Ql<sr;Ql++)Xr(Ql,Ee[Ql]),qI[Ql]||(qI[Ql]=new RegExp(Ee[Ql]),pn[Ql]=new RegExp(kD(Ee[Ql])));var Ql;kt.parse=gv;function gv(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof fr)return t;if(typeof t!="string"||t.length>BI)return null;var r=e.loose?pn[SH]:pn[_H];if(!r.test(t))return null;try{return new fr(t,e)}catch{return null}}kt.valid=rUe;function rUe(t,e){var r=gv(t,e);return r?r.version:null}kt.clean=nUe;function nUe(t,e){var r=gv(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}kt.SemVer=fr;function fr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof fr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>BI)throw new TypeError("version is longer than "+BI+" characters");if(!(this instanceof fr))return new fr(t,e);Xr("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?pn[SH]:pn[_H]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ID||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ID||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ID||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<ID)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}fr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};fr.prototype.toString=function(){return this.version};fr.prototype.compare=function(t){return Xr("SemVer.compare",this.version,this.options,t),t instanceof fr||(t=new fr(t,this.options)),this.compareMain(t)||this.comparePre(t)};fr.prototype.compareMain=function(t){return t instanceof fr||(t=new fr(t,this.options)),$_(this.major,t.major)||$_(this.minor,t.minor)||$_(this.patch,t.patch)};fr.prototype.comparePre=function(t){if(t instanceof fr||(t=new fr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Xr("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return $_(r,n)}while(++e)};fr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};kt.inc=iUe;function iUe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new fr(t,r).inc(e,n).version}catch{return null}}kt.diff=oUe;function oUe(t,e){if(IH(t,e))return null;var r=gv(t),n=gv(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}kt.compareIdentifiers=$_;var cfe=/^[0-9]+$/;function $_(t,e){var r=cfe.test(t),n=cfe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}kt.rcompareIdentifiers=sUe;function sUe(t,e){return $_(e,t)}kt.major=aUe;function aUe(t,e){return new fr(t,e).major}kt.minor=cUe;function cUe(t,e){return new fr(t,e).minor}kt.patch=uUe;function uUe(t,e){return new fr(t,e).patch}kt.compare=jp;function jp(t,e,r){return new fr(t,r).compare(new fr(e,r))}kt.compareLoose=lUe;function lUe(t,e){return jp(t,e,!0)}kt.rcompare=dUe;function dUe(t,e,r){return jp(e,t,r)}kt.sort=pUe;function pUe(t,e){return t.sort(function(r,n){return kt.compare(r,n,e)})}kt.rsort=fUe;function fUe(t,e){return t.sort(function(r,n){return kt.rcompare(r,n,e)})}kt.gt=HI;function HI(t,e,r){return jp(t,e,r)>0}kt.lt=RD;function RD(t,e,r){return jp(t,e,r)<0}kt.eq=IH;function IH(t,e,r){return jp(t,e,r)===0}kt.neq=Sfe;function Sfe(t,e,r){return jp(t,e,r)!==0}kt.gte=CH;function CH(t,e,r){return jp(t,e,r)>=0}kt.lte=wH;function wH(t,e,r){return jp(t,e,r)<=0}kt.cmp=AD;function AD(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return IH(t,r,n);case"!=":return Sfe(t,r,n);case">":return HI(t,r,n);case">=":return CH(t,r,n);case"<":return RD(t,r,n);case"<=":return wH(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}kt.Comparator=Mc;function Mc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Mc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Mc))return new Mc(t,e);t=t.trim().split(/\s+/).join(" "),Xr("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===GI?this.value="":this.value=this.operator+this.semver.version,Xr("comp",this)}var GI={};Mc.prototype.parse=function(t){var e=this.options.loose?pn[EH]:pn[TH],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new fr(r[2],this.options.loose):this.semver=GI};Mc.prototype.toString=function(){return this.value};Mc.prototype.test=function(t){return Xr("Comparator.test",t,this.options.loose),this.semver===GI?!0:(typeof t=="string"&&(t=new fr(t,this.options)),AD(t,this.operator,this.semver,this.options))};Mc.prototype.intersects=function(t,e){if(!(t instanceof Mc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Gn(t.value,e),PD(this.value,r,e);if(t.operator==="")return r=new Gn(this.value,e),PD(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=AD(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=AD(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};kt.Range=Gn;function Gn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Gn)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Gn(t.raw,e);if(t instanceof Mc)return new Gn(t.value,e);if(!(this instanceof Gn))return new Gn(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Gn.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Gn.prototype.toString=function(){return this.range};Gn.prototype.parseRange=function(t){var e=this.options.loose,r=e?pn[_fe]:pn[bfe];t=t.replace(r,EUe),Xr("hyphen replace",t),t=t.replace(pn[hv],tUe),Xr("comparator trim",t,pn[hv]),t=t.replace(pn[K_],Z7e),t=t.replace(pn[Y_],eUe);var n=e?pn[EH]:pn[TH],i=t.split(" ").map(function(o){return hUe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Mc(o,this.options)},this),i};Gn.prototype.intersects=function(t,e){if(!(t instanceof Gn))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};kt.toComparators=mUe;function mUe(t,e){return new Gn(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function hUe(t,e){return Xr("comp",t,e),t=yUe(t,e),Xr("caret",t),t=gUe(t,e),Xr("tildes",t),t=_Ue(t,e),Xr("xrange",t),t=SUe(t,e),Xr("stars",t),t}function Ks(t){return!t||t.toLowerCase()==="x"||t==="*"}function gUe(t,e){return t.trim().split(/\s+/).map(function(r){return vUe(r,e)}).join(" ")}function vUe(t,e){var r=e.loose?pn[gfe]:pn[hfe];return t.replace(r,function(n,i,o,s,a){Xr("tilde",t,n,i,o,s,a);var c;return Ks(i)?c="":Ks(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Ks(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Xr("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Xr("tilde return",c),c})}function yUe(t,e){return t.trim().split(/\s+/).map(function(r){return bUe(r,e)}).join(" ")}function bUe(t,e){Xr("caret",t,e);var r=e.loose?pn[yfe]:pn[vfe];return t.replace(r,function(n,i,o,s,a){Xr("caret",t,n,i,o,s,a);var c;return Ks(i)?c="":Ks(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Ks(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Xr("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Xr("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Xr("caret return",c),c})}function _Ue(t,e){return Xr("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return xUe(r,e)}).join(" ")}function xUe(t,e){t=t.trim();var r=e.loose?pn[ffe]:pn[pfe];return t.replace(r,function(n,i,o,s,a,c){Xr("xRange",t,n,i,o,s,a,c);var u=Ks(o),l=u||Ks(s),d=l||Ks(a),p=d;return i==="="&&p&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Xr("xRange return",n),n})}function SUe(t,e){return Xr("replaceStars",t,e),t.trim().replace(pn[xfe],"")}function EUe(t,e,r,n,i,o,s,a,c,u,l,d,p){return Ks(r)?e="":Ks(n)?e=">="+r+".0.0":Ks(i)?e=">="+r+"."+n+".0":e=">="+e,Ks(c)?a="":Ks(u)?a="<"+(+c+1)+".0.0":Ks(l)?a="<"+c+"."+(+u+1)+".0":d?a="<="+c+"."+u+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}Gn.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new fr(t,this.options));for(var e=0;e<this.set.length;e++)if(TUe(this.set[e],t,this.options))return!0;return!1};function TUe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Xr(t[n].semver),t[n].semver!==GI&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}kt.satisfies=PD;function PD(t,e,r){try{e=new Gn(e,r)}catch{return!1}return e.test(t)}kt.maxSatisfying=IUe;function IUe(t,e,r){var n=null,i=null;try{var o=new Gn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new fr(n,r))}),n}kt.minSatisfying=CUe;function CUe(t,e,r){var n=null,i=null;try{var o=new Gn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new fr(n,r))}),n}kt.minVersion=wUe;function wUe(t,e){t=new Gn(t,e);var r=new fr("0.0.0");if(t.test(r)||(r=new fr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new fr(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||HI(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}kt.validRange=RUe;function RUe(t,e){try{return new Gn(t,e).range||"*"}catch{return null}}kt.ltr=AUe;function AUe(t,e,r){return RH(t,e,"<",r)}kt.gtr=PUe;function PUe(t,e,r){return RH(t,e,">",r)}kt.outside=RH;function RH(t,e,r,n){t=new fr(t,n),e=new Gn(e,n);var i,o,s,a,c;switch(r){case">":i=HI,o=wH,s=RD,a=">",c=">=";break;case"<":i=RD,o=CH,s=HI,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(PD(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],d=null,p=null;if(l.forEach(function(f){f.semver===GI&&(f=new Mc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0}kt.prerelease=kUe;function kUe(t,e){var r=gv(t,e);return r&&r.prerelease.length?r.prerelease:null}kt.intersects=DUe;function DUe(t,e,r){return t=new Gn(t,r),e=new Gn(e,r),t.intersects(e)}kt.coerce=NUe;function NUe(t){if(t instanceof fr)return t;if(typeof t!="string")return null;var e=t.match(pn[mfe]);return e==null?null:gv(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var wfe=P((bCt,Cfe)=>{var LUe=yD().wrap,PH=1,kH=2,DH=4,OD=8,on=[],OUe=0,ys=!1,jm=[],X_,NH;function LH(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=t[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(t[o].uid===e[s].uid){a=!1;break}a&&i.push(e[s])}return i}process._fatalException?(LD=!1,X_=function(e){var r=on.length;if(LD||r===0)return!1;var n=!1;LD=!0;for(var i=0;i<r;++i){var o=on[i];if(o.flags&OD){var s=J_&&J_[o.uid];n=o.error(s,e)||n}}return LD=!1,jm.length>0&&(on=jm.pop()),J_=void 0,n&&!ys},NH=function(e,r,n){var i=[];ys=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&PH)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return ys=!1,function(){J_=i,jm.push(on),on=LH(r,on),ys=!0;for(var c=0;c<n;++c)(r[c].flags&kH)>0&&r[c].before(this,i[r[c].uid]);ys=!1;var u=e.apply(this,arguments);for(ys=!0,c=0;c<n;++c)(r[c].flags&DH)>0&&r[c].after(this,i[r[c].uid]);return ys=!1,on=jm.pop(),J_=void 0,u}},LUe(process,"_fatalException",function(t){return function(r){return X_(r)||t(r)}})):(AH=!1,X_=function(e){if(AH)throw e;for(var r=!1,n=on.length,i=0;i<n;++i){var o=on[i];o.flags&OD&&(r=o.error(null,e)||r)}if(!r&&ys)throw e},NH=function(e,r,n){var i=[];ys=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&PH)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return ys=!1,function(){var c=!1,u=!1;jm.push(on),on=LH(r,on),ys=!0;for(var l=0;l<n;++l)(r[l].flags&kH)>0&&r[l].before(this,i[r[l].uid]);ys=!1;var d;try{d=e.apply(this,arguments)}catch(p){c=!0;for(var l=0;l<n;++l)if(on[l].flags&OD)try{u=on[l].error(i[r[l].uid],p)||u}catch(m){throw AH=!0,m}if(!u)throw process.removeListener("uncaughtException",X_),process._originalNextTick(function(){process.addListener("uncaughtException",X_)}),p}finally{if(!c||u){for(ys=!0,l=0;l<n;++l)(r[l].flags&DH)>0&&r[l].after(this,i[r[l].uid]);ys=!1}on=jm.pop()}return d}},process.addListener("uncaughtException",X_));var LD,J_,AH;function MUe(t,e,r){ys=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return ys=!1,function(){jm.push(on),on=LH(e,on);var o=t.apply(this,arguments);return on=jm.pop(),o}}function FUe(t){var e=on.length;if(e===0)return t;for(var r=on.slice(),n=0;n<e;++n)if(r[n].flags>0)return NH(t,r,e);return MUe(t,r,e)}function Xl(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=PH),typeof t.before=="function"&&(this.before=t.before,this.flags|=kH),typeof t.after=="function"&&(this.after=t.after,this.flags|=DH),typeof t.error=="function"&&(this.error=t.error,this.flags|=OD),this.uid=++OUe,this.data=e===void 0?null:e}Xl.prototype.create=void 0;Xl.prototype.before=void 0;Xl.prototype.after=void 0;Xl.prototype.error=void 0;Xl.prototype.data=void 0;Xl.prototype.uid=0;Xl.prototype.flags=0;function Ife(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof Xl?t:new Xl(t,e)}function UUe(t,e){var r;t instanceof Xl?r=t:r=Ife(t,e);for(var n=!1,i=0;i<on.length;i++)if(r===on[i]){n=!0;break}return n||on.push(r),r}function BUe(t){for(var e=0;e<on.length;e++)if(t===on[e]){on.splice(e,1);break}}process.createAsyncListener=Ife;process.addAsyncListener=UUe;process.removeAsyncListener=BUe;Cfe.exports=FUe});var Afe=P((xCt,Rfe)=>{"use strict";Rfe.exports=(t,e)=>class extends t{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(c){o[1](c)}return s;function a(c,u){i=this,o=[l,d];function l(p){return e(s,!1),c(p)}function d(p){return e(s,!1),u(p)}}}}});var Mfe=P(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var Nfe=yD(),FD=Tfe(),Ta=Nfe.wrap,Gm=Nfe.massWrap,Vn=wfe(),qUe=require("util"),HUe=FD.gte(process.version,"6.0.0"),FH=FD.gte(process.version,"7.0.0"),jUe=FD.gte(process.version,"8.0.0"),GUe=FD.gte(process.version,"11.0.0"),Jl=require("net");FH&&!Jl._normalizeArgs?Jl._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:KUe(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!FH&&!Jl._normalizeConnectArgs&&(Jl._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in Jl.Server.prototype?Ta(Jl.Server.prototype,"_setUpListenHandle",Pfe):Ta(Jl.Server.prototype,"_listen2",Pfe);function Pfe(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=Vn(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=Vn(this._handle.onconnection))}}}function Lfe(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=Vn(e._originalOnread)}}Ta(Jl.Socket.prototype,"connect",function(t){return function(){var e;jUe&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=FH?Jl._normalizeArgs(arguments):Jl._normalizeConnectArgs(arguments),e[1]&&(e[1]=Vn(e[1]));var r=t.apply(this,e);return Lfe(this),r}});var VUe=require("http");Ta(VUe.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=Vn(function(n){return Lfe(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var OH=require("child_process");function kfe(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=Vn(e._handle.onread),Ta(e._handle,"close",UD))}),t._handle&&(t._handle.onexit=Vn(t._handle.onexit))}OH.ChildProcess?Ta(OH.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return kfe(this),e}}):Gm(OH,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return kfe(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var qH=[];process._nextDomainTick&&qH.push("_nextDomainTick");process._tickDomainCallback&&qH.push("_tickDomainCallback");Gm(process,qH,Zl);Ta(process,"nextTick",UD);var HH=["setTimeout","setInterval"];global.setImmediate&&HH.push("setImmediate");var Ofe=require("timers"),zUe=global.setTimeout===Ofe.setTimeout;Gm(Ofe,HH,UD);zUe&&Gm(global,HH,UD);var UH=require("dns");Gm(UH,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Zl);UH.resolveNaptr&&Ta(UH,"resolveNaptr",Zl);var yv=require("fs");Gm(yv,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Zl);yv.lchown&&Ta(yv,"lchown",Zl);yv.lchmod&&Ta(yv,"lchmod",Zl);yv.ftruncate&&Ta(yv,"ftruncate",Zl);var VI;try{VI=require("zlib")}catch{}VI&&VI.Deflate&&VI.Deflate.prototype&&(vv=Object.getPrototypeOf(VI.Deflate.prototype),vv._transform?Ta(vv,"_transform",Zl):vv.write&&vv.flush&&vv.end&&Gm(vv,["write","flush","end"],Zl));var vv,BH;try{BH=require("crypto")}catch{}BH&&(MH=["pbkdf2","randomBytes"],GUe||MH.push("pseudoRandomBytes"),Gm(BH,MH,Zl));var MH,MD=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";MD&&(Dfe=process.addAsyncListener({create:function(){MD=!1}}),global.Promise.resolve(!0).then(function(){MD=!1}),process.removeAsyncListener(Dfe));var Dfe;MD&&$Ue();function $Ue(){var t=global.Promise;function e(s){if(!(this instanceof e))return t(s);if(typeof s!="function")return new t(s);var a,c,u=new t(l);u.__proto__=e.prototype;try{s.apply(a,c)}catch(d){c[1](d)}return u;function l(d,p){a=this,c=[f,m];function f(h){return n(u,!1),d(h)}function m(h){return n(u,!1),p(h)}}}if(qUe.inherits(e,t),Ta(t.prototype,"then",o),t.prototype.chain&&Ta(t.prototype,"chain",o),HUe)global.Promise=Afe()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof t[s]=="function"&&(e[s]=t[s])}),global.Promise=e}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=Vn(i))}function i(s,a,c,u){var l;try{return l=a.call(s,c),{returnVal:l,error:!1}}catch(d){return{errorVal:d,error:!0}}finally{l instanceof t?u.__asl_wrapper=function(){var p=l.__asl_wrapper||i;return p.apply(this,arguments)}:n(u,!0)}}function o(s){return function(){var c=this,u=s.apply(c,Array.prototype.map.call(arguments,l));return u.__asl_wrapper=function(p,f,m,h){return c.__asl_wrapper?(c.__asl_wrapper(p,function(){},null,u),u.__asl_wrapper(p,f,m,h)):i(p,f,m,h)},u;function l(d){return typeof d!="function"?d:Vn(function(p){var f=(c.__asl_wrapper||i)(this,d,p,u);if(f.error)throw f.errorVal;return f.returnVal})}}}}function Zl(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=Vn(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Vn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=Vn(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=Vn(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof o=="function"&&(o=Vn(o)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof s=="function"&&(s=Vn(s)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=Vn(a)),t.call(this,r,n,i,o,s,a))};default:return e}}function UD(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=Vn(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Vn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=Vn(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=Vn(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=Vn(r)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=Vn(r)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=Vn(r)),t.call(this,r,n,i,o,s,a))};default:return e}}function WUe(t){return(t=Number(t))>=0?t:!1}function KUe(t){return typeof t=="string"&&WUe(t)===!1}});var Hfe=P((TCt,qfe)=>{"use strict";var Gp=require("assert"),YUe=xD(),zI="cls@contexts",jH="error@context";process.addAsyncListener||Mfe();function qu(t){this.name=t,this.active=null,this._set=[],this.id=null}qu.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};qu.prototype.get=function(t){if(this.active)return this.active[t]};qu.prototype.createContext=function(){return Object.create(this.active)};qu.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[jH]=e),r}finally{this.exit(e)}};qu.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};qu.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[jH]=e),n}finally{r.exit(e)}}};qu.prototype.enter=function(t){Gp.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};qu.prototype.exit=function(t){if(Gp.ok(t,"context must be provided for exiting"),this.active===t){Gp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);Gp.ok(e>=0,"context not currently entered; can't exit"),Gp.ok(e,"can't remove top context"),this._set.splice(e,1)};qu.prototype.bindEmitter=function(t){Gp.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(o){o&&(o[zI]||(o[zI]=Object.create(null)),o[zI][r]={namespace:e,context:e.active})}function i(o){if(!(o&&o[zI]))return o;var s=o,a=o[zI];return Object.keys(a).forEach(function(c){var u=a[c];s=u.namespace.bind(s,u.context)}),s}YUe(t,n,i)};qu.prototype.fromException=function(t){return t[jH]};function Ffe(t){return process.namespaces[t]}function QUe(t){Gp.ok(t,"namespace must be given a name!");var e=new qu(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function Ufe(t){var e=Ffe(t);Gp.ok(e,"can't delete nonexistent namespace!"),Gp.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function Bfe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Ufe(t)}),process.namespaces=Object.create(null)}process.namespaces||Bfe();qfe.exports={getNamespace:Ffe,createNamespace:QUe,destroyNamespace:Ufe,reset:Bfe}});var Vm=P(qD=>{"use strict";Object.defineProperty(qD,"__esModule",{value:!0});qD.CorrelationContextManager=void 0;var Z_=xn(),XUe=nD(),bv=iD(),GH=pq(),jfe=Dq(),BD=Ho(),JUe=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,o,s){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:o,tracestate:s},customProperties:new ZUe(i)}:null},t.spanToContextObject=function(e,r,n){var i=new bv;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=bv.formatOpenTelemetryTraceFlags(e.traceFlags)||bv.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){var n;if(t.enabled)try{return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))()}catch(i){Z_.warn("Error binding to session context",BD.dumpObj(i))}return r()},t.wrapEmitter=function(e){if(t.enabled)try{t.session.bindEmitter(e)}catch(r){Z_.warn("Error binding to session context",BD.dumpObj(r))}},t.wrapCallback=function(e,r){var n;if(t.enabled)try{return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0)}catch(i){Z_.warn("Error binding to session context",BD.dumpObj(i))}return e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=afe():this.cls=Hfe()),t.session=this.cls.createNamespace("AI-CLS-Session"),XUe.registerContextPreservation(function(r){try{return t.session.bind(r)}catch(n){Z_.warn("Error binding to session context",BD.dumpObj(n))}})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.spanContext?e:null,o=e&&e.traceId?e:null,s=e&&e.headers;if(i)return this.spanToContextObject(i.spanContext(),i.parentSpanId,i.name);if(o)return this.spanToContextObject(o,"|"+o.traceId+"."+o.spanId+".",typeof r=="string"?r:"");var a=typeof r=="string"?r:"";if(n){var c=null,u=null;if(a=n.attributes.OperationName||a,r){var l=r;l.headers&&(l.headers.traceparent?c=new bv(l.headers.traceparent):l.headers["request-id"]&&(c=new bv(null,l.headers["request-id"])),l.headers.tracestate&&(u=new GH(l.headers.tracestate)))}c||(c=new bv(n.traceParent||n.traceparent)),u||(u=new GH(n.traceState||n.tracestate));var d=void 0;if(typeof r=="object"){var p=new jfe(r);d=p.getCorrelationContextHeader(),a=p.getOperationName({})}var f=t.generateContextObject(c.traceId,c.parentId,a,d,c,u);return f}if(s){var c=new bv(s.traceparent?s.traceparent.toString():null),u=new GH(s.tracestate?s.tracestate.toString():null),p=new jfe(e),f=t.generateContextObject(c.traceId,c.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),c,u);return f}return Z_.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();qD.CorrelationContextManager=JUe;var ZUe=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){Z_.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var Gfe=P(ex=>{"use strict";Object.defineProperty(ex,"__esModule",{value:!0});ex.dispose=ex.enable=void 0;var HD=gs(),eBe=qn(),jD=ri(),zm=[],VH=function(t){var e=t.data.message;zm.forEach(function(r){e instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:e}):e instanceof Error?r.trackTrace({message:e.toString(),severity:t.data.stderr?HD.SeverityLevel.Error:HD.SeverityLevel.Information}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?HD.SeverityLevel.Warning:HD.SeverityLevel.Information}))})};function tBe(t,e){if(t){var r=zm.find(function(n){return n==e});if(r)return;zm.length===0&&jD.channel.subscribe("console",VH,jD.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(eBe.StatsbeatInstrumentation.CONSOLE)}),zm.push(e)}else zm=zm.filter(function(n){return n!=e}),zm.length===0&&jD.channel.unsubscribe("console",VH)}ex.enable=tBe;function rBe(){jD.channel.unsubscribe("console",VH),zm=[]}ex.dispose=rBe});var Vfe=P(rx=>{"use strict";Object.defineProperty(rx,"__esModule",{value:!0});rx.dispose=rx.enable=void 0;var tx=gs(),nBe=qn(),GD=ri(),$m=[],iBe={10:tx.SeverityLevel.Verbose,20:tx.SeverityLevel.Verbose,30:tx.SeverityLevel.Information,40:tx.SeverityLevel.Warning,50:tx.SeverityLevel.Error,60:tx.SeverityLevel.Critical},zH=function(t){var e=t.data.result,r=iBe[t.data.level];$m.forEach(function(n){try{var i=JSON.parse(e);if(i.err){var o=new Error(i.err.message);if(o.name=i.err.name,o.stack=i.err.stack,n.config.enableLoggerErrorToTrace){n.trackTrace({message:e,severity:r});return}n.trackException({exception:o});return}}catch{}n.trackTrace({message:e,severity:r})})};function oBe(t,e){if(t){var r=$m.find(function(n){return n==e});if(r)return;$m.length===0&&GD.channel.subscribe("bunyan",zH,GD.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(nBe.StatsbeatInstrumentation.BUNYAN)}),$m.push(e)}else $m=$m.filter(function(n){return n!=e}),$m.length===0&&GD.channel.unsubscribe("bunyan",zH)}rx.enable=oBe;function sBe(){GD.channel.unsubscribe("bunyan",zH),$m=[]}rx.dispose=sBe});var zfe=P(nx=>{"use strict";Object.defineProperty(nx,"__esModule",{value:!0});nx.dispose=nx.enable=void 0;var aBe=qn(),Vo=gs(),VD=ri(),Wm=[],cBe={syslog:function(t){var e={emerg:Vo.SeverityLevel.Critical,alert:Vo.SeverityLevel.Critical,crit:Vo.SeverityLevel.Critical,error:Vo.SeverityLevel.Error,warning:Vo.SeverityLevel.Warning,notice:Vo.SeverityLevel.Information,info:Vo.SeverityLevel.Information,debug:Vo.SeverityLevel.Verbose};return e[t]===void 0?Vo.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Vo.SeverityLevel.Error,warn:Vo.SeverityLevel.Warning,info:Vo.SeverityLevel.Information,verbose:Vo.SeverityLevel.Verbose,debug:Vo.SeverityLevel.Verbose,silly:Vo.SeverityLevel.Verbose};return e[t]===void 0?Vo.SeverityLevel.Information:e[t]},unknown:function(t){return Vo.SeverityLevel.Information}},$H=function(t){var e=t.data.message,r=cBe[t.data.levelKind](t.data.level);Wm.forEach(function(n){e instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:e,properties:t.data.meta}):e instanceof Error?n.trackTrace({message:e.toString(),severity:r,properties:t.data.meta}):n.trackTrace({message:e,severity:r,properties:t.data.meta})})};function uBe(t,e){if(t){var r=Wm.find(function(n){return n==e});if(r)return;Wm.length===0&&VD.channel.subscribe("winston",$H,VD.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(aBe.StatsbeatInstrumentation.WINSTON)}),Wm.push(e)}else Wm=Wm.filter(function(n){return n!=e}),Wm.length===0&&VD.channel.unsubscribe("winston",$H)}nx.enable=uBe;function lBe(){VD.channel.unsubscribe("winston",$H),Wm=[]}nx.dispose=lBe});var Wfe=P((ACt,$fe)=>{"use strict";var dBe=nD(),pBe=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){dBe.IsInitialized&&(Gfe().enable(e&&r,this._client),Vfe().enable(e,this._client),zfe().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();$fe.exports=pBe});var Yfe=P((PCt,Kfe)=>{"use strict";var fBe=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(i,o,s){s===void 0&&(s=new Error(t._FALLBACK_ERROR_MESSAGE));var a={exception:s};a.contextObjects={},a.contextObjects.Error=s,r._client.trackException(a),r._client.flush({isAppCrashing:!0}),i&&o&&process.listeners(o).length===1&&(console.error(s),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();Kfe.exports=fBe});var $D=P((kCt,Qfe)=>{"use strict";var zD=require("os"),Fc=qn(),mBe=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=zD.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=zD.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],l="% cpu("+a+") ",d=c.model,p=c.speed,f=c.times,m=u.times,h=f.user-m.user||0;r+=h;var g=f.sys-m.sys||0;n+=g;var v=f.nice-m.nice||0;i+=v;var b=f.idle-m.idle||0;o+=b;var y=f.irq-m.irq||0;s+=y}var S=void 0;if(typeof process.cpuUsage=="function"){var x=process.cpuUsage(),T=process.hrtime(),L=x.user-this._lastAppCpuUsage.user+(x.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var M=(T[0]-this._lastHrtime[0])*1e6+(T[1]-this._lastHrtime[1])/1e3||0;S=100*L/(M*e.length)}this._lastAppCpuUsage=x,this._lastHrtime=T}var q=r+n+i+o+s||1;this._client.trackMetric({name:Fc.PerformanceCounter.PROCESSOR_TIME,value:(q-o)/q*100}),this._client.trackMetric({name:Fc.PerformanceCounter.PROCESS_TIME,value:S||r/q*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=zD.freemem(),r=process.memoryUsage().rss,n=zD.totalmem()-e;this._client.trackMetric({name:Fc.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:Fc.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Fc.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:Fc.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Fc.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Fc.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:Fc.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:Fc.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Fc.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:Fc.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();Qfe.exports=mBe});var Xfe=P(WD=>{"use strict";Object.defineProperty(WD,"__esModule",{value:!0});WD.AggregatedMetricCounter=void 0;var hBe=function(){function t(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();WD.AggregatedMetricCounter=hBe});var Jfe=P(KD=>{"use strict";Object.defineProperty(KD,"__esModule",{value:!0});KD.PreaggregatedMetricPropertyNames=void 0;KD.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var KH=P((WH,Zfe)=>{"use strict";var QD=WH&&WH.__assign||function(){return QD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},QD.apply(this,arguments)},YD=qn(),gBe=Xfe(),vBe=Jfe(),yBe=function(){function t(e,r){r===void 0&&(r=6e4),t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,t._dependencyCountersCollection=[],t._requestCountersCollection=[],t._exceptionCountersCollection=[],t._traceCountersCollection=[],this._client=e,this._collectionInterval=r}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countException=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._exceptionCountersCollection);r.totalCount++}},t.countTrace=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._traceCountersCollection);r.totalCount++}},t.countRequest=function(e,r){if(t.isEnabled()){var n,i=t._getAggregatedCounter(r,this._requestCountersCollection);if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;i.intervalExecutionTime+=n,i.totalCount++}},t.countDependency=function(e,r){if(t.isEnabled()){var n=t._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof e=="string")i=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")i=e;else return;n.intervalExecutionTime+=i,n.totalCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},t._getAggregatedCounter=function(e,r){for(var n=!1,i=0;i<r.length;i++){if(e===r[i].dimensions)return r[i];if(Object.keys(e).length===Object.keys(r[i].dimensions).length){for(var o in e)if(e[o]!=r[i].dimensions[o]){n=!0;break}if(!n)return r[i];n=!1}}var s=new gBe.AggregatedMetricCounter(e);return r.push(s),s},t.prototype._trackRequestMetrics=function(){for(var e=0;e<t._requestCountersCollection.length;e++){var r=t._requestCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:YD.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackDependencyMetrics=function(){for(var e=0;e<t._dependencyCountersCollection.length;e++){var r=t._dependencyCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:YD.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackExceptionMetrics=function(){for(var e=0;e<t._exceptionCountersCollection.length;e++){var r=t._exceptionCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:YD.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackTraceMetrics=function(){for(var e=0;e<t._traceCountersCollection.length;e++){var r=t._traceCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:YD.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackPreAggregatedMetric=function(e){var r={};for(var n in e.dimensions)r[vBe.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];r=QD(QD({},r),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();Zfe.exports=yBe});var ix=P((LCt,eme)=>{"use strict";var Vp=require("os"),bBe=require("fs"),_Be=require("path"),xBe=gs(),SBe=qn(),EBe=xn(),TBe=function(){function t(e){this.keys=new xBe.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){try{if(e=e||_Be.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";var r=JSON.parse(bBe.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}this.tags[this.keys.applicationVersion]=t.appVersion[e]}catch(n){EBe.info("Failed to read app version: ",n)}},t.prototype._loadDeviceContext=function(){var e=Vp&&Vp.hostname(),r=t.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(r=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=e,this.tags[this.keys.deviceOSVersion]=Vp&&Vp.type()+" "+Vp.release(),this.tags[this.keys.cloudRole]=r,this.tags["ai.device.osArchitecture"]=Vp&&Vp.arch(),this.tags["ai.device.osPlatform"]=Vp&&Vp.platform()},t.prototype._loadInternalContext=function(){t.sdkVersion=SBe.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();eme.exports=TBe});var nme=P((OCt,rme)=>{"use strict";var IBe=require("crypto"),tme=require("os"),CBe=qn(),wBe=ix(),RBe=function(){function t(e){this._collectionInterval=9e5,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return r.trackHeartBeat(r._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n={},i=wBe.sdkVersion;n.sdkVersion=i,n.osType=tme.type(),n.osVersion=tme.release(),this._uniqueProcessId||(this._uniqueProcessId=IBe.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:CBe.HeartBeatMetricName,value:0,properties:n}),r()},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();rme.exports=RBe});var ime=P(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.isContentTypeHeaderHtml=Dt.insertSnippetByIndex=Dt.getContentEncodingFromHeaders=Dt.isSupportedContentEncoding=Dt.findBufferEncodingType=Dt.isBufferType=Dt.getBrotliDecompressSync=Dt.getBrotliDecompressAsync=Dt.getBrotliCompressSync=Dt.getBrotliCompressAsync=Dt.inflateAsync=Dt.deflateAsync=Dt.gunzipAsync=Dt.gzipAsync=Dt.isBrotliSupperted=Dt.bufferEncodingTypes=Dt.contentEncodingMethod=void 0;var JD=require("zlib"),ox=require("util"),XD;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br"})(XD=Dt.contentEncodingMethod||(Dt.contentEncodingMethod={}));Dt.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var ABe=function(){var t=process.versions.node.split(".")[0];return parseInt(t)>=10};Dt.isBrotliSupperted=ABe;Dt.gzipAsync=ox.promisify(JD.gzip);Dt.gunzipAsync=ox.promisify(JD.gunzip);Dt.deflateAsync=ox.promisify(JD.deflate);Dt.inflateAsync=ox.promisify(JD.inflate);var PBe=function(t){var e=Dt.isBrotliSupperted();return e&&typeof t.brotliCompress=="function"?ox.promisify(t.brotliCompress):null};Dt.getBrotliCompressAsync=PBe;var kBe=function(t){var e=Dt.isBrotliSupperted();return e&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null};Dt.getBrotliCompressSync=kBe;var DBe=function(t){var e=Dt.isBrotliSupperted();return e&&typeof t.brotliDecompress=="function"?ox.promisify(t.brotliDecompress):null};Dt.getBrotliDecompressAsync=DBe;var NBe=function(t){var e=Dt.isBrotliSupperted();return e&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null};Dt.getBrotliDecompressSync=NBe;var LBe=function(t,e){var r=e||"utf8",n=!1;if(Buffer.isEncoding(r)){var i=Buffer.from(t.toString(r),r);n=i.toJSON().data.toString()===t.toJSON().data.toString()}return n};Dt.isBufferType=LBe;var OBe=function(t){var e=null;for(var r in Dt.bufferEncodingTypes){var n=Dt.bufferEncodingTypes[r];if(Buffer.isEncoding(n)&&Dt.isBufferType(t,n)){e=n;break}}return e};Dt.findBufferEncodingType=OBe;var MBe=function(t){var e=null;switch(t){case"gzip":e=XD.GZIP;break;case"br":e=XD.BR;break;case"deflate":e=XD.DEFLATE;break;default:}return e};Dt.isSupportedContentEncoding=MBe;var FBe=function(t){var e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){var n=Dt.isSupportedContentEncoding(r);n&&e.push(n)}return e};Dt.getContentEncodingFromHeaders=FBe;var UBe=function(t,e,r){if(t<0)return null;var n=null,i=e.substring(0,t),o=e.substring(t);return n=i+'<script type="text/javascript">'+r+"</script>"+o,n};Dt.insertSnippetByIndex=UBe;var BBe=function(t){var e=!1,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};Dt.isContentTypeHeaderHtml=BBe});var ome=P(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.getResourceProvider=yo.getOsPrefix=yo.isFunctionApp=yo.isWebApp=yo.isLinux=yo.isWindows=void 0;var qBe=function(){return process.platform==="win32"};yo.isWindows=qBe;var HBe=function(){return process.platform==="linux"};yo.isLinux=HBe;var jBe=function(){return!!process.env.WEBSITE_SITE_NAME};yo.isWebApp=jBe;var GBe=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};yo.isFunctionApp=GBe;var VBe=function(){return yo.isWindows()?"w":yo.isLinux()?"l":"u"};yo.getOsPrefix=VBe;var zBe=function(){return yo.isWebApp()?"a":yo.isFunctionApp()?"f":"u"};yo.getResourceProvider=zBe});var YH=P((UCt,ame)=>{"use strict";var sme=qn(),$Be=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];o[c]=u}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||sme.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||sme.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t.isIkeyValid=function(e){if(!e||e=="")return!1;var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();ame.exports=$Be});var cme={};rn(cme,{webSnippet:()=>WBe});var WBe,ume=I(()=>{WBe=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var hme=P((BCt,mme)=>{"use strict";var lme=require("http"),dme=require("https"),sx=require("zlib"),ed=xn(),Uc=ime(),pme=ome(),$I=qn(),fme=YH(),KBe=(ume(),Ai(cme)),YBe=function(){function t(e){var r;if(this._isIkeyValid=!0,t.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");t.INSTANCE=this,t._aiUrl=$I.WEB_INSTRUMENTATION_DEFAULT_SOURCE,t._aiDeprecatedUrl=$I.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var n=this._getWebSnippetIkey((r=e.config)===null||r===void 0?void 0:r.webInstrumentationConnectionString);this._webInstrumentationIkey=n||e.config.instrumentationKey,this._clientWebInstrumentationConfig=e.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=e.config.webInstrumentationSrc,this._statsbeat=e.getStatsbeat()}return t.prototype.enable=function(e,r){this._isEnabled=e,this._webInstrumentationIkey=this._getWebSnippetIkey(r)||this._webInstrumentationIkey,t._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature($I.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature($I.StatsbeatFeature.WEB_SNIPPET)},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._getWebSnippetIkey=function(e){var r=null;try{var n=fme.parse(e),i=n.instrumentationkey||"";fme.isIkeyValid(i)?(this._isIkeyValid=!0,r=i):(this._isIkeyValid=!1,ed.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(o){ed.info("get web snippet ikey error: "+o)}return r},t.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),r=pme.getOsPrefix(),n=pme.getResourceProvider(),i=this._webInstrumentationIkey+`",\r
`+e+` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`+n+r+"d_n_",o=KBe.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?o.replace($I.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):o},t.prototype._getClientWebInstrumentationConfigStr=function(e){var r="";try{e!=null&&e.length>0&&e.forEach(function(n){var i=n.name;if(i!==void 0){var o=n.value,s="";switch(typeof o){case"function":break;case"object":break;case"string":s=" "+i+': "'+o+`",\r
`,r+=s;break;default:s=" "+i+": "+o+`,\r
`,r+=s;break}}})}catch{this._isEnabled=!1,ed.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return r},t.prototype._initialize=function(){this._isInitialized=!0;var e=lme.createServer,r=dme.createServer,n=this._isEnabled;lme.createServer=function(i){var o=i;return o&&(i=function(s,a){var c=a.write,u=s.method=="GET";a.write=function(p,f,m){try{if(n&&u){var h=Uc.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(b){ed.warn("Inject snippet error: "+b)}return c.apply(a,arguments)};var l=a.end;return a.end=function(p,f,m){if(n&&u)try{if(n&&u){var h=Uc.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(b){ed.warn("Inject snipet error: "+b)}return l.apply(a,arguments)},o(s,a)}),e(i)},dme.createServer=function(i,o){var s=o;if(s)return o=function(a,c){var u=a.method=="GET",l=c.write,d=c.end;return c.write=function(f,m,h){try{if(n&&u){var g=Uc.getContentEncodingFromHeaders(c),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(c,f)&&(arguments[0]=this.InjectWebSnippet(c,f,void 0,v));else if(g.length){var b=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,b)}}}catch(y){ed.warn("Inject snippet error: "+y)}return l.apply(c,arguments)},c.end=function(f,m,h){try{if(n&&u){var g=Uc.getContentEncodingFromHeaders(c),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(c,f)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,void 0,v));else if(g.length){var b=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,b)}}}catch(y){ed.warn("Inject snippet error: "+y)}return d.apply(c,arguments)},s(a,c)},r(i,o)}},t.prototype.ValidateInjection=function(e,r){try{if(!e||!r||e.statusCode!=200)return!1;var n=Uc.isContentTypeHeaderHtml(e);if(!n)return!1;var i=r.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(t._aiUrl)<0&&i.indexOf(t._aiDeprecatedUrl)<0)return!0}catch(o){ed.info("validate injections error: "+o)}return!1},t.prototype.InjectWebSnippet=function(e,r,n,i){try{var o=!!n;if(o)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else{var s=r.toString(),a=s.indexOf("</head>");if(a<0)return r;var c=Uc.insertSnippetByIndex(a,s,t._snippet);if(typeof r=="string")e.removeHeader("Content-Length"),r=c,e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){var u=i||"utf8",l=Uc.isBufferType(r,u);if(l){e.removeHeader("Content-Length");var d=Buffer.from(c).toString(u);r=Buffer.from(d,u),e.setHeader("Content-Length",r.length)}}}}catch(p){ed.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+p)}return r},t.prototype._getInjectedCompressBuffer=function(e,r,n){try{switch(n){case Uc.contentEncodingMethod.GZIP:var i=sx.gunzipSync(r);if(this.ValidateInjection(e,i)){var o=this.InjectWebSnippet(e,i);r=sx.gzipSync(o)}break;case Uc.contentEncodingMethod.DEFLATE:var s=sx.inflateSync(r);if(this.ValidateInjection(e,s)){var a=this.InjectWebSnippet(e,s);r=sx.deflateSync(a)}break;case Uc.contentEncodingMethod.BR:var c=Uc.getBrotliDecompressSync(sx),u=Uc.getBrotliCompressSync(sx);if(c&&u){var l=c(r);if(this.ValidateInjection(e,l)){var d=this.InjectWebSnippet(e,l);r=u(d)}break}}}catch(p){ed.info("get web injection compress buffer error: "+p)}return r},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();mme.exports=YBe});var vme=P((XH,gme)=>{"use strict";var QBe=XH&&XH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bc=require("url"),QH=gs(),XBe=Ho(),JBe=D_(),ZBe=Rq(),eqe=uv(),tqe=function(t){QBe(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=XBe.getCorrelationContextTarget(r,JBe.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=this.method.toUpperCase(),o=QH.RemoteDependencyDataConstants.TYPE_HTTP,s="";try{var a=new Bc.URL(this.url);a.search=void 0,a.hash=void 0,i+=" "+a.pathname,s=a.hostname,a.port&&(s+=":"+a.port)}catch{}this.correlationId?(o=QH.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==eqe.correlationIdPrefix&&(s+=" | "+this.correlationId)):o=QH.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(r&&r.time?c.time=r.time:this.startTime&&(c.time=new Date(this.startTime)),r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)try{r=new Bc.URL(r)}catch{}else try{var i=new Bc.URL("http://"+r);i.port==="443"?r=new Bc.URL("https://"+r):r=new Bc.URL("http://"+r)}catch{}else{if(r&&typeof Bc.URL=="function"&&r instanceof Bc.URL)return Bc.format(r);var o=r;r={},o&&Object.keys(o).forEach(function(c){r[c]=o[c]})}if(r.path&&r.host)try{var s=new Bc.URL(r.path,"http://"+r.host+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.path&&r.hostname&&!r.host)try{var s=new Bc.URL(r.path,"http://"+r.hostname+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.host&&r.port)try{var a=new Bc.URL("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}catch{}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",Bc.format(r)},e}(ZBe);gme.exports=tqe});var yme=P(ax=>{"use strict";var ZD=ax&&ax.__assign||function(){return ZD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ZD.apply(this,arguments)};Object.defineProperty(ax,"__esModule",{value:!0});ax.parseEventHubSpan=void 0;var JH=(ir(),Ai(S_)),rqe=(Gs(),Ai($ce)),nqe=(Mu(),Ai(hB)),WI=qn(),iqe=function(t){var e=0,r=0,n=rqe.hrTimeToMilliseconds(t.startTime);return t.links.forEach(function(i){var o=i.attributes,s=o?.[WI.ENQUEUED_TIME];s&&(e+=1,r+=n-(parseFloat(s.toString())||0))}),Math.max(r/(e||1),0)},oqe=function(t,e){var r,n=t.attributes[WI.AzNamespace],i=(t.attributes[nqe.SemanticAttributes.NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=t.attributes[WI.MessageBusDestination]||"unknown";switch(t.kind){case JH.SpanKind.CLIENT:e.dependencyTypeName=n,e.target=i+"/"+o;break;case JH.SpanKind.PRODUCER:e.dependencyTypeName=WI.DependencyTypeName.QueueMessage+" | "+n,e.target=i+"/"+o;break;case JH.SpanKind.CONSUMER:e.source=i+"/"+o,e.measurements=ZD(ZD({},e.measurements),(r={},r[WI.TIME_SINCE_ENQUEUED]=iqe(t),r));break;default:}};ax.parseEventHubSpan=oqe});var xme=P(eN=>{"use strict";Object.defineProperty(eN,"__esModule",{value:!0});eN.spanToTelemetryContract=void 0;var bme=require("url"),Hu=(ir(),Ai(S_)),Gt=(Mu(),Ai(hB)),zp=qn(),sqe=yme(),aqe=Ho();function cqe(t){for(var e={},r=0,n=Object.keys(t.attributes);r<n.length;r++){var i=n[r];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(e[i]=t.attributes[i])}var o=t.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(e["_MS.links"]=aqe.stringify(o)),e}function uqe(t){return t===Gt.DbSystemValues.DB2||t===Gt.DbSystemValues.DERBY||t===Gt.DbSystemValues.MARIADB||t===Gt.DbSystemValues.MSSQL||t===Gt.DbSystemValues.ORACLE||t===Gt.DbSystemValues.SQLITE||t===Gt.DbSystemValues.OTHER_SQL||t===Gt.DbSystemValues.HSQLDB||t===Gt.DbSystemValues.H2}function _me(t){var e=t.attributes[Gt.SemanticAttributes.HTTP_METHOD];if(e){var r=t.attributes[Gt.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=t.attributes[Gt.SemanticAttributes.HTTP_SCHEME],i=t.attributes[Gt.SemanticAttributes.HTTP_TARGET];if(n&&i){var o=t.attributes[Gt.SemanticAttributes.HTTP_HOST];if(o)return n+"://"+o+i;var s=t.attributes[Gt.SemanticAttributes.NET_PEER_PORT];if(s){var a=t.attributes[Gt.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var c=t.attributes[Gt.SemanticAttributes.NET_PEER_IP];if(c)return n+"://"+c+":"+s+i}}}return""}function ZH(t){var e=t.attributes[Gt.SemanticAttributes.PEER_SERVICE],r=t.attributes[Gt.SemanticAttributes.HTTP_HOST],n=t.attributes[Gt.SemanticAttributes.HTTP_URL],i=t.attributes[Gt.SemanticAttributes.NET_PEER_NAME],o=t.attributes[Gt.SemanticAttributes.NET_PEER_IP];return e?String(e):r?String(r):n?String(n):i?String(i):o?String(o):""}function lqe(t){var e={name:t.name,success:t.status.code!=Hu.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};t.kind===Hu.SpanKind.PRODUCER&&(e.dependencyTypeName=zp.DependencyTypeName.QueueMessage),t.kind===Hu.SpanKind.INTERNAL&&t.parentSpanId&&(e.dependencyTypeName=zp.DependencyTypeName.InProc);var r=t.attributes[Gt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Gt.SemanticAttributes.DB_SYSTEM],i=t.attributes[Gt.SemanticAttributes.RPC_SYSTEM];if(r){e.dependencyTypeName=zp.DependencyTypeName.Http;var o=t.attributes[Gt.SemanticAttributes.HTTP_URL];if(o){var s="";try{var a=new bme.URL(String(o));s=a.pathname}catch{}e.name=r+" "+s}e.data=_me(t);var c=t.attributes[Gt.SemanticAttributes.HTTP_STATUS_CODE];c&&(e.resultCode=String(c));var u=ZH(t);if(u){try{var l=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),d=l.exec(u);if(d!=null){var p=d[1],f=d[3];(p=="https"&&f==":443"||p=="http"&&f==":80")&&(u=d[1]+d[2]+d[4])}}catch{}e.target=""+u}}else if(n){String(n)===Gt.DbSystemValues.MYSQL?e.dependencyTypeName="mysql":String(n)===Gt.DbSystemValues.POSTGRESQL?e.dependencyTypeName="postgresql":String(n)===Gt.DbSystemValues.MONGODB?e.dependencyTypeName="mongodb":String(n)===Gt.DbSystemValues.REDIS?e.dependencyTypeName="redis":uqe(String(n))?e.dependencyTypeName="SQL":e.dependencyTypeName=String(n);var m=t.attributes[Gt.SemanticAttributes.DB_STATEMENT],h=t.attributes[Gt.SemanticAttributes.DB_OPERATION];m?e.data=String(m):h&&(e.data=String(h));var u=ZH(t),g=t.attributes[Gt.SemanticAttributes.DB_NAME];u?e.target=g?u+"|"+g:""+u:e.target=g?""+g:""+n}else if(i){e.dependencyTypeName=zp.DependencyTypeName.Grpc;var v=t.attributes[Gt.SemanticAttributes.RPC_GRPC_STATUS_CODE];v&&(e.resultCode=String(v));var u=ZH(t);u?e.target=""+u:i&&(e.target=String(i))}return e}function dqe(t){var e={name:t.name,success:t.status.code!=Hu.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=t.attributes[Gt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Gt.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){if(t.kind==Hu.SpanKind.SERVER){var i=t.attributes[Gt.SemanticAttributes.HTTP_ROUTE],o=t.attributes[Gt.SemanticAttributes.HTTP_URL];if(i)e.name=r+" "+i;else if(o)try{var s=new bme.URL(String(o));e.name=r+" "+s.pathname}catch{}}e.url=_me(t);var a=t.attributes[Gt.SemanticAttributes.HTTP_STATUS_CODE];a&&(e.resultCode=String(a))}else n&&(e.resultCode=String(n));return e}function pqe(t){var e;switch(t.kind){case Hu.SpanKind.CLIENT:case Hu.SpanKind.PRODUCER:case Hu.SpanKind.INTERNAL:e=lqe(t);break;case Hu.SpanKind.SERVER:case Hu.SpanKind.CONSUMER:e=dqe(t);break}var r=t.spanContext?t.spanContext():t.context(),n=""+r.spanId,i=Math.round(t.duration[0]*1e3+t.duration[1]/1e6);return e.id=n,e.duration=i,e.properties=cqe(t),t.attributes[zp.AzNamespace]&&(t.kind===Hu.SpanKind.INTERNAL&&(e.dependencyTypeName=zp.DependencyTypeName.InProc+" | "+t.attributes[zp.AzNamespace]),t.attributes[zp.AzNamespace]===zp.MicrosoftEventHub&&sqe.parseEventHubSpan(t,e)),e}eN.spanToTelemetryContract=pqe});var Eme=P(Ym=>{"use strict";var cx=Ym&&Ym.__assign||function(){return cx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},cx.apply(this,arguments)};Object.defineProperty(Ym,"__esModule",{value:!0});Ym.AsyncScopeManager=Ym.OpenTelemetryScopeManagerWrapper=void 0;var Km=Vm(),fqe=require("events"),Sme=function(){function t(){}return t.prototype.active=function(){var e=this,r=Km.CorrelationContextManager.getCurrentContext();return cx(cx({},r),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,o=t._spanToContext(e,n,i);return Km.CorrelationContextManager.runWithContext(o,r)()},t.prototype.bind=function(e){return typeof e=="function"?Km.CorrelationContextManager.wrapCallback(e):(e instanceof fqe.EventEmitter&&Km.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return Km.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return Km.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=e.spanContext?e.spanContext():e.context(),o=cx(cx({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),s=r?"|"+i.traceId+"."+r+".":i.traceId,a=Km.CorrelationContextManager.getCurrentContext();a&&(o.traceId=a.operation.id,r||(s=a.operation.parentId));var c=Km.CorrelationContextManager.spanToContextObject(o,s,n);return c},t}();Ym.OpenTelemetryScopeManagerWrapper=Sme;Ym.AsyncScopeManager=new Sme});var Tme=P(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.enable=Qm.subscriber=void 0;var KI=(ir(),Ai(S_)),mqe=qn(),ej=ri(),hqe=xme(),gqe=Eme(),_v=[],vqe=function(t){try{var e=t.data,r=hqe.spanToTelemetryContract(e);gqe.AsyncScopeManager.with(e,function(){_v.forEach(function(n){e.kind===KI.SpanKind.SERVER||e.kind===KI.SpanKind.CONSUMER?n.trackRequest(r):(e.kind===KI.SpanKind.CLIENT||e.kind===KI.SpanKind.INTERNAL||e.kind===KI.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch{}};Qm.subscriber=vqe;function yqe(t,e){if(t){var r=_v.find(function(n){return n==e});if(r)return;_v.length===0&&ej.channel.subscribe("azure-coretracing",Qm.subscriber,ej.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(mqe.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),_v.push(e)}else _v=_v.filter(function(n){return n!=e}),_v.length===0&&ej.channel.unsubscribe("azure-coretracing",Qm.subscriber)}Qm.enable=yqe});var Ime=P(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.enable=Xm.subscriber=void 0;var bqe=qn(),tj=ri(),xv=[],_qe=function(t){t.data.event.commandName!=="ismaster"&&xv.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};Xm.subscriber=_qe;function xqe(t,e){if(t){var r=xv.find(function(n){return n==e});if(r)return;xv.length===0&&tj.channel.subscribe("mongodb",Xm.subscriber,tj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(bqe.StatsbeatInstrumentation.MONGODB)}),xv.push(e)}else xv=xv.filter(function(n){return n!=e}),xv.length===0&&tj.channel.unsubscribe("mongodb",Xm.subscriber)}Xm.enable=xqe});var Cme=P(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.enable=Jm.subscriber=void 0;var Sqe=qn(),rj=ri(),Sv=[],Eqe=function(t){Sv.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};Jm.subscriber=Eqe;function Tqe(t,e){if(t){var r=Sv.find(function(n){return n==e});if(r)return;Sv.length===0&&rj.channel.subscribe("mysql",Jm.subscriber,rj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(Sqe.StatsbeatInstrumentation.MYSQL)}),Sv.push(e)}else Sv=Sv.filter(function(n){return n!=e}),Sv.length===0&&rj.channel.unsubscribe("mysql",Jm.subscriber)}Jm.enable=Tqe});var wme=P(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.enable=Zm.subscriber=void 0;var Iqe=qn(),nj=ri(),Ev=[],Cqe=function(t){Ev.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};Zm.subscriber=Cqe;function wqe(t,e){if(t){var r=Ev.find(function(n){return n==e});if(r)return;Ev.length===0&&nj.channel.subscribe("redis",Zm.subscriber,nj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(Iqe.StatsbeatInstrumentation.REDIS)}),Ev.push(e)}else Ev=Ev.filter(function(n){return n!=e}),Ev.length===0&&nj.channel.unsubscribe("redis",Zm.subscriber)}Zm.enable=wqe});var Rme=P(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.enable=eh.subscriber=void 0;var Rqe=qn(),ij=ri(),Tv=[],Aqe=function(t){Tv.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,o=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};eh.subscriber=Aqe;function Pqe(t,e){if(t){var r=Tv.find(function(n){return n==e});if(r)return;Tv.length===0&&ij.channel.subscribe("postgres",eh.subscriber,ij.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(Rqe.StatsbeatInstrumentation.POSTGRES)}),Tv.push(e)}else Tv=Tv.filter(function(n){return n!=e}),Tv.length===0&&ij.channel.unsubscribe("postgres",eh.subscriber)}eh.enable=Pqe});var dx=P((sj,Ame)=>{"use strict";var tN=sj&&sj.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},ux=require("http"),lx=require("https"),rN=xn(),oj=Ho(),th=D_(),kqe=vme(),YI=Vm(),nN=iD(),Dqe=nD(),QI=uv(),Nqe=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),Dqe.IsInitialized&&(Tme().enable(e,this._client),Ime().enable(e,this._client),Cme().enable(e,this._client),wme().enable(e,this._client),Rme().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=ux.request,n=lx.request,i=function(o,s){try{var a=!s[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag],c=null;if(s.headers&&(c=s.headers["User-Agent"]||s.headers["user-agent"],c&&c.toString().indexOf("azsdk-js")!==-1&&(a=!1)),o&&s&&a&&(YI.CorrelationContextManager.wrapEmitter(o),e._isEnabled))if(o[t.alreadyAutoCollectedFlag]=!0,YI.CorrelationContextManager.getCurrentContext())t.trackRequest(e._client,{options:s,request:o});else{var u=null;if(QI.w3cEnabled){var l=new nN;u=l.traceId}else{var d=QI.generateRequestId(null);u=QI.getRootId(d)}var p=YI.CorrelationContextManager.generateContextObject(u);YI.CorrelationContextManager.runWithContext(p,function(){t.trackRequest(e._client,{options:s,request:o})})}}catch(f){rN.warn("Failed to generate dependency telemetry.",oj.dumpObj(f))}};ux.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=r.call.apply(r,tN([ux,o],s));return i(c,o),c},lx.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=n.call.apply(n,tN([lx,o],s));return i(c,o),c},ux.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=ux.request).call.apply(s,tN([ux,o],a));return u.end(),u},lx.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=lx.request).call.apply(s,tN([lx,o],a));return u.end(),u}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){rN.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new kqe(r.options,r.request),i=YI.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&nN.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(QI.w3cEnabled){var a=new nN;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(oj.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var c=r.request.getHeader(th.requestContextHeader);try{oj.safeIncludeCorrelationHeader(e,r.request,c)}catch(d){rN.warn("Request-Context header could not be set. Correlation of requests may be lost",d)}if(i&&i.operation)try{if(r.request.setHeader(th.requestIdHeader,o),e.config.ignoreLegacyHeaders||(r.request.setHeader(th.parentIdHeader,i.operation.id),r.request.setHeader(th.rootIdHeader,o)),s||i.operation.traceparent)r.request.setHeader(th.traceparentHeader,s||i.operation.traceparent.toString());else if(QI.w3cEnabled){var a=new nN().toString();r.request.setHeader(th.traceparentHeader,a)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(th.traceStateHeader,u)}var l=i.customProperties.serializeToHeader();l&&r.request.setHeader(th.correlationContextHeader,l)}catch(d){rN.warn("Correlation headers could not be set. Correlation of requests may be lost.",d)}}r.request.on&&(r.request.on("response",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onResponse(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects["http.ClientResponse"]=d,e.trackDependency(p)}}),r.request.on("error",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onError(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects.Error=d,e.trackDependency(p)}}),r.request.on("abort",function(){if(!r.isProcessed){r.isProcessed=!0,n.onError(new Error("The request has been aborted and the network socket has closed."));var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,e.trackDependency(d)}}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();Ame.exports=Nqe});var cj=P((KCt,Lme)=>{"use strict";var Pme=require("http"),kme=require("https"),Dme=xn(),Nme=Ho(),Lqe=D_(),aj=Dq(),$p=Vm(),Oqe=$D(),Mqe=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||Oqe.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?$p.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&$p.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return $p.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._registerRequest=function(e,r,n){var i=this,o=new aj(e),s=this._generateCorrelationContext(o);$p.CorrelationContextManager.runWithContext(s,function(){i._isEnabled&&(e[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(i._client,{request:e,response:r},o)),typeof n=="function"&&n(e,r)})},t.prototype._initialize=function(){if(this._isInitialized=!0,!t.HANDLER_READY){t.HANDLER_READY=!0;var e=function(o){if(o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(s,a){$p.CorrelationContextManager.wrapEmitter(s),$p.CorrelationContextManager.wrapEmitter(a);var c=s&&!s[t.alreadyAutoCollectedFlag];s&&c&&t.INSTANCE?t.INSTANCE._registerRequest(s,a,o):o(s,a)}}},r=function(o){var s=o.addListener.bind(o);o.addListener=function(a,c){switch(a){case"request":case"checkContinue":return s(a,e(c));default:return s(a,c)}},o.on=o.addListener},n=Pme.createServer;Pme.createServer=function(o,s){if(s&&typeof s=="function"){var a=n(o,e(s));return r(a),a}else{var a=n(e(o));return r(a),a}};var i=kme.createServer;kme.createServer=function(o,s){var a=i(o,e(s));return r(a),a}}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){Dme.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1,t.addResponseCorrelationIdHeader(e,r.response);var n=$p.CorrelationContextManager.getCurrentContext(),i=new aj(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){Dme.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1;var i=$p.CorrelationContextManager.getCurrentContext(),o=n||new aj(r.request,i&&i.operation.parentId);Nme.canIncludeCorrelationHeader(e,o.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){t.endRequest(e,o,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";t.endRequest(e,o,r,null,s)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(Lqe.requestContextHeader);Nme.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,o){if(!n.isProcessed){n.isProcessed=!0,o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var c=r.getLegacyRootId();c&&(s.properties.ai_legacyRootId=c),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,$p.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.HANDLER_READY=!1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();Lme.exports=Mqe});var Fme=P((lj,Mme)=>{"use strict";var qc=lj&&lj.__assign||function(){return qc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qc.apply(this,arguments)},uj=require("os"),Iv=gs(),Ome=qn(),Fqe=Ho(),Uqe=xn(),Bqe=Fqe.w3cTraceId(),qqe=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var o=uj&&typeof uj.hostname=="function"&&uj.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,c={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:Bqe,MachineName:o,Instance:s,RoleName:a};return c},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case Iv.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case Iv.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case Iv.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case Iv.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case Iv.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=qc(qc({},r),{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=qc(qc({},r),{Message:e.data.baseData.message,SeverityLevel:Iv.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=qc(qc({},r),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=qc(qc({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=qc(qc({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,o;e.data.baseType?(n=Ome.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=Ome.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):Uqe.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],o=t.aggregateProperties(e);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},t.keys=new Iv.ContextTagKeys,t}();Mme.exports=qqe});var Bme=P((YCt,Ume)=>{"use strict";var Hqe=function(){return(Date.now()+621355968e5)*1e4};Ume.exports={getTransmissionTime:Hqe}});var Gme=P((XI,jme)=>{"use strict";var qme=XI&&XI.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Hme=XI&&XI.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},jqe=require("https"),Gqe=dx(),dj=xn(),Vqe=Bme(),pj=Ho(),zqe=require("url"),Hc={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},$qe=function(){function t(e,r){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=r}return t.prototype.ping=function(e,r,n){var i=[{name:Hc.streamId,value:e.StreamId},{name:Hc.machineName,value:e.MachineName},{name:Hc.roleName,value:e.RoleName},{name:Hc.instanceName,value:e.Instance},{name:Hc.invariantVersion,value:e.InvariantVersion.toString()}];this._submitData(e,r,n,"ping",i)},t.prototype.post=function(e,r,n){return qme(this,void 0,void 0,function(){return Hme(this,function(i){switch(i.label){case 0:return[4,this._submitData([e],r,n,"post")];case 1:return i.sent(),[2]}})})},t.prototype._submitData=function(e,r,n,i,o){return qme(this,void 0,void 0,function(){var s,a,c,u,l,d,p,f,m=this;return Hme(this,function(h){switch(h.label){case 0:if(s=pj.stringify(e),a=(p={},p[Gqe.disableCollectionRequestOption]=!0,p.host=r&&r.length>0?r:this._config.quickPulseHost,p.method=Hc.method,p.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,p.headers=(f={Expect:"100-continue"},f[Hc.time]=Vqe.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),p),o&&o.length>0&&o.forEach(function(g){return a.headers[g.name]=g.value}),i!=="post")return[3,4];if(c=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!c)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,c.addAuthorizationHeader(a)];case 2:return h.sent(),[3,4];case 3:return u=h.sent(),l="Failed to get AAD bearer token for the Application. Error:",dj.info(t.TAG,l,u),[2];case 4:return this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=pj.tlsRestrictedAgent,d=jqe.request(a,function(g){if(g.statusCode==200){var v=g.headers[Hc.subscribed]==="true",b=null;try{b=g.headers[Hc.endpointRedirect]?new zqe.URL(g.headers[Hc.endpointRedirect].toString()).host:null}catch(S){m._onError("Failed to parse redirect header from QuickPulse: "+pj.dumpObj(S))}var y=g.headers[Hc.pollingIntervalHint]?parseInt(g.headers[Hc.pollingIntervalHint].toString()):null;m._consecutiveErrors=0,n(v,g,b,y)}else m._onError("StatusCode:"+g.statusCode+" StatusMessage:"+g.statusMessage),n()}),d.on("error",function(g){m._onError(g),n()}),d.write(s),d.end(),[2]}})})},t.prototype._onError=function(e){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",dj.warn(t.TAG,r,e)):dj.info(t.TAG,r,e)},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();jme.exports=$qe});var Kme=P((JI,Wme)=>{"use strict";var Vme=JI&&JI.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},zme=JI&&JI.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$me=xn(),fj=Fme(),Wqe=Gme(),Kqe=qn(),Yqe=ix(),Qqe=function(){function t(e,r,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=r||new Yqe,this._sender=new Wqe(this.config,n),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){if(this._isCollectingData){var r=fj.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)}},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=Kqe.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=fj.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){return Vme(this,void 0,void 0,function(){var e,r,n,i,o=this;return zme(this,function(s){switch(s.label){case 0:return e=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),r=fj.createQuickPulseEnvelope(e,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:t.PING_INTERVAL,i=this._isCollectingData?t.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},t.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},t.prototype._post=function(e){return Vme(this,void 0,void 0,function(){return zme(this,function(r){switch(r.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},t.prototype._quickPulseDone=function(e,r,n,i){e!=null?(this._isCollectingData!==e&&($me.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,$me.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();Wme.exports=Qqe});var Yme=P(px=>{"use strict";var iN=px&&px.__assign||function(){return iN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},iN.apply(this,arguments)};Object.defineProperty(px,"__esModule",{value:!0});px.AutoCollectNativePerformance=void 0;var ZI=ix(),Xqe=xn(),Jqe=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),t._metricsAvailable==null&&e&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");t._emitter=new o,t._metricsAvailable=!0,Xqe.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e,r){var n=r.disableAllExtendedMetrics,i=r.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++){var u=c[a];s[u]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:iN(iN({},e),s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){var e;if(!this._disabledMetrics.gc){var r=t._emitter.getGCData();for(var n in r){var i=r[n].metrics,o=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ZI.sdkVersion,e)})}}},t.prototype._trackEventLoop=function(){var e;if(!this._disabledMetrics.loop){var r=t._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:o,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ZI.sdkVersion,e)})}}},t.prototype._trackHeapUsage=function(){var e,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ZI.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ZI.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ZI.sdkVersion,n)})}},t}();px.AutoCollectNativePerformance=Jqe});var Jme=P(rh=>{"use strict";var Qme=rh&&rh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Xme=rh&&rh.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(rh,"__esModule",{value:!0});rh.AzureFunctionsHook=void 0;var oN=xn(),mj=Vm(),Zqe=function(){function t(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core"),this._addPreInvocationHook(),this._addPostInvocationHook()}catch{oN.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return t.prototype._getFuncModelHelper=function(){if(this._cachedModelHelper===void 0){var e=this._functionsCoreModule.getProgrammingModel();e.name==="@azure/functions"&&(e.version.startsWith("3.")?this._cachedModelHelper=new eHe:e.version.startsWith("4.")&&(this._cachedModelHelper=new tHe)),this._cachedModelHelper||(this._cachedModelHelper=null,oN.warn('AzureFunctionsHook does not support model "'+e.name+'" version "'+e.version+'"'))}return this._cachedModelHelper},t.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},t.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},t.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(r){return Qme(e,void 0,void 0,function(){var n,i,o,s;return Xme(this,function(a){try{n=this._getFuncModelHelper(),n&&(i=r.invocationContext,o=mj.CorrelationContextManager.startOperation(i),o&&(o.customProperties.setProperty("InvocationId",i.invocationId),s=i.traceContext,s.attributes&&(o.customProperties.setProperty("ProcessId",s.attributes.ProcessId),o.customProperties.setProperty("LogLevel",s.attributes.LogLevel),o.customProperties.setProperty("Category",s.attributes.Category),o.customProperties.setProperty("HostInstanceId",s.attributes.HostInstanceId),o.customProperties.setProperty("AzFuncLiveLogsSessionId",s.attributes["#AzFuncLiveLogsSessionId"])),r.functionCallback=mj.CorrelationContextManager.wrapCallback(r.functionCallback,o),n.isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(r.hookData.appInsightsExtractedContext=o,r.hookData.appInsightsStartTime=Date.now())))}catch(c){return oN.warn("Failed to propagate context in Azure Functions",c),[2]}return[2]})})}))},t.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(r){return Qme(e,void 0,void 0,function(){var n,i,o,s,a=this;return Xme(this,function(c){try{n=this._getFuncModelHelper(),n&&this._autoGenerateIncomingRequests&&n.isHttpTrigger(r)&&(i=r.inputs[0],i&&(o=r.hookData.appInsightsStartTime||Date.now(),s=r.hookData.appInsightsExtractedContext,s?mj.CorrelationContextManager.runWithContext(s,function(){a._createIncomingRequestTelemetry(i,r,o,s.operation.parentId)}):this._createIncomingRequestTelemetry(i,r,o,null)))}catch(u){oN.warn("Error creating automatic incoming request in Azure Functions",u)}return[2]})})}))},t.prototype._createIncomingRequestTelemetry=function(e,r,n,i){var o=this._getFuncModelHelper().getStatusCodes(r),s=200;if(o)for(var a=0,c=o;a<c.length;a++){var u=c[a];if(typeof u=="number"&&Number.isInteger(u)){s=u;break}else if(typeof u=="string"){var l=parseInt(u);if(!isNaN(l)){s=l;break}}}else s=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:s,success:typeof s=="number"?0<s&&s<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:i}),this._client.flush()},t.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},t}();rh.AzureFunctionsHook=Zqe;var eHe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=this._getInvocationContext(e),n,i=r.bindingDefinitions.find(function(o){return o.direction==="out"&&o.type.toLowerCase()==="http"});return i?.name==="$return"?n=e.result:i&&r.bindings&&r.bindings[i.name]!==void 0?n=r.bindings[i.name]:n=r.res,n?[n.statusCode,n.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return!!r.bindingDefinitions.find(function(n){var i;return((i=n.type)===null||i===void 0?void 0:i.toLowerCase())==="httptrigger"})},t}(),tHe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=e.result;return r?[r.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return r.options.trigger.type.toLowerCase()==="httptrigger"},t}()});var hj=P((JCt,the)=>{"use strict";var rHe=uv(),Zme=YH(),nHe=xn(),ehe=qn(),iHe=require("url"),oHe=XP(),sHe=function(){function t(e){this._endpointBase=ehe.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var r=this._connectionString,n=Zme.parse(e),i=Zme.parse(r),o=!n.instrumentationkey&&Object.keys(n).length>0?null:e,s=this._instrumentationKey;this.instrumentationKey=n.instrumentationkey||o||i.instrumentationkey||s;var a=""+(this.endpointUrl||n.ingestionendpoint||i.ingestionendpoint||this._endpointBase);a.endsWith("/")&&(a=a.slice(0,-1)),this.endpointUrl=a+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=n.ingestionendpoint||i.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||n.liveendpoint||i.liveendpoint||process.env[t.ENV_quickPulseHost]||ehe.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new iHe.URL(this.quickPulseHost).host),this.aadAudience=n.aadaudience||i.aadaudience}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=rHe.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(e){t._validateInstrumentationKey(e)||nHe.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),t.prototype._mergeConfig=function(){var e=oHe.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t}();the.exports=sHe});function sN(){return gj.create()}var rhe,gj,vj=I(()=>{rhe=new Set(["Deserialize","Serialize","Retry","Sign"]),gj=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!rhe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!rhe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,s)=>a=>s.sendRequest(a,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),o=n("None"),s=n("Deserialize"),a=n("Retry"),c=n("Sign"),u=[i,o,s,a,c];function l(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?s:m==="Sign"?c:o}for(let m of this._policies){let h=m.policy,g=m.options,v=h.name;if(r.has(v))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:h,dependsOn:new Set,dependants:new Set};g.afterPhase&&(b.afterPhase=l(g.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(v,b),l(g.phase).policies.add(b)}for(let m of this._policies){let{policy:h,options:g}=m,v=h.name,b=r.get(v);if(!b)throw new Error(`Missing node for policy ${v}`);if(g.afterPolicies)for(let y of g.afterPolicies){let S=r.get(y);S&&(b.dependsOn.add(S),S.dependants.add(b))}if(g.beforePolicies)for(let y of g.beforePolicies){let S=r.get(y);S&&(S.dependsOn.add(b),b.dependants.add(S))}}function d(m){m.hasRun=!0;for(let h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){e.push(h.policy);for(let g of h.dependants)g.dependsOn.delete(h);r.delete(h.policy.name),m.policies.delete(h)}}function p(){for(let m of u){if(d(m),m.policies.size>0&&m!==o){o.hasRun||d(o);return}m.hasAfterPolicies&&d(o)}}let f=0;for(;r.size>0;){f++;let m=e.length;if(p(),e.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}});function ohe(t,...e){process.stderr.write(`${ihe.default.format(t,...e)}${nhe.EOL}`)}var nhe,ihe,she=I(()=>{nhe=require("os"),ihe=W(require("util"))});function _j(t){che=t,yj=[],bj=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?bj.push(new RegExp(`^${n.substr(1)}$`)):yj.push(new RegExp(`^${n}$`));for(let n of aN)n.enabled=xj(n.namespace)}function xj(t){if(t.endsWith("*"))return!0;for(let e of bj)if(e.test(t))return!1;for(let e of yj)if(e.test(t))return!0;return!1}function aHe(){let t=che||"";return _j(""),t}function lhe(t){let e=Object.assign(r,{enabled:xj(t),destroy:cHe,log:uhe.log,namespace:t,extend:uHe});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return aN.push(e),e}function cHe(){let t=aN.indexOf(this);return t>=0?(aN.splice(t,1),!0):!1}function uHe(t){let e=lhe(`${this.namespace}:${t}`);return e.log=this.log,e}var ahe,che,yj,bj,aN,uhe,fx,dhe=I(()=>{she();ahe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,yj=[],bj=[],aN=[];ahe&&_j(ahe);uhe=Object.assign(t=>lhe(t),{enable:_j,enabled:xj,disable:aHe,log:ohe});fx=uhe});function lHe(t){if(t&&!ghe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${Tj.join(",")}`);Sj=t;let e=[];for(let r of fhe)hhe(r)&&e.push(r.namespace);fx.enable(e.join(","))}function lN(t){let e=Ej.extend(t);return mhe(Ej,e),{error:uN(e,"error"),warning:uN(e,"warning"),info:uN(e,"info"),verbose:uN(e,"verbose")}}function mhe(t,e){e.log=(...r)=>{t.log(...r)}}function uN(t,e){let r=Object.assign(t.extend(e),{level:e});if(mhe(t,r),hhe(r)){let n=fx.disable();fx.enable(n+","+r.namespace)}return fhe.add(r),r}function hhe(t){return!!(Sj&&phe[t.level]<=phe[Sj])}function ghe(t){return Tj.includes(t)}var fhe,cN,Sj,Ej,Tj,phe,Ij=I(()=>{dhe();fhe=new Set,cN=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,Ej=fx("azure");Ej.log=(...t)=>{fx.log(...t)};Tj=["verbose","info","warning","error"];cN&&(ghe(cN)?lHe(cN):console.error(`AZURE_LOG_LEVEL set to unknown log level '${cN}'; logging is not enabled. Acceptable values: ${Tj.join(", ")}.`));phe={verbose:400,info:300,warning:200,error:100}});var zo,mx=I(()=>{Ij();zo=lN("core-rest-pipeline")});var Cj,dN,vhe=I(()=>{dN=typeof process<"u"&&!!process.version&&!!(!((Cj=process.versions)===null||Cj===void 0)&&Cj.node)});function wj(t){if(t.aborted)return;t.onabort&&t.onabort.call(t);let e=hx.get(t);e&&e.slice().forEach(r=>{r.call(t,{type:"abort"})}),pN.set(t,!0)}var hx,pN,eC,yhe=I(()=>{hx=new WeakMap,pN=new WeakMap,eC=class t{constructor(){this.onabort=null,hx.set(this,[]),pN.set(this,!1)}get aborted(){if(!pN.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return pN.get(this)}static get none(){return new t}addEventListener(e,r){if(!hx.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");hx.get(this).push(r)}removeEventListener(e,r){if(!hx.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let n=hx.get(this),i=n.indexOf(r);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}});var td,tC,bhe=I(()=>{yhe();td=class extends Error{constructor(e){super(e),this.name="AbortError"}},tC=class{constructor(e){if(this._signal=new eC,!!e){Array.isArray(e)||(e=arguments);for(let r of e)r.aborted?this.abort():r.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){wj(this._signal)}static timeout(e){let r=new eC,n=setTimeout(wj,e,r);return typeof n.unref=="function"&&n.unref(),r}}});var fN=I(()=>{bhe()});function Rj(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var _he=I(()=>{});function rC(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}var Aj=I(()=>{});function gx(t){if(rC(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}function vx(t){if(gx(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}var xhe=I(()=>{Aj()});var yx=I(()=>{vhe();_he();Aj();xhe()});var Pj,dHe,pHe,bx,kj=I(()=>{yx();Pj="REDACTED",dHe=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],pHe=["api-version"],bx=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=dHe.concat(e),r=pHe.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||rC(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=Pj;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=Pj;return r}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,Pj);return r.toString()}}});function mN(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:zo.info,n=new bx({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Dj,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let s=await o(i);return r(`Response status code: ${s.status}`),r(`Headers: ${n.sanitize(s.headers)}`),s}}}var Dj,Nj=I(()=>{mx();kj();Dj="logPolicy"});function hN(t={}){let{maxRetries:e=20}=t;return{name:Lj,async sendRequest(r,n){let i=await n(r);return Ehe(n,i,e)}}}async function Ehe(t,e,r,n=0){let{request:i,status:o,headers:s}=e,a=s.get("location");if(a&&(o===300||o===301&&She.includes(i.method)||o===302&&She.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let c=new URL(a,i.url);i.url=c.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return Ehe(t,u,r,n+1)}return e}var Lj,She,Oj=I(()=>{Lj="redirectPolicy",She=["GET","HEAD"]});function The(){return"User-Agent"}function Ihe(t){t.set("Node",process.version),t.set("OS",`(${_x.arch()}-${_x.type()}-${_x.release()})`)}var _x,Che=I(()=>{_x=W(require("os"))});var gN,Mj=I(()=>{gN="1.10.1"});function fHe(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}function whe(){return The()}function vN(t){let e=new Map;e.set("core-rest-pipeline",gN),Ihe(e);let r=fHe(e);return t?`${t} ${r}`:r}var Fj=I(()=>{Che();Mj()});function yN(t={}){let e=vN(t.userAgentPrefix);return{name:Uj,async sendRequest(r,n){return r.headers.has(Rhe)||r.headers.set(Rhe,e),n(r)}}}var Rhe,Uj,Bj=I(()=>{Fj();Rhe=whe(),Uj="userAgentPolicy"});function bN(){return{name:qj,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}var qj,Hj=I(()=>{qj="decompressResponsePolicy"});function _N(t,e,r){return new Promise((n,i)=>{let o,s,a=()=>i(new td(r?.abortErrorMsg?r?.abortErrorMsg:mHe)),c=()=>{r?.abortSignal&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),c(),a()),r?.abortSignal&&r.abortSignal.aborted)return a();o=setTimeout(()=>{c(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",s)})}function Ahe(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}var mHe,xN=I(()=>{fN();mHe="The operation was aborted."});function Phe(t){if(t&&[429,503].includes(t.status))try{for(let i of hHe){let o=Ahe(t,i);if(o===0||o)return o*(i===jj?1e3:1)}let e=t.headers.get(jj);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function khe(t){return Number.isFinite(Phe(t))}function SN(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=Phe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var jj,hHe,EN=I(()=>{xN();jj="Retry-After",hHe=["retry-after-ms","x-ms-retry-after-ms",jj]});function xx(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:gHe,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:vHe,o=n;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:a,responseError:c}){let u=bHe(c),l=u&&t.ignoreSystemErrors,d=yHe(a),p=d&&t.ignoreHttpStatusCodes;if(a&&(khe(a)||!d)||p||l)return{skipStrategy:!0};if(c&&!u&&!d)return{errorToThrow:c};let m=o*Math.pow(2,s),h=Math.min(i,m);return o=h/2+Rj(0,h/2),{retryAfterInMs:o}}}}function yHe(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function bHe(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT":!1}var gHe,vHe,TN=I(()=>{yx();EN();gHe=1e3,vHe=1e3*64});function rd(t,e={maxRetries:3}){let r=e.logger||Dhe;return{name:_He,async sendRequest(n,i){var o,s;let a,c,u=-1;e:for(;;){u+=1,a=void 0,c=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),a=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(l){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),c=l,!l||c.name!=="RestError")throw l;a=c.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new td;if(u>=((s=e.maxRetries)!==null&&s!==void 0?s:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let l of t){let d=l.logger||Dhe;d.info(`Retry ${u}: Processing retry strategy ${l.name}.`);let p=l.retry({retryCount:u,response:a,responseError:c});if(p.skipStrategy){d.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:h}=p;if(f)throw d.error(`Retry ${u}: Retry strategy ${l.name} throws error:`,f),f;if(m||m===0){d.info(`Retry ${u}: Retry strategy ${l.name} retries after ${m}`),await _N(m,void 0,{abortSignal:n.abortSignal});continue e}if(h){d.info(`Retry ${u}: Retry strategy ${l.name} redirects to ${h}`),n.url=h;continue e}}if(c)throw r.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return r.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var Dhe,_He,Sx=I(()=>{xN();Ij();fN();Dhe=lN("core-rest-pipeline retryPolicy"),_He="retryPolicy"});function IN(t={}){var e;return{name:xHe,sendRequest:rd([SN(),xx(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var xHe,Gj=I(()=>{TN();EN();Sx();xHe="defaultRetryPolicy"});var Ohe=P((Xwt,Lhe)=>{var Nhe=require("stream").Stream,SHe=require("util");Lhe.exports=ju;function ju(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}SHe.inherits(ju,Nhe);ju.create=function(t,e){var r=new this;e=e||{};for(var n in e)r[n]=e[n];r.source=t;var i=t.emit;return t.emit=function(){return r._handleEmit(arguments),i.apply(t,arguments)},t.on("error",function(){}),r.pauseStream&&t.pause(),r};Object.defineProperty(ju.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});ju.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};ju.prototype.resume=function(){this._released||this.release(),this.source.resume()};ju.prototype.pause=function(){this.source.pause()};ju.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]};ju.prototype.pipe=function(){var t=Nhe.prototype.pipe.apply(this,arguments);return this.resume(),t};ju.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}t[0]==="data"&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(t)};ju.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}}});var Bhe=P((Jwt,Uhe)=>{var EHe=require("util"),Fhe=require("stream").Stream,Mhe=Ohe();Uhe.exports=ii;function ii(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}EHe.inherits(ii,Fhe);ii.create=function(t){var e=new this;t=t||{};for(var r in t)e[r]=t[r];return e};ii.isStreamLike=function(t){return typeof t!="function"&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"&&!Buffer.isBuffer(t)};ii.prototype.append=function(t){var e=ii.isStreamLike(t);if(e){if(!(t instanceof Mhe)){var r=Mhe.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=r}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this};ii.prototype.pipe=function(t,e){return Fhe.prototype.pipe.call(this,t,e),this.resume(),t};ii.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};ii.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t>"u"){this.end();return}if(typeof t!="function"){this._pipeNext(t);return}var e=t;e(function(r){var n=ii.isStreamLike(r);n&&(r.on("data",this._checkDataSize.bind(this)),this._handleErrors(r)),this._pipeNext(r)}.bind(this))};ii.prototype._pipeNext=function(t){this._currentStream=t;var e=ii.isStreamLike(t);if(e){t.on("end",this._getNext.bind(this)),t.pipe(this,{end:!1});return}var r=t;this.write(r),this._getNext()};ii.prototype._handleErrors=function(t){var e=this;t.on("error",function(r){e._emitError(r)})};ii.prototype.write=function(t){this.emit("data",t)};ii.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};ii.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};ii.prototype.end=function(){this._reset(),this.emit("end")};ii.prototype.destroy=function(){this._reset(),this.emit("close")};ii.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};ii.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}};ii.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};ii.prototype._emitError=function(t){this._reset(),this.emit("error",t)}});var qhe=P((Zwt,THe)=>{THe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var jhe=P((e2t,Hhe)=>{Hhe.exports=qhe()});var zhe=P(Ia=>{"use strict";var CN=jhe(),IHe=require("path").extname,Ghe=/^\s*([^;\s]*)(?:;|\s|$)/,CHe=/^text\//i;Ia.charset=Vhe;Ia.charsets={lookup:Vhe};Ia.contentType=wHe;Ia.extension=RHe;Ia.extensions=Object.create(null);Ia.lookup=AHe;Ia.types=Object.create(null);PHe(Ia.extensions,Ia.types);function Vhe(t){if(!t||typeof t!="string")return!1;var e=Ghe.exec(t),r=e&&CN[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&CHe.test(e[1])?"UTF-8":!1}function wHe(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?Ia.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=Ia.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function RHe(t){if(!t||typeof t!="string")return!1;var e=Ghe.exec(t),r=e&&Ia.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function AHe(t){if(!t||typeof t!="string")return!1;var e=IHe("x."+t).toLowerCase().substr(1);return e&&Ia.types[e]||!1}function PHe(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(CN).forEach(function(i){var o=CN[i],s=o.extensions;if(!(!s||!s.length)){t[i]=s;for(var a=0;a<s.length;a++){var c=s[a];if(e[c]){var u=r.indexOf(CN[e[c]].source),l=r.indexOf(o.source);if(e[c]!=="application/octet-stream"&&(u>l||u===l&&e[c].substr(0,12)==="application/"))continue}e[c]=i}}})}});var Whe=P((r2t,$he)=>{$he.exports=kHe;function kHe(t){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(t):setTimeout(t,0)}});var Vj=P((n2t,Yhe)=>{var Khe=Whe();Yhe.exports=DHe;function DHe(t){var e=!1;return Khe(function(){e=!0}),function(n,i){e?t(n,i):Khe(function(){t(n,i)})}}});var zj=P((i2t,Qhe)=>{Qhe.exports=NHe;function NHe(t){Object.keys(t.jobs).forEach(LHe.bind(t)),t.jobs={}}function LHe(t){typeof this.jobs[t]=="function"&&this.jobs[t]()}});var $j=P((o2t,Jhe)=>{var Xhe=Vj(),OHe=zj();Jhe.exports=MHe;function MHe(t,e,r,n){var i=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[i]=FHe(e,i,t[i],function(o,s){i in r.jobs&&(delete r.jobs[i],o?OHe(r):r.results[i]=s,n(o,r.results))})}function FHe(t,e,r,n){var i;return t.length==2?i=t(r,Xhe(n)):i=t(r,e,Xhe(n)),i}});var Wj=P((s2t,Zhe)=>{Zhe.exports=UHe;function UHe(t,e){var r=!Array.isArray(t),n={index:0,keyedList:r||e?Object.keys(t):null,jobs:{},results:r?{}:[],size:r?Object.keys(t).length:t.length};return e&&n.keyedList.sort(r?e:function(i,o){return e(t[i],t[o])}),n}});var Kj=P((a2t,ege)=>{var BHe=zj(),qHe=Vj();ege.exports=HHe;function HHe(t){Object.keys(this.jobs).length&&(this.index=this.size,BHe(this),qHe(t)(null,this.results))}});var rge=P((c2t,tge)=>{var jHe=$j(),GHe=Wj(),VHe=Kj();tge.exports=zHe;function zHe(t,e,r){for(var n=GHe(t);n.index<(n.keyedList||t).length;)jHe(t,e,n,function(i,o){if(i){r(i,o);return}if(Object.keys(n.jobs).length===0){r(null,n.results);return}}),n.index++;return VHe.bind(n,r)}});var Yj=P((u2t,wN)=>{var nge=$j(),$He=Wj(),WHe=Kj();wN.exports=KHe;wN.exports.ascending=ige;wN.exports.descending=YHe;function KHe(t,e,r,n){var i=$He(t,r);return nge(t,e,i,function o(s,a){if(s){n(s,a);return}if(i.index++,i.index<(i.keyedList||t).length){nge(t,e,i,o);return}n(null,i.results)}),WHe.bind(i,n)}function ige(t,e){return t<e?-1:t>e?1:0}function YHe(t,e){return-1*ige(t,e)}});var sge=P((l2t,oge)=>{var QHe=Yj();oge.exports=XHe;function XHe(t,e,r){return QHe(t,e,null,r)}});var cge=P((d2t,age)=>{age.exports={parallel:rge(),serial:sge(),serialOrdered:Yj()}});var lge=P((p2t,uge)=>{uge.exports=function(t,e){return Object.keys(e).forEach(function(r){t[r]=t[r]||e[r]}),t}});var fge=P((f2t,pge)=>{var Zj=Bhe(),dge=require("util"),Qj=require("path"),JHe=require("http"),ZHe=require("https"),eje=require("url").parse,tje=require("fs"),rje=require("stream").Stream,Xj=zhe(),nje=cge(),Jj=lge();pge.exports=Cr;dge.inherits(Cr,Zj);function Cr(t){if(!(this instanceof Cr))return new Cr(t);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],Zj.call(this),t=t||{};for(var e in t)this[e]=t[e]}Cr.LINE_BREAK=`\r
`;Cr.DEFAULT_CONTENT_TYPE="application/octet-stream";Cr.prototype.append=function(t,e,r){r=r||{},typeof r=="string"&&(r={filename:r});var n=Zj.prototype.append.bind(this);if(typeof e=="number"&&(e=""+e),dge.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(t,e,r),o=this._multiPartFooter();n(i),n(e),n(o),this._trackLength(i,e,r)};Cr.prototype._trackLength=function(t,e,r){var n=0;r.knownLength!=null?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+Cr.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&e.hasOwnProperty("httpVersion"))&&!(e instanceof rje))&&(r.knownLength||this._valuesToMeasure.push(e))};Cr.prototype._lengthRetriever=function(t,e){t.hasOwnProperty("fd")?t.end!=null&&t.end!=1/0&&t.start!=null?e(null,t.end+1-(t.start?t.start:0)):tje.stat(t.path,function(r,n){var i;if(r){e(r);return}i=n.size-(t.start?t.start:0),e(null,i)}):t.hasOwnProperty("httpVersion")?e(null,+t.headers["content-length"]):t.hasOwnProperty("httpModule")?(t.on("response",function(r){t.pause(),e(null,+r.headers["content-length"])}),t.resume()):e("Unknown stream")};Cr.prototype._multiPartHeader=function(t,e,r){if(typeof r.header=="string")return r.header;var n=this._getContentDisposition(e,r),i=this._getContentType(e,r),o="",s={"Content-Disposition":["form-data",'name="'+t+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof r.header=="object"&&Jj(s,r.header);var a;for(var c in s)s.hasOwnProperty(c)&&(a=s[c],a!=null&&(Array.isArray(a)||(a=[a]),a.length&&(o+=c+": "+a.join("; ")+Cr.LINE_BREAK)));return"--"+this.getBoundary()+Cr.LINE_BREAK+o+Cr.LINE_BREAK};Cr.prototype._getContentDisposition=function(t,e){var r,n;return typeof e.filepath=="string"?r=Qj.normalize(e.filepath).replace(/\\/g,"/"):e.filename||t.name||t.path?r=Qj.basename(e.filename||t.name||t.path):t.readable&&t.hasOwnProperty("httpVersion")&&(r=Qj.basename(t.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n};Cr.prototype._getContentType=function(t,e){var r=e.contentType;return!r&&t.name&&(r=Xj.lookup(t.name)),!r&&t.path&&(r=Xj.lookup(t.path)),!r&&t.readable&&t.hasOwnProperty("httpVersion")&&(r=t.headers["content-type"]),!r&&(e.filepath||e.filename)&&(r=Xj.lookup(e.filepath||e.filename)),!r&&typeof t=="object"&&(r=Cr.DEFAULT_CONTENT_TYPE),r};Cr.prototype._multiPartFooter=function(){return function(t){var e=Cr.LINE_BREAK,r=this._streams.length===0;r&&(e+=this._lastBoundary()),t(e)}.bind(this)};Cr.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+Cr.LINE_BREAK};Cr.prototype.getHeaders=function(t){var e,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in t)t.hasOwnProperty(e)&&(r[e.toLowerCase()]=t[e]);return r};Cr.prototype.setBoundary=function(t){this._boundary=t};Cr.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};Cr.prototype.getBuffer=function(){for(var t=new Buffer.alloc(0),e=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)typeof this._streams[r]!="function"&&(Buffer.isBuffer(this._streams[r])?t=Buffer.concat([t,this._streams[r]]):t=Buffer.concat([t,Buffer.from(this._streams[r])]),(typeof this._streams[r]!="string"||this._streams[r].substring(2,e.length+2)!==e)&&(t=Buffer.concat([t,Buffer.from(Cr.LINE_BREAK)])));return Buffer.concat([t,Buffer.from(this._lastBoundary())])};Cr.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;e<24;e++)t+=Math.floor(Math.random()*10).toString(16);this._boundary=t};Cr.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;return this._streams.length&&(t+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),t};Cr.prototype.hasKnownLength=function(){var t=!0;return this._valuesToMeasure.length&&(t=!1),t};Cr.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,e));return}nje.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){if(r){t(r);return}n.forEach(function(i){e+=i}),t(null,e)})};Cr.prototype.submit=function(t,e){var r,n,i={method:"post"};return typeof t=="string"?(t=eje(t),n=Jj({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},i)):(n=Jj(t,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(t.headers),n.protocol=="https:"?r=ZHe.request(n):r=JHe.request(n),this.getLength(function(o,s){if(o&&o!=="Unknown stream"){this._error(o);return}if(s&&r.setHeader("Content-Length",s),this.pipe(r),e){var a,c=function(u,l){return r.removeListener("error",c),r.removeListener("response",a),e.call(this,u,l)};a=c.bind(this,null),r.on("error",c),r.on("response",a)}}.bind(this)),r};Cr.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};Cr.prototype.toString=function(){return"[object FormData]"}});function RN(){return{name:eG,async sendRequest(t,e){if(t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?(t.body=ije(t.formData),t.formData=void 0):await oje(t.formData,t)}return e(t)}}}function ije(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}async function oje(t,e){let r=new mge.default;for(let i of Object.keys(t)){let o=t[i];if(Array.isArray(o))for(let s of o)r.append(i,s);else r.append(i,o)}e.body=r,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${r.getBoundary()}`);try{let i=await new Promise((o,s)=>{r.getLength((a,c)=>{a?s(a):o(c)})});e.headers.set("Content-Length",i)}catch{}}var mge,eG,tG=I(()=>{mge=W(fge()),eG="formDataPolicy"});var gge=P((h2t,hge)=>{var Ex=1e3,Tx=Ex*60,Ix=Tx*60,Cv=Ix*24,sje=Cv*7,aje=Cv*365.25;hge.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return cje(t);if(r==="number"&&isFinite(t))return e.long?lje(t):uje(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function cje(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*aje;case"weeks":case"week":case"w":return r*sje;case"days":case"day":case"d":return r*Cv;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ix;case"minutes":case"minute":case"mins":case"min":case"m":return r*Tx;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ex;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function uje(t){var e=Math.abs(t);return e>=Cv?Math.round(t/Cv)+"d":e>=Ix?Math.round(t/Ix)+"h":e>=Tx?Math.round(t/Tx)+"m":e>=Ex?Math.round(t/Ex)+"s":t+"ms"}function lje(t){var e=Math.abs(t);return e>=Cv?AN(t,e,Cv,"day"):e>=Ix?AN(t,e,Ix,"hour"):e>=Tx?AN(t,e,Tx,"minute"):e>=Ex?AN(t,e,Ex,"second"):t+" ms"}function AN(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var rG=P((g2t,vge)=>{function dje(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=gge(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,m;function h(...g){if(!h.enabled)return;let v=h,b=Number(new Date),y=b-(d||b);v.diff=y,v.prev=d,v.curr=b,d=b,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let S=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(T,L)=>{if(T==="%%")return"%";S++;let M=r.formatters[L];if(typeof M=="function"){let q=g[S];T=M.call(v,q),g.splice(S,1),S--}return T}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return h.namespace=l,h.useColors=r.useColors(),h.color=r.selectColor(l),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,m=r.enabled(l)),m),set:g=>{p=g}}),typeof r.init=="function"&&r.init(h),h}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(l))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}vge.exports=dje});var yge=P((oc,PN)=>{oc.formatArgs=fje;oc.save=mje;oc.load=hje;oc.useColors=pje;oc.storage=gje();oc.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();oc.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function pje(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fje(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+PN.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}oc.log=console.debug||console.log||(()=>{});function mje(t){try{t?oc.storage.setItem("debug",t):oc.storage.removeItem("debug")}catch{}}function hje(){let t;try{t=oc.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function gje(){try{return localStorage}catch{}}PN.exports=rG()(oc);var{formatters:vje}=PN.exports;vje.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var _ge=P((v2t,bge)=>{"use strict";bge.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Ege=P((y2t,Sge)=>{"use strict";var yje=require("os"),xge=require("tty"),jc=_ge(),{env:bo}=process,nh;jc("no-color")||jc("no-colors")||jc("color=false")||jc("color=never")?nh=0:(jc("color")||jc("colors")||jc("color=true")||jc("color=always"))&&(nh=1);"FORCE_COLOR"in bo&&(bo.FORCE_COLOR==="true"?nh=1:bo.FORCE_COLOR==="false"?nh=0:nh=bo.FORCE_COLOR.length===0?1:Math.min(parseInt(bo.FORCE_COLOR,10),3));function nG(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function iG(t,e){if(nh===0)return 0;if(jc("color=16m")||jc("color=full")||jc("color=truecolor"))return 3;if(jc("color=256"))return 2;if(t&&!e&&nh===void 0)return 0;let r=nh||0;if(bo.TERM==="dumb")return r;if(process.platform==="win32"){let n=yje.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in bo)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in bo)||bo.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in bo)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(bo.TEAMCITY_VERSION)?1:0;if(bo.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in bo){let n=parseInt((bo.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(bo.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(bo.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(bo.TERM)||"COLORTERM"in bo?1:r}function bje(t){let e=iG(t,t&&t.isTTY);return nG(e)}Sge.exports={supportsColor:bje,stdout:nG(iG(!0,xge.isatty(1))),stderr:nG(iG(!0,xge.isatty(2)))}});var Ige=P(($o,DN)=>{var _je=require("tty"),kN=require("util");$o.init=wje;$o.log=Tje;$o.formatArgs=Sje;$o.save=Ije;$o.load=Cje;$o.useColors=xje;$o.destroy=kN.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");$o.colors=[6,2,3,4,5,1];try{let t=Ege();t&&(t.stderr||t).level>=2&&($o.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}$o.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function xje(){return"colors"in $o.inspectOpts?!!$o.inspectOpts.colors:_je.isatty(process.stderr.fd)}function Sje(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+DN.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Eje()+e+" "+t[0]}function Eje(){return $o.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Tje(...t){return process.stderr.write(kN.format(...t)+`
`)}function Ije(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Cje(){return process.env.DEBUG}function wje(t){t.inspectOpts={};let e=Object.keys($o.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=$o.inspectOpts[e[r]]}DN.exports=rG()($o);var{formatters:Tge}=DN.exports;Tge.o=function(t){return this.inspectOpts.colors=this.useColors,kN.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Tge.O=function(t){return this.inspectOpts.colors=this.useColors,kN.inspect(t,this.inspectOpts)}});var Gu=P((b2t,oG)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?oG.exports=yge():oG.exports=Ige()});var Cge=P(sG=>{"use strict";Object.defineProperty(sG,"__esModule",{value:!0});function Rje(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(o,s)=>{o?i(o):n(s)})})}}sG.default=Rje});var uG=P((cG,Rge)=>{"use strict";var wge=cG&&cG.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Aje=require("events"),Pje=wge(Gu()),kje=wge(Cge()),iC=Pje.default("agent-base");function Dje(t){return!!t&&typeof t.addRequest=="function"}function aG(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function NN(t,e){return new NN.Agent(t,e)}(function(t){class e extends Aje.EventEmitter{constructor(n,i){super();let o=i;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:aG()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:aG()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=aG()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,a=null,c=o.timeout||this.timeout,u=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${c}ms`);f.code="ETIMEOUT",u(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),u(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),Dje(f)){iC("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),n.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);u(m)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(iC("Converting legacy callback function to promise"),this.promisifiedCallback=kje.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(l,c)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{iC("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){iC("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){iC("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(NN||(NN={}));Rge.exports=NN});var Age=P(sC=>{"use strict";var Nje=sC&&sC.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sC,"__esModule",{value:!0});var Lje=Nje(Gu()),oC=Lje.default("https-proxy-agent:parse-proxy-response");function Oje(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let d=t.read();d?l(d):t.once("readable",o)}function s(){t.removeListener("end",c),t.removeListener("error",u),t.removeListener("close",a),t.removeListener("readable",o)}function a(d){oC("onclose had error %o",d)}function c(){oC("onend")}function u(d){s(),oC("onerror %o",d),r(d)}function l(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){oC("have not received end of HTTP headers yet..."),o();return}let m=p.toString("ascii",0,p.indexOf(`\r
`)),h=+m.split(" ")[1];oC("got proxy server response: %o",m),e({statusCode:h,buffered:p})}t.on("error",u),t.on("close",a),t.on("end",c),o()})}sC.default=Oje});var Dge=P(wv=>{"use strict";var Mje=wv&&wv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Cx=wv&&wv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wv,"__esModule",{value:!0});var Pge=Cx(require("net")),kge=Cx(require("tls")),Fje=Cx(require("url")),Uje=Cx(require("assert")),Bje=Cx(Gu()),qje=uG(),Hje=Cx(Age()),aC=Bje.default("https-proxy-agent:agent"),lG=class extends qje.Agent{constructor(e){let r;if(typeof e=="string"?r=Fje.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");aC("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||Vje(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return Mje(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o;i?(aC("Creating `tls.Socket`: %o",n),o=kge.default.connect(n)):(aC("Creating `net.Socket`: %o",n),o=Pge.default.connect(n));let s=Object.assign({},n.headers),c=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:u,port:l,secureEndpoint:d}=r;Gje(l,d)||(u+=`:${l}`),s.Host=u,s.Connection="close";for(let g of Object.keys(s))c+=`${g}: ${s[g]}\r
`;let p=Hje.default(o);o.write(`${c}\r
`);let{statusCode:f,buffered:m}=yield p;if(f===200){if(e.once("socket",jje),r.secureEndpoint){aC("Upgrading socket connection to TLS");let g=r.servername||r.host;return kge.default.connect(Object.assign(Object.assign({},zje(r,"host","hostname","path","port")),{socket:o,servername:g}))}return o}o.destroy();let h=new Pge.default.Socket({writable:!1});return h.readable=!0,e.once("socket",g=>{aC("replaying proxy buffer for failed request"),Uje.default(g.listenerCount("data")>0),g.push(m),g.push(null)}),h})}};wv.default=lG;function jje(t){t.resume()}function Gje(t,e){return!!(!e&&t===80||e&&t===443)}function Vje(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function zje(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var Lge=P((fG,Nge)=>{"use strict";var $je=fG&&fG.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},dG=$je(Dge());function pG(t){return new dG.default(t)}(function(t){t.HttpsProxyAgent=dG.default,t.prototype=dG.default.prototype})(pG||(pG={}));Nge.exports=pG});var Oge=P(mG=>{"use strict";Object.defineProperty(mG,"__esModule",{value:!0});function Wje(t,e,{signal:r}={}){return new Promise((n,i)=>{function o(){r?.removeEventListener("abort",o),t.removeListener(e,s),t.removeListener("error",a)}function s(...c){o(),n(c)}function a(c){o(),i(c)}r?.addEventListener("abort",o),t.on(e,s),t.on("error",a)})}mG.default=Wje});var Mge=P(Rv=>{"use strict";var Kje=Rv&&Rv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},cC=Rv&&Rv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rv,"__esModule",{value:!0});var Yje=cC(require("net")),Qje=cC(require("tls")),hG=cC(require("url")),Xje=cC(Gu()),Jje=cC(Oge()),Zje=uG(),ih=(0,Xje.default)("http-proxy-agent");function eGe(t){return typeof t=="string"?/^https:?$/i.test(t):!1}var gG=class extends Zje.Agent{constructor(e){let r;if(typeof e=="string"?r=hG.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");ih("Creating new HttpProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||eGe(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return Kje(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o=hG.default.parse(e.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=r.hostname||r.host||null),o.port==null&&typeof r.port&&(o.port=String(r.port)),o.port==="80"&&(o.port=""),e.path=hG.default.format(o),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let s;if(i?(ih("Creating `tls.Socket`: %o",n),s=Qje.default.connect(n)):(ih("Creating `net.Socket`: %o",n),s=Yje.default.connect(n)),e._header){let a,c;ih("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(ih("Patching connection write() output buffer with updated header"),a=e.output[0],c=a.indexOf(`\r
\r
`)+4,e.output[0]=e._header+a.substring(c),ih("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(ih("Patching connection write() output buffer with updated header"),a=e.outputData[0].data,c=a.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+a.substring(c),ih("Output buffer: %o",e.outputData[0].data))}return yield(0,Jje.default)(s,"connect"),s})}};Rv.default=gG});var Uge=P((bG,Fge)=>{"use strict";var tGe=bG&&bG.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},vG=tGe(Mge());function yG(t){return new vG.default(t)}(function(t){t.HttpProxyAgent=vG.default,t.prototype=vG.default.prototype})(yG||(yG={}));Fge.exports=yG});function LN(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function aGe(){if(!process)return;let t=LN(rGe),e=LN(iGe),r=LN(nGe);return t||e||r}function cGe(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}function uGe(){let t=LN(oGe);return Gge=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function xG(t){if(!t&&(t=aGe(),!t))return;let e=new URL(t);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function qge(t,{headers:e,tlsSettings:r}){let n;try{n=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}r&&zo.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:n.hostname,port:t.port,protocol:n.protocol,headers:e.toJSON()};return t.username&&t.password?i.auth=`${t.username}:${t.password}`:t.username&&(i.auth=`${t.username}`),i}function lGe(t,e){if(t.agent)return;let n=new URL(t.url).protocol!=="https:",i=t.proxySettings;if(i)if(n){if(!e.httpProxyAgent){let o=qge(i,t);e.httpProxyAgent=new jge.HttpProxyAgent(o)}t.agent=e.httpProxyAgent}else{if(!e.httpsProxyAgent){let o=qge(i,t);e.httpsProxyAgent=new Hge.HttpsProxyAgent(o)}t.agent=e.httpsProxyAgent}}function ON(t=xG(),e){Gge||Bge.push(...uGe());let r={};return{name:_G,async sendRequest(n,i){var o;return!n.proxySettings&&!cGe(n.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:Bge,e?.customNoProxyList?void 0:sGe)&&(n.proxySettings=t),n.proxySettings&&lGe(n,r),i(n)}}}var Hge,jge,rGe,nGe,iGe,oGe,_G,Bge,Gge,sGe,SG=I(()=>{Hge=W(Lge()),jge=W(Uge());mx();rGe="HTTPS_PROXY",nGe="HTTP_PROXY",iGe="ALL_PROXY",oGe="NO_PROXY",_G="proxyPolicy",Bge=[],Gge=!1,sGe=new Map});function MN(t="x-ms-client-request-id"){return{name:EG,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}var EG,TG=I(()=>{EG="setClientRequestIdPolicy"});function FN(t){return{name:IG,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}var IG,CG=I(()=>{IG="tlsPolicy"});function Vge(t={}){let e=new wG(t.parentContext);return t.span&&(e=e.setValue(wx.span,t.span)),t.namespace&&(e=e.setValue(wx.namespace,t.namespace)),e}var wx,wG,RG=I(()=>{wx={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};wG=class t{constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}}});function dGe(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function pGe(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:dGe(),tracingContext:Vge({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function uC(){return AG||(AG=pGe()),AG}var AG,zge=I(()=>{RG()});function PG(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,l,d){var p;let f=uC().startSpan(u,Object.assign(Object.assign({},d),{packageName:r,packageVersion:n,tracingContext:(p=l?.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),m=f.tracingContext,h=f.span;m.getValue(wx.namespace)||(m=m.setValue(wx.namespace,e)),h.setAttribute("az.namespace",m.getValue(wx.namespace));let g=Object.assign({},l,{tracingOptions:Object.assign(Object.assign({},l?.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:g}}async function o(u,l,d,p){let{span:f,updatedOptions:m}=i(u,l,p);try{let h=await s(m.tracingOptions.tracingContext,()=>Promise.resolve(d(m,f)));return f.setStatus({status:"success"}),h}catch(h){throw f.setStatus({status:"error",error:h}),h}finally{f.end()}}function s(u,l,...d){return uC().withContext(u,l,...d)}function a(u){return uC().parseTraceparentHeader(u)}function c(u){return uC().createRequestHeaders(u)}return{startSpan:i,withSpan:o,withContext:s,parseTraceparentHeader:a,createRequestHeaders:c}}var $ge=I(()=>{zge();RG()});var Wge=I(()=>{$ge()});var Kge,Yge,Qge=I(()=>{Kge=require("util"),Yge=Kge.inspect.custom});function UN(t){return t instanceof sc?!0:gx(t)&&t.name==="RestError"}var fGe,sc,BN=I(()=>{yx();Qge();kj();fGe=new bx,sc=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,this.request=r.request,this.response=r.response,Object.setPrototypeOf(this,t.prototype)}[Yge](){return`RestError: ${this.message} 
 ${fGe.sanitize(this)}`}};sc.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";sc.PARSE_ERROR="PARSE_ERROR"});function qN(t={}){let e=vN(t.userAgentPrefix),r=mGe();return{name:kG,async sendRequest(n,i){var o,s;if(!r||!(!((o=n.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(n);let{span:a,tracingContext:c}=(s=hGe(r,n,e))!==null&&s!==void 0?s:{};if(!a||!c)return i(n);try{let u=await r.withContext(c,i,n);return vGe(a,u),u}catch(u){throw gGe(a,u),u}}}}function mGe(){try{return PG({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:gN})}catch(t){zo.warning(`Error when creating the TracingClient: ${vx(t)}`);return}}function hGe(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!n.isRecording()){n.end();return}r&&n.setAttribute("http.user_agent",r);let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[s,a]of Object.entries(o))e.headers.set(s,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){zo.warning(`Skipping creating a tracing span due to an error: ${vx(n)}`);return}}function gGe(t,e){try{t.setStatus({status:"error",error:gx(e)?e:void 0}),UN(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){zo.warning(`Skipping tracing span processing due to an error: ${vx(r)}`)}}function vGe(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),t.setStatus({status:"success"}),t.end()}catch(r){zo.warning(`Skipping tracing span processing due to an error: ${vx(r)}`)}}var kG,DG=I(()=>{Wge();Mj();Fj();mx();yx();BN();kG="tracingPolicy"});function Xge(t){let e=sN();return dN&&(t.tlsOptions&&e.addPolicy(FN(t.tlsOptions)),e.addPolicy(ON(t.proxyOptions)),e.addPolicy(bN())),e.addPolicy(RN()),e.addPolicy(yN(t.userAgentOptions)),e.addPolicy(MN()),e.addPolicy(IN(t.retryOptions),{phase:"Retry"}),e.addPolicy(qN(t.userAgentOptions),{afterPhase:"Retry"}),dN&&e.addPolicy(hN(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(mN(t.loggingOptions),{afterPhase:"Sign"}),e}var Jge=I(()=>{Nj();vj();Oj();Bj();Hj();Gj();tG();yx();SG();TG();CG();DG()});function HN(t){return t.toLowerCase()}function*yGe(t){for(let e of t.values())yield[e.name,e.value]}function Rx(t){return new NG(t)}var NG,jN=I(()=>{NG=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(HN(e),{name:e,value:String(r)})}get(e){var r;return(r=this._headersMap.get(HN(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(HN(e))}delete(e){this._headersMap.delete(HN(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return yGe(this._headersMap)}}});function lC(t){return t&&typeof t.pipe=="function"}function Zge(t){return new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}function t0e(t){return t&&typeof t.byteLength=="number"}function _Ge(t){let e=Rx();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}function xGe(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=VN.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=VN.createInflate();return t.pipe(n),n}return t}function SGe(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new sc(`Error reading response as text: ${i.message}`,{code:sc.PARSE_ERROR}))})})}function EGe(t){return t?Buffer.isBuffer(t)?t.length:lC(t)?null:t0e(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function r0e(){return new LG}var Ax,Px,VN,e0e,bGe,GN,LG,n0e=I(()=>{Ax=W(require("http")),Px=W(require("https")),VN=W(require("zlib")),e0e=require("stream");fN();jN();BN();mx();bGe={};GN=class extends e0e.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},LG=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new tC,s;if(e.abortSignal){if(e.abortSignal.aborted)throw new td("The operation was aborted.");s=d=>{d.type==="abort"&&o.abort()},e.abortSignal.addEventListener("abort",s)}e.timeout>0&&setTimeout(()=>{o.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),c=a?.includes("gzip")||a?.includes("deflate"),u=typeof e.body=="function"?e.body():e.body;if(u&&!e.headers.has("Content-Length")){let d=EGe(u);d!==null&&e.headers.set("Content-Length",d)}let l;try{if(u&&e.onUploadProgress){let g=e.onUploadProgress,v=new GN(g);v.on("error",b=>{zo.error("Error in upload progress",b)}),lC(u)?u.pipe(v):v.end(u),u=v}let d=await this.makeRequest(e,o,u),p=_Ge(d),m={status:(r=d.statusCode)!==null&&r!==void 0?r:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),m;l=c?xGe(d,p):d;let h=e.onDownloadProgress;if(h){let g=new GN(h);g.on("error",v=>{zo.error("Error in download progress",v)}),l.pipe(g),l=g}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(m.status)?m.readableStreamBody=l:m.bodyAsText=await SGe(l),m}finally{if(e.abortSignal&&s){let d=Promise.resolve();lC(u)&&(d=Zge(u));let p=Promise.resolve();lC(l)&&(p=Zge(l)),Promise.all([d,p]).then(()=>{var f;s&&((f=e.abortSignal)===null||f===void 0||f.removeEventListener("abort",s))}).catch(f=>{zo.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),s=o.protocol!=="https:";if(s&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,s),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((u,l)=>{let d=s?Ax.request(c,u):Px.request(c,u);d.once("error",p=>{var f;l(new sc(p.message,{code:(f=p.code)!==null&&f!==void 0?f:sc.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let p=new td("The operation was aborted.");d.destroy(p),l(p)}),n&&lC(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):t0e(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(zo.error("Unrecognized body type",n),l(new sc("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?Ax.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new Ax.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return Px.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:bGe,s=this.cachedHttpsAgents.get(o);return s&&s.options.keepAlive===!i||(zo.info("No cached TLS Agent exist, creating a new Agent"),s=new Px.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,s)),s}}}});function i0e(){return r0e()}var o0e=I(()=>{n0e()});function OG(){return zN>$N.length-16&&(s0e.default.randomFillSync($N),zN=0),$N.slice(zN,zN+=16)}var s0e,$N,zN,a0e=I(()=>{s0e=W(require("crypto")),$N=new Uint8Array(256),zN=$N.length});var c0e,u0e=I(()=>{c0e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function TGe(t){return typeof t=="string"&&c0e.test(t)}var l0e,d0e=I(()=>{u0e();l0e=TGe});function IGe(t,e=0){let r=(Wo[t[e+0]]+Wo[t[e+1]]+Wo[t[e+2]]+Wo[t[e+3]]+"-"+Wo[t[e+4]]+Wo[t[e+5]]+"-"+Wo[t[e+6]]+Wo[t[e+7]]+"-"+Wo[t[e+8]]+Wo[t[e+9]]+"-"+Wo[t[e+10]]+Wo[t[e+11]]+Wo[t[e+12]]+Wo[t[e+13]]+Wo[t[e+14]]+Wo[t[e+15]]).toLowerCase();if(!l0e(r))throw TypeError("Stringified UUID is invalid");return r}var Wo,p0e,f0e=I(()=>{d0e();Wo=[];for(let t=0;t<256;++t)Wo.push((t+256).toString(16).substr(1));p0e=IGe});function CGe(t,e,r){t=t||{};let n=t.random||(t.rng||OG)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return p0e(n)}var MG,m0e=I(()=>{a0e();f0e();MG=CGe});var h0e=I(()=>{m0e()});function g0e(){return MG()}var v0e=I(()=>{h0e()});function y0e(t){return new FG(t)}var FG,b0e=I(()=>{jN();v0e();FG=class{constructor(e){var r,n,i,o,s,a,c;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:Rx(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(s=e.withCredentials)!==null&&s!==void 0?s:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||g0e(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}}});function x0e(t={}){var e;return rd([xx(Object.assign(Object.assign({},t),{ignoreSystemErrors:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3})}var _0e,S0e=I(()=>{TN();Sx();_0e="exponentialRetryPolicy"});function E0e(t={}){var e;return{name:UG,sendRequest:rd([xx(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var UG,T0e=I(()=>{TN();Sx();UG="systemErrorRetryPolicy"});function I0e(t={}){var e;return{name:BG,sendRequest:rd([SN()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var BG,C0e=I(()=>{EN();Sx();BG="throttlingRetryPolicy"});async function RGe(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await n();for(;i===null;)await _N(e),i=await n();return i}function w0e(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},wGe),e),s={get isRefreshing(){return r!==null},get shouldRefresh(){var c;return!s.isRefreshing&&((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(c,u){var l;return s.isRefreshing||(r=RGe(()=>t.getToken(c,u),o.retryIntervalInMs,(l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(p=>(r=null,n=p,i=u.tenantId,n)).catch(p=>{throw r=null,n=null,i=void 0,p})),r}return async(c,u)=>i!==u.tenantId||!!u.claims||s.mustRefresh?a(c,u):(s.shouldRefresh&&a(c,u),n)}var wGe,R0e=I(()=>{xN();wGe={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2}});async function AGe(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}function PGe(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function A0e(t){var e;let{credential:r,scopes:n,challengeCallbacks:i}=t,o=t.logger||zo,s=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:AGe,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=r?w0e(r):()=>Promise.resolve(null);return{name:qG,async sendRequest(c,u){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await s.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:a,logger:o});let l,d;try{l=await u(c)}catch(p){d=p,l=p.response}if(s.authorizeRequestOnChallenge&&l?.status===401&&PGe(l)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:l,getAccessToken:a,logger:o}))return u(c);if(d)throw d;return l}}}var qG,P0e=I(()=>{R0e();mx();qG="bearerTokenAuthenticationPolicy"});function k0e(){return{name:HG,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""))}return e(t)}}}var HG,D0e=I(()=>{HG="ndJsonPolicy"});var N0e={};rn(N0e,{RestError:()=>sc,bearerTokenAuthenticationPolicy:()=>A0e,bearerTokenAuthenticationPolicyName:()=>qG,createDefaultHttpClient:()=>i0e,createEmptyPipeline:()=>sN,createHttpHeaders:()=>Rx,createPipelineFromOptions:()=>Xge,createPipelineRequest:()=>y0e,decompressResponsePolicy:()=>bN,decompressResponsePolicyName:()=>qj,defaultRetryPolicy:()=>IN,exponentialRetryPolicy:()=>x0e,exponentialRetryPolicyName:()=>_0e,formDataPolicy:()=>RN,formDataPolicyName:()=>eG,getDefaultProxySettings:()=>xG,isRestError:()=>UN,logPolicy:()=>mN,logPolicyName:()=>Dj,ndJsonPolicy:()=>k0e,ndJsonPolicyName:()=>HG,proxyPolicy:()=>ON,proxyPolicyName:()=>_G,redirectPolicy:()=>hN,redirectPolicyName:()=>Lj,retryPolicy:()=>rd,setClientRequestIdPolicy:()=>MN,setClientRequestIdPolicyName:()=>EG,systemErrorRetryPolicy:()=>E0e,systemErrorRetryPolicyName:()=>UG,throttlingRetryPolicy:()=>I0e,throttlingRetryPolicyName:()=>BG,tlsPolicy:()=>FN,tlsPolicyName:()=>IG,tracingPolicy:()=>qN,tracingPolicyName:()=>kG,userAgentPolicy:()=>yN,userAgentPolicyName:()=>Uj});var L0e=I(()=>{vj();Jge();o0e();jN();b0e();BN();Hj();S0e();TG();Nj();SG();Oj();T0e();C0e();Sx();DG();Gj();Bj();CG();tG();P0e();D0e()});var F0e=P((dC,M0e)=>{"use strict";var kGe=dC&&dC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},DGe=dC&&dC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},O0e=(L0e(),Ai(N0e)),NGe="https://monitor.azure.com//.default";function LGe(t){return null}var OGe=function(){function t(e,r){var n=r?[r]:[NGe];this._azureTokenPolicy=O0e.bearerTokenAuthenticationPolicy({credential:e,scopes:n})}return t.prototype.addAuthorizationHeader=function(e){return kGe(this,void 0,void 0,function(){var r,n;return DGe(this,function(i){switch(i.label){case 0:return r="authorization",n=O0e.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,LGe)];case 1:return i.sent(),e.headers[r]=n.headers.get(r),[2]}})})},t}();M0e.exports=OGe});var B0e=P((hAt,U0e)=>{"use strict";var MGe=xn(),FGe=Ho(),UGe=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){MGe.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(e),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;n||(e||FGe.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t}();U0e.exports=UGe});var q0e=P(WN=>{"use strict";Object.defineProperty(WN,"__esModule",{value:!0});WN.azureRoleEnvironmentTelemetryProcessor=void 0;function BGe(t,e){}WN.azureRoleEnvironmentTelemetryProcessor=BGe});var G0e=P(kx=>{"use strict";Object.defineProperty(kx,"__esModule",{value:!0});kx.getSamplingHashCode=kx.samplingTelemetryProcessor=void 0;var H0e=gs();function qGe(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&H0e.TelemetryType.Metric===H0e.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=j0e(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}kx.samplingTelemetryProcessor=qGe;function j0e(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}kx.getSamplingHashCode=j0e});var V0e=P(KN=>{"use strict";Object.defineProperty(KN,"__esModule",{value:!0});KN.performanceMetricsTelemetryProcessor=void 0;var jG=$D(),GG=gs();function HGe(t,e){switch(e&&e.addDocument(t),t.data.baseType){case GG.TelemetryTypeString.Exception:jG.countException();break;case GG.TelemetryTypeString.Request:var r=t.data.baseData;jG.countRequest(r.duration,r.success);break;case GG.TelemetryTypeString.Dependency:var n=t.data.baseData;jG.countDependency(n.duration,n.success);break}return!0}KN.performanceMetricsTelemetryProcessor=HGe});var z0e=P(Dx=>{"use strict";var nd=Dx&&Dx.__assign||function(){return nd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nd.apply(this,arguments)};Object.defineProperty(Dx,"__esModule",{value:!0});Dx.preAggregatedMetricsTelemetryProcessor=void 0;var jGe=gs(),pC=KH(),YN=gs();function GGe(t,e){if(pC.isEnabled())switch(t.data.baseType){case YN.TelemetryTypeString.Exception:var r=t.data.baseData;r.properties=nd(nd({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole]};pC.countException(n);break;case YN.TelemetryTypeString.Trace:var i=t.data.baseData;i.properties=nd(nd({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],traceSeverityLevel:jGe.SeverityLevel[i.severity]};pC.countTrace(o);break;case YN.TelemetryTypeString.Request:var s=t.data.baseData;s.properties=nd(nd({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};pC.countRequest(s.duration,a);break;case YN.TelemetryTypeString.Dependency:var c=t.data.baseData;c.properties=nd(nd({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var u={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],dependencySuccess:c.success,dependencyType:c.type,dependencyTarget:c.target,dependencyResultCode:c.resultCode};pC.countDependency(c.duration,u);break}return!0}Dx.preAggregatedMetricsTelemetryProcessor=GGe});var $0e=P(id=>{"use strict";var VGe=id&&id.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QN=id&&id.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&VGe(e,t,r)};Object.defineProperty(id,"__esModule",{value:!0});QN(q0e(),id);QN(G0e(),id);QN(V0e(),id);QN(z0e(),id)});var VG=P((xAt,Y0e)=>{"use strict";var It=gs(),Ca=Ho(),W0e=Vm(),zGe=xn(),$Ge=function(){function t(){}return t.createEnvelope=function(e,r,n,i,o){var s=null;switch(r){case It.TelemetryType.Trace:s=t.createTraceData(e);break;case It.TelemetryType.Dependency:s=t.createDependencyData(e);break;case It.TelemetryType.Event:s=t.createEventData(e);break;case It.TelemetryType.Exception:s=t.createExceptionData(e);break;case It.TelemetryType.Request:s=t.createRequestData(e);break;case It.TelemetryType.Metric:s=t.createMetricData(e);break;case It.TelemetryType.Availability:s=t.createAvailabilityData(e);break;case It.TelemetryType.PageView:s=t.createPageViewData(e);break}if(s&&s.baseData&&It.domainSupportsProperties(s.baseData)){if(n)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);t.addAzureFunctionsCorrelationProperties(s.baseData.properties),s.baseData.properties&&(s.baseData.properties=Ca.validateStringMap(s.baseData.properties))}var c=o&&o.instrumentationKey||"",u=new It.Envelope;return u.data=s,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),u.tags=this.getTags(i,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=o?o.samplingPercentage:100,r===It.TelemetryType.Metric&&(u.sampleRate=100),u},t.addAzureFunctionsCorrelationProperties=function(e){var r=W0e.CorrelationContextManager.getCurrentContext();if(r&&r.customProperties&&r.customProperties.getProperty instanceof Function){e=e||{};var n=r.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),n=r.customProperties.getProperty("ProcessId"),n&&(e.ProcessId=n),n=r.customProperties.getProperty("LogLevel"),n&&(e.LogLevel=n),n=r.customProperties.getProperty("Category"),n&&(e.Category=n),n=r.customProperties.getProperty("HostInstanceId"),n&&(e.HostInstanceId=n),n=r.customProperties.getProperty("AzFuncLiveLogsSessionId"),n&&(e.AzFuncLiveLogsSessionId=n)}},t.truncateProperties=function(e){if(e.properties)try{for(var r={},n=Object.keys(e.properties),i=Object.values(e.properties),o=0;o<n.length;o++)n[o].length<=150&&(Ca.isDate(i[o])||(i[o]==null&&(i[o]=""),typeof i[o]=="object"&&(i[o]=Ca.stringify(i[o])),r[n[o]]=String(i[o]).substring(0,8192)),r[n[o]]=i[o]);return r}catch(s){zGe.warn("Failed to properly truncate telemetry properties: ",s)}},t.createTraceData=function(e){var r,n=new It.MessageData;n.message=(r=e.message)===null||r===void 0?void 0:r.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=It.SeverityLevel.Information:n.severityLevel=e.severity;var i=new It.Data;return i.baseType=It.telemetryTypeToBaseType(It.TelemetryType.Trace),i.baseData=n,i},t.createDependencyData=function(e){var r,n,i,o=new It.RemoteDependencyData;o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.data=(n=e.data)===null||n===void 0?void 0:n.substring(0,8192),o.target=(i=e.target)===null||i===void 0?void 0:i.substring(0,1024),o.duration=Ca.msToTimeSpan(e.duration),o.success=e.success,o.type=e.dependencyTypeName,o.properties=this.truncateProperties(e),o.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?o.id=e.id:o.id=Ca.w3cTraceId();var s=new It.Data;return s.baseType=It.telemetryTypeToBaseType(It.TelemetryType.Dependency),s.baseData=o,s},t.createEventData=function(e){var r,n=new It.EventData;n.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var i=new It.Data;return i.baseType=It.telemetryTypeToBaseType(It.TelemetryType.Event),i.baseData=n,i},t.createExceptionData=function(e){var r,n,i=new It.ExceptionData;i.properties=this.truncateProperties(e),isNaN(e.severity)?i.severityLevel=It.SeverityLevel.Error:i.severityLevel=e.severity,i.measurements=e.measurements,i.exceptions=[];var o=e.exception.stack,s=new It.ExceptionDetails;s.message=(r=e.exception.message)===null||r===void 0?void 0:r.substring(0,32768),s.typeName=(n=e.exception.name)===null||n===void 0?void 0:n.substring(0,1024),s.parsedStack=this.parseStack(o),s.hasFullStack=Ca.isArray(s.parsedStack)&&s.parsedStack.length>0,i.exceptions.push(s);var a=new It.Data;return a.baseType=It.telemetryTypeToBaseType(It.TelemetryType.Exception),a.baseData=i,a},t.createRequestData=function(e){var r,n,i,o,s=new It.RequestData;e.id?s.id=e.id:s.id=Ca.w3cTraceId(),s.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),s.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),s.source=(i=e.source)===null||i===void 0?void 0:i.substring(0,1024),s.duration=Ca.msToTimeSpan(e.duration),s.responseCode=(o=e.resultCode?e.resultCode.toString():"0")===null||o===void 0?void 0:o.substring(0,1024),s.success=e.success,s.properties=this.truncateProperties(e),s.measurements=e.measurements;var a=new It.Data;return a.baseType=It.telemetryTypeToBaseType(It.TelemetryType.Request),a.baseData=s,a},t.createMetricData=function(e){var r,n=new It.MetricData;n.metrics=[];var i=new It.DataPoint;i.count=isNaN(e.count)?1:e.count,i.kind=It.DataPointType.Aggregation,i.max=isNaN(e.max)?e.value:e.max,i.min=isNaN(e.min)?e.value:e.min,i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.stdDev=isNaN(e.stdDev)?0:e.stdDev,i.value=e.value,i.ns=e.namespace,n.metrics.push(i),n.properties=this.truncateProperties(e);var o=new It.Data;return o.baseType=It.telemetryTypeToBaseType(It.TelemetryType.Metric),o.baseData=n,o},t.createAvailabilityData=function(e){var r,n,i=new It.AvailabilityData;e.id?i.id=e.id:i.id=Ca.w3cTraceId(),i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Ca.msToTimeSpan(e.duration),i.success=e.success,i.runLocation=e.runLocation,i.message=(n=e.message)===null||n===void 0?void 0:n.substring(0,8192),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new It.Data;return o.baseType=It.telemetryTypeToBaseType(It.TelemetryType.Availability),o.baseData=i,o},t.createPageViewData=function(e){var r,n,i=new It.PageViewData;i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Ca.msToTimeSpan(e.duration),i.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new It.Data;return o.baseType=It.telemetryTypeToBaseType(It.TelemetryType.PageView),o.baseData=i,o},t.getTags=function(e,r){var n=W0e.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(K0e.regex.test(a)){var c=new K0e(n[s],i++);o+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(o>u)for(var l=0,d=r.length-1,p=0,f=l,m=d;l<d;){var h=r[l].sizeInBytes,g=r[d].sizeInBytes;if(p+=h+g,p>u){var v=m-f+1;r.splice(f,v);break}f=l,m=d,l++,d--}}return r},t}(),K0e=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=Ca.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=Ca.trim(n[2])||this.method,this.fileName=Ca.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();Y0e.exports=$Ge});var Q0e=P(oh=>{"use strict";var WGe=oh&&oh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},KGe=oh&&oh.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(oh,"__esModule",{value:!0});oh.FileAccessControl=void 0;var YGe=require("fs"),QGe=require("os"),Nx=require("child_process"),XGe=xn(),JGe=function(){function t(){}return t.checkFileProtection=function(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=!0,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=YGe.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||XGe.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0},t.applyACLRules=function(e){return WGe(this,void 0,void 0,function(){var r,n;return KGe(this,function(i){switch(i.label){case 0:if(!t.USE_ICACLS)return[3,7];if(t.ACLED_DIRECTORIES[e]!==void 0)return[3,6];t.ACLED_DIRECTORIES[e]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return r=i.sent(),[4,this._runICACLS(this._getACLArguments(e,r))];case 3:return i.sent(),t.ACLED_DIRECTORIES[e]=!0,[3,5];case 4:throw n=i.sent(),t.ACLED_DIRECTORIES[e]=!1,n;case 5:return[3,7];case 6:if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}})})},t.applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t._runICACLS=function(e){return new Promise(function(r,n){var i=Nx.spawn(t.ICACLS_PATH,e,{windowsHide:!0});i.on("error",function(o){return n(o)}),i.on("close",function(o,s){o===0?r():n(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+o+")"))})})},t._runICACLSSync=function(e){if(Nx.spawnSync){var r=Nx.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t._getACLIdentity=function(){return new Promise(function(e,r){t.ACL_IDENTITY&&e(t.ACL_IDENTITY);var n=Nx.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";n.stdout.on("data",function(o){return i+=o}),n.on("error",function(o){return r(o)}),n.on("close",function(o,s){t.ACL_IDENTITY=i&&i.trim(),o===0?e(t.ACL_IDENTITY):r(new Error("Getting ACL identity did not succeed (PS returned code "+o+")"))})})},t._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(Nx.spawnSync){var e=Nx.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.TAG="FileAccessControl",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.OS_FILE_PROTECTION_CHECKED=!1,t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=QGe.type()==="Windows_NT",t}();oh.FileAccessControl=JGe});var $G=P((mC,J0e)=>{"use strict";var XN=mC&&mC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},JN=mC&&mC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},zG=require("fs"),ZGe=require("os"),Av=require("path"),eVe=require("zlib"),sh=qn(),tVe=dx(),Wp=iU(),wa=Ho(),rVe=require("url"),X0e=xn(),fC=Q0e(),nVe=439,iVe=402,oVe=[200,206,402,408,429,439,500],sVe=function(){function t(e,r,n,i,o,s,a){this._redirectedHost=null,this._config=e,this._onSuccess=n,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=r,this._fileCleanupTimer=null,this._tempDir=Av.join(ZGe.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=s||!1,this._shutdownStatsbeat=a,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return t.prototype.setDiskRetryMode=function(e,r,n){var i=this;e&&fC.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=fC.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!fC.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(sh.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},t.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(sh.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},t.prototype.send=function(e,r){return XN(this,void 0,void 0,function(){var n,i,o,s,a,c,u,l,d=this;return JN(this,function(p){switch(p.label){case 0:if(!e)return[3,5];if(n=this._redirectedHost||this._config.endpointUrl,i=new rVe.URL(n).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!s)return[3,4];this._statsbeat&&this._statsbeat.addFeature(sh.StatsbeatFeature.AAD_HANDLING),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,s.addAuthorizationHeader(o)];case 2:return p.sent(),[3,4];case 3:return a=p.sent(),c="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(c+="This batch of telemetry items will be retried. ",this._storeToDisk(e)),c+="Error:"+a.toString(),this._logWarn(c),typeof r=="function"&&r(c),[2];case 4:u="",e.forEach(function(f){var m=wa.stringify(f);typeof m=="string"&&(u+=m+`
`)}),u.length>0&&(u=u.substring(0,u.length-1)),l=Buffer.from?Buffer.from(u):new Buffer(u),eVe.gzip(l,function(f,m){var h=m;f?(d._logWarn(wa.dumpObj(f)),h=l,o.headers["Content-Length"]=l.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=m.length.toString()),d._logInfo(wa.dumpObj(o)),o[tVe.disableCollectionRequestOption]=!0;var g=+new Date,v=function(y){y.setEncoding("utf-8");var S="";y.on("data",function(x){S+=x}),y.on("end",function(){var x=+new Date,T=x-g;if(d._numConsecutiveFailures=0,d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&(oVe.includes(y.statusCode)?d._statsbeatHasReachedIngestionAtLeastOnce=!0:d._statsbeatFailedToIngest()),d._statsbeat&&(y.statusCode==iVe||y.statusCode==nVe?d._statsbeat.countThrottle(sh.StatsbeatNetworkCategory.Breeze,i,y.statusCode):d._statsbeat.countRequest(sh.StatsbeatNetworkCategory.Breeze,i,T,y.statusCode===200,y.statusCode)),d._enableDiskRetryMode){if(y.statusCode===200)d._resendTimer||(d._resendTimer=setTimeout(function(){d._resendTimer=null,d._sendFirstFileOnDisk()},d._resendInterval),d._resendTimer.unref());else if(d._isRetriable(y.statusCode))try{d._statsbeat&&d._statsbeat.countRetry(sh.StatsbeatNetworkCategory.Breeze,i,y.statusCode);var L=JSON.parse(S),M=[];L.errors&&(L.errors.forEach(function(Z){(Z.statusCode==429||Z.statusCode==500||Z.statusCode==503)&&M.push(e[Z.index])}),M.length>0&&d._storeToDisk(M))}catch{d._storeToDisk(e)}}if(y.statusCode===307||y.statusCode===308)if(d._numConsecutiveRedirects++,d._numConsecutiveRedirects<10){var q=y.headers.location?y.headers.location.toString():null;q&&(d._redirectedHost=q,d.send(e,r))}else{var O={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};d._statsbeat&&d._statsbeat.countException(sh.StatsbeatNetworkCategory.Breeze,i,O),typeof r=="function"&&r("Error sending telemetry because of circular redirects.")}else d._numConsecutiveRedirects=0,typeof r=="function"&&r(S),d._logInfo(S),typeof d._onSuccess=="function"&&d._onSuccess(S)})},b=wa.makeRequest(d._config,n,o,v);b.setTimeout(t.HTTP_TIMEOUT,function(){d._requestTimedOut=!0,b.abort()}),b.on("error",function(y){if(d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&d._statsbeatFailedToIngest(),d._numConsecutiveFailures++,d._statsbeat&&d._statsbeat.countException(sh.StatsbeatNetworkCategory.Breeze,i,y),!d._enableDiskRetryMode||d._numConsecutiveFailures>0&&d._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var S="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";d._enableDiskRetryMode&&(S="Ingestion endpoint could not be reached "+d._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),d._logWarn(S,wa.dumpObj(y))}else{var S="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";d._logInfo(S,wa.dumpObj(y))}d._onErrorHelper(y),typeof r=="function"&&(y?(d._requestTimedOut&&(y.name="telemetry timeout",y.message="telemetry request timed out"),r(wa.dumpObj(y))):r("Error sending telemetry")),d._enableDiskRetryMode&&d._storeToDisk(e)}),b.write(h),b.end()}),p.label=5;case 5:return[2]}})})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(wa.stringify(e))},t.prototype._isRetriable=function(e){return e===206||e===401||e===403||e===408||e===429||e===500||e===502||e===503||e===504},t.prototype._logInfo=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||X0e.info(t.TAG,e,r)},t.prototype._logWarn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||X0e.warn(t.TAG,e,r)},t.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},t.prototype._storeToDisk=function(e){return XN(this,void 0,void 0,function(){var r,n,i,o,s,a,c;return JN(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,Wp.confirmDirExists(this._tempDir)];case 1:return u.sent(),[3,3];case 2:return r=u.sent(),this._logWarn("Failed to create folder to put telemetry: "+wa.dumpObj(r)),this._onErrorHelper(r),[2];case 3:return u.trys.push([3,5,,6]),[4,fC.FileAccessControl.applyACLRules(this._tempDir)];case 4:return u.sent(),[3,6];case 5:return n=u.sent(),this._logWarn("Failed to apply file access control to folder: "+wa.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return u.trys.push([6,8,,9]),[4,Wp.getShallowDirectorySize(this._tempDir)];case 7:return i=u.sent(),i>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=u.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+wa.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return u.trys.push([9,11,,12]),s=new Date().getTime()+".ai.json",a=Av.join(this._tempDir,s),this._logInfo("saving data to disk at: "+a),[4,Wp.writeFileAsync(a,wa.stringify(e),{mode:384})];case 10:return u.sent(),[3,12];case 11:return c=u.sent(),this._logWarn("Failed to persist telemetry to disk: "+wa.dumpObj(c)),this._onErrorHelper(c),[2];case 12:return[2]}})})},t.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),zG.existsSync(this._tempDir)||zG.mkdirSync(this._tempDir),fC.FileAccessControl.applyACLRulesSync(this._tempDir);var r=Wp.getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Av.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+i),zG.writeFileSync(i,e,{mode:384})}catch(o){this._logWarn("Error while saving data to disk: "+wa.dumpObj(o)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){return XN(this,void 0,void 0,function(){var e,r,n,i,o,s;return JN(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,Wp.readdirAsync(this._tempDir)];case 1:return e=a.sent(),e=e.filter(function(c){return Av.basename(c).indexOf(".ai.json")>-1}),e.length>0?(r=e[0],n=Av.join(this._tempDir,r),[4,Wp.readFileAsync(n)]):[3,5];case 2:return i=a.sent(),[4,Wp.unlinkAsync(n)];case 3:return a.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return s=a.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.prototype._fileCleanupTask=function(){return XN(this,void 0,void 0,function(){var e,r,n,i,o,s,a=this;return JN(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,Wp.readdirAsync(this._tempDir)];case 1:if(e=c.sent(),e=e.filter(function(u){return Av.basename(u).indexOf(".ai.json")>-1}),!(e.length>0))return[3,5];r=0,c.label=2;case 2:return r<e.length?(n=new Date(parseInt(e[r].split(".ai.json")[0])),i=new Date(+new Date-t.FILE_RETEMPTION_PERIOD)>n,i?(o=Av.join(this._tempDir,e[r]),[4,Wp.unlinkAsync(o).catch(function(u){a._onErrorHelper(u)})]):[3,4]):[3,5];case 3:c.sent(),c.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return s=c.sent(),s.code!="ENOENT"&&this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.TAG="Sender",t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1024*1024,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.CLEANUP_TIMEOUT=60*60*1e3,t.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,t.TEMPDIR_PREFIX="appInsights-node",t.HTTP_TIMEOUT=2e4,t}();J0e.exports=sVe});var eve=P(ZN=>{"use strict";Object.defineProperty(ZN,"__esModule",{value:!0});ZN.AzureVirtualMachine=void 0;var Z0e=xn(),aVe=Ho(),cVe=dx(),uVe="http://169.254.169.254/metadata/instance/compute",lVe="api-version=2017-12-01",dVe="format=json",pVe="UNREACH",fVe=function(){function t(){}return t.getAzureComputeMetadata=function(e,r){var n,i=this,o={},s=uVe+"?"+lVe+"&"+dVe,a=(n={method:"GET"},n[cVe.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),c=aVe.makeRequest(e,s,a,function(u){if(u.statusCode===200){o.isVM=!0;var l="";u.on("data",function(d){l+=d}),u.on("end",function(){try{var d=JSON.parse(l);o.id=d.vmId||"",o.subscriptionId=d.subscriptionId||"",o.osType=d.osType||""}catch(p){Z0e.info(t.TAG,p)}r(o)})}else r(o)},!1,!1);c&&(setTimeout(function(){i._requestTimedOut=!0,c.abort()},t.HTTP_TIMEOUT),c.on("error",function(u){i._requestTimedOut&&u&&(u.name="telemetry timeout",u.message="telemetry request timed out"),u&&u.message&&u.message.indexOf(pVe)>-1?o.isVM=!1:Z0e.info(t.TAG,u),r(o)}),c.end())},t.HTTP_TIMEOUT=2500,t.TAG="AzureVirtualMachine",t}();ZN.AzureVirtualMachine=fVe});var tve=P(e4=>{"use strict";Object.defineProperty(e4,"__esModule",{value:!0});e4.NetworkStatsbeat=void 0;var mVe=function(){function t(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return t}();e4.NetworkStatsbeat=mVe});var sve=P((Pv,ove)=>{"use strict";var od=Pv&&Pv.__assign||function(){return od=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},od.apply(this,arguments)},WG=Pv&&Pv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},KG=Pv&&Pv.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hVe=require("os"),gVe=VG(),rve=xn(),vVe=$G(),Tn=qn(),yVe=gs(),bVe=eve(),_Ve=hj(),nve=ix(),xVe=tve(),ive=Ho(),SVe="node",EVe=function(){function t(e,r){this._attach=Tn.StatsbeatAttach.sdk,this._feature=Tn.StatsbeatFeature.NONE,this._instrumentation=Tn.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=r||new nve;var n=this._getConnectionString(e);this._statsbeatConfig=new _Ve(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new vVe(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),e?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats()},t.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setCodelessAttach=function(){this._attach=Tn.StatsbeatAttach.codeless},t.prototype.addFeature=function(e){this._feature|=e},t.prototype.removeFeature=function(e){this._feature&=~e},t.prototype.addInstrumentation=function(e){this._instrumentation|=e},t.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},t.prototype.countRequest=function(e,r,n,i,o){if(this.isEnabled()){var s=this._getNetworkStatsbeatCounter(e,r);if(s.totalRequestCount++,s.intervalRequestExecutionTime+=n,i===!1){if(!o)return;var a=s.totalFailedRequestCount.find(function(c){return o===c.statusCode});a?a.count++:s.totalFailedRequestCount.push({statusCode:o,count:1})}else s.totalSuccesfulRequestCount++}},t.prototype.countException=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.exceptionCount.find(function(s){return n.name===s.exceptionType});o?o.count++:i.exceptionCount.push({exceptionType:n.name,count:1})}},t.prototype.countThrottle=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.throttleCount.find(function(s){return n===s.statusCode});o?o.count++:i.throttleCount.push({statusCode:n,count:1})}},t.prototype.countRetry=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.retryCount.find(function(s){return n===s.statusCode});o?o.count++:i.retryCount.push({statusCode:n,count:1})}},t.prototype.trackShortIntervalStatsbeats=function(){return WG(this,void 0,void 0,function(){var e,r;return KG(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return n.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(e),this._trackRequestsCount(e),[4,this._sendStatsbeats()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),rve.info(t.TAG,"Failed to send Statsbeat metrics: "+ive.dumpObj(r)),[3,4];case 4:return[2]}})})},t.prototype.trackLongIntervalStatsbeats=function(){return WG(this,void 0,void 0,function(){var e,r,n,i,o;return KG(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return s.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},r=Object.assign({rpId:this._resourceIdentifier},e),this._statbeatMetrics.push({name:Tn.StatsbeatCounter.ATTACH,value:1,properties:r}),this._instrumentation!=Tn.StatsbeatInstrumentation.NONE&&(n=Object.assign({feature:this._instrumentation,type:Tn.StatsbeatFeatureType.Instrumentation},e),this._statbeatMetrics.push({name:Tn.StatsbeatCounter.FEATURE,value:1,properties:n})),this._feature!=Tn.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:Tn.StatsbeatFeatureType.Feature},e),this._statbeatMetrics.push({name:Tn.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return s.sent(),[3,4];case 3:return o=s.sent(),rve.info(t.TAG,"Failed to send Statsbeat metrics: "+ive.dumpObj(o)),[3,4];case 4:return[2]}})})},t.prototype._getNetworkStatsbeatCounter=function(e,r){for(var n=this._getShortHost(r),i=0;i<this._networkStatsbeatCollection.length;i++)if(e===this._networkStatsbeatCollection[i].endpoint&&n===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var o=new xVe.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(o),o},t.prototype._trackRequestDuration=function(e){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,o=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,s=o>0&&o/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},e);this._statbeatMetrics.push({name:Tn.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},t.prototype._getShortHost=function(e){var r=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),i=n.exec(e);i!=null&&i.length>1&&(r=i[1]),r=r.replace(".in.applicationinsights.azure.com","")}catch{}return r},t.prototype._trackRequestsCount=function(e){for(var r=this,n=function(a){o=i._networkStatsbeatCollection[a];var c=Object.assign({endpoint:o.endpoint,host:o.host},e);o.totalSuccesfulRequestCount>0&&(i._statbeatMetrics.push({name:Tn.StatsbeatCounter.REQUEST_SUCCESS,value:o.totalSuccesfulRequestCount,properties:c}),o.totalSuccesfulRequestCount=0),o.totalFailedRequestCount.length>0&&(o.totalFailedRequestCount.forEach(function(u){c=Object.assign(od(od({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:Tn.StatsbeatCounter.REQUEST_FAILURE,value:u.count,properties:c})}),o.totalFailedRequestCount=[]),o.retryCount.length>0&&(o.retryCount.forEach(function(u){c=Object.assign(od(od({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:Tn.StatsbeatCounter.RETRY_COUNT,value:u.count,properties:c})}),o.retryCount=[]),o.throttleCount.length>0&&(o.throttleCount.forEach(function(u){c=Object.assign(od(od({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:Tn.StatsbeatCounter.THROTTLE_COUNT,value:u.count,properties:c})}),o.throttleCount=[]),o.exceptionCount.length>0&&(o.exceptionCount.forEach(function(u){c=Object.assign(od(od({},c),{exceptionType:u.exceptionType})),r._statbeatMetrics.push({name:Tn.StatsbeatCounter.EXCEPTION_COUNT,value:u.count,properties:c})}),o.exceptionCount=[])},i=this,o,s=0;s<this._networkStatsbeatCollection.length;s++)n(s)},t.prototype._sendStatsbeats=function(){return WG(this,void 0,void 0,function(){var e,r,n,i;return KG(this,function(o){switch(o.label){case 0:for(e=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},i=gVe.createEnvelope(n,yVe.TelemetryType.Metric,null,this._context,this._statsbeatConfig),i.name=Tn.StatsbeatTelemetryName,e.push(i);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return o.sent(),[2]}})})},t.prototype._getCustomProperties=function(){this._language=SVe,this._cikey=this._config.instrumentationKey,this._sdkVersion=nve.sdkVersion,this._os=hVe.type(),this._runtimeVersion=process.version},t.prototype._getResourceProvider=function(){var e=this;return new Promise(function(r,n){var i=!1;e._resourceProvider=Tn.StatsbeatResourceProvider.unknown,e._resourceIdentifier=Tn.StatsbeatResourceProvider.unknown,process.env.AKS_ARM_NAMESPACE_ID?(e._resourceProvider=Tn.StatsbeatResourceProvider.aks,e._resourceIdentifier=process.env.AKS_ARM_NAMESPACE_ID):process.env.WEBSITE_SITE_NAME?(e._resourceProvider=Tn.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=Tn.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(e._isVM===void 0||e._isVM==!0?(i=!0,bVe.AzureVirtualMachine.getAzureComputeMetadata(e._config,function(o){e._isVM=o.isVM,e._isVM&&(e._resourceProvider=Tn.StatsbeatResourceProvider.vm,e._resourceIdentifier=o.id+"/"+o.subscriptionId,o.osType&&(e._os=o.osType)),r()})):e._resourceProvider=Tn.StatsbeatResourceProvider.unknown),i||r()})},t.prototype._shutdownStatsbeat=function(){this.enable(!1)},t.prototype._getConnectionString=function(e){for(var r=e.endpointUrl,n=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<n.length;i++)if(r.indexOf(n[i])>-1)return t.EU_CONNECTION_STRING;return t.NON_EU_CONNECTION_STRING},t.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",t.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",t.STATS_COLLECTION_SHORT_INTERVAL=9e5,t.STATS_COLLECTION_LONG_INTERVAL=864e5,t.TAG="Statsbeat",t}();ove.exports=EVe});var uve=P((IAt,cve)=>{"use strict";var TVe=require("url"),IVe=hj(),CVe=F0e(),wVe=ix(),Kp=gs(),RVe=B0e(),YG=$0e(),ave=Vm(),AVe=sve(),PVe=$G(),QG=Ho(),t4=xn(),kVe=VG(),DVe=function(){function t(e){this._telemetryProcessors=[];var r=new IVe(e);if(this.config=r,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new wVe,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new AVe(this.config,this.context),this._statsbeat.enable(!0));var n=new PVe(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new RVe(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,Kp.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,Kp.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,Kp.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,Kp.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!QG.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,Kp.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,Kp.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,Kp.TelemetryType.Request)},t.prototype.trackDependency=function(e){if(e&&!e.target&&e.data)try{e.target=new TVe.URL(e.data).host}catch(r){e.target=null,t4.warn(t.TAG,"The URL object is failed to create.",r)}this.track(e,Kp.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&Kp.telemetryTypeToBaseType(r)){var n=kVe.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&YG.samplingTelemetryProcessor(n,{correlationContext:ave.CorrelationContextManager.getCurrentContext()}),YG.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(YG.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else t4.warn(t.TAG,"track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){},t.prototype.getAuthorizationHandler=function(e){return e&&e.aadTokenCredential?(this.authorizationHandler||(t4.info(t.TAG,"Adding authorization handler"),this.authorizationHandler=new CVe(e.aadTokenCredential,e.aadAudience)),this.authorizationHandler):null},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=ave.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,t4.warn(t.TAG,"One of telemetry processors failed, telemetry item will be sent.",a,e)}return n&&(e&&e.tags&&(e.tags=QG.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=QG.validateStringMap(e.data.baseData.properties))),n},t.prototype.getStatsbeat=function(){return this._statsbeat},t.TAG="TelemetryClient",t}();cve.exports=DVe});var pve=P((XG,dve)=>{"use strict";var NVe=XG&&XG.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LVe=uve(),lve=cj(),OVe=dx(),r4=xn(),MVe=function(t){NVe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?lve.trackRequestSync(this,r):r4.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&r4.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?lve.trackRequest(this,r):r4.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?OVe.trackRequest(this,r):r4.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(LVe);dve.exports=MVe});var mve=P(fve=>{"use strict";Object.defineProperty(fve,"__esModule",{value:!0})});var bve=P(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.dispose=X.Configuration=X.wrapWithCorrelationContext=X.startOperation=X.getCorrelationContext=X.start=X.setup=X.liveMetricsClient=X.defaultClient=X.DistributedTracingModes=void 0;var JG=Vm(),FVe=Wfe(),UVe=Yfe(),ZG=$D(),BVe=KH(),qVe=nme(),HVe=hme(),jVe=dx(),GVe=cj(),hve=uv(),hC=xn(),gve=Kme(),eV=Yme(),VVe=Jme();X.TelemetryClient=pve();X.Contracts=gs();X.azureFunctionsTypes=mve();var vve;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(vve=X.DistributedTracingModes||(X.DistributedTracingModes={}));var gC,vC,yC,bC,_C,Lx,Ox,kv,xC,SC,ac=!1,n4;function zVe(t){return X.defaultClient?hC.info("The default client is already setup"):(X.defaultClient=new X.TelemetryClient(t),gC=new FVe(X.defaultClient),vC=new UVe(X.defaultClient),yC=new ZG(X.defaultClient),bC=new BVe(X.defaultClient),_C=new qVe(X.defaultClient),Lx=new HVe(X.defaultClient),kv=new GVe(X.defaultClient),xC=new jVe(X.defaultClient),Ox||(Ox=new eV.AutoCollectNativePerformance(X.defaultClient)),SC=new VVe.AzureFunctionsHook(X.defaultClient)),tV}X.setup=zVe;function $Ve(){X.defaultClient&&(X.defaultClient.config.enableAutoCollectExternalLoggers==null&&(X.defaultClient.config.enableAutoCollectExternalLoggers=!0),X.defaultClient.config.enableAutoCollectConsole==null&&(X.defaultClient.config.enableAutoCollectConsole=!1),X.defaultClient.config.enableAutoCollectExceptions==null&&(X.defaultClient.config.enableAutoCollectExceptions=!0),X.defaultClient.config.enableAutoCollectPerformance==null&&(X.defaultClient.config.enableAutoCollectPerformance=!0),X.defaultClient.config.enableAutoCollectPreAggregatedMetrics==null&&(X.defaultClient.config.enableAutoCollectPreAggregatedMetrics=!0),X.defaultClient.config.enableAutoCollectHeartbeat==null&&(X.defaultClient.config.enableAutoCollectHeartbeat=!0),X.defaultClient.config.enableAutoCollectRequests==null&&(X.defaultClient.config.enableAutoCollectRequests=!0),X.defaultClient.config.enableAutoCollectDependencies==null&&(X.defaultClient.config.enableAutoCollectDependencies=!0),X.defaultClient.config.enableUseDiskRetryCaching==null&&(X.defaultClient.config.enableUseDiskRetryCaching=!0),X.defaultClient.config.enableAutoDependencyCorrelation==null&&(X.defaultClient.config.enableAutoDependencyCorrelation=!0),X.defaultClient.config.enableSendLiveMetrics==null&&(X.defaultClient.config.enableSendLiveMetrics=!1),X.defaultClient.config.enableAutoCollectExtendedMetrics==null&&(X.defaultClient.config.enableAutoCollectExtendedMetrics=!0),X.defaultClient.config.enableWebInstrumentation==null&&(X.defaultClient.config.enableWebInstrumentation=!1),X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions==null&&(X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=!1))}function yve(){if(X.defaultClient){ac=!0,$Ve(),gC.enable(X.defaultClient.config.enableAutoCollectExternalLoggers,X.defaultClient.config.enableAutoCollectConsole),vC.enable(X.defaultClient.config.enableAutoCollectExceptions),yC.enable(X.defaultClient.config.enableAutoCollectPerformance),bC.enable(X.defaultClient.config.enableAutoCollectPreAggregatedMetrics),_C.enable(X.defaultClient.config.enableAutoCollectHeartbeat),kv.useAutoCorrelation(X.defaultClient.config.enableAutoDependencyCorrelation,X.defaultClient.config.enableUseAsyncHooks),kv.enable(X.defaultClient.config.enableAutoCollectRequests),xC.enable(X.defaultClient.config.enableAutoCollectDependencies),Lx.enable(X.defaultClient.config.enableWebInstrumentation,X.defaultClient.config.webInstrumentationConnectionString),X.defaultClient.config.enableSendLiveMetrics&&(X.liveMetricsClient||(X.liveMetricsClient=new gve(X.defaultClient.config,X.defaultClient.context,X.defaultClient.getAuthorizationHandler),n4=new ZG(X.liveMetricsClient,1e3,!0),X.liveMetricsClient.addCollector(n4),X.defaultClient.quickPulseClient=X.liveMetricsClient),X.liveMetricsClient.enable(X.defaultClient.config.enableSendLiveMetrics)),SC.enable(X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions);var t=eV.AutoCollectNativePerformance.parseEnabled(X.defaultClient.config.enableAutoCollectExtendedMetrics,X.defaultClient.config);Ox.enable(X.defaultClient.config.enableAutoCollectExtendedMetrics,t.disabledMetrics),X.defaultClient&&X.defaultClient.channel&&X.defaultClient.channel.setUseDiskRetryCaching(X.defaultClient.config.enableUseDiskRetryCaching,X.defaultClient.config.enableResendInterval,X.defaultClient.config.enableMaxBytesOnDisk)}else hC.warn("Start cannot be called before setup");return tV}X.start=yve;function WVe(){return JG.CorrelationContextManager.getCurrentContext()}X.getCorrelationContext=WVe;function KVe(t,e){return JG.CorrelationContextManager.startOperation(t,e)}X.startOperation=KVe;function YVe(t,e){return JG.CorrelationContextManager.wrapCallback(t,e)}X.wrapWithCorrelationContext=YVe;var tV=function(){function t(){}return t.setDistributedTracingMode=function(e){return hve.w3cEnabled=e===vve.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),X.defaultClient&&(X.defaultClient.config.enableAutoCollectExternalLoggers=e,X.defaultClient.config.enableAutoCollectConsole=r,ac&&gC.enable(e,r)),t},t.setAutoCollectExceptions=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectExceptions=e,ac&&vC.enable(e)),t},t.setAutoCollectPerformance=function(e,r){if(r===void 0&&(r=!0),X.defaultClient){X.defaultClient.config.enableAutoCollectPerformance=e;var n=eV.AutoCollectNativePerformance.parseEnabled(r,X.defaultClient.config);X.defaultClient.config.enableAutoCollectExtendedMetrics=n.isEnabled,ac&&(yC.enable(e),Ox.enable(X.defaultClient.config.enableAutoCollectExtendedMetrics,n.disabledMetrics))}return t},t.setAutoCollectPreAggregatedMetrics=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectPreAggregatedMetrics=e,ac&&bC.enable(e)),t},t.setAutoCollectHeartbeat=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectHeartbeat=e,ac&&_C.enable(e)),t},t.enableAutoWebSnippetInjection=function(e,r){return X.defaultClient&&(X.defaultClient.config.enableWebInstrumentation=e,X.defaultClient.config.webInstrumentationConnectionString=r,ac&&Lx.enable(X.defaultClient.config.enableAutoWebSnippetInjection,X.defaultClient.config.webSnippetConnectionString)),t},t.enableWebInstrumentation=function(e,r){return X.defaultClient&&(X.defaultClient.config.enableWebInstrumentation=e,X.defaultClient.config.webInstrumentationConnectionString=r,ac&&Lx.enable(X.defaultClient.config.enableWebInstrumentation,X.defaultClient.config.webInstrumentationConnectionString)),t},t.setAutoCollectRequests=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectRequests=e,ac&&kv.enable(e)),t},t.setAutoCollectDependencies=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectDependencies=e,ac&&xC.enable(e)),t},t.setAutoDependencyCorrelation=function(e,r){return X.defaultClient&&(X.defaultClient.config.enableAutoDependencyCorrelation=e,X.defaultClient.config.enableUseAsyncHooks=r,ac&&kv.useAutoCorrelation(e,r)),t},t.setUseDiskRetryCaching=function(e,r,n){return X.defaultClient&&(X.defaultClient.config.enableUseDiskRetryCaching=e,X.defaultClient.config.enableResendInterval=r,X.defaultClient.config.enableMaxBytesOnDisk=n,X.defaultClient.channel&&X.defaultClient.channel.setUseDiskRetryCaching(X.defaultClient.config.enableUseDiskRetryCaching,X.defaultClient.config.enableResendInterval,X.defaultClient.config.enableMaxBytesOnDisk)),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),hC.enableDebug=e,hC.disableWarnings=!r,t},t.setAutoCollectIncomingRequestAzureFunctions=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=e,ac&&SC.enable(e)),t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),X.defaultClient?(!X.liveMetricsClient&&e?(X.liveMetricsClient=new gve(X.defaultClient.config,X.defaultClient.context,X.defaultClient.getAuthorizationHandler),n4=new ZG(X.liveMetricsClient,1e3,!0),X.liveMetricsClient.addCollector(n4),X.defaultClient.quickPulseClient=X.liveMetricsClient):X.liveMetricsClient&&X.liveMetricsClient.enable(e),X.defaultClient.config.enableSendLiveMetrics=e,t):(hC.warn("Live metrics client cannot be setup without the default client"),t)},t.start=yve,t}();X.Configuration=tV;function QVe(){hve.w3cEnabled=!0,X.defaultClient=null,ac=!1,gC&&gC.dispose(),vC&&vC.dispose(),yC&&yC.dispose(),bC&&bC.dispose(),_C&&_C.dispose(),Lx&&Lx.dispose(),Ox&&Ox.dispose(),kv&&kv.dispose(),xC&&xC.dispose(),X.liveMetricsClient&&(X.liveMetricsClient.enable(!1),X.liveMetricsClient=void 0),SC&&SC.dispose()}X.dispose=QVe});var sV=P(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.TargetPopulation=ch.Filters=ch.VSCodeFilterProvider=void 0;var o4=require("vscode"),oV=class t{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case sd.ApplicationVersion:return t.trimVersionSuffix(o4.version);case sd.Build:return o4.env.appName;case sd.ClientId:return o4.env.machineId;case sd.ExtensionName:return this.extensionName;case sd.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case sd.Language:return o4.env.language;case sd.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(sd);for(let n of r)e.set(n,this.getFilterValue(n));return e}};ch.VSCodeFilterProvider=oV;var sd;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(sd||(ch.Filters=sd={}));var Sve;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(Sve||(ch.TargetPopulation=Sve={}))});var Eve=P(s4=>{"use strict";Object.defineProperty(s4,"__esModule",{value:!0});s4.BaseFeatureProvider=void 0;var aV=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};s4.BaseFeatureProvider=aV});var Tve=P(a4=>{"use strict";Object.defineProperty(a4,"__esModule",{value:!0});a4.FilteredFeatureProvider=void 0;var ZVe=Eve(),cV=class extends ZVe.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};a4.FilteredFeatureProvider=cV});var Ive=P(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.TasApiFeatureProvider=uh.TASAPI_FETCHERROR_EVENTNAME=void 0;var eze=Tve();uh.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var uV="ErrorType",lV=class extends eze.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let c=a,u=new Map;c.responseReceived&&!c.responseOk?u.set(uV,"ServerError"):c.responseReceived===!1?u.set(uV,"NoResponse"):u.set(uV,"GenericError"),this.telemetry.postEvent(uh.TASAPI_FETCHERROR_EVENTNAME,u)}if(!n)throw Error(uh.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let u=c+(a.Parameters[c]?"":"cf");s.includes(u)||s.push(u)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};uh.TasApiFeatureProvider=lV});var Cve=P(Fx=>{"use strict";Object.defineProperty(Fx,"__esModule",{value:!0});Fx.HttpClient=Fx.FetchError=void 0;var Mx=class extends Error{constructor(e,r,n){super(e),this.responseReceived=r,this.responseOk=n}};Fx.FetchError=Mx;var dV=class{constructor(e){this.endpoint=e}async get(e){let r=await fetch(this.endpoint,{method:"GET",headers:e?.headers});if(!r)throw new Mx("No response received",!1);if(!r.ok)throw new Mx("Response not ok",!0,!1);let n=await r.json();if(!n)throw new Mx("No data received",!1);return{data:n}}};Fx.HttpClient=dV});var wve=P(c4=>{"use strict";Object.defineProperty(c4,"__esModule",{value:!0});c4.MemoryKeyValueStorage=void 0;var pV=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};c4.MemoryKeyValueStorage=pV});var Rve=P(u4=>{"use strict";Object.defineProperty(u4,"__esModule",{value:!0});u4.ExperimentationServiceBase=void 0;var tze=wve(),fV=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,r,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new tze.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`);let n=this.features.configs.find(i=>i.Id===e);return n?.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};u4.ExperimentationServiceBase=fV});var Ave=P(l4=>{"use strict";Object.defineProperty(l4,"__esModule",{value:!0});l4.PollingService=void 0;var mV=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};l4.PollingService=mV});var Pve=P(d4=>{"use strict";Object.defineProperty(d4,"__esModule",{value:!0});d4.ExperimentationServiceAutoPolling=void 0;var rze=Rve(),nze=Ave(),hV=class extends rze.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new nze.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};d4.ExperimentationServiceAutoPolling=hV});var kve=P(f4=>{"use strict";Object.defineProperty(f4,"__esModule",{value:!0});f4.ExperimentationService=void 0;var ize=Ive(),oze=Cve(),sze=Pve(),p4=class extends sze.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new ize.TasApiFeatureProvider(new oze.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};f4.ExperimentationService=p4;p4.REFRESH_RATE_IN_MINUTES=30});var Dve=P(m4=>{"use strict";Object.defineProperty(m4,"__esModule",{value:!0});m4.ExperimentationService=void 0;var aze=kve();Object.defineProperty(m4,"ExperimentationService",{enumerable:!0,get:function(){return aze.ExperimentationService}})});var Nve=P(h4=>{"use strict";Object.defineProperty(h4,"__esModule",{value:!0});h4.MementoKeyValueStorage=void 0;var gV=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};h4.MementoKeyValueStorage=gV});var Lve=P(yV=>{"use strict";Object.defineProperty(yV,"__esModule",{value:!0});var vV=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};yV.default=vV});var Mve=P(Ux=>{"use strict";Object.defineProperty(Ux,"__esModule",{value:!0});Ux.getExperimentationServiceAsync=Ux.getExperimentationService=void 0;var cze=sV(),uze=Dve(),bV=require("vscode"),lze=Nve(),dze=Lve(),pze="https://default.exp-tas.com/vscode/ab",fze="query-expfeature",mze="abexp.assignmentcontext",hze="VSCode.ABExp.FeatureData",gze=1e3*60*30;function Ove(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=bV.workspace.getConfiguration("telemetry");if(!(bV.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):bV.env.isTelemetryEnabled))return new dze.default;let u=[new cze.VSCodeFilterProvider(t,e,r),...o],l=new lze.MementoKeyValueStorage(i);return new uze.ExperimentationService({filterProviders:u,telemetry:n,storageKey:hze,keyValueStorage:l,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:mze,telemetryEventName:fze,endpoint:pze,refetchInterval:gze})}Ux.getExperimentationService=Ove;async function vze(t,e,r,n,i,...o){let s=Ove(t,e,r,n,i,...o);return await s.initializePromise,s}Ux.getExperimentationServiceAsync=vze});var Uve=P(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.TargetPopulation=lh.getExperimentationServiceAsync=lh.getExperimentationService=void 0;var Fve=Mve();Object.defineProperty(lh,"getExperimentationService",{enumerable:!0,get:function(){return Fve.getExperimentationService}});Object.defineProperty(lh,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return Fve.getExperimentationServiceAsync}});var yze=sV();Object.defineProperty(lh,"TargetPopulation",{enumerable:!0,get:function(){return yze.TargetPopulation}})});var qve=P(y4=>{"use strict";Object.defineProperty(y4,"__esModule",{value:!0});y4.BaseTelemetryReporter=void 0;var _V=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let o of Object.keys(i??{})){let s=i[o];typeof o=="string"&&s!==void 0&&(i[o]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};y4.BaseTelemetryReporter=_V});var Hve=P(b4=>{"use strict";Object.defineProperty(b4,"__esModule",{value:!0});b4.BaseTelemetrySender=void 0;var Yp;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(Yp||(Yp={}));var xV=class{constructor(e,r){this._instantiationStatus=Yp.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==Yp.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==Yp.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Yp.NOT_INSTANTIATED&&(this._instantiationStatus=Yp.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=Yp.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=Yp.INSTANTIATED}))}};b4.BaseTelemetrySender=xV});var EV=P(_4=>{"use strict";Object.defineProperty(_4,"__esModule",{value:!0});_4.TelemetryUtil=void 0;var SV=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.4"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};_4.TelemetryUtil=SV});var Bx,Qp,ad,Vu,qx,IC,TV=I(()=>{Bx="function",Qp="object",ad="undefined",Vu="prototype",qx=Object,IC=qx[Vu]});var xi,oi,Hx,dh,Xp,Gc,CC,Jp,wC,RC,jve,Vc,AC,Jr,jx,si,Gx,IV,cc,CV,wV,Zp,Ra,$t=I(()=>{xi=void 0,oi=null,Hx="",dh="function",Xp="object",Gc="prototype",CC="__proto__",Jp="undefined",wC="constructor",RC="Symbol",jve="_polyfill",Vc="length",AC="name",Jr="call",jx="toString",si=Object,Gx=si[Gc],IV=String,cc=IV[Gc],CV=Math,wV=Array,Zp=wV[Gc],Ra=Zp.slice});function bs(t,e){try{return{v:t.apply(this,e)}}catch(r){return{e:r}}}var Vx=I(()=>{});function Gve(t,e){var r=bs(t);return r.e?e:r.v}var Vve=I(()=>{Vx()});function x4(t){return function(e){return typeof e===t}}function zve(t){var e="[object "+t+"]";return function(r){return!!(r&&PC(r)===e)}}function PC(t){return Gx.toString.call(t)}function S4(t,e){return typeof t===e}function xt(t){return typeof t===Jp||t===Jp}function _e(t){return t===oi||xt(t)}function AV(t){return t===oi||!E4(t)}function E4(t){return!!t||t!==xi}function PV(t){return!RV&&(RV=["string","number","boolean",Jp,"symbol","bigint"]),t!==Xp&&RV.indexOf(t)!==-1}function fn(t){return!t&&_e(t)?!1:!!t&&typeof t===Xp}function fh(t){return!!(t&&t.then&&ct(t.then))}function T4(t){return!t||!zc(t)}function zc(t){return!(!t||Gve(function(){return!(t&&0+t)},!t))}var RV,wt,ct,Ke,zx,_s,zu,ph,uc=I(()=>{$t();Vve();wt=x4("string"),ct=x4(dh);Ke=wV.isArray,zx=zve("Date"),_s=x4("number"),zu=x4("boolean"),ph=zve("Error")});var Dv,I4=I(()=>{$t();Dv=si.getOwnPropertyDescriptor});function Si(t,e){return!!t&&Gx.hasOwnProperty[Jr](t,e)}var C4=I(()=>{$t()});function $ve(t,e){return Si(t,e)||!!Dv(t,e)}var Aa,w4=I(()=>{$t();I4();C4();Aa=si.hasOwn||$ve});function Ve(t,e,r){if(t&&fn(t)){for(var n in t)if(Aa(t,n)&&e[Jr](r||t,n,t[n])===-1)break}}var mh=I(()=>{uc();$t();w4()});function kV(t,e,r,n){var i={};return Ve(t,function(o,s){i[o]=e?s:o,i[s]=r?s:o}),n(i)}var Wve=I(()=>{mh()});function zn(t){throw new Error(t)}function kn(t){throw new TypeError(t)}var hh=I(()=>{});function Kve(t){var e=[];return Ve(t,function(r,n){e.push([r,n])}),e}function Yve(t){var e=[];return Ve(t,function(r,n){e.push(n)}),e}var Qve=I(()=>{mh()});function Xve(t){return t}function _ze(t){return t[CC]||oi}function Ys(t){return DV&&Ve(t,function(e,r){(Ke(r)||fn(r))&&DV(r)}),cd(t)}var DV,Nv,no,cd,R4,$x,xze,MPt,Wx=I(()=>{$t();uc();mh();Qve();DV=si.freeze;Nv=si.assign,no=si.keys;cd=DV||Xve,R4=si.seal||Xve,$x=si.getPrototypeOf||_ze,xze=si.entries||Kve,MPt=si.values||Yve});function NV(t){return kV(t,1,0,Ys)}function LV(t){return kV(t,0,0,Ys)}function Jve(t){var e={};return Ve(t,function(r,n){e[r]=n[1],e[n[0]]=n[1]}),Ys(e)}function OV(t){return Jve(t)}var MV=I(()=>{Wve();mh();Wx()});var A4,FV=I(()=>{MV();A4=LV({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12})});var In,Lv=I(()=>{$t();In=IV});function BV(){var t;return typeof globalThis!==Jp&&(t=globalThis),!t&&typeof self!==Jp&&(t=self),!t&&typeof window!==Jp&&(t=window),!t&&typeof global!==Jp&&(t=global),t}function P4(){if(!UV){var t=bs(BV).v||{};UV=t[Zve]=t[Zve]||{}}return UV}var Zve,UV,k4=I(()=>{Vx();$t();Zve="__tsUtils$gblCfg"});function Be(t,e){var r=Hx,n=Gx[jx][Jr](t);n===Sze&&(t={stack:In(t.stack),message:In(t.message),name:In(t.name)});try{r=JSON.stringify(t,oi,e?typeof e=="number"?e:4:xi),r=r&&r.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||In(t)}catch(i){r=" - "+Be(i,e)}return n+": "+r}var Sze,gh=I(()=>{$t();Lv();Sze="[object Error]"});function $u(t,e,r){var n=e&&e[t];return function(i){var o=i&&i[t]||n;if(o||r){var s=arguments;return(o||r).apply(i,o?Ra[Jr](s,1):s)}kn('"'+In(t)+'" not defined for '+Be(i))}}function eye(t){return function(e){return e[t]}}var $c,Wc=I(()=>{gh();hh();Lv();$t();$c=$u});var ikt,tye,rye=I(()=>{$t();ikt=CV.min,tye=CV.max});var qV,nye=I(()=>{$t();Wc();qV=$c("slice",cc)});function iye(t,e,r){return _e(t)&&kn("'polyStrSubstr called with invalid "+Be(t)),r<0?Hx:(e=e||0,e<0&&(e=tye(e+t[Vc],0)),xt(r)?qV(t,e):qV(t,e,e+r))}function vh(t,e){return ai(t,0,e)}var ai,Wu,D4=I(()=>{uc();gh();hh();$t();Wc();rye();nye();ai=$c("substring",cc),Wu=$u("substr",cc,iye)});function Eze(){if(!HV){var t=P4();HV=t.gblSym=t.gblSym||{k:{},s:{}}}return HV}function L4(t){var e={description:In(t),toString:function(){return RC+"("+t+")"}};return e[jve]=!0,e}function sye(t){var e=Eze();if(!Aa(e.k,t)){var r=L4(t),n=no(e.s).length;r[oye]=function(){return n+"_"+r[jx]()},e.k[t]=r,e.s[r[oye]()]=In(t)}return e.k[t]}function aye(t){!N4&&(N4={});var e,r=A4[t];return r&&(e=N4[r]=N4[r]||L4(RC+"."+r)),e}var oye,HV,N4,cye=I(()=>{FV();$t();w4();Lv();k4();Wx();oye="_urid"});function uye(t){var e={};if(e[O4.c]=!0,e[O4.e]=!0,t.l){e.get=function(){return t.l.v};var r=Dv(t.l,"v");r&&r.set&&(e.set=function(n){t.l.v=n})}return Ve(t,function(n,i){e[O4[n]]=xt(i)?e[O4[n]]:i}),e}function M4(t,e,r,n,i,o){var s={e:o,c:i};return r&&(s.g=r),n&&(s.s=n),ci(t,e,uye(s))}function Dr(t,e,r){return ci(t,e,uye(r))}var O4,ci,Tze,Ov=I(()=>{$t();uc();mh();I4();O4={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};ci=si.defineProperty,Tze=si.defineProperties});function Ku(){ui=P4()}function Yu(t){var e={};return!ui&&Ku(),e.b=ui.lzy,ci(e,"v",{configurable:!0,get:function(){var r=t();return ui.lzy||ci(e,"v",{value:r}),e.b=ui.lzy,r}}),e}var ui,Mv=I(()=>{k4();Ov()});function Kx(t,e){return Yu(function(){var r=bs(t);return r.e?e:r.v})}var jV=I(()=>{Mv();Vx()});function kC(t){return ci({toJSON:function(){return t}},"v",{value:t})}var GV=I(()=>{Ov()});function NC(t,e){var r;return function(){return!ui&&Ku(),(!r||ui.lzy)&&(r=kC(bs(t,e).v)),r.v}}function ef(t){return Yu(function(){return bs(Gr,[t]).v||xi})}function xs(t){return!ui&&Ku(),(!DC||t===!1||ui.lzy)&&(DC=kC(bs(BV).v||oi)),DC.v}function Gr(t,e){var r=!DC||e===!1?xs(e):DC.v;return r&&r[t]?r[t]:t===lye?Wn():oi}function yh(){return!!$n()}function bh(){return!!Wn()}function Yx(){return!!Ui()}function F4(){return!!LC()}var lye,DC,$n,Wn,Ui,LC,VV,OC=I(()=>{$t();k4();Mv();GV();Vx();lye="window";$n=NC(Gr,["document"]);Wn=NC(Gr,[lye]);Ui=NC(Gr,["navigator"]);LC=NC(Gr,["history"]),VV=NC(function(){return!!bs(function(){return process&&(process.versions||{}).node}).v})});function U4(){(!Ss||!Ss.b)&&(Ss=ef(RC),zV=Kx(function(){return Ss.v?Ss.v.for:xi},xi),Ize=Kx(function(){return Ss.v?Ss.v.keyFor:xi},xi))}function $V(){return!!dye()}function dye(){return!ui&&Ku(),(!Ss||ui.lzy)&&U4(),Ss.v}function Fv(t,e){var r=A4[t];return!ui&&Ku(),(!Ss||ui.lzy)&&U4(),Ss.v?Ss.v[r||t]:e?xi:aye(t)}function Uv(t,e){return!ui&&Ku(),(!Ss||ui.lzy)&&U4(),Ss.v?Ss.v(t):e?oi:L4(t)}function MC(t){return!ui&&Ku(),(!zV||!Ss||ui.lzy)&&U4(),(zV.v||sye)(t)}var Ss,zV,Ize,B4=I(()=>{$t();cye();FV();Mv();jV();OC()});function FC(t){return!!t&&ct(t.next)}function pye(t){return!AV(t)&&ct(t[Fv(3)])}var WV=I(()=>{B4();uc()});function fye(t,e,r){if(t&&(FC(t)||(!q4&&(q4=kC(Fv(3))),t=t[q4.v]?t[q4.v]():null),FC(t))){var n=void 0,i=void 0;try{for(var o=0;!(i=t.next()).done&&e[Jr](r||t,i.value,o,t)!==-1;)o++}catch(s){n={e:s},t.throw&&(i=null,t.throw(n))}finally{try{i&&!i.done&&t.return&&t.return(i)}finally{if(n)throw n.e}}}}var q4,mye=I(()=>{GV();$t();B4();WV()});function tf(t,e,r){return t.apply(e,r)}var H4=I(()=>{});function Kc(t,e){return!xt(e)&&t&&(Ke(e)?tf(t.push,t,e):FC(e)||pye(e)?fye(e,function(r){t.push(r)}):t.push(e)),t}var hye=I(()=>{uc();WV();mye();H4()});function me(t,e,r){if(t)for(var n=t[Vc]>>>0,i=0;i<n&&!(i in t&&e[Jr](r||t,t[i],i,t)===-1);i++);}var j4=I(()=>{$t()});var hr,KV=I(()=>{$t();Wc();hr=$c("indexOf",Zp)});var ud,gye=I(()=>{$t();Wc();ud=$c("map",Zp)});function _h(t,e,r){return(t&&t.slice||Ra).apply(t,Ra[Jr](arguments,1))}var vye=I(()=>{$t()});function yye(t,e,r){return hr(t,e,r)!==-1}var bye=I(()=>{KV()});var G4,_ye=I(()=>{$t();Wc();bye();G4=$u("includes",Zp,yye)});var Qx,xye=I(()=>{$t();Wc();Qx=$c("reduce",Zp)});function Cze(t){if(!t)return{};var e=typeof t;e!==Xp&&e!==dh&&kn("Prototype must be an Object or function: "+Be(t));function r(){}return r[Gc]=t,new r}var Yc,YV=I(()=>{$t();gh();hh();Yc=si.create||Cze});function XV(t,e){var r=si.setPrototypeOf||function(n,i){!QV&&(QV=Yu(function(){var o;return o={},o[CC]=[],o instanceof Array})),QV.v?n[CC]=i:Ve(i,function(o,s){return n[o]=s})};return r(t,e)}var QV,Sye=I(()=>{Mv();$t();mh()});function wze(t,e,r){bs(Dr,[e,AC,{v:t,c:!0,e:!1}]),e=XV(e,r);function n(){this.constructor=e,bs(Dr,[this,AC,{v:t,c:!0,e:!1}])}return e[Gc]=r===oi?Yc(r):(n[Gc]=r[Gc],new n),e}function Eye(t,e){e&&(t[AC]=e)}function JV(t,e,r){var n=r||Error,i=n[Gc][AC],o=Error.captureStackTrace;return wze(t,function(){var s=this,a=arguments;try{bs(Eye,[n,t]);var c=tf(n,s,Ra[Jr](a))||s;if(c!==s){var u=$x(s);u!==$x(c)&&XV(c,u)}return o&&o(c,s[wC]),e&&e(c,a),c}finally{bs(Eye,[n,i])}},n)}var Tye=I(()=>{H4();$t();YV();Ov();Wx();Sye();Vx()});function Kn(){return(Date.now||Iye)()}function Iye(){return new Date().getTime()}var ZV=I(()=>{});function Rze(t){return function(r){return _e(r)&&kn("strTrim called ["+Be(r)+"]"),r&&r.replace&&(r=r.replace(t,Hx)),r}}var Cye,wye=I(()=>{uc();gh();hh();$t();Cye=Rze(/^\s+|(?=\s)\s+$/g)});var wr,Rye=I(()=>{$t();Wc();wye();wr=$u("trim",cc,Cye)});function io(t){if(!t||typeof t!==Xp)return!1;rz||(rz=bh()?Wn():!0);var e=!1;if(t!==rz){tz||(ez=Function[Gc][jx],tz=ez[Jr](si));try{var r=$x(t);e=!r,e||(Si(r,wC)&&(r=r[wC]),e=r&&typeof r===dh&&ez[Jr](r)===tz)}catch{}}return e}var ez,tz,rz,nz=I(()=>{OC();$t();C4();Wx()});function Aze(t){return t.value&&Nye(t),!0}function Pze(t,e,r,n){var i;return me(t,function(o){if(o.k===e)return i=o,-1}),i||(i={k:e,v:e},t.push(i),n(i)),i.v}function iz(t,e,r,n){var i=r.handler,o=r.path?n?r.path.concat(n):r.path:[],s={handler:r.handler,src:r.src,path:o},a=typeof e,c=!1,u=!1;e&&a===Xp?c=io(e):u=e===oi||PV(a);var l={type:a,isPrim:u,isPlain:c,value:e,result:e,path:o,origin:r.src,copy:function(d,p){return iz(t,d,p?s:r,p)},copyTo:function(d,p){return Pye(t,d,p,s)}};return l.isPrim?i&&i[Jr](r,l)?l.result:e:Pze(t,e,o,function(d){Dr(l,"result",{g:function(){return d.v},s:function(m){d.v=m}});for(var p=0,f=i;!(f||(p<Aye.length?Aye[p++]:Aze))[Jr](r,l);)f=oi})}function Pye(t,e,r,n){if(!_e(r))for(var i in r)e[i]=iz(t,r[i],n,i);return e}function kye(t,e,r){var n={handler:r,src:e,path:[]};return Pye([],t,e,n)}function Dye(t,e){var r={handler:e,src:t};return iz([],t,r)}function kze(t){var e=t.value;if(Ke(e)){var r=t.result=[];return r.length=e.length,t.copyTo(r,e),!0}return!1}function Dze(t){var e=t.value;return zx(e)?(t.result=new Date(e.getTime()),!0):!1}function Nze(t){return t.type===dh}function Nye(t){var e=t.value;if(e&&t.isPlain){var r=t.result={};return t.copyTo(r,e),!0}return!1}var Aye,Lye=I(()=>{j4();uc();$t();Ov();nz();Aye=[kze,Nye,Nze,Dze]});function Lze(t,e){return me(e,function(r){kye(t,r)}),t}function V4(t,e,r,n,i,o,s){return Lze(Dye(t)||{},Ra[Jr](arguments))}var Oye=I(()=>{j4();$t();Lye()});var Xx,Mye=I(()=>{$t();Wc();Xx=eye(Vc)});function rf(){return!ui&&Ku(),(!z4||!z4.b&&ui.lzy)&&(z4=ef("performance")),z4.v}function Jx(){var t=rf();return t&&t.now?t.now():Kn()}var z4,Fye=I(()=>{ZV();OC();Mv()});function Oze(t,e,r){wt(t)||kn("'"+Be(t)+"' is not a string");var n=wt(e)?e:In(e),i=!xt(r)&&r<t[Vc]?r:t[Vc];return ai(t,i-n[Vc],i)===n}var xh,Uye=I(()=>{uc();gh();hh();$t();Wc();Lv();D4();xh=$u("endsWith",cc,Oze)});var Qs,Bye=I(()=>{$t();Wc();Qs=$c("indexOf",cc)});function Mze(t,e,r){wt(t)||kn("'"+Be(t)+"' is not a string");var n=wt(e)?e:In(e),i=r>0?r:0;return ai(t,i,i+n[Vc])===n}var Bv,qye=I(()=>{uc();gh();hh();$t();Wc();Lv();D4();Bv=$u("startsWith",cc,Mze)});function Hye(t,e,r){var n=!0,i=t?e(oi):oi,o;function s(){return n=!1,i&&i[sz]&&i[sz](),o}function a(){i&&r(i),i=oi}function c(){return i=e(i),n||s(),o}function u(l){!l&&i&&a(),l&&!i&&c()}return o={cancel:a,refresh:c},o[az]=function(){return i&&i[az]?i[az]():n},o[oz]=function(){return n=!0,i&&i[oz]&&i[oz](),o},o[sz]=s,o=ci(o,Fze,{get:function(){return!!i},set:u}),{h:o,dn:function(){i=oi}}}var oz,sz,az,Fze,jye=I(()=>{$t();Ov();oz="ref",sz="unref",az="hasRef",Fze="enabled"});function cz(t,e,r){var n=Ke(e),i=n?e.length:0,o=(i>0?e[0]:n?xi:e)||setTimeout,s=(i>1?e[1]:xi)||clearTimeout,a=r[0];r[0]=function(){c.dn(),tf(a,xi,Ra[Jr](arguments))};var c=Hye(t,function(u){if(u){if(u.refresh)return u.refresh(),u;tf(s,xi,[u])}return tf(o,xi,r)},function(u){tf(s,xi,[u])});return c.h}function Pa(t,e){return cz(!0,xi,Ra[Jr](arguments))}function uz(t,e,r){return cz(!0,t,Ra[Jr](arguments,1))}function lz(t,e){return cz(!1,xi,Ra[Jr](arguments))}var Gye=I(()=>{H4();uc();$t();jye()});var dt=I(()=>{hye();j4();_ye();KV();gye();xye();vye();uc();Tye();ZV();gh();MV();OC();Oye();Mv();Mye();Fye();jV();hh();YV();Ov();mh();I4();w4();C4();nz();Wx();Uye();Bye();qye();D4();Lv();Rye();B4();Gye()});function ka(t,e){typeof e!==Bx&&e!==null&&kn("Class extends value "+String(e)+" is not a constructor or null"),dz(t,e);function r(){this.constructor=t}t[Vu]=e===null?Yc(e):(r[Vu]=e[Vu],new r)}function $4(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}var pLt,fLt,Vye,qze,Qc,dz,zye=I(()=>{dt();TV();pLt=(xs()||{}).Symbol,fLt=(xs()||{}).Reflect,Vye="hasOwnProperty",qze=function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)IC[Vye].call(e,i)&&(t[i]=e[i])}return t},Qc=Nv||qze,dz=function(t,e){return dz=qx.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[Vye](i)&&(r[i]=n[i])},dz(t,e)}});var $ye=I(()=>{});var Da=I(()=>{TV();zye();$ye();dt()});function Q4(t){return t&&(t===bz[nf]||t===Array[nf])}function _z(t){return Q4(t)||t===Function[nf]}function qv(t){var e;if(t){if(BC)return BC(t);var r=t[yz]||t[nf]||(t[X4]?t[X4][nf]:null);e=t[K4]||r,Si(t,K4)||(delete t[pz],e=t[K4]=t[pz]||t[K4],t[pz]=r)}return e}function eL(t,e){var r=[];if(Yye)r=Yye(t);else for(var n in t)typeof n=="string"&&Si(t,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)e(r[i])}function xz(t,e,r){return e!==X4&&typeof t[e]===J4&&(r||Si(t,e))&&e!==yz&&e!==nf}function tL(t){kn("DynamicProto: "+t)}function jze(t){var e=Yc(null);return eL(t,function(r){!e[r]&&xz(t,r,!1)&&(e[r]=t[r])}),e}function Sz(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}function Gze(t,e,r,n){function i(c,u,l){var d=u[l];if(d[mz]&&n){var p=c[Z4]||{};p[UC]!==!1&&(d=(p[u[Zx]]||{})[l]||d)}return function(){return d.apply(c,arguments)}}var o=Yc(null);eL(r,function(c){o[c]=i(e,r,c)});for(var s=qv(t),a=[];s&&!_z(s)&&!Sz(a,s);)eL(s,function(c){!o[c]&&xz(s,c,!BC)&&(o[c]=i(e,s,c))}),a.push(s),s=qv(s);return o}function Vze(t,e,r,n){var i=null;if(t&&Si(r,Zx)){var o=t[Z4]||Yc(null);if(i=(o[r[Zx]]||Yc(null))[e],i||tL("Missing ["+e+"] "+J4),!i[hz]&&o[UC]!==!1){for(var s=!Si(t,e),a=qv(t),c=[];s&&a&&!_z(a)&&!Sz(c,a);){var u=a[e];if(u){s=u===n;break}c.push(a),a=qv(a)}try{s&&(t[e]=i),i[hz]=1}catch{o[UC]=!1}}}return i}function zze(t,e,r){var n=e[t];return n===r&&(n=qv(e)[t]),typeof n!==J4&&tL("["+t+"] is not a "+J4),n}function $ze(t,e,r,n,i){function o(c,u){var l=function(){var d=Vze(this,u,c,l)||zze(u,c,l);return d.apply(this,arguments)};return l[mz]=1,l}if(!Q4(t)){var s=r[Z4]=r[Z4]||Yc(null);if(!Q4(s)){var a=s[e]=s[e]||Yc(null);s[UC]!==!1&&(s[UC]=!!i),Q4(a)||eL(r,function(c){xz(r,c,!1)&&r[c]!==n[c]&&(a[c]=r[c],delete r[c],(!Si(t,c)||t[c]&&!t[c][mz])&&(t[c]=o(t,c)))})}}}function Wze(t,e){if(BC){for(var r=[],n=qv(e);n&&!_z(n)&&!Sz(r,n);){if(n===t)return!0;r.push(n),n=qv(n)}return!1}return!0}function fz(t,e){return Si(t,nf)?t.name||e||Wye:((t||{})[X4]||{}).name||e||Wye}function Wt(t,e,r,n){Si(t,nf)||tL("theClass is an invalid class definition.");var i=t[nf];Wze(i,e)||tL("["+fz(t)+"] not in hierarchy of ["+fz(e)+"]");var o=null;Si(i,Zx)?o=i[Zx]:(o=Hze+fz(t,"_")+"$"+vz.n,vz.n++,i[Zx]=o);var s=Wt[Xye],a=!!s[Y4];a&&n&&n[Y4]!==void 0&&(a=!!n[Y4]);var c=jze(e),u=Gze(i,e,c,a);r(e,u);var l=!!BC&&!!s[gz];l&&n&&(l=!!n[gz]),$ze(i,o,e,c,l!==!1)}var W4,X4,nf,J4,Z4,mz,Zx,Hze,hz,UC,Xye,Wye,yz,K4,Kye,pz,Y4,gz,bz,BC,Yye,Qye,vz,_o=I(()=>{dt();X4="constructor",nf="prototype",J4="function",Z4="_dynInstFuncs",mz="_isDynProxy",Zx="_dynClass",Hze="_dynCls$",hz="_dynInstChk",UC=hz,Xye="_dfOpts",Wye="_unknown_",yz="__proto__",K4="_dyn"+yz,Kye="__dynProto$Gbl",pz="_dynInstProto",Y4="useBaseInst",gz="setInstFuncs",bz=Object,BC=bz.getPrototypeOf,Yye=bz.getOwnPropertyNames,Qye=xs(),vz=Qye[Kye]||(Qye[Kye]={o:(W4={},W4[gz]=!0,W4[Y4]=!0,W4),n:1e3});Wt[Xye]=vz.o});var Ez,Jye=I(()=>{"use strict";Ez=100});var Bi,Tz,rL=I(()=>{dt();Bi=NV,Tz=OV});var Qu,Kze,Zye=I(()=>{rL();Qu=Bi({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Kze=Bi({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var Na,Sh,tt,Hv,jv,e1,of,Xu,Xc,tn,Eh,Yt,ld,nL,Gv,sf,dd,La,Th,Iz,Es,Ih,oo,iL,t1,r1,n1,Ch,Cz,Oa,qC,Vv,oL,pd,lc,i1,fd,Ju,Ma,wh,zv,dc,Rh,sL,HC,Jc,aL,Zu,wz,Fa,jC,$v,Rz,Az,Pz,GC,Ah,Wv,el,cL,o1,kz,uL,Kv,Dz,s1,a1,Ph,sn=I(()=>{Na="toLowerCase",Sh="blkVal",tt="length",Hv="rdOnly",jv="notify",e1="warnToConsole",of="throwInternal",Xu="setDf",Xc="watch",tn="logger",Eh="apply",Yt="push",ld="splice",nL="hdlr",Gv="cancel",sf="initialize",dd="identifier",La="isInitialized",Th="getPlugin",Iz="pollInternalLogs",Es="name",Ih="time",oo="processNext",iL="getProcessTelContext",t1="getNotifyMgr",r1="addNotificationListener",n1="removeNotificationListener",Ch="enabled",Cz="stopPollingInternalLogs",Oa="unload",qC="onComplete",Vv="version",oL="loggingLevelConsole",pd="createNew",lc="teardown",i1="messageId",fd="message",Ju="isAsync",Ma="diagLog",wh="_doTeardown",zv="update",dc="getNext",Rh="setNextPlugin",sL="protocol",HC="userAgent",Jc="split",aL="nodeType",Zu="replace",wz="logInternalMessage",Fa="type",jC="handler",$v="status",Rz="itemsReceived",Az="getResponseHeader",Pz="getAllResponseHeaders",GC="isChildEvt",Ah="data",Wv="getCtx",el="setCtx",cL="complete",o1="urlString",kz="sendPOST",uL="headers",Kv="timeout",Dz="setRequestHeader",s1="traceId",a1="spanId",Ph="traceFlags"});function ebe(t,e){Nz||(Nz=JV("AggregationError",function(n,i){i[tt]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw me(e,function(n,i){r+=`
`.concat(i," > ").concat(Be(n))}),new Nz(r,e||[])}var Nz,tbe=I(()=>{dt();sn()});function kh(t,e){return lL(t,function(r){return e?e({value:r,rejected:!1}):r},function(r){return e?e({rejected:!0,reason:r}):r})}function lL(t,e,r,n){var i=t;return fh(t)?(e||r)&&(i=t.then(e,r)):e&&(i=e(t)),n&&rbe(i,n),i}function rbe(t,e){var r=t;return e&&(fh(t)?t.finally?r=t.finally(e):r=t.then(function(n){return e(),n},function(n){throw e(),n}):e()),r}var Lz=I(()=>{dt()});function nbe(t,e,r,n){Oz=Oz||{toString:function(){return"[[PromiseState]]"}},Mz=Mz||{toString:function(){return"[[PromiseResult]]"}},Fz=Fz||{toString:function(){return"[[PromiseIsHandled]]"}},ci(t,Oz,{get:e}),ci(t,Mz,{get:r}),ci(t,Fz,{get:n})}var Oz,Mz,Fz,Uz,ibe=I(()=>{dt();Uz=!1});var dL,Bz=I(()=>{dL=["pending","resolving","resolved","rejected"]});function sbe(t,e,r,n){var i=$n();!pL&&(pL=Kx(function(){var c;return i&&i.createEvent&&(c=i.createEvent("Event")),!!c&&c.initEvent},null));var o=pL.v?i.createEvent("Event"):n?new Event(e):{};if(r&&r(o),pL.v&&o.initEvent(e,!1,!0),o&&t[obe])t[obe](o);else{var s=t["on"+e];if(s)s(o);else{var a=Gr("console");a&&(a.error||a.log)(e,Be(o))}}}var obe,pL,abe=I(()=>{dt();obe="dispatchEvent"});var c1,qz=I(()=>{c1="Promise"});function cbe(t){return ct(t)?t.toString():Be(t)}function lbe(t,e,r){var n=_h(arguments,3),i=0,o=!1,s,a=[],c=Qze++,u=VC.length>0?VC[VC.length-1]:void 0,l=!1,d=null,p;!Hz&&(Hz=ef(c1+"RejectionEvent"));var f=function(x,T){try{VC.push(c),l=!0,d&&d.cancel(),d=null;var L=t(function(M,q){a.push(function(){try{var O=i===2?x:T,Z=xt(O)?s:ct(O)?O(s):O;fh(Z)?Z.then(M,q):O?M(Z):i===3?q(Z):M(Z)}catch(z){q(z)}}),o&&v()},n);return L}finally{VC.pop()}},m=function(x){return f(void 0,x)},h=function(x){var T=x,L=x;return ct(x)&&(T=function(M){return x&&x(),M},L=function(M){throw x&&x(),M}),f(T,L)},g=function(){return dL[i]},v=function(){if(a.length>0){var x=a.slice();a=[],l=!0,e(x),d&&d.cancel(),d=null}},b=function(x,T){return function(L){if(i===T){if(x===2&&fh(L)){i=1,L.then(b(2,1),b(3,1));return}i=x,o=!0,s=L,v(),!l&&x===3&&!d&&(d=Pa(y,Xze))}}},y=function(){if(!l)if(VV())process.emit(ube,s,p);else{var x=Wn()||xs();sbe(x,Yze,function(T){return Dr(T,"promise",{g:function(){return p}}),T.reason=s,T},!!Hz.v)}};p={then:f,catch:m,finally:h},ci(p,"state",{get:g}),Uz&&nbe(p,g,function(){return PC(s)},function(){return l}),$V()&&(p[Fv(11)]="IPromise");var S=function(){return"IPromise"+(Uz?"["+c+(xt(u)?"":":"+u)+"]":"")+" "+g()+(o?" - "+cbe(s):"")};return p.toString=S,function(){ct(r)||kn(c1+": executor is not a function - "+cbe(r));var T=b(3,0);try{r.call(p,b(2,0),T)}catch(L){T(L)}}(),p}function u1(t){return function(e){var r=_h(arguments,1);return t(function(n,i){try{var o=[],s=1;me(e,function(a,c){a&&(s++,lL(a,function(u){o[c]=u,--s===0&&n(o)},i))}),s--,s===0&&n(o)}catch(a){i(a)}},r)}}function l1(t){return function(e){var r=_h(arguments,1);return fh(e)?e:t(function(n){n(e)},r)}}function d1(t){return function(e){var r=_h(arguments,1);return t(function(n,i){i(e)},r)}}var ube,Yze,VC,Qze,Xze,Hz,fL=I(()=>{dt();Lz();ibe();Bz();abe();qz();ube="unhandledRejection",Yze=ube.toLowerCase(),VC=[],Qze=0,Xze=10});function dbe(t){var e=_s(t)?t:0;return function(r){Pa(function(){Jze(r)},e)}}var Jze,pbe=I(()=>{dt();Jze=function(t){me(t,function(e){try{e()}catch{}})}});function p1(t,e){return lbe(p1,dbe(e),t,e)}var d3t,p3t,f3t,fbe=I(()=>{fL();pbe();d3t=u1(p1),p3t=l1(p1),f3t=d1(p1)});function zC(t,e){!jz&&(jz=ef(c1));var r=jz.v;if(!r)return p1(t);ct(t)||kn(c1+": executor is not a function - "+Be(t));var n=0;function i(){return dL[n]}var o=new r(function(s,a){function c(l){n=2,s(l)}function u(l){n=3,a(l)}t(c,u)});return ci(o,"state",{get:i}),o}var jz,_3t,x3t,S3t,mbe=I(()=>{fbe();fL();Bz();dt();qz();_3t=u1(zC),x3t=l1(zC),S3t=d1(zC)});function Xs(t,e){return!Gz&&(Gz=Yu(function(){return zC})),Gz.v.call(this,t,e)}var Gz,Vz,Zze,e$e,hbe=I(()=>{dt();fL();mbe();Vz=u1(Xs),Zze=l1(Xs),e$e=d1(Xs)});var f1=I(()=>{Lz();hbe()});var pc,St,Dh,Yn,mL,$C,af,Yv,Ua,Qv,m1,Nh,h1,md,hL,gL,vL,g1,yL,bL,gbe,qi=I(()=>{pc=void 0,St="",Dh="channels",Yn="core",mL="createPerfMgr",$C="disabled",af="extensionConfig",Yv="extensions",Ua="processTelemetry",Qv="priority",m1="eventsSent",Nh="eventsDiscarded",h1="eventsSendRequest",md="perfEvent",hL="offlineEventsStored",gL="offlineBatchSent",vL="offlineBatchDrop",g1="getPerfMgr",yL="domain",bL="path",gbe="Not dynamic - "});function t$e(t,e){return function(){var r=arguments,n=$z(e);if(n){var i=n.listener;i&&i[t]&&i[t][Eh](i,r)}}}function r$e(){var t=Gr("Microsoft");return t&&(xL=t.ApplicationInsights),xL}function $z(t){var e=xL;return!e&&t.disableDbgExt!==!0&&(e=xL||r$e()),e?e.ChromeDbgExt:null}function vbe(t){if(!_L){_L={};for(var e=0;e<zz[tt];e++)_L[zz[e]]=t$e(zz[e],t)}return _L}var zz,xL,_L,Wz=I(()=>{dt();sn();qi();zz=[m1,Nh,h1,md],xL=null});function xbe(t,e){var r=!1;if(t){try{if(r=e in t,!r){var n=t[Vu];n&&(r=e in n)}}catch{}if(!r)try{var i=new t;r=!xt(i[e])}catch{}}return r}function Zz(t){_be=t}function Xv(t){if(t&&_be){var e=Gr("__mockLocation");if(e)return e}return typeof location===Qp&&location?location:Gr(i$e)}function WC(){return typeof console!==ad?console:Gr(o$e)}function hd(){return!!(typeof JSON===Qp&&JSON||Gr(ybe)!==null)}function Ko(){return hd()?JSON||Gr(ybe):null}function KC(){return Gr(s$e)}function YC(){return Gr(a$e)}function Lh(){var t=Ui();return t&&t.product?t.product===c$e:!1}function Oh(){var t=Ui();if(t&&(t[HC]!==Yz||Kz===null)){Yz=t[HC];var e=(Yz||St)[Na]();Kz=Ei(e,Xz)||Ei(e,Jz)}return Kz}function QC(t){if(t===void 0&&(t=null),!t){var e=Ui()||{};t=e?(e.userAgent||St)[Na]():St}var r=(t||St)[Na]();if(Ei(r,Xz)){var n=$n()||{};return Math.max(parseInt(r[Jc](Xz)[1]),n[n$e]||0)}else if(Ei(r,Jz)){var i=parseInt(r[Jc](Jz)[1]);if(i)return i+4}return null}function Ba(t){return(Qz===null||t===!1)&&(Qz=Yx()&&!!Ui().sendBeacon),Qz}function cf(t){var e=!1;try{e=!!Gr("fetch");var r=Gr("Request");e&&t&&r&&(e=xbe(r,"keepalive"))}catch{}return e}function XC(){return v1===null&&(v1=typeof XDomainRequest!==ad,v1&&y1()&&(v1=v1&&!xbe(Gr(bbe),"withCredentials"))),v1}function y1(){var t=!1;try{var e=Gr(bbe);t=!!e}catch{}return t}function Sbe(t,e){if(t)for(var r=0;r<t[tt];r++){var n=t[r];if(n[Es]&&n[Es]===e)return n}return{}}function e$(t){var e=$n();return e&&t?Sbe(e.querySelectorAll("meta"),t).content:null}function t$(t){var e,r=rf();if(r){var n=r.getEntriesByType("navigation")||[];e=Sbe((n[tt]>0?n[0]:{}).serverTiming,t).description}return e}var n$e,i$e,o$e,ybe,s$e,a$e,c$e,Xz,Jz,bbe,Kz,Yz,_be,v1,Qz,Mh=I(()=>{"use strict";Da();dt();sn();gd();qi();n$e="documentMode",i$e="location",o$e="console",ybe="JSON",s$e="crypto",a$e="msCrypto",c$e="ReactNative",Xz="msie",Jz="trident/",bbe="XMLHttpRequest",Kz=null,Yz=null,_be=!1,v1=null,Qz=null});function Ebe(t){return t?'"'+t[Zu](/\"/g,St)+'"':St}function r$(t,e){var r=WC();if(r){var n="log";r[t]&&(n=t),ct(r[n])&&r[n](e)}}function tl(t,e){return(t||{})[tn]||new Fh(e)}function n$(t){return t||new Fh}function De(t,e,r,n,i,o){o===void 0&&(o=!1),n$(t)[of](e,r,n,i,o)}function Js(t,e){n$(t)[e1](e)}function i$(t,e,r){n$(t)[wz](e,r)}var b1,Tbe,u$e,l$e,d$e,p$e,f$e,Jv,Fh,rl=I(()=>{"use strict";_o();dt();Uh();sn();Wz();Mh();qi();Tbe="warnToConsole",u$e="AI (Internal): ",l$e="AI: ",d$e="AITR_",p$e={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},f$e=(b1={},b1[0]=null,b1[1]="errorToConsole",b1[2]=Tbe,b1[3]="debugToConsole",b1);Jv=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[i1]=e,o[fd]=(n?l$e:u$e)+e;var s=St;hd()&&(s=Ko().stringify(i));var a=(r?" message:"+Ebe(r):St)+(i?" props:"+Ebe(s):St);o[fd]+=a}return t.dataType="MessageData",t}();Fh=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,c;Wt(t,this,function(u){c=d(e||{}),u.consoleLoggingLevel=function(){return i},u[of]=function(m,h,g,v,b){b===void 0&&(b=!1);var y=new Jv(h,g,b,v);if(a)throw Be(y);var S=f$e[m]||Tbe;if(xt(y[fd]))f("throw"+(m===1?"Critical":"Warning"),y);else{if(b){var x=+y[i1];!n[x]&&i>=m&&(u[S](y[fd]),n[x]=!0)}else i>=m&&u[S](y[fd]);l(m,y)}},u.debugToConsole=function(m){r$("debug",m),f("warning",m)},u[e1]=function(m){r$("warn",m),f("warning",m)},u.errorToConsole=function(m){r$("error",m),f("error",m)},u.resetInternalMessageCount=function(){r=0,n={}},u[wz]=l,u[Oa]=function(m){c&&c.rm(),c=null};function l(m,h){if(!p()){var g=!0,v=d$e+h[i1];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(u.queue[Yt](h),r++,f(m===1?"error":"warn",h)),r===s)){var b="Internal events throttle limit per PageView reached for this app.",y=new Jv(23,b,!1);u.queue[Yt](y),m===1?u.errorToConsole(b):u[e1](b)}}}function d(m){return Hi(Dn(m,p$e,u).cfg,function(h){var g=h.cfg;i=g[oL],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function p(){return r>=s}function f(m,h){var g=$z(e||{});g&&g[Ma]&&g[Ma](m,h)}})}return t.__ieDyn=1,t}()});function vd(t){return!_e(t)}function Zv(t){var e=t;return e&&wt(e)&&(e=e[Zu](h$e,function(r,n){return n.toUpperCase()}),e=e[Zu](g$e,"_"),e=e[Zu](v$e,function(r,n){return"_"+n})),e}function Ei(t,e){return t&&e?Qs(t,e)!==-1:!1}function fc(t){return t&&t.toISOString()||""}function mn(t){return ph(t)?t[Es]:St}function Zc(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function JC(t,e,r){var n;return t?(n=t[e],!n&&_e(n)&&(n=xt(r)?{}:r,t[e]=n)):n=xt(r)?{}:r,n}function Cbe(t,e){var r=null,n=null;return ct(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][Eh](n,i)}}function o$(t,e,r){if(t&&e&&fn(t)&&fn(e)){var n=function(o){if(wt(o)){var s=e[o];ct(s)?(!r||r(o,!0,e,t))&&(t[o]=Cbe(e,o)):(!r||r(o,!1,e,t))&&(Aa(t,o)&&delete t[o],Dr(t,o,{g:function(){return e[o]},s:function(a){e[o]=a}}))}};for(var i in e)n(i)}return t}function uf(t,e,r,n,i){t&&e&&r&&(i!==!1||xt(t[e]))&&(t[e]=Cbe(r,n))}function mc(t,e,r,n){return t&&e&&fn(t)&&Ke(r)&&me(r,function(i){wt(i)&&uf(t,i,e,i,n)}),t}function s$(t){return function(){function e(){var r=this;t&&Ve(t,function(n,i){r[n]=i})}return e}()}function eu(t){return t&&Nv&&(t=qx(Nv({},t))),t}function SL(t,e,r,n,i,o){var s=arguments,a=s[0]||{},c=s[tt],u=!1,l=1;for(c>0&&zu(a)&&(u=a,a=s[l]||{},l++),fn(a)||(a={});l<c;l++){var d=s[l],p=Ke(d),f=fn(d);for(var m in d){var h=p&&m in d||f&&Aa(d,m);if(h){var g=d[m],v=void 0;if(u&&g&&((v=Ke(g))||io(g))){var b=a[m];v?Ke(b)||(b=[]):io(b)||(b={}),g=SL(u,b,g)}g!==void 0&&(a[m]=g)}}}return a}function nl(t){try{return t.responseText}catch{}return null}function ey(t,e){return t?"XDomainRequest,Response:"+nl(t)||"":e}function lf(t,e){return t?"XMLHttpRequest,Status:"+t[$v]+",Response:"+nl(t)||t.response||"":e}function df(t,e){return e&&(_s(e)?t=[e].concat(t):Ke(e)&&(t=e.concat(t))),t}function ty(t,e){try{if(t&&t!==""){var r=Ko().parse(t);if(r&&r[Rz]&&r[Rz]>=r.itemsAccepted&&r.itemsReceived-r.itemsAccepted===r.errors[tt])return r}}catch(n){De(e,1,43,"Cannot parse the response. "+mn(n),{response:t})}return null}function a$(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,y$e,n),r&&s(a,Ibe,r),a.open(t,e,!i),r&&s(a,Ibe,r),!i&&o&&s(a,b$e,o),a}function EL(t){var e={};if(wt(t)){var r=wr(t)[Jc](/[\r\n]+/);me(r,function(n){if(n){var i=n.indexOf(": ");if(i!==-1){var o=wr(n.substring(0,i))[Na](),s=wr(n.substring(i+1));e[o]=s}else e[wr(n)]=1}})}return e}function _1(t,e,r){if(!t[r]&&e&&e[Az]){var n=e[Az](r);n&&(t[r]=wr(n))}return t}function pf(t,e){var r={};return t[Pz]?r=EL(t[Pz]()):e&&(r=_1(r,t,S$e),r=_1(r,t,_$e),r=_1(r,t,x$e)),r}var m$e,h$e,g$e,v$e,nOt,y$e,Ibe,b$e,_$e,x$e,S$e,gd=I(()=>{Da();dt();sn();rl();Mh();qi();m$e="getPrototypeOf",h$e=/-([a-z])/g,g$e=/([^\w\d_$])/g,v$e=/^(\d+[\w\d_$])/,nOt=Object[m$e];y$e="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ibe="withCredentials",b$e="timeout";_$e="kill-duration",x$e="kill-duration-seconds",S$e="time-delta-millis"});function E$e(t){t<0&&(t>>>=0),ZC=Rbe+t&Bh,ew=Abe-t&Bh,Pbe=!0}function T$e(){try{var t=Kn()&2147483647;E$e((Math.random()*wbe^t)+t)}catch{}}function tw(t){return t>0?Math.floor(ff()/Bh*(t+1))>>>0:0}function ff(t){var e=0,r=KC()||YC();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&Bh),e===0&&Oh()&&(Pbe||T$e(),e=kbe()&Bh),e===0&&(e=Math.floor(wbe*Math.random()|0)),t||(e>>>=0),e}function kbe(t){ew=36969*(ew&65535)+(ew>>16)&Bh,ZC=18e3*(ZC&65535)+(ZC>>16)&Bh;var e=(ew<<16)+(ZC&65535)>>>0&Bh|0;return t||(e>>>=0),e}function rw(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=ff()>>>0,n=0,i=St;i[tt]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(ff()<<2&4294967295|r&3)>>>0,n=0);return i}var wbe,Bh,Rbe,Abe,Pbe,ZC,ew,TL=I(()=>{dt();sn();Mh();qi();wbe=4294967296,Bh=4294967295,Rbe=123456789,Abe=987654321,Pbe=!1,ZC=Rbe,ew=Abe});function Nbe(t){return t[aL]===1||t[aL]===9||!+t[aL]}function w$e(t,e){var r=e[t.id];if(!r){r={};try{Nbe(e)&&Dr(e,t.id,{e:!1,v:r})}catch{}}return r}function Yo(t,e){return e===void 0&&(e=!1),Zv(t+C$e+++(e?"."+Dbe:St)+I$e)}function IL(t){var e={id:Yo("_aiData-"+(t||St)+"."+Dbe),accept:function(r){return Nbe(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[Zv(n)]:(o&&(s=w$e(e,r),s[Zv(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var Dbe,I$e,C$e,x1=I(()=>{dt();sn();gd();qi();TL();Dbe="3.0.5",I$e="."+rw(6),C$e=0});function CL(t){return t&&fn(t)&&(t.isVal||t.fb||Aa(t,"v")||Aa(t,"mrg")||Aa(t,"ref")||t.set)}function Lbe(t,e,r){var n,i=r.dfVal||E4;if(e&&r.fb){var o=r.fb;Ke(o)||(o=[o]);for(var s=0;s<o[tt];s++){var a=o[s],c=e[a];if(i(c)?n=c:t&&(c=t.cfg[a],i(c)&&(n=c),t.set(t.cfg,In(a),c)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function c$(t,e,r){var n=r;if(r&&CL(r)&&(n=Lbe(t,e,r)),n){CL(n)&&(n=c$(t,e,n));var i;Ke(n)?(i=[],i[tt]=n[tt]):io(n)&&(i={}),i&&(Ve(n,function(o,s){s&&CL(s)&&(s=c$(t,e,s)),i[o]=s}),n=i)}return n}function nw(t,e,r,n){var i,o,s,a=n,c,u,l,d;CL(a)?(i=a.isVal,o=a.set,l=a[Hv],d=a[Sh],c=a.mrg,u=a.ref,!u&&xt(u)&&(u=!!c),s=Lbe(t,e,a)):s=n,d&&t[Sh](e,r);var p,f=!0,m=e[r];(m||!_e(m))&&(p=m,f=!1,i&&p!==s&&!i(p)&&(p=s,f=!0),o&&(p=o(p,s,e),f=p===s)),f?s?p=c$(t,e,s):p=s:(io(p)||Ke(s))&&c&&s&&(io(s)||Ke(s))&&Ve(s,function(h,g){nw(t,p,h,g)}),t.set(e,r,p),u&&t.ref(e,r),l&&t[Hv](e,r)}var u$=I(()=>{dt();sn()});function l$(t){if(t){var e;if(Ke(t)?(e=[],e[tt]=t[tt]):io(t)&&(e={}),e)return Ve(t,function(r,n){e[r]=l$(n)}),e}return t}function iw(t){if(t){var e=t[yd]||t;if(e.cfg&&(e.cfg===t||e.cfg[yd]===e))return e}return null}function ow(t){if(t&&(io(t)||Ke(t)))try{t[Obe]=!0}catch{}return t}function d$(t){if(t)try{t[Mbe]=!0}catch{}return t}function wL(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[Mbe],!n&&!r[Obe]&&(n=io(r)||Ke(r))),n}function RL(t){kn("InvalidAccess:"+t)}var yd,Obe,Mbe,AL=I(()=>{dt();sn();yd=MC("[[ai_dynCfg_1]]"),Obe=MC("[[ai_blkDynCfg_1]]"),Mbe=MC("[[ai_frcDynCfg_1]]")});function A$e(t,e,r){Ke(e)&&me(R$e,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[Eh](this,o);return sw(t,e,r,"Patching"),a}})}function PL(t,e){var r=Dv(t,e);return r&&r.get}function P$e(t,e,r,n){var i={n:r,h:[],trk:function(u){u&&u.fn&&(hr(i.h,u)===-1&&i.h[Yt](u),t.trk(u,i))},clr:function(u){var l=hr(i.h,u);l!==-1&&i.h[ld](l,1)}},o=!0,s=!1;function a(){o&&(s=s||wL(a,t,n),n&&!n[yd]&&s&&(n=sw(t,n,r,"Converting")),o=!1);var u=t.act;return u&&i.trk(u),n}a[t.prop]={chng:function(){t.add(i)}};function c(u){if(n!==u){a[t.ro]&&!t.upd&&RL("["+r+"] is read-only:"+Be(e)),o&&(s=s||wL(a,t,n),o=!1);var l=s&&a[t.rf];if(s)if(l){Ve(n,function(p){n[p]=u?u[p]:pc});try{Ve(u,function(p,f){aw(t,n,p,f)}),u=n}catch(p){S1((t.hdlr||{})[tn],r,"Assigning",p),s=!1}}else n&&n[yd]&&Ve(n,function(p){var f=PL(n,p);if(f){var m=f[t.prop];m&&m.chng()}});if(u!==n){var d=u&&wL(a,t,u);!l&&d&&(u=sw(t,u,r,"Converting")),n=u,s=d}t.add(i)}}Dr(e,i.n,{g:a,s:c})}function aw(t,e,r,n){if(e){var i=PL(e,r),o=i&&!!i[t.prop];o?e[r]=n:P$e(t,e,r,n)}return e}function kL(t,e,r,n){if(e){var i=PL(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],c=n&&n[2];if(!o){if(c)try{ow(e)}catch(u){S1((t.hdlr||{})[tn],r,"Blocking",u)}try{aw(t,e,r,e[r]),i=PL(e,r)}catch(u){S1((t.hdlr||{})[tn],r,"State",u)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),c&&(i[t.blkVal]=!0)}return e}function sw(t,e,r,n){try{Ve(e,function(i,o){aw(t,e,i,o)}),e[yd]||(ci(e,yd,{get:function(){return t[nL]}}),A$e(t,e,r))}catch(i){S1((t.hdlr||{})[tn],r,n,i)}return e}var R$e,S1,Fbe=I(()=>{dt();qi();sn();AL();R$e=["push","pop","shift","unshift","splice"],S1=function(t,e,r,n){t&&t[of](3,108,"".concat(r," [").concat(e,"] failed - ")+Be(n))}});function Ube(t){var e,r=Uv(cw+"get"+t.uid+uw),n=Uv(cw+"ro"+t.uid+uw),i=Uv(cw+"rf"+t.uid+uw),o=Uv(cw+"blkVal"+t.uid+uw),s=Uv(cw+"dtl"+t.uid+uw),a=null,c=null,u;function l(m,h){var g=u.act;try{u.act=m,m&&m[s]&&(me(m[s],function(b){b.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[Xu].bind(t),ref:t.ref.bind(t),rdOnly:t[Hv].bind(t)})}catch(b){var v=t[tn];throw v&&v[of](1,107,Be(b)),b}finally{u.act=g||null}}function d(){if(a){var m=a;a=null,c&&c[Gv](),c=null;var h=[];if(me(m,function(g){if(g&&(g[s]&&(me(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{l(g,g.fn)}catch(v){h[Yt](v)}}),a)try{d()}catch(g){h[Yt](g)}h[tt]>0&&ebe("Watcher error(s): ",h)}}function p(m){if(m&&m.h[tt]>0){a||(a=[]),c||(c=Pa(function(){c=null,d()},0));for(var h=0;h<m.h[tt];h++){var g=m.h[h];g&&hr(a,g)===-1&&a[Yt](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];hr(g,h)===-1&&g[Yt](h)}}return u=(e={prop:r,ro:n,rf:i},e[Sh]=o,e[nL]=t,e.add=p,e[jv]=d,e.use=l,e.trk=f,e),u}var cw,uw,Bbe=I(()=>{dt();tbe();sn();cw="[[ai_",uw="]]"});function k$e(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function D$e(t,e,r){var n,i=iw(e);if(i)return i;var o=Yo("dyncfg",!0),s=e&&r!==!1?e:l$(e),a;function c(){a[jv]()}function u(v,b,y){try{v=aw(a,v,b,y)}catch(S){S1(t,b,"Setting value",S)}return v[b]}function l(v){return k$e(a,v)}function d(v,b){a.use(null,function(y){var S=a.upd;try{xt(b)||(a.upd=b),v(y)}finally{a.upd=S}})}function p(v,b){var y;return kL(a,v,b,(y={},y[0]=!0,y))[b]}function f(v,b){var y;return kL(a,v,b,(y={},y[1]=!0,y))[b]}function m(v,b){var y;return kL(a,v,b,(y={},y[2]=!0,y))[b]}function h(v,b){return b&&Ve(b,function(y,S){nw(g,v,y,S)}),v}var g=(n={uid:null,cfg:s},n[tn]=t,n[jv]=c,n.set=u,n[Xu]=h,n[Xc]=l,n.ref=p,n[Hv]=f,n[Sh]=m,n._block=d,n);return Dr(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=Ube(g),sw(a,s,"config","Creating"),g}function N$e(t,e){t?(t[e1](e),t[of](2,108,e)):RL(e)}function Dn(t,e,r,n){var i=D$e(r,t||{},n);return e&&i[Xu](i.cfg,e),i}function Hi(t,e,r){var n=t[yd]||t;return n.cfg&&(n.cfg===t||n.cfg[yd]===n)?n[Xc](e):(N$e(r,gbe+Be(t)),Dn(t,null,r)[Xc](e))}var Uh=I(()=>{dt();x1();qi();sn();u$();Fbe();Bbe();AL()});function mf(t,e){if(t&&t[Oa])return t[Oa](e)}function DL(t,e,r){var n;return r||(n=Xs(function(i){r=i})),t&&Xx(t)>0?kh(mf(t[0],e),function(){DL(_h(t,1),e,r)}):r(),n}var p$=I(()=>{f1();dt();sn()});var qbe,f$,m$=I(()=>{qbe=500,f$="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function L$e(t,e,r){return!t&&_e(t)?e:zu(t)?t:In(t)[Na]()==="true"}function h$(t){return{mrg:!0,v:t}}function E1(t,e,r){return{fb:r,isVal:t,v:e}}function tu(t,e){return{fb:e,set:L$e,v:!!t}}var g$=I(()=>{dt();sn()});function S$(){!bd&&(bd=Yu(function(){return $n()}))}function M$e(t,e){var r=hf[qh]||OL[qh];return r||(r=hf[qh]=hf(t,e),OL[qh]=r),r}function LL(t){return t?t.isEnabled():!0}function Qbe(t,e){return e&&t&&Ke(t.ignoreCookies)?hr(t.ignoreCookies,e)!==-1:!1}function F$e(t,e){return e&&t&&Ke(t.blockedCookies)&&hr(t.blockedCookies,e)!==-1?!0:Qbe(t,e)}function $be(t,e){var r=e[Ch];if(_e(r)){var n=void 0;xt(t[Gbe])||(n=!t[Gbe]),xt(t[_$])||(n=!t[_$]),r=n}return r}function E$(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e.cookieCfg;n&&n[qh]?r=n[qh]:r=hf(e)}return r||(r=M$e(e,(t||{})[tn])),r}function hf(t,e){var r,n,i,o,s,a,c,u,l;t=Dn(t||OL,null,e).cfg,s=Hi(t,function(p){p[Xu](p.cfg,O$e),n=p.ref(p.cfg,"cookieCfg"),i=n[bL]||"/",o=n[yL],a=$be(t,n)!==!1,c=n.getCookie||U$e,u=n.setCookie||Ybe,l=n.delCookie||Ybe},e);var d=(r={isEnabled:function(){var p=$be(t,n)!==!1&&a&&T1(e),f=OL[qh];return p&&f&&d!==f&&(p=LL(f)),p},setEnabled:function(p){a=p!==!1,n[Ch]=p},set:function(p,f,m,h,g){var v=!1;if(LL(d)&&!F$e(n,p)){var b={},y=wr(f||St),S=Qs(y,";");if(S!==-1&&(y=wr(vh(f,S)),b=Xbe(ai(f,S+1))),Zc(b,yL,h||o,zc,xt),!_e(m)){var x=Oh();if(xt(b[y$])){var T=Kn(),L=T+m*1e3;if(L>0){var M=new Date;M.setTime(L),Zc(b,y$,Wbe(M,x?Hbe:jbe)||Wbe(M,x?Hbe:jbe)||St,zc)}}x||Zc(b,"max-age",St+m,null,xt)}var q=Xv();q&&q[sL]==="https:"&&(Zc(b,"secure",null,null,xt),b$===null&&(b$=!ML((Ui()||{})[HC])),b$&&Zc(b,"SameSite","None",null,xt)),Zc(b,bL,g||i,null,xt),u(p,Kbe(y,b)),v=!0}return v},get:function(p){var f=St;return LL(d)&&!Qbe(n,p)&&(f=c(p)),f},del:function(p,f){var m=!1;return LL(d)&&(m=d.purge(p,f)),m},purge:function(p,f){var m,h=!1;if(T1(e)){var g=(m={},m[bL]=f||"/",m[y$]="Thu, 01 Jan 1970 00:00:01 GMT",m);Oh()||(g["max-age"]="0"),l(p,Kbe(St,g)),h=!0}return h}},r[Oa]=function(p){s&&s.rm(),s=null},r);return d[qh]=d,d}function T1(t){if(NL===null){NL=!1,!bd&&S$();try{var e=bd.v||{};NL=e[x$]!==void 0}catch(r){De(t,2,68,"Cannot access document.cookie - "+mn(r),{exception:Be(r)})}}return NL}function Xbe(t){var e={};if(t&&t[tt]){var r=wr(t)[Jc](";");me(r,function(n){if(n=wr(n||St),n){var i=Qs(n,"=");i===-1?e[n]=null:e[wr(vh(n,i))]=wr(ai(n,i+1))}})}return e}function Wbe(t,e){return ct(t[e])?t[e]():null}function Kbe(t,e){var r=t||St;return Ve(e,function(n,i){r+="; "+n+(_e(i)?St:"="+i)}),r}function U$e(t){var e=St;if(!bd&&S$(),bd.v){var r=bd.v[x$]||St;Vbe!==r&&(zbe=Xbe(r),Vbe=r),e=wr(zbe[t]||St)}return e}function Ybe(t,e){!bd&&S$(),bd.v&&(bd.v[x$]=t+"="+e)}function ML(t){return wt(t)?!!(Ei(t,"CPU iPhone OS 12")||Ei(t,"iPad; CPU OS 12")||Ei(t,"Macintosh; Intel Mac OS X 10_14")&&Ei(t,"Version/")&&Ei(t,"Safari")||Ei(t,"Macintosh; Intel Mac OS X 10_14")&&xh(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Ei(t,"Chrome/5")||Ei(t,"Chrome/6")||Ei(t,"UnrealEngine")&&!Ei(t,"Chrome")||Ei(t,"UCBrowser/12")||Ei(t,"UCBrowser/11")):!1}var v$,ry,Hbe,jbe,x$,y$,Gbe,_$,qh,NL,b$,Vbe,bd,zbe,OL,O$e,T$=I(()=>{dt();g$();Uh();sn();rl();Mh();gd();qi();Hbe="toGMTString",jbe="toUTCString",x$="cookie",y$="expires",Gbe="isCookieUseDisabled",_$="disableCookiesUsage",qh="_ckMgr",NL=null,b$=null,Vbe=null,zbe={},OL={},O$e=(v$={cookieCfg:h$((ry={},ry[yL]={fb:"cookieDomain",dfVal:vd},ry.path={fb:"cookiePath",dfVal:vd},ry.enabled=pc,ry.ignoreCookies=pc,ry.blockedCookies=pc,ry)),cookieDomain:pc,cookiePath:pc},v$[_$]=pc,v$)});function Hh(t,e,r,n){me(t,function(i){if(i&&i[e])if(r)Pa(function(){return n(i)},0);else try{n(i)}catch{}})}var B$e,lw,I$=I(()=>{_o();f1();dt();Uh();sn();qi();B$e={perfEvtsSendAll:!1};lw=function(){function t(e){this.listeners=[];var r,n,i=[],o=Dn(e,B$e);n=o[Xc](function(s){r=!!s.cfg.perfEvtsSendAll}),Wt(t,this,function(s){Dr(s,"listeners",{g:function(){return i}}),s[r1]=function(a){i[Yt](a)},s[n1]=function(a){for(var c=hr(i,a);c>-1;)i[ld](c,1),c=hr(i,a)},s[m1]=function(a){Hh(i,m1,!0,function(c){c[m1](a)})},s[Nh]=function(a,c){Hh(i,Nh,!0,function(u){u[Nh](a,c)})},s[h1]=function(a,c){Hh(i,h1,c,function(u){u[h1](a,c)})},s[md]=function(a){a&&(r||!a[GC]())&&Hh(i,md,!1,function(c){a[Ju]?Pa(function(){return c[md](a)},0):c[md](a)})},s[hL]=function(a){a&&a[tt]&&Hh(i,hL,!0,function(c){c[hL](a)})},s[gL]=function(a){a&&a[Ah]&&Hh(i,gL,!0,function(c){c[gL](a)})},s[vL]=function(a,c){if(a>0){var u=c||0;Hh(i,vL,!0,function(l){l[vL](a,u)})}},s[Oa]=function(a){var c=function(){n&&n.rm(),n=null,i=[]},u;if(Hh(i,"unload",!1,function(l){var d=l[Oa](a);d&&(u||(u=[]),u[Yt](d))}),u)return Xs(function(l){return kh(Vz(u),function(){c(),l()})});c()}})}return t.__ieDyn=1,t}()});function li(t,e,r,n,i){if(t){var o=t;if(o[g1]&&(o=o[g1]()),o){var s=void 0,a=o[Wv](C$);try{if(s=o.create(e(),n,i),s){if(a&&s[el]&&(s[el](ny[w$],a),a[Wv]&&a[el])){var c=a[Wv](ny[dw]);c||(c=[],a[el](ny[dw],c)),c[Yt](s)}return o[el](C$,s),r(s)}}catch(u){s&&s[el]&&s[el]("exception",u)}finally{s&&o.fire(s),o[el](C$,a)}}}return r()}function R$(){return q$e}var I1,w$,dw,q$e,ny,pw,C$,FL=I(()=>{_o();dt();sn();qi();I1="ctx",w$="ParentContextKey",dw="ChildrenContextKey",q$e=null,ny=function(){function t(e,r,n){var i=this;if(i.start=Kn(),i[Es]=e,i[Ju]=n,i[GC]=function(){return!1},ct(r)){var o;Dr(i,"payload",{g:function(){return!o&&ct(r)&&(o=r(),r=null),o}})}i[Wv]=function(s){return s?s===t[w$]||s===t[dw]?i[s]:(i[I1]||{})[s]:null},i[el]=function(s,a){if(s)if(s===t[w$])i[s]||(i[GC]=function(){return!0}),i[s]=a;else if(s===t[dw])i[s]=a;else{var c=i[I1]=i[I1]||{};c[s]=a}},i[cL]=function(){var s=0,a=i[Wv](t[dw]);if(Ke(a))for(var c=0;c<a[tt];c++){var u=a[c];u&&(s+=u[Ih])}i[Ih]=Kn()-i.start,i.exTime=i[Ih]-s,i[cL]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),pw=function(){function t(e){this.ctx={},Wt(t,this,function(r){r.create=function(n,i,o){return new ny(n,i,o)},r.fire=function(n){n&&(n[cL](),e&&ct(e[md])&&e[md](n))},r[el]=function(n,i){if(n){var o=r[I1]=r[I1]||{};o[n]=i}},r[Wv]=function(n){return(r[I1]||{})[n]}})}return t.__ieDyn=1,t}(),C$="CoreUtils.doPerf"});function fw(){var t=iy();return ai(t,0,8)+"-"+ai(t,8,12)+"-"+ai(t,12,16)+"-"+ai(t,16,20)+"-"+ai(t,20)}function iy(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=St,r,n=0;n<4;n++)r=ff(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(ff()&3)|0];return Wu(e,0,8)+Wu(e,9,4)+"4"+Wu(e,13,3)+i+Wu(e,16,3)+Wu(e,19,12)}var A$=I(()=>{"use strict";dt();qi();TL()});function gf(t,e,r){return t&&t[tt]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function Zbe(t,e,r){return gf(t,e)?t:r}function e_e(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[tt]<2;)e="0"+e;return e}function mw(t,e,r,n){var i;return i={},i[Vv]=gf(n,2,k$)?n:P$,i[s1]=_d(t)?t:iy(),i[a1]=xd(e)?e:vh(iy(),16),i.traceFlags=r>=0&&r<=255?r:1,i}function oy(t,e){var r;if(!t||(Ke(t)&&(t=t[0]||""),!t||!wt(t)||t[tt]>8192))return null;if(t.indexOf(",")!==-1){var n=t[Jc](",");t=n[e>0&&n[tt]>e?e:0]}var i=H$e.exec(wr(t));return!i||i[1]===k$||i[2]===UL||i[3]===BL?null:(r={version:(i[1]||St)[Na](),traceId:(i[2]||St)[Na](),spanId:(i[3]||St)[Na]()},r[Ph]=parseInt(i[4],16),r)}function _d(t){return gf(t,32,UL)}function xd(t){return gf(t,16,BL)}function C1(t){return!(!t||!gf(t[Vv],2,k$)||!gf(t[s1],32,UL)||!gf(t[a1],16,BL)||!gf(e_e(t[Ph]),2))}function hw(t){return C1(t)?(t[Ph]&Jbe)===Jbe:!1}function gw(t){if(t){var e=e_e(t[Ph]);gf(e,2)||(e="01");var r=t[Vv]||P$;return r!=="00"&&r!=="ff"&&(r=P$),"".concat(r.toLowerCase(),"-").concat(Zbe(t.traceId,32,UL).toLowerCase(),"-").concat(Zbe(t.spanId,16,BL).toLowerCase(),"-").concat(e.toLowerCase())}return""}function vw(t){var e="traceparent",r=oy(e$(e),t);return r||(r=oy(t$(e),t)),r}var H$e,P$,k$,UL,BL,Jbe,D$=I(()=>{dt();sn();A$();Mh();qi();H$e=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,P$="00",k$="ff",UL="00000000000000000000000000000000",BL="0000000000000000",Jbe=1});function vf(t){return j$e.get(t,"state",{},!0)}function N$(t,e){for(var r=[],n=null,i=t[dc](),o;i;){var s=i[Th]();if(s){n&&n[Rh]&&s[Ua]&&n[Rh](s),o=vf(s);var a=!!o[La];s[La]&&(a=s[La]()),a||r[Yt](s),n=s,i=i[dc]()}}me(r,function(c){var u=t[Yn]();c[sf](t.getCfg(),u,e,t[dc]()),o=vf(c),!c[Yn]&&!o[Yn]&&(o[Yn]=u),o[La]=!0,delete o[lc]})}function qL(t){return t.sort(function(e,r){var n=0;if(r){var i=r[Ua];e[Ua]?n=i?e[Qv]-r[Qv]:1:i&&(n=-1)}else n=e?1:-1;return n})}function t_e(t){var e={};return{getName:function(){return e[Es]},setName:function(r){t&&t.setName(r),e[Es]=r},getTraceId:function(){return e[s1]},setTraceId:function(r){t&&t.setTraceId(r),_d(r)&&(e[s1]=r)},getSpanId:function(){return e[a1]},setSpanId:function(r){t&&t.setSpanId(r),xd(r)&&(e[a1]=r)},getTraceFlags:function(){return e[Ph]},setTraceFlags:function(r){t&&t.setTraceFlags(r),e[Ph]=r}}}var j$e,L$=I(()=>{"use strict";dt();sn();x1();qi();D$();j$e=IL("plugin")});function V$e(t,e,r){for(;t;){if(t[Th]()===r)return t;t=t[dc]()}return jh([r],e.config||{},e)}function O$(t,e,r,n){var i=null,o=[];e||(e=Dn({},null,r[tn])),n!==null&&(i=n?V$e(t,r,n):t);var s={_next:c,ctx:{core:function(){return r},diagLog:function(){return tl(r,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:l,getConfig:d,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(f){i=f},iterate:p,onComplete:a}};function a(f,m){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];f&&o[Yt]({func:f,self:xt(m)?s.ctx:m,args:h})}function c(){var f=i;if(i=f?f[dc]():null,!f){var m=o;m&&m[tt]>0&&(me(m,function(h){try{h.func.call(h.self,h.args)}catch(g){De(r[tn],2,73,"Unexpected Exception during onComplete - "+Be(g))}}),o=[])}return f}function u(f,m){var h=null,g=e.cfg;if(g&&f){var v=g[af];!v&&m&&(v={}),g[af]=v,v=e.ref(g,af),v&&(h=v[f],!h&&m&&(h={}),v[f]=h,h=e.ref(v,f))}return h}function l(f,m){var h=u(f,!0);return m&&Ve(m,function(g,v){if(_e(h[g])){var b=e.cfg[g];(b||!_e(b))&&(h[g]=b)}nw(e,h,g,v)}),e[Xu](h,m)}function d(f,m,h){h===void 0&&(h=!1);var g,v=u(f,!1),b=e.cfg;return v&&(v[m]||!_e(v[m]))?g=v[m]:(b[m]||!_e(b[m]))&&(g=b[m]),g||!_e(g)?g:h}function p(f){for(var m;m=s._next();){var h=m[Th]();h&&f(h)}}return s}function Zs(t,e,r,n){var i=Dn(e),o=O$(t,i,r,n),s=o.ctx;function a(u){var l=o._next();return l&&l[Ua](u,s),!l}function c(u,l){return u===void 0&&(u=null),Ke(u)&&(u=jh(u,i.cfg,r,l)),Zs(u||s[dc](),i.cfg,r,l)}return s[oo]=a,s[pd]=c,s}function w1(t,e,r){var n=Dn(e.config),i=O$(t,n,e,r),o=i.ctx;function s(c){var u=i._next();return u&&u[Oa](o,c),!u}function a(c,u){return c===void 0&&(c=null),Ke(c)&&(c=jh(c,n.cfg,e,u)),w1(c||o[dc](),e,u)}return o[oo]=s,o[pd]=a,o}function yw(t,e,r){var n=Dn(e.config),i=O$(t,n,e,r),o=i.ctx;function s(c){return o.iterate(function(u){ct(u[zv])&&u[zv](o,c)})}function a(c,u){return c===void 0&&(c=null),Ke(c)&&(c=jh(c,n.cfg,e,u)),yw(c||o[dc](),e,u)}return o[oo]=s,o[pd]=a,o}function jh(t,e,r,n){var i=null,o=!n;if(Ke(t)&&t[tt]>0){var s=null;me(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&ct(a[Ua])){var c=z$e(a,e,r);i||(i=c),s&&s._setNext(c),s=c}})}return n&&!i?jh([n],e,r):i}function z$e(t,e,r){var n=null,i=ct(t[Ua]),o=ct(t[Rh]),s;t?s=t[dd]+"-"+t[Qv]+"-"+i_e++:s="Unknown-0-"+i_e++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:l,unload:d,update:p,_id:s,_setNext:function(f){n=f}};function c(){var f;return t&&ct(t[n_e])&&(f=t[n_e]()),f||(f=Zs(a,e,r)),f}function u(f,m,h,g,v){var b=!1,y=t?t[dd]:G$e,S=f[r_e];return S||(S=f[r_e]={}),f.setNext(n),t&&li(f[Yn](),function(){return y+":"+h},function(){S[s]=!0;try{var x=n?n._id:St;x&&(S[x]=!1),b=m(f)}catch(L){var T=n?S[n._id]:!0;T&&(b=!0),(!n||!T)&&De(f[Ma](),1,73,"Plugin ["+y+"] failed during "+h+" - "+Be(L)+", run flags: "+Be(S))}},g,v),b}function l(f,m){m=m||c();function h(g){if(!t||!i)return!1;var v=vf(t);return v[lc]||v[$C]?!1:(o&&t[Rh](n),t[Ua](f,g),!0)}u(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[oo](f)}function d(f,m){function h(){var g=!1;if(t){var v=vf(t),b=t[Yn]||v[Yn];t&&(!b||b===f.core())&&!v[lc]&&(v[Yn]=null,v[lc]=!0,v[La]=!1,t[lc]&&t[lc](f,m)===!0&&(g=!0))}return g}u(f,h,"unload",function(){},m[Ju])||f[oo](m)}function p(f,m){function h(){var g=!1;if(t){var v=vf(t),b=t[Yn]||v[Yn];t&&(!b||b===f.core())&&!v[lc]&&t[zv]&&t[zv](f,m)===!0&&(g=!0)}return g}u(f,h,"update",function(){},!1)||f[oo](m)}return cd(a)}var G$e,r_e,n_e,i_e,M$,HL=I(()=>{"use strict";dt();u$();Uh();sn();rl();gd();qi();FL();L$();G$e="TelemetryPluginChain",r_e="_hasRun",n_e="_getTelCtx",i_e=0;M$=function(){function t(e,r,n,i){var o=this,s=Zs(e,r,n,i);mc(o,s,no(s))}return t}()});function sy(){var t=[];function e(n){n&&t[Yt](n)}function r(n,i){me(t,function(o){try{o(n,i)}catch(s){De(n[Ma](),2,73,"Unexpected error calling unload handler - "+Be(s))}}),t=[]}return{add:e,run:r}}var jL=I(()=>{dt();sn();rl()});function GL(){var t=[];function e(n){var i=t;t=[],me(i,function(o){try{(o.rm||o.remove).call(o)}catch(s){De(n,2,73,"Unloading:"+Be(s))}})}function r(n){n&&Kc(t,n)}return{run:e,add:r}}var F$=I(()=>{dt();rl()});var U$,Gh,$$e,yf,B$=I(()=>{"use strict";_o();dt();Uh();sn();rl();gd();qi();HL();jL();F$();Gh="getPlugin",$$e=(U$={},U$[af]={isVal:vd,v:{}},U$),yf=function(){function t(){var e=this,r,n,i,o,s;u(),Wt(t,e,function(l){l[sf]=function(d,p,f,m){c(d,p,m),r=!0},l[lc]=function(d,p){var f,m=l[Yn];if(!m||d&&m!==d[Yn]())return;var h,g=!1,v=d||w1(null,m,i&&i[Gh]?i[Gh]():i),b=p||(f={reason:0},f[Ju]=!1,f);function y(){g||(g=!0,o.run(v,p),s.run(v[Ma]()),h===!0&&v[oo](b),u())}return!l[wh]||l[wh](v,b,y)!==!0?y():h=!0,h},l[zv]=function(d,p){var f=l[Yn];if(!f||d&&f!==d[Yn]())return;var m,h=!1,g=d||yw(null,f,i&&i[Gh]?i[Gh]():i),v=p||{reason:0};function b(){h||(h=!0,c(g.getCfg(),g.core(),g[dc]()))}return!l._doUpdate||l._doUpdate(g,v,b)!==!0?b():m=!0,m},uf(l,"_addUnloadCb",function(){return o},"add"),uf(l,"_addHook",function(){return s},"add"),Dr(l,"_unloadHooks",{g:function(){return s}})}),e[Ma]=function(l){return a(l)[Ma]()},e[La]=function(){return r},e.setInitialized=function(l){r=l},e[Rh]=function(l){i=l},e[oo]=function(l,d){d?d[oo](l):i&&ct(i[Ua])&&i[Ua](l,null)},e._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var p=n||Zs(null,{},e[Yn]);i&&i[Gh]?d=p[pd](null,i[Gh]):d=p[pd](null,i)}return d}function c(l,d,p){Dn(l,$$e,tl(d)),!p&&d&&(p=d[iL]()[dc]());var f=i;i&&i[Gh]&&(f=i[Gh]()),e[Yn]=d,n=Zs(p,l,d,f)}function u(){r=!1,e[Yn]=null,n=null,i=null,s=GL(),o=sy()}}return t.__ieDyn=1,t}()});function W$e(t,e,r){var n={id:e,fn:r};Kc(t,n);var i={remove:function(){me(t,function(o,s){if(o.id===n.id)return t[ld](s,1),-1})}};return i}function K$e(t,e,r){for(var n=!1,i=t[tt],o=0;o<i;++o){var s=t[o];if(s)try{if(s.fn[Eh](null,[e])===!1){n=!0;break}}catch(a){De(r,2,64,"Telemetry initializer failed: "+mn(a),{exception:Be(a)},!0)}}return!n}var o_e,s_e=I(()=>{Da();_o();dt();sn();B$();rl();gd();qi();o_e=function(t){ka(e,t);function e(){var r=t.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,i;o(),Wt(e,r,function(s,a){s.addTelemetryInitializer=function(c){return W$e(i,n++,c)},s[Ua]=function(c,u){K$e(i,c,u?u[Ma]():s[Ma]())&&s[oo](c,u)},s[wh]=function(){o()}});function o(){n=0,i=[]}return r}return e.__ieDyn=1,e}(yf)});function X$e(t,e){return new pw(e)}function J$e(t,e,r){var n,i=[],o=[],s={};return me(r,function(a){(_e(a)||_e(a[sf]))&&zn(l_e);var c=a[Qv],u=a[dd];a&&c&&(_e(s[c])?s[c]=u:Js(t,"Two extensions have same priority #"+c+" - "+s[c]+", "+u)),!c||c<e?i[Yt](a):o[Yt](a)}),n={},n[Yn]=i,n[Dh]=o,n}function c_e(t,e){var r=!1;return me(e,function(n){if(n===t)return r=!0,-1}),r}function H$(t,e,r,n){r&&Ve(r,function(i,o){n&&io(o)&&io(e[i])&&H$(t,e[i],o,n),n&&io(o)&&io(e[i])?H$(t,e[i],o,n):t.set(e,i,o)})}function u_e(t,e){var r=null,n=-1;return me(t,function(i,o){if(i.w===e)return r=i,n=o,-1}),{i:n,l:r}}function Z$e(t,e){var r=u_e(t,e).l;return r||(r={w:e,rm:function(){var n=u_e(t,e);n.i!==-1&&t[ld](n.i,1)}},t[Yt](r)),r}function eWe(t,e,r){me(e,function(n){var i=Hi(t,n.w,r);delete n.w,n.rm=function(){i.rm()}})}var Vh,l_e,Y$e,a_e,Q$e,q$,bf,d_e=I(()=>{"use strict";Da();_o();f1();dt();Uh();sn();p$();m$();T$();x1();Wz();rl();gd();qi();I$();FL();HL();L$();s_e();jL();F$();l_e="Plugins must provide initialize method",Y$e="_notificationManager",a_e="SDK is still unloading...",Q$e="SDK is not initialized",q$=Ys((Vh={cookieCfg:{}},Vh[Yv]={rdOnly:!0,ref:!0,v:[]},Vh[Dh]={rdOnly:!0,ref:!0,v:[]},Vh[af]={ref:!0,v:{}},Vh[mL]=pc,Vh.loggingLevelConsole=0,Vh.diagnosticLogInterval=pc,Vh));bf=function(){function t(){var e,r,n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,b,y,S,x,T,L,M,q,O,Z,z;Wt(t,this,function(D){F(),D._getDbgPlgTargets=function(){return[L]},D[La]=function(){return r},D[sf]=function(U,ie,ae,Te){f&&zn(a_e),D[La]()&&zn("Core cannot be initialized more than once"),e=Dn(U,q$,ae||D[tn],!1),U=e.cfg,Ye(e[Xc](function(ht){x=ht.cfg.instrumentationKey;var Wr=ht.ref(ht.cfg,af);Ve(Wr,function(yn){ht.ref(Wr,yn)}),_e(x)&&zn("Please provide instrumentation key")})),o=Te,ut(),He(),D[tn]=ae;var ve=U[Yv];if(l=[],l[Yt].apply(l,$4($4([],ie,!1),ve,!1)),d=U[Dh],te(null),(!p||p[tt]===0)&&zn("No "+Dh+" available"),d&&d[tt]>1){var Qe=D[Th]("TeeChannelController");(!Qe||!Qe.plugin)&&De(n,1,28,"TeeChannel required")}eWe(U,T,n),T=null,r=!0,D.releaseQueue(),D[Iz]()},D.getChannels=function(){var U=[];return p&&me(p,function(ie){U[Yt](ie)}),cd(U)},D.track=function(U){li(D[g1](),function(){return"AppInsightsCore:track"},function(){U===null&&(fe(U),zn("Invalid telemetry item")),!U[Es]&&_e(U[Es])&&(fe(U),zn("telemetry name required")),U.iKey=U.iKey||x,U[Ih]=U[Ih]||fc(new Date),U.ver=U.ver||"4.0",!f&&D[La]()?N()[oo](U):i[Yt](U)},function(){return{item:U}},!U.sync)},D[iL]=N,D[t1]=function(){return o||(o=new lw(e.cfg),D[Y$e]=o),o},D[r1]=function(U){D[t1]()[r1](U)},D[n1]=function(U){o&&o[n1](U)},D.getCookieMgr=function(){return c||(c=hf(e.cfg,D[tn])),c},D.setCookieMgr=function(U){c!==U&&(mf(c,!1),c=U)},D[g1]=function(){return!s&&!a&&Ye(e[Xc](function(U){if(U.cfg.enablePerfMgr){var ie=U.cfg[mL];ct(ie)&&(a=ie(D,D[t1]()))}})),s||a||R$()},D.setPerfMgr=function(U){s=U},D.eventCnt=function(){return i[tt]},D.releaseQueue=function(){if(r&&i[tt]>0){var U=i;i=[],me(U,function(ie){N()[oo](ie)})}},D[Iz]=function(U){return h=U||null,z=!1,O&&O[Gv](),E(!0)};function E(U){if((!O||!O[Ch])&&!z){var ie=U||n&&n.queue[tt]>0;ie&&(Z||(Z=!0,Ye(e[Xc](function(ae){var Te=ae.cfg.diagnosticLogInterval;(!Te||!(Te>0))&&(Te=1e4);var ve=!1;O&&(ve=O[Ch],O[Gv]()),O=lz(ze,Te),O.unref(),O[Ch]=ve}))),O[Ch]=!0)}return O}D[Cz]=function(){z=!0,O&&O[Gv](),ze()},mc(D,function(){return m},["addTelemetryInitializer"]),D[Oa]=function(U,ie,ae){var Te;U===void 0&&(U=!0),r||zn(Q$e),f&&zn(a_e);var ve=(Te={reason:50},Te[Ju]=U,Te.flushComplete=!1,Te),Qe;U&&!ie&&(Qe=Xs(function(yn){ie=yn}));var ht=w1(ne(),D);ht[qC](function(){b.run(D[tn]),DL([c,o,n],U,function(){F(),ie&&ie(ve)})},D);function Wr(yn){ve.flushComplete=yn,f=!0,v.run(ht,ve),D[Cz](),ht[oo](ve)}return ze(),J(U,Wr,6,ae)||Wr(!1),Qe},D[Th]=pe,D.addPlugin=function(U,ie,ae,Te){if(!U){Te&&Te(!1),ur(l_e);return}var ve=pe(U[dd]);if(ve&&!ie){Te&&Te(!1),ur("Plugin ["+U[dd]+"] is already loaded!");return}var Qe={reason:16};function ht(Jn){l[Yt](U),Qe.added=[U],te(Qe),Te&&Te(!0)}if(ve){var Wr=[ve.plugin],yn={reason:2,isAsync:!!ae};se(Wr,yn,function(Jn){Jn?(Qe.removed=Wr,Qe.reason|=32,ht(!0)):Te&&Te(!1)})}else ht(!1)},D.updateCfg=function(U,ie){ie===void 0&&(ie=!0);var ae;if(D[La]()){ae={reason:1,cfg:e.cfg,oldCfg:V4({},e.cfg),newConfig:V4({},U),merge:ie},U=ae.newConfig;var Te=e.cfg;U[Yv]=Te[Yv],U[Dh]=Te[Dh]}e._block(function(ve){var Qe=ve.cfg;H$(ve,Qe,U,ie),ie||Ve(Qe,function(ht){Aa(U,ht)||ve.set(Qe,ht,pc)}),ve[Xu](Qe,q$)},!0),e[jv](),ae&&yt(ae)},D.evtNamespace=function(){return g},D.flush=J,D.getTraceCtx=function(U){return S||(S=t_e()),S},D.setTraceCtx=function(U){S=U||null},D.addUnloadHook=Ye,uf(D,"addUnloadCb",function(){return v},"add"),D.onCfgChange=function(U){var ie;return r?ie=Hi(e.cfg,U,D[tn]):ie=Z$e(T,U),{rm:function(){ie.rm()}}},D.getWParam=function(){return yh()||e.cfg.enableWParam?0:-1};function k(){var U={};M=[];var ie=function(ae){ae&&me(ae,function(Te){if(Te[dd]&&Te[Vv]&&!U[Te.identifier]){var ve=Te[dd]+"="+Te[Vv];M[Yt](ve),U[Te.identifier]=Te}})};ie(p),d&&me(d,function(ae){ie(ae)}),ie(l)}function F(){r=!1,e=Dn({},q$,D[tn]),e.cfg[oL]=1,Dr(D,"config",{g:function(){return e.cfg},s:function(ie){D.updateCfg(ie,!1)}}),Dr(D,"pluginVersionStringArr",{g:function(){return M||k(),M}}),Dr(D,"pluginVersionString",{g:function(){return q||(M||k(),q=M.join(";")),q||St}}),Dr(D,"logger",{g:function(){return n||(n=new Fh(e.cfg),e[tn]=n),n},s:function(ie){e[tn]=ie,n!==ie&&(mf(n,!1),n=ie)}}),D[tn]=new Fh(e.cfg),L=[];var U=D.config[Yv]||[];U.splice(0,U[tt]),Kc(U,L),m=new o_e,i=[],mf(o,!1),o=null,s=null,a=null,mf(c,!1),c=null,u=null,l=[],d=null,p=null,f=!1,h=null,g=Yo("AIBaseCore",!0),v=sy(),S=null,x=null,b=GL(),T=[],q=null,M=null,z=!1}function N(){var U=Zs(ne(),e.cfg,D);return U[qC](E),U}function te(U){var ie=J$e(D[tn],qbe,l);u=null,q=null,M=null,p=(d||[])[0]||[],p=qL(Kc(p,ie[Dh]));var ae=Kc(qL(ie[Yn]),p);L=cd(ae);var Te=D.config[Yv]||[];Te.splice(0,Te[tt]),Kc(Te,L);var ve=N();p&&p[tt]>0&&N$(ve[pd](p),ae),N$(ve,ae),U&&yt(U)}function pe(U){var ie=null,ae=null,Te=[];return me(L,function(ve){if(ve[dd]===U&&ve!==m)return ae=ve,-1;ve.getChannel&&Te[Yt](ve)}),!ae&&Te[tt]>0&&me(Te,function(ve){if(ae=ve.getChannel(U),!ae)return-1}),ae&&(ie={plugin:ae,setEnabled:function(ve){vf(ae)[$C]=!ve},isEnabled:function(){var ve=vf(ae);return!ve[lc]&&!ve[$C]},remove:function(ve,Qe){var ht;ve===void 0&&(ve=!0);var Wr=[ae],yn=(ht={reason:1},ht[Ju]=ve,ht);se(Wr,yn,function(Jn){Jn&&te({reason:32,removed:Wr}),Qe&&Qe(Jn)})}}),ie}function ne(){if(!u){var U=(L||[]).slice();hr(U,m)===-1&&U[Yt](m),u=jh(qL(U),e.cfg,D)}return u}function se(U,ie,ae){if(U&&U[tt]>0){var Te=jh(U,e.cfg,D),ve=w1(Te,D);ve[qC](function(){var Qe=!1,ht=[];me(l,function(yn,Jn){c_e(yn,U)?Qe=!0:ht[Yt](yn)}),l=ht,q=null,M=null;var Wr=[];d&&(me(d,function(yn,Jn){var Ls=[];me(yn,function(mp){c_e(mp,U)?Qe=!0:Ls[Yt](mp)}),Wr[Yt](Ls)}),d=Wr),ae&&ae(Qe),E()}),ve[oo](ie)}else ae(!1)}function ze(){if(n&&n.queue){var U=n.queue.slice(0);n.queue[tt]=0,me(U,function(ie){var ae,Te=(ae={},ae[Es]=h||"InternalMessageId: "+ie[i1],ae.iKey=x,ae[Ih]=fc(new Date),ae.baseType=Jv.dataType,ae.baseData={message:ie[fd]},ae);D.track(Te)})}}function J(U,ie,ae,Te){var ve=1,Qe=!1,ht=null;Te=Te||5e3;function Wr(){ve--,Qe&&ve===0&&(ht&&ht[Gv](),ht=null,ie&&ie(Qe),ie=null)}if(p&&p[tt]>0){var yn=N()[pd](p);yn.iterate(function(Jn){if(Jn.flush){ve++;var Ls=!1;Jn.flush(U,function(){Ls=!0,Wr()},ae)||Ls||(U&&ht==null?ht=Pa(function(){ht=null,Wr()},Te):Wr())}})}return Qe=!0,Wr(),!0}function ut(){!o&&D[t1](),Ye(e[Xc](function(U){var ie=U.cfg.disableDbgExt;ie===!0&&y&&(o[n1](y),y=null),o&&!y&&ie!==!0&&(y=vbe(U.cfg),o[r1](y))}))}function He(){Ye(e[Xc](function(U){var ie=U.cfg.enablePerfMgr;!ie&&a&&(a=null),ie&&JC(U.cfg,mL,X$e)}))}function yt(U){var ie=yw(ne(),D);ie[qC](E),(!D._updateHook||D._updateHook(ie,U)!==!0)&&ie[oo](U)}function ur(U){var ie=D[tn];ie?(De(ie,2,73,U),E()):zn(U)}function fe(U){var ie=D[t1]();ie&&ie[Nh]([U],2)}function Ye(U){b.add(U)}})}return t.__ieDyn=1,t}()});var Sd,tWe,p_e,j$,ay,f_e=I(()=>{_o();f1();dt();sn();m$();rl();Mh();gd();Sd="",tWe="NoResponseBody",p_e="&"+tWe+"=true",j$="POST",ay=function(){function t(){var e=0,r,n,i,o,s,a,c,u,l,d,p,f,m;Wt(t,this,function(h,g){var v=!0;z(),h[sf]=function(D,E){i=E,n&&De(i,1,28,"Sender is already initialized"),h.SetConfig(D),n=!0},h._getDbgPlgTargets=function(){return[n,o,a,r]},h.SetConfig=function(D){try{if(s=D.senderOnCompleteCallBack||{},a=!!D.disableCredentials,o=!!D.isOneDs,r=!!D.enableSendPromise,u=!!D.disableXhr,l=!!D.disableBeacon,d=!!D.disableBeaconSync,m=D.timeWrapper,f=!!D.addNoResponse,p=!!D.disableFetchKeepAlive,c={sendPOST:q},o||(v=!1),a){var E=Xv();E&&E.protocol&&E.protocol[Na]()==="file:"&&(v=!1)}return!0}catch{}return!1},h.getSyncFetchPayload=function(){return e},h.getSenderInst=function(D,E){return D&&D[tt]?x(D,E):null},h.getFallbackInst=function(){return c},h[wh]=function(D,E){z()};function b(D,E){T(E,200,{},D)}function y(D,E){De(i,2,26,"Failed to send telemetry.",{message:D}),T(E,400,{})}function S(D){y("No endpoint url is provided for the batch",D)}function x(D,E){for(var k,F=0,N=null,te=0;N==null&&te<D[tt];)F=D[te],!u&&F===1?XC()?N=Z:y1()&&(N=q):F===2&&cf(E)&&(!E||!p)?N=O:F===3&&Ba()&&(E?!d:!l)&&(N=M),te++;return N?(k={_transport:F,_isSync:E},k[kz]=N,k):null}function T(D,E,k,F){try{D&&D(E,k,F)}catch{}}function L(D,E){var k=Ui(),F=D[o1];if(!F)return S(E),!0;F=D[o1]+(f?p_e:Sd);var N=D[Ah],te=o?N:new Blob([N],{type:"text/plain;charset=UTF-8"}),pe=k.sendBeacon(F,te);return pe}function M(D,E,k){var F=D[Ah];try{if(F)if(L(D,E))b(Sd,E);else{var N=s&&s.beaconOnRetry;N&&ct(N)?N(D,E,L):(c&&c[kz](D,E,!0),De(i,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(te){o&&Js(i,"Failed to send telemetry using sendBeacon API. Ex:"+Be(te)),T(E,o?0:400,{},Sd)}}function q(D,E,k){var F,N,te,pe=D[uL]||{};!k&&r&&(F=Xs(function(J,ut){N=J,te=ut})),o&&k&&D.disableXhrSync&&(k=!1);var ne=D[o1];if(!ne){S(E),N&&N(!1);return}var se=a$(j$,ne,v,!0,k,D[Kv]);se[Dz]("Content-type","application/json"),me(no(pe),function(J){se[Dz](J,pe[J])}),se.onreadystatechange=function(){o||(ze(se),se.readyState===4&&N&&N(!0))},se.onload=function(){o&&ze(se)};function ze(J){var ut=s&&s.xhrOnComplete,He=ut&&ct(ut);if(He)ut(J,E,D);else{var yt=nl(J);T(E,J[$v],pf(J,o),yt)}}return se.onerror=function(J){T(E,o?se[$v]:400,pf(se,o),o?Sd:lf(se)),te&&te(J)},se.ontimeout=function(){T(E,o?se[$v]:500,pf(se,o),o?Sd:lf(se)),N&&N(!1)},se.send(D[Ah]),F}function O(D,E,k){var F,N=D[o1],te=D[Ah],pe=o?te:new Blob([te],{type:"application/json"}),ne,se,ze,J=new Headers,ut=te[tt],He=!1,yt=!1,ur=D[uL]||{},fe=(F={method:j$,body:pe},F[f$]=!0,F);D.headers&&no(D.headers)[tt]>0&&(me(no(ur),function(ae){J.append(ae,ur[ae])}),fe[uL]=J),v&&o&&(fe.credentials="include"),k&&(fe.keepalive=!0,e+=ut,o?D._sendReason===2&&(He=!0,f&&(N+=p_e)):He=!0);var Ye=new Request(N,fe);try{Ye[f$]=!0}catch{}if(!k&&r&&(ne=Xs(function(ae,Te){se=ae,ze=Te})),!N){S(E),se&&se(!1);return}function U(ae){T(E,o?0:400,{},o?Sd:ae)}function ie(ae,Te,ve){var Qe=ae[$v],ht=s.fetchOnComplete;ht&&ct(ht)?ht(ae,E,ve||Sd,Te):T(E,Qe,{},ve||Sd)}try{kh(fetch(o?N:Ye,o?fe:null),function(ae){if(k&&(e-=ut,ut=0),!yt)if(yt=!0,ae.rejected)U(ae.reason&&ae.reason[fd]),ze&&ze(ae.reason);else{var Te=ae.value;try{!o&&!Te.ok?(U(Te.statusText),se&&se(!1)):o&&!Te.body?(ie(Te,null,Sd),se&&se(!0)):kh(Te.text(),function(ve){ie(Te,D,ve.value),se&&se(!0)})}catch(ve){U(Be(ve)),ze&&ze(ve)}}})}catch(ae){yt||(U(Be(ae)),ze&&ze(ae))}return He&&!yt&&(yt=!0,T(E,200,{}),se&&se(!0)),o&&!yt&&D[Kv]>0&&m&&m.set(function(){yt||(yt=!0,T(E,500,{}),se&&se(!0))},D[Kv]),ne}function Z(D,E,k){var F=Wn(),N=new XDomainRequest,te=D[Ah];N.onload=function(){var J=nl(N),ut=s&&s.xdrOnComplete;ut&&ct(ut)?ut(N,E,D):T(E,200,{},J)},N.onerror=function(){T(E,400,{},o?Sd:ey(N))},N.ontimeout=function(){T(E,500,{})},N.onprogress=function(){};var pe=F&&F.location&&F.location[sL]||"",ne=D[o1];if(!ne){S(E);return}if(!o&&ne.lastIndexOf(pe,0)!==0){var se="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";De(i,2,40,". "+se),y(se,E);return}var ze=o?ne:ne[Zu](/^(https?:)/,"");N.open(j$,ze),D[Kv]&&(N[Kv]=D[Kv]),N.send(te),o&&k?m&&m.set(function(){N.send(te)},0):N.send(te)}function z(){e=0,n=!1,r=!1,i=null,o=null,s=null,a=null,c=null,u=!1,l=!1,d=!1,p=!1,f=!1,m=null}})}return t.__ieDyn=1,t}()});function y_e(t){return t&&t[Zu]?t[Zu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,St):t}function $L(t,e){var r;if(e){var n=St;Ke(e)?(n=St,me(e,function(o){o=y_e(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=y_e(e),n&&(n[0]!=="."&&(n="."+n),t=(t||St)+n)}var i=oWe.exec(t||St)||[];return r={},r[Fa]=i[1],r.ns=(i[2]||St).replace(rWe,".").replace(nWe,St)[Jc](".").sort().join("."),r}function G$(t,e,r){var n=[],i=_w.get(t,VL,{},!1),o=$L(e,r);return Ve(i,function(s,a){me(a,function(c){var u;(!o[Fa]||o[Fa]===c.evtName[Fa])&&(!o.ns||o.ns===o.ns)&&n[Yt]((u={},u[Es]=c.evtName[Fa]+(c.evtName.ns?"."+c.evtName.ns:St),u.handler=c[jC],u))})}),n}function C_e(t,e,r){r===void 0&&(r=!0);var n=_w.get(t,VL,{},r),i=n[e];return i||(i=n[e]=[]),i}function w_e(t,e,r,n){t&&e&&e[Fa]&&(t[v_e]?t[v_e](e[Fa],r,n):t[g_e]&&t[g_e](__e+e[Fa],r))}function sWe(t,e,r,n){var i=!1;return t&&e&&e[Fa]&&r&&(t[h_e]?(t[h_e](e[Fa],r,n),i=!0):t[m_e]&&(t[m_e](__e+e[Fa],r),i=!0)),i}function b_e(t,e,r,n){for(var i=e[tt];i--;){var o=e[i];o&&(!r.ns||r.ns===o.evtName.ns)&&(!n||n(o))&&(w_e(t,o.evtName,o[jC],o.capture),e[ld](i,1))}}function aWe(t,e,r){if(e[Fa])b_e(t,C_e(t,e[Fa]),e,r);else{var n=_w.get(t,VL,{});Ve(n,function(i,o){b_e(t,o,e,r)}),no(n)[tt]===0&&_w.kill(t,VL)}}function hc(t,e){var r;return e?(Ke(e)?r=[t].concat(e):r=[t,e],r=$L("xx",r).ns[Jc](".")):r=t,r}function Ed(t,e,r,n,i){var o;i===void 0&&(i=!1);var s=!1;if(t)try{var a=$L(e,n);if(s=sWe(t,a,r,i),s&&_w.accept(t)){var c=(o={guid:iWe++,evtName:a},o[jC]=r,o.capture=i,o);C_e(t,a.type)[Yt](c)}}catch{}return s}function _f(t,e,r,n,i){if(i===void 0&&(i=!1),t)try{var o=$L(e,n),s=!1;aWe(t,o,function(a){return o.ns&&!r||a[jC]===r?(s=!0,!0):!1}),s||w_e(t,o,r,i)}catch{}}function V$(t,e,r,n){return n===void 0&&(n=!1),Ed(t,e,r,null,n)}function z$(t,e,r,n){n===void 0&&(n=!1),_f(t,e,r,null,n)}function WL(t,e,r){var n=!1,i=Wn();i&&(n=Ed(i,t,e,r),n=Ed(i.body,t,e,r)||n);var o=$n();return o&&(n=Ed(o,t,e,r)||n),n}function KL(t,e,r){var n=Wn();n&&(_f(n,t,e,r),_f(n.body,t,e,r));var i=$n();i&&_f(i,t,e,r)}function R1(t,e,r,n){var i=!1;return e&&t&&t[tt]>0&&me(t,function(o){o&&(!r||hr(r,o)===-1)&&(i=WL(o,e,n)||i)}),i}function YL(t,e,r,n){var i=!1;return e&&t&&Ke(t)&&(i=R1(t,e,r,n),!i&&r&&r[tt]>0&&(i=R1(t,e,null,n))),i}function zh(t,e,r){t&&Ke(t)&&me(t,function(n){n&&KL(n,e,r)})}function xw(t,e,r){return YL([E_e,S_e,zL],t,e,r)}function Sw(t,e){zh([E_e,S_e,zL],t,e)}function A1(t,e,r){function n(s){var a=$n();t&&a&&a.visibilityState==="hidden"&&t(s)}var i=hc(T_e,r),o=R1([zL],t,e,i);return(!e||hr(e,bw)===-1)&&(o=R1([bw],n,e,i)||o),!o&&e&&(o=A1(t,null,r)),o}function Ew(t,e){var r=hc(T_e,e);zh([zL],t,r),zh([bw],null,r)}function P1(t,e,r){function n(s){var a=$n();t&&a&&a.visibilityState==="visible"&&t(s)}var i=hc(I_e,r),o=R1([x_e],t,e,i);return o=R1([bw],n,e,i)||o,!o&&e&&(o=P1(t,null,r)),o}function Tw(t,e){var r=hc(I_e,e);zh([x_e],t,r),zh([bw],null,r)}var __e,m_e,h_e,g_e,v_e,VL,bw,zL,x_e,S_e,E_e,T_e,I_e,rWe,nWe,iWe,_w,oWe,R_e=I(()=>{dt();sn();x1();qi();__e="on",m_e="attachEvent",h_e="addEventListener",g_e="detachEvent",v_e="removeEventListener",VL="events",bw="visibilitychange",zL="pagehide",x_e="pageshow",S_e="unload",E_e="beforeunload",T_e=Yo("aiEvtPageHide"),I_e=Yo("aiEvtPageShow"),rWe=/\.[\.]+/g,nWe=/[\.]+$/,iWe=1,_w=IL("events"),oWe=/^([^.]*)(?:\.(.+)|)/});var $$,A_e=I(()=>{rL();$$=Bi({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var Fr=I(()=>{Jye();Zye();d_e();B$();TL();A$();p$();gd();f_e();dt();rL();R_e();Mh();Da();I$();FL();rl();HL();A_e();T$();x1();jL();D$();Uh();AL();g$()});var Td,P_e,W$,QL,XL=I(()=>{Td="",P_e="https://browser.events.data.microsoft.com/OneCollector/1.0/",W$="version",QL="properties"});var K$,Y$,k1,Id,Q$,Nn,cy,xf,JL,ZL,e3,t3,Iw,r3=I(()=>{K$="initialize",Y$="logger",k1="indexOf",Id="timings",Q$="pollInternalLogs",Nn="value",cy="kind",xf="length",JL="processTelemetryStart",ZL="handleField",e3="rmSanitizer",t3="rmFieldSanitizer",Iw="canHandle"});function xo(t){return!(t===Td||_e(t))}function n3(t){if(t){var e=Qs(t,"-");if(e>-1)return vh(t,e)}return Td}function O_e(){return X$===null&&(X$=!xt(Uint8Array)&&!pWe()&&!Lh()),X$}function i3(t){return!!(t&&_s(t)&&t>=1&&t<=4)}function o3(t,e,r){if(!e&&!xo(e)||typeof t!="string")return null;var n=typeof e;if(n==="string"||n==="number"||n==="boolean"||Ke(e))e={value:e};else if(n==="object"&&!D_e.call(e,"value"))e={value:r?JSON.stringify(e):e};else if(_e(e[Nn])||e[Nn]===Td||!wt(e[Nn])&&!_s(e[Nn])&&!zu(e[Nn])&&!Ke(e[Nn]))return null;if(Ke(e[Nn])&&!Z$(e[Nn]))return null;if(!_e(e[cy])){if(Ke(e[Nn])||!Cw(e[cy]))return null;e[Nn]=e[Nn].toString()}return e}function N1(t,e,r){var n=-1;if(!xt(t))if(e>0&&(e===32?n=8192:e<=13&&(n=e<<5)),dWe(r))n===-1&&(n=0),n|=r;else{var i=lWe[Cd(t)]||-1;n!==-1&&i!==-1?n|=i:i===6&&(n=i)}return n}function M_e(t,e,r){r===void 0&&(r=!0);var n;return t&&(n=t.get(e),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||Td}function F_e(t){t===void 0&&(t="D");var e=fw();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,Td)),e}function uy(t,e,r,n,i){var o={},s=!1,a=0,c=arguments[xf],u=arguments;for(zu(u[0])&&(s=u[0],a++);a<c;a++){var t=u[a];Ve(t,function(d,p){s&&p&&fn(p)?Ke(p)?(o[d]=o[d]||[],me(p,function(f,m){f&&fn(f)?o[d][m]=uy(!0,o[d][m],f):o[d][m]=f})):o[d]=uy(!0,o[d],p):o[d]=p})}return o}function Cw(t){return t===0||t>0&&t<=13||t===32}function dWe(t){return t>=0&&t<=9}function pWe(){var t=Ui();if(!xt(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[k1]("safari")>=0||e[k1]("firefox")>=0)&&e[k1]("chrome")<0)return!0}return!1}function Z$(t){return t[xf]>0}function ww(t,e){var r=t;r[Id]=r[Id]||{},r[Id][JL]=r[Id][JL]||{},r[Id][JL][e]=qa()}function Cd(t){var e=0;if(t!=null){var r=typeof t;r==="string"?e=1:r==="number"?e=2:r==="boolean"?e=3:r===Qp&&(e=4,Ke(t)?(e=4096,t[xf]>0&&(e|=Cd(t[0]))):D_e.call(t,"value")&&(e=8192|Cd(t[Nn])))}return e}function s3(){return!!Gr("chrome")}function U_e(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,cWe,n),r&&s(a,k_e,r),a.open(t,e,!i),r&&s(a,k_e,r),!i&&o&&s(a,uWe,o),a}function $h(t){return t>0}var Sf,J$,D1,D_e,cWe,k_e,uWe,lWe,X$,N_e,L_e,qa,a3=I(()=>{Fr();Da();dt();XL();r3();J$="4.1.1",D1="1DS-Web-JS-"+J$,D_e=IC.hasOwnProperty,cWe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",k_e="withCredentials",uWe="timeout",lWe=(Sf={},Sf[0]=0,Sf[2]=6,Sf[1]=1,Sf[3]=7,Sf[4098]=6,Sf[4097]=1,Sf[4099]=7,Sf),X$=null,N_e=yh(),L_e=bh();qa=Jx});function mWe(t){return t&&(!t.getProperty||!t.setProperty)&&zn("Invalid property storage override passed."),!0}var fWe,B_e,q_e=I(()=>{Da();_o();Fr();dt();XL();a3();r3();fWe=Ys({endpointUrl:P_e,propertyStorageOverride:{isVal:mWe}});B_e=function(t){ka(e,t);function e(){var r=t.call(this)||this;return Wt(e,r,function(n,i){n[K$]=function(o,s,a,c){li(n,function(){return"AppInsightsCore.initialize"},function(){try{i[K$](Dn(o,fWe,a||n[Y$],!1).cfg,s,a,c)}catch(d){var u=n[Y$],l=Be(d);l[k1]("channels")!==-1&&(l+=`
 - Channels must be provided through config.channels only!`),De(u,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}},function(){return{config:o,extensions:s,logger:a,notificationManager:c}})},n.track=function(o){li(n,function(){return"AppInsightsCore.track"},function(){var s=o;if(s){s[Id]=s[Id]||{},s[Id].trackStart=qa(),i3(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=D1;var c=s.baseData=s.baseData||{};c[QL]=c[QL]||{};var u=c[QL];u[W$]=u[W$]||n.pluginVersionString||Td}i.track(s)},function(){return{item:o}},!o.sync)},n[Q$]=function(o){return i[Q$](o||"InternalLog")}}),r}return e.__ieDyn=1,e}(bf)});var H_e,j_e,G_e,V_e,z_e,$_e=I(()=>{Fr();H_e=Bi({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),j_e=Bi({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),G_e=Bi({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),V_e=Bi({Normal:1,Critical:2}),z_e=Bi({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});var W_e,K_e=I(()=>{Fr();dt();XL();a3();r3();W_e=function(){function t(e){var r=this,n={},i=[],o=[];e&&o.push(e);function s(l,d){var p,f=n[l];if(f&&(p=f[d]),!p&&p!==null){if(wt(l)&&wt(d))if(o[xf]>0){for(var m=0;m<o[xf];m++)if(o[m][ZL](l,d)){p={canHandle:!0,fieldHandler:o[m]};break}}else i[xf]===0&&(p={canHandle:!0});if(!p&&p!==null){p=null;for(var m=0;m<i[xf];m++)if(i[m][ZL](l,d)){p={canHandle:!0,handler:i[m],fieldHandler:null};break}}f||(f=n[l]={}),f[d]=p}return p}r.clearCache=function(){n={}},r.addSanitizer=function(l){l&&(G4(i,l)||i.push(l),n={})},r.addFieldSanitizer=function(l){l&&(G4(o,l)||o.push(l),n={})},r[e3]=function(l){if(l){var d=hr(i,l);d!==-1&&(i.splice(d,1),n={}),me(i,function(p){p&&p[e3]&&p[e3](l)})}},r[t3]=function(l){if(l){var d=hr(o,l);d!==-1&&(o.splice(d,1),n={}),me(i,function(p){p&&p[t3]&&p[t3](l)})}},r.isEmpty=function(){return Xx(i)+Xx(o)===0},r[ZL]=function(l,d){var p=s(l,d);return p?p[Iw]:!1},r[Nn]=function(l,d,p,f){var m=s(l,d);if(m&&m[Iw]){if(!m||!m[Iw])return null;if(m.handler)return m.handler[Nn](l,d,p,f);if(!wt(d)||_e(p)||p===Td)return null;var h=null,g=Cd(p);if((g&8192)===8192){var v=g&-8193;if(h=p,!xo(h[Nn])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=c(l,d,p):g===4&&(h=c(l,d,f?JSON.stringify(p):p));if(h)return a(m,l,d,g,h,f)}return null},r.property=function(l,d,p,f){var m=s(l,d);if(!m||!m[Iw]||!wt(d)||_e(p)||!xo(p[Nn]))return null;var h=Cd(p[Nn]);return h===0?null:a(m,l,d,h,p,f)};function a(l,d,p,f,m,h){if(l.handler)return l.handler.property(d,p,m,h);if(!_e(m[cy])){if((f&4096)===4096||!Cw(m[cy]))return null;m[Nn]=m[Nn].toString()}return u(l.fieldHandler,d,p,f,m)}function c(l,d,p){return xo(p)?{value:p}:null}function u(l,d,p,f,m){if(m&&l){var h=l.getSanitizer(d,p,f,m[cy],m.propertyType);if(h)if(f===4){var g={},v=m[Nn];Ve(v,function(y,S){var x=d+"."+p;if(xo(S)){var T=c(x,y,S);T=u(l,x,y,Cd(S),T),T&&(g[y]=T[Nn])}}),m[Nn]=g}else{var b={path:d,name:p,type:f,prop:m,sanitizer:r};m=h.call(r,b)}}return m}}return t.getFieldType=Cd,t}()});var Y_e={};rn(Y_e,{AppInsightsCore:()=>B_e,BaseTelemetryPlugin:()=>yf,DiagnosticLogger:()=>Fh,EventLatency:()=>j_e,EventPersistence:()=>V_e,EventPropertyType:()=>G_e,EventsDiscardedReason:()=>Qu,FullVersionString:()=>D1,InternalAppInsightsCore:()=>bf,LoggingSeverity:()=>$$,MinChannelPriorty:()=>Ez,NotificationManager:()=>lw,PerfEvent:()=>ny,PerfManager:()=>pw,ProcessTelemetryContext:()=>M$,SenderPostManager:()=>ay,TraceLevel:()=>z_e,Undefined:()=>ad,ValueKind:()=>H_e,ValueSanitizer:()=>W_e,Version:()=>J$,_InternalLogMessage:()=>Jv,__getRegisteredEvents:()=>G$,_appendHeader:()=>_1,_getAllResponseHeaders:()=>pf,_logInternalMessage:()=>i$,_throwInternal:()=>De,_warnToConsole:()=>Js,addEventHandler:()=>WL,addEventListeners:()=>YL,addPageHideEventListener:()=>A1,addPageShowEventListener:()=>P1,addPageUnloadEventListener:()=>xw,areCookiesSupported:()=>T1,arrForEach:()=>me,arrIndexOf:()=>hr,arrMap:()=>ud,arrReduce:()=>Qx,attachEvent:()=>V$,blockDynamicConversion:()=>ow,convertAllHeadersToMap:()=>EL,cookieAvailable:()=>T1,createCookieMgr:()=>hf,createDynamicConfig:()=>Dn,createEnumStyle:()=>Bi,createGuid:()=>F_e,createProcessTelemetryContext:()=>Zs,createTraceParent:()=>mw,createUniqueNamespace:()=>Yo,createUnloadHandlerContainer:()=>sy,dateNow:()=>Kn,detachEvent:()=>z$,disallowsSameSiteNone:()=>ML,doPerf:()=>li,dumpObj:()=>Be,eventOff:()=>_f,eventOn:()=>Ed,extend:()=>uy,findW3cTraceParent:()=>vw,forceDynamicConversion:()=>d$,formatErrorMessageXdr:()=>ey,formatErrorMessageXhr:()=>lf,formatTraceParent:()=>gw,generateW3CId:()=>iy,getCommonSchemaMetaData:()=>N1,getConsole:()=>WC,getCookieValue:()=>M_e,getCrypto:()=>KC,getDocument:()=>$n,getDynamicConfigHandler:()=>iw,getExceptionName:()=>mn,getFieldValueType:()=>Cd,getGlobal:()=>xs,getGlobalInst:()=>Gr,getHistory:()=>LC,getIEVersion:()=>QC,getISOString:()=>fc,getJSON:()=>Ko,getLocation:()=>Xv,getMsCrypto:()=>YC,getNavigator:()=>Ui,getPerformance:()=>rf,getResponseText:()=>nl,getSetValue:()=>JC,getTenantId:()=>n3,getTime:()=>qa,getWindow:()=>Wn,hasDocument:()=>yh,hasHistory:()=>F4,hasJSON:()=>hd,hasNavigator:()=>Yx,hasOwnProperty:()=>Si,hasWindow:()=>bh,isArray:()=>Ke,isArrayValid:()=>Z$,isBeaconsSupported:()=>Ba,isBoolean:()=>zu,isChromium:()=>s3,isDate:()=>zx,isDocumentObjectAvailable:()=>N_e,isError:()=>ph,isFetchSupported:()=>cf,isFunction:()=>ct,isGreaterThanZero:()=>$h,isIE:()=>Oh,isLatency:()=>i3,isNotTruthy:()=>T4,isNullOrUndefined:()=>_e,isNumber:()=>_s,isObject:()=>fn,isReactNative:()=>Lh,isSampledFlag:()=>hw,isString:()=>wt,isTruthy:()=>zc,isTypeof:()=>S4,isUint8ArrayAvailable:()=>O_e,isUndefined:()=>xt,isValidSpanId:()=>xd,isValidTraceId:()=>_d,isValidTraceParent:()=>C1,isValueAssigned:()=>xo,isValueKind:()=>Cw,isWindowObjectAvailable:()=>L_e,isXhrSupported:()=>y1,mergeEvtNamespace:()=>hc,newGuid:()=>fw,newId:()=>rw,normalizeJsName:()=>Zv,objDefineAccessors:()=>M4,objForEachKey:()=>Ve,objFreeze:()=>cd,objKeys:()=>no,objSeal:()=>R4,onConfigChange:()=>Hi,openXhr:()=>U_e,optimizeObject:()=>eu,parseResponse:()=>ty,parseTraceParent:()=>oy,perfNow:()=>Jx,prependTransports:()=>df,proxyAssign:()=>o$,proxyFunctionAs:()=>uf,proxyFunctions:()=>mc,random32:()=>ff,randomValue:()=>tw,removeEventHandler:()=>KL,removeEventListeners:()=>zh,removePageHideEventListener:()=>Ew,removePageShowEventListener:()=>Tw,removePageUnloadEventListener:()=>Sw,safeGetCookieMgr:()=>E$,safeGetLogger:()=>tl,sanitizeProperty:()=>o3,setEnableEnvMocks:()=>Zz,setProcessTelemetryTimings:()=>ww,setValue:()=>Zc,strContains:()=>Ei,strEndsWith:()=>xh,strFunction:()=>Bx,strObject:()=>Qp,strPrototype:()=>Vu,strStartsWith:()=>Bv,strTrim:()=>wr,strUndefined:()=>ad,throwError:()=>zn,toISOString:()=>fc,useXDomainRequest:()=>XC});var ly=I(()=>{q_e();$_e();K_e();Fr();a3()});var dy,c3,u3,eW=I(()=>{dy="REAL_TIME",c3="NEAR_REAL_TIME",u3="BEST_EFFORT"});var il,l3,Q_e,tW,X_e,J_e,Z_e,rW,nW,d3,exe,txe,rxe,p3,iW,f3,m3,h3,Rw,oW,sW,nxe,L1,aW,g3,Aw=I(()=>{il="",l3="drop",Q_e="send",tW="requeue",X_e="rspFail",J_e="oth",Z_e="no-cache, no-store",rW="application/x-json-stream",nW="cache-control",d3="content-type",exe="kill-tokens",txe="kill-duration",rxe="time-delta-millis",p3="client-version",iW="client-id",f3="time-delta-to-apply-millis",m3="upload-time",h3="apikey",Rw="AuthMsaDeviceTicket",oW="WebAuthToken",sW="AuthXToken",nxe="NoResponseBody",L1="msfpc",aW="trace",g3="user"});var Pw,v3,y3,b3,kw,Bt,wd,ru,Ti,Rd,So,Ad,py,_3,Wh,x3,fy,S3,E3,ixe,cW,uW,oxe,sxe,T3,lW,dW,axe,cxe,pW,fW,uxe,I3,C3,mW,my,O1,hW,Ts,Ha,Dw,Nw,M1,w3,Lw,lxe,R3,A3,F1,gW,Ow,P3,k3,U1,D3,N3,L3,Mw,dxe,pxe,vW,yW,fxe,mxe,hxe,O3,Fw,Kh,hy,B1=I(()=>{Pw="allowRequestSending",v3="firstRequestSent",y3="shouldAddClockSkewHeaders",b3="getClockSkewHeaderValue",kw="setClockSkew",Bt="length",wd="concat",ru="iKey",Ti="count",Rd="events",So="push",Ad="split",py="splice",_3="toLowerCase",Wh="hdrs",x3="useHdrs",fy="initialize",S3="setTimeoutOverride",E3="clearTimeoutOverride",ixe="payloadPreprocessor",cW="overrideEndpointUrl",uW="avoidOptions",oxe="disableEventTimings",sxe="stringifyObjects",T3="enableCompoundKey",lW="disableXhrSync",dW="disableFetchKeepAlive",axe="addNoResponse",cxe="excludeCsMetaData",pW="useSendBeacon",fW="alwaysUseXhrOverride",uxe="unloadTransports",I3="serializeOfflineEvt",C3="getOfflineRequestDetails",mW="createPayload",my="headers",O1="_thePayload",hW="urlString",Ts="batches",Ha="sendType",Dw="addHeader",Nw="canSendRequest",M1="sendQueuedRequests",w3="isCompletelyIdle",Lw="setUnloading",lxe="isTenantKilled",R3="sendSynchronousBatch",A3="_transport",F1="getWParam",gW="isBeacon",Ow="timings",P3="isTeardown",k3="isSync",U1="data",D3="_sendReason",N3="setKillSwitchTenants",L3="_backOffTransmission",Mw="identifier",dxe="disableOptimizeObj",pxe="ignoreMc1Ms0CookieProcessing",vW="eventsLimitInMem",yW="autoFlushEventsLimit",fxe="disableAutoBatchFlushLimit",mxe="overrideInstrumentationKey",hxe="disableTelemetry",O3="baseData",Fw="sendAttempt",Kh="latency",hy="sync"});function vxe(t){var e=(t.ext||{}).intweb;return e&&xo(e[L1])?e[L1]:null}function gxe(t){for(var e=null,r=0;e===null&&r<t[Bt];r++)e=vxe(t[r]);return e}var q1,bW=I(()=>{ly();Aw();B1();q1=function(){function t(e,r){var n=r?[][wd](r):[],i=this,o=gxe(n);i[ru]=function(){return e},i.Msfpc=function(){return o||il},i[Ti]=function(){return n[Bt]},i[Rd]=function(){return n},i.addEvent=function(s){return s?(n[So](s),o||(o=vxe(s)),!0):!1},i[Ad]=function(s,a){var c;if(s<n[Bt]){var u=n[Bt]-s;_e(a)||(u=a<u?a:u),c=n[py](s,u),o=gxe(n)}return new t(e,c)}}return t.create=function(e,r){return new t(e,r)},t}()});var yxe,bxe=I(()=>{_o();B1();yxe=function(){function t(){var e=!0,r=!0,n=!0,i="use-collector-delta",o=!1;Wt(t,this,function(s){s[Pw]=function(){return e},s[v3]=function(){n&&(n=!1,o||(e=!1))},s[y3]=function(){return r},s[b3]=function(){return i},s[kw]=function(a){o||(a?(i=a,r=!0,o=!0):r=!1,e=!0)}})}return t.__ieDyn=1,t}()});var hWe,_xe,xxe=I(()=>{_o();ly();B1();hWe=1e3,_xe=function(){function t(){var e={};function r(n){var i=[];return n&&me(n,function(o){i[So](wr(o))}),i}Wt(t,this,function(n){n[N3]=function(i,o){if(i&&o)try{var s=r(i[Ad](","));if(o==="this-request-only")return s;for(var a=parseInt(o,10)*hWe,c=0;c<s[Bt];++c)e[s[c]]=Kn()+a}catch{return[]}return[]},n[lxe]=function(i){var o=e,s=wr(i);return o[s]!==void 0&&o[s]>Kn()?!0:(delete o[s],!1)}})}return t.__ieDyn=1,t}()});function Exe(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function M3(t){var e=0,r=Sxe*gWe,n=Sxe*vWe,i=Math.floor(Math.random()*(n-r))+r;return e=Math.pow(2,t)*i,Math.min(e,yWe)}var gWe,vWe,Sxe,yWe,_W=I(()=>{gWe=.8,vWe=1.2,Sxe=3e3,yWe=6e5});function EWe(t,e,r,n,i){if(i&&e){var o=t(i.value,i.kind,i.propertyType);if(o>-1){var s=e[Txe];s||(s=e[Txe]={f:{}});var a=s[F3];if(a||(a=s[F3]={}),r)for(var c=0;c<r.length;c++){var u=r[c];a[u]||(a[u]={f:{}});var l=a[u][F3];l||(l=a[u][F3]={}),a=l}a=a[n]={},Ke(i.value)?a.a={t:o}:a.t=o}}}var bWe,_We,Ixe,Cxe,xWe,Txe,F3,SWe,wxe,Rxe=I(()=>{_o();ly();bW();Aw();dt();bWe=20,_We=3984588,Ixe=65e3,Cxe=2e6,xWe=Math.min(Cxe,Ixe),Txe="metadata",F3="f",SWe=/\./,wxe=function(){function t(e,r,n,i,o,s){var a="data",c="baseData",u="ext",l=!!i,d=!0,p=r,f={},m=!!s,h=o||N1;Wt(t,this,function(g){g.createPayload=function(y,S,x,T,L,M){return{apiKeys:[],payloadBlob:il,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:y,isTeardown:S,isSync:x,isBeacon:T,sendType:M,sendReason:L}},g.appendPayload=function(y,S,x){var T=y&&S&&!y.overflow;return T&&li(e,function(){return"Serializer:appendPayload"},function(){for(var L=S.events(),M=y.payloadBlob,q=y.numEvents,O=!1,Z=[],z=[],D=y.isBeacon,E=D?Ixe:_We,k=D?xWe:Cxe,F=0,N=0;F<L.length;){var te=L[F];if(te){if(q>=x){y.overflow=S.split(F);break}var pe=g.getEventBlob(te);if(pe&&pe.length<=k){var ne=pe.length,se=M.length;if(se+ne>E){y.overflow=S.split(F);break}M&&(M+=`
`),M+=pe,N++,N>bWe&&(Wu(M,0,1),N=0),O=!0,q++}else pe?Z.push(te):z.push(te),L.splice(F,1),F--}F++}if(Z.length>0&&y.sizeExceed.push(q1.create(S.iKey(),Z)),z.length>0&&y.failedEvts.push(q1.create(S.iKey(),z)),O){y.batches.push(S),y.payloadBlob=M,y.numEvents=q;var ze=S.iKey();hr(y.apiKeys,ze)===-1&&y.apiKeys.push(ze)}},function(){return{payload:y,theBatch:{iKey:S.iKey(),evts:S.events()},max:x}}),T},g.getEventBlob=function(y){try{return li(e,function(){return"Serializer.getEventBlob"},function(){var S={};S.name=y.name,S.time=y.time,S.ver=y.ver,S.iKey="o:"+n3(y.iKey);var x={},T;m||(T=function(O,Z,z){EWe(h,x,O,Z,z)});var L=y[u];L&&(S[u]=x,Ve(L,function(O,Z){var z=x[O]={};b(Z,z,"ext."+O,!0,null,null,!0)}));var M=S[a]={};M.baseType=y.baseType;var q=M[c]={};return b(y.baseData,q,c,!1,[c],T,d),b(y.data,M,a,!1,[],T,d),JSON.stringify(S)},function(){return{item:y}})}catch{return null}};function v(y,S){var x=f[y];return x===void 0&&(y.length>=7&&(x=Bv(y,"ext.metadata")||Bv(y,"ext.web")),f[y]=x),x}function b(y,S,x,T,L,M,q){Ve(y,function(O,Z){var z=null;if(Z||xo(Z)){var D=x,E=O,k=L,F=S;if(l&&!T&&SWe.test(O)){var N=O.split("."),te=N.length;if(te>1){k&&(k=k.slice());for(var pe=0;pe<te-1;pe++){var ne=N[pe];F=F[ne]=F[ne]||{},D+="."+ne,k&&k.push(ne)}E=N[te-1]}}var se=T&&v(D,E);if(!se&&p&&p.handleField(D,E)?z=p.value(D,E,Z,n):z=o3(E,Z,n),z){var ze=z.value;if(F[E]=ze,M&&M(k,E,z),q&&typeof ze=="object"&&!Ke(ze)){var J=k;J&&(J=J.slice(),J.push(E)),b(Z,ze,D+"."+E,T,J,M,q)}}}})}})}return t.__ieDyn=1,t}()});function H1(t,e){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return uz([t,e],r,n,i)}}}var xW=I(()=>{dt()});function vy(t,e,r){EW[t]=e,r!==!1&&(TW[e]=t)}function Axe(t,e){var r=!1;if(t&&e){var n=no(t);if(n&&n[Bt]>0)for(var i=e[_3](),o=0;o<n[Bt];o++){var s=n[o];if(s&&Si(e,s)&&s[_3]()===i){r=!0;break}}}return r}function j1(t,e,r,n){e&&r&&r[Bt]>0&&(n&&EW[e]?(t[Wh][EW[e]]=r,t[x3]=!0):t.url+="&"+e+"="+r)}function wWe(t,e,r){for(var n=0;n<t[Bt];n++)if(t[n].name===e){t[n].value=r;return}t[So]({name:e,value:r})}function RWe(t,e){for(var r=0;r<t[Bt];r++)if(t[r].name===e){t[py](r,1);return}}var gy,SW,TWe,IWe,CWe,EW,TW,Pxe,kxe=I(()=>{_o();ly();dt();bxe();Aw();xxe();_W();Rxe();xW();B1();SW="sendAttempt",TWe="&"+nxe+"=true",IWe="?cors=true&"+d3[_3]()+"="+rW,CWe=(gy={},gy[1]=tW,gy[100]=tW,gy[200]="sent",gy[8004]=l3,gy[8003]=l3,gy),EW={},TW={};vy(Rw,Rw,!1);vy(p3,p3);vy(iW,"Client-Id");vy(h3,h3);vy(f3,f3);vy(m3,m3);vy(sW,sW);Pxe=function(){function t(e,r,n,i){var o,s,a,c,u=!1,l,d,p,f,m,h,g,v,b,y,S,x,T,L,M,q,O,Z,z,D,E,k,F,N,te,pe,ne;Wt(t,this,function(se){yt();var ze=!0;se[fy]=function($,Ie,Fe){N||(m=Ie,x=Ie.getCookieMgr(),d=Fe,p=d.diagLog(),Kc(D,Hi($,function(ot){var j,ee=ot.cfg,le=ot.cfg.extensionConfig[Fe.identifier];te=H1(le[S3],le[E3]),xo(ee.anonCookieName)?wWe(g,"anoncknm",ee.anonCookieName):RWe(g,"anoncknm"),E=le[ixe],k=le.payloadListener;var be=le.httpXHROverride,H=le[cW]?le[cW]:ee.endpointUrl;o=H+IWe,L=xt(le[uW])?!0:!le[uW],S=!le[oxe];var K=le.valueSanitizer,oe=le[sxe],xe=!!ee[T3];xt(le[T3])||(xe=!!le[T3]),M=le.xhrTimeout,q=!!le[lW],O=!!le[dW],z=le[axe]!==!1,pe=!!le[cxe],Ie.getPlugin("LocalStorage")&&(O=!0),u=!Lh(),y=new wxe(m,K,oe,xe,N1,pe),_e(le[pW])||(u=!!le[pW]);var $e=ut();ne?ne.SetConfig($e):(ne=new ay,ne[fy]($e,p));var Ae=be,nr=le[fW]?be:null,mr=le[fW]?be:null,Ri=[3,2];if(!be){h=!1;var Ka=[];Lh()?(Ka=[2,1],Ri=[2,1,3]):Ka=[1,2,3],Ka=df(Ka,le.transports),be=J(Ka,!1),be||Js(p,"No available transport to send events"),Ae=J(Ka,!0)}nr||(Ri=df(Ri,le[uxe]),nr=J(Ri,!0)),Z=!h&&(u&&Ba()||!O&&cf(!0)),f=(j={},j[0]=be,j[1]=Ae||J([1,2,3],!0),j[2]=nr||Ae||J([1],!0),j[3]=mr||J([2,3],!0)||Ae||J([1],!0),j)})),N=!0)},se.addResponseHandler=function($){return F[So]($),{rm:function(){var Ie=F.indexOf($);Ie>=0&&F[py](Ie,1)}}},se[I3]=function($){try{if(y)return y.getEventBlob($)}catch{}return il},se[C3]=function(){try{var $=y&&y[mW](0,!1,!1,!1,1,0);return yn($,L)}catch{}return null};function J($,Ie){try{return ne&&ne.getSenderInst($,Ie)}catch{}return null}se._getDbgPlgTargets=function(){return[f[0],s,y,f]};function ut(){try{var $={xdrOnComplete:He,fetchOnComplete:ur,xhrOnComplete:fe,beaconOnRetry:U},Ie={enableSendPromise:!1,isOneDs:!0,disableCredentials:!ze,disableXhr:!1,disableBeacon:!u,disableBeaconSync:!u,disableFetchKeepAlive:O,timeWrapper:te,addNoResponse:z,senderOnCompleteCallBack:$};return Ie}catch{}return null}function He($,Ie,Fe){var ot=nl($);Ye(Ie,200,{},ot),bl(ot)}function yt(){var $;o=null,s=new _xe,a=!1,c=new yxe,u=!1,l=0,d=null,p=null,f=null,m=null,h=!0,g=[],v={},b=[],y=null,S=!1,x=null,T=!1,L=!1,M=$,q=$,O=$,Z=$,z=$,D=[],E=$,k=$,F=[],N=!1,te=H1(),pe=!1,ne=null}function ur($,Ie,Fe,ot){var j=function(be,H,K){Ye(Ie,be,H,K),bl(K)},ee={},le=$[my];le&&le.forEach(function(be,H){ee[H]=be}),j($.status,ee,Fe||il)}function fe($,Ie,Fe){var ot=nl($);Ye(Ie,$.status,pf($,!0),ot),bl(ot)}function Ye($,Ie,Fe,ot){try{$(Ie,Fe,ot)}catch(j){De(p,2,518,Be(j))}}function U($,Ie,Fe){var ot=$,j=200,ee=ot[O1],le=$[hW]+(z?TWe:il);try{var be=Ui();if(ee){var H=!!m.getPlugin("LocalStorage"),K=[],oe=[];me(ee[Ts],function(xe){if(K&&xe&&xe[Ti]()>0)for(var $e=xe[Rd](),Ae=0;Ae<$e[Bt];Ae++)if(be.sendBeacon(le,y.getEventBlob($e[Ae])))oe[So](xe[Ae]);else{K[So](xe[Ad](Ae));break}else K[So](xe[Ad](0))}),oe[Bt]>0&&(ee.sentEvts=oe),H||ca(K,8003,ee[Ha],!0)}else j=0}catch(xe){Js(p,"Failed to send telemetry using sendBeacon API. Ex:"+Be(xe)),j=0}finally{Ye(Ie,j,{},il)}}function ie($){return $===2||$===3}function ae($){return T&&ie($)&&($=2),$}se[Dw]=function($,Ie){v[$]=Ie},se.removeHeader=function($){delete v[$]},se[Nw]=function(){return Te()&&c[Pw]()},se[M1]=function($,Ie){xt($)&&($=0),T&&($=ae($),Ie=2),Qe(b,$,0)&&Wr(ve(),0,!1,$,Ie||0)},se[w3]=function(){return!a&&l===0&&b[Bt]===0},se[Lw]=function($){T=$},se.addBatch=function($){if($&&$[Ti]()>0){if(s.isTenantKilled($[ru]()))return!1;b[So]($)}return!0},se.teardown=function(){b[Bt]>0&&Wr(ve(),0,!0,2,2),me(D,function($){$&&$.rm&&$.rm()}),D=[]},se.pause=function(){a=!0},se.resume=function(){a=!1,se[M1](0,4)},se[R3]=function($,Ie,Fe){$&&$[Ti]()>0&&(_e(Ie)&&(Ie=1),T&&(Ie=ae(Ie),Fe=2),Wr([$],0,!1,Ie,Fe||0))};function Te(){return!a&&l<r}function ve(){var $=b;return b=[],$}function Qe($,Ie,Fe){var ot=!1;return $&&$[Bt]>0&&!a&&f[Ie]&&y&&(ot=Ie!==0||Te()&&(Fe>0||c[Pw]())),ot}function ht($){var Ie={};return $&&me($,function(Fe,ot){Ie[ot]={iKey:Fe[ru](),evts:Fe[Rd]()}}),Ie}function Wr($,Ie,Fe,ot,j){if(!(!$||$[Bt]===0)){if(a){ca($,1,ot);return}ot=ae(ot);try{var ee=$,le=ot!==0;li(m,function(){return"HttpManager:_sendBatches"},function(be){be&&($=$.slice(0));for(var H=[],K=null,oe=qa(),xe=f[ot]||(le?f[1]:f[0]),$e=xe&&xe[A3],Ae=Z&&(T||ie(ot)||$e===3||xe._isSync&&$e===2);Qe($,ot,Ie);){var nr=$.shift();nr&&nr[Ti]()>0&&(s.isTenantKilled(nr[ru]())?H[So](nr):(K=K||y[mW](Ie,Fe,le,Ae,j,ot),y.appendPayload(K,nr,e)?K.overflow!==null&&($=[K.overflow][wd]($),K.overflow=null,Ls(K,oe,qa(),j),oe=qa(),K=null):(Ls(K,oe,qa(),j),oe=qa(),$=[nr][wd]($),K=null)))}K&&Ls(K,oe,qa(),j),$[Bt]>0&&(b=$[wd](b)),ca(H,8004,ot)},function(){return{batches:ht(ee),retryCount:Ie,isTeardown:Fe,isSynchronous:le,sendReason:j,useSendBeacon:ie(ot),sendType:ot}},!le)}catch(be){De(p,2,48,"Unexpected Exception sending batch: "+Be(be))}}}function yn($,Ie){var Fe={url:o,hdrs:{},useHdrs:!1};Ie?(Fe[Wh]=uy(Fe[Wh],v),Fe.useHdrs=no(Fe.hdrs)[Bt]>0):Ve(v,function(be,H){TW[be]?j1(Fe,TW[be],H,!1):(Fe[Wh][be]=H,Fe[x3]=!0)}),j1(Fe,iW,"NO_AUTH",Ie),j1(Fe,p3,D1,Ie);var ot=il;me($.apiKeys,function(be){ot[Bt]>0&&(ot+=","),ot+=be}),j1(Fe,h3,ot,Ie),j1(Fe,m3,Kn().toString(),Ie);var j=cT($);if(xo(j)&&(Fe.url+="&ext.intweb.msfpc="+j),c[y3]()&&j1(Fe,f3,c[b3](),Ie),m[F1]){var ee=m[F1]();ee>=0&&(Fe.url+="&w="+ee)}for(var le=0;le<g[Bt];le++)Fe.url+="&"+g[le].name+"="+g[le].value;return Fe}function Jn($,Ie,Fe){$[Ie]=$[Ie]||{},$[Ie][d.identifier]=Fe}function Ls($,Ie,Fe,ot){if($&&$.payloadBlob&&$.payloadBlob[Bt]>0){var j=!!E,ee=f[$.sendType];!ie($[Ha])&&$[gW]&&$.sendReason===2&&(ee=f[2]||f[3]||ee);var le=L;($.isBeacon||ee[A3]===3)&&(le=!1);var be=yn($,le);le=le||be[x3];var H=qa();li(m,function(){return"HttpManager:_doPayloadSend"},function(){for(var K=0;K<$.batches[Bt];K++)for(var oe=$[Ts][K],xe=oe[Rd](),$e=0;$e<xe[Bt];$e++){var Ae=xe[$e];if(S){var nr=Ae[Ow]=Ae[Ow]||{};Jn(nr,"sendEventStart",H),Jn(nr,"serializationStart",Ie),Jn(nr,"serializationCompleted",Fe)}Ae[SW]>0?Ae[SW]++:Ae[SW]=1}ca($[Ts],1e3+(ot||0),$[Ha],!0);var mr={data:$.payloadBlob,urlString:be.url,headers:be[Wh],_thePayload:$,_sendReason:ot,timeout:M,disableXhrSync:q,disableFetchKeepAlive:O};le&&(Axe(mr[my],nW)||(mr[my][nW]=Z_e),Axe(mr[my],d3)||(mr[my][d3]=rW));var Ri=null;ee&&(Ri=function(Ka){c[v3]();var sm=function(am,_0){yb(am,_0,$,ot)},Os=$[P3]||$[k3];try{ee.sendPOST(Ka,sm,Os),k&&k(mr,Ka,Os,$[gW])}catch(am){Js(p,"Unexpected exception sending payload. Ex:"+Be(am)),Ye(sm,0,{})}}),li(m,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Ri)if($[Ha]===0&&l++,j&&!$.isBeacon&&ee[A3]!==3){var Ka={data:mr[U1],urlString:mr[hW],headers:uy({},mr[my]),timeout:mr.timeout,disableXhrSync:mr[lW],disableFetchKeepAlive:mr[dW]},sm=!1;li(m,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{E(Ka,function(Os){sm=!0,!h&&!Os[O1]&&(Os[O1]=Os[O1]||mr[O1],Os[D3]=Os[D3]||mr[D3]),Ri(Os)},$.isSync||$[P3])}catch{sm||Ri(mr)}})}else Ri(mr)})},function(){return{thePayload:$,serializationStart:Ie,serializationCompleted:Fe,sendReason:ot}},$[k3])}$.sizeExceed&&$.sizeExceed[Bt]>0&&ca($.sizeExceed,8003,$[Ha]),$.failedEvts&&$.failedEvts[Bt]>0&&ca($.failedEvts,8002,$[Ha])}function mp($,Ie){S&&me($,function(Fe){var ot=Fe[Ow]=Fe[Ow]||{};Jn(ot,"sendEventCompleted",Ie)})}function yb($,Ie,Fe,ot){var j=9e3,ee=null,le=!1,be=!1;try{var H=!0;if(typeof $!==ad){if(Ie){c[kw](Ie[rxe]);var K=Ie[txe]||Ie["kill-duration-seconds"];me(s[N3](Ie[exe],K),function(xe){me(Fe[Ts],function($e){if($e[ru]()===xe){ee=ee||[];var Ae=$e[Ad](0);Fe.numEvents-=Ae[Ti](),ee[So](Ae)}})})}if($==200||$==204){j=200;return}(!Exe($)||Fe.numEvents<=0)&&(H=!1),j=9e3+$%1e3}if(H){j=100;var oe=Fe.retryCnt;Fe[Ha]===0&&(oe<n?(le=!0,hp(function(){Fe[Ha]===0&&l--,Wr(Fe[Ts],oe+1,Fe[P3],T?2:Fe[Ha],5)},T,M3(oe))):(be=!0,T&&(j=8001)))}}finally{le||(c[kw](),b0(Fe,j,ot,be)),ca(ee,8004,Fe[Ha])}}function b0($,Ie,Fe,ot){try{ot&&d[L3]();var j=$[Ts];Ie===200&&(j=$.sentEvts||$[Ts],!ot&&!$[k3]&&d._clearBackOff(),bb(j)),ca(j,Ie,$[Ha],!0)}finally{$[Ha]===0&&(l--,Fe!==5&&se.sendQueuedRequests($[Ha],Fe))}}function bb($){if(S){var Ie=qa();me($,function(Fe){Fe&&Fe[Ti]()>0&&mp(Fe[Rd](),Ie)})}}function hp($,Ie,Fe){Ie?$():te.set($,Fe)}function cT($){for(var Ie=0;Ie<$.batches[Bt];Ie++){var Fe=$[Ts][Ie].Msfpc();if(Fe)return encodeURIComponent(Fe)}return il}function bl($){var Ie=F;try{for(var Fe=0;Fe<Ie[Bt];Fe++)try{Ie[Fe]($)}catch(j){De(p,1,519,"Response handler failed: "+j)}if($){var ot=JSON.parse($);xo(ot.webResult)&&xo(ot.webResult[L1])&&x.set("MSFPC",ot.webResult[L1],365*86400)}}catch{}}function ca($,Ie,Fe,ot){if($&&$[Bt]>0&&i){var j=i[om(Ie)];if(j){var ee=Fe!==0;li(m,function(){return"HttpManager:_sendBatchesNotification"},function(){hp(function(){try{j.call(i,$,Ie,ee,Fe)}catch(le){De(p,1,74,"send request notification failed: "+le)}},ot||ee,0)},function(){return{batches:ht($),reason:Ie,isSync:ee,sendSync:ot,sendType:Fe}},!ee)}}}function om($){var Ie=CWe[$];return xo(Ie)||(Ie=J_e,$>=9e3&&$<=9999?Ie=X_e:$>=8e3&&$<=8999?Ie=l3:$>=1e3&&$<=1999&&(Ie=Q_e)),Ie}})}return t.__ieDyn=1,t}()});function LWe(t){return t&&t.sendPOST}var AWe,Dxe,PWe,Oxe,Mxe,kWe,Nxe,DWe,IW,yy,Lxe,so,NWe,Fxe,Uxe=I(()=>{Da();_o();ly();f1();dt();eW();bW();kxe();Aw();_W();xW();B1();AWe=.25,Dxe=500,PWe=20,Oxe=6,Mxe=2,kWe=4,Nxe=2,DWe=1,IW=1e4,yy="eventsDiscarded",Lxe="",so=void 0,NWe=Ys({eventsLimitInMem:{isVal:$h,v:IW},immediateEventLimit:{isVal:$h,v:500},autoFlushEventsLimit:{isVal:$h,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:LWe,v:so},overrideInstrumentationKey:so,overrideEndpointUrl:so,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:so,clearTimeoutOverride:so,payloadPreprocessor:so,payloadListener:so,disableEventTimings:so,valueSanitizer:so,stringifyObjects:so,enableCompoundKey:so,disableOptimizeObj:!1,transports:so,unloadTransports:so,useSendBeacon:so,disableFetchKeepAlive:so,avoidOptions:!1,xhrTimeout:so,disableXhrSync:so,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:_s,v:Oxe},maxUnloadEventRetryAttempts:{isVal:_s,v:Mxe},addNoResponse:so,excludeCsMetaData:so});Fxe=function(t){ka(e,t);function e(){var r=t.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="4.1.1";var n,i=!1,o=[],s,a=!1,c=0,u,l=0,d,p={},f=dy,m,h,g,v,b,y,S,x,T,L,M,q,O,Z,z,D,E,k,F,N,te,pe;return Wt(e,r,function(ne,se){Te(),ne._getDbgPlgTargets=function(){return[b,n]},ne[fy]=function(H,K,oe){li(K,function(){return"PostChannel:initialize"},function(){se[fy](H,K,oe),F=K.getNotifyMgr();try{z=hc(Yo(ne[Mw]),K.evtNamespace&&K.evtNamespace()),ne._addHook(Hi(H,function(xe){var $e=xe.cfg,Ae=Zs(null,$e,K);n=Ae.getExtCfg(ne[Mw],NWe),D=H1(n[S3],n[E3]),M=!n[dxe]&&s3(),E=n[pxe],J(K),d=n[vW],u=n.immediateEventLimit,S=n[yW],O=n.maxEventRetryAttempts,Z=n.maxUnloadEventRetryAttempts,k=n[fxe],be(),te=n[mxe],pe=!!n[hxe],N&&ze();var nr=$e.disablePageUnloadEvents||[];N=xw(yt,nr,z),N=A1(yt,nr,z)||N,N=P1(ur,$e.disablePageShowEvents,z)||N})),b[fy](H,ne.core,ne)}catch(xe){throw ne.setInitialized(!1),xe}},function(){return{theConfig:H,core:K,extensions:oe}})},ne.processTelemetry=function(H,K){ww(H,ne[Mw]),K=K||ne._getTelCtx(K);var oe=H;!pe&&!i&&(te&&(oe[ru]=te),Ye(oe,!0),q?ht(2,2):ae()),ne.processNext(oe,K)},ne.getOfflineSupport=function(){try{var H=b&&b[C3]();if(H)return{getUrl:function(){return H.url},serialize:He,batch:ut,shouldProcess:function(K){return!pe},createPayload:function(K){return{urlString:H.url,headers:H[Wh],data:K}}}}catch{}return null},ne._doTeardown=function(H,K){ht(2,2),i=!0,b.teardown(),ze(),Te()};function ze(){Sw(null,z),Ew(null,z),Tw(null,z)}function J(H){var K=H[F1];H[F1]=function(){var oe=0;return E&&(oe=oe|2),oe|K.call(H)}}function ut(H){var K=Lxe;return H&&H[Bt]&&me(H,function(oe){K&&(K+=`
`),K+=oe}),K}function He(H){var K=Lxe;try{fe(H),K=b[I3](H)}catch{}return K}function yt(H){var K=H||Wn().event;K.type!=="beforeunload"&&(q=!0,b[Lw](q)),ht(2,2)}function ur(H){q=!1,b[Lw](q)}function fe(H){H.ext&&H.ext[aW]&&delete H.ext[aW],H.ext&&H.ext[g3]&&H.ext[g3].id&&delete H.ext[g3].id,M&&(H.ext=eu(H.ext),H[O3]&&(H[O3]=eu(H[O3])),H[U1]&&(H[U1]=eu(H[U1])))}function Ye(H,K){if(H[Fw]||(H[Fw]=0),H[Kh]||(H[Kh]=1),fe(H),H[hy]){if(g||a)H[Kh]=3,H[hy]=!1;else if(b){M&&(H=eu(H)),b[R3](q1.create(H[ru],[H]),H[hy]===!0?1:H[hy],3);return}}var oe=H[Kh],xe=l,$e=d;oe===4&&(xe=c,$e=u);var Ae=!1;if(xe<$e)Ae=!Ls(H,K);else{var nr=1,mr=PWe;oe===4&&(nr=4,mr=1),Ae=!0,mp(H[ru],H[Kh],nr,mr)&&(Ae=!Ls(H,K))}Ae&&$(yy,[H],Qu.QueueFull)}ne.setEventQueueLimits=function(H,K){n[vW]=d=$h(H)?H:IW,n[yW]=S=$h(K)?K:0,be();var oe=l>H;if(!oe&&x>0)for(var xe=1;!oe&&xe<=3;xe++){var $e=y[xe];$e&&$e[Ts]&&me($e[Ts],function(Ae){Ae&&Ae[Ti]()>=x&&(oe=!0)})}Jn(!0,oe)},ne.pause=function(){Qe(),a=!0,b.pause()},ne.resume=function(){a=!1,b.resume(),ae()},ne._loadTransmitProfiles=function(H){cT(),Ve(H,function(K,oe){var xe=oe[Bt];if(xe>=2){var $e=xe>2?oe[2]:0;if(oe[py](0,xe-2),oe[1]<0&&(oe[0]=-1),oe[1]>0&&oe[0]>0){var Ae=oe[0]/oe[1];oe[0]=Math.ceil(Ae)*oe[1]}$e>=0&&oe[1]>=0&&$e>oe[1]&&($e=oe[1]),oe[So]($e),p[K]=oe}})},ne.flush=function(H,K,oe){H===void 0&&(H=!0);var xe;if(!a)if(oe=oe||1,H)K||(xe=Xs(function(Ae){K=Ae})),s==null?(Qe(),b0(1,0,oe),s=ve(function(){s=null,bb(K,oe)},0)):o[So](K);else{var $e=Qe();U(1,1,oe),K&&K(),$e&&ae()}return xe},ne.setMsaAuthTicket=function(H){b[Dw](Rw,H)},ne.setAuthPluginHeader=function(H){b[Dw](oW,H)},ne.removeAuthPluginHeader=function(){b.removeHeader(oW)},ne.hasEvents=ie,ne._setTransmitProfile=function(H){f!==H&&p[H]!==void 0&&(Qe(),f=H,ae())},mc(ne,function(){return b},["addResponseHandler"]);function U(H,K,oe){var xe=b0(H,K,oe);return b[M1](K,oe),xe}function ie(){return l>0}function ae(){if(T>=0&&b0(T,0,L)&&b[M1](0,L),c>0&&!h&&!a){var H=p[f][2];H>=0&&(h=ve(function(){h=null,U(4,0,1),ae()},H))}var K=p[f][1];!m&&!s&&K>=0&&!a&&(ie()?m=ve(function(){m=null,U(v===0?3:1,0,1),v++,v%=2,ae()},K):v=0)}ne[L3]=function(){g<kWe&&(g++,Qe(),ae())},ne._clearBackOff=function(){g&&(g=0,Qe(),ae())};function Te(){n=null,i=!1,o=[],s=null,a=!1,c=0,u=500,l=0,d=IW,p={},f=dy,m=null,h=null,g=0,v=0,y={},S=0,N=!1,x=0,T=-1,L=null,M=!0,q=!1,O=Oxe,Z=Mxe,z=null,te=null,pe=!1,D=H1(),b=new Pxe(Dxe,Nxe,DWe,{requeue:ca,send:Fe,sent:ot,drop:j,rspFail:ee,oth:le}),bl(),Wr(),be()}function ve(H,K){K===0&&g&&(K=1);var oe=1e3;return g&&(oe=M3(g-1)),D.set(H,K*oe)}function Qe(){return m!==null?(m.cancel(),m=null,v=0,!0):!1}function ht(H,K){Qe(),s&&(s.cancel(),s=null),a||U(1,H,K)}function Wr(){y[4]={batches:[],iKeyMap:{}},y[3]={batches:[],iKeyMap:{}},y[2]={batches:[],iKeyMap:{}},y[1]={batches:[],iKeyMap:{}}}function yn(H,K,oe){var xe=y[K];xe||(K=1,xe=y[K]);var $e=xe.iKeyMap[H];return!$e&&oe&&($e=q1.create(H),xe.batches[So]($e),xe.iKeyMap[H]=$e),$e}function Jn(H,K){b[Nw]()&&!g&&(S>0&&l>S&&(K=!0),K&&s==null&&ne.flush(H,function(){},20))}function Ls(H,K){M&&(H=eu(H));var oe=H[Kh],xe=yn(H[ru],oe,!0);return xe.addEvent(H)?(oe!==4?(l++,K&&H[Fw]===0&&Jn(!H.sync,x>0&&xe[Ti]()>=x)):c++,!0):!1}function mp(H,K,oe,xe){for(;oe<=K;){var $e=yn(H,K,!0);if($e&&$e[Ti]()>0){var Ae=$e[Ad](0,xe),nr=Ae[Ti]();if(nr>0)return oe===4?c-=nr:l-=nr,Ie(yy,[Ae],Qu.QueueFull),!0}oe++}return yb(),!1}function yb(){for(var H=0,K=0,oe=function($e){var Ae=y[$e];Ae&&Ae[Ts]&&me(Ae[Ts],function(nr){$e===4?H+=nr[Ti]():K+=nr[Ti]()})},xe=1;xe<=4;xe++)oe(xe);l=K,c=H}function b0(H,K,oe){var xe=!1,$e=K===0;return!$e||b[Nw]()?li(ne.core,function(){return"PostChannel._queueBatches"},function(){for(var Ae=[],nr=4;nr>=H;){var mr=y[nr];mr&&mr.batches&&mr.batches[Bt]>0&&(me(mr[Ts],function(Ri){b.addBatch(Ri)?xe=xe||Ri&&Ri[Ti]()>0:Ae=Ae[wd](Ri[Rd]()),nr===4?c-=Ri[Ti]():l-=Ri[Ti]()}),mr[Ts]=[],mr.iKeyMap={}),nr--}Ae[Bt]>0&&$(yy,Ae,Qu.KillSwitch),xe&&T>=H&&(T=-1,L=0)},function(){return{latency:H,sendType:K,sendReason:oe}},!$e):(T=T>=0?Math.min(T,H):H,L=Math.max(L,oe)),xe}function bb(H,K){U(1,0,K),yb(),hp(function(){H&&H(),o[Bt]>0?s=ve(function(){s=null,bb(o.shift(),K)},0):(s=null,ae())})}function hp(H){b[w3]()?H():s=ve(function(){s=null,hp(H)},AWe)}function cT(){Qe(),bl(),f=dy,ae()}function bl(){p={},p[dy]=[2,1,0],p[c3]=[6,3,0],p[u3]=[18,9,0]}function ca(H,K){var oe=[],xe=O;q&&(xe=Z),me(H,function($e){$e&&$e[Ti]()>0&&me($e[Rd](),function(Ae){Ae&&(Ae[hy]&&(Ae[Kh]=4,Ae[hy]=!1),Ae[Fw]<xe?(ww(Ae,ne[Mw]),Ye(Ae,!1)):oe[So](Ae))})}),oe[Bt]>0&&$(yy,oe,Qu.NonRetryableStatus),q&&ht(2,2)}function om(H,K){var oe=F||{},xe=oe[H];if(xe)try{xe.apply(oe,K)}catch($e){De(ne.diagLog(),1,74,H+" notification failed: "+$e)}}function $(H,K){for(var oe=[],xe=2;xe<arguments.length;xe++)oe[xe-2]=arguments[xe];K&&K[Bt]>0&&om(H,[K][wd](oe))}function Ie(H,K){for(var oe=[],xe=2;xe<arguments.length;xe++)oe[xe-2]=arguments[xe];K&&K[Bt]>0&&me(K,function($e){$e&&$e[Ti]()>0&&om(H,[$e.events()][wd](oe))})}function Fe(H,K,oe){H&&H[Bt]>0&&om("eventsSendRequest",[K>=1e3&&K<=1999?K-1e3:0,oe!==!0])}function ot(H,K){Ie("eventsSent",H,K),ae()}function j(H,K){Ie(yy,H,K>=8e3&&K<=8999?K-8e3:Qu.Unknown)}function ee(H){Ie(yy,H,Qu.NonRetryableStatus),ae()}function le(H,K){Ie(yy,H,Qu.Unknown),ae()}function be(){k?x=0:x=Math.max(Dxe*(Nxe+1),d/6)}}),r}return e.__ieDyn=1,e}(yf)});var Bxe={};rn(Bxe,{BE_PROFILE:()=>u3,NRT_PROFILE:()=>c3,PostChannel:()=>Fxe,RT_PROFILE:()=>dy});var qxe=I(()=>{eW();Uxe()});var jxe=P(Pd=>{"use strict";var OWe=Pd&&Pd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),MWe=Pd&&Pd.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hxe=Pd&&Pd.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OWe(e,t,r);return MWe(e,t),e};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.oneDataSystemClientFactory=void 0;var FWe=async(t,e,r)=>{let n=await Promise.resolve().then(()=>Hxe((ly(),Ai(Y_e)))),i=await Promise.resolve().then(()=>Hxe((qxe(),Ai(Bxe)))),o=new n.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=l}let u=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer(l=>{l.ext=l.ext??{},l.ext.web=l.ext.web??{},l.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',u&&(l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),o},UWe=async(t,e,r)=>{let n=await FWe(t,e,r);return{logEvent:(s,a)=>{try{n?.track({name:s,baseData:{name:s,properties:a?.properties,measurements:a?.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!n){a();return}n.flush(!0,u=>{if(!u){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!n){a();return}n.unload(!1,()=>{a(),n=void 0},1e3)})}};Pd.oneDataSystemClientFactory=UWe});var Gxe,G1,V1,Uw,Yh,kd,ao,U3,nu=I(()=>{Gxe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",G1="sampleRate",V1="ProcessLegacy",Uw="http.method",Yh="https://dc.services.visualstudio.com",kd="/v2/track",ao="not_specified",U3="iKey"});var by,CW=I(()=>{Fr();by=Tz({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Ef,Et,Dd,Qh,Tf,If,B3,ji,ol,Xh,q3,H3,j3,wW,G3,V3,_y,z1,RW,Bw,xy,iu,Qo,Is,Sy,Nd,Ey,z3,$3,AW,Ty,Jh,qw,Hw,Iy,$1,Cy,PW,co=I(()=>{Ef="split",Et="length",Dd="toLowerCase",Qh="ingestionendpoint",Tf="toString",If="push",B3="removeItem",ji="name",ol="message",Xh="count",q3="preTriggerDate",H3="disabled",j3="interval",wW="daysOfMonth",G3="date",V3="getUTCDate",_y="stringify",z1="pathname",RW="correlationHeaderExcludePatterns",Bw="extensionConfig",xy="exceptions",iu="parsedStack",Qo="properties",Is="measurements",Sy="sizeInBytes",Nd="typeName",Ey="severityLevel",z3="problemGroup",$3="isManual",AW="CreateFromInterface",Ty="assembly",Jh="fileName",qw="hasFullStack",Hw="level",Iy="method",$1="line",Cy="duration",PW="receivedResponse"});function W3(t,e,r){var n=e[Et],i=kW(t,e);if(i[Et]!==n){for(var o=0,s=i;r[s]!==void 0;)o++,s=ai(i,0,147)+DW(o);i=s}return i}function kW(t,e){var r;return e&&(e=wr(In(e)),e[Et]>150&&(r=ai(e,0,150),De(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),r||e}function Zr(t,e,r){r===void 0&&(r=1024);var n;return e&&(r=r||1024,e=wr(In(e)),e[Et]>r&&(n=ai(e,0,r),De(t,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:e},!0))),n||e}function Zh(t,e){return Q3(t,e,2048,66)}function W1(t,e){var r;return e&&e[Et]>32768&&(r=ai(e,0,32768),De(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),r||e}function K3(t,e){var r;if(e){var n=""+e;n[Et]>32768&&(r=ai(n,0,32768),De(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return r||e}function Cs(t,e){if(e){var r={};Ve(e,function(n,i){if(fn(i)&&hd())try{i=Ko()[_y](i)}catch(o){De(t,2,49,"custom property is not valid",{exception:o},!0)}i=Zr(t,i,8192),n=W3(t,n,r),r[n]=i}),e=r}return e}function ws(t,e){if(e){var r={};Ve(e,function(n,i){n=W3(t,n,r),r[n]=i}),e=r}return e}function Y3(t,e){return e&&Q3(t,e,128,69)[Tf]()}function Q3(t,e,r,n){var i;return e&&(e=wr(In(e)),e[Et]>r&&(i=ai(e,0,r),De(t,2,n,"input is too long, it has been truncated to "+r+" characters.",{data:e},!0))),i||e}function DW(t){var e="00"+t;return Wu(e,e[Et]-3)}var ou=I(()=>{Fr();dt();co()});function wy(t){var e=zxe,r=BWe,n=r[e];return Vxe.createElement?r[e]||(n=r[e]=Vxe.createElement("a")):n={host:NW(t,!0)},n.href=t,e++,e>=r[Et]&&(e=0),zxe=e,n}function $xe(t){var e,r=wy(t);return r&&(e=r.href),e}function Wxe(t){var e,r=wy(t);return r&&(e=r[z1]),e}function Kxe(t,e){return t?t.toUpperCase()+" "+e:e}function NW(t,e){var r=jw(t,e)||"";if(r){var n=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[Et]>3&&wt(n[2])&&n[2][Et]>0)return n[2]+(n[3]||"")}return r}function jw(t,e){var r=null;if(t){var n=t.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[Et]>2&&wt(n[2])&&n[2][Et]>0&&(r=n[2]||"",e&&n[Et]>2)){var i=(n[1]||"")[Dd](),o=n[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),r+=o}}return r}var Vxe,zxe,BWe,LW=I(()=>{Fr();co();Vxe=$n()||{},zxe=0,BWe=[null,null,null,null,null]});function Gw(t){return hr(qWe,t[Dd]())!==-1}function Yxe(t){OW=t}function Qxe(){return OW}function Xxe(t,e,r){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t[RW]){for(var n=0;n<t.correlationHeaderExcludePatterns[Et];n++)if(t[RW][n].test(e))return!1}var i=wy(e).host[Dd]();if(i&&(Qs(i,":443")!==-1||Qs(i,":80")!==-1)&&(i=(jw(e,!0)||"")[Dd]()),(!t||!t.enableCorsCorrelation)&&i&&i!==r)return!1;var o=t&&t.correlationHeaderDomains;if(o){var s;if(me(o,function(u){var l=new RegExp(u.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||l.test(i)}),!s)return!1}var a=t&&t.correlationHeaderExcludedDomains;if(!a||a[Et]===0)return!0;for(var n=0;n<a[Et];n++){var c=new RegExp(a[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(c.test(i))return!1}return i&&i[Et]>0}function Jxe(t){if(t){var e=MW(t,by[1]);if(e&&e!==OW)return e}}function MW(t,e){if(t)for(var r=t[Ef](","),n=0;n<r[Et];++n){var i=r[n][Ef]("=");if(i[Et]===2&&i[0]===e)return i[1]}}function Zxe(t,e,r,n){var i,o=n,s=n;if(e&&e[Et]>0){var a=wy(e);if(i=a.host,!o)if(a[z1]!=null){var c=a.pathname[Et]===0?"/":a[z1];c.charAt(0)!=="/"&&(c="/"+c),s=a[z1],o=Zr(t,r?r+" "+c:c)}else o=Zr(t,e)}else i=n,o=n;return{target:i,name:o,data:s}}function e1e(){var t=rf();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return Kn()}function t1e(t,e){var r=null;return t!==0&&e!==0&&!_e(t)&&!_e(e)&&(r=e-t),r}function r1e(t,e){var r=t||{};return{getName:function(){return r[ji]},setName:function(n){e&&e.setName(n),r[ji]=n},getTraceId:function(){return r.traceID},setTraceId:function(n){e&&e.setTraceId(n),_d(n)&&(r.traceID=n)},getSpanId:function(){return r.parentID},setSpanId:function(n){e&&e.setSpanId(n),xd(n)&&(r.parentID=n)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(n){e&&e.setTraceFlags(n),r.traceFlags=n}}}var qWe,OW,FW=I(()=>{Fr();dt();nu();CW();ou();LW();co();qWe=[Yh+kd,"https://breeze.aimon.applicationinsights.io"+kd,"https://dc-int.services.visualstudio.com"+kd],OW="cid-v1:"});var K1,n1e,i1e,UW=I(()=>{Fr();K1=Bi({LocalStorage:0,SessionStorage:1}),n1e=Bi({AI:0,AI_AND_W3C:1,W3C:2}),i1e=Bi({Normal:1,Critical:2})});function BW(){return Y1()?X3(K1.LocalStorage):null}function X3(t){try{if(_e(xs()))return null;var e=new Date()[Tf](),r=Gr(t===K1.LocalStorage?"localStorage":"sessionStorage"),n=o1e+e;r.setItem(n,e);var i=r.getItem(n)!==e;if(r[B3](n),!i)return r}catch{}return null}function qW(){return Ry()?X3(K1.SessionStorage):null}function s1e(){eg=!1,tg=!1}function J3(t){o1e=t||""}function a1e(){eg=Y1(!0),tg=Ry(!0)}function Y1(t){return(t||eg===void 0)&&(eg=!!X3(K1.LocalStorage)),eg}function Z3(t,e){var r=BW();if(r!==null)try{return r.getItem(e)}catch(n){eg=!1,De(t,2,1,"Browser failed read of local storage. "+mn(n),{exception:Be(n)})}return null}function eO(t,e,r){var n=BW();if(n!==null)try{return n.setItem(e,r),!0}catch(i){eg=!1,De(t,2,3,"Browser failed write to local storage. "+mn(i),{exception:Be(i)})}return!1}function c1e(t,e){var r=BW();if(r!==null)try{return r[B3](e),!0}catch(n){eg=!1,De(t,2,5,"Browser failed removal of local storage item. "+mn(n),{exception:Be(n)})}return!1}function Ry(t){return(t||tg===void 0)&&(tg=!!X3(K1.SessionStorage)),tg}function u1e(){var t=[];return Ry()&&Ve(Gr("sessionStorage"),function(e){t[If](e)}),t}function tO(t,e){var r=qW();if(r!==null)try{return r.getItem(e)}catch(n){tg=!1,De(t,2,2,"Browser failed read of session storage. "+mn(n),{exception:Be(n)})}return null}function rO(t,e,r){var n=qW();if(n!==null)try{return n.setItem(e,r),!0}catch(i){tg=!1,De(t,2,4,"Browser failed write to session storage. "+mn(i),{exception:Be(i)})}return!1}function l1e(t,e){var r=qW();if(r!==null)try{return r[B3](e),!0}catch(n){tg=!1,De(t,2,6,"Browser failed removal of session storage item. "+mn(n),{exception:Be(n)})}return!1}var eg,tg,o1e,HW=I(()=>{Fr();UW();co();eg=void 0,tg=void 0,o1e=""});var HWe,d1e,p1e=I(()=>{Fr();dt();HW();co();HWe="appInsightsThrottle",d1e=function(){function t(e,r){var n=this,i,o,s,a,c,u,l,d=!1,p=!1;m(),n._getDbgPlgTargets=function(){return[l]},n.getConfig=function(){return s},n.canThrottle=function(E){var k=Z(E),F=h(E);return b(F,i,k)},n.isTriggered=function(E){return z(E)},n.isReady=function(){return d},n.flush=function(E){try{var k=D(E);if(k&&k[Et]>0){var F=k.slice(0);return l[E]=[],me(F,function(N){f(N.msgID,N[ol],N.severity,!1)}),!0}}catch{}return!1},n.flushAll=function(){try{if(l){var E=!0;return Ve(l,function(k){var F=n.flush(parseInt(k));E=E&&F}),E}}catch{}return!1},n.onReadyState=function(E,k){return k===void 0&&(k=!0),d=_e(E)?!0:E,d&&k?n.flushAll():null},n.sendMessage=function(E,k,F){return f(E,k,F,!0)};function f(E,k,F,N){if(d){var te=O(E);if(!te)return;var pe=h(E),ne=Z(E),se=b(pe,i,ne),ze=!1,J=0,ut=z(E);try{se&&!ut?(J=Math.min(pe.limit.maxSendNumber,ne[Xh]+1),ne[Xh]=0,ze=!0,c[E]=!0,ne[q3]=new Date):(c[E]=se,ne[Xh]+=1);var He=y(E);L(o,He,ne);for(var yt=0;yt<J;yt++)q(E,o,k,F)}catch{}return{isThrottled:ze,throttleNum:J}}else if(N){var ur=D(E);ur[If]({msgID:E,message:k,severity:F})}return null}function m(){o=tl(e),c={},a={},l={},s={},g(109),u=vd(r)?r:"",e.addUnloadHook(Hi(e.config,function(E){var k=E.cfg;i=Y1();var F=k.throttleMgrCfg||{};Ve(F,function(N,te){g(parseInt(N),te)})}))}function h(E){return s[E]||s[109]}function g(E,k){var F,N;try{var te=k||{},pe={};pe[H3]=!!te[H3];var ne=te[j3]||{};p=ne?.daysOfMonth&&ne?.daysOfMonth[Et]>0,pe[j3]=v(ne);var se={samplingRate:((F=te.limit)===null||F===void 0?void 0:F.samplingRate)||100,maxSendNumber:((N=te.limit)===null||N===void 0?void 0:N.maxSendNumber)||1};pe.limit=se,s[E]=pe}catch{}}function v(E){E=E||{};var k=E?.monthInterval,F=E?.dayInterval;return _e(k)&&_e(F)&&(E.monthInterval=3,p||(E[wW]=[28],p=!0)),E={monthInterval:E?.monthInterval,dayInterval:E?.dayInterval,daysOfMonth:E?.daysOfMonth},E}function b(E,k,F){if(E&&!E[H3]&&k&&vd(F)){var N=T(),te=F[G3],pe=E[j3],ne=1;if(pe?.monthInterval){var se=(N.getUTCFullYear()-te.getUTCFullYear())*12+N.getUTCMonth()-te.getUTCMonth();ne=M(pe.monthInterval,0,se)}var ze=1;if(p)ze=hr(pe[wW],N[V3]());else if(pe?.dayInterval){var J=Math.floor((N.getTime()-te.getTime())/864e5);ze=M(pe.dayInterval,0,J)}return ne>=0&&ze>=0}return!1}function y(E,k){var F=vd(k)?k:"";return E?HWe+F+"-"+E:null}function S(E){try{if(E){var k=new Date;return E.getUTCFullYear()===k.getUTCFullYear()&&E.getUTCMonth()===k.getUTCMonth()&&E[V3]()===k[V3]()}}catch{}return!1}function x(E,k,F){try{var N={date:T(),count:0};if(E){var te=JSON.parse(E),pe={date:T(te[G3])||N[G3],count:te[Xh]||N[Xh],preTriggerDate:te.preTriggerDate?T(te[q3]):void 0};return pe}else return L(k,F,N),N}catch{}return null}function T(E){try{if(E){var k=new Date(E);if(!isNaN(k.getDate()))return k}else return new Date}catch{}return null}function L(E,k,F){try{return eO(E,k,wr(JSON[_y](F)))}catch{}return!1}function M(E,k,F){return E<=0?1:F>=k&&(F-k)%E==0?Math.floor((F-k)/E)+1:-1}function q(E,k,F,N){De(k,N||1,E,F)}function O(E){try{var k=h(E);return tw(1e6)<=k.limit.samplingRate}catch{}return!1}function Z(E){try{var k=a[E];if(!k){var F=y(E,u);k=x(Z3(o,F),o,F),a[E]=k}return a[E]}catch{}return null}function z(E){var k=c[E];if(_e(k)){k=!1;var F=Z(E);F&&(k=S(F[q3])),c[E]=k}return c[E]}function D(E){return l=l||{},_e(l[E])&&(l[E]=[]),l[E]}}return t}()});function Vw(t){if(!t)return{};var e=t[Ef](jWe),r=Qx(e,function(i,o){var s=o[Ef](GWe);if(s[Et]===2){var a=s[0][Dd](),c=s[1];i[a]=c}return i},{});if(no(r)[Et]>0){if(r.endpointsuffix){var n=r.location?r.location+".":"";r[Qh]=r[Qh]||"https://"+n+"dc."+r.endpointsuffix}r[Qh]=r[Qh]||Yh,xh(r[Qh],"/")&&(r[Qh]=r[Qh].slice(0,-1))}return r}var jWe,GWe,f1e,m1e=I(()=>{Fr();nu();co();jWe=";",GWe="=";f1e={parse:Vw}});var nO,h1e=I(()=>{Fr();nu();co();ou();nO=function(){function t(e,r,n){var i=this,o=this;o.ver=1,o.sampleRate=100,o.tags={},o[ji]=Zr(e,n)||ao,o.data=r,o.time=fc(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return i.sampleRate===100?4:1},tags:1,data:1}}return t}()});var Ld,g1e=I(()=>{nu();co();ou();Ld=function(){function t(e,r,n,i){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var o=this;o.ver=2,o[ji]=Zr(e,r)||ao,o[Qo]=Cs(e,n),o[Is]=ws(e,i)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function zW(t,e){var r=t;return r&&!wt(r)&&(JSON&&JSON[_y]?(r=JSON[_y](t),e&&(!r||r==="{}")&&(ct(t[Tf])?r=t[Tf]():r=""+t)):r=""+t+" - (Missing JSON.stringify)"),r||""}function x1e(t,e){var r=t;return t&&(r&&!wt(r)&&(r=t[VW]||t[_1e]||r),r&&!wt(r)&&(r=zW(r,!0)),t.filename&&(r=r+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&Qs(r||"",e)===-1&&(r=e+": "+r),r||""}function zWe(t){try{if(fn(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function $We(t){try{if(fn(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function y1e(t){return t&&t.src&&wt(t.src)&&t.obj&&Ke(t.obj)}function Ay(t){var e=t||"";wt(e)||(wt(e[ja])?e=e[ja]:e=""+e);var r=e[Ef](`
`);return{src:e,obj:r}}function WWe(t){for(var e=[],r=t[Ef](`
`),n=0;n<r[Et];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),e[If](i)}return{src:t,obj:e}}function S1e(t){var e=null;if(t)try{if(t[ja])e=Ay(t[ja]);else if(t[Q1]&&t[Q1][ja])e=Ay(t[Q1][ja]);else if(t.exception&&t.exception[ja])e=Ay(t.exception[ja]);else if(y1e(t))e=t;else if(y1e(t[GW]))e=t[GW];else if(Wn()&&Wn().opera&&t[VW])e=WWe(t[ol]);else if(t.reason&&t.reason[ja])e=Ay(t.reason[ja]);else if(wt(t))e=Ay(t);else{var r=t[VW]||t[_1e]||"";wt(t[v1e])&&(r&&(r+=`
`),r+=" from "+t[v1e]),r&&(e=Ay(r))}}catch(n){e=Ay(n)}return e||{src:"",obj:null}}function KWe(t){var e="";return t&&(t.obj?me(t.obj,function(r){e+=r+`
`}):e=t.src||""),e}function YWe(t){var e,r=t.obj;if(r&&r[Et]>0){e=[];var n=0,i=0;me(r,function(m){var h=m[Tf]();if($W.regex.test(h)){var g=new $W(h,n++);i+=g[Sy],e[If](g)}});var o=32*1024;if(i>o)for(var s=0,a=e[Et]-1,c=0,u=s,l=a;s<a;){var d=e[s][Sy],p=e[a][Sy];if(c+=d+p,c>o){var f=l-u+1;e.splice(u,f);break}u=s,l=a,s++,a--}}return e}function iO(t){var e="";if(t&&(e=t.typeName||t[ji]||"",!e))try{var r=/function (.{1,200})\(/,n=r.exec(t.constructor[Tf]());e=n&&n[Et]>1?n[1]:""}catch{}return e}function jW(t){if(t)try{if(!wt(t)){var e=iO(t),r=zW(t,!1);return(!r||r==="{}")&&(t[Q1]&&(t=t[Q1],e=iO(t)),r=zW(t,!0)),Qs(r,e)!==0&&e!=="String"?e+":"+r:r}}catch{}return""+(t||"")}var VWe,Q1,ja,GW,v1e,VW,_1e,rg,b1e,$W,E1e=I(()=>{Da();Fr();dt();nu();co();ou();VWe="<no_method>",Q1="error",ja="stack",GW="stackDetails",v1e="errorSrc",VW="message",_1e="description";rg=function(){function t(e,r,n,i,o,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,$We(r)?(a[xy]=r[xy]||[],a[Qo]=r[Qo],a[Is]=r[Is],r[Ey]&&(a[Ey]=r[Ey]),r.id&&(a.id=r.id,r[Qo].id=r.id),r[z3]&&(a[z3]=r[z3]),_e(r[$3])||(a[$3]=r[$3])):(n||(n={}),s&&(n.id=s),a[xy]=[new b1e(e,r,n)],a[Qo]=Cs(e,n),a[Is]=ws(e,i),o&&(a[Ey]=o),s&&(a.id=s))}return t.CreateAutoException=function(e,r,n,i,o,s,a,c){var u,l=iO(o||s||e);return u={},u[ol]=x1e(e,l),u.url=r,u.lineNumber=n,u.columnNumber=i,u.error=jW(o||s||e),u.evt=jW(s||e),u[Nd]=l,u.stackDetails=S1e(a||o||s),u.errorSrc=c,u},t.CreateFromInterface=function(e,r,n,i){var o=r[xy]&&ud(r[xy],function(a){return b1e[AW](e,a)}),s=new t(e,Qc(Qc({},r),{exceptions:o}),n,i);return s},t.prototype.toInterface=function(){var e,r=this,n=r.exceptions,i=r.properties,o=r.measurements,s=r.severityLevel,a=r.problemGroup,c=r.id,u=r.isManual,l=n instanceof Array&&ud(n,function(d){return d.toInterface()})||void 0;return e={ver:"4.0"},e[xy]=l,e.severityLevel=s,e.properties=i,e.measurements=o,e.problemGroup=a,e.id=c,e.isManual=u,e},t.CreateSimpleException=function(e,r,n,i,o,s){var a;return{exceptions:[(a={},a[qw]=!0,a.message=e,a.stack=o,a.typeName=r,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=jW,t}(),b1e=function(){function t(e,r,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var i=this;if(zWe(r))i[Nd]=r[Nd],i[ol]=r[ol],i[ja]=r[ja],i[iu]=r[iu]||[],i[qw]=r[qw];else{var o=r,s=o&&o.evt;ph(o)||(o=o[Q1]||s||o),i[Nd]=Zr(e,iO(o))||ao,i[ol]=W1(e,x1e(r||o,i[Nd]))||ao;var a=r[GW]||S1e(r);i[iu]=YWe(a),Ke(i[iu])&&ud(i[iu],function(c){c[Ty]=Zr(e,c[Ty]),c[Jh]=Zr(e,c[Jh])}),i[ja]=K3(e,KWe(a)),i.hasFullStack=Ke(i.parsedStack)&&i.parsedStack[Et]>0,n&&(n[Nd]=n[Nd]||i[Nd])}}return t.prototype.toInterface=function(){var e,r=this,n=r[iu]instanceof Array&&ud(r[iu],function(o){return o.toInterface()}),i=(e={id:r.id,outerId:r.outerId,typeName:r[Nd],message:r[ol],hasFullStack:r[qw],stack:r[ja]},e[iu]=n||void 0,e);return i},t.CreateFromInterface=function(e,r){var n=r[iu]instanceof Array&&ud(r[iu],function(o){return $W[AW](o)})||r[iu],i=new t(e,Qc(Qc({},r),{parsedStack:n}));return i},t}(),$W=function(){function t(e,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[Sy]=0,typeof e=="string"){var i=e;n[Hw]=r,n[Iy]=VWe,n[Ty]=wr(i),n[Jh]="",n[$1]=0;var o=i.match(t.regex);o&&o[Et]>=5&&(n[Iy]=wr(o[2])||n[Iy],n[Jh]=wr(o[4]),n[$1]=parseInt(o[5])||0)}else n[Hw]=e[Hw],n[Iy]=e[Iy],n[Ty]=e[Ty],n[Jh]=e[Jh],n[$1]=e[$1],n[Sy]=0;n.sizeInBytes+=n.method[Et],n.sizeInBytes+=n.fileName[Et],n.sizeInBytes+=n.assembly[Et],n[Sy]+=t.baseSize,n.sizeInBytes+=n.level.toString()[Et],n.sizeInBytes+=n.line.toString()[Et]}return t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){var e=this;return{level:e[Hw],method:e[Iy],assembly:e[Ty],fileName:e[Jh],line:e[$1]}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}()});var T1e,I1e=I(()=>{T1e=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var Od,C1e=I(()=>{nu();co();I1e();ou();Od=function(){function t(e,r,n,i,o,s,a,c,u){this.aiDataContract={ver:1,metrics:1,properties:0};var l=this;l.ver=2;var d=new T1e;d[Xh]=i>0?i:void 0,d.max=isNaN(s)||s===null?void 0:s,d.min=isNaN(o)||o===null?void 0:o,d[ji]=Zr(e,r)||ao,d.value=n,d.stdDev=isNaN(a)||a===null?void 0:a,l.metrics=[d],l[Qo]=Cs(e,c),l[Is]=ws(e,u)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function w1e(t,e){return e===void 0&&(e=!1),t==null?e:t.toString()[Dd]()==="true"}function X1(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=zw+t%1e3,r=zw+Math.floor(t/1e3)%60,n=zw+Math.floor(t/(1e3*60))%60,i=zw+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e[Et]===1?"00"+e:e[Et]===2?"0"+e:e,r=r[Et]<2?"0"+r:r,n=n[Et]<2?"0"+n:n,i=i[Et]<2?"0"+i:i,(o>0?o+".":zw)+i+":"+n+":"+r+"."+e}function R1e(t,e){var r=null;return me(t,function(n){if(n.identifier===e)return r=n,-1}),r}function A1e(t,e,r,n,i){return!i&&wt(t)&&(t==="Script error."||t==="Script error")}var zw,oO=I(()=>{Fr();co();zw=""});var ng,P1e=I(()=>{nu();oO();co();ou();ng=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=Y3(e,a),c.url=Zh(e,n),c[ji]=Zr(e,r)||ao,isNaN(i)||(c[Cy]=X1(i)),c[Qo]=Cs(e,o),c[Is]=ws(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var ig,k1e=I(()=>{oO();FW();co();ou();ig=function(){function t(e,r,n,i,o,s,a,c,u,l,d,p){u===void 0&&(u="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var f=this;f.ver=2,f.id=r,f[Cy]=X1(o),f.success=s,f.resultCode=a+"",f.type=Zr(e,u);var m=Zxe(e,n,c,i);f.data=Zh(e,i)||m.data,f.target=Zr(e,m.target),l&&(f.target="".concat(f.target," | ").concat(l)),f[ji]=Zr(e,m[ji]),f[Qo]=Cs(e,d),f[Is]=ws(e,p)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var og,D1e=I(()=>{nu();co();ou();og=function(){function t(e,r,n,i,o){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,r=r||ao,s[ol]=W1(e,r),s[Qo]=Cs(e,i),s[Is]=ws(e,o),n&&(s[Ey]=n)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var sg,N1e=I(()=>{nu();co();ou();sg=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=Zh(e,n),c[ji]=Zr(e,r)||ao,c[Qo]=Cs(e,o),c[Is]=ws(e,s),a&&(c.domProcessing=a.domProcessing,c[Cy]=a[Cy],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c[PW]=a[PW],c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var Md,L1e=I(()=>{Md=function(){function t(e,r){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=r}return t}()});var sO,O1e=I(()=>{Fr();sO=Bi({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});var M1e,F1e=I(()=>{Fr();co();M1e=function(){function t(){}return t.getConfig=function(e,r,n,i){i===void 0&&(i=!1);var o;return n&&e[Bw]&&e[Bw][n]&&!_e(e[Bw][n][r])?o=e[Bw][n][r]:o=e[r],_e(o)?i:o},t}()});function cg(t){var e="ai."+t+".";return function(r){return e+r}}var $w,uo,aO,J1,WW,ag,Py,Ww,Z1,KW=I(()=>{Da();Fr();$w=cg("application"),uo=cg("device"),aO=cg("location"),J1=cg("operation"),WW=cg("session"),ag=cg("user"),Py=cg("cloud"),Ww=cg("internal"),Z1=function(t){ka(e,t);function e(){return t.call(this)||this}return e}(s$({applicationVersion:$w("ver"),applicationBuild:$w("build"),applicationTypeId:$w("typeId"),applicationId:$w("applicationId"),applicationLayer:$w("layer"),deviceId:uo("id"),deviceIp:uo("ip"),deviceLanguage:uo("language"),deviceLocale:uo("locale"),deviceModel:uo("model"),deviceFriendlyName:uo("friendlyName"),deviceNetwork:uo("network"),deviceNetworkName:uo("networkName"),deviceOEMName:uo("oemName"),deviceOS:uo("os"),deviceOSVersion:uo("osVersion"),deviceRoleInstance:uo("roleInstance"),deviceRoleName:uo("roleName"),deviceScreenResolution:uo("screenResolution"),deviceType:uo("type"),deviceMachineName:uo("machineName"),deviceVMName:uo("vmName"),deviceBrowser:uo("browser"),deviceBrowserVersion:uo("browserVersion"),locationIp:aO("ip"),locationCountry:aO("country"),locationProvince:aO("province"),locationCity:aO("city"),operationId:J1("id"),operationName:J1("name"),operationParentId:J1("parentId"),operationRootId:J1("rootId"),operationSyntheticSource:J1("syntheticSource"),operationCorrelationVector:J1("correlationVector"),sessionId:WW("id"),sessionIsFirst:WW("isFirst"),sessionIsNew:WW("isNew"),userAccountAcquisitionDate:ag("accountAcquisitionDate"),userAccountId:ag("accountId"),userAgent:ag("userAgent"),userId:ag("id"),userStoreRegion:ag("storeRegion"),userAuthUserId:ag("authUserId"),userAnonymousUserAcquisitionDate:ag("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ag("authUserAcquisitionDate"),cloudName:Py("name"),cloudRole:Py("role"),cloudRoleVer:Py("roleVer"),cloudRoleInstance:Py("roleInstance"),cloudEnvironment:Py("environment"),cloudLocation:Py("location"),cloudDeploymentUnit:Py("deploymentUnit"),internalNodeName:Ww("nodeName"),internalSdkVersion:Ww("sdkVersion"),internalAgentVersion:Ww("agentVersion"),internalSnippet:Ww("snippet"),internalSdkSrc:Ww("sdkSrc")}))});function YW(t,e,r,n,i,o){var s;r=Zr(n,r)||ao,(_e(t)||_e(e)||_e(r))&&zn("Input doesn't contain all required fields");var a="";t[U3]&&(a=t[U3],delete t[U3]);var c=(s={},s[ji]=r,s.time=fc(new Date),s.iKey=a,s.ext=o||{},s.tags=[],s.data={},s.baseType=e,s.baseData=t,s);return _e(i)||Ve(i,function(u,l){c.data[u]=l}),c}var U1e,B1e=I(()=>{Fr();nu();ou();co();U1e=function(){function t(){}return t.create=YW,t}()});var q1e,Gi,H1e=I(()=>{KW();q1e={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Gi=new Z1});function j1e(t){var e=null;if(ct(Event))e=new Event(t);else{var r=$n();r&&r.createEvent&&(e=r.createEvent("Event"),e.initEvent(t,!0,!0))}return e}var G1e=I(()=>{Fr()});function V1e(t,e){_f(t,null,null,e)}function cO(t){var e=$n(),r=Ui(),n=!1,i=[],o=1;r&&!_e(r.onLine)&&!r.onLine&&(o=2);var s=0,a=p(),c=hc(Yo("OfflineListener"),t);try{if(l(Wn())&&(n=!0),e){var u=e.body||e;u.ononline&&l(u)&&(n=!0)}}catch{n=!1}function l(y){var S=!1;return y&&(S=Ed(y,"online",h,c),S&&Ed(y,"offline",g,c)),S}function d(){return a}function p(){return!(s===2||o===2)}function f(){var y=p();a!==y&&(a=y,me(i,function(S){var x={isOnline:a,rState:o,uState:s};try{S(x)}catch{}}))}function m(y){s=y,f()}function h(){o=1,f()}function g(){o=2,f()}function v(){var y=Wn();if(y&&n){if(V1e(y,c),e){var S=e.body||e;xt(S.ononline)||V1e(S,c)}n=!1}}function b(y){return i[If](y),{rm:function(){var S=i.indexOf(y);if(S>-1)return i.splice(S,1)}}}return{isOnline:d,isListening:function(){return n},unload:v,addListener:b,setOnlineState:m}}var z1e=I(()=>{Fr();co()});var $1e={};rn($1e,{AnalyticsPluginIdentifier:()=>XWe,BreezeChannelIdentifier:()=>QW,ConfigurationManager:()=>M1e,ConnectionStringParser:()=>f1e,ContextTagKeys:()=>Z1,CtxTagKeys:()=>Gi,DEFAULT_BREEZE_ENDPOINT:()=>Yh,DEFAULT_BREEZE_PATH:()=>kd,Data:()=>Md,DisabledPropertyName:()=>Gxe,DistributedTracingModes:()=>n1e,Envelope:()=>nO,Event:()=>Ld,EventPersistence:()=>i1e,Exception:()=>rg,Extensions:()=>q1e,HttpMethod:()=>Uw,Metric:()=>Od,PageView:()=>ng,PageViewPerformance:()=>sg,ProcessLegacy:()=>V1,PropertiesPluginIdentifier:()=>QWe,RemoteDependencyData:()=>ig,RequestHeaders:()=>by,SampleRate:()=>G1,SeverityLevel:()=>sO,TelemetryItemCreator:()=>U1e,ThrottleMgr:()=>d1e,Trace:()=>og,correlationIdCanIncludeCorrelationHeader:()=>Xxe,correlationIdGetCorrelationContext:()=>Jxe,correlationIdGetCorrelationContextValue:()=>MW,correlationIdGetPrefix:()=>Qxe,correlationIdSetPrefix:()=>Yxe,createDistributedTraceContextFromTrace:()=>r1e,createDomEvent:()=>j1e,createOfflineListener:()=>cO,createTelemetryItem:()=>YW,createTraceParent:()=>mw,dataSanitizeException:()=>K3,dataSanitizeId:()=>Y3,dataSanitizeInput:()=>Q3,dataSanitizeKey:()=>kW,dataSanitizeKeyAndAddUniqueness:()=>W3,dataSanitizeMeasurements:()=>ws,dataSanitizeMessage:()=>W1,dataSanitizeProperties:()=>Cs,dataSanitizeString:()=>Zr,dataSanitizeUrl:()=>Zh,dateTimeUtilsDuration:()=>t1e,dateTimeUtilsNow:()=>e1e,dsPadNumber:()=>DW,findW3cTraceParent:()=>vw,formatTraceParent:()=>gw,getExtensionByName:()=>R1e,isBeaconApiSupported:()=>Ba,isCrossOriginError:()=>A1e,isInternalApplicationInsightsEndpoint:()=>Gw,isSampledFlag:()=>hw,isValidSpanId:()=>xd,isValidTraceId:()=>_d,isValidTraceParent:()=>C1,msToTimeSpan:()=>X1,parseConnectionString:()=>Vw,parseTraceParent:()=>oy,strNotSpecified:()=>ao,stringToBoolOrDefault:()=>w1e,urlGetAbsoluteUrl:()=>$xe,urlGetCompleteUrl:()=>Kxe,urlGetPathName:()=>Wxe,urlParseFullHost:()=>jw,urlParseHost:()=>NW,urlParseUrl:()=>wy,utlCanUseLocalStorage:()=>Y1,utlCanUseSessionStorage:()=>Ry,utlDisableStorage:()=>s1e,utlEnableStorage:()=>a1e,utlGetLocalStorage:()=>Z3,utlGetSessionStorage:()=>tO,utlGetSessionStorageKeys:()=>u1e,utlRemoveSessionStorage:()=>l1e,utlRemoveStorage:()=>c1e,utlSetLocalStorage:()=>eO,utlSetSessionStorage:()=>rO,utlSetStoragePrefix:()=>J3});var QWe,QW,XWe,Cf=I(()=>{FW();p1e();m1e();CW();nu();h1e();g1e();E1e();C1e();P1e();k1e();D1e();N1e();L1e();O1e();F1e();KW();ou();B1e();H1e();UW();oO();Fr();G1e();HW();LW();z1e();QWe="AppInsightsPropertiesPlugin",QW="AppInsightsChannelPlugin",XWe="ApplicationInsightsAnalytics"});var ug,W1e=I(()=>{ug="duration"});var Vi,uO,Xo,Fd,ky,Ft,lg,dg,su,pg,wf,eS,Rf,Af,lO,Pf,Kw,fg,Yw,tS,Dy,Qw,dO,kf,rS,nS,Jo,pO,iS,fO,XW,mO,hO,JW,gO,ZW,Df,eK,tK,rK,nK,Xw,iK,oK,sK,oS,mg,vO,Jw,yO,K1e,bO,_O,sS,aK,xO,Y1e,hg=I(()=>{Vi="tags",uO="deviceType",Xo="data",Fd="name",ky="traceID",Ft="length",lg="stringify",dg="measurements",su="dataType",pg="envelopeType",wf="toString",eS="_get",Rf="enqueue",Af="count",lO="eventsLimitInMem",Pf="push",Kw="emitLineDelimitedJson",fg="clear",Yw="createNew",tS="markAsSent",Dy="clearSent",Qw="bufferOverride",dO="BUFFER_KEY",kf="SENT_BUFFER_KEY",rS="MAX_BUFFER_SIZE",nS="triggerSend",Jo="diagLog",pO="initialize",iS="_sender",fO="customHeaders",XW="maxBatchSizeInBytes",mO="onunloadDisableBeacon",hO="isBeaconApiDisabled",JW="alwaysUseXhrOverride",gO="disableXhr",ZW="enableSessionStorageBuffer",Df="_buffer",eK="onunloadDisableFetch",tK="disableSendBeaconSplit",rK="instrumentationKey",nK="enableSendPromise",Xw="getSenderInst",iK="unloadTransports",oK="convertUndefined",sK="maxBatchInterval",oS="serialize",mg="_onError",vO="_onPartialSuccess",Jw="_onSuccess",yO="itemsAccepted",K1e="itemsReceived",bO="oriPayload",_O="baseType",sS="sampleRate",aK="eventsSendRequest",xO="getSamplingScore",Y1e="getHashCodeScore"});function zi(t,e,r){return Zc(t,e,r,zc)}function JWe(t,e,r){var n=r[Vi]=r[Vi]||{},i=e.ext=e.ext||{},o=e[Vi]=e[Vi]||[],s=i.user;s&&(zi(n,Gi.userAuthUserId,s.authId),zi(n,Gi.userId,s.id||s.localId));var a=i.app;a&&zi(n,Gi.sessionId,a.sesId);var c=i.device;c&&(zi(n,Gi.deviceId,c.id||c.localId),zi(n,Gi[uO],c.deviceClass),zi(n,Gi.deviceIp,c.ip),zi(n,Gi.deviceModel,c.model),zi(n,Gi[uO],c[uO]));var u=e.ext.web;if(u){zi(n,Gi.deviceLanguage,u.browserLang),zi(n,Gi.deviceBrowserVersion,u.browserVer),zi(n,Gi.deviceBrowser,u.browser);var l=r[Xo]=r[Xo]||{},d=l[Ln]=l[Ln]||{},p=d[Eo]=d[Eo]||{};zi(p,"domain",u.domain),zi(p,"isManual",u.isManual?Q1e:null),zi(p,"screenRes",u.screenRes),zi(p,"userConsent",u.userConsent?Q1e:null)}var f=i.os;f&&zi(n,Gi.deviceOS,f[Fd]);var m=i.trace;m&&(zi(n,Gi.operationParentId,m.parentID),zi(n,Gi.operationName,Zr(t,m[Fd])),zi(n,Gi.operationId,m[ky]));for(var h={},g=o[Ft]-1;g>=0;g--){var v=o[g];Ve(v,function(y,S){h[y]=S}),o.splice(g,1)}Ve(o,function(y,S){h[y]=S});var b=Qc(Qc({},n),h);b[Gi.internalSdkVersion]||(b[Gi.internalSdkVersion]=Zr(t,"javascript:".concat(ZWe.Version),64)),r[Vi]=eu(b)}function gg(t,e,r){_e(t)||Ve(t,function(n,i){_s(i)?r[n]=i:wt(i)?e[n]=i:hd()&&(e[n]=Ko()[lg](i))})}function Ny(t,e){_e(t)||Ve(t,function(r,n){t[r]=n||e})}function Ly(t,e,r,n){var i=new nO(t,n,e);zi(i,"sampleRate",r[G1]),(r[Ln]||{}).startTime&&(i.time=fc(r[Ln].startTime)),i.iKey=r.iKey;var o=r.iKey.replace(/-/g,"");return i[Fd]=i[Fd].replace("{0}",o),JWe(t,r,i),r[Vi]=r[Vi]||[],eu(i)}function Oy(t,e){_e(e[Ln])&&De(t,1,46,"telemetryItem.baseData cannot be null.")}function X1e(t,e,r){Oy(t,e);var n=e[Ln][dg]||{},i=e[Ln][Eo]||{};gg(e[Xo],i,n),_e(r)||Ny(i,r);var o=e[Ln];if(_e(o))return Js(t,"Invalid input for dependency data"),null;var s=o[Eo]&&o[Eo][Uw]?o[Eo][Uw]:"GET",a=new ig(t,o.id,o.target,o[Fd],o[ug],o.success,o.responseCode,s,o.type,o.correlationContext,i,n),c=new Md(ig[su],a);return Ly(t,ig[pg],e,c)}function uK(t,e,r){Oy(t,e);var n={},i={};e[cK]!==Ld[su]&&(n.baseTypeSource=e[cK]),e[cK]===Ld[su]?(n=e[Ln][Eo]||{},i=e[Ln][dg]||{}):e[Ln]&&gg(e[Ln],n,i),gg(e[Xo],n,i),_e(r)||Ny(n,r);var o=e[Ln][Fd],s=new Ld(t,o,n,i),a=new Md(Ld[su],s);return Ly(t,Ld[pg],e,a)}function J1e(t,e,r){Oy(t,e);var n=e[Ln][dg]||{},i=e[Ln][Eo]||{};gg(e[Xo],i,n),_e(r)||Ny(i,r);var o=e[Ln],s=rg.CreateFromInterface(t,o,i,n),a=new Md(rg[su],s);return Ly(t,rg[pg],e,a)}function Z1e(t,e,r){Oy(t,e);var n=e[Ln],i=n[Eo]||{},o=n[dg]||{};gg(e[Xo],i,o),_e(r)||Ny(i,r);var s=new Od(t,n[Fd],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),a=new Md(Od[su],s);return Ly(t,Od[pg],e,a)}function eSe(t,e,r){Oy(t,e);var n,i=e[Ln];!_e(i)&&!_e(i[Eo])&&!_e(i[Eo][ug])?(n=i[Eo][ug],delete i[Eo][ug]):!_e(e[Xo])&&!_e(e[Xo][ug])&&(n=e[Xo][ug],delete e[Xo][ug]);var o=e[Ln],s;((e.ext||{}).trace||{})[ky]&&(s=e.ext.trace[ky]);var a=o.id||s,c=o[Fd],u=o.uri,l=o[Eo]||{},d=o[dg]||{};if(_e(o.refUri)||(l.refUri=o.refUri),_e(o.pageType)||(l.pageType=o.pageType),_e(o.isLoggedIn)||(l.isLoggedIn=o.isLoggedIn[wf]()),!_e(o[Eo])){var p=o[Eo];Ve(p,function(h,g){l[h]=g})}gg(e[Xo],l,d),_e(r)||Ny(l,r);var f=new ng(t,c,u,n,l,d,a),m=new Md(ng[su],f);return Ly(t,ng[pg],e,m)}function tSe(t,e,r){Oy(t,e);var n=e[Ln],i=n[Fd],o=n.uri||n.url,s=n[Eo]||{},a=n[dg]||{};gg(e[Xo],s,a),_e(r)||Ny(s,r);var c=new sg(t,i,o,void 0,s,a,n),u=new Md(sg[su],c);return Ly(t,sg[pg],e,u)}function rSe(t,e,r){Oy(t,e);var n=e[Ln].message,i=e[Ln].severityLevel,o=e[Ln][Eo]||{},s=e[Ln][dg]||{};gg(e[Xo],o,s),_e(r)||Ny(o,r);var a=new og(t,n,i,o,s),c=new Md(og[su],a);return Ly(t,og[pg],e,c)}var cK,Ln,Eo,Q1e,ZWe,nSe=I(()=>{Da();Cf();Fr();W1e();hg();cK="baseType",Ln="baseData",Eo="properties",Q1e="true";ZWe={Version:"3.1.1"}});var iSe,SO,lK,oSe=I(()=>{Da();_o();Cf();Fr();hg();iSe=function(){function t(e,r){var n=[],i=!1;this[eS]=function(){return n},this._set=function(o){return n=o,n},Wt(t,this,function(o){o[Rf]=function(s){if(o[Af]()>=r[lO]){i||(De(e,2,105,"Maximum in-memory buffer size reached: "+o[Af](),!0),i=!0);return}n[Pf](s)},o[Af]=function(){return n[Ft]},o.size=function(){for(var s=n[Ft],a=0;a<n[Ft];a++)s+=n[a][Ft];return r[Kw]||(s+=2),s},o[fg]=function(){n=[],i=!1},o.getItems=function(){return n.slice(0)},o.batchPayloads=function(s){if(s&&s[Ft]>0){var a=r[Kw]?s.join(`
`):"["+s.join(",")+"]";return a}return null},o[Yw]=function(s,a,c){var u=n.slice(0);s=s||e,a=a||{};var l=c?new lK(s,a):new SO(s,a);return me(u,function(d){l[Rf](d)}),l}})}return t.__ieDyn=1,t}(),SO=function(t){ka(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Wt(e,i,function(o,s){o[tS]=function(a){s[fg]()},o[Dy]=function(a){}}),i}return e.__ieDyn=1,e}(iSe),lK=function(t){ka(e,t);function e(r,n){var i=t.call(this,r,n)||this,o=!1,s=n?.namePrefix,a=n[Qw]||{getItem:tO,setItem:rO},c=a.getItem,u=a.setItem;return Wt(e,i,function(l,d){var p=g(e[dO]),f=g(e[kf]),m=l._set(p.concat(f));m[Ft]>e[rS]&&(m[Ft]=e[rS]),v(e[kf],[]),v(e[dO],m),l[Rf]=function(b){if(l[Af]()>=e[rS]){o||(De(r,2,67,"Maximum buffer size reached: "+l[Af](),!0),o=!0);return}d[Rf](b),v(e.BUFFER_KEY,l[eS]())},l[fg]=function(){d[fg](),v(e.BUFFER_KEY,l[eS]()),v(e[kf],[]),o=!1},l[tS]=function(b){v(e[dO],l._set(h(b,l[eS]())));var y=g(e[kf]);y instanceof Array&&b instanceof Array&&(y=y.concat(b),y[Ft]>e[rS]&&(De(r,1,67,"Sent buffer reached its maximum size: "+y[Ft],!0),y[Ft]=e[rS]),v(e[kf],y))},l[Dy]=function(b){var y=g(e[kf]);y=h(b,y),v(e[kf],y)},l[Yw]=function(b,y,S){S=!!S;var x=l[eS]().slice(0),T=g(e[kf]).slice(0);b=b||r,y=y||{},l[fg]();var L=S?new e(b,y):new SO(b,y);return me(x,function(M){L[Rf](M)}),S&&L[tS](T),L};function h(b,y){var S=[];return me(y,function(x){!ct(x)&&hr(b,x)===-1&&S[Pf](x)}),S}function g(b){var y=b;try{y=s?s+"_"+y:y;var S=c(r,y);if(S){var x=Ko().parse(S);if(wt(x)&&(x=Ko().parse(x)),x&&Ke(x))return x}}catch(T){De(r,1,42," storage key: "+y+", "+mn(T),{exception:Be(T)})}return[]}function v(b,y){var S=b;try{S=s?s+"_"+S:S;var x=JSON[lg](y);u(r,S,x)}catch(T){u(r,S,JSON[lg]([])),De(r,2,41," storage key: "+S+", "+mn(T)+". Buffer cleared",{exception:Be(T)})}}}),i}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(iSe)});var sSe,aSe=I(()=>{_o();Fr();hg();sSe=function(){function t(e){Wt(t,this,function(r){r[oS]=function(s){var a=n(s,"root");try{return Ko()[lg](a)}catch(c){De(e,1,48,c&&ct(c[wf])?c[wf]():"Error serializing object",null,!0)}};function n(s,a){var c="__aiCircularRefCheck",u={};if(!s)return De(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),u;if(s[c])return De(e,2,50,"Circular reference detected while serializing object",{name:a},!0),u;if(!s.aiDataContract){if(a==="measurements")u=o(s,"number",a);else if(a==="properties")u=o(s,"string",a);else if(a==="tags")u=o(s,"string",a);else if(Ke(s))u=i(s,a);else{De(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{Ko()[lg](s),u=s}catch(l){De(e,1,48,l&&ct(l[wf])?l[wf]():"Error serializing object",null,!0)}}return u}return s[c]=!0,Ve(s.aiDataContract,function(l,d){var p=ct(d)?d()&1:d&1,f=ct(d)?d()&4:d&4,m=d&2,h=s[l]!==void 0,g=fn(s[l])&&s[l]!==null;if(p&&!h&&!m)De(e,1,24,"Missing required field specification. The field is required but not present on source",{field:l,name:a});else if(!f){var v=void 0;g?m?v=i(s[l],l):v=n(s[l],l):v=s[l],v!==void 0&&(u[l]=v)}}),delete s[c],u}function i(s,a){var c;if(s)if(!Ke(s))De(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var u=0;u<s[Ft];u++){var l=s[u],d=n(l,a+"["+u+"]");c[Pf](d)}}return c}function o(s,a,c){var u;return s&&(u={},Ve(s,function(l,d){if(a==="string")d===void 0?u[l]="undefined":d===null?u[l]="null":d[wf]?u[l]=d[wf]():u[l]="invalid field: toString() is not defined.";else if(a==="number")if(d===void 0)u[l]="undefined";else if(d===null)u[l]="null";else{var p=parseFloat(d);u[l]=p}else u[l]="invalid field: "+c+" is of unknown type.",De(e,1,u[l],null,!0)})),u}})}return t.__ieDyn=1,t}()});var eKe,cSe,uSe=I(()=>{hg();eKe=8,cSe=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var r=this.getHashCode(e)/t.INT_MAX_VALUE;return r*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[Ft]<eKe;)e=e.concat(e);for(var r=5381,n=0;n<e[Ft];++n)r=(r<<5)+r+e.charCodeAt(n),r=r&r;return Math.abs(r)},t.INT_MAX_VALUE=2147483647,t}()});var lSe,dSe=I(()=>{Cf();hg();uSe();lSe=function(){function t(){var e=this,r=new cSe,n=new Z1;e[xO]=function(i){var o=0;return i[Vi]&&i[Vi][n.userId]?o=r.getHashCodeScore(i[Vi][n.userId]):i.ext&&i.ext.user&&i.ext.user.id?o=r[Y1e](i.ext.user.id):i[Vi]&&i[Vi][n.operationId]?o=r.getHashCodeScore(i[Vi][n.operationId]):i.ext&&i.ext.telemetryTrace&&i.ext.telemetryTrace[ky]?o=r.getHashCodeScore(i.ext.telemetryTrace[ky]):o=Math.random()*100,o}}return t}()});var pSe,fSe=I(()=>{Cf();Fr();hg();dSe();pSe=function(){function t(e,r){this.INT_MAX_VALUE=2147483647;var n=r||tl(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[sS]=e,this.samplingScoreGenerator=new lSe}return t.prototype.isSampledIn=function(e){var r=this[sS],n=!1;return r==null||r>=100||e.baseType===Od[su]?!0:(n=this.samplingScoreGenerator[xO](e)<r,n)},t}()});function hSe(t){try{return t.responseText}catch{}return null}function rKe(t){return t&&t.sendPOST}function nKe(t){return!isNaN(t)&&t>0&&t<=100}var On,Nf,Ud,mSe,tKe,gSe,iKe,Zw,vSe=I(()=>{Da();_o();Cf();Fr();dt();nSe();oSe();aSe();fSe();hg();Ud=void 0,mSe="",tKe=65e3;gSe=Ys((On={endpointUrl:E1(zc,Yh+kd)},On[Kw]=tu(),On[sK]=15e3,On[XW]=102400,On.disableTelemetry=tu(),On[ZW]=tu(!0),On.isRetryDisabled=tu(),On[hO]=tu(!0),On[tK]=tu(!0),On[gO]=tu(),On[eK]=tu(),On[mO]=tu(),On[rK]=Ud,On.namePrefix=Ud,On.samplingPercentage=E1(nKe,100),On[fO]=Ud,On[oK]=Ud,On[lO]=1e4,On[Qw]=!1,On.httpXHROverride={isVal:rKe,v:Ud},On[JW]=tu(),On.transports=Ud,On.retryCodes=Ud,On));iKe=(Nf={},Nf[Ld.dataType]=uK,Nf[og.dataType]=rSe,Nf[ng.dataType]=eSe,Nf[sg.dataType]=tSe,Nf[rg.dataType]=J1e,Nf[Od.dataType]=Z1e,Nf[ig.dataType]=X1e,Nf),Zw=function(t){ka(e,t);function e(){var r=t.call(this)||this;r.priority=1001,r.identifier=QW;var n,i,o,s,a,c,u,l,d=0,p,f,m,h,g,v,b,y,S,x,T,L,M,q,O,Z,z,D,E,k,F,N,te,pe,ne,se,ze;return Wt(e,r,function(J,ut){ot(),J.pause=function(){ca(),s=!0},J.resume=function(){s&&(s=!1,i=null,Jn(),bl())},J.flush=function(j,ee,le){if(j===void 0&&(j=!0),!s){ca();try{return J[nS](j,null,le||1)}catch(be){De(J[Jo](),1,22,"flush failed, telemetry will not be collected: "+mn(be),{exception:Be(be)})}}},J.onunloadFlush=function(){if(!s)if(b||k)try{return J[nS](!0,yb,2)}catch(j){De(J[Jo](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+mn(j),{exception:Be(j)})}else J.flush(!1)},J.addHeader=function(j,ee){l[j]=ee},J[pO]=function(j,ee,le,be){J.isInitialized()&&De(J[Jo](),1,28,"Sender is already initialized"),ut[pO](j,ee,le,be);var H=J.identifier;c=new sSe(ee.logger),n=0,i=null,o=0,J[iS]=null,u=0;var K=J[Jo]();m=hc(Yo("Sender"),ee.evtNamespace&&ee.evtNamespace()),f=cO(m),J._addHook(Hi(j,function(oe){var xe=oe.cfg;xe.storagePrefix&&J3(xe.storagePrefix);var $e=Zs(null,xe,ee),Ae=$e.getExtCfg(H,gSe);Dr(J,"_senderConfig",{g:function(){return Ae}}),g!==Ae.endpointUrl&&(h=g=Ae.endpointUrl),x&&x!==Ae[fO]&&me(x,function(Mo){delete l[Mo.header]}),v=Ae[XW],b=(Ae[mO]===!1||Ae[hO]===!1)&&Ba(),y=Ae[mO]===!1&&Ba(),S=Ae[hO]===!1&&Ba(),k=Ae[JW],F=!!Ae[gO],ze=Ae.retryCodes;var nr=Ae[Qw],mr=!!Ae[ZW]&&(!!nr||Ry()),Ri=Ae.namePrefix,Ka=mr!==Z||mr&&D!==Ri||mr&&z!==nr;if(J[Df]){if(Ka)try{J._buffer=J._buffer[Yw](K,Ae,mr)}catch(Mo){De(J[Jo](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+mn(Mo),{exception:Be(Mo)})}Jn()}else J[Df]=mr?new lK(K,Ae):new SO(K,Ae);D=Ri,Z=mr,z=nr,N=!Ae[eK]&&cf(!0),ne=!!Ae[tK],J._sample=new pSe(Ae.samplingPercentage,K),L=Ae[rK],Fe(L,xe)||De(K,1,100,"Invalid Instrumentation key "+L),x=Ae[fO],!Gw(h)&&x&&x[Ft]>0?me(x,function(Mo){r.addHeader(Mo.header,Mo.value)}):x=null,E=Ae[nK];var sm=yt();se?se.SetConfig(sm):(se=new ay,se[pO](sm,K));var Os=Ae.httpXHROverride,am=null,_0=null,ake=df([3,1,2],Ae.transports);am=se&&se[Xw](ake,!1);var L9=se&&se.getFallbackInst();te=function(Mo,x0){return ht(L9,Mo,x0)},pe=function(Mo,x0){return ht(L9,Mo,x0,!1)},am=k?Os:am||Os||L9,J[iS]=function(Mo,x0){return ht(am,Mo,x0)},N&&(p=bb);var O9=df([3,1],Ae[iK]);N||(O9=O9.filter(function(Mo){return Mo!==2})),_0=se&&se[Xw](O9,!0),_0=k?Os:_0||Os,(k||Ae[iK]||!p)&&_0&&(p=function(Mo,x0){return ht(_0,Mo,x0)}),p||(p=te),T=Ae.disableTelemetry,M=Ae[oK]||Ud,q=Ae.isRetryDisabled,O=Ae[sK]}))},J.processTelemetry=function(j,ee){ee=J._getTelCtx(ee);var le=ee[Jo]();try{var be=Ye(j,le);if(!be)return;var H=U(j,le);if(!H)return;var K=c[oS](H),oe=J[Df];Jn(K),oe[Rf](K),bl()}catch(xe){De(le,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+mn(xe),{exception:Be(xe)})}J.processNext(j,ee)},J.isCompletelyIdle=function(){return!s&&d===0&&J._buffer[Af]()===0},J._xhrReadyStateChange=function(j,ee,le){return ur(j,ee,le)},J[nS]=function(j,ee,le){j===void 0&&(j=!0);var be;if(!s)try{var H=J[Df];if(T)H[fg]();else{if(H[Af]()>0){var K=H.getItems();Ie(le||0,j),ee?be=ee.call(J,K,j):be=J[iS](K,j)}o=+new Date}ca()}catch(xe){var oe=QC();(!oe||oe>9)&&De(J[Jo](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+mn(xe),{exception:Be(xe)})}return be},J.getOfflineSupport=function(){var j;return j={getUrl:function(){return h},createPayload:Te},j[oS]=ie,j.batch=ae,j.shouldProcess=function(ee){return!!Ye(ee)},j},J._doTeardown=function(j,ee){J.onunloadFlush(),mf(f,!1),ot()},J[mg]=function(j,ee,le){De(J[Jo](),2,26,"Failed to send telemetry.",{message:ee}),J._buffer&&J._buffer[Dy](j)},J[vO]=function(j,ee){for(var le=[],be=[],H=ee.errors.reverse(),K=0,oe=H;K<oe.length;K++){var xe=oe[K],$e=j.splice(xe.index,1)[0];om(xe.statusCode)?be[Pf]($e):le[Pf]($e)}j[Ft]>0&&J[Jw](j,ee[yO]),le[Ft]>0&&J[mg](le,lf(null,["partial success",ee[yO],"of",ee.itemsReceived].join(" "))),be[Ft]>0&&(hp(be),De(J[Jo](),2,40,"Partial success. Delivered: "+j[Ft]+", Failed: "+le[Ft]+". Will retry to send "+be[Ft]+" our of "+ee[K1e]+" items"))},J[Jw]=function(j,ee){J._buffer&&J._buffer[Dy](j)},J._xdrOnLoad=function(j,ee){return He(j,ee)};function He(j,ee){var le=hSe(j);if(j&&(le+""=="200"||le===""))n=0,J[Jw](ee,0);else{var be=ty(le);be&&be.itemsReceived&&be.itemsReceived>be[yO]&&!q?J[vO](ee,be):J[mg](ee,ey(j))}}function yt(){var j;try{var ee={xdrOnComplete:function(be,H,K){var oe=fe(K);if(oe)return He(be,oe)},fetchOnComplete:function(be,H,K,oe){var xe=fe(oe);if(xe)return Ls(be.status,xe,be.url,xe[Ft],be.statusText,K||"")},xhrOnComplete:function(be,H,K){var oe=fe(K);if(oe)return ur(be,oe,oe[Ft])},beaconOnRetry:function(be,H,K){return b0(be,H,K)}},le=(j={},j[nK]=E,j.isOneDs=!1,j.disableCredentials=!1,j[gO]=F,j.disableBeacon=!S,j.disableBeaconSync=!y,j.senderOnCompleteCallBack=ee,j);return le}catch{}return null}function ur(j,ee,le){j.readyState===4&&Ls(j.status,ee,j.responseURL,le,lf(j),hSe(j)||j.response)}function fe(j){try{if(j){var ee=j,le=ee[bO];return le&&le[Ft]?le:null}}catch{}return null}function Ye(j,ee){if(T)return!1;if(!j)return ee&&De(ee,1,7,"Cannot send empty telemetry"),!1;if(j.baseData&&!j[_O])return ee&&De(ee,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(j[_O]||(j[_O]="EventData"),!J[iS])return ee&&De(ee,1,28,"Sender was not initialized"),!1;if(ve(j))j[G1]=J._sample[sS];else return ee&&De(ee,2,33,"Telemetry item was sampled out and not sent",{SampleRate:J._sample[sS]}),!1;return!0}function U(j,ee){var le=j.iKey||L,be=e.constructEnvelope(j,le,ee,M);if(!be){De(ee,1,47,"Unable to create an AppInsights envelope");return}var H=!1;if(j[Vi]&&j[Vi][V1]&&(me(j[Vi][V1],function(K){try{K&&K(be)===!1&&(H=!0,Js(ee,"Telemetry processor check returns false"))}catch(oe){De(ee,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+mn(oe),{exception:Be(oe)},!0)}}),delete j[Vi][V1]),!H)return be}function ie(j){var ee=mSe,le=J[Jo]();try{var be=Ye(j,le),H=null;be&&(H=U(j,le)),H&&(ee=c[oS](H))}catch{}return ee}function ae(j){var ee=mSe;return j&&j[Ft]&&(ee="["+j.join(",")+"]"),ee}function Te(j){var ee,le=yn();return ee={urlString:h},ee[Xo]=j,ee.headers=le,ee}function ve(j){return J._sample.isSampledIn(j)}function Qe(j,ee,le,be){ee===200&&j?J._onSuccess(j,j[Ft]):be&&J[mg](j,be)}function ht(j,ee,le,be){be===void 0&&(be=!0);var H=function(xe,$e,Ae){return Qe(ee,xe,$e,Ae)},K=Wr(ee),oe=j&&j.sendPOST;return oe&&K?(be&&J._buffer[tS](ee),oe(K,H,!le)):null}function Wr(j){var ee;if(Ke(j)&&j[Ft]>0){var le=J[Df].batchPayloads(j),be=yn(),H=(ee={},ee[Xo]=le,ee.urlString=h,ee.headers=be,ee.disableXhrSync=F,ee.disableFetchKeepAlive=!N,ee[bO]=j,ee);return H}return null}function yn(){try{var j=l||{};return Gw(h)&&(j[by[6]]=by[7]),j}catch{}return null}function Jn(j){var ee=j?j[Ft]:0;return J[Df].size()+ee>v?((!f||f.isOnline())&&J[nS](!0,null,10),!0):!1}function Ls(j,ee,le,be,H,K){var oe=null;if(J._appId||(oe=ty(K),oe&&oe.appId&&(J._appId=oe.appId)),(j<200||j>=300)&&j!==0){if((j===301||j===307||j===308)&&!mp(le)){J[mg](ee,H);return}!q&&om(j)?(hp(ee),De(J[Jo](),2,40,". Response code "+j+". Will retry to send "+ee[Ft]+" items.")):J[mg](ee,H)}else if(f&&!f.isOnline()){if(!q){var xe=10;hp(ee,xe),De(J[Jo](),2,40,". Offline - Response Code: ".concat(j,". Offline status: ").concat(!f.isOnline(),". Will retry to send ").concat(ee.length," items."))}}else mp(le),j===206?(oe||(oe=ty(K)),oe&&!q?J[vO](ee,oe):J[mg](ee,H)):(n=0,J[Jw](ee,be))}function mp(j){return u>=10?!1:!_e(j)&&j!==""&&j!==h?(h=j,++u,!0):!1}function yb(j,ee){if(p)p(j,!1);else{var le=se&&se[Xw]([3],!0);return ht(le,j,ee)}}function b0(j,ee,le){var be=j,H=be&&be[bO];if(ne)pe&&pe(H,!0),De(J[Jo](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var K=[],oe=0;oe<H[Ft];oe++){var xe=H[oe],$e=[xe],Ae=Wr($e);le(Ae,ee)?J._onSuccess($e,$e[Ft]):K[Pf](xe)}K[Ft]>0&&(pe&&pe(K,!0),De(J[Jo](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function bb(j,ee){var le=null;if(Ke(j)){for(var be=j[Ft],H=0;H<j[Ft];H++)be+=j[H][Ft];var K=se.getSyncFetchPayload();K+be<=tKe?le=2:Ba()?le=3:(le=1,De(J[Jo](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var oe=se&&se[Xw]([le],!0);return ht(oe,j,ee)}return null}function hp(j,ee){if(ee===void 0&&(ee=1),!(!j||j[Ft]===0)){var le=J[Df];le[Dy](j),n++;for(var be=0,H=j;be<H.length;be++){var K=H[be];le[Rf](K)}cT(ee),bl()}}function cT(j){var ee=10,le;if(n<=1)le=ee;else{var be=(Math.pow(2,n)-1)/2,H=Math.floor(Math.random()*be*ee)+1;H=j*H,le=Math.max(Math.min(H,3600),ee)}var K=Kn()+le*1e3;i=K}function bl(){if(!a&&!s){var j=i?Math.max(0,i-Kn()):0,ee=Math.max(O,j);a=Pa(function(){a=null,J[nS](!0,null,1)},ee)}}function ca(){a&&a.cancel(),a=null,i=null}function om(j){return _e(ze)?j===401||j===408||j===429||j===500||j===502||j===503||j===504:ze[Ft]&&ze.indexOf(j)>-1}function $(){var j="getNotifyMgr";return J.core[j]?J.core[j]():J.core._notificationManager}function Ie(j,ee){var le=$();if(le&&le[aK])try{le[aK](j,ee)}catch(be){De(J[Jo](),1,74,"send request notification failed: "+mn(be),{exception:Be(be)})}}function Fe(j,ee){var le=ee.disableInstrumentationKeyValidation,be=_e(le)?!1:le;if(be)return!0;var H="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",K=new RegExp(H);return K.test(j)}function ot(){J[iS]=null,J[Df]=null,J._appId=null,J._sample=null,l={},f=null,n=0,i=null,o=null,s=!1,a=null,c=null,u=0,d=0,p=null,m=null,h=null,g=null,v=0,b=!1,x=null,T=!1,L=null,M=Ud,q=!1,Z=null,D=Ud,F=!1,N=!1,ne=!1,te=null,pe=null,se=null,Dr(J,"_senderConfig",{g:function(){return SL({},gSe)}})}}),r}return e.constructEnvelope=function(r,n,i,o){var s;n!==r.iKey&&!_e(n)?s=Qc(Qc({},r),{iKey:n}):s=r;var a=iKe[s.baseType]||uK;return a(i,s,o)},e}(yf)});var dK=I(()=>{vSe()});var EO,TO,IO,e2,ySe=I(()=>{EO="instrumentationKey",TO="connectionString",IO="endpointUrl",e2="userOverrideEndpointUrl"});var bSe={};rn(bSe,{AppInsightsCore:()=>bf,ApplicationInsights:()=>aKe,Sender:()=>Zw,SeverityLevel:()=>sO,arrForEach:()=>me,isNullOrUndefined:()=>_e,proxyFunctions:()=>mc,throwError:()=>zn});function sKe(t){return t&&t>0}var oKe,aKe,_Se=I(()=>{_o();dK();Cf();Fr();dt();ySe();Fr();Cf();dK();oKe={diagnosticLogInterval:E1(sKe,1e4)};aKe=function(){function t(e){var r=new bf,n;(_e(e)||_e(e[EO])&&_e(e[TO]))&&zn("Invalid input configuration"),Wt(t,this,function(o){Dr(o,"config",{g:function(){return n}}),s(),o.initialize=s,o.track=i,mc(o,r,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"]);function s(){var a=Dn(e||{},oKe);n=a.cfg,r.addUnloadHook(Hi(a,function(){if(n[TO]){var c=Vw(n[TO]),u=c.ingestionendpoint;n[IO]=n[e2]?n[e2]:u+kd,n[EO]=c.instrumentationkey||n[EO]}n[IO]=n[e2]?n[e2]:n[IO]})),r.initialize(n,[new Zw])}});function i(o){o&&(o.baseData=o.baseData||{},o.baseType=o.baseType||"EventData"),r.track(o)}}return t.__ieDyn=1,t}()});var xSe=P(Bd=>{"use strict";var cKe=Bd&&Bd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uKe=Bd&&Bd.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lKe=Bd&&Bd.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cKe(e,t,r);return uKe(e,t),e};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.appInsightsClientFactory=void 0;var dKe=(Cf(),Ai($1e)),pKe=EV(),fKe=async(t,e,r)=>{let n;try{let o=await Promise.resolve().then(()=>lKe((_Se(),Ai(bSe)))),s={};if(e){let a={alwaysUseXhrOverride:!0,httpXHROverride:e};s[dKe.BreezeChannelIdentifier]=a}n=new o.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:s})}catch(o){return Promise.reject(o)}return{logEvent:(o,s)=>{let a={...s?.properties,...s?.measurements};r?.length&&pKe.TelemetryUtil.applyReplacements(a,r),n?.track({name:o,data:a,baseType:"EventData",baseData:{name:o,properties:s?.properties,measurements:s?.measurements}})},flush:async()=>{n?.flush(!1)},dispose:async()=>new Promise(s=>{n?.unload(!0,()=>{s(),n=void 0},1e3)})}};Bd.appInsightsClientFactory=fKe});var ISe=P(Lf=>{"use strict";var mKe=Lf&&Lf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hKe=Lf&&Lf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mK=Lf&&Lf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mKe(e,t,r);return hKe(e,t),e};Object.defineProperty(Lf,"__esModule",{value:!0});var pK=mK(require("os")),SSe=mK(require("vscode")),gKe=mK(require("https")),vKe=qve(),yKe=Hve(),ESe=EV(),bKe=jxe(),_Ke=xSe();function TSe(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=gKe.request(e.urlString,n,o=>{o.on("data",function(s){r(o.statusCode??200,o.headers,s.toString())}),o.on("error",function(){r(0,{})})});i.write(e.data,o=>{o&&r(0,{})}),i.end()}catch{r(0,{})}}}}var fK=class extends vKe.BaseTelemetryReporter{constructor(e,r){let n=s=>(0,_Ke.appInsightsClientFactory)(s,TSe(),r);ESe.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=s=>(0,bKe.oneDataSystemClientFactory)(s,SSe,TSe()));let i={release:pK.release(),platform:pK.platform(),architecture:pK.arch()},o=new yKe.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,SSe,{additionalCommonProperties:ESe.TelemetryUtil.getAdditionalCommonProperties(i)})}};Lf.default=fK});var WEe=P(Cg=>{"use strict";var TQe=Cg&&Cg.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(Cg,"__esModule",{value:!0});Cg.isBinaryFileSync=Cg.isBinaryFile=void 0;var Ig=require("fs"),wY=require("util"),IQe=wY.promisify(Ig.stat),CQe=wY.promisify(Ig.open),wQe=wY.promisify(Ig.close),a2=512,CY=class{constructor(e,r){this.fileBuffer=e,this.size=r,this.offset=0,this.error=!1}hasError(){return this.error}nextByte(){return this.offset===this.size||this.hasError()?(this.error=!0,255):this.fileBuffer[this.offset++]}next(e){let r=new Array;for(let n=0;n<e;n++)r[n]=this.nextByte();return r}};function IY(t){let e=0,r=0;for(;!t.hasError();){let n=t.nextByte();if(r=r|(n&127)<<7*e,!(n&128))break;e++}return r}function RQe(t){switch(IY(t)&7){case 0:return IY(t),!0;case 1:return t.next(8),!0;case 2:let n=IY(t);return t.next(n),!0;case 5:return t.next(4),!0}return!1}function AQe(t,e){let r=new CY(t,e),n=0;for(;;){if(!RQe(r)&&!r.hasError())return!1;if(r.hasError())break;n++}return n>0}function PQe(t,e){return TQe(this,void 0,void 0,function*(){if(zEe(t)){let r=yield IQe(t);$Ee(r);let n=yield CQe(t,"r"),i=Buffer.alloc(a2);return new Promise((o,s)=>{Ig.read(n,i,0,a2,0,(a,c,u)=>{wQe(n),a?s(a):o(e5(i,c))})})}else return e===void 0&&(e=t.length),e5(t,e)})}Cg.isBinaryFile=PQe;function kQe(t,e){if(zEe(t)){let r=Ig.statSync(t);$Ee(r);let n=Ig.openSync(t,"r"),i=Buffer.alloc(a2),o=Ig.readSync(n,i,0,a2,0);return Ig.closeSync(n),e5(i,o)}else return e===void 0&&(e=t.length),e5(t,e)}Cg.isBinaryFileSync=kQe;function e5(t,e){if(e===0)return!1;let r=0,n=Math.min(e,a2);if(e>=3&&t[0]===239&&t[1]===187&&t[2]===191||e>=4&&t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255||e>=4&&t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0||e>=4&&t[0]===132&&t[1]===49&&t[2]===149&&t[3]===51)return!1;if(n>=5&&t.slice(0,5).toString()==="%PDF-")return!0;if(e>=2&&t[0]===254&&t[1]===255||e>=2&&t[0]===255&&t[1]===254)return!1;for(let i=0;i<n;i++){if(t[i]===0)return!0;if((t[i]<7||t[i]>14)&&(t[i]<32||t[i]>127)){if(t[i]>193&&t[i]<224&&i+1<n){if(i++,t[i]>127&&t[i]<192)continue}else if(t[i]>223&&t[i]<240&&i+2<n&&(i++,t[i]>127&&t[i]<192&&t[i+1]>127&&t[i+1]<192)){i++;continue}if(r++,i>=32&&r*100/n>10)return!0}}return!!(r*100/n>10||r>1&&AQe(t,n))}function zEe(t){return typeof t=="string"}function $Ee(t){if(!t.isFile())throw new Error("Path provided was not a file!")}});var u2=P((IGt,tTe)=>{"use strict";var Vd="\\\\/",XEe=`[^${Vd}]`,Uf="\\.",HQe="\\+",jQe="\\?",i5="\\/",GQe="(?=.)",JEe="[^/]",LY=`(?:${i5}|$)`,ZEe=`(?:^|${i5})`,OY=`${Uf}{1,2}${LY}`,VQe=`(?!${Uf})`,zQe=`(?!${ZEe}${OY})`,$Qe=`(?!${Uf}{0,1}${LY})`,WQe=`(?!${OY})`,KQe=`[^.${i5}]`,YQe=`${JEe}*?`,QQe="/",eTe={DOT_LITERAL:Uf,PLUS_LITERAL:HQe,QMARK_LITERAL:jQe,SLASH_LITERAL:i5,ONE_CHAR:GQe,QMARK:JEe,END_ANCHOR:LY,DOTS_SLASH:OY,NO_DOT:VQe,NO_DOTS:zQe,NO_DOT_SLASH:$Qe,NO_DOTS_SLASH:WQe,QMARK_NO_DOT:KQe,STAR:YQe,START_ANCHOR:ZEe,SEP:QQe},XQe={...eTe,SLASH_LITERAL:`[${Vd}]`,QMARK:XEe,STAR:`${XEe}*?`,DOTS_SLASH:`${Uf}{1,2}(?:[${Vd}]|$)`,NO_DOT:`(?!${Uf})`,NO_DOTS:`(?!(?:^|[${Vd}])${Uf}{1,2}(?:[${Vd}]|$))`,NO_DOT_SLASH:`(?!${Uf}{0,1}(?:[${Vd}]|$))`,NO_DOTS_SLASH:`(?!${Uf}{1,2}(?:[${Vd}]|$))`,QMARK_NO_DOT:`[^.${Vd}]`,START_ANCHOR:`(?:^|[${Vd}])`,END_ANCHOR:`(?:[${Vd}]|$)`,SEP:"\\"},JQe={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};tTe.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:JQe,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?XQe:eTe}}});var o5=P(Ga=>{"use strict";var{REGEX_BACKSLASH:ZQe,REGEX_REMOVE_BACKSLASH:eXe,REGEX_SPECIAL_CHARS:tXe,REGEX_SPECIAL_CHARS_GLOBAL:rXe}=u2();Ga.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Ga.hasRegexChars=t=>tXe.test(t);Ga.isRegexChar=t=>t.length===1&&Ga.hasRegexChars(t);Ga.escapeRegex=t=>t.replace(rXe,"\\$1");Ga.toPosixSlashes=t=>t.replace(ZQe,"/");Ga.removeBackslashes=t=>t.replace(eXe,e=>e==="\\"?"":e);Ga.supportsLookbehinds=()=>{if(typeof process<"u"){let t=process.version.slice(1).split(".").map(Number);if(t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10)return!0}return!1};Ga.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?Ga.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};Ga.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Ga.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o};Ga.basename=(t,{windows:e}={})=>{let r=t.split(e?/[\\/]/:"/"),n=r[r.length-1];return n===""?r[r.length-2]:n}});var uTe=P((wGt,cTe)=>{"use strict";var rTe=o5(),{CHAR_ASTERISK:MY,CHAR_AT:nXe,CHAR_BACKWARD_SLASH:l2,CHAR_COMMA:iXe,CHAR_DOT:FY,CHAR_EXCLAMATION_MARK:UY,CHAR_FORWARD_SLASH:aTe,CHAR_LEFT_CURLY_BRACE:BY,CHAR_LEFT_PARENTHESES:qY,CHAR_LEFT_SQUARE_BRACKET:oXe,CHAR_PLUS:sXe,CHAR_QUESTION_MARK:nTe,CHAR_RIGHT_CURLY_BRACE:aXe,CHAR_RIGHT_PARENTHESES:iTe,CHAR_RIGHT_SQUARE_BRACKET:cXe}=u2(),oTe=t=>t===aTe||t===l2,sTe=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},uXe=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],c=t,u=-1,l=0,d=0,p=!1,f=!1,m=!1,h=!1,g=!1,v=!1,b=!1,y=!1,S=!1,x=!1,T=0,L,M,q={value:"",depth:0,isGlob:!1},O=()=>u>=n,Z=()=>c.charCodeAt(u+1),z=()=>(L=M,c.charCodeAt(++u));for(;u<n;){M=z();let N;if(M===l2){b=q.backslashes=!0,M=z(),M===BY&&(v=!0);continue}if(v===!0||M===BY){for(T++;O()!==!0&&(M=z());){if(M===l2){b=q.backslashes=!0,z();continue}if(M===BY){T++;continue}if(v!==!0&&M===FY&&(M=z())===FY){if(p=q.isBrace=!0,m=q.isGlob=!0,x=!0,i===!0)continue;break}if(v!==!0&&M===iXe){if(p=q.isBrace=!0,m=q.isGlob=!0,x=!0,i===!0)continue;break}if(M===aXe&&(T--,T===0)){v=!1,p=q.isBrace=!0,x=!0;break}}if(i===!0)continue;break}if(M===aTe){if(o.push(u),s.push(q),q={value:"",depth:0,isGlob:!1},x===!0)continue;if(L===FY&&u===l+1){l+=2;continue}d=u+1;continue}if(r.noext!==!0&&(M===sXe||M===nXe||M===MY||M===nTe||M===UY)===!0&&Z()===qY){if(m=q.isGlob=!0,h=q.isExtglob=!0,x=!0,M===UY&&u===l&&(S=!0),i===!0){for(;O()!==!0&&(M=z());){if(M===l2){b=q.backslashes=!0,M=z();continue}if(M===iTe){m=q.isGlob=!0,x=!0;break}}continue}break}if(M===MY){if(L===MY&&(g=q.isGlobstar=!0),m=q.isGlob=!0,x=!0,i===!0)continue;break}if(M===nTe){if(m=q.isGlob=!0,x=!0,i===!0)continue;break}if(M===oXe){for(;O()!==!0&&(N=z());){if(N===l2){b=q.backslashes=!0,z();continue}if(N===cXe){f=q.isBracket=!0,m=q.isGlob=!0,x=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&M===UY&&u===l){y=q.negated=!0,l++;continue}if(r.noparen!==!0&&M===qY){if(m=q.isGlob=!0,i===!0){for(;O()!==!0&&(M=z());){if(M===qY){b=q.backslashes=!0,M=z();continue}if(M===iTe){x=!0;break}}continue}break}if(m===!0){if(x=!0,i===!0)continue;break}}r.noext===!0&&(h=!1,m=!1);let D=c,E="",k="";l>0&&(E=c.slice(0,l),c=c.slice(l),d-=l),D&&m===!0&&d>0?(D=c.slice(0,d),k=c.slice(d)):m===!0?(D="",k=c):D=c,D&&D!==""&&D!=="/"&&D!==c&&oTe(D.charCodeAt(D.length-1))&&(D=D.slice(0,-1)),r.unescape===!0&&(k&&(k=rTe.removeBackslashes(k)),D&&b===!0&&(D=rTe.removeBackslashes(D)));let F={prefix:E,input:t,start:l,base:D,glob:k,isBrace:p,isBracket:f,isGlob:m,isExtglob:h,isGlobstar:g,negated:y,negatedExtglob:S};if(r.tokens===!0&&(F.maxDepth=0,oTe(M)||s.push(q),F.tokens=s),r.parts===!0||r.tokens===!0){let N;for(let te=0;te<o.length;te++){let pe=N?N+1:l,ne=o[te],se=t.slice(pe,ne);r.tokens&&(te===0&&l!==0?(s[te].isPrefix=!0,s[te].value=E):s[te].value=se,sTe(s[te]),F.maxDepth+=s[te].depth),(te!==0||se!=="")&&a.push(se),N=ne}if(N&&N+1<t.length){let te=t.slice(N+1);a.push(te),r.tokens&&(s[s.length-1].value=te,sTe(s[s.length-1]),F.maxDepth+=s[s.length-1].depth)}F.slashes=o,F.parts=a}return F};cTe.exports=uXe});var pTe=P((RGt,dTe)=>{"use strict";var s5=u2(),cl=o5(),{MAX_LENGTH:a5,POSIX_REGEX_SOURCE:lXe,REGEX_NON_SPECIAL_CHARS:dXe,REGEX_SPECIAL_CHARS_BACKREF:pXe,REPLACEMENTS:lTe}=s5,fXe=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>cl.escapeRegex(i)).join("..")}return r},gS=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,HY=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=lTe[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(a5,r.maxLength):a5,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",c=s5.globChars(r.windows),u=s5.extglobChars(c),{DOT_LITERAL:l,PLUS_LITERAL:d,SLASH_LITERAL:p,ONE_CHAR:f,DOTS_SLASH:m,NO_DOT:h,NO_DOT_SLASH:g,NO_DOTS_SLASH:v,QMARK:b,QMARK_NO_DOT:y,STAR:S,START_ANCHOR:x}=c,T=fe=>`(${a}(?:(?!${x}${fe.dot?m:l}).)*?)`,L=r.dot?"":h,M=r.dot?b:y,q=r.bash===!0?T(r):S;r.capture&&(q=`(${q})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let O={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=cl.removePrefix(t,O),i=t.length;let Z=[],z=[],D=[],E=o,k,F=()=>O.index===i-1,N=O.peek=(fe=1)=>t[O.index+fe],te=O.advance=()=>t[++O.index]||"",pe=()=>t.slice(O.index+1),ne=(fe="",Ye=0)=>{O.consumed+=fe,O.index+=Ye},se=fe=>{O.output+=fe.output!=null?fe.output:fe.value,ne(fe.value)},ze=()=>{let fe=1;for(;N()==="!"&&(N(2)!=="("||N(3)==="?");)te(),O.start++,fe++;return fe%2===0?!1:(O.negated=!0,O.start++,!0)},J=fe=>{O[fe]++,D.push(fe)},ut=fe=>{O[fe]--,D.pop()},He=fe=>{if(E.type==="globstar"){let Ye=O.braces>0&&(fe.type==="comma"||fe.type==="brace"),U=fe.extglob===!0||Z.length&&(fe.type==="pipe"||fe.type==="paren");fe.type!=="slash"&&fe.type!=="paren"&&!Ye&&!U&&(O.output=O.output.slice(0,-E.output.length),E.type="star",E.value="*",E.output=q,O.output+=E.output)}if(Z.length&&fe.type!=="paren"&&(Z[Z.length-1].inner+=fe.value),(fe.value||fe.output)&&se(fe),E&&E.type==="text"&&fe.type==="text"){E.value+=fe.value,E.output=(E.output||"")+fe.value;return}fe.prev=E,s.push(fe),E=fe},yt=(fe,Ye)=>{let U={...u[Ye],conditions:1,inner:""};U.prev=E,U.parens=O.parens,U.output=O.output;let ie=(r.capture?"(":"")+U.open;J("parens"),He({type:fe,value:Ye,output:O.output?"":f}),He({type:"paren",extglob:!0,value:te(),output:ie}),Z.push(U)},ur=fe=>{let Ye=fe.close+(r.capture?")":""),U;if(fe.type==="negate"){let ie=q;if(fe.inner&&fe.inner.length>1&&fe.inner.includes("/")&&(ie=T(r)),(ie!==q||F()||/^\)+$/.test(pe()))&&(Ye=fe.close=`)$))${ie}`),fe.inner.includes("*")&&(U=pe())&&/^\.[^\\/.]+$/.test(U)){let ae=HY(U,{...e,fastpaths:!1}).output;Ye=fe.close=`)${ae})${ie})`}fe.prev.type==="bos"&&(O.negatedExtglob=!0)}He({type:"paren",extglob:!0,value:k,output:Ye}),ut("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let fe=!1,Ye=t.replace(pXe,(U,ie,ae,Te,ve,Qe)=>Te==="\\"?(fe=!0,U):Te==="?"?ie?ie+Te+(ve?b.repeat(ve.length):""):Qe===0?M+(ve?b.repeat(ve.length):""):b.repeat(ae.length):Te==="."?l.repeat(ae.length):Te==="*"?ie?ie+Te+(ve?q:""):q:ie?U:`\\${U}`);return fe===!0&&(r.unescape===!0?Ye=Ye.replace(/\\/g,""):Ye=Ye.replace(/\\+/g,U=>U.length%2===0?"\\\\":U?"\\":"")),Ye===t&&r.contains===!0?(O.output=t,O):(O.output=cl.wrapOutput(Ye,O,e),O)}for(;!F();){if(k=te(),k==="\0")continue;if(k==="\\"){let U=N();if(U==="/"&&r.bash!==!0||U==="."||U===";")continue;if(!U){k+="\\",He({type:"text",value:k});continue}let ie=/^\\+/.exec(pe()),ae=0;if(ie&&ie[0].length>2&&(ae=ie[0].length,O.index+=ae,ae%2!==0&&(k+="\\")),r.unescape===!0?k=te():k+=te(),O.brackets===0){He({type:"text",value:k});continue}}if(O.brackets>0&&(k!=="]"||E.value==="["||E.value==="[^")){if(r.posix!==!1&&k===":"){let U=E.value.slice(1);if(U.includes("[")&&(E.posix=!0,U.includes(":"))){let ie=E.value.lastIndexOf("["),ae=E.value.slice(0,ie),Te=E.value.slice(ie+2),ve=lXe[Te];if(ve){E.value=ae+ve,O.backtrack=!0,te(),!o.output&&s.indexOf(E)===1&&(o.output=f);continue}}}(k==="["&&N()!==":"||k==="-"&&N()==="]")&&(k=`\\${k}`),k==="]"&&(E.value==="["||E.value==="[^")&&(k=`\\${k}`),r.posix===!0&&k==="!"&&E.value==="["&&(k="^"),E.value+=k,se({value:k});continue}if(O.quotes===1&&k!=='"'){k=cl.escapeRegex(k),E.value+=k,se({value:k});continue}if(k==='"'){O.quotes=O.quotes===1?0:1,r.keepQuotes===!0&&He({type:"text",value:k});continue}if(k==="("){J("parens"),He({type:"paren",value:k});continue}if(k===")"){if(O.parens===0&&r.strictBrackets===!0)throw new SyntaxError(gS("opening","("));let U=Z[Z.length-1];if(U&&O.parens===U.parens+1){ur(Z.pop());continue}He({type:"paren",value:k,output:O.parens?")":"\\)"}),ut("parens");continue}if(k==="["){if(r.nobracket===!0||!pe().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(gS("closing","]"));k=`\\${k}`}else J("brackets");He({type:"bracket",value:k});continue}if(k==="]"){if(r.nobracket===!0||E&&E.type==="bracket"&&E.value.length===1){He({type:"text",value:k,output:`\\${k}`});continue}if(O.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(gS("opening","["));He({type:"text",value:k,output:`\\${k}`});continue}ut("brackets");let U=E.value.slice(1);if(E.posix!==!0&&U[0]==="^"&&!U.includes("/")&&(k=`/${k}`),E.value+=k,se({value:k}),r.literalBrackets===!1||cl.hasRegexChars(U))continue;let ie=cl.escapeRegex(E.value);if(O.output=O.output.slice(0,-E.value.length),r.literalBrackets===!0){O.output+=ie,E.value=ie;continue}E.value=`(${a}${ie}|${E.value})`,O.output+=E.value;continue}if(k==="{"&&r.nobrace!==!0){J("braces");let U={type:"brace",value:k,output:"(",outputIndex:O.output.length,tokensIndex:O.tokens.length};z.push(U),He(U);continue}if(k==="}"){let U=z[z.length-1];if(r.nobrace===!0||!U){He({type:"text",value:k,output:k});continue}let ie=")";if(U.dots===!0){let ae=s.slice(),Te=[];for(let ve=ae.length-1;ve>=0&&(s.pop(),ae[ve].type!=="brace");ve--)ae[ve].type!=="dots"&&Te.unshift(ae[ve].value);ie=fXe(Te,r),O.backtrack=!0}if(U.comma!==!0&&U.dots!==!0){let ae=O.output.slice(0,U.outputIndex),Te=O.tokens.slice(U.tokensIndex);U.value=U.output="\\{",k=ie="\\}",O.output=ae;for(let ve of Te)O.output+=ve.output||ve.value}He({type:"brace",value:k,output:ie}),ut("braces"),z.pop();continue}if(k==="|"){Z.length>0&&Z[Z.length-1].conditions++,He({type:"text",value:k});continue}if(k===","){let U=k,ie=z[z.length-1];ie&&D[D.length-1]==="braces"&&(ie.comma=!0,U="|"),He({type:"comma",value:k,output:U});continue}if(k==="/"){if(E.type==="dot"&&O.index===O.start+1){O.start=O.index+1,O.consumed="",O.output="",s.pop(),E=o;continue}He({type:"slash",value:k,output:p});continue}if(k==="."){if(O.braces>0&&E.type==="dot"){E.value==="."&&(E.output=l);let U=z[z.length-1];E.type="dots",E.output+=k,E.value+=k,U.dots=!0;continue}if(O.braces+O.parens===0&&E.type!=="bos"&&E.type!=="slash"){He({type:"text",value:k,output:l});continue}He({type:"dot",value:k,output:l});continue}if(k==="?"){if(!(E&&E.value==="(")&&r.noextglob!==!0&&N()==="("&&N(2)!=="?"){yt("qmark",k);continue}if(E&&E.type==="paren"){let ie=N(),ae=k;if(ie==="<"&&!cl.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(E.value==="("&&!/[!=<:]/.test(ie)||ie==="<"&&!/<([!=]|\w+>)/.test(pe()))&&(ae=`\\${k}`),He({type:"text",value:k,output:ae});continue}if(r.dot!==!0&&(E.type==="slash"||E.type==="bos")){He({type:"qmark",value:k,output:y});continue}He({type:"qmark",value:k,output:b});continue}if(k==="!"){if(r.noextglob!==!0&&N()==="("&&(N(2)!=="?"||!/[!=<:]/.test(N(3)))){yt("negate",k);continue}if(r.nonegate!==!0&&O.index===0){ze();continue}}if(k==="+"){if(r.noextglob!==!0&&N()==="("&&N(2)!=="?"){yt("plus",k);continue}if(E&&E.value==="("||r.regex===!1){He({type:"plus",value:k,output:d});continue}if(E&&(E.type==="bracket"||E.type==="paren"||E.type==="brace")||O.parens>0){He({type:"plus",value:k});continue}He({type:"plus",value:d});continue}if(k==="@"){if(r.noextglob!==!0&&N()==="("&&N(2)!=="?"){He({type:"at",extglob:!0,value:k,output:""});continue}He({type:"text",value:k});continue}if(k!=="*"){(k==="$"||k==="^")&&(k=`\\${k}`);let U=dXe.exec(pe());U&&(k+=U[0],O.index+=U[0].length),He({type:"text",value:k});continue}if(E&&(E.type==="globstar"||E.star===!0)){E.type="star",E.star=!0,E.value+=k,E.output=q,O.backtrack=!0,O.globstar=!0,ne(k);continue}let fe=pe();if(r.noextglob!==!0&&/^\([^?]/.test(fe)){yt("star",k);continue}if(E.type==="star"){if(r.noglobstar===!0){ne(k);continue}let U=E.prev,ie=U.prev,ae=U.type==="slash"||U.type==="bos",Te=ie&&(ie.type==="star"||ie.type==="globstar");if(r.bash===!0&&(!ae||fe[0]&&fe[0]!=="/")){He({type:"star",value:k,output:""});continue}let ve=O.braces>0&&(U.type==="comma"||U.type==="brace"),Qe=Z.length&&(U.type==="pipe"||U.type==="paren");if(!ae&&U.type!=="paren"&&!ve&&!Qe){He({type:"star",value:k,output:""});continue}for(;fe.slice(0,3)==="/**";){let ht=t[O.index+4];if(ht&&ht!=="/")break;fe=fe.slice(3),ne("/**",3)}if(U.type==="bos"&&F()){E.type="globstar",E.value+=k,E.output=T(r),O.output=E.output,O.globstar=!0,ne(k);continue}if(U.type==="slash"&&U.prev.type!=="bos"&&!Te&&F()){O.output=O.output.slice(0,-(U.output+E.output).length),U.output=`(?:${U.output}`,E.type="globstar",E.output=T(r)+(r.strictSlashes?")":"|$)"),E.value+=k,O.globstar=!0,O.output+=U.output+E.output,ne(k);continue}if(U.type==="slash"&&U.prev.type!=="bos"&&fe[0]==="/"){let ht=fe[1]!==void 0?"|$":"";O.output=O.output.slice(0,-(U.output+E.output).length),U.output=`(?:${U.output}`,E.type="globstar",E.output=`${T(r)}${p}|${p}${ht})`,E.value+=k,O.output+=U.output+E.output,O.globstar=!0,ne(k+te()),He({type:"slash",value:"/",output:""});continue}if(U.type==="bos"&&fe[0]==="/"){E.type="globstar",E.value+=k,E.output=`(?:^|${p}|${T(r)}${p})`,O.output=E.output,O.globstar=!0,ne(k+te()),He({type:"slash",value:"/",output:""});continue}O.output=O.output.slice(0,-E.output.length),E.type="globstar",E.output=T(r),E.value+=k,O.output+=E.output,O.globstar=!0,ne(k);continue}let Ye={type:"star",value:k,output:q};if(r.bash===!0){Ye.output=".*?",(E.type==="bos"||E.type==="slash")&&(Ye.output=L+Ye.output),He(Ye);continue}if(E&&(E.type==="bracket"||E.type==="paren")&&r.regex===!0){Ye.output=k,He(Ye);continue}(O.index===O.start||E.type==="slash"||E.type==="dot")&&(E.type==="dot"?(O.output+=g,E.output+=g):r.dot===!0?(O.output+=v,E.output+=v):(O.output+=L,E.output+=L),N()!=="*"&&(O.output+=f,E.output+=f)),He(Ye)}for(;O.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(gS("closing","]"));O.output=cl.escapeLast(O.output,"["),ut("brackets")}for(;O.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(gS("closing",")"));O.output=cl.escapeLast(O.output,"("),ut("parens")}for(;O.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(gS("closing","}"));O.output=cl.escapeLast(O.output,"{"),ut("braces")}if(r.strictSlashes!==!0&&(E.type==="star"||E.type==="bracket")&&He({type:"maybe_slash",value:"",output:`${p}?`}),O.backtrack===!0){O.output="";for(let fe of O.tokens)O.output+=fe.output!=null?fe.output:fe.value,fe.suffix&&(O.output+=fe.suffix)}return O};HY.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(a5,r.maxLength):a5,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=lTe[t]||t;let{DOT_LITERAL:o,SLASH_LITERAL:s,ONE_CHAR:a,DOTS_SLASH:c,NO_DOT:u,NO_DOTS:l,NO_DOTS_SLASH:d,STAR:p,START_ANCHOR:f}=s5.globChars(r.windows),m=r.dot?l:u,h=r.dot?d:u,g=r.capture?"":"?:",v={negated:!1,prefix:""},b=r.bash===!0?".*?":p;r.capture&&(b=`(${b})`);let y=L=>L.noglobstar===!0?b:`(${g}(?:(?!${f}${L.dot?c:o}).)*?)`,S=L=>{switch(L){case"*":return`${m}${a}${b}`;case".*":return`${o}${a}${b}`;case"*.*":return`${m}${b}${o}${a}${b}`;case"*/*":return`${m}${b}${s}${a}${h}${b}`;case"**":return m+y(r);case"**/*":return`(?:${m}${y(r)}${s})?${h}${a}${b}`;case"**/*.*":return`(?:${m}${y(r)}${s})?${h}${b}${o}${a}${b}`;case"**/.*":return`(?:${m}${y(r)}${s})?${o}${a}${b}`;default:{let M=/^(.*?)\.(\w+)$/.exec(L);if(!M)return;let q=S(M[1]);return q?q+o+M[2]:void 0}}},x=cl.removePrefix(t,v),T=S(x);return T&&r.strictSlashes!==!0&&(T+=`${s}?`),T};dTe.exports=HY});var hTe=P((AGt,mTe)=>{"use strict";var mXe=uTe(),jY=pTe(),fTe=o5(),hXe=u2(),gXe=t=>t&&typeof t=="object"&&!Array.isArray(t),Ci=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(p=>Ci(p,e,r));return p=>{for(let f of l){let m=f(p);if(m)return m}return!1}}let n=gXe(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=i.windows,s=n?Ci.compileRe(t,e):Ci.makeRe(t,e,!1,!0),a=s.state;delete s.state;let c=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};c=Ci(i.ignore,l,r)}let u=(l,d=!1)=>{let{isMatch:p,match:f,output:m}=Ci.test(l,s,e,{glob:t,posix:o}),h={glob:t,state:a,regex:s,posix:o,input:l,output:m,match:f,isMatch:p};return typeof i.onResult=="function"&&i.onResult(h),p===!1?(h.isMatch=!1,d?h:!1):c(l)?(typeof i.onIgnore=="function"&&i.onIgnore(h),h.isMatch=!1,d?h:!1):(typeof i.onMatch=="function"&&i.onMatch(h),d?h:!0)};return r&&(u.state=a),u};Ci.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?fTe.toPosixSlashes:null),a=t===n,c=a&&s?s(t):t;return a===!1&&(c=s?s(t):t,a=c===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Ci.matchBase(t,e,r,i):a=e.exec(c)),{isMatch:!!a,match:a,output:c}};Ci.matchBase=(t,e,r)=>(e instanceof RegExp?e:Ci.makeRe(e,r)).test(fTe.basename(t));Ci.isMatch=(t,e,r)=>Ci(e,r)(t);Ci.parse=(t,e)=>Array.isArray(t)?t.map(r=>Ci.parse(r,e)):jY(t,{...e,fastpaths:!1});Ci.scan=(t,e)=>mXe(t,e);Ci.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let c=Ci.toRegex(a,e);return n===!0&&(c.state=t),c};Ci.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=jY.fastpaths(t,e)),i.output||(i=jY(t,e)),Ci.compileRe(i,e,r,n)};Ci.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};Ci.constants=hXe;mTe.exports=Ci});var gTe=P((PGt,zd)=>{"use strict";var vXe=require("os"),Bf=hTe(),yXe=vXe.platform()==="win32";function bXe(t,e,r=!1){return e&&(e.windows===null||e.windows===void 0)&&(e={...e,windows:yXe}),Bf(t,e,r)}zd.exports=bXe;zd.exports.test=Bf.test;zd.exports.matchBase=Bf.matchBase;zd.exports.isMatch=Bf.isMatch;zd.exports.parse=Bf.parse;zd.exports.scan=Bf.scan;zd.exports.compileRe=Bf.compileRe;zd.exports.toRegex=Bf.toRegex;zd.exports.makeRe=Bf.makeRe});var kIe=P((Hrr,PIe)=>{function SIe(t){return Array.isArray(t)?t:[t]}var CIe="",EIe=" ",OQ="\\",SJe=/^\s+$/,EJe=/(?:[^\\]|^)\\$/,TJe=/^\\!/,IJe=/^\\#/,CJe=/\r?\n/g,wJe=/^\.*\/|^\.+$/,MQ="/",wIe="node-ignore";typeof Symbol<"u"&&(wIe=Symbol.for("node-ignore"));var TIe=wIe,RJe=(t,e,r)=>Object.defineProperty(t,e,{value:r}),AJe=/([0-z])-([0-z])/g,RIe=()=>!1,PJe=t=>t.replace(AJe,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:CIe),kJe=t=>{let{length:e}=t;return t.slice(0,e-e%2)},DJe=[[/\\?\s+$/,t=>t.indexOf("\\")===0?EIe:CIe],[/\\\s/g,()=>EIe],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>OQ],[/\\\\/g,()=>OQ],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===OQ?`\\[${r}${kJe(n)}${i}`:i==="]"&&n.length%2===0?`[${PJe(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],IIe=Object.create(null),NJe=(t,e)=>{let r=IIe[t];return r||(r=DJe.reduce((n,i)=>n.replace(i[0],i[1].bind(t)),t),IIe[t]=r),e?new RegExp(r,"i"):new RegExp(r)},BQ=t=>typeof t=="string",LJe=t=>t&&BQ(t)&&!SJe.test(t)&&!EJe.test(t)&&t.indexOf("#")!==0,OJe=t=>t.split(CJe),FQ=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},MJe=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(TJe,"!").replace(IJe,"#");let i=NJe(t,e);return new FQ(r,t,n,i)},FJe=(t,e)=>{throw new e(t)},$f=(t,e,r)=>BQ(t)?t?$f.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),AIe=t=>wJe.test(t);$f.isNotRelative=AIe;$f.convert=t=>t;var UQ=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){RJe(this,TIe,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[TIe]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(LJe(e)){let r=MJe(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,SIe(BQ(e)?OJe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!r)return;o.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let o=e&&$f.convert(e);return $f(o,e,this._allowRelativePaths?RIe:FJe),this._t(o,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(MQ)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let o=this._t(i.join(MQ)+MQ,r,n,i);return r[e]=o.ignored?o:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return SIe(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},n6=t=>new UQ(t),UJe=t=>$f(t&&$f.convert(t),t,RIe);n6.isPathValid=UJe;n6.default=n6;PIe.exports=n6;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");$f.convert=t;let e=/^[a-z]:\//i;$f.isNotRelative=r=>e.test(r)||AIe(r)}});var UIe=P(($rr,FIe)=>{"use strict";FIe.exports=OIe;function OIe(t,e,r){t instanceof RegExp&&(t=LIe(t,r)),e instanceof RegExp&&(e=LIe(e,r));var n=MIe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function LIe(t,e){var r=e.match(t);return r?r[0]:null}OIe.range=MIe;function MIe(t,e,r){var n,i,o,s,a,c=r.indexOf(t),u=r.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],o=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,s=u),u=r.indexOf(e,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}});var $Ie=P((Wrr,zIe)=>{var BIe=UIe();zIe.exports=HJe;var qIe="\0SLASH"+Math.random()+"\0",HIe="\0OPEN"+Math.random()+"\0",HQ="\0CLOSE"+Math.random()+"\0",jIe="\0COMMA"+Math.random()+"\0",GIe="\0PERIOD"+Math.random()+"\0";function qQ(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function BJe(t){return t.split("\\\\").join(qIe).split("\\{").join(HIe).split("\\}").join(HQ).split("\\,").join(jIe).split("\\.").join(GIe)}function qJe(t){return t.split(qIe).join("\\").split(HIe).join("{").split(HQ).join("}").split(jIe).join(",").split(GIe).join(".")}function VIe(t){if(!t)return[""];var e=[],r=BIe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=VIe(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function HJe(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),w2(BJe(t),!0).map(qJe)):[]}function jJe(t){return"{"+t+"}"}function GJe(t){return/^-?0\d/.test(t)}function VJe(t,e){return t<=e}function zJe(t,e){return t>=e}function w2(t,e){var r=[],n=BIe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?w2(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var a=i+"{"+n.body+"}"+o[s];r.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=c||u,d=n.body.indexOf(",")>=0;if(!l&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+HQ+n.post,w2(t)):[t];var p;if(l)p=n.body.split(/\.\./);else if(p=VIe(n.body),p.length===1&&(p=w2(p[0],!1).map(jJe),p.length===1))return o.map(function(O){return n.pre+p[0]+O});var f;if(l){var m=qQ(p[0]),h=qQ(p[1]),g=Math.max(p[0].length,p[1].length),v=p.length==3?Math.abs(qQ(p[2])):1,b=VJe,y=h<m;y&&(v*=-1,b=zJe);var S=p.some(GJe);f=[];for(var x=m;b(x,h);x+=v){var T;if(u)T=String.fromCharCode(x),T==="\\"&&(T="");else if(T=String(x),S){var L=g-T.length;if(L>0){var M=new Array(L+1).join("0");x<0?T="-"+M+T.slice(1):T=M+T}}f.push(T)}}else{f=[];for(var q=0;q<p.length;q++)f.push.apply(f,w2(p[q],!1))}for(var q=0;q<f.length;q++)for(var s=0;s<o.length;s++){var a=i+f[q]+o[s];(!e||l||a)&&r.push(a)}}return r}});var zt=P((BRr,v2e)=>{v2e.exports={options:{usePureJavaScript:!1}}});var _2e=P((qRr,b2e)=>{var BJ={};b2e.exports=BJ;var y2e={};BJ.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Ytt(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join(`\r
`)}return n};BJ.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=y2e[e];if(!r){r=y2e[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var l=0;t[l]===o&&l<t.length-1;++l)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Ytt(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}});var Rr=P((HRr,T2e)=>{var x2e=zt(),S2e=_2e(),V=T2e.exports=x2e.util=x2e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){V.nextTick=process.nextTick,typeof setImmediate=="function"?V.setImmediate=setImmediate:V.setImmediate=V.nextTick;return}if(typeof setImmediate=="function"){V.setImmediate=function(){return setImmediate.apply(void 0,arguments)},V.nextTick=function(a){return setImmediate(a)};return}if(V.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(l){l()})}};var s=a,t="forge.setImmediate",e=[];V.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=V.setImmediate;V.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}V.nextTick=V.setImmediate})();V.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;V.globalScope=function(){return V.isNodejs?global:typeof self>"u"?window:self}();V.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};V.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};V.isArrayBufferView=function(t){return t&&V.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function nR(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}V.ByteBuffer=qJ;function qJ(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(V.isArrayBuffer(t)||V.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof qJ||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}V.ByteStringBuffer=qJ;var Qtt=4096;V.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Qtt&&(this.data.substr(0,1),this._constructedStringLength=0)};V.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};V.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};V.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};V.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};V.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};V.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(V.encodeUtf8(t))};V.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};V.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};V.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};V.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};V.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};V.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};V.ByteStringBuffer.prototype.putInt=function(t,e){nR(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};V.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};V.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};V.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};V.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};V.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};V.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};V.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};V.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};V.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};V.ByteStringBuffer.prototype.getInt=function(t){nR(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};V.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};V.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};V.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};V.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};V.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};V.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};V.ByteStringBuffer.prototype.copy=function(){var t=V.createBuffer(this.data);return t.read=this.read,t};V.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};V.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};V.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};V.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};V.ByteStringBuffer.prototype.toString=function(){return V.decodeUtf8(this.bytes())};function Xtt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=V.isArrayBuffer(t),n=V.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}V.DataBuffer=Xtt;V.DataBuffer.prototype.length=function(){return this.write-this.read};V.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};V.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};V.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};V.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};V.DataBuffer.prototype.putBytes=function(t,e){if(V.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(V.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof V.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&V.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof V.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=V.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=V.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};V.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};V.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};V.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};V.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};V.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};V.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};V.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};V.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};V.DataBuffer.prototype.putInt=function(t,e){nR(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};V.DataBuffer.prototype.putSignedInt=function(t,e){return nR(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};V.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};V.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};V.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};V.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};V.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};V.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};V.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};V.DataBuffer.prototype.getInt=function(t){nR(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};V.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};V.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};V.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};V.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};V.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};V.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};V.DataBuffer.prototype.copy=function(){return new V.DataBuffer(this)};V.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};V.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};V.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};V.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};V.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return V.binary.raw.encode(e);if(t==="hex")return V.binary.hex.encode(e);if(t==="base64")return V.binary.base64.encode(e);if(t==="utf8")return V.text.utf8.decode(e);if(t==="utf16")return V.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};V.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=V.encodeUtf8(t)),new V.ByteBuffer(t)};V.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};V.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};V.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};V.bytesToHex=function(t){return V.createBuffer(t).toHex()};V.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var s0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a0=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],E2e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";V.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=s0.charAt(i>>2),r+=s0.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=s0.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":s0.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};V.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=a0[t.charCodeAt(s++)-43],n=a0[t.charCodeAt(s++)-43],i=a0[t.charCodeAt(s++)-43],o=a0[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};V.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};V.decodeUtf8=function(t){return decodeURIComponent(escape(t))};V.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:S2e.encode,decode:S2e.decode}};V.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};V.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};V.binary.hex.encode=V.bytesToHex;V.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};V.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=s0.charAt(i>>2),r+=s0.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=s0.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":s0.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};V.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,c=0,u=r;c<t.length;)i=a0[t.charCodeAt(c++)-43],o=a0[t.charCodeAt(c++)-43],s=a0[t.charCodeAt(c++)-43],a=a0[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,s!==64&&(n[u++]=(o&15)<<4|s>>2,a!==64&&(n[u++]=(s&3)<<6|a));return e?u-r:n.subarray(0,u)};V.binary.base58.encode=function(t,e){return V.binary.baseN.encode(t,E2e,e)};V.binary.base58.decode=function(t,e){return V.binary.baseN.decode(t,E2e,e)};V.text={utf8:{},utf16:{}};V.text.utf8.encode=function(t,e,r){t=V.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};V.text.utf8.decode=function(t){return V.decodeUtf8(String.fromCharCode.apply(null,t))};V.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};V.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};V.deflate=function(t,e,r){if(e=V.decode64(t.deflate(V.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};V.inflate=function(t,e,r){var n=t.inflate(V.encode64(e)).rval;return n===null?null:V.decode64(n)};var HJ=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=V.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},jJ=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(V.decode64(r))),r},Jtt=function(t,e,r,n){var i=jJ(t,e);i===null&&(i={}),i[r]=n,HJ(t,e,i)},Ztt=function(t,e,r){var n=jJ(t,e);return n!==null&&(n=r in n?n[r]:null),n},ert=function(t,e,r){var n=jJ(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),HJ(t,e,n)}},trt=function(t,e){HJ(t,e,null)},yM=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};V.setItem=function(t,e,r,n,i){yM(Jtt,arguments,i)};V.getItem=function(t,e,r,n){return yM(Ztt,arguments,n)};V.removeItem=function(t,e,r,n){yM(ert,arguments,n)};V.clearItems=function(t,e,r){yM(trt,arguments,r)};V.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};V.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};V.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")};V.formatSize=function(t){return t>=1073741824?t=V.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=V.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=V.formatNumber(t/1024,0)+" KiB":t=V.formatNumber(t,0)+" bytes",t};V.bytesFromIP=function(t){return t.indexOf(".")!==-1?V.bytesFromIPv4(t):t.indexOf(":")!==-1?V.bytesFromIPv6(t):null};V.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=V.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};V.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=V.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=V.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};V.bytesToIP=function(t){return t.length===4?V.bytesToIPv4(t):t.length===16?V.bytesToIPv6(t):null};V.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};V.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=V.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};V.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in V&&!t.update)return e(null,V.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return V.cores=navigator.hardwareConcurrency,e(null,V.cores);if(typeof Worker>"u")return V.cores=1,e(null,V.cores);if(typeof Blob>"u")return V.cores=2,e(null,V.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var u=Math.floor(s.reduce(function(l,d){return l+d},0)/s.length);return V.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,V.cores)}i(c,function(l,d){s.push(o(c,d)),n(s,a-1,c)})}function i(s,a){for(var c=[],u=[],l=0;l<s;++l){var d=new Worker(r);d.addEventListener("message",function(p){if(u.push(p.data),u.length===s){for(var f=0;f<s;++f)c[f].terminate();a(null,u)}}),c.push(d)}for(var l=0;l<s;++l)c[l].postMessage(l)}function o(s,a){for(var c=[],u=0;u<s;++u)for(var l=a[u],d=c[u]=[],p=0;p<s;++p)if(u!==p){var f=a[p];(l.st>f.st&&l.st<f.et||f.st>l.st&&f.st<l.et)&&d.push(p)}return c.reduce(function(m,h){return Math.max(m,h.length)},0)}}});var bM=P((jRr,I2e)=>{var Do=zt();Rr();I2e.exports=Do.cipher=Do.cipher||{};Do.cipher.algorithms=Do.cipher.algorithms||{};Do.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Do.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Do.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Do.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Do.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Do.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Do.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Do.cipher.algorithms[t]=e};Do.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Do.cipher.algorithms?Do.cipher.algorithms[t]:null};var GJ=Do.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};GJ.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Do.util.createBuffer(),this.output=t.output||Do.util.createBuffer(),this.mode.start(e)};GJ.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};GJ.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var zJ=P((GRr,C2e)=>{var No=zt();Rr();No.cipher=No.cipher||{};var er=C2e.exports=No.cipher.modes=No.cipher.modes||{};er.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};er.ecb.prototype.start=function(t){};er.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};er.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};er.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};er.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};er.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};er.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=_M(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};er.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};er.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};er.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};er.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};er.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=No.util.createBuffer(),this._partialBytes=0};er.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_M(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};er.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};er.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};er.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=No.util.createBuffer(),this._partialBytes=0};er.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_M(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};er.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};er.ofb.prototype.decrypt=er.ofb.prototype.encrypt;er.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=No.util.createBuffer(),this._partialBytes=0};er.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_M(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};er.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}xM(this._inBlock)};er.ctr.prototype.decrypt=er.ctr.prototype.encrypt;er.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=No.util.createBuffer(),this._partialBytes=0,this._R=3774873600};er.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=No.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=No.util.createBuffer(t.additionalData):r=No.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=No.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(VJ(n*8)))}this._inBlock=this._j0.slice(0),xM(this._inBlock),this._partialBytes=0,r=No.util.createBuffer(r),this._aDataLength=VJ(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};er.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),xM(this._inBlock)};er.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),xM(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};er.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=No.util.createBuffer();var n=this._aDataLength.concat(VJ(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};er.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};er.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};er.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};er.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};er.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,u=(n-1-s%n)*e;a[c]=1<<e-1<<u,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};er.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function _M(t,e){if(typeof t=="string"&&(t=No.util.createBuffer(t)),No.util.isArray(t)&&t.length>4){var r=t;t=No.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!No.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function xM(t){t[t.length-1]=t[t.length-1]+1&4294967295}function VJ(t){return[t/4294967296|0,t&4294967295]}});var c0=P((VRr,P2e)=>{var gn=zt();bM();zJ();Rr();P2e.exports=gn.aes=gn.aes||{};gn.aes.startEncrypting=function(t,e,r,n){var i=SM({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};gn.aes.createEncryptionCipher=function(t,e){return SM({key:t,output:null,decrypt:!1,mode:e})};gn.aes.startDecrypting=function(t,e,r,n){var i=SM({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};gn.aes.createDecryptionCipher=function(t,e){return SM({key:t,output:null,decrypt:!0,mode:e})};gn.aes.Algorithm=function(t,e){KJ||R2e();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return WJ(r._w,n,i,!1)},decrypt:function(n,i){return WJ(r._w,n,i,!0)}}}),r._init=!1};gn.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=gn.util.createBuffer(e);else if(gn.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=gn.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!gn.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!gn.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=A2e(e,t.decrypt&&!s),this._init=!0}};gn.aes._expandKey=function(t,e){return KJ||R2e(),A2e(t,e)};gn.aes._updateBlock=WJ;qE("AES-ECB",gn.cipher.modes.ecb);qE("AES-CBC",gn.cipher.modes.cbc);qE("AES-CFB",gn.cipher.modes.cfb);qE("AES-OFB",gn.cipher.modes.ofb);qE("AES-CTR",gn.cipher.modes.ctr);qE("AES-GCM",gn.cipher.modes.gcm);function qE(t,e){var r=function(){return new gn.aes.Algorithm(t,e)};gn.cipher.registerAlgorithm(t,r)}var KJ=!1,BE=4,ia,$J,w2e,ob,ml;function R2e(){KJ=!0,w2e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;ia=new Array(256),$J=new Array(256),ob=new Array(4),ml=new Array(4);for(var e=0;e<4;++e)ob[e]=new Array(256),ml[e]=new Array(256);for(var r=0,n=0,i,o,s,a,c,u,l,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,ia[r]=a,$J[a]=r,c=t[a],i=t[r],o=t[i],s=t[o],u=c<<24^a<<16^a<<8^(a^c),l=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var d=0;d<4;++d)ob[d][r]=u,ml[d][a]=l,u=u<<24|u>>>8,l=l<<24|l>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function A2e(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=BE*s,c=o;c<a;++c)n=r[c-1],c%o===0?(n=ia[n>>>16&255]<<24^ia[n>>>8&255]<<16^ia[n&255]<<8^ia[n>>>24]^w2e[i]<<24,i++):o>6&&c%o===4&&(n=ia[n>>>24]<<24^ia[n>>>16&255]<<16^ia[n>>>8&255]<<8^ia[n&255]),r[c]=r[c-o]^n;if(e){var u,l=ml[0],d=ml[1],p=ml[2],f=ml[3],m=r.slice(0);a=r.length;for(var c=0,h=a-BE;c<a;c+=BE,h-=BE)if(c===0||c===a-BE)m[c]=r[h],m[c+1]=r[h+3],m[c+2]=r[h+2],m[c+3]=r[h+1];else for(var g=0;g<BE;++g)u=r[h+g],m[c+(3&-g)]=l[ia[u>>>24]]^d[ia[u>>>16&255]]^p[ia[u>>>8&255]]^f[ia[u&255]];r=m}return r}function WJ(t,e,r,n){var i=t.length/4-1,o,s,a,c,u;n?(o=ml[0],s=ml[1],a=ml[2],c=ml[3],u=$J):(o=ob[0],s=ob[1],a=ob[2],c=ob[3],u=ia);var l,d,p,f,m,h,g;l=e[0]^t[0],d=e[n?3:1]^t[1],p=e[2]^t[2],f=e[n?1:3]^t[3];for(var v=3,b=1;b<i;++b)m=o[l>>>24]^s[d>>>16&255]^a[p>>>8&255]^c[f&255]^t[++v],h=o[d>>>24]^s[p>>>16&255]^a[f>>>8&255]^c[l&255]^t[++v],g=o[p>>>24]^s[f>>>16&255]^a[l>>>8&255]^c[d&255]^t[++v],f=o[f>>>24]^s[l>>>16&255]^a[d>>>8&255]^c[p&255]^t[++v],l=m,d=h,p=g;r[0]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[f&255]^t[++v],r[n?3:1]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^t[++v],r[2]=u[p>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[n?1:3]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++v]}function SM(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=gn.cipher.createDecipher(r,t.key):n=gn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof gn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var u0=P((zRr,k2e)=>{var iR=zt();iR.pki=iR.pki||{};var YJ=k2e.exports=iR.pki.oids=iR.oids=iR.oids||{};function Ce(t,e){YJ[t]=e,YJ[e]=t}function zr(t,e){YJ[t]=e}Ce("1.2.840.113549.1.1.1","rsaEncryption");Ce("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ce("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ce("1.2.840.113549.1.1.7","RSAES-OAEP");Ce("1.2.840.113549.1.1.8","mgf1");Ce("1.2.840.113549.1.1.9","pSpecified");Ce("1.2.840.113549.1.1.10","RSASSA-PSS");Ce("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ce("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ce("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ce("1.3.101.112","EdDSA25519");Ce("1.2.840.10040.4.3","dsa-with-sha1");Ce("1.3.14.3.2.7","desCBC");Ce("1.3.14.3.2.26","sha1");Ce("1.3.14.3.2.29","sha1WithRSASignature");Ce("2.16.840.1.101.3.4.2.1","sha256");Ce("2.16.840.1.101.3.4.2.2","sha384");Ce("2.16.840.1.101.3.4.2.3","sha512");Ce("2.16.840.1.101.3.4.2.4","sha224");Ce("2.16.840.1.101.3.4.2.5","sha512-224");Ce("2.16.840.1.101.3.4.2.6","sha512-256");Ce("1.2.840.113549.2.2","md2");Ce("1.2.840.113549.2.5","md5");Ce("1.2.840.113549.1.7.1","data");Ce("1.2.840.113549.1.7.2","signedData");Ce("1.2.840.113549.1.7.3","envelopedData");Ce("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ce("1.2.840.113549.1.7.5","digestedData");Ce("1.2.840.113549.1.7.6","encryptedData");Ce("1.2.840.113549.1.9.1","emailAddress");Ce("1.2.840.113549.1.9.2","unstructuredName");Ce("1.2.840.113549.1.9.3","contentType");Ce("1.2.840.113549.1.9.4","messageDigest");Ce("1.2.840.113549.1.9.5","signingTime");Ce("1.2.840.113549.1.9.6","counterSignature");Ce("1.2.840.113549.1.9.7","challengePassword");Ce("1.2.840.113549.1.9.8","unstructuredAddress");Ce("1.2.840.113549.1.9.14","extensionRequest");Ce("1.2.840.113549.1.9.20","friendlyName");Ce("1.2.840.113549.1.9.21","localKeyId");Ce("1.2.840.113549.1.9.22.1","x509Certificate");Ce("1.2.840.113549.1.12.10.1.1","keyBag");Ce("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ce("1.2.840.113549.1.12.10.1.3","certBag");Ce("1.2.840.113549.1.12.10.1.4","crlBag");Ce("1.2.840.113549.1.12.10.1.5","secretBag");Ce("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ce("1.2.840.113549.1.5.13","pkcs5PBES2");Ce("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ce("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ce("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ce("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ce("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ce("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ce("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ce("1.2.840.113549.2.7","hmacWithSHA1");Ce("1.2.840.113549.2.8","hmacWithSHA224");Ce("1.2.840.113549.2.9","hmacWithSHA256");Ce("1.2.840.113549.2.10","hmacWithSHA384");Ce("1.2.840.113549.2.11","hmacWithSHA512");Ce("1.2.840.113549.3.7","des-EDE3-CBC");Ce("2.16.840.1.101.3.4.1.2","aes128-CBC");Ce("2.16.840.1.101.3.4.1.22","aes192-CBC");Ce("2.16.840.1.101.3.4.1.42","aes256-CBC");Ce("2.5.4.3","commonName");Ce("2.5.4.4","surname");Ce("2.5.4.5","serialNumber");Ce("2.5.4.6","countryName");Ce("2.5.4.7","localityName");Ce("2.5.4.8","stateOrProvinceName");Ce("2.5.4.9","streetAddress");Ce("2.5.4.10","organizationName");Ce("2.5.4.11","organizationalUnitName");Ce("2.5.4.12","title");Ce("2.5.4.13","description");Ce("2.5.4.15","businessCategory");Ce("2.5.4.17","postalCode");Ce("2.5.4.42","givenName");Ce("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ce("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ce("2.16.840.1.113730.1.1","nsCertType");Ce("2.16.840.1.113730.1.13","nsComment");zr("2.5.29.1","authorityKeyIdentifier");zr("2.5.29.2","keyAttributes");zr("2.5.29.3","certificatePolicies");zr("2.5.29.4","keyUsageRestriction");zr("2.5.29.5","policyMapping");zr("2.5.29.6","subtreesConstraint");zr("2.5.29.7","subjectAltName");zr("2.5.29.8","issuerAltName");zr("2.5.29.9","subjectDirectoryAttributes");zr("2.5.29.10","basicConstraints");zr("2.5.29.11","nameConstraints");zr("2.5.29.12","policyConstraints");zr("2.5.29.13","basicConstraints");Ce("2.5.29.14","subjectKeyIdentifier");Ce("2.5.29.15","keyUsage");zr("2.5.29.16","privateKeyUsagePeriod");Ce("2.5.29.17","subjectAltName");Ce("2.5.29.18","issuerAltName");Ce("2.5.29.19","basicConstraints");zr("2.5.29.20","cRLNumber");zr("2.5.29.21","cRLReason");zr("2.5.29.22","expirationDate");zr("2.5.29.23","instructionCode");zr("2.5.29.24","invalidityDate");zr("2.5.29.25","cRLDistributionPoints");zr("2.5.29.26","issuingDistributionPoint");zr("2.5.29.27","deltaCRLIndicator");zr("2.5.29.28","issuingDistributionPoint");zr("2.5.29.29","certificateIssuer");zr("2.5.29.30","nameConstraints");Ce("2.5.29.31","cRLDistributionPoints");Ce("2.5.29.32","certificatePolicies");zr("2.5.29.33","policyMappings");zr("2.5.29.34","policyConstraints");Ce("2.5.29.35","authorityKeyIdentifier");zr("2.5.29.36","policyConstraints");Ce("2.5.29.37","extKeyUsage");zr("2.5.29.46","freshestCRL");zr("2.5.29.54","inhibitAnyPolicy");Ce("1.3.6.1.4.1.11129.2.4.2","timestampList");Ce("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ce("1.3.6.1.5.5.7.3.1","serverAuth");Ce("1.3.6.1.5.5.7.3.2","clientAuth");Ce("1.3.6.1.5.5.7.3.3","codeSigning");Ce("1.3.6.1.5.5.7.3.4","emailProtection");Ce("1.3.6.1.5.5.7.3.8","timeStamping")});var hl=P(($Rr,N2e)=>{var wn=zt();Rr();u0();var qe=N2e.exports=wn.asn1=wn.asn1||{};qe.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};qe.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};qe.create=function(t,e,r,n,i){if(wn.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||wn.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=qe.copy(a)),a};qe.copy=function(t,e){var r;if(wn.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(qe.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:qe.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};qe.equals=function(t,e,r){if(wn.util.isArray(t)){if(!wn.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!qe.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&qe.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};qe.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function oR(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var rrt=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;oR(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};qe.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=wn.util.createBuffer(t));var r=t.length(),n=EM(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function EM(t,e,r,n){var i;oR(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var c=rrt(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var l,d,p=(o&32)===32;if(p)if(l=[],c===void 0)for(;;){if(oR(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),l.push(EM(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),l.push(EM(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(l===void 0&&s===qe.Class.UNIVERSAL&&a===qe.Type.BITSTRING&&(d=t.bytes(c)),l===void 0&&n.decodeBitStrings&&s===qe.Class.UNIVERSAL&&a===qe.Type.BITSTRING&&c>1){var f=t.read,m=e,h=0;if(a===qe.Type.BITSTRING&&(oR(t,e,1),h=t.getByte(),e--),h===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},v=EM(t,e,r+1,g),b=i-t.length();e-=b,a==qe.Type.BITSTRING&&b++;var y=v.tagClass;b===c&&(y===qe.Class.UNIVERSAL||y===qe.Class.CONTEXT_SPECIFIC)&&(l=[v])}catch{}l===void 0&&(t.read=f,e=m)}if(l===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===qe.Type.BMPSTRING)for(l="";c>0;c-=2)oR(t,e,2),l+=String.fromCharCode(t.getInt16()),e-=2;else l=t.getBytes(c),e-=c}var S=d===void 0?null:{bitStringContents:d};return qe.create(s,a,p,l,S)}qe.toDer=function(t){var e=wn.util.createBuffer(),r=t.tagClass|t.type,n=wn.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=qe.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(qe.toDer(t.value[o]))}else if(t.type===qe.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===qe.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};qe.oidToDer=function(t){var e=t.split("."),r=wn.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};qe.derToOid=function(t){var e;typeof t=="string"&&(t=wn.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};qe.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var l=parseInt(t.substr(u+1,2),10),d=parseInt(t.substr(u+4,2),10),p=l*60+d;p*=6e4,c==="+"?e.setTime(+e-p):e.setTime(+e+p)}return e};qe.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,l=!1;t.charAt(t.length-1)==="Z"&&(l=!0);var d=t.length-5,p=t.charAt(d);if(p==="+"||p==="-"){var f=parseInt(t.substr(d+1,2),10),m=parseInt(t.substr(d+4,2),10);u=f*60+m,u*=6e4,p==="+"&&(u*=-1),l=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,s,a,c)),e};qe.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};qe.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};qe.integerToDer=function(t){var e=wn.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};qe.derToInteger=function(t){typeof t=="string"&&(t=wn.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};qe.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&wn.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=qe.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var D2e=/[^\\u0000-\\u00ff]/;qe.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case qe.Class.UNIVERSAL:n+="Universal:";break;case qe.Class.APPLICATION:n+="Application:";break;case qe.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case qe.Class.PRIVATE:n+="Private:";break}if(t.tagClass===qe.Class.UNIVERSAL)switch(n+=t.type,t.type){case qe.Type.NONE:n+=" (None)";break;case qe.Type.BOOLEAN:n+=" (Boolean)";break;case qe.Type.INTEGER:n+=" (Integer)";break;case qe.Type.BITSTRING:n+=" (Bit string)";break;case qe.Type.OCTETSTRING:n+=" (Octet string)";break;case qe.Type.NULL:n+=" (Null)";break;case qe.Type.OID:n+=" (Object Identifier)";break;case qe.Type.ODESC:n+=" (Object Descriptor)";break;case qe.Type.EXTERNAL:n+=" (External or Instance of)";break;case qe.Type.REAL:n+=" (Real)";break;case qe.Type.ENUMERATED:n+=" (Enumerated)";break;case qe.Type.EMBEDDED:n+=" (Embedded PDV)";break;case qe.Type.UTF8:n+=" (UTF8)";break;case qe.Type.ROID:n+=" (Relative Object Identifier)";break;case qe.Type.SEQUENCE:n+=" (Sequence)";break;case qe.Type.SET:n+=" (Set)";break;case qe.Type.PRINTABLESTRING:n+=" (Printable String)";break;case qe.Type.IA5String:n+=" (IA5String (ASCII))";break;case qe.Type.UTCTIME:n+=" (UTC time)";break;case qe.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case qe.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=qe.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===qe.Type.OID){var c=qe.derToOid(t.value);n+=c,wn.pki&&wn.pki.oids&&c in wn.pki.oids&&(n+=" ("+wn.pki.oids[c]+") ")}if(t.type===qe.Type.INTEGER)try{n+=qe.derToInteger(t.value)}catch{n+="0x"+wn.util.bytesToHex(t.value)}else if(t.type===qe.Type.BITSTRING){if(t.value.length>1?n+="0x"+wn.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===qe.Type.OCTETSTRING)D2e.test(t.value)||(n+="("+t.value+") "),n+="0x"+wn.util.bytesToHex(t.value);else if(t.type===qe.Type.UTF8)try{n+=wn.util.decodeUtf8(t.value)}catch(l){if(l.message==="URI malformed")n+="0x"+wn.util.bytesToHex(t.value)+" (malformed UTF8)";else throw l}else t.type===qe.Type.PRINTABLESTRING||t.type===qe.Type.IA5String?n+=t.value:D2e.test(t.value)?n+="0x"+wn.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var ip=P((WRr,L2e)=>{var TM=zt();L2e.exports=TM.md=TM.md||{};TM.md.algorithms=TM.md.algorithms||{}});var HE=P((KRr,O2e)=>{var Qf=zt();ip();Rr();var nrt=O2e.exports=Qf.hmac=Qf.hmac||{};nrt.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in Qf.md.algorithms)e=Qf.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=Qf.util.createBuffer(s);else if(Qf.util.isArray(s)){var a=s;s=Qf.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=Qf.util.createBuffer(),n=Qf.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var a=s.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var CM=P((YRr,B2e)=>{var op=zt();ip();Rr();var F2e=B2e.exports=op.md5=op.md5||{};op.md.md5=op.md.algorithms.md5=F2e;F2e.create=function(){U2e||irt();var t=null,e=op.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=op.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=op.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),M2e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=op.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(QJ.substr(0,n.blockLength-s));for(var a,c=0,u=n.fullMessageLength.length-1;u>=0;--u)a=n.fullMessageLength[u]*8+c,c=a/4294967296>>>0,i.putInt32Le(a>>>0);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};M2e(l,r,i);var d=op.util.createBuffer();return d.putInt32Le(l.h0),d.putInt32Le(l.h1),d.putInt32Le(l.h2),d.putInt32Le(l.h3),d},n};var QJ=null,IM=null,sR=null,jE=null,U2e=!1;function irt(){QJ="\x80",QJ+=op.util.fillString("\0",64),IM=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],sR=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],jE=new Array(64);for(var t=0;t<64;++t)jE[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);U2e=!0}function M2e(t,e,r){for(var n,i,o,s,a,c,u,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,l=0;l<16;++l)e[l]=r.getInt32Le(),c=a^o&(s^a),n=i+c+jE[l]+e[l],u=sR[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<32;++l)c=s^a&(o^s),n=i+c+jE[l]+e[IM[l]],u=sR[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<48;++l)c=o^s^a,n=i+c+jE[l]+e[IM[l]],u=sR[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<64;++l)c=s^(o|~a),n=i+c+jE[l]+e[IM[l]],u=sR[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,d-=64}}});var sb=P((QRr,H2e)=>{var RM=zt();Rr();var q2e=H2e.exports=RM.pem=RM.pem||{};q2e.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=wM(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=wM(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=wM(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=wM(t.headers[i]);return t.procType&&(r+=`\r
`),r+=RM.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};q2e.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:RM.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var l=c[u].replace(/\s+$/,""),d=u+1;d<c.length;++d){var p=c[d];if(!/\s/.test(p[0]))break;l+=p,u=d}if(o=l.match(n),o){for(var f={name:o[1],values:[]},m=o[2].split(","),h=0;h<m.length;++h)f.values.push(ort(m[h]));if(a.procType)if(!a.contentDomain&&f.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function wM(t){for(var e=t.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function ort(t){return t.replace(/^\s+/,"")}});var aR=P((XRr,G2e)=>{var Mn=zt();bM();zJ();Rr();G2e.exports=Mn.des=Mn.des||{};Mn.des.startEncrypting=function(t,e,r,n){var i=AM({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Mn.des.createEncryptionCipher=function(t,e){return AM({key:t,output:null,decrypt:!1,mode:e})};Mn.des.startDecrypting=function(t,e,r,n){var i=AM({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Mn.des.createDecryptionCipher=function(t,e){return AM({key:t,output:null,decrypt:!0,mode:e})};Mn.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return j2e(r._keys,n,i,!1)},decrypt:function(n,i){return j2e(r._keys,n,i,!0)}}}),r._init=!1};Mn.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Mn.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=mrt(e),this._init=!0}};sp("DES-ECB",Mn.cipher.modes.ecb);sp("DES-CBC",Mn.cipher.modes.cbc);sp("DES-CFB",Mn.cipher.modes.cfb);sp("DES-OFB",Mn.cipher.modes.ofb);sp("DES-CTR",Mn.cipher.modes.ctr);sp("3DES-ECB",Mn.cipher.modes.ecb);sp("3DES-CBC",Mn.cipher.modes.cbc);sp("3DES-CFB",Mn.cipher.modes.cfb);sp("3DES-OFB",Mn.cipher.modes.ofb);sp("3DES-CTR",Mn.cipher.modes.ctr);function sp(t,e){var r=function(){return new Mn.des.Algorithm(t,e)};Mn.cipher.registerAlgorithm(t,r)}var srt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],art=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],crt=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],urt=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],lrt=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],drt=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],prt=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],frt=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function mrt(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],h=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,y,S=0;S<h;S++){var x=t.getInt32(),T=t.getInt32();y=(x>>>4^T)&252645135,T^=y,x^=y<<4,y=(T>>>-16^x)&65535,x^=y,T^=y<<-16,y=(x>>>2^T)&858993459,T^=y,x^=y<<2,y=(T>>>-16^x)&65535,x^=y,T^=y<<-16,y=(x>>>1^T)&1431655765,T^=y,x^=y<<1,y=(T>>>8^x)&16711935,x^=y,T^=y<<8,y=(x>>>1^T)&1431655765,T^=y,x^=y<<1,y=x<<8|T>>>20&240,x=T<<24|T<<8&16711680|T>>>8&65280|T>>>24&240,T=y;for(var L=0;L<v.length;++L){v[L]?(x=x<<2|x>>>26,T=T<<2|T>>>26):(x=x<<1|x>>>27,T=T<<1|T>>>27),x&=-15,T&=-15;var M=e[x>>>28]|r[x>>>24&15]|n[x>>>20&15]|i[x>>>16&15]|o[x>>>12&15]|s[x>>>8&15]|a[x>>>4&15],q=c[T>>>28]|u[T>>>24&15]|l[T>>>20&15]|d[T>>>16&15]|p[T>>>12&15]|f[T>>>8&15]|m[T>>>4&15];y=(q>>>16^M)&65535,g[b++]=M^y,g[b++]=q^y<<16}}return g}function j2e(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],c=e[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var l=o[u+1],d=o[u+2],p=o[u];p!=l;p+=d){var f=c^t[p],m=(c>>>4|c<<28)^t[p+1];s=a,a=c,c=s^(art[f>>>24&63]|urt[f>>>16&63]|drt[f>>>8&63]|frt[f&63]|srt[m>>>24&63]|crt[m>>>16&63]|lrt[m>>>8&63]|prt[m&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,r[0]=a,r[1]=c}function AM(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Mn.cipher.createDecipher(r,t.key):n=Mn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Mn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var PM=P((JRr,V2e)=>{var oa=zt();HE();ip();Rr();var hrt=oa.pkcs5=oa.pkcs5||{},Xf;oa.util.isNodejs&&!oa.options.usePureJavaScript&&(Xf=require("crypto"));V2e.exports=oa.pbkdf2=hrt.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),oa.util.isNodejs&&!oa.options.usePureJavaScript&&Xf.pbkdf2&&(i===null||typeof i!="object")&&(Xf.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?Xf.pbkdf2Sync.length===4?Xf.pbkdf2(t,e,r,n,function(y,S){if(y)return o(y);o(null,S.toString("binary"))}):Xf.pbkdf2(t,e,r,n,i,function(y,S){if(y)return o(y);o(null,S.toString("binary"))}):Xf.pbkdf2Sync.length===4?Xf.pbkdf2Sync(t,e,r,n).toString("binary"):Xf.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in oa.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=oa.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),u=n-(c-1)*s,l=oa.hmac.create();l.start(i,t);var d="",p,f,m;if(!o){for(var h=1;h<=c;++h){l.start(null,null),l.update(e),l.update(oa.util.int32ToBytes(h)),p=m=l.digest().getBytes();for(var g=2;g<=r;++g)l.start(null,null),l.update(m),f=l.digest().getBytes(),p=oa.util.xorBytes(p,f,s),m=f;d+=h<c?p:p.substr(0,u)}return d}var h=1,g;function v(){if(h>c)return o(null,d);l.start(null,null),l.update(e),l.update(oa.util.int32ToBytes(h)),p=m=l.digest().getBytes(),g=2,b()}function b(){if(g<=r)return l.start(null,null),l.update(m),f=l.digest().getBytes(),p=oa.util.xorBytes(p,f,s),m=f,++g,oa.util.setImmediate(b);d+=h<c?p:p.substr(0,u),++h,v()}v()}});var JJ=P((ZRr,Y2e)=>{var ap=zt();ip();Rr();var $2e=Y2e.exports=ap.sha256=ap.sha256||{};ap.md.sha256=ap.md.algorithms.sha256=$2e;$2e.create=function(){W2e||grt();var t=null,e=ap.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=ap.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=ap.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),z2e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=ap.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(XJ.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};z2e(d,r,i);var p=ap.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p.putInt32(d.h5),p.putInt32(d.h6),p.putInt32(d.h7),p},n};var XJ=null,W2e=!1,K2e=null;function grt(){XJ="\x80",XJ+=ap.util.fillString("\0",64),K2e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W2e=!0}function z2e(t,e,r){for(var n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(l=t.h0,d=t.h1,p=t.h2,f=t.h3,m=t.h4,h=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=g^m&(h^g),o=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&d|p&(l^d),n=v+s+a+K2e[u]+e[u],i=o+c,v=g,g=h,h=m,m=f+n>>>0,f=p,p=d,d=l,l=n+i>>>0;t.h0=t.h0+l|0,t.h1=t.h1+d|0,t.h2=t.h2+p|0,t.h3=t.h3+f|0,t.h4=t.h4+m|0,t.h5=t.h5+h|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,b-=64}}});var ZJ=P((eAr,Q2e)=>{var cp=zt();Rr();var kM=null;cp.util.isNodejs&&!cp.options.usePureJavaScript&&!process.versions["node-webkit"]&&(kM=require("crypto"));var vrt=Q2e.exports=cp.prng=cp.prng||{};vrt.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,l){if(!l)return e.generateSync(u);var d=e.plugin.cipher,p=e.plugin.increment,f=e.plugin.formatKey,m=e.plugin.formatSeed,h=cp.util.createBuffer();e.key=null,g();function g(v){if(v)return l(v);if(h.length()>=u)return l(null,h.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return cp.util.nextTick(function(){o(g)});var b=d(e.key,e.seed);e.generated+=b.length,h.putBytes(b),e.key=f(d(e.key,p(e.seed))),e.seed=m(d(e.key,e.seed)),cp.util.setImmediate(g)}},e.generateSync=function(u){var l=e.plugin.cipher,d=e.plugin.increment,p=e.plugin.formatKey,f=e.plugin.formatSeed;e.key=null;for(var m=cp.util.createBuffer();m.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var h=l(e.key,e.seed);e.generated+=h.length,m.putBytes(h),e.key=p(l(e.key,d(e.seed))),e.seed=f(l(e.key,e.seed))}return m.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return a(),u();var l=32-e.pools[0].messageLength<<5;e.seedFile(l,function(d,p){if(d)return u(d);e.collect(p),a(),u()})}function s(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var l=1,d=0;d<32;++d)e.reseeds%l===0&&(u.update(e.pools[d].digest().getBytes()),e.pools[d].start()),l=l<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var p=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(p),e.generated=0}function c(u){var l=null,d=cp.util.globalScope,p=d.crypto||d.msCrypto;p&&p.getRandomValues&&(l=function(x){return p.getRandomValues(x)});var f=cp.util.createBuffer();if(l)for(;f.length()<u;){var m=Math.max(1,Math.min(u-f.length(),65536)/4),h=new Uint32Array(Math.floor(m));try{l(h);for(var g=0;g<h.length;++g)f.putInt32(h[g])}catch(x){if(!(typeof QuotaExceededError<"u"&&x instanceof QuotaExceededError))throw x}}if(f.length()<u)for(var v,b,y,S=Math.floor(Math.random()*65536);f.length()<u;){b=16807*(S&65535),v=16807*(S>>16),b+=(v&32767)<<16,b+=v>>15,b=(b&2147483647)+(b>>31),S=b&4294967295;for(var g=0;g<3;++g)y=S>>>(g<<3),y^=Math.floor(Math.random()*256),f.putByte(y&255)}return f.getBytes(u)}return kM?(e.seedFile=function(u,l){kM.randomBytes(u,function(d,p){if(d)return l(d);l(null,p.toString())})},e.seedFileSync=function(u){return kM.randomBytes(u).toString()}):(e.seedFile=function(u,l){try{l(null,c(u))}catch(d){l(d)}},e.seedFileSync=c),e.collect=function(u){for(var l=u.length,d=0;d<l;++d)e.pools[e.pool].update(u.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,l){for(var d="",p=0;p<l;p+=8)d+=String.fromCharCode(u>>p&255);e.collect(d)},e.registerWorker=function(u){if(u===self)e.seedFile=function(d,p){function f(m){var h=m.data;h.forge&&h.forge.prng&&(self.removeEventListener("message",f),p(h.forge.prng.err,h.forge.prng.bytes))}self.addEventListener("message",f),self.postMessage({forge:{prng:{needed:d}}})};else{var l=function(d){var p=d.data;p.forge&&p.forge.prng&&e.seedFile(p.forge.prng.needed,function(f,m){u.postMessage({forge:{prng:{err:f,bytes:m}}})})};u.addEventListener("message",l)}},e}});var yu=P((tAr,eZ)=>{var Lo=zt();c0();JJ();ZJ();Rr();(function(){if(Lo.random&&Lo.random.getBytes){eZ.exports=Lo.random;return}(function(t){var e={},r=new Array(4),n=Lo.util.createBuffer();e.formatKey=function(d){var p=Lo.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),Lo.aes._expandKey(d,!1)},e.formatSeed=function(d){var p=Lo.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),d},e.cipher=function(d,p){return Lo.aes._updateBlock(d,p,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(d){return++d[3],d},e.md=Lo.md.sha256;function i(){var d=Lo.prng.create(e);return d.getBytes=function(p,f){return d.generate(p,f)},d.getBytesSync=function(p){return d.generate(p)},d}var o=i(),s=null,a=Lo.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(d){return c.getRandomValues(d)}),Lo.options.usePureJavaScript||!Lo.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var l in navigator)try{typeof navigator[l]=="string"&&(u+=navigator[l])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(d){o.collectInt(d.clientX,16),o.collectInt(d.clientY,16)}),t().keypress(function(d){o.collectInt(d.charCode,8)}))}if(!Lo.random)Lo.random=o;else for(var l in o)Lo.random[l]=o[l];Lo.random.createInstance=i,eZ.exports=Lo.random})(typeof jQuery<"u"?jQuery:null)})()});var rZ=P((rAr,Z2e)=>{var $a=zt();Rr();var tZ=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],X2e=[1,2,3,5],yrt=function(t,e){return t<<e&65535|(t&65535)>>16-e},brt=function(t,e){return(t&65535)>>e|t<<16-e&65535};Z2e.exports=$a.rc2=$a.rc2||{};$a.rc2.expandKey=function(t,e){typeof t=="string"&&(t=$a.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(tZ[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,tZ[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,tZ[r.at(a+1)^r.at(a+o)]);return r};var J2e=function(t,e,r){var n=!1,i=null,o=null,s=null,a,c,u,l,d=[];for(t=$a.rc2.expandKey(t,e),u=0;u<64;u++)d.push(t.getInt16Le());r?(a=function(m){for(u=0;u<4;u++)m[u]+=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),m[u]=yrt(m[u],X2e[u]),l++},c=function(m){for(u=0;u<4;u++)m[u]+=d[m[(u+3)%4]&63]}):(a=function(m){for(u=3;u>=0;u--)m[u]=brt(m[u],X2e[u]),m[u]-=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),l--},c=function(m){for(u=3;u>=0;u--)m[u]-=d[m[(u+3)%4]&63]});var p=function(m){var h=[];for(u=0;u<4;u++){var g=i.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),h.push(g&65535)}l=r?0:63;for(var v=0;v<m.length;v++)for(var b=0;b<m[v][0];b++)m[v][1](h);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(h[u]):h[u]^=s.getInt16Le()),o.putInt16Le(h[u])},f=null;return f={start:function(m,h){m&&typeof m=="string"&&(m=$a.util.createBuffer(m)),n=!1,i=$a.util.createBuffer(),o=h||new $a.util.createBuffer,s=m,f.output=o},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)p([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(m){var h=!0;if(r)if(m)h=m(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(h&&(n=!0,f.update()),!r&&(h=i.length()===0,h))if(m)h=m(8,o,!r);else{var v=o.length(),b=o.at(v-1);b>v?h=!1:o.truncate(b)}return h}},f};$a.rc2.startEncrypting=function(t,e,r){var n=$a.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};$a.rc2.createEncryptionCipher=function(t,e){return J2e(t,e,!0)};$a.rc2.startDecrypting=function(t,e,r){var n=$a.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};$a.rc2.createDecryptionCipher=function(t,e){return J2e(t,e,!1)}});var uR=P((nAr,aRe)=>{var nZ=zt();aRe.exports=nZ.jsbn=nZ.jsbn||{};var Jf,_rt=0xdeadbeefcafe,eRe=(_rt&16777215)==15715070;function he(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}nZ.jsbn.BigInteger=he;function Ar(){return new he(null)}function xrt(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function Srt(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,l=a*c+u*s;c=s*c+((l&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(l>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function tRe(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,l=a*c+u*s;c=s*c+((l&16383)<<14)+r.data[n]+i,i=(c>>28)+(l>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(he.prototype.am=tRe,Jf=28):eRe&&navigator.appName=="Microsoft Internet Explorer"?(he.prototype.am=Srt,Jf=30):eRe&&navigator.appName!="Netscape"?(he.prototype.am=xrt,Jf=26):(he.prototype.am=tRe,Jf=28);he.prototype.DB=Jf;he.prototype.DM=(1<<Jf)-1;he.prototype.DV=1<<Jf;var iZ=52;he.prototype.FV=Math.pow(2,iZ);he.prototype.F1=iZ-Jf;he.prototype.F2=2*Jf-iZ;var Ert="0123456789abcdefghijklmnopqrstuvwxyz",DM=new Array,GE,bu;GE=48;for(bu=0;bu<=9;++bu)DM[GE++]=bu;GE=97;for(bu=10;bu<36;++bu)DM[GE++]=bu;GE=65;for(bu=10;bu<36;++bu)DM[GE++]=bu;function rRe(t){return Ert.charAt(t)}function nRe(t,e){var r=DM[t.charCodeAt(e)];return r??-1}function Trt(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function Irt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function l0(t){var e=Ar();return e.fromInt(t),e}function Crt(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:nRe(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&he.ZERO.subTo(this,this)}function wrt(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function Rrt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=rRe(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=rRe(n));return i?o:"0"}function Art(){var t=Ar();return he.ZERO.subTo(this,t),t}function Prt(){return this.s<0?this.negate():this}function krt(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function NM(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Drt(){return this.t<=0?0:this.DB*(this.t-1)+NM(this.data[this.t-1]^this.s&this.DM)}function Nrt(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Lrt(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Ort(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function Mrt(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function Frt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Urt(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&he.ZERO.subTo(e,e)}function Brt(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function qrt(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ar());var o=Ar(),s=this.s,a=t.s,c=this.DB-NM(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,l=o.data[u-1];if(l!=0){var d=l*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),p=this.FV/d,f=(1<<this.F1)/d,m=1<<this.F2,h=r.t,g=h-u,v=e??Ar();for(o.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),he.ONE.dlShiftTo(u,v),v.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--g>=0;){var b=r.data[--h]==l?this.DM:Math.floor(r.data[h]*p+(r.data[h-1]+m)*f);if((r.data[h]+=o.am(0,b,r,g,0,u))<b)for(o.dlShiftTo(g,v),r.subTo(v,r);r.data[h]<--b;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),s!=a&&he.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&he.ZERO.subTo(r,r)}}}function Hrt(t){var e=Ar();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(he.ZERO)>0&&t.subTo(e,e),e}function ab(t){this.m=t}function jrt(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Grt(t){return t}function Vrt(t){t.divRemTo(this.m,null,t)}function zrt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function $rt(t,e){t.squareTo(e),this.reduce(e)}ab.prototype.convert=jrt;ab.prototype.revert=Grt;ab.prototype.reduce=Vrt;ab.prototype.mulTo=zrt;ab.prototype.sqrTo=$rt;function Wrt(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function cb(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Krt(t){var e=Ar();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(he.ZERO)>0&&this.m.subTo(e,e),e}function Yrt(t){var e=Ar();return t.copyTo(e),this.reduce(e),e}function Qrt(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Xrt(t,e){t.squareTo(e),this.reduce(e)}function Jrt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}cb.prototype.convert=Krt;cb.prototype.revert=Yrt;cb.prototype.reduce=Qrt;cb.prototype.mulTo=Jrt;cb.prototype.sqrTo=Xrt;function Zrt(){return(this.t>0?this.data[0]&1:this.s)==0}function ent(t,e){if(t>4294967295||t<1)return he.ONE;var r=Ar(),n=Ar(),i=e.convert(this),o=NM(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function tnt(t,e){var r;return t<256||e.isEven()?r=new ab(e):r=new cb(e),this.exp(t,r)}he.prototype.copyTo=Trt;he.prototype.fromInt=Irt;he.prototype.fromString=Crt;he.prototype.clamp=wrt;he.prototype.dlShiftTo=Nrt;he.prototype.drShiftTo=Lrt;he.prototype.lShiftTo=Ort;he.prototype.rShiftTo=Mrt;he.prototype.subTo=Frt;he.prototype.multiplyTo=Urt;he.prototype.squareTo=Brt;he.prototype.divRemTo=qrt;he.prototype.invDigit=Wrt;he.prototype.isEven=Zrt;he.prototype.exp=ent;he.prototype.toString=Rrt;he.prototype.negate=Art;he.prototype.abs=Prt;he.prototype.compareTo=krt;he.prototype.bitLength=Drt;he.prototype.mod=Hrt;he.prototype.modPowInt=tnt;he.ZERO=l0(0);he.ONE=l0(1);function rnt(){var t=Ar();return this.copyTo(t),t}function nnt(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function int(){return this.t==0?this.s:this.data[0]<<24>>24}function ont(){return this.t==0?this.s:this.data[0]<<16>>16}function snt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function ant(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function cnt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=l0(r),i=Ar(),o=Ar(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function unt(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var c=nRe(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&he.ZERO.subTo(this,this)}function lnt(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(he.ONE.shiftLeft(t-1),oZ,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(he.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function dnt(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function pnt(t){return this.compareTo(t)==0}function fnt(t){return this.compareTo(t)<0?this:t}function mnt(t){return this.compareTo(t)>0?this:t}function hnt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function gnt(t,e){return t&e}function vnt(t){var e=Ar();return this.bitwiseTo(t,gnt,e),e}function oZ(t,e){return t|e}function ynt(t){var e=Ar();return this.bitwiseTo(t,oZ,e),e}function iRe(t,e){return t^e}function bnt(t){var e=Ar();return this.bitwiseTo(t,iRe,e),e}function oRe(t,e){return t&~e}function _nt(t){var e=Ar();return this.bitwiseTo(t,oRe,e),e}function xnt(){for(var t=Ar(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function Snt(t){var e=Ar();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Ent(t){var e=Ar();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Tnt(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function Int(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Tnt(this.data[t]);return this.s<0?this.t*this.DB:-1}function Cnt(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function wnt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Cnt(this.data[r]^e);return t}function Rnt(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function Ant(t,e){var r=he.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Pnt(t){return this.changeBit(t,oZ)}function knt(t){return this.changeBit(t,oRe)}function Dnt(t){return this.changeBit(t,iRe)}function Nnt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Lnt(t){var e=Ar();return this.addTo(t,e),e}function Ont(t){var e=Ar();return this.subTo(t,e),e}function Mnt(t){var e=Ar();return this.multiplyTo(t,e),e}function Fnt(t){var e=Ar();return this.divRemTo(t,e,null),e}function Unt(t){var e=Ar();return this.divRemTo(t,null,e),e}function Bnt(t){var e=Ar(),r=Ar();return this.divRemTo(t,e,r),new Array(e,r)}function qnt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Hnt(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function cR(){}function sRe(t){return t}function jnt(t,e,r){t.multiplyTo(e,r)}function Gnt(t,e){t.squareTo(e)}cR.prototype.convert=sRe;cR.prototype.revert=sRe;cR.prototype.mulTo=jnt;cR.prototype.sqrTo=Gnt;function Vnt(t){return this.exp(t,new cR)}function znt(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function $nt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function VE(t){this.r2=Ar(),this.q3=Ar(),he.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Wnt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ar();return t.copyTo(e),this.reduce(e),e}function Knt(t){return t}function Ynt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Qnt(t,e){t.squareTo(e),this.reduce(e)}function Xnt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}VE.prototype.convert=Wnt;VE.prototype.revert=Knt;VE.prototype.reduce=Ynt;VE.prototype.mulTo=Xnt;VE.prototype.sqrTo=Qnt;function Jnt(t,e){var r=t.bitLength(),n,i=l0(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new ab(e):e.isEven()?o=new VE(e):o=new cb(e);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=o.convert(this),n>1){var l=Ar();for(o.sqrTo(s[1],l);a<=u;)s[a]=Ar(),o.mulTo(l,s[a-2],s[a]),a+=2}var d=t.t-1,p,f=!0,m=Ar(),h;for(r=NM(t.data[d])-1;d>=0;){for(r>=c?p=t.data[d]>>r-c&u:(p=(t.data[d]&(1<<r+1)-1)<<c-r,d>0&&(p|=t.data[d-1]>>this.DB+r-c)),a=n;!(p&1);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),f)s[p].copyTo(i),f=!1;else{for(;a>1;)o.sqrTo(i,m),o.sqrTo(m,i),a-=2;a>0?o.sqrTo(i,m):(h=i,i=m,m=h),o.mulTo(m,s[p],i)}for(;d>=0&&!(t.data[d]&1<<r);)o.sqrTo(i,m),h=i,i=m,m=h,--r<0&&(r=this.DB-1,--d)}return o.revert(i)}function Znt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function eit(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function tit(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return he.ZERO;for(var r=t.clone(),n=this.clone(),i=l0(1),o=l0(0),s=l0(0),a=l0(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(he.ONE)!=0)return he.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var gl=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],rit=(1<<26)/gl[gl.length-1];function nit(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=gl[gl.length-1]){for(e=0;e<gl.length;++e)if(r.data[0]==gl[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<gl.length;){for(var n=gl[e],i=e+1;i<gl.length&&n<rit;)n*=gl[i++];for(n=r.modInt(n);e<i;)if(n%gl[e++]==0)return!1}return r.millerRabin(t)}function iit(t){var e=this.subtract(he.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=oit(),o,s=0;s<t;++s){do o=new he(this.bitLength(),i);while(o.compareTo(he.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(he.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(he.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function oit(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}he.prototype.chunkSize=snt;he.prototype.toRadix=cnt;he.prototype.fromRadix=unt;he.prototype.fromNumber=lnt;he.prototype.bitwiseTo=hnt;he.prototype.changeBit=Ant;he.prototype.addTo=Nnt;he.prototype.dMultiply=qnt;he.prototype.dAddOffset=Hnt;he.prototype.multiplyLowerTo=znt;he.prototype.multiplyUpperTo=$nt;he.prototype.modInt=eit;he.prototype.millerRabin=iit;he.prototype.clone=rnt;he.prototype.intValue=nnt;he.prototype.byteValue=int;he.prototype.shortValue=ont;he.prototype.signum=ant;he.prototype.toByteArray=dnt;he.prototype.equals=pnt;he.prototype.min=fnt;he.prototype.max=mnt;he.prototype.and=vnt;he.prototype.or=ynt;he.prototype.xor=bnt;he.prototype.andNot=_nt;he.prototype.not=xnt;he.prototype.shiftLeft=Snt;he.prototype.shiftRight=Ent;he.prototype.getLowestSetBit=Int;he.prototype.bitCount=wnt;he.prototype.testBit=Rnt;he.prototype.setBit=Pnt;he.prototype.clearBit=knt;he.prototype.flipBit=Dnt;he.prototype.add=Lnt;he.prototype.subtract=Ont;he.prototype.multiply=Mnt;he.prototype.divide=Fnt;he.prototype.remainder=Unt;he.prototype.divideAndRemainder=Bnt;he.prototype.modPow=Jnt;he.prototype.modInverse=tit;he.prototype.pow=Vnt;he.prototype.gcd=Znt;he.prototype.isProbablePrime=nit});var zE=P((iAr,dRe)=>{var up=zt();ip();Rr();var uRe=dRe.exports=up.sha1=up.sha1||{};up.md.sha1=up.md.algorithms.sha1=uRe;uRe.create=function(){lRe||sit();var t=null,e=up.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=up.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=up.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),cRe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=up.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(sZ.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};cRe(d,r,i);var p=up.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p},n};var sZ=null,lRe=!1;function sit(){sZ="\x80",sZ+=up.util.fillString("\0",64),lRe=!0}function cRe(t,e,r){for(var n,i,o,s,a,c,u,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,c=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o&s|a&(o^s),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,d-=64}}});var aZ=P((oAr,fRe)=>{var lp=zt();Rr();yu();zE();var pRe=fRe.exports=lp.pkcs1=lp.pkcs1||{};pRe.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=lp.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),c=a-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var l=o.digest(),d="",p=c-e.length,f=0;f<p;f++)d+="\0";var m=l.getBytes()+d+""+e;if(!i)i=lp.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var h=LM(i,a-o.digestLength-1,s),g=lp.util.xorBytes(m,h,m.length),v=LM(g,o.digestLength,s),b=lp.util.xorBytes(i,v,i.length);return"\0"+b+g};pRe.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(i===void 0?i=lp.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),l=e.substring(1+i.digestLength),d=LM(l,i.digestLength,o),p=lp.util.xorBytes(u,d,u.length),f=LM(p,s-i.digestLength-1,o),m=lp.util.xorBytes(l,f,l.length),h=m.substring(0,i.digestLength),g=c!=="\0",v=0;v<i.digestLength;++v)g|=a.charAt(v)!==h.charAt(v);for(var b=1,y=i.digestLength,S=i.digestLength;S<m.length;S++){var x=m.charCodeAt(S),T=x&1^1,L=b?65534:0;g|=x&L,b=b&T,y+=b}if(g||m.charCodeAt(y)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(y+1)};function LM(t,e,r){r||(r=lp.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var uZ=P((sAr,cZ)=>{var d0=zt();Rr();uR();yu();(function(){if(d0.prime){cZ.exports=d0.prime;return}var t=cZ.exports=d0.prime=d0.prime||{},e=d0.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(d,p){return d|p};t.generateProbablePrime=function(d,p,f){typeof p=="function"&&(f=p,p={}),p=p||{};var m=p.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var h=p.prng||d0.random,g={nextBytes:function(v){for(var b=h.getBytesSync(v.length),y=0;y<v.length;++y)v[y]=b.charCodeAt(y)}};if(m.name==="PRIMEINC")return o(d,g,m.options,f);throw new Error("Invalid prime generation algorithm: "+m.name)};function o(d,p,f,m){return"workers"in f?c(d,p,f,m):s(d,p,f,m)}function s(d,p,f,m){var h=u(d,p),g=0,v=l(h.bitLength());"millerRabinTests"in f&&(v=f.millerRabinTests);var b=10;"maxBlockTime"in f&&(b=f.maxBlockTime),a(h,d,p,g,v,b,m)}function a(d,p,f,m,h,g,v){var b=+new Date;do{if(d.bitLength()>p&&(d=u(p,f)),d.isProbablePrime(h))return v(null,d);d.dAddOffset(r[m++%8],0)}while(g<0||+new Date-b<g);d0.util.setImmediate(function(){a(d,p,f,m,h,g,v)})}function c(d,p,f,m){if(typeof Worker>"u")return s(d,p,f,m);var h=u(d,p),g=f.workers,v=f.workLoad||100,b=v*30/8,y=f.workerScript||"forge/prime.worker.js";if(g===-1)return d0.util.estimateCores(function(x,T){x&&(T=2),g=T-1,S()});S();function S(){g=Math.max(1,g);for(var x=[],T=0;T<g;++T)x[T]=new Worker(y);for(var L=g,T=0;T<g;++T)x[T].addEventListener("message",q);var M=!1;function q(O){if(!M){--L;var Z=O.data;if(Z.found){for(var z=0;z<x.length;++z)x[z].terminate();return M=!0,m(null,new e(Z.prime,16))}h.bitLength()>d&&(h=u(d,p));var D=h.toString(16);O.target.postMessage({hex:D,workLoad:v}),h.dAddOffset(b,0)}}}}function u(d,p){var f=new e(d,p),m=d-1;return f.testBit(m)||f.bitwiseTo(e.ONE.shiftLeft(m),i,f),f.dAddOffset(31-f.mod(n).byteValue(),0),f}function l(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var lR=P((aAr,_Re)=>{var pt=zt();hl();uR();u0();aZ();uZ();yu();Rr();typeof yr>"u"&&(yr=pt.jsbn.BigInteger);var yr,lZ=pt.util.isNodejs?require("crypto"):null,Q=pt.asn1,_u=pt.util;pt.pki=pt.pki||{};_Re.exports=pt.pki.rsa=pt.rsa=pt.rsa||{};var Mt=pt.pki,ait=[6,4,2,4,2,4,6,2],cit={name:"PrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},uit={name:"RSAPrivateKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},lit={name:"RSAPublicKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},dit=pt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},pit={name:"DigestInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Q.Class.UNIVERSAL,type:Q.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},fit=function(t){var e;if(t.algorithm in Mt.oids)e=Mt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=Q.oidToDer(e).getBytes(),i=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[]),o=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[]);o.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,n)),o.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,""));var s=Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),Q.toDer(i).getBytes()},yRe=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(yr.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(yr.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new yr(pt.util.bytesToHex(pt.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(yr.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};Mt.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=bRe(t,e,r)):(i=pt.util.createBuffer(),i.putBytes(t));for(var s=new yr(i.toHex(),16),a=yRe(s,e,n),c=a.toString(16),u=pt.util.createBuffer(),l=o-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(pt.util.hexToBytes(c)),u.getBytes()};Mt.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new yr(pt.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=yRe(s,e,r),c=a.toString(16),u=pt.util.createBuffer(),l=i-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(pt.util.hexToBytes(c)),n!==!1?OM(u.getBytes(),e,r):u.getBytes()};Mt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||pt.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new yr(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};Mt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new yr(null);r.fromInt(30);for(var n=0,i=function(d,p){return d|p},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new yr(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(yr.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(hit(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(ait[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(yr.ONE).gcd(t.e).compareTo(yr.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(yr.ONE),t.q1=t.q.subtract(yr.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(yr.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var l=t.e.modInverse(t.phi);t.keys={privateKey:Mt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Mt.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};Mt.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!pt.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(mRe("generateKeyPair"))return lZ.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:Mt.privateKeyFromPem(u),publicKey:Mt.publicKeyFromPem(c)})});if(hRe("generateKey")&&hRe("exportKey"))return _u.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:vRe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return _u.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=Mt.privateKeyFromAsn1(Q.fromDer(pt.util.createBuffer(a)));n(null,{privateKey:c,publicKey:Mt.setRsaPublicKey(c.n,c.e)})}});if(gRe("generateKey")&&gRe("exportKey")){var i=_u.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:vRe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=_u.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(l){var d=l.target.result,p=Mt.privateKeyFromAsn1(Q.fromDer(pt.util.createBuffer(d)));n(null,{privateKey:p,publicKey:Mt.setRsaPublicKey(p.n,p.e)})},u.onerror=function(l){n(l)}},i.onerror=function(a){n(a)};return}}else if(mRe("generateKeyPairSync")){var o=lZ.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Mt.privateKeyFromPem(o.privateKey),publicKey:Mt.publicKeyFromPem(o.publicKey)}}}var s=Mt.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Mt.rsa.stepKeyPairGenerationState(s,0),s.keys;mit(s,r,n)};Mt.setRsaPublicKey=Mt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return bRe(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return pt.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return Mt.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,u){u=OM(u,r,!0);var l=Q.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),d={},p=[];if(!Q.validate(l,pit,d,p)){var f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw f.errors=p,f}var m=Q.derToOid(d.algorithmIdentifier);if(!(m===pt.oids.md2||m===pt.oids.md5||m===pt.oids.sha1||m===pt.oids.sha224||m===pt.oids.sha256||m===pt.oids.sha384||m===pt.oids.sha512||m===pt.oids["sha512-224"]||m===pt.oids["sha512-256"])){var f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw f.oid=m,f}if((m===pt.oids.md2||m===pt.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===d.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,u){return u=OM(u,r,!0),c===u}});var a=Mt.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};Mt.setRsaPrivateKey=Mt.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(u,l,d){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var p=Mt.rsa.decrypt(u,c,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:OM};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(f,m){return pt.pkcs1.decode_rsa_oaep(m,f,d)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(f){return f}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(p,c,!1)},c.sign=function(u,l){var d=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:fit},d=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return u}},d=1);var p=l.encode(u,c.n.bitLength());return Mt.rsa.encrypt(p,c,d)},c};Mt.wrapRsaPrivateKey=function(t){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,Q.integerToDer(0).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Mt.oids.rsaEncryption).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")]),Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,Q.toDer(t).getBytes())])};Mt.privateKeyFromAsn1=function(t){var e={},r=[];if(Q.validate(t,cit,e,r)&&(t=Q.fromDer(pt.util.createBuffer(e.privateKey))),e={},r=[],!Q.validate(t,uit,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,c,u,l,d;return i=pt.util.createBuffer(e.privateKeyModulus).toHex(),o=pt.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=pt.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=pt.util.createBuffer(e.privateKeyPrime1).toHex(),c=pt.util.createBuffer(e.privateKeyPrime2).toHex(),u=pt.util.createBuffer(e.privateKeyExponent1).toHex(),l=pt.util.createBuffer(e.privateKeyExponent2).toHex(),d=pt.util.createBuffer(e.privateKeyCoefficient).toHex(),Mt.setRsaPrivateKey(new yr(i,16),new yr(o,16),new yr(s,16),new yr(a,16),new yr(c,16),new yr(u,16),new yr(l,16),new yr(d,16))};Mt.privateKeyToAsn1=Mt.privateKeyToRSAPrivateKey=function(t){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,Q.integerToDer(0).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.n)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.e)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.d)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.p)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.q)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.dP)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.dQ)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.qInv))])};Mt.publicKeyFromAsn1=function(t){var e={},r=[];if(Q.validate(t,dit,e,r)){var n=Q.derToOid(e.publicKeyOid);if(n!==Mt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!Q.validate(t,lit,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=pt.util.createBuffer(e.publicKeyModulus).toHex(),s=pt.util.createBuffer(e.publicKeyExponent).toHex();return Mt.setRsaPublicKey(new yr(o,16),new yr(s,16))};Mt.publicKeyToAsn1=Mt.publicKeyToSubjectPublicKeyInfo=function(t){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Mt.oids.rsaEncryption).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")]),Q.create(Q.Class.UNIVERSAL,Q.Type.BITSTRING,!1,[Mt.publicKeyToRSAPublicKey(t)])])};Mt.publicKeyToRSAPublicKey=function(t){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.n)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,dp(t.e))])};function bRe(t,e,r){var n=pt.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var u=0,l=pt.random.getBytes(s),c=0;c<s;++c)a=l.charCodeAt(c),a===0?++u:n.putByte(a);s=u}return n.putByte(0),n.putBytes(t),n}function OM(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=pt.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var l=o.getByte();if(l!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function mit(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,c){pt.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(yr.ONE).gcd(t.e).compareTo(yr.ONE)!==0){t.p=null,i();return}if(t.q.subtract(yr.ONE).gcd(t.e).compareTo(yr.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(yr.ONE),t.q1=t.q.subtract(yr.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(yr.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var l=t.e.modInverse(t.phi);t.keys={privateKey:Mt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Mt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function dp(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=pt.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function hit(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function mRe(t){return pt.util.isNodejs&&typeof lZ[t]=="function"}function hRe(t){return typeof _u.globalScope<"u"&&typeof _u.globalScope.crypto=="object"&&typeof _u.globalScope.crypto.subtle=="object"&&typeof _u.globalScope.crypto.subtle[t]=="function"}function gRe(t){return typeof _u.globalScope<"u"&&typeof _u.globalScope.msCrypto=="object"&&typeof _u.globalScope.msCrypto.subtle=="object"&&typeof _u.globalScope.msCrypto.subtle[t]=="function"}function vRe(t){for(var e=pt.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var dZ=P((cAr,IRe)=>{var We=zt();c0();hl();aR();ip();u0();PM();sb();yu();rZ();lR();Rr();typeof xRe>"u"&&(xRe=We.jsbn.BigInteger);var xRe,ue=We.asn1,qt=We.pki=We.pki||{};IRe.exports=qt.pbe=We.pbe=We.pbe||{};var ub=qt.oids,git={name:"EncryptedPrivateKeyInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},vit={name:"PBES2Algorithms",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},yit={name:"pkcs-12PbeParams",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"iterations"}]};qt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=We.random.getBytesSync(r.saltSize),i=r.count,o=ue.integerToDer(i),s,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,l,d;switch(r.algorithm){case"aes128":s=16,u=16,l=ub["aes128-CBC"],d=We.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,l=ub["aes192-CBC"],d=We.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,l=ub["aes256-CBC"],d=We.aes.createEncryptionCipher;break;case"des":s=8,u=8,l=ub.desCBC,d=We.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var f="hmacWith"+r.prfAlgorithm.toUpperCase(),m=TRe(f),h=We.pkcs5.pbkdf2(e,n,i,s,m),g=We.random.getBytesSync(u),v=d(h);v.start(g),v.update(ue.toDer(t)),v.finish(),c=v.output.getBytes();var b=bit(n,o,s,f);a=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(ub.pkcs5PBES2).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(ub.pkcs5PBKDF2).getBytes()),b]),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(l).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var y=new We.util.ByteBuffer(n),h=qt.pbe.generatePkcs12Key(e,y,1,i,s),g=qt.pbe.generatePkcs12Key(e,y,2,i,s),v=We.des.createEncryptionCipher(h);v.start(g),v.update(ue.toDer(t)),v.finish(),c=v.output.getBytes(),a=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(ub["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,n),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,o.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var S=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[a,ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,c)]);return S};qt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ue.validate(t,git,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=ue.derToOid(n.encryptionOid),a=qt.pbe.getCipher(s,n.encryptionParams,e),c=We.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=ue.fromDer(a.output)),r};qt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ue.toDer(t).getBytes()};return We.pem.encode(r,{maxline:e})};qt.encryptedPrivateKeyFromPem=function(t){var e=We.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ue.fromDer(e.body)};qt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=qt.wrapRsaPrivateKey(qt.privateKeyToAsn1(t));return n=qt.encryptPrivateKeyInfo(n,e,r),qt.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=We.random.getBytesSync(16),a=We.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=We.random.getBytesSync(16),a=We.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=We.random.getBytesSync(16),a=We.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=We.random.getBytesSync(8),a=We.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=We.random.getBytesSync(8),a=We.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=We.pbe.opensslDeriveBytes(e,o.substr(0,8),s),l=a(u);l.start(o),l.update(ue.toDer(qt.privateKeyToAsn1(t))),l.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:We.util.bytesToHex(o).toUpperCase()},body:l.output.getBytes()};return We.pem.encode(d)};qt.decryptRsaPrivateKey=function(t,e){var r=null,n=We.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=We.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=We.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=We.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=We.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=We.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(d){return We.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":o=8,s=function(d){return We.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":o=16,s=function(d){return We.rc2.createDecryptionCipher(d,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=We.util.hexToBytes(n.dekInfo.parameters),c=We.pbe.opensslDeriveBytes(e,a.substr(0,8),o),u=s(c);if(u.start(a),u.update(We.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=qt.decryptPrivateKeyInfo(ue.fromDer(r),e):r=ue.fromDer(r),r!==null&&(r=qt.privateKeyFromAsn1(r)),r};qt.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in We.md))throw new Error('"sha1" hash algorithm unavailable.');o=We.md.sha1.create()}var c=o.digestLength,u=o.blockLength,l=new We.util.ByteBuffer,d=new We.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)d.putInt16(t.charCodeAt(a));d.putInt16(0)}var p=d.length(),f=e.length(),m=new We.util.ByteBuffer;m.fillWithByte(r,u);var h=u*Math.ceil(f/u),g=new We.util.ByteBuffer;for(a=0;a<h;a++)g.putByte(e.at(a%f));var v=u*Math.ceil(p/u),b=new We.util.ByteBuffer;for(a=0;a<v;a++)b.putByte(d.at(a%p));var y=g;y.putBuffer(b);for(var S=Math.ceil(i/c),x=1;x<=S;x++){var T=new We.util.ByteBuffer;T.putBytes(m.bytes()),T.putBytes(y.bytes());for(var L=0;L<n;L++)o.start(),o.update(T.getBytes()),T=o.digest();var M=new We.util.ByteBuffer;for(a=0;a<u;a++)M.putByte(T.at(a%c));var q=Math.ceil(f/u)+Math.ceil(p/u),O=new We.util.ByteBuffer;for(s=0;s<q;s++){var Z=new We.util.ByteBuffer(y.getBytes(u)),z=511;for(a=M.length()-1;a>=0;a--)z=z>>8,z+=M.at(a)+Z.at(a),Z.setAt(a,z&255);O.putBuffer(Z)}y=O,l.putBuffer(T)}return l.truncate(l.length()-i),l};qt.pbe.getCipher=function(t,e,r){switch(t){case qt.oids.pkcs5PBES2:return qt.pbe.getCipherForPBES2(t,e,r);case qt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case qt.oids["pbewithSHAAnd40BitRC2-CBC"]:return qt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};qt.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ue.validate(e,vit,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=ue.derToOid(n.kdfOid),t!==qt.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=ue.derToOid(n.encOid),t!==qt.oids["aes128-CBC"]&&t!==qt.oids["aes192-CBC"]&&t!==qt.oids["aes256-CBC"]&&t!==qt.oids["des-EDE3-CBC"]&&t!==qt.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=We.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(qt.oids[t]){case"aes128-CBC":c=16,u=We.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=We.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=We.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=We.des.createDecryptionCipher;break;case"desCBC":c=8,u=We.des.createDecryptionCipher;break}var l=ERe(n.prfOid),d=We.pkcs5.pbkdf2(r,s,a,c,l),p=n.encIv,f=u(d);return f.start(p),f};qt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ue.validate(e,yit,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=We.util.createBuffer(n.salt),a=We.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,l;switch(t){case qt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=We.des.startDecrypting;break;case qt.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(h,g){var v=We.rc2.createDecryptionCipher(h,40);return v.start(g,null),v};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var d=ERe(n.prfOid),p=qt.pbe.generatePkcs12Key(r,s,1,a,c,d);d.start();var f=qt.pbe.generatePkcs12Key(r,s,2,a,u,d);return l(p,f)};qt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in We.md))throw new Error('"md5" hash algorithm unavailable.');n=We.md.md5.create()}e===null&&(e="");for(var i=[SRe(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(SRe(n,i[s-1]+t+e));return i.join("").substr(0,r)};function SRe(t,e){return t.start().update(e).digest().getBytes()}function ERe(t){var e;if(!t)e="hmacWithSHA1";else if(e=qt.oids[ue.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return TRe(e)}function TRe(t){var e=We.md;switch(t){case"hmacWithSHA224":e=We.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function bit(t,e,r,n){var i=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,t),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,We.util.hexToBytes(r.toString(16))),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(qt.oids[n]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.NULL,!1,"")])),i}});var pZ=P((uAr,RRe)=>{var $E=zt();hl();Rr();var je=$E.asn1,WE=RRe.exports=$E.pkcs7asn1=$E.pkcs7asn1||{};$E.pkcs7=$E.pkcs7||{};$E.pkcs7.asn1=WE;var CRe={name:"ContentInfo",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:je.Class.UNIVERSAL,type:je.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:je.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};WE.contentInfoValidator=CRe;var wRe={name:"EncryptedContentInfo",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:je.Class.UNIVERSAL,type:je.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:je.Class.UNIVERSAL,type:je.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:je.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:je.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};WE.envelopedDataValidator={name:"EnvelopedData",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:je.Class.UNIVERSAL,type:je.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:je.Class.UNIVERSAL,type:je.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(wRe)};WE.encryptedDataValidator={name:"EncryptedData",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:je.Class.UNIVERSAL,type:je.Type.INTEGER,constructed:!1,capture:"version"}].concat(wRe)};var _it={name:"SignerInfo",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:je.Class.UNIVERSAL,type:je.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:je.Class.UNIVERSAL,type:je.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:je.Class.UNIVERSAL,type:je.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:je.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:je.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:je.Class.UNIVERSAL,type:je.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:je.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};WE.signedDataValidator={name:"SignedData",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:je.Class.UNIVERSAL,type:je.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:je.Class.UNIVERSAL,type:je.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},CRe,{name:"SignedData.Certificates",tagClass:je.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:je.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:je.Class.UNIVERSAL,type:je.Type.SET,capture:"signerInfos",optional:!0,value:[_it]}]};WE.recipientInfoValidator={name:"RecipientInfo",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:je.Class.UNIVERSAL,type:je.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:je.Class.UNIVERSAL,type:je.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:je.Class.UNIVERSAL,type:je.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:je.Class.UNIVERSAL,type:je.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:je.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:je.Class.UNIVERSAL,type:je.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var fZ=P((lAr,ARe)=>{var lb=zt();Rr();lb.mgf=lb.mgf||{};var xit=ARe.exports=lb.mgf.mgf1=lb.mgf1=lb.mgf1||{};xit.create=function(t){var e={generate:function(r,n){for(var i=new lb.util.ByteBuffer,o=Math.ceil(n/t.digestLength),s=0;s<o;s++){var a=new lb.util.ByteBuffer;a.putInt32(s),t.start(),t.update(r+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var kRe=P((dAr,PRe)=>{var MM=zt();fZ();PRe.exports=MM.mgf=MM.mgf||{};MM.mgf.mgf1=MM.mgf1});var FM=P((pAr,DRe)=>{var db=zt();yu();Rr();var Sit=DRe.exports=db.pss=db.pss||{};Sit.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=db.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||db.random,a={};return a.encode=function(c,u){var l,d=u-1,p=Math.ceil(d/8),f=c.digest().getBytes();if(p<n+o+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(o):m=i.bytes();var h=new db.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(f),h.putBytes(m),e.start(),e.update(h.getBytes());var g=e.digest().getBytes(),v=new db.util.ByteBuffer;v.fillWithByte(0,p-o-n-2),v.putByte(1),v.putBytes(m);var b=v.getBytes(),y=p-n-1,S=r.generate(g,y),x="";for(l=0;l<y;l++)x+=String.fromCharCode(b.charCodeAt(l)^S.charCodeAt(l));var T=65280>>8*p-d&255;return x=String.fromCharCode(x.charCodeAt(0)&~T)+x.substr(1),x+g+"\xBC"},a.verify=function(c,u,l){var d,p=l-1,f=Math.ceil(p/8);if(u=u.substr(-f),f<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=f-n-1,h=u.substr(0,m),g=u.substr(m,n),v=65280>>8*f-p&255;if(h.charCodeAt(0)&v)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(g,m),y="";for(d=0;d<m;d++)y+=String.fromCharCode(h.charCodeAt(d)^b.charCodeAt(d));y=String.fromCharCode(y.charCodeAt(0)&~v)+y.substr(1);var S=f-n-o-2;for(d=0;d<S;d++)if(y.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(y.charCodeAt(S)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var x=y.substr(-o),T=new db.util.ByteBuffer;T.fillWithByte(0,8),T.putBytes(c),T.putBytes(x),e.start(),e.update(T.getBytes());var L=e.digest().getBytes();return g===L},a}});var qM=P((fAr,FRe)=>{var ft=zt();c0();hl();aR();ip();kRe();u0();sb();FM();lR();Rr();var w=ft.asn1,Me=FRe.exports=ft.pki=ft.pki||{},br=Me.oids,mi={};mi.CN=br.commonName;mi.commonName="CN";mi.C=br.countryName;mi.countryName="C";mi.L=br.localityName;mi.localityName="L";mi.ST=br.stateOrProvinceName;mi.stateOrProvinceName="ST";mi.O=br.organizationName;mi.organizationName="O";mi.OU=br.organizationalUnitName;mi.organizationalUnitName="OU";mi.E=br.emailAddress;mi.emailAddress="E";var LRe=ft.pki.rsa.publicKeyValidator,Eit={name:"Certificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},LRe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Tit={name:"rsapss",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Iit={name:"CertificationRequestInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},LRe,{name:"CertificationRequestInfo.attributes",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:w.Class.UNIVERSAL,type:w.Type.SET,constructed:!0}]}]}]},Cit={name:"CertificationRequest",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Iit,{name:"CertificationRequest.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Me.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,s=0;s<t.value.length;++s){n=t.value[s];for(var a=0;a<n.value.length;++a)o={},i=n.value[a],o.type=w.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in br&&(o.name=br[o.type],o.name in mi&&(o.shortName=mi[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Me.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=w.derToOid(n.value[0].value),o=n.value[1].value,s=0;s<o.length;++s){var a={};if(a.type=i,a.value=o[s].value,a.valueTagClass=o[s].type,a.type in br&&(a.name=br[a.type],a.name in mi&&(a.shortName=mi[a.name])),a.type===br.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(Me.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function p0(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var UM=function(t,e,r){var n={};if(t!==br["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:br.sha1},mgf:{algorithmOid:br.mgf1,hash:{algorithmOid:br.sha1}},saltLength:20});var i={},o=[];if(!w.validate(e,Tit,i,o)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=o,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=w.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=w.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=w.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},BM=function(t){switch(br[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return ft.md.sha1.create();case"md5WithRSAEncryption":return ft.md.md5.create();case"sha256WithRSAEncryption":return ft.md.sha256.create();case"sha384WithRSAEncryption":return ft.md.sha384.create();case"sha512WithRSAEncryption":return ft.md.sha512.create();case"RSASSA-PSS":return ft.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},ORe=function(t){var e=t.certificate,r;switch(e.signatureOid){case br.sha1WithRSAEncryption:case br.sha1WithRSASignature:break;case br["RSASSA-PSS"]:var n,i;if(n=br[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||ft.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=br[e.signatureParameters.mgf.algorithmOid],i===void 0||ft.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=ft.mgf[i].create(ft.md[n].create()),n=br[e.signatureParameters.hash.algorithmOid],n===void 0||ft.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=ft.pss.create(ft.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Me.certificateFromPem=function(t,e,r){var n=ft.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=w.fromDer(n.body,r);return Me.certificateFromAsn1(o,e)};Me.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:w.toDer(Me.certificateToAsn1(t)).getBytes()};return ft.pem.encode(r,{maxline:e})};Me.publicKeyFromPem=function(t){var e=ft.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=w.fromDer(e.body);return Me.publicKeyFromAsn1(n)};Me.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:w.toDer(Me.publicKeyToAsn1(t)).getBytes()};return ft.pem.encode(r,{maxline:e})};Me.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:w.toDer(Me.publicKeyToRSAPublicKey(t)).getBytes()};return ft.pem.encode(r,{maxline:e})};Me.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||ft.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=w.toDer(Me.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=w.toDer(Me.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Me.certificationRequestFromPem=function(t,e,r){var n=ft.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=w.fromDer(n.body,r);return Me.certificationRequestFromAsn1(o,e)};Me.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:w.toDer(Me.certificationRequestToAsn1(t)).getBytes()};return ft.pem.encode(r,{maxline:e})};Me.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return p0(t.issuer,e)},t.issuer.addField=function(e){xu([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return p0(t.subject,e)},t.subject.addField=function(e){xu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){xu(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){xu(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)MRe(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||ft.md.sha1.create();var n=br[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Me.getTBSCertificate(t);var o=w.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var s=e.md;if(s===null){s=BM({signatureOid:e.signatureOid,type:"certificate"});var a=e.tbsCertificate||Me.getTBSCertificate(e),c=w.toDer(a);s.update(c.getBytes())}return s!==null&&(r=ORe({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,s,a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],(o.type!==s.type||o.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Me.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=br.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return ft.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Me.certificateFromAsn1=function(t,e){var r={},n=[];if(!w.validate(t,Eit,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=w.derToOid(r.publicKeyOid);if(o!==Me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Me.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=ft.util.createBuffer(r.certSerialNumber);s.serialNumber=a.toHex(),s.signatureOid=ft.asn1.derToOid(r.certSignatureOid),s.signatureParameters=UM(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=ft.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=UM(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(w.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(w.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(w.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(w.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=r.tbsCertificate,e){s.md=BM({signatureOid:s.signatureOid,type:"certificate"});var u=w.toDer(s.tbsCertificate);s.md.update(u.getBytes())}var l=ft.md.sha1.create(),d=w.toDer(r.certIssuer);l.update(d.getBytes()),s.issuer.getField=function(m){return p0(s.issuer,m)},s.issuer.addField=function(m){xu([m]),s.issuer.attributes.push(m)},s.issuer.attributes=Me.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var p=ft.md.sha1.create(),f=w.toDer(r.certSubject);return p.update(f.getBytes()),s.subject.getField=function(m){return p0(s.subject,m)},s.subject.addField=function(m){xu([m]),s.subject.attributes.push(m)},s.subject.attributes=Me.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=p.digest().toHex(),r.certExtensions?s.extensions=Me.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Me.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Me.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Me.certificateExtensionFromAsn1(n.value[i]));return e};Me.certificateExtensionFromAsn1=function(t){var e={};if(e.id=w.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===w.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in br){if(e.name=br[e.id],e.name==="keyUsage"){var r=w.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=w.fromDer(e.value);r.value.length>0&&r.value[0].type===w.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===w.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=w.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=w.fromDer(e.value),s=0;s<r.value.length;++s){var a=w.derToOid(r.value[s].value);a in br?e[br[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=w.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=w.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var l={type:c.type,value:c.value};switch(e.altNames.push(l),c.type){case 1:case 2:case 6:break;case 7:l.ip=ft.util.bytesToIP(c.value);break;case 8:l.oid=w.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=w.fromDer(e.value);e.subjectKeyIdentifier=ft.util.bytesToHex(r.value)}}return e};Me.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!w.validate(t,Cit,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=w.derToOid(r.publicKeyOid);if(o!==Me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Me.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=ft.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=UM(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=ft.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=UM(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=BM({signatureOid:s.signatureOid,type:"certification request"});var a=w.toDer(s.certificationRequestInfo);s.md.update(a.getBytes())}var c=ft.md.sha1.create();return s.subject.getField=function(u){return p0(s.subject,u)},s.subject.addField=function(u){xu([u]),s.subject.attributes.push(u)},s.subject.attributes=Me.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=Me.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(u){return p0(s,u)},s.addAttribute=function(u){xu([u]),s.attributes.push(u)},s.attributes=Me.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Me.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return p0(t.subject,e)},t.subject.addField=function(e){xu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return p0(t,e)},t.addAttribute=function(e){xu([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){xu(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){xu(e),t.attributes=e},t.sign=function(e,r){t.md=r||ft.md.sha1.create();var n=br[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Me.getCertificationRequestInfo(t);var o=w.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=BM({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Me.getCertificationRequestInfo(t),i=w.toDer(n);r.update(i.getBytes())}return r!==null&&(e=ORe({certificate:t,md:r,signature:t.signature})),e},t};function KE(t){for(var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var s=r.value,a=w.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===w.Type.UTF8&&(s=ft.util.encodeUtf8(s))),n=w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(r.type).getBytes()),w.create(w.Class.UNIVERSAL,a,!1,s)])]),e.value.push(n)}return e}function xu(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Me.oids?e.name=Me.oids[e.type]:e.shortName&&e.shortName in mi&&(e.name=Me.oids[mi[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Me.oids)e.type=Me.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in mi&&(e.shortName=mi[e.name]),e.type===br.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=w.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Me.certificateExtensionToAsn1(MRe(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function MRe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Me.oids&&(t.name=Me.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Me.oids)t.id=Me.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);o!==0?s+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(s+=String.fromCharCode(i)),t.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var c in t)t[c]===!0&&(c in br?a.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(br[c]).getBytes())):c.indexOf(".")!==-1&&a.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=ft.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?s=w.oidToDer(w.oidToDer(u.oid)):s=w.oidToDer(s));t.value.value.push(w.create(w.Class.CONTEXT_SPECIFIC,u.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=w.create(w.Class.UNIVERSAL,w.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,d.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var p=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var f=[w.create(w.Class.CONTEXT_SPECIFIC,4,!0,[KE(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,f))}if(t.serialNumber){var m=ft.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var a=t.value.value,h=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),g=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]),u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=ft.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?s=w.oidToDer(w.oidToDer(u.oid)):s=w.oidToDer(s));g.value.push(w.create(w.Class.CONTEXT_SPECIFIC,u.type,!1,s))}h.value.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[g])),a.push(h)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function mZ(t,e){switch(t){case br["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.mgf.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.mgf.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.saltLength).getBytes())])),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,r);default:return w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")}}function wit(t){var e=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,s=w.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===w.Type.UTF8&&(o=ft.util.encodeUtf8(o));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var c=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(i.type).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,s,a,o)])]);e.value.push(c)}return e}var Rit=new Date("1950-01-01T00:00:00Z"),Ait=new Date("2050-01-01T00:00:00Z");function NRe(t){return t>=Rit&&t<Ait?w.create(w.Class.UNIVERSAL,w.Type.UTCTIME,!1,w.dateToUtcTime(t)):w.create(w.Class.UNIVERSAL,w.Type.GENERALIZEDTIME,!1,w.dateToGeneralizedTime(t))}Me.getTBSCertificate=function(t){var e=NRe(t.validity.notBefore),r=NRe(t.validity.notAfter),n=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.version).getBytes())]),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,ft.util.hexToBytes(t.serialNumber)),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.siginfo.algorithmOid).getBytes()),mZ(t.siginfo.algorithmOid,t.siginfo.parameters)]),KE(t.issuer),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,r]),KE(t.subject),Me.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Me.certificateExtensionsToAsn1(t.extensions)),n};Me.getCertificationRequestInfo=function(t){var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.version).getBytes()),KE(t.subject),Me.publicKeyToAsn1(t.publicKey),wit(t)]);return e};Me.distinguishedNameToAsn1=function(t){return KE(t)};Me.certificateToAsn1=function(t){var e=t.tbsCertificate||Me.getTBSCertificate(t);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.signatureOid).getBytes()),mZ(t.signatureOid,t.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.signature)])};Me.certificateExtensionsToAsn1=function(t){var e=w.create(w.Class.CONTEXT_SPECIFIC,3,!0,[]),r=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Me.certificateExtensionToAsn1(t[n]));return e};Me.certificateExtensionToAsn1=function(t){var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);e.value.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.id).getBytes())),t.critical&&e.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=w.toDer(r).getBytes()),e.value.push(w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,r)),e};Me.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Me.getCertificationRequestInfo(t);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.signatureOid).getBytes()),mZ(t.signatureOid,t.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+t.signature)])};Me.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var a=r(s.issuer);return a},e.addCertificate=function(s){if(typeof s=="string"&&(s=ft.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var a=e.certs[s.subject.hash];ft.util.isArray(a)||(a=[a]),a.push(s),e.certs[s.subject.hash]=a}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=ft.pki.certificateFromPem(s));var a=r(s.subject);if(!a)return!1;ft.util.isArray(a)||(a=[a]);for(var c=w.toDer(Me.certificateToAsn1(s)).getBytes(),u=0;u<a.length;++u){var l=w.toDer(Me.certificateToAsn1(a[u])).getBytes();if(c===l)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!ft.util.isArray(c))s.push(c);else for(var u=0;u<c.length;++u)s.push(c[u])}return s},e.removeCertificate=function(s){var a;if(typeof s=="string"&&(s=ft.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var c=r(s.subject);if(!ft.util.isArray(c))return a=e.certs[s.subject.hash],delete e.certs[s.subject.hash],a;for(var u=w.toDer(Me.certificateToAsn1(s)).getBytes(),l=0;l<c.length;++l){var d=w.toDer(Me.certificateToAsn1(c[l])).getBytes();u===d&&(a=c[l],c.splice(l,1))}return c.length===0&&delete e.certs[s.subject.hash],a};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var a=ft.md.sha1.create();s.attributes=Me.RDNAttributesAsArray(KE(s),a),s.hash=a.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Me.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Me.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,s=null,a=0;do{var c=e.shift(),u=null,l=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Me.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(l=!0,u=c),u){var d=u;ft.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){u=d.shift();try{p=u.verify(c)}catch{}}p||(s={message:"Certificate signature is invalid.",error:Me.certificateError.bad_certificate})}s===null&&(!u||l)&&!t.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:Me.certificateError.unknown_ca})}if(s===null&&u&&!c.isIssuer(u)&&(s={message:"Certificate issuer is invalid.",error:Me.certificateError.bad_certificate}),s===null)for(var f={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<c.extensions.length;++m){var h=c.extensions[m];h.critical&&!(h.name in f)&&(s={message:"Certificate has an unsupported critical extension.",error:Me.certificateError.unsupported_certificate})}if(s===null&&(!o||e.length===0&&(!u||l))){var g=c.getExtension("basicConstraints"),v=c.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||g===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Me.certificateError.bad_certificate}),s===null&&g!==null&&!g.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Me.certificateError.bad_certificate}),s===null&&v!==null&&"pathLenConstraint"in g){var b=a-1;b>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Me.certificateError.bad_certificate})}}var y=s===null?!0:s.error,S=r.verify?r.verify(y,a,n):y;if(S===!0)s=null;else throw y===!0&&(s={message:"The application rejected the certificate.",error:Me.certificateError.bad_certificate}),(S||S===0)&&(typeof S=="object"&&!ft.util.isArray(S)?(S.message&&(s.message=S.message),S.error&&(s.error=S.error)):typeof S=="string"&&(s.error=S)),s;o=!1,++a}while(e.length>0);return!0}});var gZ=P((mAr,BRe)=>{var vn=zt();hl();HE();u0();pZ();dZ();yu();lR();zE();Rr();qM();var B=vn.asn1,tr=vn.pki,pR=BRe.exports=vn.pkcs12=vn.pkcs12||{},URe={name:"ContentInfo",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Pit={name:"PFX",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"version"},URe,{name:"PFX.macData",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:B.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},kit={name:"SafeBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Dit={name:"Attribute",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,capture:"values"}]},Nit={name:"CertBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:B.Class.UNIVERSAL,type:B.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function dR(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var s=0;s<t[o].safeBags.length;s++){var a=t[o].safeBags[s];if(!(n!==void 0&&a.type!==n)){if(e===null){i.push(a);continue}a.attributes[e]!==void 0&&a.attributes[e].indexOf(r)>=0&&i.push(a)}}return i}pR.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!B.validate(t,Pit,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var v={},b;return"localKeyId"in g?b=g.localKeyId:"localKeyIdHex"in g&&(b=vn.util.hexToBytes(g.localKeyIdHex)),b===void 0&&!("friendlyName"in g)&&"bagType"in g&&(v[g.bagType]=dR(s.safeContents,null,null,g.bagType)),b!==void 0&&(v.localKeyId=dR(s.safeContents,"localKeyId",b,g.bagType)),"friendlyName"in g&&(v.friendlyName=dR(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),v},getBagsByFriendlyName:function(g,v){return dR(s.safeContents,"friendlyName",g,v)},getBagsByLocalKeyId:function(g,v){return dR(s.safeContents,"localKeyId",g,v)}};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(B.derToOid(n.contentType)!==tr.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=B.derToOid(n.contentType),o}var a=n.content.value[0];if(a.tagClass!==B.Class.UNIVERSAL||a.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=hZ(a),n.mac){var c=null,u=0,l=B.derToOid(n.macAlgorithm);switch(l){case tr.oids.sha1:c=vn.md.sha1.create(),u=20;break;case tr.oids.sha256:c=vn.md.sha256.create(),u=32;break;case tr.oids.sha384:c=vn.md.sha384.create(),u=48;break;case tr.oids.sha512:c=vn.md.sha512.create(),u=64;break;case tr.oids.md5:c=vn.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var d=new vn.util.ByteBuffer(n.macSalt),p="macIterations"in n?parseInt(vn.util.bytesToHex(n.macIterations),16):1,f=pR.generateKey(r,d,3,p,u,c),m=vn.hmac.create();m.start(c,f),m.update(a.value);var h=m.getMac();if(h.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Lit(s,a.value,e,r),s};function hZ(t){if(t.composed||t.constructed){for(var e=vn.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function Lit(t,e,r,n){if(e=B.fromDer(e,r),e.tagClass!==B.Class.UNIVERSAL||e.type!==B.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],s={},a=[];if(!B.validate(o,URe,s,a)){var c=new Error("Cannot read ContentInfo.");throw c.errors=a,c}var u={encrypted:!1},l=null,d=s.content.value[0];switch(B.derToOid(s.contentType)){case tr.oids.data:if(d.tagClass!==B.Class.UNIVERSAL||d.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=hZ(d).value;break;case tr.oids.encryptedData:l=Oit(d,n),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=B.derToOid(s.contentType),c}u.safeBags=Mit(l,r,n),t.safeContents.push(u)}}function Oit(t,e){var r={},n=[];if(!B.validate(t,vn.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=B.derToOid(r.contentType);if(o!==tr.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=B.derToOid(r.encAlgorithm);var s=tr.pbe.getCipher(o,r.encParameter,e),a=hZ(r.encryptedContentAsn1),c=vn.util.createBuffer(a.value);if(s.update(c),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function Mit(t,e,r){if(!e&&t.length===0)return[];if(t=B.fromDer(t,e),t.tagClass!==B.Class.UNIVERSAL||t.type!==B.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],s={},a=[];if(!B.validate(o,kit,s,a)){var c=new Error("Cannot read SafeBag.");throw c.errors=a,c}var u={type:B.derToOid(s.bagId),attributes:Fit(s.bagAttributes)};n.push(u);var l,d,p=s.bagValue.value[0];switch(u.type){case tr.oids.pkcs8ShroudedKeyBag:if(p=tr.decryptPrivateKeyInfo(p,r),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case tr.oids.keyBag:try{u.key=tr.privateKeyFromAsn1(p)}catch{u.key=null,u.asn1=p}continue;case tr.oids.certBag:l=Nit,d=function(){if(B.derToOid(s.certId)!==tr.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=B.derToOid(s.certId),m}var h=B.fromDer(s.cert,e);try{u.cert=tr.certificateFromAsn1(h,!0)}catch{u.cert=null,u.asn1=h}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(l!==void 0&&!B.validate(p,l,s,a)){var c=new Error("Cannot read PKCS#12 "+l.name);throw c.errors=a,c}d()}return n}function Fit(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!B.validate(t[r],Dit,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var s=B.derToOid(n.oid);if(tr.oids[s]!==void 0){e[tr.oids[s]]=[];for(var a=0;a<n.values.length;++a)e[tr.oids[s]].push(n.values[a].value)}}return e}pR.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=vn.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=vn.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=tr.certificateFromPem(s));var a=vn.md.sha1.create();a.update(B.toDer(tr.certificateToAsn1(s)).getBytes()),i=a.digest().getBytes()}else i=vn.random.getBytes(20);var c=[];i!==null&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.localKeyId).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.friendlyName).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(o=B.create(B.Class.UNIVERSAL,B.Type.SET,!0,c));var u=[],l=[];e!==null&&(vn.util.isArray(e)?l=e:l=[e]);for(var d=[],p=0;p<l.length;++p){e=l[p],typeof e=="string"&&(e=tr.certificateFromPem(e));var f=p===0?o:void 0,m=tr.certificateToAsn1(e),h=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.certBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.x509Certificate).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(m).getBytes())])])]),f]);d.push(h)}if(d.length>0){var g=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,d),v=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(g).getBytes())])]);u.push(v)}var b=null;if(t!==null){var y=tr.wrapRsaPrivateKey(tr.privateKeyToAsn1(t));r===null?b=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.keyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[y]),o]):b=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.pkcs8ShroudedKeyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[tr.encryptPrivateKeyInfo(y,r,n)]),o]);var S=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[b]),x=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(S).getBytes())])]);u.push(x)}var T=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,u),L;if(n.useMac){var a=vn.md.sha1.create(),M=new vn.util.ByteBuffer(vn.random.getBytes(n.saltSize)),q=n.count,t=pR.generateKey(r,M,3,q,20),O=vn.hmac.create();O.start(a,t),O.update(B.toDer(T).getBytes());var Z=O.getMac();L=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.sha1).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,Z.getBytes())]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,M.getBytes()),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(q).getBytes())])}return B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(3).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(tr.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(T).getBytes())])]),L])};pR.generateKey=vn.pbe.generatePkcs12Key});var yZ=P((hAr,qRe)=>{var f0=zt();hl();u0();dZ();sb();PM();gZ();FM();lR();Rr();qM();var vZ=f0.asn1,YE=qRe.exports=f0.pki=f0.pki||{};YE.pemToDer=function(t){var e=f0.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return f0.util.createBuffer(e.body)};YE.privateKeyFromPem=function(t){var e=f0.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=vZ.fromDer(e.body);return YE.privateKeyFromAsn1(n)};YE.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:vZ.toDer(YE.privateKeyToAsn1(t)).getBytes()};return f0.pem.encode(r,{maxline:e})};YE.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:vZ.toDer(t).getBytes()};return f0.pem.encode(r,{maxline:e})}});var TZ=P((gAr,KRe)=>{var ge=zt();hl();HE();CM();sb();yZ();yu();zE();Rr();var VM=function(t,e,r,n){var i=ge.util.createBuffer(),o=t.length>>1,s=o+(t.length&1),a=t.substr(0,s),c=t.substr(o,s),u=ge.util.createBuffer(),l=ge.hmac.create();r=e+r;var d=Math.ceil(n/16),p=Math.ceil(n/20);l.start("MD5",a);var f=ge.util.createBuffer();u.putBytes(r);for(var m=0;m<d;++m)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),f.putBuffer(l.digest());l.start("SHA1",c);var h=ge.util.createBuffer();u.clear(),u.putBytes(r);for(var m=0;m<p;++m)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),h.putBuffer(l.digest());return i.putBytes(ge.util.xorBytes(f.getBytes(),h.getBytes(),n)),i},Uit=function(t,e,r){var n=ge.hmac.create();n.start("SHA1",t);var i=ge.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},Bit=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=ge.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},qit=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=ge.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},yc=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return ge.util.createBuffer(t.getBytes(r))},Su=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},A={};A.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};A.SupportedVersions=[A.Versions.TLS_1_1,A.Versions.TLS_1_0];A.Version=A.SupportedVersions[0];A.MaxFragment=15360;A.ConnectionEnd={server:0,client:1};A.PRFAlgorithm={tls_prf_sha256:0};A.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};A.CipherType={stream:0,block:1,aead:2};A.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};A.CompressionMethod={none:0,deflate:1};A.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};A.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};A.Alert={};A.Alert.Level={warning:1,fatal:2};A.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};A.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};A.CipherSuites={};A.getCipherSuite=function(t){var e=null;for(var r in A.CipherSuites){var n=A.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};A.handleUnexpected=function(t,e){var r=!t.open&&t.entity===A.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})};A.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(A.queue(t,A.createAlert(t,{level:A.Alert.Level.warning,description:A.Alert.Description.no_renegotiation})),A.flush(t)),t.process()};A.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===A.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});else{var o=e.fragment,s=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:ge.util.createBuffer(o.getBytes(32)),session_id:yc(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=yc(o,2),n.compression_methods=yc(o,1)),s=r-(s-o.length()),s>0){for(var a=yc(o,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:yc(a,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var u=n.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var l=yc(u.data,2);l.length()>0;){var d=l.getByte();if(d!==0)break;t.session.extensions.server_name.serverNameList.push(yc(l,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=A.getCipherSuite(n.cipher_suite);else for(var p=ge.util.createBuffer(n.cipher_suites.bytes());p.length()>0&&(t.session.cipherSuite=A.getCipherSuite(p.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure},cipherSuite:ge.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=A.CompressionMethod.none}return n};A.createSecurityParameters=function(t,e){var r=t.entity===A.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:A.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:A.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};A.handleServerHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=GRe,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=jit,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.session.id=i,t.process()}};A.handleClientHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=ge.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var s,a=1;a<A.SupportedVersions.length&&(s=A.SupportedVersions[a],!(s.minor<=n.version.minor));++a);t.version={major:s.major,minor:s.minor},t.session.version=t.version}o!==null?(t.expect=SZ,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?Yit:xZ,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.open=!0,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHello(t)})),t.session.resuming?(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.pending=A.createConnectionState(t),t.state.current.write=t.state.pending.write,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))):(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)})),t.fail||(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerKeyExchange(t)})),t.verifyClient!==!1&&A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificateRequest(t)})),A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHelloDone(t)})))),A.flush(t),t.process()}};A.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:yc(n,3)},o,s,a=[];try{for(;i.certificate_list.length()>0;)o=yc(i.certificate_list,3),s=ge.asn1.fromDer(o),o=ge.pki.certificateFromAsn1(s,!0),a.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var c=t.entity===A.ConnectionEnd.client;(c||t.verifyClient===!0)&&a.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}}):a.length===0?t.expect=c?HRe:xZ:(c?t.session.serverCertificate=a[0]:t.session.clientCertificate=a[0],A.verifyCertificateChain(t,a)&&(t.expect=c?HRe:xZ)),t.process()};A.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});t.expect=Git,t.process()};A.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:yc(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=ge.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var a=t.session.clientHelloVersion;if(a.major!==s.pre_master_secret.charCodeAt(0)||a.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=ge.random.getBytes(48)}t.expect=SZ,t.session.clientCertificate!==null&&(t.expect=Qit),t.process()};A.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:yc(n,1),certificate_authorities:yc(n,2)};t.session.certificateRequest=i,t.expect=Vit,t.process()};A.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:yc(n,2).getBytes()},s=ge.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var a=t.session.clientCertificate;if(!a.publicKey.verify(s,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure}})}t.expect=SZ,t.process()};A.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!ge.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)}),A.queue(t,e)),e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createClientKeyExchange(t)}),A.queue(t,e),t.expect=Wit;var s=function(a,c){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&A.queue(a,A.createRecord(a,{type:A.ContentType.handshake,data:A.createCertificateVerify(a,c)})),A.queue(a,A.createRecord(a,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),a.state.pending=A.createConnectionState(a),a.state.current.write=a.state.pending.write,A.queue(a,A.createRecord(a,{type:A.ContentType.handshake,data:A.createFinished(a)})),a.expect=GRe,A.flush(a),a.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);A.getClientSignature(t,s)};A.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var r=t.entity===A.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=A.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?zit:Xit,t.process()};A.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=ge.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===A.ConnectionEnd.client,a=s?"server finished":"client finished",c=t.session.sp,u=12,l=VM;if(n=l(c.master_secret,a,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))),t.expect=s?$it:Jit,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,A.flush(t),t.isConnected=!0,t.connected(t),t.process()};A.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case A.Alert.Description.close_notify:i="Connection closed.";break;case A.Alert.Description.unexpected_message:i="Unexpected message.";break;case A.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case A.Alert.Description.decryption_failed:i="Decryption failed.";break;case A.Alert.Description.record_overflow:i="Record overflow.";break;case A.Alert.Description.decompression_failure:i="Decompression failed.";break;case A.Alert.Description.handshake_failure:i="Handshake failure.";break;case A.Alert.Description.bad_certificate:i="Bad certificate.";break;case A.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case A.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case A.Alert.Description.certificate_expired:i="Certificate expired.";break;case A.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case A.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case A.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case A.Alert.Description.access_denied:i="Access denied.";break;case A.Alert.Description.decode_error:i="Decode error.";break;case A.Alert.Description.decrypt_error:i="Decrypt error.";break;case A.Alert.Description.export_restriction:i="Export restriction.";break;case A.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case A.Alert.Description.insufficient_security:i="Insufficient security.";break;case A.Alert.Description.internal_error:i="Internal error.";break;case A.Alert.Description.user_canceled:i="User canceled.";break;case A.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===A.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===A.ConnectionEnd.client?"server":"client",alert:n}),t.process()};A.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=ge.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in GM[t.entity][t.expect]?(t.entity===A.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ge.md.md5.create(),sha1:ge.md.sha1.create()}),n!==A.HandshakeType.hello_request&&n!==A.HandshakeType.certificate_verify&&n!==A.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),GM[t.entity][t.expect][n](t,e,i)):A.handleUnexpected(t,e)};A.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};A.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===A.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();A.queue(t,A.createRecord(t,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_response,o)})),A.flush(t)}else if(n===A.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,ge.util.createBuffer(o))}t.process()};var Hit=0,jit=1,HRe=2,Git=3,Vit=4,GRe=5,zit=6,$it=7,Wit=8,Kit=0,Yit=1,xZ=2,Qit=3,SZ=4,Xit=5,Jit=6,R=A.handleUnexpected,VRe=A.handleChangeCipherSpec,os=A.handleAlert,sa=A.handleHandshake,zRe=A.handleApplicationData,ss=A.handleHeartbeat,EZ=[];EZ[A.ConnectionEnd.client]=[[R,os,sa,R,ss],[R,os,sa,R,ss],[R,os,sa,R,ss],[R,os,sa,R,ss],[R,os,sa,R,ss],[VRe,os,R,R,ss],[R,os,sa,R,ss],[R,os,sa,zRe,ss],[R,os,sa,R,ss]];EZ[A.ConnectionEnd.server]=[[R,os,sa,R,ss],[R,os,sa,R,ss],[R,os,sa,R,ss],[R,os,sa,R,ss],[VRe,os,R,R,ss],[R,os,sa,R,ss],[R,os,sa,zRe,ss],[R,os,sa,R,ss]];var m0=A.handleHelloRequest,Zit=A.handleServerHello,$Re=A.handleCertificate,jRe=A.handleServerKeyExchange,bZ=A.handleCertificateRequest,HM=A.handleServerHelloDone,WRe=A.handleFinished,GM=[];GM[A.ConnectionEnd.client]=[[R,R,Zit,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[m0,R,R,R,R,R,R,R,R,R,R,$Re,jRe,bZ,HM,R,R,R,R,R,R],[m0,R,R,R,R,R,R,R,R,R,R,R,jRe,bZ,HM,R,R,R,R,R,R],[m0,R,R,R,R,R,R,R,R,R,R,R,R,bZ,HM,R,R,R,R,R,R],[m0,R,R,R,R,R,R,R,R,R,R,R,R,R,HM,R,R,R,R,R,R],[m0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[m0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,WRe],[m0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[m0,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];var eot=A.handleClientHello,tot=A.handleClientKeyExchange,rot=A.handleCertificateVerify;GM[A.ConnectionEnd.server]=[[R,eot,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,$Re,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,tot,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,rot,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,WRe],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];A.generateKeys=function(t,e){var r=VM,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===A.Versions.TLS_1_0.major&&t.version.minor===A.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),a={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return o&&(a.client_write_IV=s.getBytes(e.fixed_iv_length),a.server_write_IV=s.getBytes(e.fixed_iv_length)),a};A.createConnectionState=function(t){var e=t.entity===A.ConnectionEnd.client,r=function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]}};return o},n={read:r(),write:r()};if(n.read.update=function(o,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(o,s,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,s){return n.write.compressFunction(o,s,n.write)?n.write.cipherFunction(s,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=A.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case A.CompressionMethod.none:break;case A.CompressionMethod.deflate:n.read.compressFunction=qit,n.write.compressFunction=Bit;break;default:throw new Error("Unsupported compression algorithm.")}}return n};A.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=ge.util.createBuffer();return r.putInt32(e),r.putBytes(ge.random.getBytes(28)),r};A.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};A.createAlert=function(t,e){var r=ge.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),A.createRecord(t,{type:A.ContentType.alert,data:r})};A.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=ge.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=ge.util.createBuffer();o.putByte(A.CompressionMethod.none);var s=o.length(),a=ge.util.createBuffer();if(t.virtualHost){var c=ge.util.createBuffer();c.putByte(0),c.putByte(0);var u=ge.util.createBuffer();u.putByte(0),Su(u,2,ge.util.createBuffer(t.virtualHost));var l=ge.util.createBuffer();Su(l,2,u),Su(c,2,l),a.putBuffer(c)}var d=a.length();d>0&&(d+=2);var p=t.session.id,f=p.length+1+2+4+28+2+i+1+s+d,m=ge.util.createBuffer();return m.putByte(A.HandshakeType.client_hello),m.putInt24(f),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),Su(m,1,ge.util.createBuffer(p)),Su(m,2,e),Su(m,1,o),d>0&&Su(m,2,a),m};A.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=ge.util.createBuffer();return n.putByte(A.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Su(n,1,ge.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};A.createCertificate=function(t){var e=t.entity===A.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=ge.util.createBuffer();if(r!==null)try{ge.util.isArray(r)||(r=[r]);for(var o=null,s=0;s<r.length;++s){var a=ge.pem.decode(r[s])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=a.type,c}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=ge.util.createBuffer(a.body);o===null&&(o=ge.asn1.fromDer(u.bytes(),!1));var l=ge.util.createBuffer();Su(l,3,u),i.putBuffer(l)}r=ge.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(f){return t.error(t,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var d=3+i.length(),p=ge.util.createBuffer();return p.putByte(A.HandshakeType.certificate),p.putInt24(d),Su(p,3,i),p};A.createClientKeyExchange=function(t){var e=ge.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(ge.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=ge.util.createBuffer();return o.putByte(A.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};A.createServerKeyExchange=function(t){var e=0,r=ge.util.createBuffer();return e>0&&(r.putByte(A.HandshakeType.server_key_exchange),r.putInt24(e)),r};A.getClientSignature=function(t,e){var r=ge.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=ge.pki.privateKeyFromPem(s)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):i=s.sign(i,null),o(n,i)},t.getSignature(t,r,e)};A.createCertificateVerify=function(t,e){var r=e.length+2,n=ge.util.createBuffer();return n.putByte(A.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};A.createCertificateRequest=function(t){var e=ge.util.createBuffer();e.putByte(1);var r=ge.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=ge.pki.distinguishedNameToAsn1(i.subject),s=ge.asn1.toDer(o);r.putInt16(s.length()),r.putBuffer(s)}var a=1+e.length()+2+r.length(),c=ge.util.createBuffer();return c.putByte(A.HandshakeType.certificate_request),c.putInt24(a),Su(c,1,e),Su(c,2,r),c};A.createServerHelloDone=function(t){var e=ge.util.createBuffer();return e.putByte(A.HandshakeType.server_hello_done),e.putInt24(0),e};A.createChangeCipherSpec=function(){var t=ge.util.createBuffer();return t.putByte(1),t};A.createFinished=function(t){var e=ge.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===A.ConnectionEnd.client,n=t.session.sp,i=12,o=VM,s=r?"client finished":"server finished";e=o(n.master_secret,s,e.getBytes(),i);var a=ge.util.createBuffer();return a.putByte(A.HandshakeType.finished),a.putInt24(e.length()),a.putBuffer(e),a};A.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=ge.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(ge.random.getBytes(o)),n};A.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===A.ContentType.handshake||e.type===A.ContentType.alert||e.type===A.ContentType.change_cipher_spec))){if(e.type===A.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=A.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>A.MaxFragment;)n.push(A.createRecord(t,{type:e.type,data:ge.util.createBuffer(i.slice(0,A.MaxFragment))})),i=i.slice(A.MaxFragment);i.length>0&&n.push(A.createRecord(t,{type:e.type,data:ge.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var s=n[o],a=t.state.current.write;a.update(t,s)&&t.records.push(s)}}};A.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var _Z=function(t){switch(t){case!0:return!0;case ge.pki.certificateError.bad_certificate:return A.Alert.Description.bad_certificate;case ge.pki.certificateError.unsupported_certificate:return A.Alert.Description.unsupported_certificate;case ge.pki.certificateError.certificate_revoked:return A.Alert.Description.certificate_revoked;case ge.pki.certificateError.certificate_expired:return A.Alert.Description.certificate_expired;case ge.pki.certificateError.certificate_unknown:return A.Alert.Description.certificate_unknown;case ge.pki.certificateError.unknown_ca:return A.Alert.Description.unknown_ca;default:return A.Alert.Description.bad_certificate}},not=function(t){switch(t){case!0:return!0;case A.Alert.Description.bad_certificate:return ge.pki.certificateError.bad_certificate;case A.Alert.Description.unsupported_certificate:return ge.pki.certificateError.unsupported_certificate;case A.Alert.Description.certificate_revoked:return ge.pki.certificateError.certificate_revoked;case A.Alert.Description.certificate_expired:return ge.pki.certificateError.certificate_expired;case A.Alert.Description.certificate_unknown:return ge.pki.certificateError.certificate_unknown;case A.Alert.Description.unknown_ca:return ge.pki.certificateError.unknown_ca;default:return ge.pki.certificateError.bad_certificate}};A.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,s,a){var c=_Z(o),u=t.verify(t,o,s,a);if(u!==!0){if(typeof u=="object"&&!ge.util.isArray(u)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate},u.message&&(l.message=u.message),u.alert&&(l.alert.description=u.alert),l}u!==o&&(u=not(u))}return u},ge.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||ge.util.isArray(i))&&(i={send:!0,alert:{level:A.Alert.Level.fatal,description:_Z(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:A.Alert.Level.fatal,description:_Z(i.error)}),t.error(t,i)}return!t.fail};A.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,s=null;if(i?s=ge.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){o=r.cache[s],delete r.cache[s];for(var a in r.order)if(r.order[a]===s){r.order.splice(a,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=ge.util.bytesToHex(i);r.order.push(s),r.cache[s]=o}}return r};A.createConnection=function(t){var e=null;t.caStore?ge.util.isArray(t.caStore)?e=ge.pki.createCaStore(t.caStore):e=t.caStore:e=ge.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in A.CipherSuites)r.push(A.CipherSuites[n])}var i=t.server?A.ConnectionEnd.server:A.ConnectionEnd.client,o=t.sessionCache?A.createSessionCache(t.sessionCache):null,s={version:{major:A.Version.major,minor:A.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(l,d,p,f){return d},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:ge.util.createBuffer(),tlsData:ge.util.createBuffer(),data:ge.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(l,d){d.origin=d.origin||(l.entity===A.ConnectionEnd.client?"client":"server"),d.send&&(A.queue(l,A.createAlert(l,d.alert)),A.flush(l));var p=d.fatal!==!1;p&&(l.fail=!0),t.error(l,d),p&&l.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(l){s.version={major:A.Version.major,minor:A.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===A.ConnectionEnd.client?Hit:Kit,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=A.createConnectionState(s)},s.reset();var a=function(l,d){var p=d.type-A.ContentType.change_cipher_spec,f=EZ[l.entity][l.expect];p in f?f[p](l,d):A.handleUnexpected(l,d)},c=function(l){var d=0,p=l.input,f=p.length();if(f<5)d=5-f;else{l.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:ge.util.createBuffer(),ready:!1};var m=l.record.version.major===l.version.major;m&&l.session&&l.session.version&&(m=l.record.version.minor===l.version.minor),m||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}})}return d},u=function(l){var d=0,p=l.input,f=p.length();if(f<l.record.length)d=l.record.length-f;else{l.record.fragment.putBytes(p.getBytes(l.record.length)),p.compact();var m=l.state.current.read;m.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})),l.record.ready=!0)}return d};return s.handshake=function(l){if(s.entity!==A.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var d=null;l.length>0&&(s.sessionCache&&(d=s.sessionCache.getSession(l)),d===null&&(l="")),l.length===0&&s.sessionCache&&(d=s.sessionCache.getSession(),d!==null&&(l=d.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ge.md.md5.create(),sha1:ge.md.sha1.create()},d&&(s.version=d.version,s.session.sp=d.sp),s.session.sp.client_random=A.createRandom().getBytes(),s.open=!0,A.queue(s,A.createRecord(s,{type:A.ContentType.handshake,data:A.createClientHello(s)})),A.flush(s)}},s.process=function(l){var d=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(d=c(s)),!s.fail&&s.record!==null&&!s.record.ready&&(d=u(s)),!s.fail&&s.record!==null&&s.record.ready&&a(s,s.record)),d},s.prepare=function(l){return A.queue(s,A.createRecord(s,{type:A.ContentType.application_data,data:ge.util.createBuffer(l)})),A.flush(s)},s.prepareHeartbeatRequest=function(l,d){return l instanceof ge.util.ByteBuffer&&(l=l.bytes()),typeof d>"u"&&(d=l.length),s.expectedHeartbeatPayload=l,A.queue(s,A.createRecord(s,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_request,l,d)})),A.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var d={id:s.session.id,version:s.session.version,sp:s.session.sp};d.sp.keys=null,s.sessionCache.setSession(d.id,d)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,A.queue(s,A.createAlert(s,{level:A.Alert.Level.warning,description:A.Alert.Description.close_notify})),A.flush(s)),s.closed(s)),s.reset(l)},s};KRe.exports=ge.tls=ge.tls||{};for(jM in A)typeof A[jM]!="function"&&(ge.tls[jM]=A[jM]);var jM;ge.tls.prf_tls1=VM;ge.tls.hmac_sha1=Uit;ge.tls.createSessionCache=A.createSessionCache;ge.tls.createConnection=A.createConnection});var XRe=P((vAr,QRe)=>{var h0=zt();c0();TZ();var Eu=QRe.exports=h0.tls;Eu.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=Eu.BulkCipherAlgorithm.aes,t.cipher_type=Eu.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Eu.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:YRe};Eu.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=Eu.BulkCipherAlgorithm.aes,t.cipher_type=Eu.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Eu.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:YRe};function YRe(t,e,r){var n=e.entity===h0.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:h0.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:h0.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=aot,t.write.cipherFunction=iot,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Eu.hmac_sha1}function iot(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Eu.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=h0.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Eu.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(oot)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}function oot(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function sot(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),s=i-1-o;s<i-1;++s)n=n&&e.at(s)==o;n&&e.truncate(o+1)}return n}function aot(t,e){var r=!1,n;t.version.minor===Eu.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(sot);var o=e.macLength,s=h0.random.getBytesSync(o),a=i.output.length();a>=o?(t.fragment=i.output.getBytes(a-o),s=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=h0.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=cot(e.macKey,s,c)&&r,r}function cot(t,e,r){var n=h0.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var wZ=P((yAr,tAe)=>{var Rn=zt();ip();Rr();var fR=tAe.exports=Rn.sha512=Rn.sha512||{};Rn.md.sha512=Rn.md.algorithms.sha512=fR;var ZRe=Rn.sha384=Rn.sha512.sha384=Rn.sha512.sha384||{};ZRe.create=function(){return fR.create("SHA-384")};Rn.md.sha384=Rn.md.algorithms.sha384=ZRe;Rn.sha512.sha256=Rn.sha512.sha256||{create:function(){return fR.create("SHA-512/256")}};Rn.md["sha512/256"]=Rn.md.algorithms["sha512/256"]=Rn.sha512.sha256;Rn.sha512.sha224=Rn.sha512.sha224||{create:function(){return fR.create("SHA-512/224")}};Rn.md["sha512/224"]=Rn.md.algorithms["sha512/224"]=Rn.sha512.sha224;fR.create=function(t){if(eAe||uot(),typeof t>"u"&&(t="SHA-512"),!(t in pb))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=pb[t],r=null,n=Rn.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=Rn.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=Rn.util.encodeUtf8(c));var l=c.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=l[1],l[1]=l[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(c),JRe(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Rn.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=u&a.blockLength-1;c.putBytes(IZ.substr(0,a.blockLength-l));for(var d,p,f=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)d=a.fullMessageLength[m+1]*8,p=d/4294967296>>>0,f+=p,c.putInt32(f>>>0),f=d>>>0;c.putInt32(f);for(var h=new Array(r.length),m=0;m<r.length;++m)h[m]=r[m].slice(0);JRe(h,i,c);var g=Rn.util.createBuffer(),v;t==="SHA-512"?v=h.length:t==="SHA-384"?v=h.length-2:v=h.length-4;for(var m=0;m<v;++m)g.putInt32(h[m][0]),(m!==v-1||t!=="SHA-512/224")&&g.putInt32(h[m][1]);return g},a};var IZ=null,eAe=!1,CZ=null,pb=null;function uot(){IZ="\x80",IZ+=Rn.util.fillString("\0",128),CZ=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],pb={},pb["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],pb["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],pb["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],pb["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],eAe=!0}function JRe(t,e,r){for(var n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,b,y,S,x,T,L,M,q,O,Z,z,D,E,k,F,N,te,pe,ne,se,ze=r.length();ze>=128;){for(k=0;k<16;++k)e[k][0]=r.getInt32()>>>0,e[k][1]=r.getInt32()>>>0;for(;k<80;++k)te=e[k-2],F=te[0],N=te[1],n=((F>>>19|N<<13)^(N>>>29|F<<3)^F>>>6)>>>0,i=((F<<13|N>>>19)^(N<<3|F>>>29)^(F<<26|N>>>6))>>>0,ne=e[k-15],F=ne[0],N=ne[1],o=((F>>>1|N<<31)^(F>>>8|N<<24)^F>>>7)>>>0,s=((F<<31|N>>>1)^(F<<24|N>>>8)^(F<<25|N>>>7))>>>0,pe=e[k-7],se=e[k-16],N=i+pe[1]+s+se[1],e[k][0]=n+pe[0]+o+se[0]+(N/4294967296>>>0)>>>0,e[k][1]=N>>>0;for(h=t[0][0],g=t[0][1],v=t[1][0],b=t[1][1],y=t[2][0],S=t[2][1],x=t[3][0],T=t[3][1],L=t[4][0],M=t[4][1],q=t[5][0],O=t[5][1],Z=t[6][0],z=t[6][1],D=t[7][0],E=t[7][1],k=0;k<80;++k)u=((L>>>14|M<<18)^(L>>>18|M<<14)^(M>>>9|L<<23))>>>0,l=((L<<18|M>>>14)^(L<<14|M>>>18)^(M<<23|L>>>9))>>>0,d=(Z^L&(q^Z))>>>0,p=(z^M&(O^z))>>>0,a=((h>>>28|g<<4)^(g>>>2|h<<30)^(g>>>7|h<<25))>>>0,c=((h<<4|g>>>28)^(g<<30|h>>>2)^(g<<25|h>>>7))>>>0,f=(h&v|y&(h^v))>>>0,m=(g&b|S&(g^b))>>>0,N=E+l+p+CZ[k][1]+e[k][1],n=D+u+d+CZ[k][0]+e[k][0]+(N/4294967296>>>0)>>>0,i=N>>>0,N=c+m,o=a+f+(N/4294967296>>>0)>>>0,s=N>>>0,D=Z,E=z,Z=q,z=O,q=L,O=M,N=T+i,L=x+n+(N/4294967296>>>0)>>>0,M=N>>>0,x=y,T=S,y=v,S=b,v=h,b=g,N=i+s,h=n+o+(N/4294967296>>>0)>>>0,g=N>>>0;N=t[0][1]+g,t[0][0]=t[0][0]+h+(N/4294967296>>>0)>>>0,t[0][1]=N>>>0,N=t[1][1]+b,t[1][0]=t[1][0]+v+(N/4294967296>>>0)>>>0,t[1][1]=N>>>0,N=t[2][1]+S,t[2][0]=t[2][0]+y+(N/4294967296>>>0)>>>0,t[2][1]=N>>>0,N=t[3][1]+T,t[3][0]=t[3][0]+x+(N/4294967296>>>0)>>>0,t[3][1]=N>>>0,N=t[4][1]+M,t[4][0]=t[4][0]+L+(N/4294967296>>>0)>>>0,t[4][1]=N>>>0,N=t[5][1]+O,t[5][0]=t[5][0]+q+(N/4294967296>>>0)>>>0,t[5][1]=N>>>0,N=t[6][1]+z,t[6][0]=t[6][0]+Z+(N/4294967296>>>0)>>>0,t[6][1]=N>>>0,N=t[7][1]+E,t[7][0]=t[7][0]+D+(N/4294967296>>>0)>>>0,t[7][1]=N>>>0,ze-=128}}});var rAe=P(RZ=>{var lot=zt();hl();var Oo=lot.asn1;RZ.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};RZ.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Oo.Class.UNIVERSAL,type:Oo.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var hAe=P((_Ar,mAe)=>{var as=zt();uR();yu();wZ();Rr();var cAe=rAe(),dot=cAe.publicKeyValidator,pot=cAe.privateKeyValidator;typeof nAe>"u"&&(nAe=as.jsbn.BigInteger);var nAe,kZ=as.util.ByteBuffer,Wa=typeof Buffer>"u"?Uint8Array:Buffer;as.pki=as.pki||{};mAe.exports=as.pki.ed25519=as.ed25519=as.ed25519||{};var rr=as.ed25519;rr.constants={};rr.constants.PUBLIC_KEY_BYTE_LENGTH=32;rr.constants.PRIVATE_KEY_BYTE_LENGTH=64;rr.constants.SEED_BYTE_LENGTH=32;rr.constants.SIGN_BYTE_LENGTH=64;rr.constants.HASH_BYTE_LENGTH=64;rr.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=as.random.getBytesSync(rr.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==rr.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+rr.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Zf({message:e,encoding:"binary"});for(var r=new Wa(rr.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Wa(rr.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return got(r,n),{publicKey:r,privateKey:n}};rr.privateKeyFromAsn1=function(t){var e={},r=[],n=as.asn1.validate(t,pot,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=as.asn1.derToOid(e.privateKeyOid),s=as.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.privateKey,c=Zf({message:as.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:c}};rr.publicKeyFromAsn1=function(t){var e={},r=[],n=as.asn1.validate(t,dot,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=as.asn1.derToOid(e.publicKeyOid),s=as.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.ed25519PublicKey;if(a.length!==rr.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Zf({message:a,encoding:"binary"})};rr.publicKeyFromPrivateKey=function(t){t=t||{};var e=Zf({message:t.privateKey,encoding:"binary"});if(e.length!==rr.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+rr.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Wa(rr.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};rr.sign=function(t){t=t||{};var e=Zf(t),r=Zf({message:t.privateKey,encoding:"binary"});if(r.length===rr.constants.SEED_BYTE_LENGTH){var n=rr.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==rr.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+rr.constants.SEED_BYTE_LENGTH+" or "+rr.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Wa(rr.constants.SIGN_BYTE_LENGTH+e.length);vot(i,e,e.length,r);for(var o=new Wa(rr.constants.SIGN_BYTE_LENGTH),s=0;s<o.length;++s)o[s]=i[s];return o};rr.verify=function(t){t=t||{};var e=Zf(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Zf({message:t.signature,encoding:"binary"});if(r.length!==rr.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+rr.constants.SIGN_BYTE_LENGTH);var n=Zf({message:t.publicKey,encoding:"binary"});if(n.length!==rr.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+rr.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Wa(rr.constants.SIGN_BYTE_LENGTH+e.length),o=new Wa(rr.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<rr.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+rr.constants.SIGN_BYTE_LENGTH]=e[s];return yot(o,i,i.length,n)>=0};function Zf(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Wa)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new kZ(e,r)}else if(!(e instanceof kZ))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Wa(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var DZ=bt(),zM=bt([1]),fot=bt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),mot=bt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),iAe=bt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),oAe=bt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),AZ=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),hot=bt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function mR(t,e){var r=as.md.sha512.create(),n=new kZ(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Wa(rr.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)o[s]=i.charCodeAt(s);return o}function got(t,e){var r=[bt(),bt(),bt(),bt()],n,i=mR(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,MZ(r,i),OZ(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function vot(t,e,r,n){var i,o,s=new Float64Array(64),a=[bt(),bt(),bt(),bt()],c=mR(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var l=mR(t.subarray(32),r+32);for(NZ(l),MZ(a,l),OZ(t,a),i=32;i<64;++i)t[i]=n[i];var d=mR(t,r+64);for(NZ(d),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=l[i];for(i=0;i<32;++i)for(o=0;o<32;o++)s[i+o]+=d[i]*c[o];return uAe(t.subarray(32),s),u}function yot(t,e,r,n){var i,o,s=new Wa(32),a=[bt(),bt(),bt(),bt()],c=[bt(),bt(),bt(),bt()];if(o=-1,r<64||bot(c,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=mR(t,r);if(NZ(u),pAe(a,c,u),MZ(c,e.subarray(32)),LZ(a,c),OZ(s,a),r-=64,lAe(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}function uAe(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*AZ[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*AZ[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*AZ[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function NZ(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;uAe(t,e)}function LZ(t,e){var r=bt(),n=bt(),i=bt(),o=bt(),s=bt(),a=bt(),c=bt(),u=bt(),l=bt();XE(r,t[1],t[0]),XE(l,e[1],e[0]),an(r,r,l),QE(n,t[0],t[1]),QE(l,e[0],e[1]),an(n,n,l),an(i,t[3],e[3]),an(i,i,mot),an(o,t[2],e[2]),QE(o,o,o),XE(s,n,r),XE(a,o,i),QE(c,o,i),QE(u,n,r),an(t[0],s,a),an(t[1],u,c),an(t[2],c,a),an(t[3],s,u)}function sAe(t,e,r){for(var n=0;n<4;++n)fAe(t[n],e[n],r)}function OZ(t,e){var r=bt(),n=bt(),i=bt();Eot(i,e[2]),an(r,e[0],i),an(n,e[1],i),$M(t,n),t[31]^=dAe(r)<<7}function $M(t,e){var r,n,i,o=bt(),s=bt();for(r=0;r<16;++r)s[r]=e[r];for(PZ(s),PZ(s),PZ(s),n=0;n<2;++n){for(o[0]=s[0]-65517,r=1;r<15;++r)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,fAe(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function bot(t,e){var r=bt(),n=bt(),i=bt(),o=bt(),s=bt(),a=bt(),c=bt();return g0(t[2],zM),_ot(t[1],e),fb(i,t[1]),an(o,i,fot),XE(i,i,t[2]),QE(o,t[2],o),fb(s,o),fb(a,s),an(c,a,s),an(r,c,i),an(r,r,o),xot(r,r),an(r,r,i),an(r,r,o),an(r,r,o),an(t[0],r,o),fb(n,t[0]),an(n,n,o),aAe(n,i)&&an(t[0],t[0],hot),fb(n,t[0]),an(n,n,o),aAe(n,i)?-1:(dAe(t[0])===e[31]>>7&&XE(t[0],DZ,t[0]),an(t[3],t[0],t[1]),0)}function _ot(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function xot(t,e){var r=bt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)fb(r,r),n!==1&&an(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function aAe(t,e){var r=new Wa(32),n=new Wa(32);return $M(r,t),$M(n,e),lAe(r,0,n,0)}function lAe(t,e,r,n){return Sot(t,e,r,n,32)}function Sot(t,e,r,n,i){var o,s=0;for(o=0;o<i;++o)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function dAe(t){var e=new Wa(32);return $M(e,t),e[0]&1}function pAe(t,e,r){var n,i;for(g0(t[0],DZ),g0(t[1],zM),g0(t[2],zM),g0(t[3],DZ),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,sAe(t,e,n),LZ(e,t),LZ(t,t),sAe(t,e,n)}function MZ(t,e){var r=[bt(),bt(),bt(),bt()];g0(r[0],iAe),g0(r[1],oAe),g0(r[2],zM),an(r[3],iAe,oAe),pAe(t,r,e)}function g0(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function Eot(t,e){var r=bt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)fb(r,r),n!==2&&n!==4&&an(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function PZ(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function fAe(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function bt(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function QE(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function XE(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function fb(t,e){an(t,e,e)}function an(t,e,r){var n,i,o=0,s=0,a=0,c=0,u=0,l=0,d=0,p=0,f=0,m=0,h=0,g=0,v=0,b=0,y=0,S=0,x=0,T=0,L=0,M=0,q=0,O=0,Z=0,z=0,D=0,E=0,k=0,F=0,N=0,te=0,pe=0,ne=r[0],se=r[1],ze=r[2],J=r[3],ut=r[4],He=r[5],yt=r[6],ur=r[7],fe=r[8],Ye=r[9],U=r[10],ie=r[11],ae=r[12],Te=r[13],ve=r[14],Qe=r[15];n=e[0],o+=n*ne,s+=n*se,a+=n*ze,c+=n*J,u+=n*ut,l+=n*He,d+=n*yt,p+=n*ur,f+=n*fe,m+=n*Ye,h+=n*U,g+=n*ie,v+=n*ae,b+=n*Te,y+=n*ve,S+=n*Qe,n=e[1],s+=n*ne,a+=n*se,c+=n*ze,u+=n*J,l+=n*ut,d+=n*He,p+=n*yt,f+=n*ur,m+=n*fe,h+=n*Ye,g+=n*U,v+=n*ie,b+=n*ae,y+=n*Te,S+=n*ve,x+=n*Qe,n=e[2],a+=n*ne,c+=n*se,u+=n*ze,l+=n*J,d+=n*ut,p+=n*He,f+=n*yt,m+=n*ur,h+=n*fe,g+=n*Ye,v+=n*U,b+=n*ie,y+=n*ae,S+=n*Te,x+=n*ve,T+=n*Qe,n=e[3],c+=n*ne,u+=n*se,l+=n*ze,d+=n*J,p+=n*ut,f+=n*He,m+=n*yt,h+=n*ur,g+=n*fe,v+=n*Ye,b+=n*U,y+=n*ie,S+=n*ae,x+=n*Te,T+=n*ve,L+=n*Qe,n=e[4],u+=n*ne,l+=n*se,d+=n*ze,p+=n*J,f+=n*ut,m+=n*He,h+=n*yt,g+=n*ur,v+=n*fe,b+=n*Ye,y+=n*U,S+=n*ie,x+=n*ae,T+=n*Te,L+=n*ve,M+=n*Qe,n=e[5],l+=n*ne,d+=n*se,p+=n*ze,f+=n*J,m+=n*ut,h+=n*He,g+=n*yt,v+=n*ur,b+=n*fe,y+=n*Ye,S+=n*U,x+=n*ie,T+=n*ae,L+=n*Te,M+=n*ve,q+=n*Qe,n=e[6],d+=n*ne,p+=n*se,f+=n*ze,m+=n*J,h+=n*ut,g+=n*He,v+=n*yt,b+=n*ur,y+=n*fe,S+=n*Ye,x+=n*U,T+=n*ie,L+=n*ae,M+=n*Te,q+=n*ve,O+=n*Qe,n=e[7],p+=n*ne,f+=n*se,m+=n*ze,h+=n*J,g+=n*ut,v+=n*He,b+=n*yt,y+=n*ur,S+=n*fe,x+=n*Ye,T+=n*U,L+=n*ie,M+=n*ae,q+=n*Te,O+=n*ve,Z+=n*Qe,n=e[8],f+=n*ne,m+=n*se,h+=n*ze,g+=n*J,v+=n*ut,b+=n*He,y+=n*yt,S+=n*ur,x+=n*fe,T+=n*Ye,L+=n*U,M+=n*ie,q+=n*ae,O+=n*Te,Z+=n*ve,z+=n*Qe,n=e[9],m+=n*ne,h+=n*se,g+=n*ze,v+=n*J,b+=n*ut,y+=n*He,S+=n*yt,x+=n*ur,T+=n*fe,L+=n*Ye,M+=n*U,q+=n*ie,O+=n*ae,Z+=n*Te,z+=n*ve,D+=n*Qe,n=e[10],h+=n*ne,g+=n*se,v+=n*ze,b+=n*J,y+=n*ut,S+=n*He,x+=n*yt,T+=n*ur,L+=n*fe,M+=n*Ye,q+=n*U,O+=n*ie,Z+=n*ae,z+=n*Te,D+=n*ve,E+=n*Qe,n=e[11],g+=n*ne,v+=n*se,b+=n*ze,y+=n*J,S+=n*ut,x+=n*He,T+=n*yt,L+=n*ur,M+=n*fe,q+=n*Ye,O+=n*U,Z+=n*ie,z+=n*ae,D+=n*Te,E+=n*ve,k+=n*Qe,n=e[12],v+=n*ne,b+=n*se,y+=n*ze,S+=n*J,x+=n*ut,T+=n*He,L+=n*yt,M+=n*ur,q+=n*fe,O+=n*Ye,Z+=n*U,z+=n*ie,D+=n*ae,E+=n*Te,k+=n*ve,F+=n*Qe,n=e[13],b+=n*ne,y+=n*se,S+=n*ze,x+=n*J,T+=n*ut,L+=n*He,M+=n*yt,q+=n*ur,O+=n*fe,Z+=n*Ye,z+=n*U,D+=n*ie,E+=n*ae,k+=n*Te,F+=n*ve,N+=n*Qe,n=e[14],y+=n*ne,S+=n*se,x+=n*ze,T+=n*J,L+=n*ut,M+=n*He,q+=n*yt,O+=n*ur,Z+=n*fe,z+=n*Ye,D+=n*U,E+=n*ie,k+=n*ae,F+=n*Te,N+=n*ve,te+=n*Qe,n=e[15],S+=n*ne,x+=n*se,T+=n*ze,L+=n*J,M+=n*ut,q+=n*He,O+=n*yt,Z+=n*ur,z+=n*fe,D+=n*Ye,E+=n*U,k+=n*ie,F+=n*ae,N+=n*Te,te+=n*ve,pe+=n*Qe,o+=38*x,s+=38*T,a+=38*L,c+=38*M,u+=38*q,l+=38*O,d+=38*Z,p+=38*z,f+=38*D,m+=38*E,h+=38*k,g+=38*F,v+=38*N,b+=38*te,y+=38*pe,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=d,t[7]=p,t[8]=f,t[9]=m,t[10]=h,t[11]=g,t[12]=v,t[13]=b,t[14]=y,t[15]=S}});var bAe=P((xAr,yAe)=>{var bc=zt();Rr();yu();uR();yAe.exports=bc.kem=bc.kem||{};var gAe=bc.jsbn.BigInteger;bc.kem.rsa={};bc.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||bc.random,n={};return n.encrypt=function(i,o){var s=Math.ceil(i.n.bitLength()/8),a;do a=new gAe(bc.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(a.compareTo(gAe.ONE)<=0);a=bc.util.hexToBytes(a.toString(16));var c=s-a.length;c>0&&(a=bc.util.fillString("\0",c)+a);var u=i.encrypt(a,"NONE"),l=t.generate(a,o);return{encapsulation:u,key:l}},n.decrypt=function(i,o,s){var a=i.decrypt(o,"NONE");return t.generate(a,s)},n};bc.kem.kdf1=function(t,e){vAe(this,t,0,e||t.digestLength)};bc.kem.kdf2=function(t,e){vAe(this,t,1,e||t.digestLength)};function vAe(t,e,r,n){t.generate=function(i,o){for(var s=new bc.util.ByteBuffer,a=Math.ceil(o/n)+r,c=new bc.util.ByteBuffer,u=r;u<a;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var l=e.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-o),s.getBytes()}}});var EAe=P((SAr,SAe)=>{var cr=zt();Rr();SAe.exports=cr.log=cr.log||{};cr.log.levels=["none","error","warning","info","debug","verbose","max"];var WM={},BZ=[],gR=null;cr.log.LEVEL_LOCKED=2;cr.log.NO_LEVEL_CHECK=4;cr.log.INTERPOLATE=8;for(pp=0;pp<cr.log.levels.length;++pp)FZ=cr.log.levels[pp],WM[FZ]={index:pp,name:FZ.toUpperCase()};var FZ,pp;cr.log.logMessage=function(t){for(var e=WM[t.level].index,r=0;r<BZ.length;++r){var n=BZ[r];if(n.flags&cr.log.NO_LEVEL_CHECK)n.f(t);else{var i=WM[n.level].index;e<=i&&n.f(n,t)}}};cr.log.prepareStandard=function(t){"standard"in t||(t.standard=WM[t.level].name+" ["+t.category+"] "+t.message)};cr.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=cr.util.format.apply(this,e)}};cr.log.prepareStandardFull=function(t){"standardFull"in t||(cr.log.prepareStandard(t),t.standardFull=t.standard)};for(UZ=["error","warning","info","debug","verbose"],pp=0;pp<UZ.length;++pp)(function(e){cr.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};cr.log.logMessage(o)}})(UZ[pp]);var UZ,pp;cr.log.makeLogger=function(t){var e={flags:0,f:t};return cr.log.setLevel(e,"none"),e};cr.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&cr.log.LEVEL_LOCKED))for(var n=0;n<cr.log.levels.length;++n){var i=cr.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};cr.log.lock=function(t,e){typeof e>"u"||e?t.flags|=cr.log.LEVEL_LOCKED:t.flags&=~cr.log.LEVEL_LOCKED};cr.log.addLogger=function(t){BZ.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(_Ae={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},vR=function(t,e){cr.log.prepareStandard(e);var r=_Ae[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},JE=cr.log.makeLogger(vR)):(vR=function(e,r){cr.log.prepareStandardFull(r),console.log(r.standardFull)},JE=cr.log.makeLogger(vR)),cr.log.setLevel(JE,"debug"),cr.log.addLogger(JE),gR=JE):console={log:function(){}};var JE,_Ae,vR;gR!==null&&typeof window<"u"&&window.location&&(hR=new URL(window.location.href).searchParams,hR.has("console.level")&&cr.log.setLevel(gR,hR.get("console.level").slice(-1)[0]),hR.has("console.lock")&&(xAe=hR.get("console.lock").slice(-1)[0],xAe=="true"&&cr.log.lock(gR)));var hR,xAe;cr.log.consoleLogger=gR});var IAe=P((EAr,TAe)=>{TAe.exports=ip();CM();zE();JJ();wZ()});var RAe=P((TAr,wAe)=>{var Ue=zt();c0();hl();aR();u0();sb();pZ();yu();Rr();qM();var G=Ue.asn1,aa=wAe.exports=Ue.pkcs7=Ue.pkcs7||{};aa.messageFromPem=function(t){var e=Ue.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=G.fromDer(e.body);return aa.messageFromAsn1(n)};aa.messageToPem=function(t,e){var r={type:"PKCS7",body:G.toDer(t.toAsn1()).getBytes()};return Ue.pem.encode(r,{maxline:e})};aa.messageFromAsn1=function(t){var e={},r=[];if(!G.validate(t,aa.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=G.derToOid(e.contentType),o;switch(i){case Ue.pki.oids.envelopedData:o=aa.createEnvelopedData();break;case Ue.pki.oids.encryptedData:o=aa.createEncryptedData();break;case Ue.pki.oids.signedData:o=aa.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};aa.createSignedData=function(){var t=null;return t={type:Ue.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(HZ(t,n,aa.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Ue.pki.certificateFromAsn1(i[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Ue.pki.certificateToAsn1(t.certificates[i]));var o=[],s=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&s.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(G.create(G.Class.UNIVERSAL,G.Type.SET,!0,t.signerInfos)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Ue.pki.certificateFromPem(s)),i=s.issuer.attributes,o=s.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Ue.pki.privateKeyFromPem(a));var c=n.digestAlgorithm||Ue.pki.oids.sha1;switch(c){case Ue.pki.oids.sha1:case Ue.pki.oids.sha256:case Ue.pki.oids.sha384:case Ue.pki.oids.sha512:case Ue.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var l=!1,d=!1,p=0;p<u.length;++p){var f=u[p];if(!l&&f.type===Ue.pki.oids.contentType){if(l=!0,d)break;continue}if(!d&&f.type===Ue.pki.oids.messageDigest){if(d=!0,l)break;continue}}if(!l||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Ue.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(Ue.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Ue.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Ue.util.encodeUtf8(t.content)),n.detached?t.detachedContent=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ue.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],s=o.digestAlgorithm;s in n||(n[s]=Ue.md[Ue.pki.oids[s]].create()),o.authenticatedAttributes.length===0?o.md=n[s]:o.md=Ue.md[Ue.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(s).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=G.derToOid(t.contentInfo.value[0].value),s=G.toDer(i);s.getByte(),G.getBerValueLength(s),s=s.getBytes();for(var a in n)n[a].start().update(s);for(var c=new Date,u=0;u<t.signers.length;++u){var l=t.signers[u];if(l.authenticatedAttributes.length===0){if(o!==Ue.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[]),p=0;p<l.authenticatedAttributes.length;++p){var f=l.authenticatedAttributes[p];f.type===Ue.pki.oids.messageDigest?f.value=n[l.digestAlgorithm].digest():f.type===Ue.pki.oids.signingTime&&(f.value||(f.value=c)),d.value.push(qZ(f)),l.authenticatedAttributesAsn1.value.push(qZ(f))}s=G.toDer(d).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=Aot(t.signers)}};aa.createEncryptedData=function(){var t=null;return t={type:Ue.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ue.pki.oids["aes256-CBC"]},fromAsn1:function(e){HZ(t,e,aa.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),CAe(t)}},t};aa.createEnvelopedData=function(){var t=null;return t={type:Ue.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ue.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=HZ(t,e,aa.asn1.envelopedDataValidator);t.recipients=Cot(r.recipientInfos.value)},toAsn1:function(){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.type).getBytes()),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,wot(t.recipients)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,Pot(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Ue.pki.oids.rsaEncryption:case Ue.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Ue.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}CAe(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Ue.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Ue.pki.oids["aes128-CBC"]:n=16,i=16,o=Ue.aes.createEncryptionCipher;break;case Ue.pki.oids["aes192-CBC"]:n=24,i=16,o=Ue.aes.createEncryptionCipher;break;case Ue.pki.oids["aes256-CBC"]:n=32,i=16,o=Ue.aes.createEncryptionCipher;break;case Ue.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Ue.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Ue.util.createBuffer(Ue.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Ue.util.createBuffer(Ue.random.getBytes(i));var s=o(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var a=0;a<t.recipients.length;++a){var c=t.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ue.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function Tot(t){var e={},r=[];if(!G.validate(t,aa.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Ue.pki.RDNAttributesAsArray(e.issuer),serialNumber:Ue.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:G.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function Iot(t){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[Ue.pki.distinguishedNameToAsn1({attributes:t.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ue.util.hexToBytes(t.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.encryptedContent.algorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]),G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function Cot(t){for(var e=[],r=0;r<t.length;++r)e.push(Tot(t[r]));return e}function wot(t){for(var e=[],r=0;r<t.length;++r)e.push(Iot(t[r]));return e}function Rot(t){var e=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(t.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[Ue.pki.distinguishedNameToAsn1({attributes:t.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ue.util.hexToBytes(t.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.digestAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.signatureAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])),e.value.push(G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=G.create(G.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(qZ(i))}e.value.push(r)}return e}function Aot(t){for(var e=[],r=0;r<t.length;++r)e.push(Rot(t[r]));return e}function qZ(t){var e;if(t.type===Ue.pki.oids.contentType)e=G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.value).getBytes());else if(t.type===Ue.pki.oids.messageDigest)e=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Ue.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=G.utcTimeToDate(i):i=G.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=G.create(G.Class.UNIVERSAL,G.Type.UTCTIME,!1,G.dateToUtcTime(i)):e=G.create(G.Class.UNIVERSAL,G.Type.GENERALIZEDTIME,!1,G.dateToGeneralizedTime(i))}return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.type).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[e])])}function Pot(t){return[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(Ue.pki.oids.data).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(t.algorithm).getBytes()),t.parameter?G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.content.getBytes())])]}function HZ(t,e,r){var n={},i=[];if(!G.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=G.derToOid(n.contentType);if(s!==Ue.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Ue.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[c].value}else a=n.encryptedContent;t.encryptedContent={algorithm:G.derToOid(n.encAlgorithm),parameter:Ue.util.createBuffer(n.encParameter.value),content:Ue.util.createBuffer(a)}}if(n.content){var a="";if(Ue.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[c].value}else a=n.content;t.content=Ue.util.createBuffer(a)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function CAe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Ue.pki.oids["aes128-CBC"]:case Ue.pki.oids["aes192-CBC"]:case Ue.pki.oids["aes256-CBC"]:e=Ue.aes.createDecryptionCipher(t.encryptedContent.key);break;case Ue.pki.oids.desCBC:case Ue.pki.oids["des-EDE3-CBC"]:e=Ue.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var PAe=P((IAr,AAe)=>{var Xi=zt();c0();HE();CM();zE();Rr();var YM=AAe.exports=Xi.ssh=Xi.ssh||{};YM.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var s=Xi.util.createBuffer();ZE(s,n),fp(s,t.e),fp(s,t.n);var a=Xi.util.encode64(s.bytes(),64),c=Math.floor(a.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=a;var u=Xi.util.createBuffer();fp(u,t.d),fp(u,t.p),fp(u,t.q),fp(u,t.qInv);var l;if(!e)l=Xi.util.encode64(u.bytes(),64);else{var d=u.length()+16-1;d-=d%16;var p=KM(u.bytes());p.truncate(p.length()-d+u.length()),u.putBuffer(p);var f=Xi.util.createBuffer();f.putBuffer(KM("\0\0\0\0",e)),f.putBuffer(KM("\0\0\0",e));var m=Xi.aes.createEncryptionCipher(f.truncate(8),"CBC");m.start(Xi.util.createBuffer().fillWithByte(0,16)),m.update(u.copy()),m.finish();var h=m.output;h.truncate(16),l=Xi.util.encode64(h.bytes(),64)}c=Math.floor(l.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=l;var g=KM("putty-private-key-file-mac-key",e),v=Xi.util.createBuffer();ZE(v,n),ZE(v,i),ZE(v,r),v.putInt32(s.length()),v.putBuffer(s),v.putInt32(u.length()),v.putBuffer(u);var b=Xi.hmac.create();return b.start("sha1",g),b.update(v.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};YM.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Xi.util.createBuffer();return ZE(n,r),fp(n,t.e),fp(n,t.n),r+" "+Xi.util.encode64(n.bytes())+" "+e};YM.privateKeyToOpenSSH=function(t,e){return e?Xi.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Xi.pki.privateKeyToPem(t)};YM.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Xi.md.md5.create(),n="ssh-rsa",i=Xi.util.createBuffer();ZE(i,n),fp(i,t.e),fp(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function fp(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Xi.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function ZE(t,e){t.putInt32(e.length),t.putString(e)}function KM(){for(var t=Xi.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var DAe=P((CAr,kAe)=>{kAe.exports=zt();c0();XRe();hl();bM();aR();hAe();HE();bAe();EAe();IAe();fZ();PM();sb();aZ();gZ();RAe();yZ();uZ();ZJ();FM();yu();rZ();PAe();TZ();Rr()});var NAe=P((wAr,kot)=>{kot.exports={name:"@roamhq/mac-ca",version:"1.0.7",description:"Get Mac OS Root certificates",main:"index.js",repository:{type:"git",url:"https://github.com/WonderInventions/mac-ca.git"},scripts:{test:'echo "Error: no test specified" && exit 1',lint:"eslint ."},license:"BSD-3-Clause",dependencies:{"node-forge":"^1.3.1"},devDependencies:{eslint:"^8.22.0"}}});var MAe=P((RAr,jZ)=>{var XM=DAe(),LAe=NAe(),QM=jZ.exports.validFormats={der:0,pem:1,txt:2,asn1:3};function OAe(t){let e=XM.pki.pemToDer(t),r=XM.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,s=n.slice(o);return{serial:s[0],issuer:s[2],valid:s[3],subject:s[4]}}function Dot(t){let e=OAe(t),r=new Date,n=e.subject.value.map(s=>s.value[0].value[1].value).join("/"),i=e.valid.value.map(s=>s.value).join(" - "),o=r.toTimeString().replace(/\s*\(.*\)\s*/,"");return[`Subject	${n}`,`Valid	${i}`,`Saved	${r.toLocaleDateString()} ${o} by ${LAe.name}@${LAe.version}`,String(t)].join(`
`)}jZ.exports.transform=function(t){return function(e){try{switch(t){case QM.der:return XM.pki.pemToDer(e);case QM.pem:return e;case QM.txt:return Dot(e);case QM.asn1:return OAe(e);default:return XM.pki.certificateFromPem(e)}}catch{return}}}});var FAe=P((AAr,eT)=>{var GZ=require("https"),VZ=MAe();if(process.platform!=="darwin")eT.exports.all=()=>[],eT.exports.each=()=>{};else{let a=function(u,l,d){return d.indexOf(u)===l};Not=a;let t=require("child_process"),e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r="/System/Library/Keychains/SystemRootCertificates.keychain",n=["find-certificate","-a","-p"],i=t.spawnSync("/usr/bin/security",n).stdout.toString().split(e),o=t.spawnSync("/usr/bin/security",n.concat(r)).stdout.toString().split(e);GZ.globalAgent.options.ca=GZ.globalAgent.options.ca||[];let s=GZ.globalAgent.options.ca,c=i.concat(o);c.filter(a).forEach(u=>s.push(u)),eT.exports.der2=VZ.validFormats,eT.exports.all=function(u){return c.map(VZ.transform(u)).filter(l=>l)},eT.exports.each=function(u,l){return typeof u=="function"&&(l=u,u=void 0),c.map(VZ.transform(u)).filter(d=>d).forEach(l)}}var Not});var lee=P((oPr,$Ae)=>{var yR=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,jot=typeof AbortController=="function",r9=jot?AbortController:class{constructor(){this.signal=new GAe}abort(){this.signal.dispatchEvent("abort")}},Got=typeof AbortSignal=="function",Vot=typeof r9.AbortSignal=="function",GAe=Got?AbortSignal:Vot?r9.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},cee=new Set,oee=(t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;n9(r)&&uee(r,`${t} option`,`options.${e}`,rT)},see=(t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(n9(r)){let{prototype:n}=rT,{get:i}=Object.getOwnPropertyDescriptor(n,t);uee(r,`${t} method`,`cache.${e}()`,i)}},zot=(t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(n9(r)){let{prototype:n}=rT,{get:i}=Object.getOwnPropertyDescriptor(n,t);uee(r,`${t} property`,`cache.${e}`,i)}},VAe=(...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},n9=t=>!cee.has(t),uee=(t,e,r,n)=>{cee.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;VAe(i,"DeprecationWarning",t,n)},mb=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),zAe=t=>mb(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?tT:null:null,tT=class extends Array{constructor(e){super(e),this.fill(0)}},aee=class{constructor(e){if(e===0)return[];let r=zAe(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},rT=class t{constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:u,disposeAfter:l,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,sizeCalculation:m,fetchMethod:h,fetchContext:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:b}=e,{length:y,maxAge:S,stale:x}=e instanceof t?{}:e;if(r!==0&&!mb(r))throw new TypeError("max option must be a nonnegative integer");let T=r?zAe(r):Array;if(!T)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=f,this.sizeCalculation=m||y,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=h||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=g,!this.fetchMethod&&g!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new T(r),this.prev=new T(r),this.head=0,this.tail=0,this.free=new aee(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof l=="function"?(this.disposeAfter=l,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.maxSize!==0){if(!mb(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!x,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=mb(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||S||0,this.ttl){if(!mb(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let L="LRU_CACHE_UNBOUNDED";n9(L)&&(cee.add(L),VAe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}x&&oee("stale","allowStale"),S&&oee("maxAge","ttl"),y&&oee("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new tT(this.max),this.starts=new tT(this.max),this.setItemTTL=(n,i,o=yR.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let s=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);s.unref&&s.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?yR.now():0};let e=0,r=()=>{let n=yR.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n};this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new tT(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!mb(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!mb(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return see("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],s={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){s.ttl=this.ttls[r];let a=yR.now()-this.starts[r];s.start=Math.floor(Date.now()-a)}this.sizes&&(s.size=this.sizes[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=yR.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:s=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(s=this.requireSize(e,r,s,a),this.maxSize&&s>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,s),c=!1;else{let l=this.valList[u];r!==l&&(this.isBackgroundFetch(l)?l.__abortController.abort():o||(this.dispose(l,e,"set"),this.disposeAfter&&this.disposed.push([l,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,s)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let s=new r9,a={signal:s.signal,options:n,context:i},c=p=>(s.signal.aborted||this.set(e,p,a.options),p),u=p=>{if(this.valList[r]===d&&(!n.noDeleteOnFetchRejection||d.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=d.__staleWhileFetching),d.__returned===d)throw p},l=p=>p(this.fetchMethod(e,o,a)),d=new Promise(l).then(c,u);return d.__abortController=s,d.__staleWhileFetching=o,d.__returned=null,r===void 0?(this.set(e,d,a.options),r=this.keyMap.get(e)):this.valList[r]=d,d}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,fetchContext:d=this.fetchContext,forceRefresh:p=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let f={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:l},m=this.keyMap.get(e);if(m===void 0){let h=this.backgroundFetch(e,m,f,d);return h.__returned=h}else{let h=this.valList[m];if(this.isBackgroundFetch(h))return r&&h.__staleWhileFetching!==void 0?h.__staleWhileFetching:h.__returned=h;if(!p&&!this.isStale(m))return this.moveToTail(m),n&&this.updateItemAge(m),h;let g=this.backgroundFetch(e,m,f,d);return r&&g.__staleWhileFetching!==void 0?g.__staleWhileFetching:g.__returned=g}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let s=this.valList[o],a=this.isBackgroundFetch(s);return this.isStale(o)?a?r?s.__staleWhileFetching:void 0:(i||this.delete(e),r?s:void 0):a?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),s)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return see("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return see("reset","clear"),this.clear}get length(){return zot("length","size"),this.size}static get AbortController(){return r9}static get AbortSignal(){return GAe}};$Ae.exports=rT});var fee=P((sPr,WAe)=>{"use strict";var bR=class extends Error{constructor(e,r){super(e),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},dee=class extends bR{constructor(e,r,n){super(e,r),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},pee=class extends bR{constructor(e,r="aborted"){super(e,r)}};WAe.exports={FetchBaseError:bR,FetchError:dee,AbortError:pee}});var tm=P((aPr,YAe)=>{"use strict";var{constants:{MAX_LENGTH:$ot}}=require("buffer"),{pipeline:i9,PassThrough:Wot}=require("stream"),{promisify:Kot}=require("util"),{createGunzip:Yot,createInflate:Qot,createBrotliDecompress:Xot,constants:{Z_SYNC_FLUSH:KAe}}=require("zlib"),Jot=Gu()("helix-fetch:utils"),Zot=Kot(i9),est=(t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),tst=(t,e,r,n)=>{if(!est(t,e))return r;let i=o=>{o&&(Jot(`encountered error while decoding stream: ${o}`),n(o))};switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return i9(r,Yot({flush:KAe,finishFlush:KAe}),i);case"deflate":case"x-deflate":return i9(r,Qot(),i);case"br":return i9(r,Xot(),i);default:return r}},rst=t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},o9=(t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?nst(t,e):ist(t,e);default:return 0}},nst=(t,e)=>(e.add(t),t.map(r=>e.has(r)?0:o9(r,e)).reduce((r,n)=>r+n,0)),ist=(t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=o9(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=o9(t[i],e)}),r},ost=t=>o9(t,new WeakSet),sst=async t=>{let e=new Wot,r=0,n=[];return e.on("data",i=>{if(r+i.length>$ot)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await Zot(t,e),Buffer.concat(n,r)};YAe.exports={decodeStream:tst,isPlainObject:rst,sizeof:ost,streamToBuffer:sst}});var a9=P((cPr,ZAe)=>{"use strict";var{PassThrough:QAe,Readable:rm}=require("stream"),{types:{isAnyArrayBuffer:JAe}}=require("util"),{FetchError:ast,FetchBaseError:cst}=fee(),{streamToBuffer:ust}=tm(),lst=Buffer.alloc(0),Tu=Symbol("Body internals"),dst=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),XAe=async t=>{if(t[Tu].disturbed)throw new TypeError("Already read");if(t[Tu].error)throw new TypeError(`Stream had error: ${t[Tu].error.message}`);t[Tu].disturbed=!0;let{stream:e}=t[Tu];return e===null?lst:ust(e)},s9=class{constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=rm.from(e.toString()):e instanceof rm?r=e:Buffer.isBuffer(e)?r=rm.from(e):JAe(e)?r=rm.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=rm.from(e):r=rm.from(String(e)),this[Tu]={stream:r,disturbed:!1,error:null},e instanceof rm&&r.on("error",n=>{let i=n instanceof cst?n:new ast(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Tu].error=i})}get body(){return this[Tu].stream}get bodyUsed(){return this[Tu].disturbed}async buffer(){return XAe(this)}async arrayBuffer(){return dst(await this.buffer())}async text(){return(await XAe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(s9.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var pst=t=>{if(t[Tu].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Tu],r=e;if(e instanceof rm){r=new QAe;let n=new QAe;e.pipe(r),e.pipe(n),t[Tu].stream=n}return r},fst=t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||JAe(t)||t instanceof rm?null:"text/plain; charset=utf-8";ZAe.exports={Body:s9,cloneStream:pst,guessContentType:fst}});var nT=P((uPr,nPe)=>{"use strict";var{validateHeaderName:ePe,validateHeaderValue:tPe}=require("http"),{isPlainObject:mst}=tm(),nm=Symbol("Headers internals"),_R=t=>{let e=typeof t!="string"?String(t):t;if(typeof ePe=="function")ePe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},rPe=(t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof tPe=="function")tPe(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},c9=class t{constructor(e={}){if(this[nm]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(mst(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[nm].map.set(_R(e),rPe(r,e))}has(e){return this[nm].map.has(_R(e))}get(e){let r=this[nm].map.get(_R(e));return r===void 0?null:r}append(e,r){let n=_R(e),i=rPe(r,e),o=this[nm].map.get(n);this[nm].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[nm].map.delete(_R(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[nm].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[nm].map)}};Object.defineProperties(c9.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));nPe.exports={Headers:c9}});var mee=P((lPr,iPe)=>{"use strict";var{EventEmitter:hst}=require("events"),vl=Symbol("AbortSignal internals"),iT=class{constructor(){this[vl]={eventEmitter:new hst,onabort:null,aborted:!1}}get aborted(){return this[vl].aborted}get onabort(){return this[vl].onabort}set onabort(e){this[vl].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[vl].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[vl].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[vl][n]=="function"&&this[n](r),this[vl].eventEmitter.emit(e,r)}fire(){this[vl].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(iT.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var l9=class extends iT{constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[vl].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[vl].timerId)}};Object.defineProperties(l9.prototype,{clear:{enumerable:!0}});var u9=Symbol("AbortController internals"),d9=class{constructor(){this[u9]={signal:new iT}}get signal(){return this[u9].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[u9].signal.aborted||this[u9].signal.fire()}};Object.defineProperties(d9.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});iPe.exports={AbortController:d9,AbortSignal:iT,TimeoutSignal:l9}});var xR=P((dPr,aPe)=>{"use strict";var{randomBytes:gst}=require("crypto"),{Readable:vst}=require("stream"),gee=t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),yst=t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData",oPe=t=>`--${t}--\r
\r
`,sPe=(t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,gee(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`};async function*bst(t,e){for(let[r,n]of t)yield sPe(e,r,n),gee(n)?yield*n.stream():yield n,yield`\r
`;yield oPe(e)}var _st=(t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(sPe(e,n,i)),r+=gee(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(oPe(e)),r},hee=class{constructor(e){this.fd=e,this.boundary=gst(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=_st(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return vst.from(bst(this.fd,this.boundary))}};aPe.exports={isFormData:yst,FormDataSerializer:hee}});var uPe=P((pPr,cPe)=>{"use strict";var{AbortSignal:xst}=mee(),{Body:Sst,cloneStream:Est,guessContentType:Tst}=a9(),{Headers:Ist}=nT(),{isPlainObject:Cst}=tm(),{isFormData:wst,FormDataSerializer:Rst}=xR(),Ast=20,v0=Symbol("Request internals"),p9=class t extends Sst{constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body||(n&&n.body?Est(n):null),a=new Ist(r.headers||n&&n.headers||{});if(wst(s)&&!a.has("content-type")){let d=new Rst(s);s=d.stream(),a.set("content-type",d.contentType()),!a.has("transfer-encoding")&&!a.has("content-length")&&a.set("content-length",d.length())}if(!a.has("content-type"))if(Cst(s))s=JSON.stringify(s),a.set("content-type","application/json");else{let d=Tst(s);d&&a.set("content-type",d)}super(s);let c=n?n.signal:null;if("signal"in r&&(c=r.signal),c&&!(c instanceof xst))throw new TypeError("signal needs to be an instance of AbortSignal");let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let l=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(l))throw new TypeError(`'${l}' is not a valid cache option`);this[v0]={init:{...r},method:o,redirect:u,cache:l,headers:a,parsedURL:i,signal:c},r.follow===void 0?!n||n.follow===void 0?this.follow=Ast:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[v0].method}get url(){return this[v0].parsedURL.toString()}get headers(){return this[v0].headers}get redirect(){return this[v0].redirect}get cache(){return this[v0].cache}get signal(){return this[v0].signal}clone(){return new t(this)}get init(){return this[v0].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(p9.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});cPe.exports={Request:p9}});var vee=P((fPr,lPe)=>{"use strict";var{Body:Pst,cloneStream:kst,guessContentType:Dst}=a9(),{Headers:Nst}=nT(),{isPlainObject:Lst}=tm(),{isFormData:Ost,FormDataSerializer:Mst}=xR(),yl=Symbol("Response internals"),f9=class t extends Pst{constructor(e=null,r={}){let n=new Nst(r.headers),i=e;if(Ost(i)&&!n.has("content-type")){let o=new Mst(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Lst(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=Dst(i);o&&n.set("content-type",o)}super(i),this[yl]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[yl].url||""}get status(){return this[yl].status}get statusText(){return this[yl].statusText}get ok(){return this[yl].status>=200&&this[yl].status<300}get redirected(){return this[yl].counter>0}get headers(){return this[yl].headers}get httpVersion(){return this[yl].httpVersion}get decoded(){return this[yl].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(kst(this),{...this[yl]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(f9.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});lPe.exports={Response:f9}});var pPe=P((hPr,dPe)=>{"use strict";var Fst=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Ust=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Bst=new Set([500,502,503,504]),qst={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Hst={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function hb(t){let e=parseInt(t,10);return isFinite(e)?e:0}function jst(t){return t?Bst.has(t.status):!0}function yee(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function Gst(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}dPe.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=yee(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=yee(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Gst(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Ust.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Fst.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=yee(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)qst[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return hb(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return hb(this._rescc["s-maxage"])}if(this._rescc["max-age"])return hb(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+hb(this._rescc["stale-if-error"]),n=e+hb(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+hb(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+hb(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&jst(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!Hst[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var gPe=P((gPr,hPe)=>{"use strict";var Vst=pPe(),{Headers:zst}=nT(),fPe=t=>({url:t.url,method:t.method,headers:t.headers.plain()}),mPe=t=>({status:t.status,headers:t.headers.plain()}),bee=class{constructor(e,r,n){this.policy=new Vst(fPe(e),mPe(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(fPe(e))}responseHeaders(e){return new zst(this.policy.responseHeaders(mPe(e)))}timeToLive(){return this.policy.timeToLive()}};hPe.exports=bee});var bPe=P((vPr,yPe)=>{"use strict";var{Readable:$st}=require("stream"),{Headers:vPe}=nT(),{Response:Wst}=vee(),y0=Symbol("CacheableResponse internals"),Kst=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),_ee=class t extends Wst{constructor(e,r){super(e,r);let n=new vPe(r.headers);this[y0]={headers:n,bufferedBody:e}}get headers(){return this[y0].headers}set headers(e){if(e instanceof vPe)this[y0].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return $st.from(this[y0].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[y0].bufferedBody}async arrayBuffer(){return Kst(this[y0].bufferedBody)}async text(){return this[y0].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a}=this;return new t(this[y0].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a})}get[Symbol.toStringTag](){return this.constructor.name}},Yst=async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:c}=t;return new _ee(e,{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:c})};yPe.exports={cacheableResponse:Yst}});var m9=P((yPr,_Pe)=>{"use strict";var xee=class extends Error{get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};_Pe.exports={RequestAbortedError:xee}});var IPe=P((bPr,TPe)=>{"use strict";var SPe=require("http"),EPe=require("https"),{Readable:Qst}=require("stream"),im=Gu()("helix-fetch:h1"),{RequestAbortedError:xPe}=m9(),{decodeStream:Xst}=tm(),Jst=(t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new EPe.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new SPe.Agent(n),r.httpAgent):void 0},Zst=t=>{t.h1={}},eat=async({h1:t})=>{t.httpAgent&&(im("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(im("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},tat=(t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:c}=t,u=e?Xst(n,c,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:c,readable:u,decoded:!!(e&&u!==t)}},rat=async(t,e,r)=>{let{request:n}=e.protocol==="https:"?EPe:SPe,i=Jst(t,e.protocol),o={...r,agent:i},{socket:s,body:a}=o;return s&&(delete o.socket,s.assigned||(s.assigned=!0,i?o.agent=new Proxy(i,{get:(c,u)=>u==="createConnection"&&!s.inUse?(l,d)=>{im(`agent reusing socket #${s.id} (${s.servername})`),s.inUse=!0,d(null,s)}:c[u]}):o.createConnection=(c,u)=>{im(`reusing socket #${s.id} (${s.servername})`),s.inUse=!0,u(null,s)})),new Promise((c,u)=>{im(`${o.method} ${e.href}`);let l,{signal:d}=o,p=()=>{d.removeEventListener("abort",p),s&&!s.inUse&&(im(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),u(new xPe),l&&l.abort()};if(d){if(d.aborted){u(new xPe);return}d.addEventListener("abort",p)}l=n(e,o),l.once("response",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(im(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),c(tat(f,o.decode,u))}),l.once("error",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(im(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),l.aborted||(im(`${o.method} ${e.href} failed with: ${f.message}`),l.abort(),u(f))}),a instanceof Qst?a.pipe(l):(a&&l.write(a),l.end())})};TPe.exports={request:rat,setupContext:Zst,resetContext:eat}});var APe=P((_Pr,RPe)=>{"use strict";var{connect:nat,constants:iat}=require("http2"),{Readable:oat}=require("stream"),An=Gu()("helix-fetch:h2"),{RequestAbortedError:CPe}=m9(),{decodeStream:sat}=tm(),{NGHTTP2_CANCEL:SR}=iat,aat=5*60*1e3,cat=5e3,uat=t=>{t.h2={sessionCache:{}}},lat=async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),An(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),wPe=(t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let s=r?sat(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:s,decoded:!!(r&&s!==e)}},dat=(t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:s,pushHandler:a,pushedStreamIdleTimeout:c=cat}}}=t,u=i[":path"],l=`${e}${u}`;An(`received PUSH_PROMISE: ${l}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),s&&s(l,i,()=>{n.close(SR)}),n.on("push",(d,p)=>{An(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(d)}, flags: ${p}`),n.setTimeout(c,()=>{An(`closing pushed stream #${n.id} after ${c} ms of inactivity`),n.close(SR)}),a&&a(l,i,wPe(d,n,r))}),n.on("aborted",()=>{An(`pushed stream #${n.id} aborted`)}),n.on("error",d=>{An(`pushed stream #${n.id} encountered error: ${d}`)}),n.on("frameError",(d,p,f)=>{An(`pushed stream #${n.id} encountered frameError: type: ${d}, code: ${p}, id: ${f}`)})},pat=async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:s}=e,a=`${i}${o}${s}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:l=aat,pushPromiseHandler:d,pushHandler:p}=c,f={...r},{method:m,headers:h,socket:g,body:v,decode:b}=f;return g&&delete f.socket,h.host&&(h[":authority"]=h.host,delete h.host),new Promise((y,S)=>{let x=u[n];if(!x||x.closed||x.destroyed){let O=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),Z={...c,rejectUnauthorized:O};g&&!g.inUse&&(Z.createConnection=()=>(An(`reusing socket #${g.id} (${g.servername})`),g.inUse=!0,g)),x=nat(n,{...Z,settings:{enablePush:!!(d||p)}}),x.setMaxListeners(1e3),x.setTimeout(l,()=>{An(`closing session ${n} after ${l} ms of inactivity`),x.close()}),x.once("connect",()=>{An(`session ${n} established`),An(`caching session ${n}`),u[n]=x}),x.on("localSettings",D=>{An(`session ${n} localSettings: ${JSON.stringify(D)}`)}),x.on("remoteSettings",D=>{An(`session ${n} remoteSettings: ${JSON.stringify(D)}`)}),x.once("close",()=>{An(`session ${n} closed`),u[n]===x&&(An(`discarding cached session ${n}`),delete u[n])}),x.once("error",D=>{An(`session ${n} encountered error: ${D}`),u[n]===x&&(An(`discarding cached session ${n}`),delete u[n])}),x.on("frameError",(D,E,k)=>{An(`session ${n} encountered frameError: type: ${D}, code: ${E}, id: ${k}`)}),x.once("goaway",(D,E,k)=>{An(`session ${n} received GOAWAY frame: errorCode: ${D}, lastStreamID: ${E}, opaqueData: ${k?k.toString():void 0}`)}),x.on("stream",(D,E,k)=>{dat(t,n,b,D,E,k)})}else g&&g.id!==x.socket.id&&!g.inUse&&(An(`discarding redundant socket used for ALPN: #${g.id} ${g.servername}`),g.destroy());An(`${m} ${e.host}${a}`);let T,{signal:L}=f,M=()=>{L.removeEventListener("abort",M),S(new CPe),T&&T.close(SR)};if(L){if(L.aborted){S(new CPe);return}L.addEventListener("abort",M)}let q=O=>{An(`session ${n} encountered error during ${f.method} ${e.href}: ${O}`),S(O)};x.once("error",q),T=x.request({":method":m,":path":a,...h}),T.once("response",O=>{x.off("error",q),L&&L.removeEventListener("abort",M),y(wPe(O,T,f.decode,S))}),T.once("error",O=>{x.off("error",q),L&&L.removeEventListener("abort",M),T.rstCode!==SR&&(An(`${f.method} ${e.href} failed with: ${O.message}`),T.close(SR),S(O))}),T.once("frameError",(O,Z,z)=>{x.off("error",q),An(`encountered frameError during ${f.method} ${e.href}: type: ${O}, code: ${Z}, id: ${z}`)}),T.on("push",(O,Z)=>{An(`received 'push' event: headers: ${JSON.stringify(O)}, flags: ${Z}`)}),v instanceof oat?v.pipe(T):(v&&T.write(v),T.end())})};RPe.exports={request:pat,setupContext:uat,resetContext:lat}});var kPe=P((xPr,PPe)=>{"use strict";var{EventEmitter:fat}=require("events"),mat=()=>{let t={},e=new fat;return e.setMaxListeners(0),{acquire:r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))};e.on(r,i)}),release:(r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))}}};PPe.exports=mat});var DPe=P((SPr,hat)=>{hat.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var FPe=P((EPr,MPe)=>{"use strict";var{Readable:gat}=require("stream"),vat=require("tls"),{types:{isAnyArrayBuffer:yat}}=require("util"),bat=lee(),See=Gu()("helix-fetch:core"),{RequestAbortedError:h9}=m9(),Eee=IPe(),g9=APe(),_at=kPe(),{isPlainObject:xat}=tm(),{isFormData:Sat,FormDataSerializer:Eat}=xR(),{version:Tat}=DPe(),Tee="h2",Iee="h2c",Cee="http/1.0",gb="http/1.1",Iat=100,Cat=60*60*1e3,wat=[Tee,gb,Cee],Rat=`helix-fetch/${Tat}`,Aat={method:"GET",compress:!0,decode:!0},NPe=0,LPe=_at(),OPe=(t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,s=()=>{i.removeEventListener("abort",s);let u=new h9;n(u),o&&o.destroy(u)};if(i){if(i.aborted){n(new h9);return}i.addEventListener("abort",s)}let a=+t.port||443,c=u=>{i&&i.removeEventListener("abort",s),u instanceof h9||(See(`connecting to ${t.hostname}:${a} failed with: ${u.message}`),n(u))};o=vat.connect(a,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",s),o.off("error",c),NPe+=1,o.id=NPe,o.secureConnecting=!1,See(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",c)}),Pat=async(t,e)=>{let r=await LPe.acquire(t.origin);try{return r||(r=await OPe(t,e)),r}finally{LPe.release(t.origin,r)}},kat=async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=gb,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=Iee,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:s={},h2:a={}}}=t,c=!(o===!1||s.rejectUnauthorized===!1||a.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let l=await Pat(e,u);return i=l.alpnProtocol,i||(i=gb),t.alpnCache.set(n,i),{protocol:i,socket:l}},Dat=t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},Nat=async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let s={...r,host:e.host,hostname:e.hostname,port:o},a=await t(s);if(i){let u={...s,ALPNProtocols:n};u.socket=a,u.servername=s.host;let l=await OPe(e,u);return{protocol:l.alpnProtocol||gb,socket:l}}return{protocol:a.alpnProtocol||gb,socket:a}},Lat=async(t,e,r)=>{let n=new URL(e),i={...Aat,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=Dat(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(Sat(i.body)){let u=new Eat(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":xat(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):yat(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof gat||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:s}=i,{protocol:a,socket:c=null}=t.socketFactory?await Nat(t.socketFactory,n,i,t.alpnProtocols):await kat(t,n,s);switch(See(`${n.host} -> ${a}`),a){case Tee:try{return await g9.request(t,n,c?{...i,socket:c}:i)}catch(u){let{code:l,message:d}=u;throw l==="ERR_HTTP2_ERROR"&&d==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case Iee:return g9.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),c?{...i,socket:c}:i);case Cee:case gb:return Eee.request(t,n,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${a}`)}},Oat=async t=>(t.alpnCache.clear(),Promise.all([Eee.resetContext(t),g9.resetContext(t)])),Mat=t=>{let{options:{alpnProtocols:e=wat,alpnCacheTTL:r=Cat,alpnCacheSize:n=Iat,userAgent:i=Rat,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new bat({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,Eee.setupContext(t),g9.setupContext(t)};MPe.exports={request:Lat,setupContext:Mat,resetContext:Oat,RequestAbortedError:h9,ALPN_HTTP2:Tee,ALPN_HTTP2C:Iee,ALPN_HTTP1_1:gb,ALPN_HTTP1_0:Cee}});var BPe=P((TPr,UPe)=>{"use strict";var Fat=Gu()("helix-fetch:core"),{request:Uat,setupContext:Bat,resetContext:qat,RequestAbortedError:Hat,ALPN_HTTP2:jat,ALPN_HTTP2C:Gat,ALPN_HTTP1_1:Vat,ALPN_HTTP1_0:zat}=FPe(),wee=class t{constructor(e){this.options={...e||{}},Bat(this)}api(){return{request:async(e,r)=>this.request(e,r),context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),reset:async()=>this.reset(),RequestAbortedError:Hat,ALPN_HTTP2:jat,ALPN_HTTP2C:Gat,ALPN_HTTP1_1:Vat,ALPN_HTTP1_0:zat}}async request(e,r){return Uat(this,e,r)}setCA(e){this.options.ca=e}async reset(){return Fat("resetting context"),qat(this)}};UPe.exports=new wee().api()});var VPe=P((IPr,GPe)=>{"use strict";var{EventEmitter:$at}=require("events"),{Readable:ER}=require("stream"),Ree=Gu()("helix-fetch"),Wat=lee(),{Body:Kat}=a9(),{Headers:Dee}=nT(),{Request:vb}=uPe(),{Response:Pee}=vee(),{FetchBaseError:Yat,FetchError:TR,AbortError:v9}=fee(),{AbortController:Qat,AbortSignal:Xat,TimeoutSignal:Jat}=mee(),Zat=gPe(),{cacheableResponse:ect}=bPe(),{sizeof:tct}=tm(),{isFormData:rct}=xR(),{context:nct,RequestAbortedError:ict}=BPe(),qPe=["GET","HEAD"],oct=500,sct=100*1024*1024,Aee="push",HPe=async(t,e,r)=>{let{request:n}=t.context,i=e instanceof vb&&typeof r>"u"?e:new vb(e,r),{method:o,body:s,signal:a,compress:c,decode:u,follow:l,redirect:d,init:{body:p}}=i,f;if(a&&a.aborted){let x=new v9("The operation was aborted.");throw i.init.body instanceof ER&&i.init.body.destroy(x),x}try{f=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:p&&!(p instanceof ER)&&!rct(p)?p:s,compress:c,decode:u,follow:l,redirect:d,signal:a})}catch(x){throw p instanceof ER&&p.destroy(x),x instanceof TypeError?x:x instanceof ict?new v9("The operation was aborted."):new TR(x.message,"system",x)}let m=()=>{a.removeEventListener("abort",m);let x=new v9("The operation was aborted.");i.init.body instanceof ER&&i.init.body.destroy(x),f.readable.emit("error",x)};a&&a.addEventListener("abort",m);let{statusCode:h,statusText:g,httpVersion:v,headers:b,readable:y,decoded:S}=f;if([301,302,303,307,308].includes(h)){let{location:x}=b,T=x==null?null:new URL(x,i.url);switch(i.redirect){case"manual":break;case"error":throw a&&a.removeEventListener("abort",m),new TR(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(T===null)break;if(i.counter>=i.follow)throw a&&a.removeEventListener("abort",m),new TR(`maximum redirect reached at: ${i.url}`,"max-redirect");let L={headers:new Dee(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(h!==303&&i.body&&i.init.body instanceof ER)throw a&&a.removeEventListener("abort",m),new TR("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(h===303||(h===301||h===302)&&i.method==="POST")&&(L.method="GET",L.body=void 0,L.headers.delete("content-length")),a&&a.removeEventListener("abort",m),HPe(t,new vb(T,L))}default:}}return a&&(y.once("end",()=>{a.removeEventListener("abort",m)}),y.once("error",()=>{a.removeEventListener("abort",m)})),new Pee(y,{url:i.url,status:h,statusText:g,headers:b,httpVersion:v,decoded:S,counter:i.counter})},jPe=async(t,e,r)=>{if(t.options.maxCacheSize===0||!qPe.includes(e.method))return r;let n=new Zat(e,r,{shared:!1});if(n.storable()){let i=await ect(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},act=async(t,e,r)=>{let n=new vb(e,r);if(t.options.maxCacheSize!==0&&qPe.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:s,response:a}=t.cache.get(n.url)||{};if(s&&s.satisfiesWithoutRevalidation(n)){a.headers=new Dee(s.responseHeaders(a));let c=a.clone();return c.fromCache=!0,c}}let o=await HPe(t,n);return n.cache!=="no-store"?jPe(t,n,o):o},cct=(t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},uct=t=>new Jat(t),kee=class t{constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:sct,i=oct;n===0&&(n=1,i=1);let o=({response:a},c)=>tct(a);this.cache=new Wat({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new $at,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:s}=this.options.h2;s&&(this.options.h2.pushPromiseHandler=(a,c,u)=>{let l={...c};Object.keys(l).filter(d=>d.startsWith(":")).forEach(d=>delete l[d]),this.pushPromiseHandler(a,l,u)},this.options.h2.pushHandler=(a,c,u)=>{let l={...c};Object.keys(l).filter(v=>v.startsWith(":")).forEach(v=>delete l[v]);let{statusCode:d,statusText:p,httpVersion:f,headers:m,readable:h,decoded:g}=u;this.pushHandler(a,l,new Pee(h,{url:a,status:d,statusText:p,headers:m,httpVersion:f,decoded:g}))}),this.context=nct(this.options)}api(){return{fetch:async(e,r)=>this.fetch(e,r),Body:Kat,Headers:Dee,Request:vb,Response:Pee,AbortController:Qat,AbortSignal:Xat,FetchBaseError:Yat,FetchError:TR,AbortError:v9,context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),noCache:(e={})=>new t({...e,maxCacheSize:0}).api(),h1:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAlive:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),h1NoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAliveNoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),reset:async()=>this.context.reset(),onPush:e=>this.onPush(e),offPush:e=>this.offPush(e),createUrl:cct,timeoutSignal:uct,clearCache:()=>this.clearCache(),cacheStats:()=>this.cacheStats(),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return act(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Aee,e)}offPush(e){return this.eventEmitter.off(Aee,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){Ree(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new vb(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Ree(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){Ree(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await jPe(this,new vb(e,{headers:r}),n);this.eventEmitter.emit(Aee,e,i)}};GPe.exports=new kee().api()});var $Pe=P((CPr,zPe)=>{"use strict";zPe.exports=VPe()});var xct={};rn(xct,{activate:()=>vct,createExtensionContext:()=>oke,onDeactivate:()=>ske});module.exports=Ai(xct);var N9=W(lr()),ike=W(_te()),$r=require("vscode");var NF=require("events"),DA=W(require("fs"));var Cu;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(Cu||={});var ua=re("instantiationService");function cDe(t,e,r){e[Cu.DI_TARGET]===e?e[Cu.DI_DEPENDENCIES].push({id:t,index:r}):(e[Cu.DI_DEPENDENCIES]=[{id:t,index:r}],e[Cu.DI_TARGET]=e)}function re(t){if(Cu.serviceIds.has(t))return Cu.serviceIds.get(t);let e=function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");cDe(e,r,i)};return e.toString=()=>t,Cu.serviceIds.set(t,e),e}var oF=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?MR.isErrorNoTelemetry(e)?new MR(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},uDe=new oF;function Ib(t){C0(t)||uDe.onUnexpectedError(t)}var sF="Canceled";function C0(t){return t instanceof la?!0:t instanceof Error&&t.name===sF&&t.message===sF}var la=class extends Error{constructor(){super(sF),this.name=this.message}};function Fn(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}function xte(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}function FR(t){return t?t.message?t.message:t.stack?t.stack.split(`
`)[0]:String(t):"Error"}var MR=class t extends Error{constructor(r){super(r);this.name="CodeExpectedError"}static fromError(r){if(r instanceof t)return r;let n=new t;return n.message=r.message,n.stack=r.stack,n}static isErrorNoTelemetry(r){return r.name==="CodeExpectedError"}},Uo=class t extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function aF(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}function Ete(t,e,r){let n=cF(t,e);if(n!==-1)return t[n]}function cF(t,e,r=t.length-1){for(let n=r;n>=0;n--){let i=t[n];if(e(i))return n}return-1}function uF(t,e){let r=w0(t,e);return r===-1?void 0:t[r]}function w0(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?i=s+1:o=s}return i-1}function UR(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?o=s:i=s+1}return i}var Ste=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=w0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};function Tte(t,e){for(let r of t){let n=e(r);if(n!==void 0)return n}}function Cte(t,e){let r=0,n=t-1;for(;r<=n;){let i=(r+n)/2|0,o=e(i);if(o<0)r=i+1;else if(o>0)n=i-1;else return i}return-(r+1)}function Pr(t){return t.filter(e=>!!e)}function BR(t,e){let r;if(typeof e=="number"){let n=e;r=()=>{let i=Math.sin(n++)*179426549;return i-Math.floor(i)}}else r=Math.random;for(let n=t.length-1;n>0;n-=1){let i=Math.floor(r()*(n+1)),o=t[n];t[n]=t[i],t[i]=o}}var wte;(a=>{function t(c){return c<0}a.isLessThan=t;function e(c){return c<=0}a.isLessThanOrEqual=e;function r(c){return c>0}a.isGreaterThan=r;function n(c){return c===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(wte||={});function qR(t,e){return(r,n)=>e(t(r),t(n))}var HR=(t,e)=>t-e;var Ite=class t{constructor(e){this.iterate=e}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||wte.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function Ate(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}var lF=class{constructor(e,r){this.uri=e;this.value=r}};function dDe(t){return Array.isArray(t)}var pDe,Un=class t{constructor(e,r){this[pDe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(dDe(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{this.defaultToKey=e=>e.toString()}set(e,r){return this.map.set(this.toKey(e),new lF(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(pDe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},fDe,Pte=class{constructor(e,r){this[fDe]="ResourceSet";!e||typeof e=="function"?this._map=new Un(e):(this._map=new Un(r),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(fDe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var mDe,dF=class{constructor(){this[mDe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(mDe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},xl=class extends dF{constructor(r,n=1){super();this._limit=r,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,n=2){return super.get(r,n)}peek(r){return super.get(r,0)}set(r,n){return super.set(r,n,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};var jR=class{constructor(){this.map=new Map}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var R0;(b=>{function t(y){return y&&typeof y=="object"&&typeof y[Symbol.iterator]=="function"}b.is=t;let e=Object.freeze([]);function r(){return e}b.empty=r;function*n(y){yield y}b.single=n;function i(y){return t(y)?y:n(y)}b.wrap=i;function o(y){return y||e}b.from=o;function*s(y){for(let S=y.length-1;S>=0;S--)yield y[S]}b.reverse=s;function a(y){return!y||y[Symbol.iterator]().next().done===!0}b.isEmpty=a;function c(y){return y[Symbol.iterator]().next().value}b.first=c;function u(y,S){for(let x of y)if(S(x))return!0;return!1}b.some=u;function l(y,S){for(let x of y)if(S(x))return x}b.find=l;function*d(y,S){for(let x of y)S(x)&&(yield x)}b.filter=d;function*p(y,S){let x=0;for(let T of y)yield S(T,x++)}b.map=p;function*f(...y){for(let S of y)yield*S}b.concat=f;function m(y,S,x){let T=x;for(let L of y)T=S(T,L);return T}b.reduce=m;function*h(y,S,x=y.length){for(S<0&&(S+=y.length),x<0?x+=y.length:x>y.length&&(x=y.length);S<x;S++)yield y[S]}b.slice=h;function g(y,S=Number.POSITIVE_INFINITY){let x=[];if(S===0)return[x,y];let T=y[Symbol.iterator]();for(let L=0;L<S;L++){let M=T.next();if(M.done)return[x,b.empty()];x.push(M.value)}return[x,{[Symbol.iterator](){return T}}]}b.consume=g;async function v(y){let S=[];for await(let x of y)S.push(x);return Promise.resolve(S)}b.asyncToArray=v})(R0||={});var hDe=!1,Cb=null,kte=class t{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let c=new Map,u=[...this.livingDisposables.values()].filter(d=>d.source!==null&&!this.getRootParent(d,c).isSingleton);if(u.length===0)return;let l=new Set(u.map(d=>d.value));if(n=u.filter(d=>!(d.parent&&l.has(d.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(c){function u(d,p){for(;d.length>0&&p.some(f=>typeof f=="string"?f===d[0]:d[0].match(f));)d.shift()}let l=c.source.split(`
`).map(d=>d.trim().replace("at ","")).filter(d=>d!=="");return u(l,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),l.reverse()}let o=new jR;for(let c of n){let u=i(c);for(let l=0;l<=u.length;l++)o.add(u.slice(0,l).join(`
`),c)}n.sort(qR(c=>c.idx,HR));let s="",a=0;for(let c of n.slice(0,e)){a++;let u=i(c),l=[];for(let d=0;d<u.length;d++){let p=u[d];p=`(shared with ${o.get(u.slice(0,d+1).join(`
`)).size}/${n.length} leaks) at ${p}`;let m=o.get(u.slice(0,d).join(`
`)),h=Ate([...m].map(g=>i(g)[d]),g=>g);delete h[u[d]];for(let[g,v]of Object.entries(h))l.unshift(`    - stacktraces of ${v.length} other leaks continue with ${g}`);l.unshift(p)}s+=`


==================== Leaking disposable ${a}/${n.length}: ${c.value.constructor.name} ====================
${l.join(`
`)}
============================================================

`}return n.length>e&&(s+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:s}}};function gDe(t){Cb=t}if(hDe){let t="__is_disposable_tracked__";gDe(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ur.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ur.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function Rb(t){return Cb?.trackDisposable(t),t}function Ab(t){Cb?.markAsDisposed(t)}function pF(t,e){Cb?.setParent(t,e)}function vDe(t,e){if(Cb)for(let r of t)Cb.setParent(r,e)}function Dte(t){return typeof t.dispose=="function"&&t.dispose.length===0}function Pb(t){if(R0.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function GR(...t){let e=Sl(()=>Pb(t));return vDe(t,e),e}function Sl(t){let e=Rb({dispose:aF(()=>{Ab(e),t()})});return e}var Ht=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;Rb(this)}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(Ab(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Pb(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return pF(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),pF(e,null))}},Ur=class{constructor(){this._store=new Ht;Rb(this),pF(this._store,this)}static{this.None=Object.freeze({dispose(){}})}dispose(){Ab(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var wb=class{constructor(){this._store=new Map;this._isDisposed=!1;Rb(this)}dispose(){Ab(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Pb(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,r,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,r)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var _n=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},gT=class{constructor(){this._first=_n.Undefined;this._last=_n.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===_n.Undefined}clear(){let e=this._first;for(;e!==_n.Undefined;){let r=e.next;e.prev=_n.Undefined,e.next=_n.Undefined,e=r}this._first=_n.Undefined,this._last=_n.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new _n(e);if(this._first===_n.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==_n.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==_n.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==_n.Undefined&&e.next!==_n.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===_n.Undefined&&e.next===_n.Undefined?(this._first=_n.Undefined,this._last=_n.Undefined):e.next===_n.Undefined?(this._last=this._last.prev,this._last.next=_n.Undefined):e.prev===_n.Undefined&&(this._first=this._first.next,this._first.prev=_n.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==_n.Undefined;)yield e.element,e=e.next}};var yDe=globalThis.performance&&typeof globalThis.performance.now=="function",lm=class t{static create(e){return new t(e)}constructor(e){this._now=yDe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var Nte=!1,bDe=!1,Db;(z=>{z.None=()=>Ur.None;function e(D){if(bDe){let{onDidAddListener:E}=D,k=vT.create(),F=0;D.onDidAddListener=()=>{++F===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),k.print()),E?.()}}}function r(D,E){return p(D,()=>{},0,void 0,!0,void 0,E)}z.defer=r;function n(D){return(E,k=null,F)=>{let N=!1,te;return te=D(pe=>{if(!N)return te?te.dispose():N=!0,E.call(k,pe)},null,F),N&&te.dispose(),te}}z.once=n;function i(D,E,k){return l((F,N=null,te)=>D(pe=>F.call(N,E(pe)),null,te),k)}z.map=i;function o(D,E,k){return l((F,N=null,te)=>D(pe=>{E(pe),F.call(N,pe)},null,te),k)}z.forEach=o;function s(D,E,k){return l((F,N=null,te)=>D(pe=>E(pe)&&F.call(N,pe),null,te),k)}z.filter=s;function a(D){return D}z.signal=a;function c(...D){return(E,k=null,F)=>{let N=GR(...D.map(te=>te(pe=>E.call(k,pe))));return d(N,F)}}z.any=c;function u(D,E,k,F){let N=k;return i(D,te=>(N=E(N,te),N),F)}z.reduce=u;function l(D,E){let k,F={onWillAddFirstListener(){k=D(N.fire,N)},onDidRemoveLastListener(){k?.dispose()}};E||e(F);let N=new Br(F);return E?.add(N),N.event}function d(D,E){return E instanceof Array?E.push(D):E&&E.add(D),D}function p(D,E,k=100,F=!1,N=!1,te,pe){let ne,se,ze,J=0,ut,He={leakWarningThreshold:te,onWillAddFirstListener(){ne=D(ur=>{J++,se=E(se,ur),F&&!ze&&(yt.fire(se),se=void 0),ut=()=>{let fe=se;se=void 0,ze=void 0,(!F||J>1)&&yt.fire(fe),J=0},typeof k=="number"?(clearTimeout(ze),ze=setTimeout(ut,k)):ze===void 0&&(ze=0,queueMicrotask(ut))})},onWillRemoveListener(){N&&J>0&&ut?.()},onDidRemoveLastListener(){ut=void 0,ne.dispose()}};pe||e(He);let yt=new Br(He);return pe?.add(yt),yt.event}z.debounce=p;function f(D,E=0,k){return z.debounce(D,(F,N)=>F?(F.push(N),F):[N],E,void 0,!0,void 0,k)}z.accumulate=f;function m(D,E=(F,N)=>F===N,k){let F=!0,N;return s(D,te=>{let pe=F||!E(te,N);return F=!1,N=te,pe},k)}z.latch=m;function h(D,E,k){return[z.filter(D,E,k),z.filter(D,F=>!E(F),k)]}z.split=h;function g(D,E=!1,k=[],F){let N=k.slice(),te=D(se=>{N?N.push(se):ne.fire(se)});F&&F.add(te);let pe=()=>{N?.forEach(se=>ne.fire(se)),N=null},ne=new Br({onWillAddFirstListener(){te||(te=D(se=>ne.fire(se)),F&&F.add(te))},onDidAddFirstListener(){N&&(E?setTimeout(pe):pe())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return F&&F.add(ne),ne.event}z.buffer=g;function v(D,E){return(F,N,te)=>{let pe=E(new y);return D(function(ne){let se=pe.evaluate(ne);se!==b&&F.call(N,se)},void 0,te)}}z.chain=v;let b=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(E){return this.steps.push(E),this}forEach(E){return this.steps.push(k=>(E(k),k)),this}filter(E){return this.steps.push(k=>E(k)?k:b),this}reduce(E,k){let F=k;return this.steps.push(N=>(F=E(F,N),F)),this}latch(E=(k,F)=>k===F){let k=!0,F;return this.steps.push(N=>{let te=k||!E(N,F);return k=!1,F=N,te?N:b}),this}evaluate(E){for(let k of this.steps)if(E=k(E),E===b)break;return E}}function S(D,E,k=F=>F){let F=(...ne)=>pe.fire(k(...ne)),N=()=>D.on(E,F),te=()=>D.removeListener(E,F),pe=new Br({onWillAddFirstListener:N,onDidRemoveLastListener:te});return pe.event}z.fromNodeEventEmitter=S;function x(D,E,k=F=>F){let F=(...ne)=>pe.fire(k(...ne)),N=()=>D.addEventListener(E,F),te=()=>D.removeEventListener(E,F),pe=new Br({onWillAddFirstListener:N,onDidRemoveLastListener:te});return pe.event}z.fromDOMEventEmitter=x;function T(D){return new Promise(E=>n(D)(E))}z.toPromise=T;function L(D){let E=new Br;return D.then(k=>{E.fire(k)},()=>{E.fire(void 0)}).finally(()=>{E.dispose()}),E.event}z.fromPromise=L;function M(D,E,k){return E(k),D(F=>E(F))}z.runAndSubscribe=M;class q{constructor(E,k){this._observable=E;this._counter=0;this._hasChanged=!1;let F={onWillAddFirstListener:()=>{E.addObserver(this)},onDidRemoveLastListener:()=>{E.removeObserver(this)}};k||e(F),this.emitter=new Br(F),k&&k.add(this.emitter)}beginUpdate(E){this._counter++}handlePossibleChange(E){}handleChange(E,k){this._hasChanged=!0}endUpdate(E){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function O(D,E){return new q(D,E).emitter.event}z.fromObservable=O;function Z(D){return(E,k,F)=>{let N=0,te=!1,pe={beginUpdate(){N++},endUpdate(){N--,N===0&&(D.reportChanges(),te&&(te=!1,E.call(k)))},handlePossibleChange(){},handleChange(){te=!0}};D.addObserver(pe),D.reportChanges();let ne={dispose(){D.removeObserver(pe)}};return F instanceof Ht?F.add(ne):Array.isArray(F)&&F.push(ne),ne}}z.fromObservableLight=Z})(Db||={});var fF=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new lm,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},Lte=-1;var mF=class{constructor(e,r=Math.random().toString(18).slice(2,5)){this.threshold=e;this.name=r;this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let o,s=0;for(let[a,c]of this._stacks)(!o||s<c)&&(o=a,s=c);console.warn(`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${s}):`),console.warn(o)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}},vT=class t{constructor(e){this.value=e}static create(){return new t(new Error().stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},_De=0,kb=class{constructor(e){this.value=e;this.id=_De++}},xDe=2,SDe=(t,e)=>{if(t instanceof kb)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},Br=class{constructor(e){this._size=0;this._options=e,this._leakageMon=Lte>0||this._options?.leakWarningThreshold?new mF(this._options?.leakWarningThreshold??Lte):void 0,this._perfMon=this._options?._profName?new fF(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(Nte){let e=this._listeners;queueMicrotask(()=>{SDe(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),Ur.None;if(this._disposed)return Ur.None;r&&(e=e.bind(r));let i=new kb(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=vT.create(),o=this._leakageMon.check(i.stack,this._size+1)),Nte&&(i.stack=s??vT.create()),this._listeners?this._listeners instanceof kb?(this._deliveryQueue??=new hF,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=Sl(()=>{o?.(),this._removeListener(i)});return n instanceof Ht?n.add(a):Array.isArray(n)&&n.push(a),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*xDe<=r.length){let o=0;for(let s=0;s<r.length;s++)r[s]?r[o++]=r[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||Ib;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof kb)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var hF=class{constructor(){this.i=-1;this.end=0}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var Ote=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),qr;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof Nb?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Db.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ote})})(qr||={});var Nb=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ote:(this._emitter||(this._emitter=new Br),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Lb=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Nb),this._token}cancel(){this._token?this._token instanceof Nb&&this._token.cancel():this._token=qr.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Nb&&this._token.dispose():this._token=qr.None}};function EDe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}function Mte(t,e,...r){return EDe(e,r)}var Ob="en",WR=!1,KR=!1,yT=!1,IDe=!1,Ute=!1,gF=!1,CDe=!1,wDe=!1,RDe=!1,ADe=!1,VR,zR=Ob,Fte=Ob,PDe,vp,yp=globalThis,Qa;typeof yp.vscode<"u"&&typeof yp.vscode.process<"u"?Qa=yp.vscode.process:typeof process<"u"&&(Qa=process);var Bte=typeof Qa?.versions?.electron=="string",kDe=Bte&&Qa?.type==="renderer";if(typeof Qa=="object"){WR=Qa.platform==="win32",KR=Qa.platform==="darwin",yT=Qa.platform==="linux",IDe=yT&&!!Qa.env.SNAP&&!!Qa.env.SNAP_REVISION,CDe=Bte,RDe=!!Qa.env.CI||!!Qa.env.BUILD_ARTIFACTSTAGINGDIRECTORY,VR=Ob,zR=Ob;let t=Qa.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];VR=e.locale,Fte=e.osLocale,zR=r||Ob,PDe=e._translationsConfigFile}catch{}Ute=!0}else typeof navigator=="object"&&!kDe?(vp=navigator.userAgent,WR=vp.indexOf("Windows")>=0,KR=vp.indexOf("Macintosh")>=0,wDe=(vp.indexOf("Macintosh")>=0||vp.indexOf("iPad")>=0||vp.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,yT=vp.indexOf("Linux")>=0,ADe=vp?.indexOf("Mobi")>=0,gF=!0,VR=(Mte({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),void 0)||Ob,zR=VR,Fte=navigator.language):console.error("Unable to resolve platform.");var $R=0;KR?$R=1:WR?$R=3:yT&&($R=2);var Tl=WR,qte=KR,Hte=yT;var jte=Ute;var Gte=gF,DDe=gF&&typeof yp.importScripts=="function",Vte=DDe?yp.origin:void 0;var zte=$R,El=vp,dm=zR,NDe;(n=>{function t(){return dm}n.value=t;function e(){return dm.length===2?dm==="en":dm.length>=3?dm[0]==="e"&&dm[1]==="n"&&dm[2]==="-":!1}n.isDefaultVariant=e;function r(){return dm==="en"}n.isDefault=r})(NDe||={});var LDe=typeof yp.postMessage=="function"&&!yp.importScripts,$te=(()=>{if(LDe){let t=[];yp.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),yp.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var ODe=!!(El&&El.indexOf("Chrome")>=0),dut=!!(El&&El.indexOf("Firefox")>=0),put=!!(!ODe&&El&&El.indexOf("Safari")>=0),fut=!!(El&&El.indexOf("Edg/")>=0),mut=!!(El&&El.indexOf("Android")>=0);var A0,vF=globalThis.vscode;if(typeof vF<"u"&&typeof vF.process<"u"){let t=vF.process;A0={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?A0={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:A0={get platform(){return Tl?"win32":qte?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var bT=A0.cwd,Wte=A0.env,Kte=A0.platform,vut=A0.arch;var UDe=65,BDe=97,qDe=90,HDe=122,mm=46,lo=47,da=92,pm=58,jDe=63,YR=class extends Error{constructor(r,n,i){let o;typeof n=="string"&&n.indexOf("not ")===0?(o="must not be",n=n.replace(/^not /,"")):o="must be";let s=r.indexOf(".")!==-1?"property":"argument",a=`The "${r}" ${s} ${o} of type ${n}`;a+=`. Received type ${typeof i}`;super(a);this.code="ERR_INVALID_ARG_TYPE"}};function GDe(t,e){if(t===null||typeof t!="object")throw new YR(e,"Object",t)}function Zn(t,e){if(typeof t!="string")throw new YR(e,"string",t)}var pa=Kte==="win32";function Ut(t){return t===lo||t===da}function yF(t){return t===lo}function fm(t){return t>=UDe&&t<=qDe||t>=BDe&&t<=HDe}function QR(t,e,r,n){let i="",o=0,s=-1,a=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=lo}if(n(c)){if(!(s===u-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==mm||i.charCodeAt(i.length-2)!==mm){if(i.length>2){let l=i.lastIndexOf(r);l===-1?(i="",o=0):(i=i.slice(0,l),o=i.length-1-i.lastIndexOf(r)),s=u,a=0;continue}else if(i.length!==0){i="",o=0,s=u,a=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(s+1,u)}`:i=t.slice(s+1,u),o=u-s-1;s=u,a=0}else c===mm&&a!==-1?++a:a=-1}return i}function Yte(t,e){GDe(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}var ei={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Zn(o,"path"),o.length===0)continue}else e.length===0?o=bT():(o=Wte[`=${e}`]||bT(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===da)&&(o=`${e}\\`));let s=o.length,a=0,c="",u=!1,l=o.charCodeAt(0);if(s===1)Ut(l)&&(a=1,u=!0);else if(Ut(l))if(u=!0,Ut(o.charCodeAt(1))){let d=2,p=d;for(;d<s&&!Ut(o.charCodeAt(d));)d++;if(d<s&&d!==p){let f=o.slice(p,d);for(p=d;d<s&&Ut(o.charCodeAt(d));)d++;if(d<s&&d!==p){for(p=d;d<s&&!Ut(o.charCodeAt(d));)d++;(d===s||d!==p)&&(c=`\\\\${f}\\${o.slice(p,d)}`,a=d)}}}else a=1;else fm(l)&&o.charCodeAt(1)===pm&&(c=o.slice(0,2),a=2,s>2&&Ut(o.charCodeAt(2))&&(u=!0,a=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(a)}\\${r}`,n=u,u&&e.length>0)break}return r=QR(r,!n,"\\",Ut),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Zn(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return yF(o)?"\\":t;if(Ut(o))if(i=!0,Ut(t.charCodeAt(1))){let a=2,c=a;for(;a<e&&!Ut(t.charCodeAt(a));)a++;if(a<e&&a!==c){let u=t.slice(c,a);for(c=a;a<e&&Ut(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!Ut(t.charCodeAt(a));)a++;if(a===e)return`\\\\${u}\\${t.slice(c)}\\`;a!==c&&(n=`\\\\${u}\\${t.slice(c,a)}`,r=a)}}}else r=1;else fm(o)&&t.charCodeAt(1)===pm&&(n=t.slice(0,2),r=2,e>2&&Ut(t.charCodeAt(2))&&(i=!0,r=3));let s=r<e?QR(t.slice(r),!i,"\\",Ut):"";return s.length===0&&!i&&(s="."),s.length>0&&Ut(t.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(t){Zn(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ut(r)||e>2&&fm(r)&&t.charCodeAt(1)===pm&&Ut(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let s=t[o];Zn(s,"path"),s.length>0&&(e===void 0?e=r=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ut(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ut(r.charCodeAt(1))&&(++i,o>2&&(Ut(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ut(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ei.normalize(e)},relative(t,e){if(Zn(t,"from"),Zn(e,"to"),t===e)return"";let r=ei.resolve(t),n=ei.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===da;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===da;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===da;)a++;let c=e.length;for(;c-1>a&&e.charCodeAt(c-1)===da;)c--;let u=c-a,l=s<u?s:u,d=-1,p=0;for(;p<l;p++){let m=t.charCodeAt(i+p);if(m!==e.charCodeAt(a+p))break;m===da&&(d=p)}if(p!==l){if(d===-1)return n}else{if(u>l){if(e.charCodeAt(a+p)===da)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}s>l&&(t.charCodeAt(i+p)===da?d=p:p===2&&(d=3)),d===-1&&(d=0)}let f="";for(p=i+d+1;p<=o;++p)(p===o||t.charCodeAt(p)===da)&&(f+=f.length===0?"..":"\\..");return a+=d,f.length>0?`${f}${n.slice(a,c)}`:(n.charCodeAt(a)===da&&++a,n.slice(a,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ei.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===da){if(e.charCodeAt(1)===da){let r=e.charCodeAt(2);if(r!==jDe&&r!==mm)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(fm(e.charCodeAt(0))&&e.charCodeAt(1)===pm&&e.charCodeAt(2)===da)return`\\\\?\\${e}`;return t},dirname(t){Zn(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ut(i)?t:".";if(Ut(i)){if(r=n=1,Ut(t.charCodeAt(1))){let a=2,c=a;for(;a<e&&!Ut(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&Ut(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!Ut(t.charCodeAt(a));)a++;if(a===e)return t;a!==c&&(r=n=a+1)}}}}else fm(i)&&t.charCodeAt(1)===pm&&(r=e>2&&Ut(t.charCodeAt(2))?3:2,n=r);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(Ut(t.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Zn(e,"ext"),Zn(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&fm(t.charCodeAt(0))&&t.charCodeAt(1)===pm&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(Ut(c)){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ut(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Zn(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,s=0;t.length>=2&&t.charCodeAt(1)===pm&&fm(t.charCodeAt(0))&&(e=n=2);for(let a=t.length-1;a>=e;--a){let c=t.charCodeAt(a);if(Ut(c)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),c===mm?r===-1?r=a:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||i===-1||s===0||s===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:Yte.bind(null,"\\"),parse(t){Zn(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ut(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ut(i)){if(n=1,Ut(t.charCodeAt(1))){let d=2,p=d;for(;d<r&&!Ut(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&Ut(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&!Ut(t.charCodeAt(d));)d++;d===r?n=d:d!==p&&(n=d+1)}}}}else if(fm(i)&&t.charCodeAt(1)===pm){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ut(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,s=n,a=-1,c=!0,u=t.length-1,l=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ut(i)){if(!c){s=u+1;break}continue}a===-1&&(c=!1,a=u+1),i===mm?o===-1?o=u:l!==1&&(l=1):o!==-1&&(l=-1)}return a!==-1&&(o===-1||l===0||l===1&&o===a-1&&o===s+1?e.base=e.name=t.slice(s,a):(e.name=t.slice(s,o),e.base=t.slice(s,a),e.ext=t.slice(o,a))),s>0&&s!==n?e.dir=t.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},VDe=(()=>{if(pa){let t=/\\/g;return()=>{let e=bT().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>bT()})(),_r={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:VDe();Zn(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===lo)}return e=QR(e,!r,"/",yF),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Zn(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===lo,r=t.charCodeAt(t.length-1)===lo;return t=QR(t,!e,"/",yF),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Zn(t,"path"),t.length>0&&t.charCodeAt(0)===lo},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Zn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":_r.normalize(e)},relative(t,e){if(Zn(t,"from"),Zn(e,"to"),t===e||(t=_r.resolve(t),e=_r.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,s=e.length-o,a=i<s?i:s,c=-1,u=0;for(;u<a;u++){let d=t.charCodeAt(r+u);if(d!==e.charCodeAt(o+u))break;d===lo&&(c=u)}if(u===a)if(s>a){if(e.charCodeAt(o+u)===lo)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>a&&(t.charCodeAt(r+u)===lo?c=u:u===0&&(c=0));let l="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===lo)&&(l+=l.length===0?"..":"/..");return`${l}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(Zn(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===lo,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===lo){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Zn(e,"ext"),Zn(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===lo){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===lo){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Zn(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let s=t.length-1;s>=0;--s){let a=t.charCodeAt(s);if(a===lo){if(!i){r=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===mm?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Yte.bind(null,"/"),parse(t){Zn(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===lo,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,c=t.length-1,u=0;for(;c>=n;--c){let l=t.charCodeAt(c);if(l===lo){if(!a){o=c+1;break}continue}s===-1&&(a=!1,s=c+1),l===mm?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(s!==-1){let l=o===0&&r?1:o;i===-1||u===0||u===1&&i===s-1&&i===o+1?e.base=e.name=t.slice(l,s):(e.name=t.slice(l,i),e.base=t.slice(l,s),e.ext=t.slice(i,s))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};_r.win32=ei.win32=ei;_r.posix=ei.posix=_r;var bF=pa?ei.normalize:_r.normalize,zDe=pa?ei.isAbsolute:_r.isAbsolute,$De=pa?ei.join:_r.join,Qte=pa?ei.resolve:_r.resolve,Xte=pa?ei.relative:_r.relative,Jte=pa?ei.dirname:_r.dirname,XR=pa?ei.basename:_r.basename,yut=pa?ei.extname:_r.extname,but=pa?ei.format:_r.format,_ut=pa?ei.parse:_r.parse,xut=pa?ei.toNamespacedPath:_r.toNamespacedPath,Mb=pa?ei.sep:_r.sep,Sut=pa?ei.delimiter:_r.delimiter;var JR=class{constructor(e){this.fn=e;this.lastCache=void 0;this.lastArgKey=void 0}get(e){let r=JSON.stringify(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this.fn(e)),this.lastCache}};var Ms=class{constructor(e){this.executor=e;this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function P0(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ZR(t,e){let r=0,n=e.charCodeAt(0);for(let i=t.length-1;i>=0;i--)t.charCodeAt(i)===n&&r++;return r}function Fb(t){return t.split(/\r\n|\r|\n/)}function nre(t){for(let e=0,r=t.length;e<r;e++){let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function eA(t,e,r){let n=[],i=0;for(let o of t.matchAll(e)){if(n.push(t.slice(i,o.index)),o.index===void 0)throw new Error("match.index should be defined");i=o.index+o[0].length,n.push(r(o[0],...o.slice(1),o.index,t,o.groups))}return n.push(t.slice(i)),Promise.all(n).then(o=>o.join(""))}function ire(t,e){return t<e?-1:t>e?1:0}function WDe(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let c=t.charCodeAt(r),u=e.charCodeAt(i);if(c<u)return-1;if(c>u)return 1}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function ore(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let c=t.charCodeAt(r),u=e.charCodeAt(i);if(c===u)continue;if(c>=128||u>=128)return WDe(t.toLowerCase(),e.toLowerCase(),r,n,i,o);Zte(c)&&(c-=32),Zte(u)&&(u-=32);let l=c-u;if(l!==0)return l}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function Zte(t){return t>=97&&t<=122}function tA(t,e){return t.length===e.length&&ore(t,e)===0}function _T(t,e){let r=e.length;return e.length>t.length?!1:ore(t,e,0,r)===0}function rA(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}function sre(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}var Nut=String.fromCharCode(65279);var ere=class t{static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=KDe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function KDe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var tre=class t{constructor(e){this.confusableDictionary=e}static{this.ambiguousCharacterData=new Ms(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new JR(e=>{function r(l){let d=new Map;for(let p=0;p<l.length;p+=2)d.set(l[p],l[p+1]);return d}function n(l,d){let p=new Map(l);for(let[f,m]of d)p.set(f,m);return p}function i(l,d){if(!l)return d;let p=new Map;for(let[f,m]of l)d.has(f)&&p.set(f,m);return p}let o=this.ambiguousCharacterData.value,s=e.filter(l=>!l.startsWith("_")&&l in o);s.length===0&&(s=["_default"]);let a;for(let l of s){let d=r(o[l]);a=i(a,d)}let c=r(o._common),u=n(c,a);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Ms(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},rre=class t{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static get codePoints(){return t.getData()}};function xT(t){return typeof t=="string"}function nA(t){return Array.isArray(t)&&t.every(e=>xT(e))}function xF(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}function Ub(t){return typeof t=="number"&&!isNaN(t)}function YDe(t){return typeof t>"u"}function ST(t){return!QDe(t)}function QDe(t){return YDe(t)||t===null}function iA(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function gm(t){return t===47||t===92}function SF(t){return t.replace(/[\\/]/g,_r.sep)}function cre(t){return t.indexOf("/")===-1&&(t=SF(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}function EF(t,e=_r.sep){if(!t)return"";let r=t.length,n=t.charCodeAt(0);if(gm(n)){if(gm(t.charCodeAt(1))&&!gm(t.charCodeAt(2))){let o=3,s=o;for(;o<r&&!gm(t.charCodeAt(o));o++);if(s!==o&&!gm(t.charCodeAt(o+1))){for(o+=1;o<r;o++)if(gm(t.charCodeAt(o)))return t.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(JDe(n)&&t.charCodeAt(1)===58)return gm(t.charCodeAt(2))?t.slice(0,2)+e:t.slice(0,2);let i=t.indexOf("://");if(i!==-1){for(i+=3;i<r;i++)if(gm(t.charCodeAt(i)))return t.slice(0,i+1)}return""}function TF(t,e,r,n=Mb){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!_T(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}function JDe(t){return t>=65&&t<=90||t>=97&&t<=122}var eNe=/^\w[\w\d+.-]*$/,tNe=/^\//,rNe=/^\/\//;function nNe(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!eNe.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!tNe.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(rNe.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function iNe(t,e){return!t&&!e?"file":t}function oNe(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==wu&&(e=wu+e):e=wu;break}return e}var nn="",wu="/",sNe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,gt=class t{static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||nn,this.authority=e.authority||nn,this.path=e.path||nn,this.query=e.query||nn,this.fragment=e.fragment||nn):(this.scheme=iNe(e,s),this.authority=r||nn,this.path=oNe(this.scheme,n||nn),this.query=i||nn,this.fragment=o||nn,nNe(this,s))}get fsPath(){return ET(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:s}=e;return r===void 0?r=this.scheme:r===null&&(r=nn),n===void 0?n=this.authority:n===null&&(n=nn),i===void 0?i=this.path:i===null&&(i=nn),o===void 0?o=this.query:o===null&&(o=nn),s===void 0?s=this.fragment:s===null&&(s=nn),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new vm(r,n,i,o,s)}static parse(e,r=!1){let n=sNe.exec(e);return n?new vm(n[2]||nn,oA(n[4]||nn),oA(n[5]||nn),oA(n[7]||nn),oA(n[9]||nn),r):new vm(nn,nn,nn,nn,nn)}static file(e){let r=nn;if(Tl&&(e=e.replace(/\\/g,wu)),e[0]===wu&&e[1]===wu){let n=e.indexOf(wu,2);n===-1?(r=e.substring(2),e=wu):(r=e.substring(2,n),e=e.substring(n)||wu)}return new vm("file",r,e,nn,nn)}static from(e,r){return new vm(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Tl&&e.scheme==="file"?n=t.file(ei.join(ET(e,!0),...r)).path:n=_r.join(e.path,...r),e.with({path:n})}toString(e=!1){return IF(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new vm(e);return r._formatted=e.external??null,r._fsPath=e._sep===dre?e.fsPath??null:null,r}}else return e}};function TT(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}var dre=Tl?1:void 0,vm=class extends gt{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=ET(this,!1)),this._fsPath}toString(r=!1){return r?IF(this,!0):(this._formatted||(this._formatted=IF(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=dre),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},pre={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function ure(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||r&&s===91||r&&s===93||r&&s===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let a=pre[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}function aNe(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=pre[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}function ET(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Tl&&(r=r.replace(/\//g,"\\")),r}function IF(t,e){let r=e?aNe:ure,n="",{scheme:i,authority:o,path:s,query:a,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=wu,n+=wu),o){let u=o.indexOf("@");if(u!==-1){let l=o.substr(0,u);o=o.substr(u+1),u=l.lastIndexOf(":"),u===-1?n+=r(l,!1,!1):(n+=r(l.substr(0,u),!1,!1),n+=":",n+=r(l.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let u=s.charCodeAt(1);u>=65&&u<=90&&(s=`/${String.fromCharCode(u+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let u=s.charCodeAt(0);u>=65&&u<=90&&(s=`${String.fromCharCode(u+32)}:${s.substr(2)}`)}n+=r(s,!0,!1)}return a&&(n+="?",n+=r(a,!1,!1)),c&&(n+="#",n+=e?c:ure(c,!1,!1)),n}function fre(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+fre(t.substr(3)):t}}var lre=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function oA(t){return t.match(lre)?t.replace(lre,e=>fre(e)):t}var Hr;(F=>(F.inMemory="inmemory",F.vscode="vscode",F.internal="private",F.walkThrough="walkThrough",F.walkThroughSnippet="walkThroughSnippet",F.http="http",F.https="https",F.file="file",F.mailto="mailto",F.untitled="untitled",F.data="data",F.command="command",F.vscodeRemote="vscode-remote",F.vscodeRemoteResource="vscode-remote-resource",F.vscodeManagedRemoteResource="vscode-managed-remote-resource",F.vscodeUserData="vscode-userdata",F.vscodeCustomEditor="vscode-custom-editor",F.vscodeNotebookCell="vscode-notebook-cell",F.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",F.vscodeNotebookCellOutput="vscode-notebook-cell-output",F.vscodeInteractiveInput="vscode-interactive-input",F.vscodeSettings="vscode-settings",F.vscodeWorkspaceTrust="vscode-workspace-trust",F.vscodeTerminal="vscode-terminal",F.vscodeChatSesssion="vscode-chat-editor",F.webviewPanel="webview-panel",F.vscodeWebview="vscode-webview",F.extension="extension",F.vscodeFileResource="vscode-file",F.tmp="tmp",F.vsls="vsls",F.vscodeSourceControl="vscode-scm"))(Hr||={});var cNe="tkn",CF=class{constructor(){this._hosts=Object.create(null);this._ports=Object.create(null);this._connectionTokens=Object.create(null);this._preferredWebSchema="http";this._delegate=null;this._remoteResourcesPath=`/${Hr.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e){this._remoteResourcesPath=`${e}/${Hr.vscodeRemoteResource}`}set(e,r,n){this._hosts[e]=r,this._ports[e]=n}setConnectionToken(e,r){this._connectionTokens[e]=r}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Ib(a),e}let r=e.authority,n=this._hosts[r];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[r],o=this._connectionTokens[r],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${cNe}=${encodeURIComponent(o)}`),gt.from({scheme:Gte?this._preferredWebSchema:Hr.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},uNe=new CF;var lNe="vscode-app",wF=class t{static{this.FALLBACK_AUTHORITY=lNe}asBrowserUri(e){let r=this.toUri(e,require);return this.uriToBrowserUri(r)}uriToBrowserUri(e){return e.scheme===Hr.vscodeRemote?uNe.rewrite(e):e.scheme===Hr.file&&(jte||Vte===`${Hr.vscodeFileResource}://${t.FALLBACK_AUTHORITY}`)?e.with({scheme:Hr.vscodeFileResource,authority:e.authority||t.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let r=this.toUri(e,require);return this.uriToFileUri(r)}uriToFileUri(e){return e.scheme===Hr.vscodeFileResource?e.with({scheme:Hr.file,authority:e.authority!==t.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,r){return gt.isUri(e)?e:gt.parse(r.toUrl(e))}},Kut=new wF,dNe;(o=>{let t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(t.get("3"));let r="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:gt.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let c=a?.get(r);if(c)return t.get(c)}o.getHeadersFromQuery=n;function i(s,a,c){if(!globalThis.crossOriginIsolated)return;let u=a&&c?"3":c?"2":"1";s instanceof URLSearchParams?s.set(r,u):s[r]=u}o.addSearchParam=i})(dNe||={});function bp(t){return ET(t,!0)}var IT=class{constructor(e){this._ignorePathCasing=e}compare(e,r,n=!1){return e===r?0:ire(this.getComparisonKey(e,n),this.getComparisonKey(r,n))}isEqual(e,r,n=!1){return e===r?!0:!e||!r?!1:this.getComparisonKey(e,n)===this.getComparisonKey(r,n)}getComparisonKey(e,r=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,r,n=!1){if(e.scheme===r.scheme){if(e.scheme===Hr.file)return TF(bp(e),bp(r),this._ignorePathCasing(e))&&e.query===r.query&&(n||e.fragment===r.fragment);if(mre(e.authority,r.authority))return TF(e.path,r.path,this._ignorePathCasing(e),"/")&&e.query===r.query&&(n||e.fragment===r.fragment)}return!1}joinPath(e,...r){return gt.joinPath(e,...r)}basenameOrAuthority(e){return xc(e)||e.authority}basename(e){return _r.basename(e.path)}extname(e){return _r.extname(e.path)}dirname(e){if(e.path.length===0)return e;let r;return e.scheme===Hr.file?r=gt.file(Jte(bp(e))).path:(r=_r.dirname(e.path),e.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),r="/")),e.with({path:r})}normalizePath(e){if(!e.path.length)return e;let r;return e.scheme===Hr.file?r=gt.file(bF(bp(e))).path:r=_r.normalize(e.path),e.with({path:r})}relativePath(e,r){if(e.scheme!==r.scheme||!mre(e.authority,r.authority))return;if(e.scheme===Hr.file){let o=Xte(bp(e),bp(r));return Tl?SF(o):o}let n=e.path||"/",i=r.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return _r.relative(n,i)}resolvePath(e,r){if(e.scheme===Hr.file){let n=gt.file(Qte(bp(e),r));return e.with({authority:n.authority,path:n.path})}return r=cre(r),e.with({path:_r.resolve(e.path,r)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,r){return e===r||e!==void 0&&r!==void 0&&tA(e,r)}hasTrailingPathSeparator(e,r=Mb){if(e.scheme===Hr.file){let n=bp(e);return n.length>EF(n).length&&n[n.length-1]===r}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,r=Mb){return hre(e,r)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,r=Mb){let n=!1;if(e.scheme===Hr.file){let i=bp(e);n=i!==void 0&&i.length===EF(i).length&&i[i.length-1]===r}else{r="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!hre(e,r)?e.with({path:e.path+"/"}):e}},xr=new IT(()=>!1),tlt=new IT(t=>t.scheme===Hr.file?!Hte:!0),rlt=new IT(t=>!0),RF=xr.isEqual.bind(xr),nlt=xr.isEqualOrParent.bind(xr),ilt=xr.getComparisonKey.bind(xr),olt=xr.basenameOrAuthority.bind(xr),xc=xr.basename.bind(xr),Xa=xr.extname.bind(xr),slt=xr.dirname.bind(xr),alt=xr.joinPath.bind(xr),clt=xr.normalizePath.bind(xr),gre=xr.relativePath.bind(xr),ult=xr.resolvePath.bind(xr),llt=xr.isAbsolutePath.bind(xr),mre=xr.isEqualAuthority.bind(xr),hre=xr.hasTrailingPathSeparator.bind(xr),dlt=xr.removeTrailingPathSeparator.bind(xr),plt=xr.addTrailingPathSeparator.bind(xr);var pNe;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(l=>{let[d,p]=l.split(":");d&&p&&a.set(d,p)});let u=s.path.substring(0,s.path.indexOf(";"));return u&&a.set(o.META_DATA_MIME,u),a}o.parseMetaData=i})(pNe||={});var fNe=Symbol("MicrotaskDelay");function qb(t,e,r){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(r)});t.then(n,i).finally(()=>o.dispose())})}function N0(t,e,r){let n,i=setTimeout(()=>{n?.(void 0),r?.()},e);return Promise.race([t.finally(()=>clearTimeout(i)),new Promise(o=>n=o)])}var Bb=class{constructor(e){this._size=0;this._isDisposed=!1;this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new Br}whenIdle(){return this.size>0?Db.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((r,n)=>{this.outstandingPromises.push({factory:e,c:r,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}};var aA=class{constructor(e,r){this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}},cA=class{constructor(){this.disposable=void 0}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,r,n=globalThis){this.cancel();let i=n.setInterval(()=>{e()},r);this.disposable=Sl(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel()}};var mNe,sA;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?sA=(t,e)=>{$te(()=>{if(r)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:sA=(t,e,r)=>{let n=t.requestIdleCallback(e,typeof r=="number"?{timeout:r}:void 0),i=!1;return{dispose(){i||(i=!0,t.cancelIdleCallback(n))}}},mNe=t=>sA(globalThis,t)})();var AF=class{constructor(e,r){this._didRun=!1;this._executor=()=>{try{this._value=r()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=sA(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},uA=class extends AF{constructor(e){super(globalThis,e)}};var k0=class{get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new la)}},hNe;(r=>{async function t(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}r.settled=t;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}r.withAsyncBody=e})(hNe||={});var Ru=class t{static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromises(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Br,queueMicrotask(async()=>{let r={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{await Promise.resolve(e(r)),this.resolve()}catch(n){this.reject(n)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Db.toPromise(this._onStateChanged.event)}while(!0)}}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var D0=class{constructor(){this._deferred=new k0;this._asyncIterable=new Ru(n=>{if(e){n.reject(e);return}return r&&n.emitMany(r),this._errorFn=i=>n.reject(i),this._emitFn=i=>n.emitOne(i),this._deferred.p});let e,r;this._emitFn=n=>{r||(r=[]),r.push(n)},this._errorFn=n=>{e||(e=n)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var Lt=class{constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};var PF=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}},CT=class{constructor(e){this._hashFn=e;this._nodes=new Map}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new PF(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};var L0=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var gNe=!1,lA=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},dA=class t{constructor(e=new L0,r=!1,n,i=gNe){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._activeInstantiations=new Set;this._services.set(ua,this),this._globalGraph=i?n?._globalGraph??new CT(o=>o):void 0}createChild(e){return new t(e,this._strict,this,this._enableTracing)}invokeFunction(e,...r){let n=wT.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s=>{if(i)throw xte("service accessor is only valid during the invocation of its target method");let a=this._getOrCreateServiceInstance(s,n);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){let n,i;return e instanceof Lt?(n=wT.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=wT.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=Cu.getServiceDependencies(e).sort((a,c)=>a.index-c.index),o=[];for(let a of i){let c=this._getOrCreateServiceInstance(a.id,n);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(c)}let s=i.length>0?i[0].index:r.length;if(r.length!==s){console.trace(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${r.length} static arguments`);let a=s-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,s)}return Reflect.construct(e,r.concat(o))}_setServiceInstance(e,r){if(this._services.get(e)instanceof Lt)this._services.set(e,r);else if(this._parent)this._parent._setServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Lt?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new CT(a=>a.id.toString()),o=0,s=[{id:e,desc:r,_trace:n}];for(;s.length;){let a=s.pop();if(i.lookupOrInsertNode(a),o++>1e3)throw new lA(i);for(let c of Cu.getServiceDependencies(a.desc.ctor)){let u=this._getServiceInstanceOrDescriptor(c.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(a.id),String(c.id)),u instanceof Lt){let l={id:c.id,desc:u,_trace:a._trace.branch(c.id,!0)};i.insertEdge(a,l),s.push(l)}}}for(;;){let a=i.roots();if(a.length===0){if(!i.isEmpty())throw new lA(i);break}for(let{data:c}of a){if(this._getServiceInstanceOrDescriptor(c.id)instanceof Lt){let l=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setServiceInstance(c.id,l)}i.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof Lt)return this._createServiceInstance(e,r,n,i,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o){if(i){let s=new t(void 0,this._strict,this,this._enableTracing);s._globalGraphImplicitDependency=String(e);let a=new Map,c=new uA(()=>{let u=s._createInstance(r,n,o);for(let[l,d]of a){let p=u[l];if(typeof p=="function")for(let f of d)f.disposable=p.apply(u,f.listener)}return a.clear(),u});return new Proxy(Object.create(null),{get(u,l){if(!c.isInitialized&&typeof l=="string"&&(l.startsWith("onDid")||l.startsWith("onWill"))){let f=a.get(l);return f||(f=new gT,a.set(l,f)),(h,g,v)=>{if(c.isInitialized)return c.value[l](h,g,v);{let b={listener:[h,g,v],disposable:void 0},y=f.push(b);return Sl(()=>{y(),b.disposable?.dispose()})}}}if(l in u)return u[l];let d=c.value,p=d[l];return typeof p!="function"||(p=p.bind(d),u[l]=p),p},set(u,l,d){return c.value[l]=d,!0},getPrototypeOf(u){return r.prototype}})}else return this._createInstance(r,n,o)}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var wT=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,s){let a=[],c=new Array(o+1).join("	");for(let[u,l,d]of s._dep)if(l&&d){r=!0,a.push(`${c}CREATES -> ${u}`);let p=n(o+1,d);p&&a.push(p)}else a.push(`${c}uses -> ${u}`);return a.join(`
`)}let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var Ct=re("IServicesAccessor"),pA=class{constructor(e,r){this._isSealed=!1;let n=Array.isArray(e)?new L0(...e):e??new L0;n.set(Ct,this);let i=r?r._pair.insta.createChild(n):new dA(n,!0);this._pair={services:n,insta:i}}get(e){return this._pair.insta.invokeFunction(r=>r.get(e))}safeGet(e){try{return this.get(e)}catch{return}}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._pair.services.set(e,r)}defineIfNotDefined(e,r){this.safeGet(e)===void 0&&this.define(e,r())}seal(){this._isSealed=!0}toString(){return""}};var fa=yre(),fA=fa.buildType!=="dev",Il=fa.isPreRelease||!fA,Jlt=fa.engines.vscode;var RT=class{constructor(e,r){this.name=e;this.version=r}format(){return`${this.name}/${this.version}`}},mt=re("IEnvService");var lt=(n=>(n[n.InlineChat=1]="InlineChat",n[n.PanelChat=2]="PanelChat",n[n.Other=3]="Other",n))(lt||{});(e=>{function t(r){switch(r){case 1:return"conversationInline";case 2:return"conversationPanel";default:return"none"}}e.toString=t})(lt||={});var ym="github.copilot",Pe=re("IConfigurationService"),hA=class{getConfigMixedWithDefaults(e){if(this.isDefaultSettingOverwritten(e)){let r=this.getConfig(e);return xF(r)&&xF(e.defaultValue)?{...e.defaultValue,...r}:r}return e.defaultValue}},mA;function yNe(){if(!mA){mA=new Map;let t=fa.contributes.configuration.properties;for(let e of Object.keys(t))typeof t[e].default<"u"&&mA.set(e,t[e].default)}return mA}function Nt(t,e){let r=yNe().get(`${ym}.${t}`);if(typeof r<"u"&&e!==r)throw new Error(`The default value for setting ${t} is different in package.json and in code`);let n=t.indexOf("."),i=t.substring(0,n);if(i!=="editor"&&i!=="chat"&&i!=="advanced"&&i!=="notebook")throw new Error(`Unexpected setting section ${i} in setting ${t}`);let o=t.substring(n+1);return{id:t,firstPart:i,secondPart:o,defaultValue:e}}var Ne={EnableCodeActions:Nt("editor.enableCodeActions",!0),LocaleOverride:Nt("chat.localeOverride","auto"),WelcomeMessage:Nt("chat.welcomeMessage","first"),TerminalChatLocation:Nt("chat.terminalChatLocation","chatView"),AuthProvider:Nt("advanced.authProvider","github"),NotebookIterativeImproving:Nt("notebook.iterativeImproving",!1),DebugOverrideProxyUrl:Nt("advanced.debug.overrideProxyUrl",""),DebugChatOverrideProxyUrl:Nt("advanced.debug.chatOverrideProxyUrl",""),DebugTestOverrideProxyUrl:Nt("advanced.debug.testOverrideProxyUrl",""),DebugOverrideEngine:Nt("advanced.debug.overrideEngine",""),DebugOverrideChatEngine:Nt("advanced.debug.overrideChatEngine",void 0),DebugOverrideChatMaxTokenNum:Nt("advanced.debug.overrideChatMaxTokenNum",0),DebugOverrideChatOffTopicModel:Nt("advanced.debug.overrideChatOffTopicModel",""),DebugOverrideChatOffTopicModelTokenizer:Nt("advanced.debug.overrideChatOffTopicModelTokenizer",""),DebugOverrideChatOffTopicModelThreshold:Nt("advanced.debug.overrideChatOffTopicModelThreshold",0),DebugOverrideLogLevels:Nt("advanced.debug.overrideLogLevels",{}),DebugFilterLogCategories:Nt("advanced.debug.filterLogCategories",[]),DebugReportFeedback:Nt("advanced.debug.reportFeedback",!1),DebugUseNodeFetcher:Nt("advanced.debug.useNodeFetcher",!1),DebugUseElectronFetcher:Nt("advanced.debug.useElectronFetcher",!1),ConversationSlashCommandEnablements:Nt("advanced.slashCommands",{"*":!1}),ConversationVariablesEnablements:Nt("advanced.variables",{"*":Il}),ConversationAdditionalPromptContext:Nt("advanced.conversationAdditionalPromptContext","firstTurn"),ConversationLoggingEnabled:Nt("advanced.conversationLoggingEnabled",!1),ConversationIntentDetection:Nt("advanced.conversationIntentDetection",!1),KerberosServicePrincipal:Nt("advanced.kerberosServicePrincipal",""),AgentsEndpointUrl:Nt("advanced.agentsEndpointUrl","https://api.githubcopilot.com"),EnableRemoteAgents:Nt("advanced.enableRemoteAgents",Il),ExplainIntentRefer:Nt("advanced.explain.refer",!0),FixUseGPT4InInlineChat:Nt("advanced.fix.useGPT4InInlineChat",!1),FixUseWorkspaceChunksFromSelection:Nt("advanced.fix.useWorkspaceChunksFromSelection",!1),FixUseWorkspaceChunksFromDiagnostics:Nt("advanced.fix.useWorkspaceChunksFromDiagnostics",!1),RenameSuggestionsEnabled:Nt("advanced.renameSuggestionsEnabled",!1),WorkspaceNewFlowEnabled:Nt("advanced.workspace.useNewFlow",!0),WorkspaceCodeSearchEnabled:Nt("advanced.workspace.codeSearchEnabled",void 0),WorkspaceUseAdaEnabled:Nt("advanced.workspace.useAda",void 0),WorkspaceRerankStrategy:Nt("advanced.workspace.rerankStrategy",void 0),WorkspaceUseFilesVariable:Nt("advanced.workspace.useFilesVariable",!1),UseProjectTemplates:Nt("chat.useProjectTemplates",!0),ExplainScopeSelection:Nt("chat.scopeSelection",!1),UseMessageNames:Nt("advanced.useMessageNames",!0),FeedbackOnChange:Nt("advanced.feedback.onChange",!1),ReviewIntent:Nt("advanced.review.intent",!1),ReviewPalette:Nt("advanced.review.palette",!1)};var ce=re("ILogService"),_p=class{constructor(e,r){this.logTargets=e;this.configurationService=r;this.loggers=new Map;this.promptResponseLoggers=new Map;this.myLogTarget={logIt:(n,i,...o)=>{this.logTargets.forEach(s=>s.logIt(n,i,...o))}}}get defaultLogger(){return this.getLogger("extension")}getLogger(e){return _p._getLogger(e,this.loggers,r=>new yA(r,this.myLogTarget,this.configurationService))}getPromptResponseLogger(e){return _p._getLogger(e,this.promptResponseLoggers,r=>new kF(r,this.myLogTarget,this.configurationService))}registerAppender(e){return this.logTargets.push(e),Sl(()=>{let r=this.logTargets.indexOf(e);r!==-1&&this.logTargets.splice(r,1)})}static _getLogger(e,r,n){let i=r.get(e);return typeof i>"u"&&(i=n(e),r.set(e,i)),i}};_p=we([de(1,Pe)],_p);var AT=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(AT||{}),gA=class{logIt(e,r,...n){e===3?console.error(r,...n):e===2&&console.warn(r,...n)}},vA=class{constructor(e){this.output=e}logIt(e,r,...n){this.output.appendLine(`${r} ${n.map(bNe)}`)}},yA=class{constructor(e,r,n){this.category=e;this.target=r;this.configurationService=n}stringToLevel(e){return AT[e]}log(e,...r){if(!this.shouldLog(e,this.category))return;let n=`[${this.category}]`;this.target.logIt(e,n,...r)}shouldLog(e,r){let n=this.configurationService.getConfig(Ne.DebugFilterLogCategories);if(n.length>0&&!n.includes(r))return!1;let i=this.configurationService.getConfig(Ne.DebugOverrideLogLevels),o=this.stringToLevel(i[this.category])??this.stringToLevel(i["*"])??1;return e>=o}debug(...e){this.log(0,...e)}info(...e){this.log(1,...e)}warn(...e){this.log(2,...e)}error(...e){this.log(3,...e)}exception(e,r){let n=r?`${r}: `:"",i=e instanceof Error?e:new Error("Non-error thrown: "+e);this.log(3,`${n}${i.stack}`)}},kF=class extends yA{logPrompt(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;super.info(r+e.map(n=>`${n.role.toUpperCase()}:
${n.content}`).join(r)+r)}logResponse(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;if(typeof e!="string"){if(e.type!=="success"){super.info(`${r}RESPONSE FAILED DUE TO ${e.type}${r}`);return}Array.isArray(e.value)?e.value.length===1?e=e.value[0]:e=`${e.value.map(n=>`<<${n}>>`).join(", ")}`:e=e.value}super.info(`${r}ASSISTANT:
${e}${r}`)}debug(e,...r){this.conversationLoggingEnabled()&&super.debug(e,...r)}info(e,...r){this.conversationLoggingEnabled()&&super.info(e,...r)}warn(e,...r){this.conversationLoggingEnabled()&&super.warn(e,...r)}error(e,...r){this.conversationLoggingEnabled()&&super.error(e,...r)}conversationLoggingEnabled(){return this.configurationService.getConfig(Ne.ConversationLoggingEnabled)}};function bNe(t){switch(typeof t){case"object":return JSON.stringify(t);default:return String(t)}}var Sr=re("IFetcherService"),bA=(n=>(n[n.Helix=0]="Helix",n[n.Node=1]="Node",n[n.Electron=2]="Electron",n))(bA||{}),bm=class{constructor(e,r,n,i,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getJson=o;this.getBody=s;this.ok=this.status>=200&&this.status<300}async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}};var bre="github.com",_Ne=`https://${bre}`,Hb=re("INetworkConfiguration"),_A=class{constructor(e=_Ne){this.recalculateUrls(e)}isGitHubEnterprise(){return this.isEnterprise}getTokenUrl(e){return e.devOverride?.copilotTokenUrl??this.tokenUrl}getNotificationUrl(e){return e.devOverride?.notificationUrl??this.notificationUrl}updateBaseUrl(e,r){if(!r)return;let n=this.baseUri;this.recalculateUrls(r),n.toString()!==this.baseUri.toString()&&e.get(Rt).resetCopilotToken(e)}recalculateUrls(e){this.baseUri=gt.parse(e);let r=gt.parse(`${this.baseUri.scheme}://api.${this.baseUri.authority}`);this.isEnterprise=this.baseUri.authority!==bre,this.tokenUrl=gt.joinPath(r,"/copilot_internal/v2/token").toString(),this.notificationUrl=gt.joinPath(r,"/copilot_internal/notification").toString()}};var jb=re("IUrlOpener"),xA=class{constructor(){this.openedUrls=[]}open(e){this.openedUrls.push(e)}};var SA=re("INotificationSender");var xNe=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],TA=re("IUserErrorNotifier"),EA=class{constructor(e){this.accessor=e;this.notifiedErrorCodes=[]}async notifyUser(e){xNe.includes(e.code)&&!this.didNotifyBefore(e.code)&&(this.displayCertificateErrorNotification(e),this.notifiedErrorCodes.push(e.code))}displayCertificateErrorNotification(e){let r="https://aka.ms/copilot-ssc",n="Your current Copilot license doesn't support proxy connections with self-signed certificates.";this.accessor.get(ce).getLogger("certificates").error(`${n} Please visit ${r} to learn more. Original cause: ${JSON.stringify(e)}`),this.showCertificateWarningMessage(n,r)}showCertificateWarningMessage(e,r){let n={title:"Learn more"};this.accessor.get(SA).showWarningMessage(e,n).then(i=>{i?.title===n.title&&this.accessor.get(jb).open(r)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};var po=re("ICopilotTokenNotifier"),IA=class{constructor(){this._onCopilotToken=new Br;this.onCopilotToken=this._onCopilotToken.event}dispose(){this._onCopilotToken.dispose()}emit(e,r){this._onCopilotToken.fire({token:e,envelope:r})}};var Gb=re("ITelemetryUserConfig"),CA=class{constructor(e,r,n){this.trackingId=r,this.optedIn=n??!1,this.setupUpdateOnToken(e)}setupUpdateOnToken(e){e.get(po).onCopilotToken(r=>{let n=r.token.getTokenValue("rt")==="1",i=r.token.getTokenValue("tid"),o=r.token.organization_list;i!==void 0&&(this.trackingId=i,this.organizationsList=o?.toString(),this.optedIn=n)})}},SNe="https://copilot-telemetry.githubusercontent.com/telemetry",RA=re("ITelemetryEndpointUrl"),wA=class{constructor(e=SNe){this.url=e}getUrl(){return this.url}},ke=re("ITelemetryService"),_m=re("IGHTelemetryService");var cn=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let t;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?t=crypto.getRandomValues.bind(crypto):t=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),r=[];for(let n=0;n<256;n++)r.push(n.toString(16).padStart(2,"0"));return function(){t(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o}}();var Er=class t{static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Date.now())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o.filtersAndExp=this.filtersAndExp,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Date.now())}extendWithEditorAgnosticFields(e){let r=e.get(mt);this.properties.editor_version=r.getEditorInfo().format(),this.properties.editor_plugin_version=r.getEditorPluginInfo().format(),this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${r.getVersion()}`,this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=r.getEditorInfo().format()}extendWithConfigProperties(e){let r=e.get(mt),n=e.get(Pe).dumpConfig();n["copilot.build"]=r.getBuild(),n["copilot.buildType"]=r.getBuildType();let i=e.get(Gb);i.trackingId&&(n["copilot.trackingId"]=i.trackingId),i.organizationsList&&(n.organizations_list=i.organizationsList),this.properties={...this.properties,...n}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(e)return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}updateTimeSinceIssuedAndDisplayed(){let e=Date.now()-this.issuedTime;if(this.measurements.timeSinceIssuedMs=e,this.displayedTime!==void 0){let r=Date.now()-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}}makeReadyForSending(e){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.updateTimeSinceIssuedAndDisplayed();for(let r in this.properties)this.properties[r]===void 0&&delete this.properties[r];TNe(e,this.properties)}};function _re(t){if(!t)return;let e={};for(let r in t){let n=t[r];n&&(n.value?e[r]=n.value:e[r]=n)}return e}function TNe(t,e){e.unique_id=cn();let r=t.get(mt);e.common_extname=r.getEditorPluginInfo().name,e.common_extversion=r.getEditorPluginInfo().version,e.common_vscodeversion=r.getEditorInfo().format()}var xp=class{constructor(e,r,n,i,o){this.token=e;this.organization_list=r;this.public_suggestions=n;this.enterprise_list=i;this.sku=o;this.tokenMap=this.parseToken(e)}parseToken(e){let r=new Map,i=e?.split(":")[0]?.split(";");for(let o of i){let[s,a]=o.split("=");r.set(s,a)}return r}get isInternal(){let e=["4535c7beffc844b46bb1ed4aa04d759a","a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","1cb18ac6eedd49b43d74a1c5beb0b955"];if(!this.organization_list)return!1;for(let r of this.organization_list)if(e.includes(r))return!0;return!1}getTokenValue(e){return this.tokenMap.get(e)}};var Rt=re("ICopilotTokenManager"),Vb=class{constructor(){this.copilotTokenRefreshEventEmitter=new NF.EventEmitter;this.githubTokenChangedEventEmitter=new NF.EventEmitter}};function Sre(t){return t.get(ce).getLogger("auth")}var INe=60,CNe="token_refreshed",OF="github_token_changed";function xm(){return Math.floor(Date.now()/1e3)}async function AA(t,e){let r=Sre(t),n=t.get(ke);n.sendGHTelemetryEvent("auth.new_login");let i=await wNe(t,e);if(!i)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_failed"),{kind:"failure",reason:"FailedToGetToken"};let o=await i.json();if(!o)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_read_failed"),{kind:"failure",reason:"FailedToGetToken"};if(i.status===401)return r.info("Failed to get copilot token due to 401 status"),n.sendGHTelemetryErrorEvent("auth.unknown_401"),{kind:"failure",reason:"HTTP401"};if(!i.ok||!o.token){r.info(`Invalid copilot token: missing token: ${i.status} ${i.statusText}`);let m=Er.createAndMarkAsIssued({status:i.status.toString(),status_text:i.statusText});return n.sendGHTelemetryErrorEvent("auth.invalid_token",m.properties,m.measurements),{kind:"failure",reason:"NotAuthorized",...o.error_details}}let s=o.expires_at;o.expires_at=xm()+o.refresh_in+INe;let{token:a,organization_list:c,enterprise_list:u,sku:l,...d}=o,p=new xp(a,c,void 0,u,l);t.get(po).emit(p,d);let f=Er.createAndMarkAsIssued({},{adjusted_expires_at:o.expires_at,expires_at:s,current_time:xm()});return n.sendGHTelemetryEvent("auth.new_token",f.properties,f.measurements),{kind:"success",...o}}async function wNe(t,e){let r=t.get(Hb).getTokenUrl(e);try{return await t.get(Sr).fetch(r,{headers:{Authorization:`token ${e.token}`,...t.get(mt).getEditorVersionHeaders()}})}catch(n){throw t.get(TA).notifyUser(n),n}}var PT=class extends Vb{constructor(r,n){super();this.completionsToken=r;this.embeddingsToken=n;this.wasReset=!1}getAnyGitHubToken(){return Promise.resolve(this.completionsToken)}getPermissiveGitHubToken(){return Promise.resolve(this.completionsToken)}async getCopilotToken(r,n){return new xp(this.completionsToken)}async getEmbeddingsToken(r,n){return new xp(this.embeddingsToken??this.completionsToken)}resetCopilotToken(r,n){this.wasReset=!0}async checkCopilotToken(r){return{status:"OK"}}},PA=class extends Vb{constructor(r){super();this.githubToken=r;this.copilotToken=void 0}getAnyGitHubToken(){return Promise.resolve(this.githubToken.token)}getPermissiveGitHubToken(){return Promise.resolve(this.githubToken.token)}async getCopilotToken(r,n){if(!this.copilotToken||this.copilotToken.expires_at<xm()||n){let i=await AA(r,this.githubToken);if(i.kind==="failure")throw Error(`Failed to get copilot token: ${i.reason.toString()} ${i.message??""}`);this.copilotToken={...i},kA(r,this,i.refresh_in)}return new xp(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions,this.copilotToken.enterprise_list,this.copilotToken.sku)}async checkCopilotToken(r){if(!this.copilotToken||this.copilotToken.expires_at<xm()){let i=await AA(r,this.githubToken);if(i.kind==="failure")return i;this.copilotToken={...i},kA(r,this,i.refresh_in)}return{status:"OK"}}resetCopilotToken(r,n){n!==void 0&&r.get(ke).sendGHTelemetryEvent("auth.reset_token_"+n),Sre(r).debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}},xre=new WeakMap;function kA(t,e,r){let n=xm(),i=xre.get(e)??xre.set(e,{value:0}).get(e);i.value>0||(i.value++,setTimeout(async()=>{let o,s="";try{i.value--,await e.getCopilotToken(t,!0),o="success",e.copilotTokenRefreshEventEmitter.emit(CNe)}catch(c){o="failure",s=c.toString()}let a=Er.createAndMarkAsIssued({result:o},{time_taken:xm()-n,refresh_count:i.value});s&&(a.properties.reason=s),t.get(ke).sendGHTelemetryEvent("auth.token_refresh",a.properties,a.measurements)},r*1e3))}function Ere(t,e){t.provider.id==="github"&&e.githubTokenChangedEventEmitter.emit(OF,t)}var LF=`${process.env.HOME||process.env.USERPROFILE}/.copilot-testing-gh-token`,DF;function Tre(){return DF||(DF=RNe()),DF}var RNe=()=>{if(process.env.GITHUB_PAT)return new PT(process.env.GITHUB_PAT);if(process.env.GITHUB_OAUTH_TOKEN)return new PA({token:process.env.GITHUB_OAUTH_TOKEN});let t=ANe();if(t)return new PA({token:t.trim()});throw new Error(`Tests: either GITHUB_PAT must be set, or there must be a GitHub token from an app with access to Copilot in ${LF}. Run "npm run get_token" to get one.`)};function ANe(){if(DA.existsSync(LF))return DA.readFileSync(LF).toString()}var zb=require("vscode");var kT=require("vscode");var kNe=["user:email"],DNe=["read:user"],Ire=["read:user","user:email","repo","workflow"],MF="You are not signed in to GitHub. Please sign in to use Copilot.";function DT(t){return t.getConfig(Ne.AuthProvider)==="github-enterprise"?"github-enterprise":"github"}async function Sc(t,e){let r=DT(t),n=await kT.authentication.getSession(r,Ire,{silent:!0});return n??=await kT.authentication.getSession(r,DNe,{silent:!0}),n??=await kT.authentication.getSession(r,kNe,e?.prompt?{createIfNone:!0}:{silent:!0}),n}async function Cre(t,e){let r=DT(t);return await kT.authentication.getSession(r,Ire,e)}function O0(t,e){let r=t.provider,n=DT(e);return r.id===n}async function NA(t,e){if(O0(t,e.get(Pe))){let{defaultLogger:r}=e.get(ce);if(await Sc(e.get(Pe)))return await e.get(Rt).getCopilotToken(e,!0);e.get(Rt).resetCopilotToken(e),r.warn(MF)}}var wre=!1,NT=class extends Error{},LT=class extends Error{},OT=class extends Error{};async function NNe(t){let e=t.get(ce).getLogger("auth"),r=await Sc(t.get(Pe));if(!r)return e.info("GitHub login failed"),t.get(ke).sendGHTelemetryErrorEvent("auth.github_login_failed"),{kind:"failure",reason:"GitHubLoginFailed"};e.info(`Logged in as ${r.account.label}`);let n=await AA(t,{token:r.accessToken});return n.kind==="success"&&e.info(`Got Copilot token for ${r.account.label}`),n}async function LNe(t){let e=await NNe(t);if(e.kind==="failure"&&e.reason==="NotAuthorized"){let r=e.message;if(r?.includes("No access to GitHub Copilot found"))throw new NT(r??"User not authorized");if(r?.includes("Your subscription has ended"))throw new LT(r)}if(e.kind==="failure"){let r=e.message;if(r?.includes("Please contact your enterprise admin to enable your managed account for Copilot for Business"))throw new OT(r)}if(e.kind==="failure"&&e.reason==="HTTP401"){let r="Your GitHub token is invalid. Please sign out from your GitHub account using the VS Code accounts menu and try again.";throw wre||(wre=!0,zb.window.showWarningMessage(r)),Error(r)}if(e.kind==="failure"&&e.reason==="GitHubLoginFailed")throw Error("GitHubLoginFailed");if(e.kind==="failure")throw Error("Failed to get copilot token");return e}var LA=class extends Vb{constructor(r){super();this.configurationService=r;this.copilotToken=void 0,this._disposable=zb.Disposable.from(zb.authentication.onDidChangeSessions(n=>Ere(n,this)))}dispose(){this._disposable.dispose()}async getAnyGitHubToken(r){return(await Sc(this.configurationService,r))?.accessToken}async getPermissiveGitHubToken(r){return(await Cre(this.configurationService,r))?.accessToken}async getCopilotToken(r,n){return(!this.copilotToken||this.copilotToken.expires_at<xm()||n)&&(this.copilotToken=await LNe(r),kA(r,this,this.copilotToken.refresh_in)),new xp(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions,this.copilotToken.enterprise_list,this.copilotToken.sku)}resetCopilotToken(r,n){n!==void 0&&r.get(ke).sendGHTelemetryEvent("auth.reset_token_"+n),r.get(ce).getLogger("auth").debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}};var OA=re("IChatAgentService"),FF="default",MT="editor",Sp="workspace",UF="vscode",$b="terminal",Rre=[FF,MT,Sp,UF,$b];function M0(t){return`github.copilot.${t}`}function Are(t){return t.replace(/^github\.copilot\./,"")}var Qt=re("IChatMLFetcher");var ki=re("ConversationOptions");var ONe=Object.freeze({abap:{lineComment:{start:"'"}},bat:{lineComment:{start:"REM"},aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"}},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"]},haskell:{lineComment:{start:"--"}},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"]},ini:{lineComment:{start:";"}},java:{lineComment:{start:"//"},extensions:[".java",".class"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"]},json:{extensions:[".json"],lineComment:{start:"//"}},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"}},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"]},kotlin:{lineComment:{start:"//"}},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"]},markdown:{lineComment:{start:"[]: #"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"]},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"}},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"}}}),FT=new Map(Object.entries(ONe).map(([t,e])=>[t,{languageId:t,...e}]));function ma(t){let e=typeof t=="string"?t:t.languageId,r=FT.get(e.toLowerCase());return r||{languageId:e,lineComment:{start:"//"}}}function MA(t){let e=Xa(t).toLowerCase();for(let r of FT.values())if(r.extensions?.includes(e))return r;return ma("plaintext")}var v7=W(st()),ye=re("ITokenizer");function tne(t,e,r){return Math.min(Math.max(t,e),r)}var fo=class t{constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,s=r.column|0;return o-s}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var Li=class t{constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,s;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,s=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,s=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new t(n,i,o,s)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=r.startLineNumber,c=r.startColumn,u=r.endLineNumber,l=r.endColumn;return n<a?(n=a,i=c):n===a&&(i=Math.max(i,c)),o>u?(o=u,s=l):o===u&&(s=Math.min(s,l)),n>o||n===o&&i>s?null:new t(n,i,o,s)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new fo(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new fo(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,s=r.startLineNumber|0;if(o===s){let a=e.startColumn|0,c=r.startColumn|0;if(a===c){let u=e.endLineNumber|0,l=r.endLineNumber|0;if(u===l){let d=e.endColumn|0,p=r.endColumn|0;return d-p}return u-l}return a-c}return o-s}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var it=W(require("vscode")),Bn=it.Position,Je=it.Range,Ep=it.Selection;var rne=it.CancellationTokenSource,nne=it.Diagnostic,hi=it.TextEdit,qT=it.WorkspaceEdit,Ji=it.Uri,Ja=it.MarkdownString,ha=it.InteractiveEditorResponseFeedbackKind;var Al=it.DiagnosticSeverity,ls=it.ExtensionMode,Pl=it.Location;var ine=it.ChatVariableLevel,kl=it.ChatResponseMarkdownPart;var HT=it.ChatResponseFileTreePart;var Us=it.ChatResponseProgressPart,eP=it.ChatResponseReferencePart,one=it.ChatResponseCommandButtonPart;var sne=it.ChatResponseTextEditPart,ane=it.ChatRequestTurn;var cne=it.NewSymbolName,une=it.NewSymbolNameTag,y7=it.NewSymbolNameTriggerKind;var b7={t:it.l10n.t};var Ge=re("IEndpointProvider");var tP=class extends Error{constructor(e){super(`Unrecognized language: ${e}`)}},lne={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",tsx:"tsx",go:"go",ruby:"ruby",csharp:"csharp",cpp:"cpp",java:"java",rust:"rust"};function Xb(t){if(t in lne)return lne[t]}function Ec(t,e,r){if(t===0)return{text:e,range:r};let n=typeof t=="number"?{0:e.slice(0,t),index:t}:e.match(t);if(!n)return{text:e,range:r};let i=n[0].split(`
`);return{text:e.slice(n[0].length),range:{startLineNumber:r.startLineNumber+(i.length-1),startColumn:(i.length>1?0:r.startColumn)+i[i.length-1].length,endColumn:r.endColumn,endLineNumber:r.endLineNumber}}}function ga(t,e,r){if(t===0)return{text:e,range:r};let n=typeof t=="number"?{0:e.slice(-t),index:e.length-t}:e.match(t);if(!n)return{text:e,range:r};let i=n[0].split(`
`),o=r.endLineNumber-(i.length-1);return{text:e.slice(0,n.index),range:{startColumn:r.startColumn,startLineNumber:r.startLineNumber,endLineNumber:o,endColumn:i.length>1?(o===r.startLineNumber?r.startColumn:0)+n.index-(e.lastIndexOf(`
`,n.index-1)+1):Math.max(0,r.endColumn-i[0].length)}}}function dne(t){let e=t.lastIndexOf(`
`);return e===-1?{lineNumber:0,column:t.length}:{lineNumber:ZR(t.slice(0,e),`
`)+1,column:t.length-(e+1)}}function Jb(t,e=0,r=0){let n=t.row+e,i=t.column+r;return{lineNumber:n<0?0:n,column:i<0?0:i}}function va(t){return{startLineNumber:t.range.startPosition.row,startColumn:t.range.startPosition.column,endLineNumber:t.range.endPosition.row,endColumn:t.range.endPosition.column}}var U0=/\s+$/;function pne(t){return t.replace(U0,"")}function Au(t,e){return{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:e.lineNumber,endColumn:e.column}}function fne(t,e,r){if(t===0)return{text:e,sources:r};let n=typeof t=="number"?{0:e.slice(-t),index:e.length-t}:e.match(t);if(!n)return{text:e,sources:r};let i=n.index;return{text:e.slice(0,i),sources:r.filter(o=>o.start<i).map(o=>({start:o.start,end:Math.min(o.end,i),range:ga(Math.max(0,o.end-i),e.slice(0,o.end),o.range).range}))}}var Ir=re("IParserService");function rP(t){return{startPosition:{row:t.start.line,column:t.start.character},endPosition:{row:t.end.line,column:t.end.character}}}function nP(t){return new Je(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function mo(t,e){return{startIndex:e.offsetAt(t.start),endIndex:e.offsetAt(t.end)}}function ds(t,e){return new Je(t.positionAt(e.startIndex),t.positionAt(e.endIndex))}var oP=t=>{let e=va(t);return{sources:[{start:0,end:t.text.length,range:e}],text:t.text,range:e}},Dl=class{constructor(e){this.tokenizer=e}genericWholeFileChunking(e,{maxTokenLength:r=iP,removeEmptyLines:n=!0}){e=e.replace(/\r\n/g,`
`);let i=dne(e);return this._processLinesIntoChunks(e,0,[{start:0,end:e.length,range:{startColumn:0,startLineNumber:0,endColumn:i.column,endLineNumber:i.lineNumber}}],r,!0,n).filter(s=>!n||s.text.length&&/[\w\d]{2}/.test(s.text))}genericChunking({lineRangeText:e,maxTokenLength:r=iP,removeEmptyLines:n=!0,extraLineRangeSeparator:i="",numTokensInEllipsis:o=0}){if(r<0)throw Error("Cannot chunk text, not enough chunk room");if(e.length===0)return[];let s=this.tokenizer.tokenLength(i),a=[],c,u=!1;for(let l=0;l<e.length;l++){let d=e[l];if(c){let f=r-this.tokenizer.tokenLength(c.text)-s;if(f>0&&d.text.length<2e4&&this.tokenizer.tokenLength(d.text)<=f){let m=i||(u?`
`:""),h=c.text.length+m.length,g=c.text+m+d.text,v={startLineNumber:c.range.startLineNumber,startColumn:c.range.startColumn,endColumn:d.range.endColumn,endLineNumber:d.range.endLineNumber},b=d.sources.map(y=>({start:y.start+h,end:y.end+h,range:y.range}));for(let y of c.sources)b.push(y);u=!1,c={sources:b,text:g,range:v};continue}a.push(c)}let p=this._processLinesIntoChunks(d.text,d.range.startLineNumber,d.sources,r,!1,n,o,l===0);c=p.pop(),u=!0,a.push(...p)}return c&&a.push(c),a.filter(l=>!n||l.text.length&&/[^\s]/.test(l.text)).map(l=>{let{text:d,sources:p}=fne(U0,l.text,l.sources);return{range:l.range,text:d,sources:p}})}_processLinesIntoChunks(e,r,n,i,o,s,a=0,c=!1){let u=0,l=0,d=e.split(`
`),p=[];for(let m=0;m<d.length;m++){let h=d[m],g=l;if(l+=h.length+1,s&&h.length===0)continue;let v=h.slice(0,i*4);p.push({text:v,lineNumber:m+r,originalStart:g,originalEnd:g+v.length,tokens:this.tokenizer.tokenLength(v)})}let f=[];for(;u<p.length;){let m=i-a-(c?0:a),h=u+1,g="";for(let Z=p[u].tokens;h<p.length;h++){let z=Z+p[h].tokens;if(z>m){g=p.slice(u,h+1).map(E=>E.text).join(`
`);let D=this.tokenizer.tokenLength(g);for(;D<=m&&h<p.length-1;)h++,g+=`
`+p[h].text,D=this.tokenizer.tokenLength(g);break}Z=z}let v=p.slice(u,h),b=h;if(o){let{chunks:Z,usedFromRemaining:z}=this._dedentAndAddLinesToChunk(v,p.slice(h),m);v=Z,u=b+z}else for(u=b;u<p.length&&p[u].text.length===0;)u++;if(v.length===0)continue;for(;v.length;){let Z=v[v.length-1],z=Z.text.trimEnd();if(z==="")v.pop();else if(z!==Z.text){Z.text=z,Z.originalEnd=z.length;break}else break}if(v.length===0)continue;let y=[];n.sort((Z,z)=>Z.start-z.start);let S=0,x=0,T=0,L=v[0]?.originalStart||0,M=(Z,z)=>{if(x===Z){x=z;return}for(;S<n.length&&n[S].start<x;){let D=n[S++];if(D.end<L)continue;let E=Math.max(0,D.end-x),k=Math.max(0,L-D.start),F=ga(E,e.slice(D.start,D.end),D.range),N=Ec(k,F.text,F.range);y.push({start:D.start+k-T,end:D.end-E-T,range:N.range})}x=z,L=Z},q="";for(let Z=0;Z<v.length;Z++){let z=v[Z];M(z.originalStart,z.originalEnd),q+=z.text,T=z.originalEnd-q.length,Z<v.length-1&&(q+=`
`,e[z.originalEnd]===`
`&&M(z.originalEnd,z.originalEnd+1))}M(1/0,1/0);let O=v[v.length-1];f.push({text:q,range:{startLineNumber:v[0].lineNumber,startColumn:0,endLineNumber:O.lineNumber,endColumn:O.text.length},sources:y})}return f}_dedentAndAddLinesToChunk(e,r,n){let i=jT(e.map(l=>l.text)),o=i.shortestLeadingCommonWhitespace;if(!o)return{chunks:e,usedFromRemaining:0};let s=e;for(let l=0;l<s.length;l++)s[l].originalStart+=o.length,s[l].text=i.trimmedLines[l]||"";let a=0,c=this.tokenizer.tokenLength(s.map(l=>l.text).join(`
`)),u=r[a];for(c+=u?.tokens||0;u&&c<n&&(u.text.length===0||u.text.startsWith(o));)s.push({...u,text:u.text.slice(o.length),originalStart:u.originalEnd+o.length}),a++,u=r[a],c+=u?.tokens||0;return{chunks:s,usedFromRemaining:a}}};Dl=we([de(0,ye)],Dl);function jT(t){let e=t.map(o=>{if(!o)return;let s=o.match(/^\s+/),a=s?s[0]:"",c=o.substring(a?.length);return[a,c]}),r=Pr(e),n=f4e(r)??"",i=n.length;return{trimmedLines:e.map(o=>o?o[0].substring(i)+o[1]:void 0),shortestLeadingCommonWhitespace:n}}function f4e(t){let e;for(let r of t){if(e===void 0){e=r[0];continue}e=m4e(e,r[0])}return e??""}function m4e(t,e){let r=rA(t,e);return t.substring(0,r)}var iP=250;var _7,Zb=class t{constructor(e,r){this.lang=r;this._tokenizer=e.get(ye),this._naiveChunker=new Dl(this._tokenizer),this._parserService=e.get(Ir);let n=t.getFileChunkingOptions(r);this._inlineComment=n?.blockWrap??{start:"",end:""},this._elipsisPlaceholder=n?.elipsisPlaceholder??"...",this._lookForIndentInHeader=n?.lookForIndentInHeader??!0,this._numTokensInEllipsis=this._tokenizer.tokenLength(this._elipsisPlaceholder)+1}static getFileChunkingOptions(e){return e!=="python"&&e!=="ruby"?{elipsisPlaceholder:"/*...*/",blockWrap:{start:"{",end:"}"},lookForIndentInHeader:!1}:{}}get _summaryPlaceHolder(){return this._inlineComment.start+this._elipsisPlaceholder+this._inlineComment.end}async parse(e,r,n){let i=await this.provideQueryTree(e);if(n.isCancellationRequested)return[];let o=this._parseBlocks(i.roots,"",r.maxTokenLength,r.maxHeaderLengthFactor),s=o.content.flat(),a=o.outline??[],c=this.createOutlineSummary("","",r.maxTokenLength,oP(i.syntaxTreeRoot),a,va(i.syntaxTreeRoot),"");return c.length===1&&(c[0]={...c[0],isFullFile:!0}),s.push(...c),s}provideQueryTree(e){let r=e.replace(/\r\n/g,`
`);return _7=_7?.then(()=>this._parserService.getSemanticChunkTree(this.lang,r))??this._parserService.getSemanticChunkTree(this.lang,r),_7}chunkWholeText(e,r,n,i=0,o=r){if(e.trim().length===0)return{content:{text:[],isFull:!0}};let s;try{s=this._naiveChunker.genericChunking({lineRangeText:[{range:r,text:e,sources:[{start:i,end:e.length,range:o}]}],maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return{content:{text:[],isFull:!1},outline:[]}}return{content:{text:s,isFull:!0}}}_parseBlocks(e,r,n,i){return this._parseSemanticStructure(e,r,n,i,(o,s,a,c)=>{let u=c+s.text;if(this._tokenizer.tokenLength(u)<=a){let f=Ec(/^\s*\n/g,u,s.range),m=Ec(/(\n\s*$)/g,f.text,f.range);return{content:{text:[{sources:[{start:c.length,end:m.text.length,range:m.range}],range:s.range,text:m.text}],isFull:!0}}}if(o.length===0)return this.chunkWholeText(u,s.range,a,c.length);let l=this._parseBlocks(o,c,a,i),d=l.content,p=l.outline;return{content:{text:d,isFull:!1},outline:p}})}_createOutlineBody(e,r,n){let i=(n+e.text).split(`
`),o={lineNumber:e.range.startLineNumber,column:e.range.startColumn},s=[],a=o,c=p=>{let f=p.lineNumber-o.lineNumber,m=p.column;return o.lineNumber===p.lineNumber&&(m=p.column-o.column),{lineNumber:f,column:m}},u=p=>{let f=p.lineNumber-o.lineNumber,m=f>=i.length||p.column===i[f].length-1;return{newPosition:{lineNumber:p.lineNumber,column:p.column+1},isNewLine:m}},l=(p,f)=>{if(p.lineNumber>f.lineNumber||p.lineNumber===f.lineNumber&&p.column>f.column)return;let m=[],h=c(p),g=c(f),v=Au(p,f),b=v,y=i[h.lineNumber].substring(h.column);if(h.lineNumber===g.lineNumber){let T=y.substring(0,g.column-h.column),L=u(f);a=L.newPosition,L.isNewLine&&(T+=`
`),m.push(T)}else{let T=i[g.lineNumber].substring(0,g.column),L=ga(new RegExp(`${n}$`),T,b);T=L.text,b=L.range;let M=u(f);a=M.newPosition,M.isNewLine&&(T+=`
`),m.push(y+`
`);for(let q=h.lineNumber+1;q<g.lineNumber;q++)m.push(i[q]+`
`);m.push(T)}let S=m.join(""),x=Ec(/^\s+\n/,S,b);x.text.length>0&&s.push({sources:[{start:h.lineNumber===0?n.length:0,end:x.text.length,range:x.range}],text:x.text,range:v})},d=p=>{s.push({sources:p.sources,text:p.summary+`

`,range:p.range})};return r.sort((p,f)=>p.range.startLineNumber-f.range.startLineNumber||p.range.endLineNumber-f.range.endLineNumber),r.forEach(p=>{l(a,{lineNumber:p.range.startLineNumber,column:p.range.startColumn}),d(p),a=u({lineNumber:p.range.endLineNumber,column:p.range.endColumn}).newPosition}),l(a,{lineNumber:e.range.endLineNumber,column:e.range.endColumn}),s}createOutlineSummary(e,r,n,i,o,s,a){let c=this._createOutlineBody(i,o.map(l=>({sources:l.sources,summary:pne(l.summary),range:l.range})),a),u;try{u=this._naiveChunker.genericChunking({lineRangeText:c,removeEmptyLines:!1,maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return console.error("caught error in naive chunker: {e}"),[]}return this._createSummary(e,r,u,s,a)}_createSummary(e,r,n,i,o){return n.length===0?[]:Pr(n.map((s,a)=>{let c=e.length===0?"":`${e}`;a!==0&&(c+=`${o}${this._elipsisPlaceholder}
`);let u="";if(a!==n.length-1&&(u+=`
${o}${this._elipsisPlaceholder}`),r.length>0&&(u+=r),Array.isArray(s))return Pr(s.map(d=>{if(d.text.trim().length!==0)return{range:d.range,text:c+d.text+u,sources:d.sources.map(p=>({start:p.start+c.length,end:p.end+c.length,range:p.range}))}}));if(s.text.trim().length===0)return;let l={startColumn:(a===0?i:s.range).startColumn,startLineNumber:(a===0?i:s.range).startLineNumber,endColumn:i.endColumn,endLineNumber:i.endLineNumber};return{sources:s.sources.map(d=>({start:d.start+c.length,end:d.end+c.length,range:d.range})),range:l,text:c+s.text+u}})).flat()}findNewIndent(e,r,n){let o=(this._lookForIndentInHeader?r.text.substring(0,n.startIndex-r.startIndex):n.text).match(new RegExp(`\\n+(\\s*)${e}${this._lookForIndentInHeader?"$":""}`));return o&&o.length>1?o[1]:""}};var Tc=class extends Zb{_parseSemanticStructure(e,r,n,i,o){let s=[],a=u=>{let l=[],d=u.info,p=d.mainBlock,f=d.detailBlocks.comments,m=d.detailBlocks.body,h=va(m),g=this._getInnerLineRangeText(m),v=m.startIndex-p.startIndex+g.prefix.length,b=this.findNewIndent(r,p,m),y="";for(let N of f)y+=r+N.text+`
`;let S=r+p.text.substring(0,v),x=y+S,T=va(p),L=Au(Jb((f.length>0?f[0]:p).range.startPosition,0,-r.length),{column:T.endColumn,lineNumber:T.endLineNumber}),M=i*n,q=x.replace(/(\n*)(\n\s*)$/g,`
`),O=this._tokenizer.tokenLength(q);if(O>M&&(q=S,O=this._tokenizer.tokenLength(S),O>M)){q="",O=0;let N=this.chunkWholeText(y+p.text,va(p),n,y.length);return l.push(...this._createSummary(q,"",N.content.text,L,r)),l}let Z=g.suffix+p.text.substring(m.endIndex-p.startIndex),z=this._tokenizer.tokenLength(q+`
`+Z),D=n-z,E=o(u.children,g.body,D,r+b);L=Au({column:L.startColumn,lineNumber:L.startLineNumber},Jb(p.range.endPosition)),l.push(...this._createSummary(q,Z,E.content.text,L,r+b));let k=ga(U0,p.text.substring(0,m.startIndex-p.startIndex),{startColumn:T.startColumn,startLineNumber:T.startLineNumber,endLineNumber:h.startLineNumber,endColumn:h.startColumn}),F=y+r;return s.push({summary:F+k.text+" "+this._summaryPlaceHolder,range:L,sources:[{start:F.length,end:F.length+k.text.length,range:k.range}]}),E.outline!==void 0&&l.push(...this.createOutlineSummary(q,Z,D,g.body,E.outline,L,r+b)),l},c=e.map(u=>a(u));return{outline:s,content:c}}_getInnerLineRangeText(e){let r=va(e),n=e.text,i=Ec(/^\s*\{\s*/,n,r),o=ga(/\s*\}\s*$/,i.text,i.range);return{prefix:n.slice(0,n.length-i.text.length),body:{sources:[{start:0,end:o.text.length,range:o.range}],text:o.text,range:o.range},suffix:i.text.slice(o.text.length)}}};var sP=class{constructor(e){this.accessor=e;this.naiveChunker=new Dl(e.get(ye))}async parse(e,r,n){let i=this._getLineRangeText(e);return this.naiveChunker.genericChunking({lineRangeText:i,maxTokenLength:r.maxTokenLength,extraLineRangeSeparator:`

`})}_getLineRangeText(e){e=e.replace(/\r\n/g,`
`);let r=e.split(`
`),n=[],i={lineNumber:0,column:0},o=[];for(let s=0;s<r.length;s++)if(r[s].trim().length===0){if(n.length>0){let a=n.join(`
`),c=Au(i,{lineNumber:s,column:r[s].length});o.push({sources:[{start:0,end:a.length,range:c}],text:a,range:c}),n.length=0,i={lineNumber:s+1,column:0}}continue}else n.push(r[s]);if(n.length>0){let s=n.join(`
`),a=Au(i,{lineNumber:r.length-1,column:r[r.length-1].length-1});o.push({sources:[{start:0,end:s.length,range:a}],text:s,range:a})}return o}};var aP=class extends Zb{_parseSemanticStructure(e,r,n,i,o){let s=[],a=u=>{let l=[],d=u.info,p=d.mainBlock,f=d.detailBlocks.decorator,m=d.detailBlocks.docstring,h=d.detailBlocks.body,g={start:0,end:0,range:null};if(m)g.end=m.endIndex-p.startIndex,g.range={startLineNumber:p.range.startPosition.row,startColumn:p.range.startPosition.column,endLineNumber:m.range.endPosition.row,endColumn:m.range.endPosition.column};else if(h)g.end=h.startIndex-p.startIndex,g.range={startLineNumber:p.range.startPosition.row,startColumn:p.range.startPosition.column,endLineNumber:h.range.startPosition.row,endColumn:h.range.startPosition.column};else{let D=ga(1,p.text,g.range);g.end=p.text.length,g.range=D.range}let v=this.findNewIndent(r,p,h),b=[],y="";f&&(y=r+f.text+`
`,b.push({start:r.length,end:f.text.length+r.length,range:va(f)}));let S=ga(U0,p.text.substring(0,g.end),g.range);b.push({start:y.length+r.length,end:y.length+r.length+S.text.length,range:S.range});let x=y+r+S.text+`
`,T=va(p);f&&(T=Au(Jb(f.range.startPosition),{column:T.endColumn,lineNumber:T.endLineNumber}));let L=i*n,M=x.replace(/\n+\s*$/g,`
`),q=this._tokenizer.tokenLength(M);if(q>L&&(M=r+S.text.substring(0,h.startIndex-p.startIndex),q=this._tokenizer.tokenLength(M),q>L)){M="",q=0;let D=Ec(m?m.endIndex-h.startIndex:0,h.text,va(h)),E=this.chunkWholeText(x+`
`+D.text,va(p),n,x.length+1,D.range);return l.push(...this._createSummary(M,"",E.content.text,T,r)),l}T=Au({column:T.startColumn,lineNumber:T.startLineNumber},Jb(p.range.endPosition)),s.push({summary:(m?x+v:x.slice(0,-1)+" ")+this._summaryPlaceHolder,sources:b,range:T});let O=oP(h),Z=o(u.children,O,n-q,r+v),z=r+p.text.substring(0,h.startIndex-p.startIndex).replace(/\n+\s*$/g,`
`);return Z.content.isFull&&(M=z),l.push(...this._createSummary(M,"",Z.content.text,T,r+v)),Z.outline!==void 0&&l.push(...this.createOutlineSummary(z,"",n-q,O,Z.outline,T,r+v)),l},c=e.map(u=>a(u));return{outline:s,content:c}}};var h4e=.6,Za=re("ChunkingService"),mne=(t,e)=>({file:t,text:e.text,sources:e.sources.map(r=>({start:r.start,end:r.end,range:Li.lift(r.range)})),range:Li.lift(e.range),isFullFile:e.isFullFile}),Em=class{constructor(e){this.accessor=e;this.semanticChunkers=new Map;this.tokenizer=this.accessor.get(ye),this.naiveChunker=new Dl(this.tokenizer),this.logger=this.accessor.get(ce).getLogger("WorkspaceChunkSearch")}canSemanticallyChunk(e){return!!this.getSemanticChunker(e)}async chunkFileText(e,r,n,i){let o=n.maxTokenLength??await g4e(this.accessor);if(i.isCancellationRequested)return[];let s=n.maxHeaderLengthFactor??h4e,a=n.shouldSemanticChunk??!1,c=[];if(a)try{let u=await this.getSemanticChunker(e)?.parse(r,{maxTokenLength:o,maxHeaderLengthFactor:s},i);if(i.isCancellationRequested)return[];c.push(...Array.from(u??[],l=>mne(e,l)))}catch(u){this.logger.error("Error parsing semantic chunks for the following file: "+e.fsPath),this.logger.error(u),c=[]}if(!c.length){let u=this.naiveChunker.genericWholeFileChunking(r,{maxTokenLength:o});c.push(...u.map(l=>mne(e,l)))}if(n.validateChunkLengths)for(let u of c){let l=this.tokenizer.tokenLength(u.text);l>o*1.2&&console.warn("Produced chunk that is over length limit",{file:u.file+"",range:u.range,chunkTokenLength:l,maxLength:o})}return c.filter(u=>u.text)}getSemanticChunker(e){let r=MA(e),n=this.semanticChunkers.get(r.languageId);if(n)return n;let i;switch(r.languageId){case"typescript":i=new Tc(this.accessor,"typescript");break;case"typescriptreact":i=new Tc(this.accessor,"tsx");break;case"javascript":case"javascriptreact":i=new Tc(this.accessor,"javascript");break;case"python":i=new aP(this.accessor,"python");break;case"java":i=new Tc(this.accessor,"java");break;case"cpp":case"c":i=new Tc(this.accessor,"cpp");break;case"csharp":i=new Tc(this.accessor,"csharp");break;case"go":i=new Tc(this.accessor,"go");break;case"markdown":i=new sP(this.accessor);break;case"ruby":i=new Tc(this.accessor,"ruby");break;case"rust":i=new Tc(this.accessor,"rust");break}return i&&this.semanticChunkers.set(r.languageId,i),i}};Em=we([de(0,Ct)],Em);async function g4e(t){return B0(t,{valueFor4096:iP,maxMultiplier:4})}function Nl(t){return new Je(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn)}async function B0(t,e){let n=(await t.get(Ge).getNonUserRequestEndpoint()).modelMaxPromptTokens/4096;return tne(Math.round(e.valueFor4096*n),e.valueFor4096,e.valueFor4096*e.maxMultiplier)}var cP=W(require("vscode"));function hne(t){return typeof t=="string"?t:JSON.stringify(t)}var uP=class extends hA{constructor(){super();this.config=cP.workspace.getConfiguration(ym),cP.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(ym)&&(this.config=cP.workspace.getConfiguration(ym))})}getConfig(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0?this.config[r.firstPart][r.secondPart]:r.defaultValue}isDefaultSettingOverwritten(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0}dumpConfig(){let r={};try{let n=fa.contributes.configuration?.properties??{};for(let i in n){let s=i.replace(`${ym}.`,"").split(".").reduce((a,c)=>a[c],this.config);typeof s=="object"&&s!==null?Object.keys(s).filter(a=>a!=="secret_key").forEach(a=>r[`${i}.${a}`]=hne(s[a])):r[i]=hne(s)}}catch(n){console.error(`Failed to retrieve configuration properties ${n}`)}return r}};var e_=re("IDebugOutputService");var T7=require("vscode"),gne=[];function vne(){return gne.join(`
`)}function v4e(t,e){t.push(y4e(e)),t.length>40&&t.shift()}var S7=class{constructor(e){this.session=e}onWillStartSession(){}onWillReceiveMessage(e){}onDidSendMessage(e){if(T7.debug.activeDebugSession!==this.session)return;let r=this.extractOutput(e);r&&v4e(gne,r)}extractOutput(e){if(e.event==="output"&&(e.body.category==="stdout"||e.body.category==="stderr"))return e.body.output}onWillStopSession(){}onError(e){}onExit(e,r){}};function y4e(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function yne(){return[T7.debug.registerDebugAdapterTrackerFactory("*",new E7)]}var E7=class{createDebugAdapterTracker(e){return new S7(e)}};var lP=class extends Ur{constructor(){super();for(let e of yne())this._register(e)}get consoleOutput(){return vne()}};var dP=re("IDevContainerConfigurationService");var pP=re("IDialogService");var bne=W(require("vscode")),fP=class{showQuickPick(e,r,n){return bne.window.showQuickPick(e,r,n)}};var Bs=re("IEmbeddingsComputer"),b4e=.72;function _ne(t,e,r,n=b4e){return e.map(([i,o])=>{let s=0;for(let a=0;a<o.length;a++)s+=o[a]*t[a];return{score:s,item:i}}).filter(i=>i.score>n).sort((i,o)=>o.score-i.score).slice(0,r).map(i=>i.item)}function Ll(t,e){let r=t.reduce((o,s,a)=>o+s*e[a],0),n=Math.sqrt(t.reduce((o,s)=>o+s*s,0)),i=Math.sqrt(e.reduce((o,s)=>o+s*s,0));return r/(n*i)}var Kr=re("IVSCodeExtensionContext");var gi=re("IFileSystemService");var q0=re("IWorkbenchService");var t_=class{constructor(e,r,n,i){this.accessor=e;this.cacheType=r;this.cacheKey=n;this.cacheVersion=i;this.cacheVersionKey=`${n}-version`,this.fileSystem=e.get(gi)}get cacheStorageUri(){return this.cacheType===2?this.accessor.get(Kr).storageUri:this.accessor.get(Kr).globalStorageUri}get cacheVersionMementoStorage(){return this.cacheType===2?this.accessor.get(Kr).workspaceState:this.accessor.get(Kr).globalState}async updateCache(e){if(!this.cacheStorageUri||!this.fileSystem.isWritableFileSystem(this.cacheStorageUri.scheme))return;try{await this.fileSystem.stat(this.cacheStorageUri)}catch{await this.fileSystem.createDirectory(this.cacheStorageUri)}await this.cacheVersionMementoStorage.update(this.cacheVersionKey,this.cacheVersion),this.cacheVersionMementoStorage.get(this.cacheKey)&&await this.cacheVersionMementoStorage.update(this.cacheKey,void 0);let n=gt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await(e===void 0?this.fileSystem.delete(n,{useTrash:!1}):this.fileSystem.writeFile(n,Buffer.from(JSON.stringify(e))))}catch{e!==void 0&&console.error(`Failed to write embeddings cache to ${n}`)}}async getCache(){if(!(!this.cacheStorageUri||this.cacheVersionMementoStorage.get(this.cacheVersionKey)!==this.cacheVersion))try{let r=await this.fileSystem.readFile(gt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`));return JSON.parse(r.toString())}catch{return}}async clearCache(){return this.updateCache(void 0)}},Ol=class t extends t_{constructor(r,n,i,o,s){super(r,n,i,o);this.fetcher=r.get(Sr),this.remoteCacheVersionKey=`${i}-version-remote`,this.remoteCacheURL=t.calculateRemoteCDNURL(s,o),this.remoteCacheLatestUpdateURL=t.calculateRemoteCDNLatestURL(s,o)}async fetchRemoteCache(){if(this._remoteCache)return this._remoteCache;try{let r=await this.fetcher.fetch(this.remoteCacheURL,{method:"GET"});if(r.ok)return this._remoteCache=await r.json(),this._remoteCache;console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}}async fetchRemoteCacheLatest(){try{let r=await this.fetcher.fetch(this.remoteCacheLatestUpdateURL,{method:"GET"});if(r.ok)return r.text();console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}}async getCache(){let r=await this.fetchRemoteCacheLatest(),n=await super.getCache();if(n&&r===this.cacheVersionMementoStorage.get(this.remoteCacheVersionKey))return n;let i=await this.fetchRemoteCache();return await this.cacheVersionMementoStorage.update(this.remoteCacheVersionKey,r),await this.updateCache(i),i}async updateCache(r,n){if(r===void 0)return super.updateCache(r);if(!await super.getCache()||n)return super.updateCache(r)}static calculateRemoteCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/core.json`}static calculateRemoteCDNLatestURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/latest.txt`}},I7=class t extends Ol{constructor(r,n,i,o,s){super(r,n,i,o,s);this._wasRemoteExtensionCacheUpdated=!1;this.baseExtensionCDNURL=t.calculateBaseRemoteExtensionCDNURL(s,o)}constructExposedCache(){if(!this._remoteExtensionCache)return;let r={...this._remoteExtensionCache.core};for(let n in this._remoteExtensionCache.extensions){let i=this._remoteExtensionCache.extensions[n];for(let o in i)r[o]=i[o]}return r}async fetchRemoteExtensionCache(r){let n=`${this.baseExtensionCDNURL}/${r}.json`;try{let i=await this.fetcher.fetch(n,{method:"GET"});if(i.ok)return await i.json();if(i.status===404)return{};console.error(`Failed to fetch remote embeddings cache from ${n}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${n}`);return}}async getCache(){let r=await super.getCache();if(r===void 0)return;let n={core:{},extensions:{}};r&&t.isEmbeddingsCacheEntriesWithExtensions(r)?n=r:n={core:r,extensions:{}};let i=t.getInstalledExtensionIds(this.accessor),o=!1;for(let a in n.extensions)i.includes(a)||(delete n.extensions[a],o=!0);let s=i.filter(a=>!(a in n.extensions)||n.extensions[a]===void 0);for(let a of s){let c=await this.fetchRemoteExtensionCache(a);c&&(n.extensions[a]=c)}return this._remoteExtensionCache=n,this._wasRemoteExtensionCacheUpdated=s.length>0||o,this.constructExposedCache()}async updateCache(r,n){let i=r?super.updateCache(this._remoteExtensionCache,n||this._wasRemoteExtensionCacheUpdated):super.updateCache(r,n||this._wasRemoteExtensionCacheUpdated);return this._wasRemoteExtensionCacheUpdated=!1,i}static isEmbeddingsCacheEntriesWithExtensions(r){return"core"in r&&"extensions"in r}static getInstalledExtensionIds(r){return r.get(q0).getAllExtensions().filter(n=>!n.id.startsWith("vscode")).map(n=>n.id)}static calculateBaseRemoteExtensionCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}`}},mP=class{constructor(e,r,n,i,o,s,a){this.cacheKey=i;this.embeddingsComputer=s;this._isIndexLoaded=!1;this._logger=r.get(ce).getPromptResponseLogger(e),this._items=new Map,a?.type&&!a.supportsExtensions?this._embeddingsCache=new Ol(r,n,i,o,a.type):a?.type&&a.supportsExtensions?this._embeddingsCache=new I7(r,n,i,o,a.type):this._embeddingsCache=new t_(r,n,i,o)}get isIndexLoaded(){return this._isIndexLoaded}set isIndexLoaded(e){this._isIndexLoaded=e}async rebuildCache(){return await this._embeddingsCache.clearCache(),this._items.clear(),this.calculateEmbeddings()}nClosestValues(e,r){let n=Array.from(this._items.values()).map(i=>{if(!i.embedding)return{item:i,similarity:0};let o=Ll(e,i.embedding);return{item:i,similarity:o}});return n=n.filter(i=>i.similarity>0),n.sort((i,o)=>o.similarity-i.similarity),n.slice(0,r).map(i=>i.item)}hasItem(e){return this._items.has(e)}getItem(e){return this._items.get(e)}async calculateEmbeddings(){return this._calculationPromise?this._calculationPromise:(this._calculationPromise=this._calculateEmbeddings(),this._calculationPromise.then(()=>this._calculationPromise=void 0))}async _calculateEmbeddings(){let e=Date.now(),r=await this.getLatestItems(),n=await this._embeddingsCache.getCache(),i=new Map;for(let o of r){let s=o,a=this._items.get(o.key),c=o.key;a?.embedding?s=a:n&&n[c]&&(s={...o,...n[c]}),i.set(c,s)}this._items=i,await this._embeddingsCache.updateCache(n),this._logger.debug(`Embeddings for ${this.cacheKey} calculated in ${Date.now()-e}ms`),this.isIndexLoaded=!0}async fetchEmbeddingsForItems(e){return this.embeddingsComputer.computeEmbeddings(e.map(r=>this.getEmbeddingQueryString(r)),void 0)}};function Tp(t){let e=t.split(".");return`${e[0]}.${e[1]}`}var gP=re("IProjectTemplatesIndex"),r_=class{constructor(e){this._isIndexLoaded=!1;let r=Tp(e.get(mt).getEditorInfo().version);this.embeddingsCache=new Ol(e,1,"projectTemplateEmbeddings",r,"project-templates")}async updateIndex(){this._isIndexLoaded||(this._isIndexLoaded=!0,this._embeddings=await this.embeddingsCache.getCache())}async nClosestValues(e,r,n=0){if(await this.updateIndex(),!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[0]}`,similarity:0};let s=Ll(e,o[1].embedding);return{key:`${o[0]} `,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}};r_=we([de(0,Ct)],r_);function R7(t){let e=`Setting Id: ${t.key}
`;if(e+=`Type: ${t.type}
`,e+=`Description: ${t.description??t.markdownDescription??""}
`,t.enum){e+=`Possible values:
`;for(let r=0;r<t.enum.length;r++)e+=` - ${t.enum[r]} - ${t.enumDescriptions?.[r]??""}
`}return e+=`
`,e}var vP=class extends mP{constructor(r,n,i,o,s,a,c,u){super(r,n,i,o,s,a,u);this.relatedInformationConfig=c;this.isIndexLoaded=!1,this._telemetryLogger=n.get(ke)}async provideRelatedInformation(r,n){let i=Date.now();if(!this.isIndexLoaded)return this.calculateEmbeddings(),this._logger.debug(`Related Information: Index not loaded yet triggering background calculation, returning ${Date.now()-i}ms`),[];if(n.isCancellationRequested)return this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`),[];let o=Date.now(),s=await this.embeddingsComputer.computeEmbeddings([r],{},n);if(this._logger.debug(`Related Information: Remote similarly request took ${Date.now()-o}ms`),n.isCancellationRequested||!s||!s[0])return this._logger.debug(`Related Information: Request cancelled or no embeddings computed, returning ${Date.now()-i}ms`),[];let a=[];for(let u of this._items.values()){if(n.isCancellationRequested){this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`);break}if(u.embedding){let l=Ll(s[0],u.embedding);l>this.relatedInformationConfig.threshold&&a.push(this.toRelatedInformation(u,l))}}return this._logger.debug(`Related Information: Successfully Calculated, returning ${Date.now()-i}ms`),this.relatedInformationConfig.type===4&&this._telemetryLogger.sendInternalMSFTTelemetryEvent("relatedInformationSettings",{query:r}),a.sort((u,l)=>l.weight-u.weight).slice(0,this.relatedInformationConfig.maxResults)}},C7=class extends vP{constructor(r,n){super("CommandIdIndex",r,1,"commandEmbeddings",Tp(r.get(mt).getEditorInfo().version),n,{type:2,threshold:.7,maxResults:100},{type:"commands",supportsExtensions:!0});this.accessor=r}async getLatestItems(){let r=await this.accessor.get(q0).getAllCommands();return r.push({label:"Extensions: Search the marketplace for extensions",command:"workbench.extensions.search",keybinding:"Not set"}),r.push({label:"Extensions: Install extension from marketplace",command:"workbench.extensions.installExtension",keybinding:"Not set"}),r.map(n=>({key:n.command,label:n.label.replace("View: Toggle","View: Toggle or Show or Hide"),originalLabel:n.label,keybinding:n.keybinding??"Not set"}))}getEmbeddingQueryString(r){return`${r.label} - ${r.key}`}toRelatedInformation(r,n){return{type:2,weight:n,command:r.key}}},w7=class extends vP{constructor(r,n){super("SettingsIndex",r,1,"settingEmbeddings",Tp(r.get(mt).getEditorInfo().version),n,{type:4,threshold:.7,maxResults:100},{type:"settings",supportsExtensions:!0});this.accessor=r;this.isIndexLoaded=!1}async getLatestItems(){let r=await this.accessor.get(q0).getAllSettings(),n=[];for(let i of Object.keys(r)){let o=r[i];o.deprecationMessage||o.markdownDeprecationMessage||n.push({...o,key:i})}return n}getEmbeddingQueryString(r){return R7(r)}toRelatedInformation(r,n){return{type:4,weight:n,setting:r.key}}},Tm=re("ICombinedEmbeddingIndex"),n_=class{constructor(e){this.commandIdIndex=new C7(e,e.get(Bs)),this.settingsIndex=new w7(e,e.get(Bs))}async loadIndexes(){await Promise.all([this.commandIdIndex.isIndexLoaded?Promise.resolve():this.commandIdIndex.calculateEmbeddings(),this.settingsIndex.isIndexLoaded?Promise.resolve():this.settingsIndex.calculateEmbeddings()])}async nClosestValues(e,r){return await this.loadIndexes(),{commands:this.commandIdIndex.nClosestValues(e,r),settings:this.settingsIndex.nClosestValues(e,r)}}hasSetting(e){return this.settingsIndex.hasItem(e)}hasCommand(e){return this.commandIdIndex.hasItem(e)}getSetting(e){return this.settingsIndex.getItem(e)}getCommand(e){return this.commandIdIndex.getItem(e)}};n_=we([de(0,Ct)],n_);var Ip=class t{constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return e.get(_m).sendExpProblemTelemetry({reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};var i_=re("IExpConfigMaker"),yP=class{async fetchExperiments(e,r){let n=e.get(Sr),i;try{i=await n.fetch("https://default.exp-tas.com/vscode/ab",{method:"GET",headers:r})}catch(c){return Ip.createFallbackConfig(e,`Error fetching ExP config: ${c}`)}if(!i.ok)return Ip.createFallbackConfig(e,`ExP responded with ${i.status}`);let o=await i.json(),s=o.Configs.find(c=>c.Id==="vscode")??{Id:"vscode",Parameters:{}},a=Object.entries(s.Parameters).map(([c,u])=>c+(u?"":"cf"));return new Ip(s.Parameters,o.AssignmentContext,a.join(";"))}},bP=class{async fetchExperiments(e,r){return Ip.createEmptyConfig()}};var _4e={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},_P=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=_4e[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};var xP=class{constructor(e){this.prefix=e}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},A7=class extends xP{getValue(e){return this.prefix}getUpcomingValues(e){return[]}},xne=t=>new A7(t),SP=class extends xP{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let s of i)for(let a of o)n.push(this.prefix+s+a);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets===void 0?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs===void 0?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var Sne="X-Copilot-ClientTimeBucket",P7=class{now(){return new Date}},EP=class{constructor(e,r=new P7){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=xne(e)}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new SP(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(Sne,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(Sne,o))}}};var k7=class{constructor(e){this.accessor=e;this.cache=new xl(200)}async fetchExpConfig(e){let r=this.cache.get(e.stringify());return r||(r=new D7(()=>this.accessor.get(i_).fetchExperiments(this.accessor,e.toHeaders()),1e3*60*60),this.cache.set(e.stringify(),r)),r.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},D7=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}},Im=re("IFeatures"),Pu=class{constructor(e){this.accessor=e;this.staticFilters={};this.dynamicFilters={};this.upcomingDynamicFilters={};this.assignments=new k7(this.accessor)}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}getDynamicFilterValues(){let e={};for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}async getAssignment(e,r={},n){let i=this.getGranularityDirectory(),o=this.makeFilterSettings(r),s=i.extendFilters(o),a=await this.getExpConfig(s.newFilterSettings);i.update(o,+(a.variables.copilotbycallbuckets??NaN),+(a.variables.copilottimeperiodsizeinh??NaN));let c=i.extendFilters(o),u=c.newFilterSettings,l=await this.getExpConfig(u),d=new Promise(p=>setTimeout(p,Pu.upcomingDynamicFilterCheckDelayMs));for(let p of c.otherFilterSettingsToPrefetch)d=d.then(async()=>{await new Promise(f=>setTimeout(f,Pu.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(p)});return this.prepareForUpcomingFilters(u),n&&(n.filtersAndExp={exp:l,filters:u}),l.variables[e]}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.accessor.get(mt).machineId;this.granularityDirectory=new EP(e)}return this.granularityDirectory}makeFilterSettings(e){return new _P({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e){try{return this.assignments.fetchExpConfig(e)}catch(r){return Ip.createFallbackConfig(this.accessor,`Error fetching ExP config: ${r}`)}}async prepareForUpcomingFilters(e){if(!(new Date().getMinutes()<60-Pu.upcomingTimeBucketMinutes))for(let[r,n]of Object.entries(this.upcomingDynamicFilters))await new Promise(i=>setTimeout(i,Pu.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,n()))}async chatExpModel(){return await this.getAssignment("copilotchatexpmodel")??""}async chatMaxNumTokens(){return await this.getAssignment("copilotchatmaxnumtokens")??0}async chatOffTopicModel(){return await this.getAssignment("copilotchatofftopicmodel")??""}async chatOffTopicModelTokenizer(){return await this.getAssignment("copilotchatofftopicmodeltokenizer")??""}async chatOffTopicModelThreshold(){return await this.getAssignment("copilotchatofftopicmodelthreshold")??0}async addExpAndFilterToTelemetry(e){let r=this.makeFilterSettings({});e.filtersAndExp={filters:r,exp:await this.getExpConfig(r)}}};Pu=we([de(0,Ct)],Pu);var N7=re("IEditorExperimentFilters");function Ine(t){let e=t.get(Im),r=t.get(Pe);e.registerStaticFilters(x4e(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>r.getConfig(Ne.DebugOverrideEngine))}function x4e(t){let e=S4e(t),r=t.get(N7).addEditorSpecificFilters();return{...e,...r}}function S4e(t){let e=t.get(mt),r=e.getEditorInfo();return{"X-VSCode-AppVersion":Tne(r.version),"X-MSEdge-ClientId":e.machineId,"X-VSCode-ExtensionName":e.getName(),"X-VSCode-ExtensionVersion":Tne(e.getVersion()),"X-VSCode-TargetPopulation":"public"}}function Tne(t){return t.split("-")[0]}var L7=W(require("vscode"));var TP=class{addEditorSpecificFilters(){return{"X-VSCode-Build":L7.env.appName,"X-VSCode-Language":L7.env.language}}};var IP=re("IGitCommitMessageService");var Ml=re("IGitExtensionService");var vi=re("IGitService");function CP(t){if(!t)return;if(t.remoteFetchUrls?.length===1)return O7(t.remoteFetchUrls[0]);let e=t.remotes.findIndex(n=>n===t.upstreamRemote);if(e!==-1){let n=t.remoteFetchUrls?.[e];if(n){let i=O7(n);if(i)return i}}let r=t.remotes.findIndex(n=>n==="origin");if(r!==-1){let n=t.remoteFetchUrls?.[r];if(n){let i=O7(n);if(i)return i}}}function O7(t){t=t.replace(/^git@/,"").replace(/\.git$/,"");try{let e=gt.parse(t);if(e.authority!=="github.com"&&e.scheme!=="github.com")return;let r=e.path.replace(/^\//,"").trim(),[n,i,o]=r.split("/");return n&&i?`${n}/${i}`:void 0}catch{return}}function Cne(t){if(t.includes("@")&&t.includes(":")){let e="https://"+t.substring(t.indexOf("@")+1).replace(":","/"),r=new URL(e);return r.username="",r.password="",r.search="",r.toString()}else{let e=new URL(t);return e.protocol="https",e.username="",e.password="",e.search="",e.toString()}}var Cm=W(require("vscode"));var wP=class{constructor(e){this._onDidChange=new Cm.EventEmitter;this.onDidChange=this._onDidChange.event;this._extensionEnablement=void 0;this._disposables=[];this._logger=e.get(ce).getLogger("gitExtensionService"),this._logger.info("Initializing Git extension service."),this._disposables.push(...this._initializeExtensionApi())}getExtensionApi(){return this._api}get extensionAvaiable(){return this._extensionEnablement===void 0?!!Cm.extensions.getExtension("vscode.git"):this._extensionEnablement}_initializeExtensionApi(){let e=[],r=Cm.extensions.getExtension("vscode.git"),n=async()=>{let i;try{i=await r.activate(),this._logger.info("Successfully activated the vscode.git extension.")}catch(s){this._logger.error("Failed to activate the vscode.git extension.",s);return}let o=s=>{this._logger.info(`Enablement state of the vscode.git extension: ${s}.`),this._extensionEnablement=s,s?(this._api=i.getAPI(1),this._onDidChange.fire({enabled:!0}),this._logger.info("Successfully registered Git commit message provider.")):(this._api=void 0,this._onDidChange.fire({enabled:!1}))};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{this._logger.info("vscode.git extension is not yet activated.");let i=Cm.extensions.onDidChange(()=>{!r&&Cm.extensions.getExtension("vscode.git")&&(r=Cm.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}};var wne=W(require("vscode"));var ku=class extends Ur{constructor(r){super();this.gitExtensionService=r;this._onDidOpenRepository=new Br;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new Br;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidFinishInitialRepositoryDiscovery=new Br;this.onDidFinishInitialization=this._onDidFinishInitialRepositoryDiscovery.event;this._isInitialized=!1;this._register(this._onDidOpenRepository),this._register(this._onDidCloseRepository),this._register(this._onDidFinishInitialRepositoryDiscovery);let n=this.gitExtensionService.getExtensionApi();n?this.registerGitAPIListeners(n):this._register(this.gitExtensionService.onDidChange(i=>{if(i.enabled){let o=this.gitExtensionService.getExtensionApi();o&&this.registerGitAPIListeners(o)}else this._onDidFinishInitialRepositoryDiscovery.fire()}))}registerGitAPIListeners(r){this._register(r.onDidOpenRepository(n=>{let i=ku.repoToRepoContext(n);i&&this._onDidOpenRepository.fire(i)})),this._register(r.onDidCloseRepository(n=>{let i=ku.repoToRepoContext(n);i&&this._onDidCloseRepository.fire(i)})),r.state==="initialized"&&(this._onDidFinishInitialRepositoryDiscovery.fire(),this._isInitialized=!0),this._register(r.onDidChangeState(n=>{n==="initialized"&&(this._onDidFinishInitialRepositoryDiscovery.fire(),this._isInitialized=!0)}))}get isInitialized(){return this._isInitialized}getRepository(r){let n=this.gitExtensionService.getExtensionApi();if(n)return ku.repoToRepoContext(n.getRepository(r))}static repoToRepoContext(r){if(r)return{rootUri:r.rootUri,headBranchName:r.state.HEAD?.name,upstreamBranchName:r.state.HEAD?.upstream?.name,upstreamRemote:r.state.HEAD?.upstream?.remote,isRebasing:r.state.rebaseCommit!==null,remotes:r.state.remotes.map(n=>n.name),remoteFetchUrls:r.state.remotes.map(n=>n.fetchUrl)}}get repositories(){if(!wne.workspace.workspaceFolders)return[];let n=this.gitExtensionService.getExtensionApi();return n?Pr(n.repositories.map(i=>ku.repoToRepoContext(i))):[]}};ku=we([de(0,Ml)],ku);var Fl=re("IGithubRepositoryService");var o_=class{constructor(e){this.accessor=e;this.fetcherService=e.get(Sr)}async isAvailable(e,r){let n=await this.accessor.get(Rt).getAnyGitHubToken();try{return(await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${n}`}})).ok}catch{return!1}}async getRepositoryItems(e,r,n){let i=[];try{let o=await this.accessor.get(Rt).getPermissiveGitHubToken({silent:!0}),s=n.split("/").map(c=>encodeURIComponent(c)).join("/"),a=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${s}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${o}`}});if(a.ok){let c=await a.json();if(Array.isArray(c))for(let u of c)"name"in u&&"path"in u&&"type"in u&&"html_url"in u&&(i.push({name:u.name,path:u.path,type:u.type,html_url:u.html_url}),u.type==="dir"&&i.push(...await this.getRepositoryItems(e,r,u.path)))}else console.error(`Failed to contents from ${e}:${r}:${n}`)}catch{console.error(`Failed to contents from ${e}:${r}:${n}`)}return i}async getRepositoryItemContent(e,r,n){try{let i=await this.accessor.get(Rt).getPermissiveGitHubToken({silent:!0}),o=n.split("/").map(a=>encodeURIComponent(a)).join("/"),s=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${o}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${i}`}});if(s.ok){let a=await s.json();if("content"in a){let c=Buffer.from(a.content,"base64");return new Uint8Array(c)}throw new Error("Unexpected data from GitHub")}}catch{console.error(`Failed to contents from ${e}:${r}:${n}`)}}};o_=we([de(0,Ct)],o_);var RP=`

**Note:** Some files were excluded from the context due to content exclusion rules. Click [here](https://docs.github.com/en/copilot/managing-github-copilot-in-your-organization/configuring-content-exclusions-for-github-copilot) to learn more.`,Oe=re("IIgnoreService"),Rne=class t{static{this.Instance=new t}dispose(){}async init(){}async isCopilotIgnored(e){return!1}async asMinimatchPattern(){}async sessionInfo(){return""}};var Zi=re("ILanguageDiagnosticService"),s_=class{constructor(e){this._ignoreService=e}waitForNewDiagnostics(e,r,n=5e3){let i,o,s;return new Promise(a=>{i=r.onCancellationRequested(()=>a([])),s=setTimeout(()=>a(this.getDiagnostics(e)),n),o=this.onDidChangeDiagnostics(c=>{for(let u of c.uris)if(RF(u,e)){a(this.getDiagnostics(e));break}})}).finally(()=>{i.dispose(),o.dispose(),clearTimeout(s)})}};s_=we([de(0,Oe)],s_);function AP(t){return t.map(e=>e.range).reduce((e,r)=>e.union(r))}function Ane(t){return t.severity===Al.Error}var ho=re("ILanguageFeaturesService");function Cp(t){return typeof t=="object"&&t!==null&&"targetUri"in t}var M7=W(require("vscode"));var PP=class extends s_{constructor(){super(...arguments);this.onDidChangeDiagnostics=M7.languages.onDidChangeDiagnostics}getDiagnostics(r){return M7.languages.getDiagnostics(r)}};var a_=W(require("vscode")),kP=class{constructor(){}async getDefinitions(e,r){return await a_.commands.executeCommand("vscode.executeDefinitionProvider",e,r)}async getImplementations(e,r){return await a_.commands.executeCommand("vscode.executeImplementationProvider",e,r)}async getReferences(e,r){return await a_.commands.executeCommand("vscode.executeReferenceProvider",e,r)}async getWorkspaceSymbols(e){return await a_.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)}async getDocumentSymbols(e){return await a_.commands.executeCommand("vscode.executeDocumentSymbolProvider",e)}};var DP=re("IKerberosLoader");var NP=re("IWindowsCaCertsLoader");var F7=W(require("vscode")),LP=class{async loadKerberos(){try{return require(`${F7.env.appRoot}/node_modules.asar/kerberos`)}catch{}try{return require(`${F7.env.appRoot}/node_modules/kerberos`)}catch{}}};var Dne=require("vscode");var Nne="github-enterprise",Pne="https://github.com";function kne(t){return t.getConfig(Ne.AuthProvider)==="github-enterprise"?Dne.workspace.getConfiguration(Nne).get("uri")??Pne:Pne}var c_=class extends _A{constructor(r){super(kne(r));this.configurationService=r}updateBaseUrl(r,n){super.updateBaseUrl(r,kne(this.configurationService))}};c_=we([de(0,Pe)],c_);function Lne(t,e){(t.affectsConfiguration(`${ym}.advanced`)||t.affectsConfiguration(`${Nne}.uri`))&&e.get(Hb).updateBaseUrl(e)}var One=W(require("os")),U7=W(require("vscode")),OP=class{async loadCaCerts(){let e=await this.loadBuiltInWinCAModule(),r=new Set,n=new e.Crypt32;try{let i;for(;i=n.next();)r.add(E4e(i))}finally{n.done()}return Array.from(r)}async loadBuiltInWinCAModule(){try{return require(`${U7.env.appRoot}/node_modules.asar/@vscode/windows-ca-certs`)}catch{}try{return require(`${U7.env.appRoot}/node_modules/@vscode/windows-ca-certs`)}catch{}}};function E4e(t){let e=["-----BEGIN CERTIFICATE-----"],r=t.toString("base64");for(let n=0;n<r.length;n+=64)e.push(r.substr(n,64));return e.push("-----END CERTIFICATE-----",""),e.join(One.EOL)}var GT=re("INotebookService");var u_=require("vscode"),MP=class{_hasJupyterExtension(){return u_.extensions.getExtension("ms-toolsai.jupyter")?.isActive}async getVariables(e){if(!this._hasJupyterExtension())try{let r=await u_.commands.executeCommand("vscode.executeNotebookVariableProvider",e);return r&&Array.isArray(r)?r.map(this._convertResult):[]}catch{return[]}try{let r=await u_.commands.executeCommand("jupyter.listVariables",e);return r&&Array.isArray(r)?r.map(this._convertResult):[]}catch{return[]}}_convertResult(e){return"variable"in e?e:{variable:e,hasNamedChildren:!1,indexedChildrenCount:0}}async getPipPackages(e){if(!this._hasJupyterExtension())return[];try{return await u_.commands.executeCommand("jupyter.listPipPackages",e)}catch{return[]}}};var Mne=require("vscode"),FP=class{async showWarningMessage(e,...r){return{title:await Mne.window.showWarningMessage(e,...r.map(i=>i.title))}}};var uie=W(require("path"));var Fne=require("worker_threads"),B7=class{constructor(e,r,n){this.logger=n;this.handlers=new Map;this.nextId=1;this.worker=new Fne.Worker(e,r),this.worker.on("message",({id:i,err:o,res:s})=>{let a=this.handlers.get(i);a&&(this.handlers.delete(i),o?a.reject(o):a.resolve(s))}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))})}terminate(){this.worker.removeAllListeners(),this.worker.terminate(),this.handlers.clear()}handleError(e){this.logger?.exception(e);for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}remoteCall(e,r){let n=this.nextId++,i,o,s=new Promise((a,c)=>{i=a,o=c});return this.handlers.set(n,{resolve:i,reject:o}),this.worker.postMessage({id:n,fn:e,args:r}),s}},wm=class{constructor(e,r,n){this.worker=new B7(e,r,n);let i={get:(o,s)=>(typeof s=="string"&&!o[s]&&(o[s]=(...a)=>{if(!this.worker)throw new Error("Worker was terminated!");return this.worker.remoteCall(s,a)}),o[s])};this.proxy=new Proxy(Object.create(null),i)}terminate(){this.worker.terminate()}};var Z7={};rn(Z7,{_clean:()=>C4e,_extractDoc:()=>J4e,_getCallExpressions:()=>L4e,_getClassDeclarations:()=>M4e,_getClassReferences:()=>B4e,_getCoarseParentScope:()=>V4e,_getDocumentableNodeIfOnIdentifier:()=>$4e,_getFineScopes:()=>K4e,_getFixSelectionOfInterest:()=>z4e,_getFunctionBodies:()=>G4e,_getFunctionDefinitions:()=>O4e,_getFunctionPositions:()=>j4e,_getNodeMatchingSelection:()=>HP,_getNodeToDocument:()=>Y4e,_getNodeToExplain:()=>Q4e,_getSemanticChunkTree:()=>H4e,_getStructure:()=>eLe,_getSymbols:()=>q4e,_getTestableNode:()=>W4e,_getTypeDeclarations:()=>F4e,_getTypeReferences:()=>U4e,_parse:()=>Oi});var zT=W(require("path"));function Une(t,e,r){let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n}function Bne(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let i=t[n];e(i,r)>0&&(r=i)}return r}var q7=class{constructor(e=10){this.values=new Map;this.lruKeys=[];if(e<1)throw new Error("Cache size must be at least 1");this.size=e}removeKeyFromLRU(e){let r=this.lruKeys.indexOf(e);r!==-1&&this.lruKeys.splice(r,1)}touchKeyInLRU(e){this.removeKeyFromLRU(e),this.lruKeys.push(e)}clear(){this.values.clear(),this.lruKeys=[]}deleteKey(e){this.removeKeyFromLRU(e);let r=this.values.get(e);return r!==void 0&&this.values.delete(e),r}get(e){if(this.values.has(e)){let r=this.values.get(e);return this.touchKeyInLRU(e),r}}keys(){return this.lruKeys.slice()}getValues(){return this.values.values()}put(e,r){let n;if(!this.values.has(e)&&this.lruKeys.length===this.size){let i=this.lruKeys.shift(),o=this.deleteKey(i);n=[i,o]}return this.values.set(e,r),this.touchKeyInLRU(e),n}},UP=class{constructor(e){this.actual=new q7(e)}dispose(){this.clear()}clear(){let e=this.actual.getValues();for(let r of e)r.dispose();this.actual.clear()}deleteKey(e){let r=this.actual.deleteKey(e);r&&r.dispose()}get(e){return this.actual.get(e)}keys(){return this.actual.keys()}getValues(){return this.actual.getValues()}put(e,r){let n=this.actual.put(e,r);n&&n[1].dispose()}};var go={doesContain:(t,e)=>t.startIndex<=e.startIndex&&e.endIndex<=t.endIndex,ofSyntaxNode:t=>({startIndex:t.startIndex,endIndex:t.endIndex}),compare:(t,e)=>t.startIndex-e.startIndex||e.endIndex-t.endIndex,isEqual:(t,e)=>go.compare(t,e)===0,doIntersect:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return r<n},len:t=>t.endIndex-t.startIndex,intersectionSize:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return Math.max(n-r,0)},isTreeSitterOffsetRange(t){return typeof t.startIndex=="number"&&typeof t.endIndex=="number"}},Du={isEqual(t,e){return t.row===e.row&&t.column===e.column},isBefore(t,e){return t.row<e.row||t.row===e.row&&t.column<e.column},isAfter(t,e){return Du.isBefore(e,t)},isBeforeOrEqual(t,e){let r=Du.isBefore(t,e),n=Du.isEqual(t,e);return!!(r||n)},equals(t,e){return t.column===e.column&&t.row===e.row},isAfterOrEqual(t,e){return Du.isBeforeOrEqual(e,t)},ofPoint:t=>({row:t.row,column:t.column})},Am={doesContain:(t,e)=>Du.isBeforeOrEqual(t.startPosition,e.startPosition)&&Du.isAfterOrEqual(t.endPosition,e.endPosition),equals:(t,e)=>Du.equals(t.startPosition,e.startPosition)&&Du.equals(t.endPosition,e.endPosition),ofSyntaxNode:t=>({startPosition:t.startPosition,endPosition:t.endPosition})},BP={ofSyntaxNode:t=>({type:t.type,startIndex:t.startIndex,endIndex:t.endIndex})},Nu={ofSyntaxNode:t=>({range:Am.ofSyntaxNode(t),startIndex:t.startIndex,text:t.text,endIndex:t.endIndex})},Rm=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new Uo("startIndex must be less than endIndex")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return r(this),e.join(`
`)}};var qP=class{constructor(e,r){this.syntaxTreeRoot=r;this.roots=[];this.formTree(e)}formTree(e){e.sort((o,s)=>o.mainBlock.startIndex-s.mainBlock.startIndex||o.mainBlock.endIndex-s.mainBlock.endIndex);let r=[],n=()=>r[r.length-1],i=(o,s)=>o.mainBlock.startIndex===s.mainBlock.startIndex&&o.mainBlock.endIndex===s.mainBlock.endIndex;for(let o of e){let s={info:o,children:[]},a=n();if(!a){this.roots.push(s),r.push(s);continue}if(!i(a.info,o)){for(;a&&!go.doesContain(a.info.mainBlock,o.mainBlock);)r.pop(),a=n();a?a.children.push(s):this.roots.push(s),r.push(s)}}}};var dr=(()=>{function t(e,...r){return e.length===1?e[0]:e.reduce((n,i,o)=>`${n}${i}${r[o]||""}`,"")}return{typescript:t,javascript:t,python:t,go:t,ruby:t,csharp:t,cpp:t,java:t,rust:t}})();function Ic(t,e){return Object.fromEntries(t.map(r=>[r,e]))}var qne={...Ic(["javascript","typescript","tsx"],[`[
			(call_expression
				function: (identifier) @identifier)
			(call_expression
				function: (member_expression
					(property_identifier) @identifier))
		] @call_expression`]),python:[`[
			(call
				function: (identifier) @identifier)
			(call
				function: (attribute
					attribute: (identifier) @identifier))
		] @call_expression`],csharp:[`[
			(invocation_expression
				function: (identifier) @identifier)
			(invocation_expression
				function: (member_access_expression
					name: (identifier) @identifier))
		] @call_expression`],go:[`[
			(call_expression
				((selector_expression
					(field_identifier) @identifier)))
			(call_expression
				(identifier) @identifier)
		] @call_expression`],java:[`[
			(method_invocation
				name: (identifier) @identifier)
		] @call_expression`],ruby:[`[
			(call (identifier) @identifier
				(#not-match? @identifier "new|send|public_send|method"))
			(call
				receiver: (identifier)
				method: (identifier) @method
				(#match? @method "^(send|public_send|method)")
				arguments: (argument_list
					(simple_symbol) @symbol))
		] @call_expression`],cpp:[`[
			(function_declarator
				(identifier) @identifier)
			(function_declarator
				(field_identifier) @identifier)
			(call_expression (identifier) @identifier)
			(call_expression
				(field_expression
					field: (field_identifier) @identifier))
			(call_expression
				(call_expression
					(primitive_type)
					(argument_list
						(pointer_expression
						(identifier) @identifier))))
		] @call_expression`],rust:[`[
			(call_expression (identifier) @identifier)
			(call_expression (field_expression (identifier) (field_identifier) @identifier))
			(call_expression (scoped_identifier (identifier) (identifier) @identifier (#not-match? @identifier "new")))
		] @call_expression`]},Hne={...Ic(["javascript","typescript","tsx"],["(class_declaration) @class_declaration"]),java:["(class_declaration) @class_declaration"],csharp:["(class_declaration) @class_declaration"],python:["(class_definition) @class_declaration"],cpp:["(class_specifier) @class_declaration"],ruby:["(class) @class_declaration"],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @class_declaration`],rust:["(impl_item (type_identifier) @type_identifier) @class_declaration"]},jne={typescript:[`[
			(interface_declaration)
			(type_alias_declaration)
		] @type_declaration`],csharp:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],cpp:[`[
			(struct_specifier
				(type_identifier) @type_identifier)
			(union_specifier
				(type_identifier) @type_identifier)
			(enum_specifier
				(type_identifier) @type_identifier)
		] @type_declaration`],java:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @type_declaration`],ruby:["((constant) @type_identifier) @type_declaration"],python:[`(class_definition
			(identifier) @type_identifier) @type_declaration`]},Gne={typescript:["(type_identifier) @type_identifier"],go:["(type_identifier) @type_identifier"],ruby:["(constant) @type_identifier"],csharp:[`[
			(base_list
				(identifier) @type_identifier)
			(variable_declaration
				(identifier) @type_identifier)
		]`],cpp:["(type_identifier) @type_identifier"],java:["(type_identifier) @type_identifier"],python:[`[
			(type (identifier) @type_identifier)
			(argument_list
				(identifier) @type_identifier)
		]`]},Vne={...Ic(["javascript","typescript","tsx"],[`(new_expression
			constructor: (identifier) @new_expression)`]),python:[`(call
			function: (identifier) @new_expression)`],csharp:[`(object_creation_expression
			(identifier) @new_expression)`],java:[`(object_creation_expression
			(type_identifier) @new_expression)`],cpp:[`[
			(declaration
				(type_identifier) @new_expression)
			(class_specifier
				(type_identifier) @new_expression)
		]`],go:["(composite_literal (type_identifier) @new_expression)"],ruby:[`((call
			receiver: ((constant) @new_expression)
			method: (identifier) @method)
				(#eq? @method "new"))`],rust:[`(call_expression
			(scoped_identifier
				(identifier) @new_expression
				(identifier) @identifier
				(#eq? @identifier "new")))`]},zne={python:[`[
			(function_definition
				name: (identifier) @identifier
				body: (block
						(expression_statement (string))? @docstring) @body)
			(assignment
				left: (identifier) @identifier
				right: (lambda) @body)
		] @function`,'(ERROR ("def" (identifier) (parameters))) @function'],...Ic(["javascript","typescript","tsx"],[`[
			(function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(method_definition
				name: (property_identifier)? @identifier
				body: (statement_block) @body)
			(arrow_function
				body: (statement_block) @body)
		] @function`]),go:[`[
			(function_declaration
				name: (identifier) @identifier
				body: (block) @body)
			(method_declaration
				name: (field_identifier) @identifier
				body: (block) @body)
		] @function`],ruby:[`[
			(method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
			(singleton_method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
		] @function`],csharp:[`[
			(constructor_declaration
				(identifier) @identifier
				(block) @body)
			(destructor_declaration
				(identifier) @identifier
				(block) @body)
			(operator_declaration
				(block) @body)
			(method_declaration
				(identifier) @identifier
				(block) @body)
			(local_function_statement
				(identifier) @identifier
				(block) @body)
		] @function`],cpp:[`[
			(function_definition
				(_
					(identifier) @identifier)
					(compound_statement) @body)
			(function_definition
				(function_declarator
					(qualified_identifier
						(identifier) @identifier))
					(compound_statement) @body)
		] @function`],java:[`[
			(constructor_declaration
				name: (identifier) @identifier
				body: (constructor_body) @body)
			(method_declaration
				name: (_) @identifier
				body: (block) @body)
			(lambda_expression
				body: (block) @body)
		] @function`],rust:[`[
			(function_item (identifier) @identifier)
			(let_declaration (identifier) @identifier)
		] @function`]},$ne={javascript:[dr.javascript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],...Ic(["typescript","tsx"],[dr.typescript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]),java:[dr.java`((block_comment) @block_comment
			(#match? @block_comment "^\\\\/\\\\*\\\\*")) @docComment`],cpp:[dr.cpp`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],csharp:[dr.csharp`(
			((comment) @c
				(#match? @c "^\\\\/\\\\/\\\\/"))+
		) @docComment`],rust:[dr.rust`((line_comment) @comment
			(#match? @comment "^\/\/\/|^\/\/!"))+ @docComment`],go:[dr.go`((comment)+) @docComment`],ruby:[dr.ruby`((comment)+) @docComment`],python:[`(expression_statement
			(string) @docComment)`]},Wne={javascript:[dr.javascript`[
			(function_declaration
				(identifier) @function.identifier
			) @function

			(generator_function_declaration
				name: (identifier) @generator_function.identifier
			) @generator_function

			(class_declaration
				name: (identifier) @class.identifier ;; note: (type_identifier) in typescript
				body: (class_body
							(method_definition
								name: (property_identifier) @method.identifier
							) @method
						)
			) @class
		]`],...Ic(["typescript","tsx"],[dr.typescript`[
				(function_declaration
					(identifier) @function.identifier
				) @function

				(generator_function_declaration
					name: (identifier) @generator_function.identifier
				) @generator_function

				(class_declaration
					name: (type_identifier) @class.identifier
					body: (class_body
								(method_definition
									name: (property_identifier) @method.identifier
								) @method
							)
				) @class
			]`]),python:[dr.python`[
				(function_definition
					name: (identifier) @function.identifier
				) @function
			]`],go:[dr.go`[
				(function_declaration
					name: (identifier) @function.identifier
				) @function

				(method_declaration
					name: (field_identifier) @method.identifier
				) @method
			]`],ruby:[dr.ruby`[
				(method
					name: (identifier) @method.identifier
				) @method

				(singleton_method
					name: (_) @singleton_method.identifier
				) @singleton_method
			]`],csharp:[dr.csharp`[
				(constructor_declaration
					(identifier) @constructor.identifier
				) @constructor

				(destructor_declaration
					(identifier) @destructor.identifier
				) @destructor

				(method_declaration
					(identifier) @method.identifier
				) @method

				(local_function_statement
					(identifier) @local_function.identifier
				) @local_function
			]`],cpp:[dr.cpp`[
				(function_definition
					(_
						(identifier) @identifier)
				) @function
			]`],java:[dr.java`(class_declaration
			body: (_
						[
							(constructor_declaration
								(modifiers)? @constructor.modifiers
								(#not-eq? @constructor.modifiers "private")
								name: (identifier) @constructor.identifier
							) @constructor

							(method_declaration
								(modifiers)? @method.modifiers
								(#not-eq? @method.modifiers "private")
								name: (identifier) @method.identifier
							) @method
						]
					)
		) @class`],rust:[dr.rust`[
				(function_item
					(identifier) @function.identifier
				) @function
			]`]},Kne={javascript:[dr.javascript`[
			(identifier) @symbol
			(property_identifier) @symbol
			(private_property_identifier) @symbol
		]`],...Ic(["typescript","tsx"],[dr.typescript`[
			(identifier) @symbol
			(type_identifier) @symbol
			(property_identifier) @symbol
			(private_property_identifier) @symbol
		]`]),cpp:[dr.cpp`[
			(identifier) @symbol
			(type_identifier) @symbol
		]`],csharp:[dr.csharp`[
			(identifier) @symbol
		]`],go:[dr.go`[
			(identifier) @symbol
		]`],java:[dr.java`[
			(identifier) @symbol
		]`],python:[dr.python`[
			(identifier) @symbol
		]`],ruby:[dr.ruby`[
			(identifier) @symbol
		]`],rust:[dr.rust`[
			(identifier) @symbol
		]`]},Yne={...Ic(["typescript","tsx"],[dr.typescript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related

				(public_field_definition) @public_field_definition
				(method_definition) @method_definition

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]
		`]),python:[dr.python`
			[
				(comment) @comment

				;; simple statements
				(assert_statement) @assert_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(delete_statement) @delete_statement
				(exec_statement) @exec_statement
				(expression_statement) @expression_statement
				(future_import_statement) @future_import_statement
				(global_statement) @global_statement
				(import_from_statement) @import_from_statement
				(import_statement) @import_statement
				(nonlocal_statement) @nonlocal_statement
				(pass_statement) @pass_statement
				(print_statement) @print_statement
				(raise_statement) @raise_statement
				(return_statement) @return_statement
				(type_alias_statement) @type_alias_statement


				;; compound statements

				(class_definition) @class_definition
				(decorated_definition) @decorated_definition
				(for_statement) @for_statement
				(function_definition) @function_definition
				(if_statement) @if_statement
				(try_statement) @try_statement
				(while_statement) @while_statement
				(with_statement) @with_statement


				;; expressions

				(expression_list) @expression_list
				(expression_statement) @expression_statement
			]
		`],javascript:[dr.javascript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related

				(field_definition) @field_definition
				(method_definition) @method_definition

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]`],go:[dr.go`
		[
			(_statement) @statement
			(function_declaration) @function_declaration
			(import_declaration) @import_declaration
			(method_declaration) @method_declaration
			(package_clause) @package_clause

			(if_statement
				initializer: (_) @for_statement.exclude_captures) @for_statement

			(expression_case) @expression_case ;; e.g., case 0:
		]
		`],ruby:[dr.ruby`
			[
				(comment) @comment

				(assignment) @assignment

				(if) @if

				(call) @call

				(case) @case

				(when) @when

				(while) @while

				(for) @for

				(method) @method

				(class) @class

				(module) @module

				(begin) @begin
			]
		`],csharp:[dr.csharp`
			[
				(comment) @comment

				(class_declaration) @class_declaration
				(constructor_declaration) @constructor_declaration
				(method_declaration) @method_declaration
				(delegate_declaration) @delegate_declaration
				(enum_declaration) @enum_declaration
				(extern_alias_directive) @extern_alias_directive
				(file_scoped_namespace_declaration) @file_scoped_namespace_declaration
				(global_attribute_list) @global_attribute_list
				(global_statement) @global_statement
				(interface_declaration) @interface_declaration
				(namespace_declaration) @namespace_declaration
				(record_declaration) @record_declaration
				(record_struct_declaration) @record_struct_declaration
				(struct_declaration) @struct_declaration
				(using_directive) @using_directive

				(local_declaration_statement) @local_declaration_statement
				(expression_statement) @expression_statement
				(for_statement) @for_statement
				(for_each_statement) @for_each_statement
				(continue_statement) @continue_statement
				(break_statement) @break_statement
				(throw_statement) @throw_statement
				(return_statement) @return_statement
				(try_statement) @try_statement
			]
		`],cpp:[dr.cpp`
			[
				(declaration) @declaration

				(expression_statement) @expression_statement

				(comment) @comment

				(preproc_include) @preproc_include

				(namespace_definition) @namespace_definition

				(enum_specifier) @enum_specifier

				(struct_specifier) @struct_specifier

				(template_declaration) @template_declaration

				(function_definition) @function_definition

				(return_statement) @return_statement

				(class_specifier) @class_specifier

				(try_statement) @try_statement

				(throw_statement) @throw_statement

				(for_statement) @for_statement
				(for_statement
					initializer:(_) @for_statement.exclude_captures) @for_statement

				(for_range_loop) @for_range_loop
			]
		`],java:[dr.java`
		[
			(statement) @statement ;; @ulugbekna: this includes (declaration); but somehow it can't capture inner classes

			(line_comment) @line_comment
			(block_comment) @block_comment

			(for_statement
				init: (_) @for_statement.exclude_captures)

			(block) @block.exclude_captures

			(field_declaration) @field_declaration
		]
		`],rust:[dr.rust`
		[
			(line_comment) @line_comment

			(let_declaration) @let_declaration
			(extern_crate_declaration) @extern_crate_declaration
			(use_declaration) @use_declaration

			(attribute_item) @attribute_item
			(const_item) @const_item
			(enum_item) @enum_item
			(foreign_mod_item) @foreign_mod_item
			(function_item) @function_item
			(function_signature_item) @function_signature_item
			(impl_item) @impl_item
			(inner_attribute_item) @inner_attribute_item
			(mod_item) @mod_item
			(static_item) @static_item
			(struct_item) @struct_item
			(trait_item) @trait_item
			(type_item) @type_item
			(union_item) @union_item

			(macro_definition) @macro_definition
			(macro_invocation) @macro_invocation

			(empty_statement) @empty_statement

			(compound_assignment_expr) @compound_assignment_expr
			(generic_function) @generic_function
			(metavariable) @metavariable

			(match_arm) @match_arm

			(async_block) @async_block
			(const_block) @const_block
			(unsafe_block) @unsafe_block

			(block) @block.exclude_captures
		]
		`]},Qne={...Ic(["typescript","tsx"],["program","interface_declaration","class_declaration","function_declaration","function","type_alias_declaration","method_definition"]),javascript:["program","class_declaration","function_declaration","function","method_definition"],java:["program","class_declaration","interface_declaration","method_declaration"],cpp:["translation_unit","class_declaration","function_definition"],csharp:["compilation_unit","class_declaration","interface_declaration","method_declaration"],python:["module","class_definition","function_definition"],go:["source_file","type_declaration","function_declaration","method_declaration"],ruby:["program","method","class","method"],rust:["source_file","function_item","impl_item","let_declaration"]},Xne={typescript:[Ul("typescript")],tsx:[Ul("tsx")],javascript:[Ul("javascript")],java:[Ul("java")],cpp:[Ul("cpp")],csharp:[Ul("csharp")],python:[Ul("python")],go:[Ul("go")],ruby:[Ul("ruby")],rust:[Ul("rust")]},Jne={...Ic(["typescript","tsx","javascript"],["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"]),java:["for_statement","enhanced_for_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],cpp:["for_statement","for_range_loop","if_statement","while_statement","do_statement","try_statement","switch_statement"],csharp:["for_statement","for_each_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],python:["for_statement","if_statement","while_statement","try_statement"],go:["for_statement","if_statement","type_switch_statement"],ruby:["while","for","if","case"],rust:["for_statement","if_statement","while_statement","loop_statement","match_expression"]},T4e={...Ic(["typescript","tsx"],["lexical_declaration","expression_statement","public_field_definition"]),javascript:["call_expression","expression_statement","variable_declaration","public_field_definition"],java:["expression_statement","local_variable_declaration","field_declaration"],cpp:["field_declaration","expression_statement","declaration"],csharp:["field_declaration","expression_statement"],python:["expression_statement"],go:["short_var_declaration","call_expression"],ruby:["call","assignment"],rust:["expression_statement","let_declaration","use_declaration","assignment_expression","macro_definition","extern_crate_declaration"]},I4e={...Ic(["typescript","tsx"],["class_declaration","function_declaration","generator_function_declaration","interface_declaration","internal_module","method_definition"]),javascript:["class_declaration","function_declaration","generator_function_declaration","method_definition"],java:["class_declaration","constructor_declaration","enum_declaration","interface_declaration","method_declaration","module_declaration"],cpp:["class_specifier","function_definition","namespace_definition","struct_specifier"],csharp:["class_declaration","constructor_declaration","destructor_declaration","enum_declaration","interface_declaration","method_declaration","namespace_declaration","struct_declaration"],python:["function_definition","class_definition"],go:["function_declaration","method_declaration"],ruby:["class","method","module"],rust:["function_item","impl_item","mod_item","struct_item","trait_item","union_item"]},Zne={typescript:[Bl("typescript")],tsx:[Bl("tsx")],javascript:[Bl("javascript")],java:[Bl("java")],cpp:[Bl("cpp")],csharp:[Bl("csharp")],python:[Bl("python")],go:[Bl("go")],rust:[Bl("rust")],ruby:[Bl("ruby")]};function Ul(t){return Qne[t].map(e=>`(${e}) @scope`).join(`
`)}function Bl(t){return`[
		${I4e[t].map(r=>`(${r})`).join(`
`)}
	] @definition`}function VT(t,e){return Qne[t].includes(e.type)||Jne[t].includes(e.type)}function eie(t,e){return Jne[t].includes(e.type)}function H7(t,e){return T4e[t].includes(e.type)}var j7=tie(),G7=class{constructor(){this.loadedLanguagesCache=new Map}loadLanguage(e){return this.loadedLanguagesCache.has(e)||this.loadedLanguagesCache.set(e,this._doLoadLanguage(e)),this.loadedLanguagesCache.get(e)}_doLoadLanguage(e){let n=`tree-sitter-${e==="csharp"?"c-sharp":e}.wasm`,i=zT.basename(__dirname)==="dist"?zT.resolve(__dirname,n):zT.resolve(__dirname,"../../../../dist",n);return j7.Language.load(i)}},V7=class t{static{this.CACHE_SIZE_PER_LANGUAGE=5}constructor(){this.caches=new Map,this.languageLoader=new G7,this._parser=null}get parser(){return this._parser||(this._parser=new j7),this._parser}async parse(e,r){await j7.init();let n=this.getParseTreeCache(e),i=n.get(r);if(i)return i.createReference();let o=await this.languageLoader.loadLanguage(e);this.parser.setLanguage(o);let s=this.parser.parse(r),a=new $7(s);return n.put(r,a),a.createReference()}delete(){this._parser&&(this.parser.delete(),this._parser=null);for(let e of this.caches.values())e.dispose()}getParseTreeCache(e){let r=this.caches.get(e);return r||(r=new UP(t.CACHE_SIZE_PER_LANGUAGE),this.caches.set(e,r)),r}},z7=class{constructor(e){this._tree=e;this._refCount=1}get tree(){if(this._refCount===0)throw new Error("Cannot access disposed RefCountedParseTree");return this._tree}ref(){if(this._refCount===0)throw new Error("Cannot ref disposed RefCountedParseTree");this._refCount++}deref(){if(this._refCount===0)throw new Error("Cannot deref disposed RefCountedParseTree");this._refCount--,this._refCount===0&&this._tree.delete()}},$7=class{constructor(e){this._tree=new z7(e)}dispose(){this._tree.deref()}createReference(){return new W7(this._tree)}},W7=class{constructor(e){this._parseTree=e;this._parseTree.ref()}get tree(){return this._parseTree.tree}dispose(){this._parseTree.deref()}},iie=new V7;function C4e(){iie.delete()}function Oi(t,e){return iie.parse(t,e)}var K7=class{constructor(e){this.language=e;this.map=new Map}getQuery(e){return this.map.has(e)||this.map.set(e,this.language.query(e)),this.map.get(e)}},Y7=class t{constructor(){this.map=new Map}static{this.INSTANCE=new t}getQuery(e,r){return this.map.has(e)||this.map.set(e,new K7(e)),this.map.get(e).getQuery(r)}};function Cc(t,e){let r=[];for(let n of t){let i=Y7.INSTANCE.getQuery(e.tree.getLanguage(),n);r.push(...i.matches(e))}return r}function w4e(t,e){let r=Xne[t];return Cc(r,e)}function X7(t,e){let r=zne[t];return Cc(r,e)}function R4e(t,e){let r=qne[t];return r?Cc(r,e):[]}function A4e(t,e){let r=Hne[t];return r?Cc(r,e):[]}function P4e(t,e){let r=jne[t];return r?Cc(r,e):[]}function k4e(t,e){let r=Gne[t];return r?Cc(r,e):[]}function D4e(t,e){let r=Vne[t];return r?Cc(r,e):[]}function N4e(t,e){let r=Zne[t];return Cc(r,e)}async function L4e(t,e,r){let n=await Oi(t,e);try{return R4e(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="call_expression").node;if(go.doIntersect(r,c)){let u,l;t==="ruby"&&(l=a.captures.find(d=>d.name==="symbol")?.node,u=l?.text?.slice(1)),l??=a.captures.find(d=>d.name==="identifier")?.node,u??=l?.text,s.push({identifier:u??"",text:c.text,startIndex:(l??c).startIndex,endIndex:(l??c).endIndex})}return s},[])}finally{n.dispose()}}async function O4e(t,e){let r=await Oi(t,e);try{return X7(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="function").node;return{identifier:o.captures.find(c=>c.name==="identifier")?.node.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function M4e(t,e){let r=await Oi(t,e);try{return A4e(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="class_declaration").node;return{identifier:s?.children.find(c=>c.type==="type_identifier"||c.type==="identifier"||c.type==="constant")?.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function F4e(t,e){let r=await Oi(t,e);try{return P4e(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="type_declaration").node,a=o.captures.find(c=>c.name==="type_identifier")?.node.text;return a||(a=s?.children.find(c=>c.type==="type_identifier")?.text),{identifier:a??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function U4e(t,e,r){let n=await Oi(t,e);try{return k4e(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="type_identifier").node;return go.doIntersect(r,c)&&s.push({identifier:c.text,text:c.text,startIndex:c.startIndex,endIndex:c.endIndex}),s},[])}finally{n.dispose()}}async function B4e(t,e,r){let n=await Oi(t,e);try{return D4e(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="new_expression").node;return go.doIntersect(r,c)&&s.push({identifier:c.text,text:c.text,startIndex:c.startIndex,endIndex:c.endIndex}),s},[])}finally{n.dispose()}}async function q4e(t,e,r){let n=await Oi(t,e);try{let i=Kne[t];return Cc(i,n.tree.rootNode).reduce((a,c)=>{let u=c.captures.find(l=>l.name==="symbol").node;return go.doIntersect(r,u)&&a.push({identifier:u.text,text:u.text,startIndex:u.startIndex,endIndex:u.endIndex}),a},[])}finally{n.dispose()}}async function H4e(t,e){let r=await Oi(t,e);try{let n=N4e(t,r.tree.rootNode);return tLe(t,n,r.tree.rootNode)}finally{r.dispose()}}async function j4e(t,e){let r=await Oi(t,e);try{return X7(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="function").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function G4e(t,e){let r=await Oi(t,e);try{return X7(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="body").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function V4e(t,e,r){let n=await Oi(t,e);try{let i=w4e(t,n.tree.rootNode),o;for(let s of i){let a=s.captures[0].node,c=Am.ofSyntaxNode(a);if(Am.doesContain(c,r)&&(o=a),Du.isBefore(r.endPosition,c.startPosition))break}if(o)return Am.ofSyntaxNode(o);throw new Error("No parent node found")}finally{n.dispose()}}async function z4e(t,e,r,n){let i=await Oi(t,e);try{let o=i.tree.rootNode.descendantForPosition(r.startPosition,r.endPosition),s={startPosition:o.startPosition,endPosition:o.endPosition},a=sie(t,o,n,r,!0);return Am.equals(s,a)?oie(t,o):a}finally{i.dispose()}}function oie(t,e){let r=e.parent,n={startPosition:e.startPosition,endPosition:e.endPosition};if(VT(t,e)||!r)return n;let{filteredRanges:i,indexOfInterest:o}=aie(t,r.children,n,!1);if(o-1>=0&&o+1<=i.length-1){let s=i[o-1],a=i[o+1];return{startPosition:s.startPosition,endPosition:a.endPosition}}return oie(t,r)}function sie(t,e,r,n,i){let o=e.children;if(e.endPosition.row-e.startPosition.row+1<=r){let a=VT(t,e)?{startPosition:e.startPosition,endPosition:e.endPosition}:nie(t,o,r,n,i),c=e.parent;return c?sie(t,c,r,a,!1):a}return nie(t,o,r,n,i)}function rie(t,e){return e.endPosition.row-t.startPosition.row+1}function nie(t,e,r,n,i){if(e.length===0)return n;let{filteredRanges:o,indexOfInterest:s}=aie(t,e,n,i),a=0,c=o.length-1,u=o[a],l=o[c];for(;rie(u,l)>r&&a!==c;)s-a<c-s?(c--,l=o[c]):(a++,u=o[a]);return rie(u,l)<=r?{startPosition:u.startPosition,endPosition:l.endPosition}:n}function aie(t,e,r,n){let i,o;if(n?(i=e.filter(s=>VT(t,s)||H7(t,s)),o=Une(i,r,(s,a)=>Du.isBefore(s.startPosition,a.startPosition)),i.splice(o,0,r)):(i=e.filter(s=>Am.doesContain(s,r)||VT(t,s)||H7(t,s)),o=i.findIndex(s=>Am.doesContain(s,r))),o===-1)throw new Error("Valid index not found");return{filteredRanges:i,indexOfInterest:o}}function HP(t,e,r,n=J7){let i=[t.rootNode],o=[];for(;;){let s=i.map(a=>[a,go.intersectionSize(a,e)]).filter(([a,c])=>c>0).sort(([a,c],[u,l])=>l-c);if(s.length===0)return o.length===0?void 0:Bne(o,([a,c],[u,l])=>c-l)[0];{let a=s.map(([c,u])=>{let l=go.len(c),d=Math.abs(go.len(e)-u),f=(u-d)/l;return[c,f]});o.push(...a.filter(([c,u])=>n(c,r))),i=[],i.push(...a.flatMap(([c,u])=>c.children))}}}async function $4e(t,e,r){let n=await Oi(t,e);try{let i=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex);if(i.type.match(/identifier/)&&(i.parent===null||J7(i.parent,t))){let o=i.parent,s=o===null?void 0:{startIndex:o.startIndex,endIndex:o.endIndex};return{identifier:i.text,nodeRange:s}}}finally{n.dispose()}}async function W4e(t,e,r){let n=await Oi(t,e);try{let i=Wne[t],a=Cc(i,n.tree.rootNode).flatMap(({captures:c})=>c).filter(({name:c})=>c.endsWith("identifier")).find(({node:c})=>go.doesContain(c,r));return a?{identifier:a.node.text}:void 0}catch{return}finally{n.dispose()}}async function K4e(t,e,r){let n=[],s=(await Oi(t,e)).tree.rootNode.descendantForIndex(r.startIndex,r.endIndex);for(;s!==null;)eie(t,s)&&n.push({startIndex:s.startIndex,endIndex:s.endIndex}),s=s.parent;return n}async function Y4e(t,e,r){let n=await Oi(t,e);try{let o=r.startIndex===r.endIndex?void 0:HP(n.tree,r,t);if(o)return{nodeIdentifier:Q7(o,t),nodeToDocument:BP.ofSyntaxNode(o),nodeSelectionBy:"matchingSelection"};let a=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex),c=0;for(;!J7(a,t)&&a.parent!==null;)a=a.parent,++c;return{nodeIdentifier:Q7(a,t),nodeToDocument:BP.ofSyntaxNode(a),nodeSelectionBy:"expanding"}}finally{n.dispose()}}async function Q4e(t,e,r){let n=await Oi(t,e);try{let i=r.startIndex===r.endIndex;if(i)return;let o=i?void 0:HP(n.tree,r,t),s=i?void 0:HP(n.tree,r,t,X4e);if(s&&o)return{nodeIdentifier:Q7(o,t),nodeToExplain:BP.ofSyntaxNode(s)}}finally{n.dispose()}}function Q7(t,e){switch(e){case"python":case"csharp":return t.children.find(r=>r.type.match(/identifier/))?.text;case"go":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/spec/))?.children.find(i=>i.type.match(/identifier/))?.text}case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":case"cpp":{let r=t.children.find(i=>i.type.match(/declarator/));return r?r.children.find(i=>i.type.match(/identifier/))?.text:t.children.find(i=>i.type.match(/identifier/))?.text}case"java":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/declarator/))?.children.find(i=>i.type.match(/identifier/))?.text}case"ruby":return t.children.find(r=>r.type.match(/constant|identifier/))?.text;default:return t.children.find(r=>r.type.match(/identifier/))?.text}}function X4e(t,e){return t.type.match(/definition/)}function J7(t,e){switch(e){case"typescript":case"tsx":case"javascript":return t.type.match(/definition|declaration|declarator|export_statement/);case"go":return t.type.match(/definition|declaration|declarator|var_spec/);case"cpp":return t.type.match(/definition|declaration|class_specifier/);case"ruby":return t.type.match(/module|class|method|assignment/);default:return t.type.match(/definition|declaration|declarator/)}}async function J4e(t,e){if(!new Set(["javascript","typescript","java","cpp","csharp","go","ruby"]).has(t))return;let n=await Oi(t,e);try{let i=$ne[t],o=Cc(i,n.tree.rootNode).flatMap(a=>a.captures.filter(c=>c.name==="docComment")),s=Z4e(o);if(s.length>1&&(s=s.filter(a=>a.includes(`
`)||!a.match(/(implementation code|code implementation|implementation details|\.\.\.)/i))),s.length===1)return s[0]}finally{n.dispose()}}function Z4e(t){let e=[];for(let r=0;r<t.length;++r){let n=[t[r].node.text];for(;r+1<t.length&&t[r].node.endPosition.row+1===t[r+1].node.startPosition.row;)++r,n.push(t[r].node.text);e.push(n.join(`
`))}return e}async function eLe(t,e){let r=Yne[t];if(r.length===0)return;let n=await Oi(t,e);try{let i=Cc(r,n.tree.rootNode).flatMap(c=>c.captures).sort((c,u)=>go.compare(c.node,u.node)),o=[];for(let c of i)c.name.endsWith(".exclude_captures")&&o.push(go.ofSyntaxNode(c.node));let s=new Rm(0,e.length,"root",[]),a=[s];for(let c=0;c<i.length;++c){let l=i[c].node;if(o.some(f=>go.isEqual(f,l)))continue;let d;do d=a.pop();while(d&&!go.doesContain(d,l));if(new Set(["export_statement","ambient_declaration"]).has(d.kind))d.kind=l.type,a.push(d);else{let f=new Rm(l.startIndex,l.endIndex,l.type,[]);d.children.push(f),a.push(d,f)}}return s}catch(i){console.error(i instanceof Error?i:new Error(i))}finally{n.dispose()}}function tLe(t,e,r){let n;switch(t){case"python":n=oLe(e);break;case"ruby":n=iLe(e);break;default:{n=rLe(e,t);break}}return new qP(n,Nu.ofSyntaxNode(r))}function rLe(t,e){let r=new Map;return t.forEach(n=>{let o=n.captures.find(a=>a.name==="definition")?.node,s=o?.childForFieldName("body");if(o&&s){let a;switch(e){case"typescript":case"javascript":{let{definition:u,comments:l}=sLe(o);o=u,a=l;break}case"java":case"rust":a=aLe(o);break;default:{a=$T(o);break}}r.get(o.id)||r.set(o.id,{mainBlock:Nu.ofSyntaxNode(o),detailBlocks:{comments:a.map(u=>Nu.ofSyntaxNode(u)),body:Nu.ofSyntaxNode(s)}})}}),Array.from(r.values())}function nLe(t){if(!(t.length<2))for(let e=1;e<t.length;e++){let r=t[e];if(!r.type.includes("parameters"))return r}}function iLe(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(o=>o.name==="definition")?.node;if(i){let o=i.namedChildren,s=nLe(o);if(s){let a=o[o.length-1],c=i.text.substring(s.startIndex-i.startIndex,a.endIndex-i.startIndex),u=$T(i);e.get(i.id)||e.set(i.id,{mainBlock:Nu.ofSyntaxNode(i),detailBlocks:{comments:u.map(d=>Nu.ofSyntaxNode(d)),body:{range:{startPosition:{row:s.startPosition.row,column:s.startPosition.column},endPosition:{row:a.endPosition.row,column:a.endPosition.column}},startIndex:s.startIndex,text:c,endIndex:a.endIndex}}})}}}),Array.from(e.values())}function oLe(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(s=>s.name==="definition")?.node,o=i?.childForFieldName("body");if(i&&o){let s=uLe(o),a=cLe(i);e.set(i.id,{mainBlock:Nu.ofSyntaxNode(i),detailBlocks:{docstring:s?Nu.ofSyntaxNode(s):void 0,decorator:a?Nu.ofSyntaxNode(a):void 0,body:Nu.ofSyntaxNode(o)}});return}}),Array.from(e.values())}function $T(t,e=["comment"]){let r=[],n=t.previousNamedSibling;for(;n&&e.some(i=>i===n?.type);)r.push(n),n=n.previousNamedSibling;return r.reverse()}function sLe(t){let e=t.parent;return e?.type==="export_statement"?{definition:e,comments:$T(e)}:{definition:t,comments:$T(t)}}function aLe(t){return $T(t,["block_comment","line_comment"])}function cLe(t){let e=t.previousNamedSibling;return e?.type==="decorator"?e:void 0}function uLe(t){let e=t.firstChild;if(!e||e.type!=="expression_statement")return;let r=e.firstChild;return r?.type==="string"?r:void 0}var lLe=uie.join(__dirname,"worker2.js"),l_=class{constructor(e,r){this._parser=new eU(Z7,lLe,e,r.getLogger("parser proxy"))}dispose(){this._parser.dispose()}getTreeSitterAST(e){let r=Xb(e.languageId);if(r)return this.getTreeSitterASTForWASMLanguage(r,e.getText())}getTreeSitterASTForWASMLanguage(e,r){let n=this._parser.proxy;return{getFunctionPositions:()=>n._getFunctionPositions(e,r),getFunctionBodies:()=>n._getFunctionBodies(e,r),getCoarseParentScope:i=>n._getCoarseParentScope(e,r,i),getFixSelectionOfInterest:(i,o)=>n._getFixSelectionOfInterest(e,r,i,o),getCallExpressions:i=>n._getCallExpressions(e,r,i),getFunctionDefinitions:()=>n._getFunctionDefinitions(e,r),getClassReferences:i=>n._getClassReferences(e,r,i),getClassDeclarations:()=>n._getClassDeclarations(e,r),getTypeDeclarations:()=>n._getTypeDeclarations(e,r),getTypeReferences:i=>n._getTypeReferences(e,r,i),getSymbols:i=>n._getSymbols(e,r,i),getDocumentableNodeIfOnIdentifier:i=>n._getDocumentableNodeIfOnIdentifier(e,r,i),getTestableNode:i=>n._getTestableNode(e,r,i),getNodeToExplain:i=>n._getNodeToExplain(e,r,i),getNodeToDocument:i=>n._getNodeToDocument(e,r,i),getFineScopes:i=>n._getFineScopes(e,r,i),getStructure:()=>n._getStructure(e,r)}}extractDoc(e,r){return this._parser.proxy._extractDoc(e,r)}getSemanticChunkTree(e,r){return this._parser.proxy._getSemanticChunkTree(e,r)}getStructure(e,r){return this._parser.proxy._getStructure(e,r)}};l_=we([de(1,ce)],l_);var eU=class{constructor(e,r,n,i){this._workerPath=r;this._useWorker=n;this._local=new Proxy(e,{get:(o,s,a)=>{let c=o[s];return typeof c!="function"?c:async(...u)=>{let l=await c.apply(o,cie(u));return cie(l)}}}),this._worker=new Ms(()=>new wm(this._workerPath,{name:"Parser worker"},i))}get proxy(){return this._useWorker?this._worker.value.proxy:this._local}dispose(){this._worker.hasValue&&this._worker.value.terminate()}};function cie(t){return typeof t>"u"?t:JSON.parse(JSON.stringify(t))}var jP=require("vscode");var VP=re("IRemoteRepositoriesService"),GP=class{async loadWorkspaceContents(e){return await(await this.getApi()).loadWorkspaceContents?.(e)??!1}getApi(){return this.getRemoteExtension().activate()}getRemoteExtension(){if(this._remoteHub!==void 0)return this._remoteHub;if(this._remoteHub=jP.extensions.getExtension("ms-vscode.remote-repositories")??jP.extensions.getExtension("GitHub.remoteHub")??jP.extensions.getExtension("GitHub.remoteHub-insiders"),this._remoteHub===void 0)throw new Error("No Remote repository extension found.");return this._remoteHub}};var Pm=re("IReviewService");var lie=W(require("vscode"));var d_=class{constructor(e){this._logger=e.getLogger("ReviewService")}getDiagnosticCollection(){return this._diagnosticCollection||(this._diagnosticCollection=lie.languages.createDiagnosticCollection("github.copilot.review"))}dispose(){this._diagnosticCollection?.dispose()}};d_=we([de(0,ce)],d_);var km=re("IScopeSelector");var WT=require("vscode");var die=Object.create(null);function _(t,e){if(xT(e)){let r=die[e];if(r===void 0)throw new Error(`${t} references an unknown codicon: ${e}`);e=r}return die[t]=e,{id:t}}var jr={add:_("add",6e4),plus:_("plus",6e4),gistNew:_("gist-new",6e4),repoCreate:_("repo-create",6e4),lightbulb:_("lightbulb",60001),lightBulb:_("light-bulb",60001),repo:_("repo",60002),repoDelete:_("repo-delete",60002),gistFork:_("gist-fork",60003),repoForked:_("repo-forked",60003),gitPullRequest:_("git-pull-request",60004),gitPullRequestAbandoned:_("git-pull-request-abandoned",60004),recordKeys:_("record-keys",60005),keyboard:_("keyboard",60005),tag:_("tag",60006),tagAdd:_("tag-add",60006),tagRemove:_("tag-remove",60006),gitPullRequestLabel:_("git-pull-request-label",60006),person:_("person",60007),personFollow:_("person-follow",60007),personOutline:_("person-outline",60007),personFilled:_("person-filled",60007),gitBranch:_("git-branch",60008),gitBranchCreate:_("git-branch-create",60008),gitBranchDelete:_("git-branch-delete",60008),sourceControl:_("source-control",60008),mirror:_("mirror",60009),mirrorPublic:_("mirror-public",60009),star:_("star",60010),starAdd:_("star-add",60010),starDelete:_("star-delete",60010),starEmpty:_("star-empty",60010),comment:_("comment",60011),commentAdd:_("comment-add",60011),alert:_("alert",60012),warning:_("warning",60012),search:_("search",60013),searchSave:_("search-save",60013),logOut:_("log-out",60014),signOut:_("sign-out",60014),logIn:_("log-in",60015),signIn:_("sign-in",60015),eye:_("eye",60016),eyeUnwatch:_("eye-unwatch",60016),eyeWatch:_("eye-watch",60016),circleFilled:_("circle-filled",60017),primitiveDot:_("primitive-dot",60017),closeDirty:_("close-dirty",60017),debugBreakpoint:_("debug-breakpoint",60017),debugBreakpointDisabled:_("debug-breakpoint-disabled",60017),debugBreakpointPending:_("debug-breakpoint-pending",60377),debugHint:_("debug-hint",60017),primitiveSquare:_("primitive-square",60018),edit:_("edit",60019),pencil:_("pencil",60019),info:_("info",60020),issueOpened:_("issue-opened",60020),gistPrivate:_("gist-private",60021),gitForkPrivate:_("git-fork-private",60021),lock:_("lock",60021),mirrorPrivate:_("mirror-private",60021),close:_("close",60022),removeClose:_("remove-close",60022),x:_("x",60022),repoSync:_("repo-sync",60023),sync:_("sync",60023),clone:_("clone",60024),desktopDownload:_("desktop-download",60024),beaker:_("beaker",60025),microscope:_("microscope",60025),vm:_("vm",60026),deviceDesktop:_("device-desktop",60026),file:_("file",60027),fileText:_("file-text",60027),more:_("more",60028),ellipsis:_("ellipsis",60028),kebabHorizontal:_("kebab-horizontal",60028),mailReply:_("mail-reply",60029),reply:_("reply",60029),organization:_("organization",60030),organizationFilled:_("organization-filled",60030),organizationOutline:_("organization-outline",60030),newFile:_("new-file",60031),fileAdd:_("file-add",60031),newFolder:_("new-folder",60032),fileDirectoryCreate:_("file-directory-create",60032),trash:_("trash",60033),trashcan:_("trashcan",60033),history:_("history",60034),clock:_("clock",60034),folder:_("folder",60035),fileDirectory:_("file-directory",60035),symbolFolder:_("symbol-folder",60035),logoGithub:_("logo-github",60036),markGithub:_("mark-github",60036),github:_("github",60036),terminal:_("terminal",60037),console:_("console",60037),repl:_("repl",60037),zap:_("zap",60038),symbolEvent:_("symbol-event",60038),error:_("error",60039),stop:_("stop",60039),variable:_("variable",60040),symbolVariable:_("symbol-variable",60040),array:_("array",60042),symbolArray:_("symbol-array",60042),symbolModule:_("symbol-module",60043),symbolPackage:_("symbol-package",60043),symbolNamespace:_("symbol-namespace",60043),symbolObject:_("symbol-object",60043),symbolMethod:_("symbol-method",60044),symbolFunction:_("symbol-function",60044),symbolConstructor:_("symbol-constructor",60044),symbolBoolean:_("symbol-boolean",60047),symbolNull:_("symbol-null",60047),symbolNumeric:_("symbol-numeric",60048),symbolNumber:_("symbol-number",60048),symbolStructure:_("symbol-structure",60049),symbolStruct:_("symbol-struct",60049),symbolParameter:_("symbol-parameter",60050),symbolTypeParameter:_("symbol-type-parameter",60050),symbolKey:_("symbol-key",60051),symbolText:_("symbol-text",60051),symbolReference:_("symbol-reference",60052),goToFile:_("go-to-file",60052),symbolEnum:_("symbol-enum",60053),symbolValue:_("symbol-value",60053),symbolRuler:_("symbol-ruler",60054),symbolUnit:_("symbol-unit",60054),activateBreakpoints:_("activate-breakpoints",60055),archive:_("archive",60056),arrowBoth:_("arrow-both",60057),arrowDown:_("arrow-down",60058),arrowLeft:_("arrow-left",60059),arrowRight:_("arrow-right",60060),arrowSmallDown:_("arrow-small-down",60061),arrowSmallLeft:_("arrow-small-left",60062),arrowSmallRight:_("arrow-small-right",60063),arrowSmallUp:_("arrow-small-up",60064),arrowUp:_("arrow-up",60065),bell:_("bell",60066),bold:_("bold",60067),book:_("book",60068),bookmark:_("bookmark",60069),debugBreakpointConditionalUnverified:_("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:_("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:_("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:_("debug-breakpoint-data-unverified",60072),debugBreakpointData:_("debug-breakpoint-data",60073),debugBreakpointDataDisabled:_("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:_("debug-breakpoint-log-unverified",60074),debugBreakpointLog:_("debug-breakpoint-log",60075),debugBreakpointLogDisabled:_("debug-breakpoint-log-disabled",60075),briefcase:_("briefcase",60076),broadcast:_("broadcast",60077),browser:_("browser",60078),bug:_("bug",60079),calendar:_("calendar",60080),caseSensitive:_("case-sensitive",60081),check:_("check",60082),checklist:_("checklist",60083),chevronDown:_("chevron-down",60084),dropDownButton:_("drop-down-button",60084),chevronLeft:_("chevron-left",60085),chevronRight:_("chevron-right",60086),chevronUp:_("chevron-up",60087),chromeClose:_("chrome-close",60088),chromeMaximize:_("chrome-maximize",60089),chromeMinimize:_("chrome-minimize",60090),chromeRestore:_("chrome-restore",60091),circle:_("circle",60092),circleOutline:_("circle-outline",60092),debugBreakpointUnverified:_("debug-breakpoint-unverified",60092),circleSlash:_("circle-slash",60093),circuitBoard:_("circuit-board",60094),clearAll:_("clear-all",60095),clippy:_("clippy",60096),closeAll:_("close-all",60097),cloudDownload:_("cloud-download",60098),cloudUpload:_("cloud-upload",60099),code:_("code",60100),collapseAll:_("collapse-all",60101),colorMode:_("color-mode",60102),commentDiscussion:_("comment-discussion",60103),compareChanges:_("compare-changes",60157),creditCard:_("credit-card",60105),dash:_("dash",60108),dashboard:_("dashboard",60109),database:_("database",60110),debugContinue:_("debug-continue",60111),debugDisconnect:_("debug-disconnect",60112),debugPause:_("debug-pause",60113),debugRestart:_("debug-restart",60114),debugStart:_("debug-start",60115),debugStepInto:_("debug-step-into",60116),debugStepOut:_("debug-step-out",60117),debugStepOver:_("debug-step-over",60118),debugStop:_("debug-stop",60119),debug:_("debug",60120),deviceCameraVideo:_("device-camera-video",60121),deviceCamera:_("device-camera",60122),deviceMobile:_("device-mobile",60123),diffAdded:_("diff-added",60124),diffIgnored:_("diff-ignored",60125),diffModified:_("diff-modified",60126),diffRemoved:_("diff-removed",60127),diffRenamed:_("diff-renamed",60128),diff:_("diff",60129),discard:_("discard",60130),editorLayout:_("editor-layout",60131),emptyWindow:_("empty-window",60132),exclude:_("exclude",60133),extensions:_("extensions",60134),eyeClosed:_("eye-closed",60135),fileBinary:_("file-binary",60136),fileCode:_("file-code",60137),fileMedia:_("file-media",60138),filePdf:_("file-pdf",60139),fileSubmodule:_("file-submodule",60140),fileSymlinkDirectory:_("file-symlink-directory",60141),fileSymlinkFile:_("file-symlink-file",60142),fileZip:_("file-zip",60143),files:_("files",60144),filter:_("filter",60145),flame:_("flame",60146),foldDown:_("fold-down",60147),foldUp:_("fold-up",60148),fold:_("fold",60149),folderActive:_("folder-active",60150),folderOpened:_("folder-opened",60151),gear:_("gear",60152),gift:_("gift",60153),gistSecret:_("gist-secret",60154),gist:_("gist",60155),gitCommit:_("git-commit",60156),gitCompare:_("git-compare",60157),gitMerge:_("git-merge",60158),githubAction:_("github-action",60159),githubAlt:_("github-alt",60160),globe:_("globe",60161),grabber:_("grabber",60162),graph:_("graph",60163),gripper:_("gripper",60164),heart:_("heart",60165),home:_("home",60166),horizontalRule:_("horizontal-rule",60167),hubot:_("hubot",60168),inbox:_("inbox",60169),issueClosed:_("issue-closed",60324),issueReopened:_("issue-reopened",60171),issues:_("issues",60172),italic:_("italic",60173),jersey:_("jersey",60174),json:_("json",60175),bracket:_("bracket",60175),kebabVertical:_("kebab-vertical",60176),key:_("key",60177),law:_("law",60178),lightbulbAutofix:_("lightbulb-autofix",60179),linkExternal:_("link-external",60180),link:_("link",60181),listOrdered:_("list-ordered",60182),listUnordered:_("list-unordered",60183),liveShare:_("live-share",60184),loading:_("loading",60185),location:_("location",60186),mailRead:_("mail-read",60187),mail:_("mail",60188),markdown:_("markdown",60189),megaphone:_("megaphone",60190),mention:_("mention",60191),milestone:_("milestone",60192),gitPullRequestMilestone:_("git-pull-request-milestone",60192),mortarBoard:_("mortar-board",60193),move:_("move",60194),multipleWindows:_("multiple-windows",60195),mute:_("mute",60196),noNewline:_("no-newline",60197),note:_("note",60198),octoface:_("octoface",60199),openPreview:_("open-preview",60200),package:_("package",60201),paintcan:_("paintcan",60202),pin:_("pin",60203),play:_("play",60204),run:_("run",60204),plug:_("plug",60205),preserveCase:_("preserve-case",60206),preview:_("preview",60207),project:_("project",60208),pulse:_("pulse",60209),question:_("question",60210),quote:_("quote",60211),radioTower:_("radio-tower",60212),reactions:_("reactions",60213),references:_("references",60214),refresh:_("refresh",60215),regex:_("regex",60216),remoteExplorer:_("remote-explorer",60217),remote:_("remote",60218),remove:_("remove",60219),replaceAll:_("replace-all",60220),replace:_("replace",60221),repoClone:_("repo-clone",60222),repoForcePush:_("repo-force-push",60223),repoPull:_("repo-pull",60224),repoPush:_("repo-push",60225),report:_("report",60226),requestChanges:_("request-changes",60227),rocket:_("rocket",60228),rootFolderOpened:_("root-folder-opened",60229),rootFolder:_("root-folder",60230),rss:_("rss",60231),ruby:_("ruby",60232),saveAll:_("save-all",60233),saveAs:_("save-as",60234),save:_("save",60235),screenFull:_("screen-full",60236),screenNormal:_("screen-normal",60237),searchStop:_("search-stop",60238),server:_("server",60240),settingsGear:_("settings-gear",60241),settings:_("settings",60242),shield:_("shield",60243),smiley:_("smiley",60244),sortPrecedence:_("sort-precedence",60245),splitHorizontal:_("split-horizontal",60246),splitVertical:_("split-vertical",60247),squirrel:_("squirrel",60248),starFull:_("star-full",60249),starHalf:_("star-half",60250),symbolClass:_("symbol-class",60251),symbolColor:_("symbol-color",60252),symbolCustomColor:_("symbol-customcolor",60252),symbolConstant:_("symbol-constant",60253),symbolEnumMember:_("symbol-enum-member",60254),symbolField:_("symbol-field",60255),symbolFile:_("symbol-file",60256),symbolInterface:_("symbol-interface",60257),symbolKeyword:_("symbol-keyword",60258),symbolMisc:_("symbol-misc",60259),symbolOperator:_("symbol-operator",60260),symbolProperty:_("symbol-property",60261),wrench:_("wrench",60261),wrenchSubaction:_("wrench-subaction",60261),symbolSnippet:_("symbol-snippet",60262),tasklist:_("tasklist",60263),telescope:_("telescope",60264),textSize:_("text-size",60265),threeBars:_("three-bars",60266),thumbsdown:_("thumbsdown",60267),thumbsup:_("thumbsup",60268),tools:_("tools",60269),triangleDown:_("triangle-down",60270),triangleLeft:_("triangle-left",60271),triangleRight:_("triangle-right",60272),triangleUp:_("triangle-up",60273),twitter:_("twitter",60274),unfold:_("unfold",60275),unlock:_("unlock",60276),unmute:_("unmute",60277),unverified:_("unverified",60278),verified:_("verified",60279),versions:_("versions",60280),vmActive:_("vm-active",60281),vmOutline:_("vm-outline",60282),vmRunning:_("vm-running",60283),watch:_("watch",60284),whitespace:_("whitespace",60285),wholeWord:_("whole-word",60286),window:_("window",60287),wordWrap:_("word-wrap",60288),zoomIn:_("zoom-in",60289),zoomOut:_("zoom-out",60290),listFilter:_("list-filter",60291),listFlat:_("list-flat",60292),listSelection:_("list-selection",60293),selection:_("selection",60293),listTree:_("list-tree",60294),debugBreakpointFunctionUnverified:_("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:_("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:_("debug-breakpoint-function-disabled",60296),debugStackframeActive:_("debug-stackframe-active",60297),circleSmallFilled:_("circle-small-filled",60298),debugStackframeDot:_("debug-stackframe-dot",60298),debugStackframe:_("debug-stackframe",60299),debugStackframeFocused:_("debug-stackframe-focused",60299),debugBreakpointUnsupported:_("debug-breakpoint-unsupported",60300),symbolString:_("symbol-string",60301),debugReverseContinue:_("debug-reverse-continue",60302),debugStepBack:_("debug-step-back",60303),debugRestartFrame:_("debug-restart-frame",60304),callIncoming:_("call-incoming",60306),callOutgoing:_("call-outgoing",60307),menu:_("menu",60308),expandAll:_("expand-all",60309),feedback:_("feedback",60310),gitPullRequestReviewer:_("git-pull-request-reviewer",60310),groupByRefType:_("group-by-ref-type",60311),ungroupByRefType:_("ungroup-by-ref-type",60312),account:_("account",60313),gitPullRequestAssignee:_("git-pull-request-assignee",60313),bellDot:_("bell-dot",60314),debugConsole:_("debug-console",60315),library:_("library",60316),output:_("output",60317),runAll:_("run-all",60318),syncIgnored:_("sync-ignored",60319),pinned:_("pinned",60320),githubInverted:_("github-inverted",60321),debugAlt:_("debug-alt",60305),serverProcess:_("server-process",60322),serverEnvironment:_("server-environment",60323),pass:_("pass",60324),stopCircle:_("stop-circle",60325),playCircle:_("play-circle",60326),record:_("record",60327),debugAltSmall:_("debug-alt-small",60328),vmConnect:_("vm-connect",60329),cloud:_("cloud",60330),merge:_("merge",60331),exportIcon:_("export",60332),graphLeft:_("graph-left",60333),magnet:_("magnet",60334),notebook:_("notebook",60335),redo:_("redo",60336),checkAll:_("check-all",60337),pinnedDirty:_("pinned-dirty",60338),passFilled:_("pass-filled",60339),circleLargeFilled:_("circle-large-filled",60340),circleLarge:_("circle-large",60341),circleLargeOutline:_("circle-large-outline",60341),combine:_("combine",60342),gather:_("gather",60342),table:_("table",60343),variableGroup:_("variable-group",60344),typeHierarchy:_("type-hierarchy",60345),typeHierarchySub:_("type-hierarchy-sub",60346),typeHierarchySuper:_("type-hierarchy-super",60347),gitPullRequestCreate:_("git-pull-request-create",60348),runAbove:_("run-above",60349),runBelow:_("run-below",60350),notebookTemplate:_("notebook-template",60351),debugRerun:_("debug-rerun",60352),workspaceTrusted:_("workspace-trusted",60353),workspaceUntrusted:_("workspace-untrusted",60354),workspaceUnspecified:_("workspace-unspecified",60355),terminalCmd:_("terminal-cmd",60356),terminalDebian:_("terminal-debian",60357),terminalLinux:_("terminal-linux",60358),terminalPowershell:_("terminal-powershell",60359),terminalTmux:_("terminal-tmux",60360),terminalUbuntu:_("terminal-ubuntu",60361),terminalBash:_("terminal-bash",60362),arrowSwap:_("arrow-swap",60363),copy:_("copy",60364),personAdd:_("person-add",60365),filterFilled:_("filter-filled",60366),wand:_("wand",60367),debugLineByLine:_("debug-line-by-line",60368),inspect:_("inspect",60369),layers:_("layers",60370),layersDot:_("layers-dot",60371),layersActive:_("layers-active",60372),compass:_("compass",60373),compassDot:_("compass-dot",60374),compassActive:_("compass-active",60375),azure:_("azure",60376),issueDraft:_("issue-draft",60377),gitPullRequestClosed:_("git-pull-request-closed",60378),gitPullRequestDraft:_("git-pull-request-draft",60379),debugAll:_("debug-all",60380),debugCoverage:_("debug-coverage",60381),runErrors:_("run-errors",60382),folderLibrary:_("folder-library",60383),debugContinueSmall:_("debug-continue-small",60384),beakerStop:_("beaker-stop",60385),graphLine:_("graph-line",60386),graphScatter:_("graph-scatter",60387),pieChart:_("pie-chart",60388),bracketDot:_("bracket-dot",60389),bracketError:_("bracket-error",60390),lockSmall:_("lock-small",60391),azureDevops:_("azure-devops",60392),verifiedFilled:_("verified-filled",60393),newLine:_("newline",60394),layout:_("layout",60395),layoutActivitybarLeft:_("layout-activitybar-left",60396),layoutActivitybarRight:_("layout-activitybar-right",60397),layoutPanelLeft:_("layout-panel-left",60398),layoutPanelCenter:_("layout-panel-center",60399),layoutPanelJustify:_("layout-panel-justify",60400),layoutPanelRight:_("layout-panel-right",60401),layoutPanel:_("layout-panel",60402),layoutSidebarLeft:_("layout-sidebar-left",60403),layoutSidebarRight:_("layout-sidebar-right",60404),layoutStatusbar:_("layout-statusbar",60405),layoutMenubar:_("layout-menubar",60406),layoutCentered:_("layout-centered",60407),layoutSidebarRightOff:_("layout-sidebar-right-off",60416),layoutPanelOff:_("layout-panel-off",60417),layoutSidebarLeftOff:_("layout-sidebar-left-off",60418),target:_("target",60408),indent:_("indent",60409),recordSmall:_("record-small",60410),errorSmall:_("error-small",60411),arrowCircleDown:_("arrow-circle-down",60412),arrowCircleLeft:_("arrow-circle-left",60413),arrowCircleRight:_("arrow-circle-right",60414),arrowCircleUp:_("arrow-circle-up",60415),heartFilled:_("heart-filled",60420),map:_("map",60421),mapFilled:_("map-filled",60422),circleSmall:_("circle-small",60423),bellSlash:_("bell-slash",60424),bellSlashDot:_("bell-slash-dot",60425),commentUnresolved:_("comment-unresolved",60426),gitPullRequestGoToChanges:_("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:_("git-pull-request-new-changes",60428),searchFuzzy:_("search-fuzzy",60429),commentDraft:_("comment-draft",60430),send:_("send",60431),sparkle:_("sparkle",60432),insert:_("insert",60433),mic:_("mic",60434),thumbsDownFilled:_("thumbsdown-filled",60435),thumbsUpFilled:_("thumbsup-filled",60436),coffee:_("coffee",60437),snake:_("snake",60438),game:_("game",60439),vr:_("vr",60440),chip:_("chip",60441),piano:_("piano",60442),music:_("music",60443),micFilled:_("mic-filled",60444),gitFetch:_("git-fetch",60445),copilot:_("copilot",60446),lightbulbSparkle:_("lightbulb-sparkle",60447),lightbulbSparkleAutofix:_("lightbulb-sparkle-autofix",60447),robot:_("robot",60448),sparkleFilled:_("sparkle-filled",60449),diffSingle:_("diff-single",60450),diffMultiple:_("diff-multiple",60451),surroundWith:_("surround-with",60452),gitStash:_("git-stash",60454),gitStashApply:_("git-stash-apply",60455),gitStashPop:_("git-stash-pop",60456),dialogError:_("dialog-error","error"),dialogWarning:_("dialog-warning","warning"),dialogInfo:_("dialog-info","info"),dialogClose:_("dialog-close","close"),treeItemExpanded:_("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:_("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:_("tree-filter-on-type-off","list-selection"),treeFilterClear:_("tree-filter-clear","close"),treeItemLoading:_("tree-item-loading","loading"),menuSelection:_("menu-selection","check"),menuSubmenu:_("menu-submenu","chevron-right"),menuBarMore:_("menubar-more","more"),scrollbarButtonLeft:_("scrollbar-button-left","triangle-left"),scrollbarButtonRight:_("scrollbar-button-right","triangle-right"),scrollbarButtonUp:_("scrollbar-button-up","triangle-up"),scrollbarButtonDown:_("scrollbar-button-down","triangle-down"),toolBarMore:_("toolbar-more","more"),quickInputBack:_("quick-input-back","arrow-left")};var p_=class{constructor(e){this.accessor=e}async findEnclosingBlocks(e,r){let n=this.accessor.get(Ir).getTreeSitterAST(e);if(n===void 0)return;let i=mo(r,e);return(await n.getFineScopes(i))?.map(s=>{let a=ds(e,s);return{kind:"code",name:e.lineAt(a.start).text.trim(),range:a}})}findEnclosingSymbols(e,r){for(let n of e)if(n.range.contains(r)){let i=this.findEnclosingSymbols(n.children,r);return i?[n,...i]:[n]}}async selectEnclosingScope(e,r){let n=await this.accessor.get(ho).getDocumentSymbols(e.document.uri);if(!n||n.length>0&&!n[0].hasOwnProperty("children"))return;let i=e.selection;if(!i.isEmpty)return;let o=this.findEnclosingSymbols(n,e.selection.active);if(r?.includeBlocks&&o?.push(...await this.findEnclosingBlocks(e.document,e.selection)??[]),o||(o=n),o?.length===1){let s=o[0];e.selection=new WT.Selection(s.range.start,s.range.end)}else if(o&&o.length>1||!o&&n.length>1){let s=o.sort((c,u)=>u.range.start.line-c.range.start.line).map(c=>({label:`$(${c.kind==="code"?"code":pie.toIcon(c.kind).id}) ${c.name}`,description:`:${c.range.start.line+1}-${c.range.end.line+1}`,symbol:c}));if(!await this.accessor.get(pP).showQuickPick(s,{placeHolder:r?.reason??WT.l10n.t("Select an enclosing range"),onDidSelectItem(c){let u=c.symbol;u&&(e.selection=new WT.Selection(u.range.start,u.range.end),e.revealRange(u.range))}}))throw e.selection=i,new la}return e.selection}};p_=we([de(0,Ct)],p_);var pie;(r=>{let t=new Map;t.set(0,jr.symbolFile),t.set(1,jr.symbolModule),t.set(2,jr.symbolNamespace),t.set(3,jr.symbolPackage),t.set(4,jr.symbolClass),t.set(5,jr.symbolMethod),t.set(6,jr.symbolProperty),t.set(7,jr.symbolField),t.set(8,jr.symbolConstructor),t.set(9,jr.symbolEnum),t.set(10,jr.symbolInterface),t.set(11,jr.symbolFunction),t.set(12,jr.symbolVariable),t.set(13,jr.symbolConstant),t.set(14,jr.symbolString),t.set(15,jr.symbolNumber),t.set(16,jr.symbolBoolean),t.set(17,jr.symbolArray),t.set(18,jr.symbolObject),t.set(19,jr.symbolKey),t.set(20,jr.symbolNull),t.set(21,jr.symbolEnumMember),t.set(22,jr.symbolStruct),t.set(23,jr.symbolEvent),t.set(24,jr.symbolOperator),t.set(25,jr.symbolTypeParameter);function e(n){let i=t.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=jr.symbolProperty),i}r.toIcon=e})(pie||={});var ya=re("ISearchService"),zP=class{async findFilesWithDefaultExcludes(e,r,n){return this._findFilesWithDefaultExcludesAndExcludes(e,void 0,r,n)}async _findFilesWithDefaultExcludesAndExcludes(e,r,n,i){let o={maxResults:n,exclude:r,useDefaultExcludes:!0,useDefaultSearchExcludes:!0},s=await this.findFiles(e,o,i);return n===1?s[0]:s}};async function ql(t,e,r){let n=new lm;try{t.debug(`${e} started`);let i=await r();return t.debug(`${e} finished. Elapsed ${n.elapsed()}`),i}catch(i){throw t.debug(`${e} failed. Elapsed ${n.elapsed()}`),i}}function ti(t){return function(e,r,n){let i=n.value,o=0;return n.value=async function(...s){let a=o++,c=t(this);return ql(c,`${r}#${a}`,()=>i.apply(this,s))},n}}var tU=W(require("vscode"));var f_=class extends zP{findTextInFiles(e,r,n,i){return Promise.resolve(tU.workspace.findTextInFiles(e,r,o=>n.report(o),i))}findFiles(e,r,n){return tU.workspace.findFiles2(e,r,n)}};var H0=class extends f_{constructor(r,n){super();this._ignoreService=r;this._logger=n.getLogger("SearchService")}async findFilesWithDefaultExcludes(r,n,i){let o=await this._ignoreService.asMinimatchPattern();return this._findFilesWithDefaultExcludesAndExcludes(r,o,n,i)}async findFiles(r,n,i){let o=await this._ignoreService.asMinimatchPattern();return n?.exclude||(n={...n,exclude:o}),await super.findFiles(r,n,i)}async findTextInFiles(r,n,i,o){return super.findTextInFiles(r,n,i,o)}};we([ti(r=>r._logger)],H0.prototype,"findFiles",1),H0=we([de(0,Oe),de(1,ce)],H0);var _t=re("ITabsAndEditorsService");var qo=W(require("vscode"));var $P=class{constructor(){this._store=new Ht;this._tabGroupsUseInfo=new Map;this._tabClock=0;this.onDidChangeActiveTextEditor=qo.window.onDidChangeActiveTextEditor;this.onDidChangeTabs=qo.window.tabGroups.onDidChangeTabs;let e=()=>this._tabGroupsUseInfo.set(qo.window.tabGroups.activeTabGroup,this._tabClock++);e(),this._store.add(qo.window.tabGroups.onDidChangeTabGroups(r=>{r.closed.forEach(n=>this._tabGroupsUseInfo.delete(n)),e()}))}dispose(){this._store.dispose()}get activeTextEditor(){let e=qo.window.activeTextEditor;if(e&&e.document.uri.scheme!=="output")return e;let r=new Un;qo.window.visibleTextEditors.forEach(i=>r.set(i.document.uri,i));let n=[...this._tabGroupsUseInfo];n.sort((i,o)=>o[1]-i[1]);for(let[i]of n)if(i.activeTab){let o=this._asTabInfo(i.activeTab);if(o.uri&&r.has(o.uri))return r.get(o.uri)}}get activeNotebookEditor(){return qo.window.activeNotebookEditor}get tabs(){return qo.window.tabGroups.all.flatMap(e=>e.tabs).map(this._asTabInfo,this)}_asTabInfo(e){let r;return e.input instanceof qo.TabInputText||e.input instanceof qo.TabInputNotebook?r=e.input.uri:(e.input instanceof qo.TabInputTextDiff||e.input instanceof qo.TabInputNotebookDiff)&&(r=e.input.modified),{tab:e,uri:r}}};var Yr=re("IExperimentationService"),WP=class{constructor(){this.initializePromise=Promise.resolve();this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};var KP=class{dispose(){}sendInternalMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryErrorEvent(e,r,n){}sendGHTelemetryEvent(e,r,n){}sendGHTelemetryErrorEvent(e,r,n){}sendGHTelemetryException(e,r){}sendTelemetryEvent(e,r,n,i){}sendTelemetryErrorEvent(e,r,n,i){}setSharedProperty(e,r){}postEvent(e,r){}sendRestrictedGHTelemetryEvent(e,r,n){}sendRestrictedGHTelemetryErrorEvent(e,r,n){}};var _ve=W(bve()),i4=W(require("os"));var ah=class{constructor(e,r,n){this.namespace=r;this.client=XVe(e,n),xve(e,this.client)}separateData(e){if(e.properties!==void 0||e.measurements!==void 0)return e.properties=e.properties||{},e.measurements=e.measurements||{},e;let r={},n={};for(let[i,o]of Object.entries(e))typeof o=="number"?n[i]=o:r[i]=o;return{properties:r,measurements:n}}sendEventData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackEvent({name:this.qualifyEventName(e),properties:n,measurements:i})}sendErrorData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackException({exception:e,properties:n,measurements:i})}flush(){return new Promise(e=>{this.client.flush({callback:()=>{e(void 0)}})})}qualifyEventName(e){return e.includes(this.namespace)?e:`${this.namespace}/${e}`}};function XVe(t,e){let r=new _ve.TelemetryClient(e);return r.config.enableAutoCollectRequests=!1,r.config.enableAutoCollectPerformance=!1,r.config.enableAutoCollectExceptions=!1,r.config.enableAutoCollectConsole=!1,r.config.enableAutoCollectDependencies=!1,r.config.noDiagnosticChannel=!0,xve(t,r),r}function xve(t,e){e.commonProperties=JVe(e.commonProperties,t),e.context.tags[e.context.keys.cloudRoleInstance]="REDACTED",e.config.endpointUrl=t.get(RA).getUrl()}function JVe(t,e){t=t||{},t.common_os=i4.platform(),t.common_platformversion=i4.release();let r=e.get(mt);return t.common_vscodemachineid=r.machineId,t.common_vscodesessionid=r.sessionId,t.common_uikind="desktop",t.common_remotename="none",t.common_isnewappinstall="",t}var rV="7d7048df-6dd0-4048-bb23-b716c1461f8f",nV="3fdd7f28-937a-48c8-9a21-ba337db23bd1";async function iV(t,e,r){let n=t.get(_m);if(await n.deactivate(),!r)return;let i=new ah(t,e,rV),o=new ah(t,e,nV);return n.setReporter(i),n.setSecureReporter(o),{dispose(){n.setReporter(void 0),n.setSecureReporter(void 0),i.flush(),o.flush()}}}var EC=W(Uve());function bze(t){return t?EC.TargetPopulation.Insiders:EC.TargetPopulation.Public}async function Bve(t,e,r){let n=t.extension.id,i=t.extension.packageJSON.version,o=bze(r);return(0,EC.getExperimentationService)(n,i,o,e,t.globalState)}var TC=require("vscode");function g4(t){return t.replace(/([\s|(]|file:\/\/)(\/[^\s]+)/g,"$1[redacted]").replace(/([\s|(]|file:\/\/)([a-zA-Z]:[(\\|/){1,2}][^\s]+)/gi,"$1[redacted]").replace(/([\s|(]|file:\/\/)(\\[^\s]+)/gi,"$1[redacted]")}var v4=class{constructor(e,r,n,i,o){this._accessor=e;this._restrictedTelemetryEnabled=!1;this._disposables=[];this._nonRestrictedTelemetryLogger=TC.env.createTelemetryLogger(new ah(this._accessor,r,n)),this._disposables.push(o.onCopilotToken(s=>{s.token.getTokenValue("rt")==="1"?(this._restrictedTelemetryEnabled=!0,this._restrictedTelemetryLogger=TC.env.createTelemetryLogger(new ah(this._accessor,r,i))):(this._restrictedTelemetryEnabled=!1,this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose(),this._restrictedTelemetryLogger=void 0)}))}sendTelemetryEvent(e,r,n){this._nonRestrictedTelemetryLogger.logUsage(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendTelemetryErrorEvent(e,r,n){this._nonRestrictedTelemetryLogger.logError(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendRestrictedTelemetryEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logUsage(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendRestrictedTelemetryErrorEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logError(e,this.markAsIssuedAndMakeReadyForSending(r,n))}async sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=Er.createAndMarkAsIssued({origin:g4(r),reason:this._restrictedTelemetryEnabled?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await i.makeReadyForSending(this._accessor),this.sendTelemetryEvent("exception",i.properties,i.measurements),!this._restrictedTelemetryEnabled||!this._restrictedTelemetryLogger)return;let o=Er.createAndMarkAsIssued({origin:r});await o.makeReadyForSending(this._accessor),this._restrictedTelemetryLogger.logError(n,o)}markAsIssuedAndMakeReadyForSending(e,r){let n=Er.createAndMarkAsIssued(_re(e),r);n.makeReadyForSending(this._accessor);let i={};for(let o in n.properties)i[o]=new TC.TelemetryTrustedValue(n.properties[o]);return{properties:i,measurements:n.measurements}}dispose(){this._nonRestrictedTelemetryLogger.dispose(),this._disposables.forEach(e=>e.dispose()),this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose()}};var hK=W(ISe());var CO=class{constructor(e,r,n,i){this._isInternal=!1;i.onCopilotToken(async o=>{if(this._username=(await Sc(e))?.account?.label,this._sku=o.token.getTokenValue("sku"),this._isInternal=o.token.isInternal,!o.token.organization_list||!o.envelope.chat_enabled){this._internalTelemetryReporter=void 0;return}o.token.isInternal&&(this._internalTelemetryReporter=new hK.default(r))}),this._externalTelemetryReporter=new hK.default(n)}dispose(){this._externalTelemetryReporter.dispose(),this._internalTelemetryReporter?.dispose()}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this._isInternal&&this.sendInternalTelemetryEvent(e,n),this.sendTelemetryEvent(e,n)}sendInternalTelemetryEvent(e,r,n){this._internalTelemetryReporter&&(r={...r,"common.userName":this._username??"undefined"},this._internalTelemetryReporter.sendRawTelemetryEvent(e,r,n))}sendTelemetryEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryEvent(e,r,n)}sendTelemetryErrorEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryErrorEvent(e,r,n)}};var wO=class{constructor(e,r,n,i,o,s){this._sharedProperties={};this._disposables=[];let a=r.get(Pe),c=r.get(po);this._disposables.push(c.onCopilotToken(u=>{this.sendMSFTTelemetryEvent("token",void 0,{chatEnabled:u.envelope.chat_enabled?1:0,snippyEnabled:u.envelope.public_suggestions==="enabled"?1:0,telemetryEnabled:u.envelope.telemetry==="enabled"?1:0})})),this._microsoftTelemetryService=new CO(a,n,i,c),this._ghTelemetryService=new v4(r,e,o,s,c),this._disposables.push(this._microsoftTelemetryService,this._ghTelemetryService)}dispose(){this._disposables.forEach(e=>e.dispose())}sendMSFTTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!1,microsoft:!0},r,n)}sendMSFTTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!1,microsoft:!0},r,n)}sendGHTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryException(e,r){this._ghTelemetryService.sendExceptionTelemetry(e,r)}sendRestrictedGHTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryEvent(e,r,n)}sendRestrictedGHTelemetryErrorEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryErrorEvent(e,r,n)}sendInternalMSFTTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._microsoftTelemetryService.sendInternalTelemetryEvent(e,r,n)}sendTelemetryEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryEvent(e,n,i)}sendTelemetryErrorEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryErrorEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryErrorEvent(e,n,i)}setSharedProperty(e,r){this._sharedProperties[e]=r}postEvent(e,r){for(let[n,i]of Object.entries(this._sharedProperties))r.set(n,i);this._microsoftTelemetryService.postEvent(e,r)}};var $i=re("ITerminalService");var wSe=require("path"),RSe=require("process"),vg=require("vscode"),RO=new Map,vK=new Map;function ASe(){let t=vg.window.activeTerminal;return t===void 0?"":RO.get(t)?.join(`
`)||""}function PSe(){let t=vg.window.activeTerminal;if(t!==void 0)return vK.get(t)?.at(-1)}function kSe(){try{return vg.window.activeTerminal?.selection??""}catch{return""}}var gK;function DSe(){let t=vg.window.activeTerminal;if(t&&"shellPath"in t.creationOptions){let e=t.creationOptions.shellPath;if(e){let r,n=(0,wSe.basename)(e);if(n==="bash.exe")r="Git Bash";else{let i=n.replace(/\..+/,"");switch(i){case"pwsh":case"powershell":r="powershell";case"":break;default:r=i}}if(r)return gK=r,r}}return gK||(RSe.platform==="win32"?"powershell":"bash")}function CSe(t,e){t.push(e),t.length>40&&t.shift()}function xKe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function NSe(){return[vg.window.onDidWriteTerminalData(t=>{let e=RO.get(t.terminal);e||(e=[],RO.set(t.terminal,e)),CSe(e,xKe(t.data))}),vg.window.onDidExecuteTerminalCommand(t=>{let e=vK.get(t.terminal);e||(e=[],vK.set(t.terminal,e)),CSe(e,t)}),vg.window.onDidCloseTerminal(t=>{RO.delete(t)})]}var AO=class extends Ur{constructor(){super();for(let e of NSe())this._register(e)}get terminalBuffer(){return ASe()}get terminalLastCommand(){return PSe()}get terminalSelection(){return kSe()}get terminalShellType(){return DSe()}};var sl=re("ITestProvider");var Rs=W(require("vscode"));function LSe(t){if(!t()){debugger;t(),Ib(new Uo("Assertion Failed"))}}var SKe;function yg(){return SKe}var EKe;var TKe;var IKe;var yK=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return IKe({owner:n,debugName:()=>{let o=t2(i);if(o!==void 0)return o;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`}},o=>i(this.read(o),o))}recomputeInitiallyAndOnChange(e,r){return e.add(EKe(this,r)),this}keepObserved(e){return e.add(TKe(this)),this}},bK=class extends yK{constructor(){super(...arguments);this.observers=new Set}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded()}removeObserver(r){this.observers.delete(r)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};var _K=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];yg()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():t2(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,yg()?.handleEndTransaction()}},OSe=new Map,xK=new WeakMap;function CKe(t,e,r,n){let i=xK.get(t);if(i)return i;let o=wKe(t,e,r,n);if(o){let s=OSe.get(o)??0;s++,OSe.set(o,s);let a=s===1?o:`${o}#${s}`;return xK.set(t,a),a}}function wKe(t,e,r,n){let i=xK.get(t);if(i)return i;let o=n?RKe(n)+".":"",s;if(e!==void 0)if(typeof e=="function"){if(s=e(),s!==void 0)return o+s}else return o+e;if(r!==void 0&&(s=t2(r),s!==void 0))return o+s;if(n!==void 0){for(let a in n)if(n[a]===t)return o+a}}var MSe=new Map,FSe=new WeakMap;function RKe(t){let e=FSe.get(t);if(e)return e;let r=AKe(t),n=MSe.get(r)??0;n++,MSe.set(r,n);let i=n===1?r:`${r}#${n}`;return FSe.set(t,i),i}function AKe(t){let e=t.constructor;return e?e.name:"Object"}function t2(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}function USe(t,e){return typeof t=="string"?new PO(void 0,t,e):new PO(t,void 0,e)}var PO=class extends bK{constructor(r,n,i){super();this._owner=r;this._debugName=n;this._value=i}get debugName(){return CKe(this,this._debugName,void 0,this._owner)??"ObservableValue"}get(){return this._value}set(r,n,i){if(this._value===r)return;let o;n||(n=o=new _K(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(r),yg()?.handleObservableChanged(this,{oldValue:s,newValue:r,change:i,didChange:!0,hadValue:!0});for(let a of this.observers)n.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};function DO(t){return new kO(void 0,t,void 0,void 0)}var kO=class{constructor(e,r,n,i){this._debugName=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=this.createChangeSummary?.(),yg()?.handleAutorunCreated(this),this._runIfNeeded(),Rb(this)}get debugName(){if(typeof this._debugName=="string")return this._debugName;if(typeof this._debugName=="function"){let r=this._debugName();if(r!==void 0)return r}let e=t2(this._runFn);return e!==void 0?e:"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ab(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let r=this.disposed;try{if(!r){yg()?.handleAutorunTriggered(this);let n=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}}finally{r||yg()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,LSe(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,r){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:r,didChange:i=>i===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=kO)(DO||={});var NO=class extends Ur{constructor(){super();this.resultsDocs=new Un;this.isEnabled=USe("TestProvider.isEnabled",!1);this._register(DO(r=>{Rs.commands.executeCommand("setContext","github.copilot.chat.fixTestFailures.enabled",this.isEnabled.read(r))}))}get lastResultsFrom(){return Rs.tests.testResults[0]?.completedAt}async setEnablement(r){let n=await r.getTreatmentVariableAsync("vscode","copilotchat.fixTestFailures"),i=Rs.env.appName.includes("Insiders")||Rs.env.appName.includes("OSS"),o=n||i;this.isEnabled.set(o,void 0)}getAllFailures(){let r=Rs.tests.testResults[0];return r?this.dfsFailures(r.results):R0.empty()}getFailureAtPosition(r,n){let i=Rs.tests.testResults[0];if(this.resultsDocsAreForTestRun!==i&&this.makeResultsDocs(i),!i)return;let o=this.resultsDocs.get(r)||[],s=Ete(o,a=>!a.range?.start.isAfter(n));if(s){for(let a of s.taskStates)if(a.state===Rs.TestResultState.Failed||a.state===Rs.TestResultState.Errored)return{snapshot:s,task:a}}}*dfsFailures(r){for(let n of r){yield*this.dfsFailures(n.children);for(let i of n.taskStates)(i.state===Rs.TestResultState.Failed||i.state===Rs.TestResultState.Errored)&&(yield{snapshot:n,task:i})}}makeResultsDocs(r){if(this.resultsDocs.clear(),this.resultsDocsAreForTestRun=r,!r)return;let n=[r.results];for(;n.length;)for(let o of n.pop()){if(n.push(o.children),!o.uri)continue;let s=this.resultsDocs.get(o.uri);s?s.push(o):this.resultsDocs.set(o.uri,[o])}let i=new Rs.Range(0,0,0,0);for(let o of this.resultsDocs.values())o.sort((s,a)=>(s.range||i).start.compareTo((a.range||i).start)||PKe(s.taskStates,a.taskStates))}},PKe=(t,e)=>{let r=0,n=0;for(let i of t)r=Math.max(r,i.state);for(let i of e)n=Math.max(n,i.state);return r-n};var rt=re("IWorkspaceService"),LO=class{getWorkspaceFolder(e){return this.getWorkspaceFolders().find(r=>r.scheme===e.scheme&&r.authority===e.authority&&e.fsPath.startsWith(r.fsPath))}};function bg(t,e){let r=t.getWorkspaceFolder(e);return r?_r.relative(r.path,e.path):e.path}var _g=require("vscode");function BSe(t){return t.scheme==="vscode-vfs"&&t.authority.startsWith("github")}var aS=class extends LO{constructor(r){super();this._accessor=r;this.onDidOpenTextDocument=_g.workspace.onDidOpenTextDocument;this.onDidChangeTextDocument=_g.workspace.onDidChangeTextDocument;this.onDidCloseTextDocument=_g.workspace.onDidCloseTextDocument;this._logger=this._accessor.get(ce).getLogger("ExtensionTextDocumentManager")}get textDocuments(){return _g.workspace.textDocuments}async openTextDocument(r){return await _g.workspace.openTextDocument(r)}get notebookDocuments(){return _g.workspace.notebookDocuments}getWorkspaceFolders(){return _g.workspace.workspaceFolders?.map(r=>r.uri)??[]}ensureWorkspaceIsFullyLoaded(){return this._fullyLoadedPromise??=(async()=>{let r=this._accessor.get(VP);for(let n of this.getWorkspaceFolders())if(BSe(n)){this._logger.debug(`Preloading virtual workspace contents for ${n}`);try{let i=await r.loadWorkspaceContents(n);this._logger.info(`loading virtual workspace contents resulted in ${i} for: ${n}`)}catch(i){this._logger.error(`Error loading virtual workspace contents for ${n}: ${i}`)}}})(),this._fullyLoadedPromise}};aS=we([de(0,Ct)],aS);var PK={};rn(PK,{arrayReplaceAt:()=>AK,assign:()=>lS,escapeHtml:()=>Of,escapeRE:()=>fYe,fromCodePoint:()=>i2,has:()=>rYe,isMdAsciiPunct:()=>Uy,isPunctChar:()=>Fy,isSpace:()=>Jt,isString:()=>zO,isValidEntityCode:()=>$O,isWhiteSpace:()=>My,lib:()=>mYe,normalizeReference:()=>By,unescapeAll:()=>Eg,unescapeMd:()=>aYe});var BO={};rn(BO,{decode:()=>r2,encode:()=>FO,format:()=>cS,parse:()=>n2});var qSe={};function kKe(t){let e=qSe[t];if(e)return e;e=qSe[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);e.push(n)}for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function OO(t,e){typeof e!="string"&&(e=OO.defaultChars);let r=kKe(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(n){let i="";for(let o=0,s=n.length;o<s;o+=3){let a=parseInt(n.slice(o+1,o+3),16);if(a<128){i+=r[a];continue}if((a&224)===192&&o+3<s){let c=parseInt(n.slice(o+4,o+6),16);if((c&192)===128){let u=a<<6&1984|c&63;u<128?i+="\uFFFD\uFFFD":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){let c=parseInt(n.slice(o+4,o+6),16),u=parseInt(n.slice(o+7,o+9),16);if((c&192)===128&&(u&192)===128){let l=a<<12&61440|c<<6&4032|u&63;l<2048||l>=55296&&l<=57343?i+="\uFFFD\uFFFD\uFFFD":i+=String.fromCharCode(l),o+=6;continue}}if((a&248)===240&&o+9<s){let c=parseInt(n.slice(o+4,o+6),16),u=parseInt(n.slice(o+7,o+9),16),l=parseInt(n.slice(o+10,o+12),16);if((c&192)===128&&(u&192)===128&&(l&192)===128){let d=a<<18&1835008|c<<12&258048|u<<6&4032|l&63;d<65536||d>1114111?i+="\uFFFD\uFFFD\uFFFD\uFFFD":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),o+=9;continue}}i+="\uFFFD"}return i})}OO.defaultChars=";/?:@&=+$,#";OO.componentChars="";var r2=OO;var HSe={};function DKe(t){let e=HSe[t];if(e)return e;e=HSe[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<t.length;r++)e[t.charCodeAt(r)]=t[r];return e}function MO(t,e,r){typeof e!="string"&&(r=e,e=MO.defaultChars),typeof r>"u"&&(r=!0);let n=DKe(e),i="";for(let o=0,s=t.length;o<s;o++){let a=t.charCodeAt(o);if(r&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3))){i+=t.slice(o,o+3),o+=2;continue}if(a<128){i+=n[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){let c=t.charCodeAt(o+1);if(c>=56320&&c<=57343){i+=encodeURIComponent(t[o]+t[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[o])}return i}MO.defaultChars=";/?:@&=+$,-_.!~*'()#";MO.componentChars="-_.!~*'()";var FO=MO;function cS(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function UO(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var NKe=/^([a-z0-9.+-]+:)/i,LKe=/:[0-9]*$/,OKe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,MKe=["<",">",'"',"`"," ","\r",`
`,"	"],FKe=["{","}","|","\\","^","`"].concat(MKe),UKe=["'"].concat(FKe),jSe=["%","/","?",";","#"].concat(UKe),GSe=["/","?","#"],BKe=255,VSe=/^[+a-z0-9A-Z_-]{0,63}$/,qKe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,zSe={javascript:!0,"javascript:":!0},$Se={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function HKe(t,e){if(t&&t instanceof UO)return t;let r=new UO;return r.parse(t,e),r}UO.prototype.parse=function(t,e){let r,n,i,o=t;if(o=o.trim(),!e&&t.split("#").length===1){let u=OKe.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=NKe.exec(o);if(s&&(s=s[0],r=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&zSe[s])&&(o=o.substr(2),this.slashes=!0)),!zSe[s]&&(i||s&&!$Se[s])){let u=-1;for(let m=0;m<GSe.length;m++)n=o.indexOf(GSe[m]),n!==-1&&(u===-1||n<u)&&(u=n);let l,d;u===-1?d=o.lastIndexOf("@"):d=o.lastIndexOf("@",u),d!==-1&&(l=o.slice(0,d),o=o.slice(d+1),this.auth=l),u=-1;for(let m=0;m<jSe.length;m++)n=o.indexOf(jSe[m]),n!==-1&&(u===-1||n<u)&&(u=n);u===-1&&(u=o.length),o[u-1]===":"&&u--;let p=o.slice(0,u);o=o.slice(u),this.parseHost(p),this.hostname=this.hostname||"";let f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){let m=this.hostname.split(/\./);for(let h=0,g=m.length;h<g;h++){let v=m[h];if(v&&!v.match(VSe)){let b="";for(let y=0,S=v.length;y<S;y++)v.charCodeAt(y)>127?b+="x":b+=v[y];if(!b.match(VSe)){let y=m.slice(0,h),S=m.slice(h+1),x=v.match(qKe);x&&(y.push(x[1]),S.unshift(x[2])),S.length&&(o=S.join(".")+o),this.hostname=y.join(".");break}}}}this.hostname.length>BKe&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));let c=o.indexOf("?");return c!==-1&&(this.search=o.substr(c),o=o.slice(0,c)),o&&(this.pathname=o),$Se[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};UO.prototype.parseHost=function(t){let e=LKe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var n2=HKe;var SK={};rn(SK,{Any:()=>qO,Cc:()=>HO,Cf:()=>WSe,P:()=>uS,Z:()=>jO});var qO=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;var HO=/[\0-\x1F\x7F-\x9F]/;var WSe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/;var uS=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/;var jO=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;var KSe=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(t=>t.charCodeAt(0)));var YSe=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(t=>t.charCodeAt(0)));var EK,jKe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),TK=(EK=String.fromCodePoint)!==null&&EK!==void 0?EK:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function IK(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=jKe.get(t))!==null&&e!==void 0?e:t}var Io;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Io||(Io={}));var GKe=32,xg;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(xg||(xg={}));function CK(t){return t>=Io.ZERO&&t<=Io.NINE}function VKe(t){return t>=Io.UPPER_A&&t<=Io.UPPER_F||t>=Io.LOWER_A&&t<=Io.LOWER_F}function zKe(t){return t>=Io.UPPER_A&&t<=Io.UPPER_Z||t>=Io.LOWER_A&&t<=Io.LOWER_Z||CK(t)}function $Ke(t){return t===Io.EQUALS||zKe(t)}var To;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(To||(To={}));var qd;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(qd||(qd={}));var GO=class{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=To.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=qd.Strict}startEntity(e){this.decodeMode=e,this.state=To.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case To.EntityStart:return e.charCodeAt(r)===Io.NUM?(this.state=To.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=To.NamedEntity,this.stateNamedEntity(e,r));case To.NumericStart:return this.stateNumericStart(e,r);case To.NumericDecimal:return this.stateNumericDecimal(e,r);case To.NumericHex:return this.stateNumericHex(e,r);case To.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|GKe)===Io.LOWER_X?(this.state=To.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=To.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,i){if(r!==n){let o=n-r;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(r,o),i),this.consumed+=o}}stateNumericHex(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(CK(i)||VKe(i))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(CK(i))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Io.SEMI)this.consumed+=1;else if(this.decodeMode===qd.Strict)return 0;return this.emitCodePoint(IK(this.result),this.consumed),this.errors&&(e!==Io.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){let{decodeTree:n}=this,i=n[this.treeIndex],o=(i&xg.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){let s=e.charCodeAt(r);if(this.treeIndex=WKe(n,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===qd.Attribute&&(o===0||$Ke(s))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],o=(i&xg.VALUE_LENGTH)>>14,o!==0){if(s===Io.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==qd.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;let{result:r,decodeTree:n}=this,i=(n[r]&xg.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){let{decodeTree:i}=this;return this.emitCodePoint(r===1?i[e]&~xg.VALUE_LENGTH:i[e+1],n),r===3&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case To.NamedEntity:return this.result!==0&&(this.decodeMode!==qd.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case To.NumericDecimal:return this.emitNumericEntity(0,2);case To.NumericHex:return this.emitNumericEntity(0,3);case To.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case To.EntityStart:return 0}}};function QSe(t){let e="",r=new GO(t,n=>e+=TK(n));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),r.startEntity(o);let u=r.write(i,a+1);if(u<0){s=a+r.end();break}s=a+u,a=u===0?s+1:s}let c=e+i.slice(s);return e="",c}}function WKe(t,e,r,n){let i=(e&xg.BRANCH_LENGTH)>>7,o=e&xg.JUMP_TABLE;if(i===0)return o!==0&&n===o?r:-1;if(o){let c=n-o;return c<0||c>=i?-1:t[r+c]-1}let s=r,a=s+i-1;for(;s<=a;){let c=s+a>>>1,u=t[c];if(u<n)s=c+1;else if(u>n)a=c-1;else return t[c+i]}return-1}var KKe=QSe(KSe),XBt=QSe(YSe);function Sg(t,e=qd.Legacy){return KKe(t,e)}function VO(t){for(let e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}var YKe=new Map(VO([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(VO([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(VO([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(VO([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var QKe=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),XKe=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function wK(t,e){return function(n){let i,o=0,s="";for(;i=t.exec(n);)o!==i.index&&(s+=n.substring(o,i.index)),s+=e.get(i[0].charCodeAt(0)),o=i.index+1;return s+n.substring(o)}}var XSe=wK(/[&<>'"]/g,QKe),JSe=wK(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),ZSe=wK(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var eEe;(function(t){t[t.XML=0]="XML",t[t.HTML=1]="HTML"})(eEe||(eEe={}));var tEe;(function(t){t[t.UTF8=0]="UTF8",t[t.ASCII=1]="ASCII",t[t.Extensive=2]="Extensive",t[t.Attribute=3]="Attribute",t[t.Text=4]="Text"})(tEe||(tEe={}));function eYe(t){return Object.prototype.toString.call(t)}function zO(t){return eYe(t)==="[object String]"}var tYe=Object.prototype.hasOwnProperty;function rYe(t,e){return tYe.call(t,e)}function lS(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function AK(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function $O(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function i2(t){if(t>65535){t-=65536;let e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var iEe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,nYe=/&([a-z#][a-z0-9]{1,31});/gi,iYe=new RegExp(iEe.source+"|"+nYe.source,"gi"),oYe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function sYe(t,e){if(e.charCodeAt(0)===35&&oYe.test(e)){let n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return $O(n)?i2(n):t}let r=Sg(t);return r!==t?r:t}function aYe(t){return t.indexOf("\\")<0?t:t.replace(iEe,"$1")}function Eg(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(iYe,function(e,r,n){return r||sYe(e,n)})}var cYe=/[&<>"]/,uYe=/[&<>"]/g,lYe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function dYe(t){return lYe[t]}function Of(t){return cYe.test(t)?t.replace(uYe,dYe):t}var pYe=/[.?*+^$[\]\\(){}|-]/g;function fYe(t){return t.replace(pYe,"\\$&")}function Jt(t){switch(t){case 9:case 32:return!0}return!1}function My(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Fy(t){return uS.test(t)}function Uy(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function By(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(/ẞ/g,"\xDF")),t.toLowerCase().toUpperCase()}var mYe={mdurl:BO,ucmicro:SK};var LK={};rn(LK,{parseLinkDestination:()=>DK,parseLinkLabel:()=>kK,parseLinkTitle:()=>NK});function kK(t,e,r){let n,i,o,s,a=t.posMax,c=t.pos;for(t.pos=e+1,n=1;t.pos<a;){if(o=t.src.charCodeAt(t.pos),o===93&&(n--,n===0)){i=!0;break}if(s=t.pos,t.md.inline.skipToken(t),o===91){if(s===t.pos-1)n++;else if(r)return t.pos=c,-1}}let u=-1;return i&&(u=t.pos),t.pos=c,u}function DK(t,e,r){let n,i=e,o={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<r;){if(n=t.charCodeAt(i),n===10||n===60)return o;if(n===62)return o.pos=i+1,o.str=Eg(t.slice(e+1,i)),o.ok=!0,o;if(n===92&&i+1<r){i+=2;continue}i++}return o}let s=0;for(;i<r&&(n=t.charCodeAt(i),!(n===32||n<32||n===127));){if(n===92&&i+1<r){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(n===40&&(s++,s>32))return o;if(n===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=Eg(t.slice(e,i)),o.pos=i,o.ok=!0),o}function NK(t,e,r){let n,i,o=0,s=e,a={ok:!1,pos:0,lines:0,str:""};if(s>=r||(i=t.charCodeAt(s),i!==34&&i!==39&&i!==40))return a;for(s++,i===40&&(i=41);s<r;){if(n=t.charCodeAt(s),n===i)return a.pos=s+1,a.lines=o,a.str=Eg(t.slice(e+1,s)),a.ok=!0,a;if(n===40&&i===41)return a;n===10?o++:n===92&&s+1<r&&(s++,t.charCodeAt(s)===10&&o++),s++}return a}var Hd={};Hd.code_inline=function(t,e,r,n,i){let o=t[e];return"<code"+i.renderAttrs(o)+">"+Of(o.content)+"</code>"};Hd.code_block=function(t,e,r,n,i){let o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+Of(t[e].content)+`</code></pre>
`};Hd.fence=function(t,e,r,n,i){let o=t[e],s=o.info?Eg(o.info).trim():"",a="",c="";if(s){let l=s.split(/(\s+)/g);a=l[0],c=l.slice(2).join("")}let u;if(r.highlight?u=r.highlight(o.content,a,c)||Of(o.content):u=Of(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){let l=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[];l<0?d.push(["class",r.langPrefix+a]):(d[l]=d[l].slice(),d[l][1]+=" "+r.langPrefix+a);let p={attrs:d};return`<pre><code${i.renderAttrs(p)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};Hd.image=function(t,e,r,n,i){let o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};Hd.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};Hd.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Hd.text=function(t,e){return Of(t[e].content)};Hd.html_block=function(t,e){return t[e].content};Hd.html_inline=function(t,e){return t[e].content};function dS(){this.rules=lS({},Hd)}dS.prototype.renderAttrs=function(e){let r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+Of(e.attrs[r][0])+'="'+Of(e.attrs[r][1])+'"';return i};dS.prototype.renderToken=function(e,r,n){let i=e[r],o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&n.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&r+1<e.length)){let a=e[r+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};dS.prototype.renderInline=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e)}return n};dS.prototype.renderInlineAsText=function(t,e,r){let n="";for(let i=0,o=t.length;i<o;i++)switch(t[i].type){case"text":n+=t[i].content;break;case"image":n+=this.renderInlineAsText(t[i].children,e,r);break;case"html_inline":case"html_block":n+=t[i].content;break;case"softbreak":case"hardbreak":n+=`
`;break;default:}return n};dS.prototype.render=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;a==="inline"?n+=this.renderInline(t[o].children,e,r):typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e,r)}return n};var oEe=dS;function al(){this.__rules__=[],this.__cache__=null}al.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};al.prototype.__compile__=function(){let t=this,e=[""];t.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){n.enabled&&(r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn))})})};al.prototype.at=function(t,e,r){let n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};al.prototype.before=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};al.prototype.after=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};al.prototype.push=function(t,e,r){let n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};al.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};al.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};al.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};al.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var qy=al;function pS(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}pS.prototype.attrIndex=function(e){if(!this.attrs)return-1;let r=this.attrs;for(let n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};pS.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};pS.prototype.attrSet=function(e,r){let n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};pS.prototype.attrGet=function(e){let r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};pS.prototype.attrJoin=function(e,r){let n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};var Mf=pS;function sEe(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}sEe.prototype.Token=Mf;var aEe=sEe;var hYe=/\r\n?|\n/g,gYe=/\0/g;function OK(t){let e;e=t.src.replace(hYe,`
`),e=e.replace(gYe,"\uFFFD"),t.src=e}function MK(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function FK(t){let e=t.tokens;for(let r=0,n=e.length;r<n;r++){let i=e[r];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function vYe(t){return/^<a[>\s]/i.test(t)}function yYe(t){return/^<\/a\s*>/i.test(t)}function UK(t){let e=t.tokens;if(t.md.options.linkify)for(let r=0,n=e.length;r<n;r++){if(e[r].type!=="inline"||!t.md.linkify.pretest(e[r].content))continue;let i=e[r].children,o=0;for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(vYe(a.content)&&o>0&&o--,yYe(a.content)&&o++),!(o>0)&&a.type==="text"&&t.md.linkify.test(a.content)){let c=a.content,u=t.md.linkify.match(c),l=[],d=a.level,p=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let f=0;f<u.length;f++){let m=u[f].url,h=t.md.normalizeLink(m);if(!t.md.validateLink(h))continue;let g=u[f].text;u[f].schema?u[f].schema==="mailto:"&&!/^mailto:/i.test(g)?g=t.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=t.md.normalizeLinkText(g):g=t.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");let v=u[f].index;if(v>p){let x=new t.Token("text","",0);x.content=c.slice(p,v),x.level=d,l.push(x)}let b=new t.Token("link_open","a",1);b.attrs=[["href",h]],b.level=d++,b.markup="linkify",b.info="auto",l.push(b);let y=new t.Token("text","",0);y.content=g,y.level=d,l.push(y);let S=new t.Token("link_close","a",-1);S.level=--d,S.markup="linkify",S.info="auto",l.push(S),p=u[f].lastIndex}if(p<c.length){let f=new t.Token("text","",0);f.content=c.slice(p),f.level=d,l.push(f)}e[r].children=i=AK(i,s,l)}}}}var cEe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,bYe=/\((c|tm|r)\)/i,_Ye=/\((c|tm|r)\)/ig,xYe={c:"\xA9",r:"\xAE",tm:"\u2122"};function SYe(t,e){return xYe[e.toLowerCase()]}function EYe(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&(n.content=n.content.replace(_Ye,SYe)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function TYe(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&cEe.test(n.content)&&(n.content=n.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function BK(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(bYe.test(t.tokens[e].content)&&EYe(t.tokens[e].children),cEe.test(t.tokens[e].content)&&TYe(t.tokens[e].children))}var IYe=/['"]/,uEe=/['"]/g,lEe="\u2019";function WO(t,e,r){return t.slice(0,e)+r+t.slice(e+1)}function CYe(t,e){let r,n=[];for(let i=0;i<t.length;i++){let o=t[i],s=t[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=s);r--);if(n.length=r+1,o.type!=="text")continue;let a=o.content,c=0,u=a.length;e:for(;c<u;){uEe.lastIndex=c;let l=uEe.exec(a);if(!l)break;let d=!0,p=!0;c=l.index+1;let f=l[0]==="'",m=32;if(l.index-1>=0)m=a.charCodeAt(l.index-1);else for(r=i-1;r>=0&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r--)if(t[r].content){m=t[r].content.charCodeAt(t[r].content.length-1);break}let h=32;if(c<u)h=a.charCodeAt(c);else for(r=i+1;r<t.length&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r++)if(t[r].content){h=t[r].content.charCodeAt(0);break}let g=Uy(m)||Fy(String.fromCharCode(m)),v=Uy(h)||Fy(String.fromCharCode(h)),b=My(m),y=My(h);if(y?d=!1:v&&(b||g||(d=!1)),b?p=!1:g&&(y||v||(p=!1)),h===34&&l[0]==='"'&&m>=48&&m<=57&&(p=d=!1),d&&p&&(d=g,p=v),!d&&!p){f&&(o.content=WO(o.content,l.index,lEe));continue}if(p)for(r=n.length-1;r>=0;r--){let S=n[r];if(n[r].level<s)break;if(S.single===f&&n[r].level===s){S=n[r];let x,T;f?(x=e.md.options.quotes[2],T=e.md.options.quotes[3]):(x=e.md.options.quotes[0],T=e.md.options.quotes[1]),o.content=WO(o.content,l.index,T),t[S.token].content=WO(t[S.token].content,S.pos,x),c+=T.length-1,S.token===i&&(c+=x.length-1),a=o.content,u=a.length,n.length=r;continue e}}d?n.push({token:i,pos:l.index,single:f,level:s}):p&&f&&(o.content=WO(o.content,l.index,lEe))}}}function qK(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!IYe.test(t.tokens[e].content)||CYe(t.tokens[e].children,t)}function HK(t){let e,r,n=t.tokens,i=n.length;for(let o=0;o<i;o++){if(n[o].type!=="inline")continue;let s=n[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=r=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==r&&(s[r]=s[e]),r++);e!==r&&(s.length=r)}}var jK=[["normalize",OK],["block",MK],["inline",FK],["linkify",UK],["replacements",BK],["smartquotes",qK],["text_join",HK]];function GK(){this.ruler=new qy;for(let t=0;t<jK.length;t++)this.ruler.push(jK[t][0],jK[t][1])}GK.prototype.process=function(t){let e=this.ruler.getRules("");for(let r=0,n=e.length;r<n;r++)e[r](t)};GK.prototype.State=aEe;var dEe=GK;function jd(t,e,r,n){this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let i=this.src;for(let o=0,s=0,a=0,c=0,u=i.length,l=!1;s<u;s++){let d=i.charCodeAt(s);if(!l)if(Jt(d)){a++,d===9?c+=4-c%4:c++;continue}else l=!0;(d===10||s===u-1)&&(d!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(c),this.bsCount.push(0),l=!1,a=0,c=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}jd.prototype.push=function(t,e,r){let n=new Mf(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};jd.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};jd.prototype.skipEmptyLines=function(e){for(let r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};jd.prototype.skipSpaces=function(e){for(let r=this.src.length;e<r;e++){let n=this.src.charCodeAt(e);if(!Jt(n))break}return e};jd.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Jt(this.src.charCodeAt(--e)))return e+1;return e};jd.prototype.skipChars=function(e,r){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};jd.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};jd.prototype.getLines=function(e,r,n,i){if(e>=r)return"";let o=new Array(r-e);for(let s=0,a=e;a<r;a++,s++){let c=0,u=this.bMarks[a],l=u,d;for(a+1<r||i?d=this.eMarks[a]+1:d=this.eMarks[a];l<d&&c<n;){let p=this.src.charCodeAt(l);if(Jt(p))p===9?c+=4-(c+this.bsCount[a])%4:c++;else if(l-u<this.tShift[a])c++;else break;l++}c>n?o[s]=new Array(c-n+1).join(" ")+this.src.slice(l,d):o[s]=this.src.slice(l,d)}return o.join("")};jd.prototype.Token=Mf;var pEe=jd;function VK(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.slice(r,n)}function fEe(t){let e=[],r=t.length,n=0,i=t.charCodeAt(n),o=!1,s=0,a="";for(;n<r;)i===124&&(o?(a+=t.substring(s,n-1),s=n):(e.push(a+t.substring(s,n)),a="",s=n+1)),o=i===92,n++,i=t.charCodeAt(n);return e.push(a+t.substring(s)),e}function zK(t,e,r,n){if(e+2>r)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let o=t.bMarks[i]+t.tShift[i];if(o>=t.eMarks[i])return!1;let s=t.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=t.eMarks[i])return!1;let a=t.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!Jt(a)||s===45&&Jt(a))return!1;for(;o<t.eMarks[i];){let y=t.src.charCodeAt(o);if(y!==124&&y!==45&&y!==58&&!Jt(y))return!1;o++}let c=VK(t,e+1),u=c.split("|"),l=[];for(let y=0;y<u.length;y++){let S=u[y].trim();if(!S){if(y===0||y===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?l.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?l.push("left"):l.push("")}if(c=VK(t,e).trim(),c.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=fEe(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();let d=u.length;if(d===0||d!==l.length)return!1;if(n)return!0;let p=t.parentType;t.parentType="table";let f=t.md.block.ruler.getRules("blockquote"),m=t.push("table_open","table",1),h=[e,0];m.map=h;let g=t.push("thead_open","thead",1);g.map=[e,e+1];let v=t.push("tr_open","tr",1);v.map=[e,e+1];for(let y=0;y<u.length;y++){let S=t.push("th_open","th",1);l[y]&&(S.attrs=[["style","text-align:"+l[y]]]);let x=t.push("inline","",0);x.content=u[y].trim(),x.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let b;for(i=e+2;i<r&&!(t.sCount[i]<t.blkIndent);i++){let y=!1;for(let x=0,T=f.length;x<T;x++)if(f[x](t,i,r,!0)){y=!0;break}if(y||(c=VK(t,i).trim(),!c)||t.sCount[i]-t.blkIndent>=4)break;if(u=fEe(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),i===e+2){let x=t.push("tbody_open","tbody",1);x.map=b=[e+2,0]}let S=t.push("tr_open","tr",1);S.map=[i,i+1];for(let x=0;x<d;x++){let T=t.push("td_open","td",1);l[x]&&(T.attrs=[["style","text-align:"+l[x]]]);let L=t.push("inline","",0);L.content=u[x]?u[x].trim():"",L.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return b&&(t.push("tbody_close","tbody",-1),b[1]=i),t.push("table_close","table",-1),h[1]=i,t.parentType=p,t.line=i,!0}function $K(t,e,r){if(t.sCount[e]-t.blkIndent<4)return!1;let n=e+1,i=n;for(;n<r;){if(t.isEmpty(n)){n++;continue}if(t.sCount[n]-t.blkIndent>=4){n++,i=n;continue}break}t.line=i;let o=t.push("code_block","code",0);return o.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,o.map=[e,t.line],!0}function WK(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>o)return!1;let s=t.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=t.skipChars(i,s);let c=i-a;if(c<3)return!1;let u=t.src.slice(a,i),l=t.src.slice(i,o);if(s===96&&l.indexOf(String.fromCharCode(s))>=0)return!1;if(n)return!0;let d=e,p=!1;for(;d++,!(d>=r||(i=a=t.bMarks[d]+t.tShift[d],o=t.eMarks[d],i<o&&t.sCount[d]<t.blkIndent));)if(t.src.charCodeAt(i)===s&&!(t.sCount[d]-t.blkIndent>=4)&&(i=t.skipChars(i,s),!(i-a<c)&&(i=t.skipSpaces(i),!(i<o)))){p=!0;break}c=t.sCount[e],t.line=d+(p?1:0);let f=t.push("fence","code",0);return f.info=l,f.content=t.getLines(e+1,d,c,!0),f.markup=u,f.map=[e,t.line],!0}function KK(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],s=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(n)return!0;let a=[],c=[],u=[],l=[],d=t.md.block.ruler.getRules("blockquote"),p=t.parentType;t.parentType="blockquote";let f=!1,m;for(m=e;m<r;m++){let y=t.sCount[m]<t.blkIndent;if(i=t.bMarks[m]+t.tShift[m],o=t.eMarks[m],i>=o)break;if(t.src.charCodeAt(i++)===62&&!y){let x=t.sCount[m]+1,T,L;t.src.charCodeAt(i)===32?(i++,x++,L=!1,T=!0):t.src.charCodeAt(i)===9?(T=!0,(t.bsCount[m]+x)%4===3?(i++,x++,L=!1):L=!0):T=!1;let M=x;for(a.push(t.bMarks[m]),t.bMarks[m]=i;i<o;){let q=t.src.charCodeAt(i);if(Jt(q))q===9?M+=4-(M+t.bsCount[m]+(L?1:0))%4:M++;else break;i++}f=i>=o,c.push(t.bsCount[m]),t.bsCount[m]=t.sCount[m]+1+(T?1:0),u.push(t.sCount[m]),t.sCount[m]=M-x,l.push(t.tShift[m]),t.tShift[m]=i-t.bMarks[m];continue}if(f)break;let S=!1;for(let x=0,T=d.length;x<T;x++)if(d[x](t,m,r,!0)){S=!0;break}if(S){t.lineMax=m,t.blkIndent!==0&&(a.push(t.bMarks[m]),c.push(t.bsCount[m]),l.push(t.tShift[m]),u.push(t.sCount[m]),t.sCount[m]-=t.blkIndent);break}a.push(t.bMarks[m]),c.push(t.bsCount[m]),l.push(t.tShift[m]),u.push(t.sCount[m]),t.sCount[m]=-1}let h=t.blkIndent;t.blkIndent=0;let g=t.push("blockquote_open","blockquote",1);g.markup=">";let v=[e,0];g.map=v,t.md.block.tokenize(t,e,m);let b=t.push("blockquote_close","blockquote",-1);b.markup=">",t.lineMax=s,t.parentType=p,v[1]=t.line;for(let y=0;y<l.length;y++)t.bMarks[y+e]=a[y],t.tShift[y+e]=l[y],t.sCount[y+e]=u[y],t.bsCount[y+e]=c[y];return t.blkIndent=h,!0}function YK(t,e,r,n){let i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.bMarks[e]+t.tShift[e],s=t.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){let u=t.src.charCodeAt(o++);if(u!==s&&!Jt(u))return!1;u===s&&a++}if(a<3)return!1;if(n)return!0;t.line=e+1;let c=t.push("hr","hr",0);return c.map=[e,t.line],c.markup=Array(a+1).join(String.fromCharCode(s)),!0}function mEe(t,e){let r=t.eMarks[e],n=t.bMarks[e]+t.tShift[e],i=t.src.charCodeAt(n++);if(i!==42&&i!==45&&i!==43)return-1;if(n<r){let o=t.src.charCodeAt(n);if(!Jt(o))return-1}return n}function hEe(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e],i=r;if(i+1>=n)return-1;let o=t.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=n)return-1;if(o=t.src.charCodeAt(i++),o>=48&&o<=57){if(i-r>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<n&&(o=t.src.charCodeAt(i),!Jt(o))?-1:i}function wYe(t,e){let r=t.level+2;for(let n=e+2,i=t.tokens.length-2;n<i;n++)t.tokens[n].level===r&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}function QK(t,e,r,n){let i,o,s,a,c=e,u=!0;if(t.sCount[c]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[c]-t.listIndent>=4&&t.sCount[c]<t.blkIndent)return!1;let l=!1;n&&t.parentType==="paragraph"&&t.sCount[c]>=t.blkIndent&&(l=!0);let d,p,f;if((f=hEe(t,c))>=0){if(d=!0,s=t.bMarks[c]+t.tShift[c],p=Number(t.src.slice(s,f-1)),l&&p!==1)return!1}else if((f=mEe(t,c))>=0)d=!1;else return!1;if(l&&t.skipSpaces(f)>=t.eMarks[c])return!1;if(n)return!0;let m=t.src.charCodeAt(f-1),h=t.tokens.length;d?(a=t.push("ordered_list_open","ol",1),p!==1&&(a.attrs=[["start",p]])):a=t.push("bullet_list_open","ul",1);let g=[c,0];a.map=g,a.markup=String.fromCharCode(m);let v=!1,b=t.md.block.ruler.getRules("list"),y=t.parentType;for(t.parentType="list";c<r;){o=f,i=t.eMarks[c];let S=t.sCount[c]+f-(t.bMarks[c]+t.tShift[c]),x=S;for(;o<i;){let k=t.src.charCodeAt(o);if(k===9)x+=4-(x+t.bsCount[c])%4;else if(k===32)x++;else break;o++}let T=o,L;T>=i?L=1:L=x-S,L>4&&(L=1);let M=S+L;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(m);let q=[c,0];a.map=q,d&&(a.info=t.src.slice(s,f-1));let O=t.tight,Z=t.tShift[c],z=t.sCount[c],D=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=M,t.tight=!0,t.tShift[c]=T-t.bMarks[c],t.sCount[c]=x,T>=i&&t.isEmpty(c+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,c,r,!0),(!t.tight||v)&&(u=!1),v=t.line-c>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=D,t.tShift[c]=Z,t.sCount[c]=z,t.tight=O,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(m),c=t.line,q[1]=c,c>=r||t.sCount[c]<t.blkIndent||t.sCount[c]-t.blkIndent>=4)break;let E=!1;for(let k=0,F=b.length;k<F;k++)if(b[k](t,c,r,!0)){E=!0;break}if(E)break;if(d){if(f=hEe(t,c),f<0)break;s=t.bMarks[c]+t.tShift[c]}else if(f=mEe(t,c),f<0)break;if(m!==t.src.charCodeAt(f-1))break}return d?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(m),g[1]=c,t.line=c,t.parentType=y,u&&wYe(t,h),!0}function XK(t,e,r,n){let i=0,o=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],a=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(o)!==91)return!1;for(;++o<s;)if(t.src.charCodeAt(o)===93&&t.src.charCodeAt(o-1)!==92){if(o+1===s||t.src.charCodeAt(o+1)!==58)return!1;break}let c=t.lineMax,u=t.md.block.ruler.getRules("reference"),l=t.parentType;for(t.parentType="reference";a<c&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3||t.sCount[a]<0)continue;let x=!1;for(let T=0,L=u.length;T<L;T++)if(u[T](t,a,c,!0)){x=!0;break}if(x)break}let d=t.getLines(e,a,t.blkIndent,!1).trim();s=d.length;let p=-1;for(o=1;o<s;o++){let x=d.charCodeAt(o);if(x===91)return!1;if(x===93){p=o;break}else x===10?i++:x===92&&(o++,o<s&&d.charCodeAt(o)===10&&i++)}if(p<0||d.charCodeAt(p+1)!==58)return!1;for(o=p+2;o<s;o++){let x=d.charCodeAt(o);if(x===10)i++;else if(!Jt(x))break}let f=t.md.helpers.parseLinkDestination(d,o,s);if(!f.ok)return!1;let m=t.md.normalizeLink(f.str);if(!t.md.validateLink(m))return!1;o=f.pos,i+=f.lines;let h=o,g=i,v=o;for(;o<s;o++){let x=d.charCodeAt(o);if(x===10)i++;else if(!Jt(x))break}let b=t.md.helpers.parseLinkTitle(d,o,s),y;for(o<s&&v!==o&&b.ok?(y=b.str,o=b.pos,i+=b.lines):(y="",o=h,i=g);o<s;){let x=d.charCodeAt(o);if(!Jt(x))break;o++}if(o<s&&d.charCodeAt(o)!==10&&y)for(y="",o=h,i=g;o<s;){let x=d.charCodeAt(o);if(!Jt(x))break;o++}if(o<s&&d.charCodeAt(o)!==10)return!1;let S=By(d.slice(1,p));return S?(n||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[S]>"u"&&(t.env.references[S]={title:y,href:m}),t.parentType=l,t.line=e+i+1),!0):!1}var gEe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"];var RYe="[a-zA-Z_:][a-zA-Z0-9:._-]*",AYe="[^\"'=<>`\\x00-\\x20]+",PYe="'[^']*'",kYe='"[^"]*"',DYe="(?:"+AYe+"|"+PYe+"|"+kYe+")",NYe="(?:\\s+"+RYe+"(?:\\s*=\\s*"+DYe+")?)",vEe="<[A-Za-z][A-Za-z0-9\\-]*"+NYe+"*\\s*\\/?>",yEe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",LYe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",OYe="<[?][\\s\\S]*?[?]>",MYe="<![A-Z]+\\s+[^>]*>",FYe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",bEe=new RegExp("^(?:"+vEe+"|"+yEe+"|"+LYe+"|"+OYe+"|"+MYe+"|"+FYe+")"),_Ee=new RegExp("^(?:"+vEe+"|"+yEe+")");var fS=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+gEe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(_Ee.source+"\\s*$"),/^$/,!1]];function JK(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let s=t.src.slice(i,o),a=0;for(;a<fS.length&&!fS[a][0].test(s);a++);if(a===fS.length)return!1;if(n)return fS[a][2];let c=e+1;if(!fS[a][1].test(s)){for(;c<r&&!(t.sCount[c]<t.blkIndent);c++)if(i=t.bMarks[c]+t.tShift[c],o=t.eMarks[c],s=t.src.slice(i,o),fS[a][1].test(s)){s.length!==0&&c++;break}}t.line=c;let u=t.push("html_block","",0);return u.map=[e,c],u.content=t.getLines(e,c,t.blkIndent,!0),!0}function ZK(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=t.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=t.src.charCodeAt(++i);if(a>6||i<o&&!Jt(s))return!1;if(n)return!0;o=t.skipSpacesBack(o,i);let c=t.skipCharsBack(o,35,i);c>i&&Jt(t.src.charCodeAt(c-1))&&(o=c),t.line=e+1;let u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];let l=t.push("inline","",0);l.content=t.src.slice(i,o).trim(),l.map=[e,t.line],l.children=[];let d=t.push("heading_close","h"+String(a),-1);return d.markup="########".slice(0,a),!0}function eY(t,e,r){let n=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;let i=t.parentType;t.parentType="paragraph";let o=0,s,a=e+1;for(;a<r&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let f=t.bMarks[a]+t.tShift[a],m=t.eMarks[a];if(f<m&&(s=t.src.charCodeAt(f),(s===45||s===61)&&(f=t.skipChars(f,s),f=t.skipSpaces(f),f>=m))){o=s===61?1:2;break}}if(t.sCount[a]<0)continue;let p=!1;for(let f=0,m=n.length;f<m;f++)if(n[f](t,a,r,!0)){p=!0;break}if(p)break}if(!o)return!1;let c=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;let u=t.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[e,t.line];let l=t.push("inline","",0);l.content=c,l.map=[e,t.line-1],l.children=[];let d=t.push("heading_close","h"+String(o),-1);return d.markup=String.fromCharCode(s),t.parentType=i,!0}function tY(t,e,r){let n=t.md.block.ruler.getRules("paragraph"),i=t.parentType,o=e+1;for(t.parentType="paragraph";o<r&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3||t.sCount[o]<0)continue;let u=!1;for(let l=0,d=n.length;l<d;l++)if(n[l](t,o,r,!0)){u=!0;break}if(u)break}let s=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o;let a=t.push("paragraph_open","p",1);a.map=[e,t.line];let c=t.push("inline","",0);return c.content=s,c.map=[e,t.line],c.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}var KO=[["table",zK,["paragraph","reference"]],["code",$K],["fence",WK,["paragraph","reference","blockquote","list"]],["blockquote",KK,["paragraph","reference","blockquote","list"]],["hr",YK,["paragraph","reference","blockquote","list"]],["list",QK,["paragraph","reference","blockquote"]],["reference",XK],["html_block",JK,["paragraph","reference","blockquote"]],["heading",ZK,["paragraph","reference","blockquote"]],["lheading",eY],["paragraph",tY]];function YO(){this.ruler=new qy;for(let t=0;t<KO.length;t++)this.ruler.push(KO[t][0],KO[t][1],{alt:(KO[t][2]||[]).slice()})}YO.prototype.tokenize=function(t,e,r){let n=this.ruler.getRules(""),i=n.length,o=t.md.options.maxNesting,s=e,a=!1;for(;s<r&&(t.line=s=t.skipEmptyLines(s),!(s>=r||t.sCount[s]<t.blkIndent));){if(t.level>=o){t.line=r;break}let c=t.line,u=!1;for(let l=0;l<i;l++)if(u=n[l](t,s,r,!1),u){if(c>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),s=t.line,s<r&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}};YO.prototype.parse=function(t,e,r,n){if(!t)return;let i=new this.State(t,e,r,n);this.tokenize(i,i.line,i.lineMax)};YO.prototype.State=pEe;var xEe=YO;function o2(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}o2.prototype.pushPending=function(){let t=new Mf("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};o2.prototype.push=function(t,e,r){this.pending&&this.pushPending();let n=new Mf(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};o2.prototype.scanDelims=function(t,e){let r,n,i=!0,o=!0,s=this.posMax,a=this.src.charCodeAt(t),c=t>0?this.src.charCodeAt(t-1):32,u=t;for(;u<s&&this.src.charCodeAt(u)===a;)u++;let l=u-t,d=u<s?this.src.charCodeAt(u):32,p=Uy(c)||Fy(String.fromCharCode(c)),f=Uy(d)||Fy(String.fromCharCode(d)),m=My(c),h=My(d);return h?i=!1:f&&(m||p||(i=!1)),m?o=!1:p&&(h||f||(o=!1)),e?(r=i,n=o):(r=i&&(!o||p),n=o&&(!i||f)),{can_open:r,can_close:n,length:l}};o2.prototype.Token=Mf;var SEe=o2;function UYe(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function rY(t,e){let r=t.pos;for(;r<t.posMax&&!UYe(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}var BYe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function nY(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;let r=t.pos,n=t.posMax;if(r+3>n||t.src.charCodeAt(r)!==58||t.src.charCodeAt(r+1)!==47||t.src.charCodeAt(r+2)!==47)return!1;let i=t.pending.match(BYe);if(!i)return!1;let o=i[1],s=t.md.linkify.matchAtStart(t.src.slice(r-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");let c=t.md.normalizeLink(a);if(!t.md.validateLink(c))return!1;if(!e){t.pending=t.pending.slice(0,-o.length);let u=t.push("link_open","a",1);u.attrs=[["href",c]],u.markup="linkify",u.info="auto";let l=t.push("text","",0);l.content=t.md.normalizeLinkText(a);let d=t.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return t.pos+=a.length-o.length,!0}function iY(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==10)return!1;let n=t.pending.length-1,i=t.posMax;if(!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){let o=n-1;for(;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(r++;r<i&&Jt(t.src.charCodeAt(r));)r++;return t.pos=r,!0}var oY=[];for(let t=0;t<256;t++)oY.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){oY[t.charCodeAt(0)]=1});function sY(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==92||(r++,r>=n))return!1;let i=t.src.charCodeAt(r);if(i===10){for(e||t.push("hardbreak","br",0),r++;r<n&&(i=t.src.charCodeAt(r),!!Jt(i));)r++;return t.pos=r,!0}let o=t.src[r];if(i>=55296&&i<=56319&&r+1<n){let a=t.src.charCodeAt(r+1);a>=56320&&a<=57343&&(o+=t.src[r+1],r++)}let s="\\"+o;if(!e){let a=t.push("text_special","",0);i<256&&oY[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return t.pos=r+1,!0}function aY(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==96)return!1;let i=r;r++;let o=t.posMax;for(;r<o&&t.src.charCodeAt(r)===96;)r++;let s=t.src.slice(i,r),a=s.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=s),t.pos+=a,!0;let c=r,u;for(;(u=t.src.indexOf("`",c))!==-1;){for(c=u+1;c<o&&t.src.charCodeAt(c)===96;)c++;let l=c-u;if(l===a){if(!e){let d=t.push("code_inline","code",0);d.markup=s,d.content=t.src.slice(r,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=c,!0}t.backticks[l]=u}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=a,!0}function qYe(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==126)return!1;let i=t.scanDelims(t.pos,!0),o=i.length,s=String.fromCharCode(n);if(o<2)return!1;let a;o%2&&(a=t.push("text","",0),a.content=s,o--);for(let c=0;c<o;c+=2)a=t.push("text","",0),a.content=s+s,t.delimiters.push({marker:n,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function EEe(t,e){let r,n=[],i=e.length;for(let o=0;o<i;o++){let s=e[o];if(s.marker!==126||s.end===-1)continue;let a=e[s.end];r=t.tokens[s.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=t.tokens[a.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&n.push(a.token-1)}for(;n.length;){let o=n.pop(),s=o+1;for(;s<t.tokens.length&&t.tokens[s].type==="s_close";)s++;s--,o!==s&&(r=t.tokens[s],t.tokens[s]=t.tokens[o],t.tokens[o]=r)}}function HYe(t){let e=t.tokens_meta,r=t.tokens_meta.length;EEe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&EEe(t,e[n].delimiters)}var cY={tokenize:qYe,postProcess:HYe};function jYe(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==95&&n!==42)return!1;let i=t.scanDelims(t.pos,n===42);for(let o=0;o<i.length;o++){let s=t.push("text","",0);s.content=String.fromCharCode(n),t.delimiters.push({marker:n,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function TEe(t,e){let r=e.length;for(let n=r-1;n>=0;n--){let i=e[n];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;let o=e[i.end],s=n>0&&e[n-1].end===i.end+1&&e[n-1].marker===i.marker&&e[n-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),c=t.tokens[i.token];c.type=s?"strong_open":"em_open",c.tag=s?"strong":"em",c.nesting=1,c.markup=s?a+a:a,c.content="";let u=t.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(t.tokens[e[n-1].token].content="",t.tokens[e[i.end+1].token].content="",n--)}}function GYe(t){let e=t.tokens_meta,r=t.tokens_meta.length;TEe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&TEe(t,e[n].delimiters)}var uY={tokenize:jYe,postProcess:GYe};function lY(t,e){let r,n,i,o,s="",a="",c=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;let l=t.pos,d=t.posMax,p=t.pos+1,f=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(f<0)return!1;let m=f+1;if(m<d&&t.src.charCodeAt(m)===40){for(u=!1,m++;m<d&&(r=t.src.charCodeAt(m),!(!Jt(r)&&r!==10));m++);if(m>=d)return!1;if(c=m,i=t.md.helpers.parseLinkDestination(t.src,m,t.posMax),i.ok){for(s=t.md.normalizeLink(i.str),t.md.validateLink(s)?m=i.pos:s="",c=m;m<d&&(r=t.src.charCodeAt(m),!(!Jt(r)&&r!==10));m++);if(i=t.md.helpers.parseLinkTitle(t.src,m,t.posMax),m<d&&c!==m&&i.ok)for(a=i.str,m=i.pos;m<d&&(r=t.src.charCodeAt(m),!(!Jt(r)&&r!==10));m++);}(m>=d||t.src.charCodeAt(m)!==41)&&(u=!0),m++}if(u){if(typeof t.env.references>"u")return!1;if(m<d&&t.src.charCodeAt(m)===91?(c=m+1,m=t.md.helpers.parseLinkLabel(t,m),m>=0?n=t.src.slice(c,m++):m=f+1):m=f+1,n||(n=t.src.slice(p,f)),o=t.env.references[By(n)],!o)return t.pos=l,!1;s=o.href,a=o.title}if(!e){t.pos=p,t.posMax=f;let h=t.push("link_open","a",1),g=[["href",s]];h.attrs=g,a&&g.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=m,t.posMax=d,!0}function dY(t,e){let r,n,i,o,s,a,c,u,l="",d=t.pos,p=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;let f=t.pos+2,m=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(m<0)return!1;if(o=m+1,o<p&&t.src.charCodeAt(o)===40){for(o++;o<p&&(r=t.src.charCodeAt(o),!(!Jt(r)&&r!==10));o++);if(o>=p)return!1;for(u=o,a=t.md.helpers.parseLinkDestination(t.src,o,t.posMax),a.ok&&(l=t.md.normalizeLink(a.str),t.md.validateLink(l)?o=a.pos:l=""),u=o;o<p&&(r=t.src.charCodeAt(o),!(!Jt(r)&&r!==10));o++);if(a=t.md.helpers.parseLinkTitle(t.src,o,t.posMax),o<p&&u!==o&&a.ok)for(c=a.str,o=a.pos;o<p&&(r=t.src.charCodeAt(o),!(!Jt(r)&&r!==10));o++);else c="";if(o>=p||t.src.charCodeAt(o)!==41)return t.pos=d,!1;o++}else{if(typeof t.env.references>"u")return!1;if(o<p&&t.src.charCodeAt(o)===91?(u=o+1,o=t.md.helpers.parseLinkLabel(t,o),o>=0?i=t.src.slice(u,o++):o=m+1):o=m+1,i||(i=t.src.slice(f,m)),s=t.env.references[By(i)],!s)return t.pos=d,!1;l=s.href,c=s.title}if(!e){n=t.src.slice(f,m);let h=[];t.md.inline.parse(n,t.md,t.env,h);let g=t.push("image","img",0),v=[["src",l],["alt",""]];g.attrs=v,g.children=h,g.content=n,c&&v.push(["title",c])}return t.pos=o,t.posMax=p,!0}var VYe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,zYe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function pY(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==60)return!1;let n=t.pos,i=t.posMax;for(;;){if(++r>=i)return!1;let s=t.src.charCodeAt(r);if(s===60)return!1;if(s===62)break}let o=t.src.slice(n+1,r);if(zYe.test(o)){let s=t.md.normalizeLink(o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let c=t.push("text","",0);c.content=t.md.normalizeLinkText(o);let u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}if(VYe.test(o)){let s=t.md.normalizeLink("mailto:"+o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let c=t.push("text","",0);c.content=t.md.normalizeLinkText(o);let u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}return!1}function $Ye(t){return/^<a[>\s]/i.test(t)}function WYe(t){return/^<\/a\s*>/i.test(t)}function KYe(t){let e=t|32;return e>=97&&e<=122}function fY(t,e){if(!t.md.options.html)return!1;let r=t.posMax,n=t.pos;if(t.src.charCodeAt(n)!==60||n+2>=r)return!1;let i=t.src.charCodeAt(n+1);if(i!==33&&i!==63&&i!==47&&!KYe(i))return!1;let o=t.src.slice(n).match(bEe);if(!o)return!1;if(!e){let s=t.push("html_inline","",0);s.content=o[0],$Ye(s.content)&&t.linkLevel++,WYe(s.content)&&t.linkLevel--}return t.pos+=o[0].length,!0}var YYe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,QYe=/^&([a-z][a-z0-9]{1,31});/i;function mY(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==38||r+1>=n)return!1;if(t.src.charCodeAt(r+1)===35){let o=t.src.slice(r).match(YYe);if(o){if(!e){let s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=t.push("text_special","",0);a.content=$O(s)?i2(s):i2(65533),a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}else{let o=t.src.slice(r).match(QYe);if(o){let s=Sg(o[0]);if(s!==o[0]){if(!e){let a=t.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}}return!1}function IEe(t){let e={},r=t.length;if(!r)return;let n=0,i=-2,o=[];for(let s=0;s<r;s++){let a=t[s];if(o.push(0),(t[n].marker!==a.marker||i!==a.token-1)&&(n=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);let c=e[a.marker][(a.open?3:0)+a.length%3],u=n-o[n]-1,l=u;for(;u>c;u-=o[u]+1){let d=t[u];if(d.marker===a.marker&&d.open&&d.end<0){let p=!1;if((d.close||a.open)&&(d.length+a.length)%3===0&&(d.length%3!==0||a.length%3!==0)&&(p=!0),!p){let f=u>0&&!t[u-1].open?o[u-1]+1:0;o[s]=s-u+f,o[u]=f,a.open=!1,d.end=s,d.close=!1,l=-1,i=-2;break}}}l!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=l)}}function hY(t){let e=t.tokens_meta,r=t.tokens_meta.length;IEe(t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&IEe(e[n].delimiters)}function gY(t){let e,r,n=0,i=t.tokens,o=t.tokens.length;for(e=r=0;e<o;e++)i[e].nesting<0&&n--,i[e].level=n,i[e].nesting>0&&n++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==r&&(i[r]=i[e]),r++);e!==r&&(i.length=r)}var vY=[["text",rY],["linkify",nY],["newline",iY],["escape",sY],["backticks",aY],["strikethrough",cY.tokenize],["emphasis",uY.tokenize],["link",lY],["image",dY],["autolink",pY],["html_inline",fY],["entity",mY]],yY=[["balance_pairs",hY],["strikethrough",cY.postProcess],["emphasis",uY.postProcess],["fragments_join",gY]];function s2(){this.ruler=new qy;for(let t=0;t<vY.length;t++)this.ruler.push(vY[t][0],vY[t][1]);this.ruler2=new qy;for(let t=0;t<yY.length;t++)this.ruler2.push(yY[t][0],yY[t][1])}s2.prototype.skipToken=function(t){let e=t.pos,r=this.ruler.getRules(""),n=r.length,i=t.md.options.maxNesting,o=t.cache;if(typeof o[e]<"u"){t.pos=o[e];return}let s=!1;if(t.level<i){for(let a=0;a<n;a++)if(t.level++,s=r[a](t,!0),t.level--,s){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;s||t.pos++,o[e]=t.pos};s2.prototype.tokenize=function(t){let e=this.ruler.getRules(""),r=e.length,n=t.posMax,i=t.md.options.maxNesting;for(;t.pos<n;){let o=t.pos,s=!1;if(t.level<i){for(let a=0;a<r;a++)if(s=e[a](t,!1),s){if(o>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(t.pos>=n)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};s2.prototype.parse=function(t,e,r,n){let i=new this.State(t,e,r,n);this.tokenize(i);let o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};s2.prototype.State=SEe;var CEe=s2;function wEe(t){let e={};t=t||{},e.src_Any=qO.source,e.src_Cc=HO.source,e.src_Z=jO.source,e.src_P=uS.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");let r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function bY(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function XO(t){return Object.prototype.toString.call(t)}function XYe(t){return XO(t)==="[object String]"}function JYe(t){return XO(t)==="[object Object]"}function ZYe(t){return XO(t)==="[object RegExp]"}function REe(t){return XO(t)==="[object Function]"}function eQe(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var PEe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function tQe(t){return Object.keys(t||{}).reduce(function(e,r){return e||PEe.hasOwnProperty(r)},!1)}var rQe={"http:":{validate:function(t,e,r){let n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){let n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){let n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},nQe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",iQe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function oQe(t){t.__index__=-1,t.__text_cache__=""}function sQe(t){return function(e,r){let n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function AEe(){return function(t,e){e.normalize(t)}}function QO(t){let e=t.re=wEe(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(nQe),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");let i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){let c=t.__schemas__[a];if(c===null)return;let u={validate:null,link:null};if(t.__compiled__[a]=u,JYe(c)){ZYe(c.validate)?u.validate=sQe(c.validate):REe(c.validate)?u.validate=c.validate:o(a,c),REe(c.normalize)?u.normalize=c.normalize:c.normalize?o(a,c):u.normalize=AEe();return}if(XYe(c)){i.push(a);return}o(a,c)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:AEe()};let s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(eQe).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),oQe(t)}function aQe(t,e){let r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function _Y(t,e){let r=new aQe(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function gc(t,e){if(!(this instanceof gc))return new gc(t,e);e||tQe(t)&&(e=t,t={}),this.__opts__=bY({},PEe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=bY({},rQe,t),this.__compiled__={},this.__tlds__=iQe,this.__tlds_replaced__=!1,this.re={},QO(this)}gc.prototype.add=function(e,r){return this.__schemas__[e]=r,QO(this),this};gc.prototype.set=function(e){return this.__opts__=bY(this.__opts__,e),this};gc.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let r,n,i,o,s,a,c,u,l;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=e.indexOf("@"),l>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};gc.prototype.pretest=function(e){return this.re.pretest.test(e)};gc.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};gc.prototype.match=function(e){let r=[],n=0;this.__index__>=0&&this.__text_cache__===e&&(r.push(_Y(this,n)),n=this.__last_index__);let i=n?e.slice(n):e;for(;this.test(i);)r.push(_Y(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};gc.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let r=this.re.schema_at_start.exec(e);if(!r)return null;let n=this.testSchemaAt(e,r[2],r[0].length);return n?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n,_Y(this,0)):null};gc.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),QO(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,QO(this),this)};gc.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};gc.prototype.onCompile=function(){};var kEe=gc;var NEe="-",cQe=/^xn--/,uQe=/[^\0-\x7F]/,lQe=/[\x2E\u3002\uFF0E\uFF61]/g,dQe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},xY=35,Gd=Math.floor,SY=String.fromCharCode;function Tg(t){throw new RangeError(dQe[t])}function pQe(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function LEe(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(lQe,".");let i=t.split("."),o=pQe(i,e).join(".");return n+o}function OEe(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let o=t.charCodeAt(r++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var fQe=t=>String.fromCodePoint(...t),mQe=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},DEe=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},MEe=function(t,e,r){let n=0;for(t=r?Gd(t/700):t>>1,t+=Gd(t/e);t>xY*26>>1;n+=36)t=Gd(t/xY);return Gd(n+(xY+1)*t/(t+38))},FEe=function(t){let e=[],r=t.length,n=0,i=128,o=72,s=t.lastIndexOf(NEe);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&Tg("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<r;){let c=n;for(let l=1,d=36;;d+=36){a>=r&&Tg("invalid-input");let p=mQe(t.charCodeAt(a++));p>=36&&Tg("invalid-input"),p>Gd((2147483647-n)/l)&&Tg("overflow"),n+=p*l;let f=d<=o?1:d>=o+26?26:d-o;if(p<f)break;let m=36-f;l>Gd(2147483647/m)&&Tg("overflow"),l*=m}let u=e.length+1;o=MEe(n-c,u,c==0),Gd(n/u)>2147483647-i&&Tg("overflow"),i+=Gd(n/u),n%=u,e.splice(n++,0,i)}return String.fromCodePoint(...e)},UEe=function(t){let e=[];t=OEe(t);let r=t.length,n=128,i=0,o=72;for(let c of t)c<128&&e.push(SY(c));let s=e.length,a=s;for(s&&e.push(NEe);a<r;){let c=2147483647;for(let l of t)l>=n&&l<c&&(c=l);let u=a+1;c-n>Gd((2147483647-i)/u)&&Tg("overflow"),i+=(c-n)*u,n=c;for(let l of t)if(l<n&&++i>2147483647&&Tg("overflow"),l===n){let d=i;for(let p=36;;p+=36){let f=p<=o?1:p>=o+26?26:p-o;if(d<f)break;let m=d-f,h=36-f;e.push(SY(DEe(f+m%h,0))),d=Gd(m/h)}e.push(SY(DEe(d,0))),o=MEe(i,u,a===s),i=0,++a}++i,++n}return e.join("")},hQe=function(t){return LEe(t,function(e){return cQe.test(e)?FEe(e.slice(4).toLowerCase()):e})},gQe=function(t){return LEe(t,function(e){return uQe.test(e)?"xn--"+UEe(e):e})},vQe={version:"2.3.1",ucs2:{decode:OEe,encode:fQe},decode:FEe,encode:UEe,toASCII:gQe,toUnicode:hQe};var EY=vQe;var BEe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}};var qEe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}};var HEe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}};var yQe={default:BEe,zero:qEe,commonmark:HEe},bQe=/^(vbscript|javascript|file|data):/,_Qe=/^data:image\/(gif|png|jpeg|webp);/;function xQe(t){let e=t.trim().toLowerCase();return bQe.test(e)?_Qe.test(e):!0}var jEe=["http:","https:","mailto:"];function SQe(t){let e=n2(t,!0);if(e.hostname&&(!e.protocol||jEe.indexOf(e.protocol)>=0))try{e.hostname=EY.toASCII(e.hostname)}catch{}return FO(cS(e))}function EQe(t){let e=n2(t,!0);if(e.hostname&&(!e.protocol||jEe.indexOf(e.protocol)>=0))try{e.hostname=EY.toUnicode(e.hostname)}catch{}return r2(cS(e),r2.defaultChars+"%")}function au(t,e){if(!(this instanceof au))return new au(t,e);e||zO(t)||(e=t||{},t="default"),this.inline=new CEe,this.block=new xEe,this.core=new dEe,this.renderer=new oEe,this.linkify=new kEe,this.validateLink=xQe,this.normalizeLink=SQe,this.normalizeLinkText=EQe,this.utils=PK,this.helpers=lS({},LK),this.options={},this.configure(t),e&&this.set(e)}au.prototype.set=function(t){return lS(this.options,t),this};au.prototype.configure=function(t){let e=this;if(zO(t)){let r=t;if(t=yQe[r],!t)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};au.prototype.enable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};au.prototype.disable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};au.prototype.use=function(t){let e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};au.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");let r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};au.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};au.prototype.parseInline=function(t,e){let r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};au.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var TY=au;function GEe(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}function Ii(t,e,r=!0){let n=e.matchAll(/^\s*(```+)/gm),i=Math.max(3,...Array.from(n,s=>s[1].length+1)),o="`".repeat(i);return`${o}${JO(t)}
${r?e.trim():e}
${o}`}function JO(t){switch(t.trim().toLowerCase()){case"typescriptreact":return"tsx";case"javascriptreact":return"jsx";default:return t}}function ZO(t){let e=Xa(t).toLowerCase(),r=Object.keys(FT).find(n=>FT.get(n)?.extensions?.includes(e))||e.replace(/^\./,"");return JO(r)}function As(t){let e=[],n=new TY().parse(t,{});for(let i of VEe(n))i.map&&i.type==="fence"&&e.push({startMarkup:i.markup,code:i.content.replace(/\n$/,""),language:i.info.trim(),startLine:i.map[0],endLine:i.map[1]});return e}function*VEe(t){for(let e of t)e.children&&(yield*VEe(e.children)),yield e}var KEe=W(WEe()),YEe=require("util");var mS=class{constructor(e,r){this.baseUri=e;this.pattern=r}get base(){throw new Error("Not implemented")}};var DQe=1e5,NQe=1*1024*1024,LQe=new Set(["jpg","jpeg","jpe","png","gif","bmp","tif","tiff","tga","ico","webp","svg","eps","heif","heic","pdf","raw","mp4","m4v","mkv","webm","mov","avi","wmv","flv","mp3","wav","m4a","flac","ogg","wma","weba","aac","7z","bz2","gz","gz","rar","tar","xz","zip","vsix","db","bin","dat","hex","map","wasm","pyc","pdb","sym","git"]),OQe=["node_modules","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],MQe=[".DS_Store","Thumbs.db","package-lock.json","yarn.lock"],FQe=[Hr.vscode,Hr.vscodeUserData,"output",Hr.inMemory,Hr.internal,"git"];function Hy(t,e){if(FQe.includes(t.scheme)||e&&![Hr.file,Hr.untitled].includes(t.scheme)&&!e.getWorkspaceFolders().some(i=>t.scheme===i.scheme))return!1;let r=Xa(t).replace(/\./,"").toLowerCase();return!(LQe.has(r)||MQe.includes(xc(t).toLowerCase())||t.fsPath.toLowerCase().split(/[/\\]/g).some(i=>OQe.includes(i)))}async function UQe(t,e=DQe,r){let n=t.get(rt),i=t.get(ya),o=t.get(Oe);if(await o.init(),r?.isCancellationRequested)return[];let s=new Un;for(let a of n.getWorkspaceFolders()??[]){if(s.size>=e)break;let c=await i.findFilesWithDefaultExcludes(new mS(a,"**/*"),e-s.size,r);if(r.isCancellationRequested)return[];for(let u of c){if(s.size>=e||r.isCancellationRequested)break;Hy(u,n)&&!await o.isCopilotIgnored(u)&&s.set(u)}}return s.keys()}var t5=class{constructor(e,r){this._uri=e;this._chunkingService=r;this._isDisposed=!1;this._disposedCts=new rne}dispose(){this._isDisposed=!0,this._disposedCts.cancel(),this._disposedCts.dispose()}get uri(){return this._uri}async getBasicChunks(e){return this._basicChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:this._chunkingService.chunkFileText(this._uri,r,{shouldSemanticChunk:!1},this._disposedCts.token)),await qb(this._basicChunks,e)??[]}async getSemanticChunks(e){return this._chunkingService.canSemanticallyChunk(this.uri)?(this._semanticChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:this._chunkingService.chunkFileText(this._uri,r,{shouldSemanticChunk:!0},this._disposedCts.token)),await qb(this._semanticChunks,e)??[]):this.getBasicChunks(e)}},RY=class extends t5{constructor(r,n,i){super(r,n);this._fs=i}async getText(r){return this._text??=this._fs.readFile(this.uri).then(async n=>this._isDisposed||n.byteLength>=NQe||await(0,KEe.isBinaryFile)(Buffer.from(n))||this._isDisposed?"":new YEe.TextDecoder().decode(n),n=>""),await qb(this._text,r)??""}},r5=class extends t5{constructor(r,n){super(r.uri,n);this._textDocument=r}async getText(r){return this._textDocument.getText()}},cu=re("workspaceChunkIndex"),n5=class extends Ur{constructor(r){super();this._textDocumentFiles=new Un;this._fsFiles=new Un;this._onDidCreateFile=this._register(new Br);this.onDidCreateFile=this._onDidCreateFile.event;this._onDidChangeFile=this._register(new Br);this.onDidChangeFile=this._onDidChangeFile.event;this._onDidDeleteFile=this._register(new Br);this.onDidDeleteFile=this._onDidDeleteFile.event;this._accessor=r,this._fileSystem=r.get(gi),this._chunkingService=r.get(Za)}get fileSystemFileCount(){return this._fsFiles.size}dispose(){super.dispose(),Pb(this._fsFiles.values()),this._fsFiles.clear(),Pb(this._textDocumentFiles.values()),this._textDocumentFiles.clear()}get(r){return this._textDocumentFiles.get(r)||this._fsFiles.get(r)}*values(){let r=new Un;for(let[n,i]of this._textDocumentFiles.entries())yield i,r.set(n);for(let[n,i]of this._fsFiles.entries())r.has(n)||(r.set(n),yield i)}registerListeners(){let r=this._accessor.get(rt),n=o=>{if(!Hy(o.uri,r))return;let s=this._textDocumentFiles.get(o.uri),a=this._fsFiles.get(o.uri);s&&s.dispose(),this._textDocumentFiles.set(o.uri,new r5(o,this._chunkingService)),!s&&!a?this._onDidCreateFile.fire(o.uri):this._onDidChangeFile.fire(o.uri)};this._register(r.onDidOpenTextDocument(n)),this._register(r.onDidChangeTextDocument(o=>n(o.document))),this._register(r.onDidCloseTextDocument(o=>{let s=this._textDocumentFiles.get(o.uri);if(!s)return;this._textDocumentFiles.delete(o.uri),s.dispose(),this._fsFiles.get(o.uri)?this._onDidChangeFile.fire(o.uri):this._onDidDeleteFile.fire(o.uri)}));let i=this._register(this._fileSystem.createFileSystemWatcher("**/*"));this._register(i.onDidChange(o=>{if(!Hy(o,r))return;let s=this._fsFiles.has(o);this.createOrUpdateFsEntry(o),s?this._onDidChangeFile.fire(o):this._onDidCreateFile.fire(o)})),this._register(i.onDidCreate(o=>{Hy(o,r)&&(this._fsFiles.has(o)||(this.createOrUpdateFsEntry(o),this._onDidCreateFile.fire(o)))})),this._register(i.onDidDelete(o=>{let s=this._fsFiles.get(o);s&&(s.dispose(),this._fsFiles.delete(o),this._onDidDeleteFile.fire(o))}))}initialize(){return this._initializedWorkspacePromise??=(async()=>{this.registerListeners();let r=this._accessor.get(rt);await r.ensureWorkspaceIsFullyLoaded();for(let i of r.textDocuments)Hy(i.uri,r)&&this._textDocumentFiles.set(i.uri,new r5(i,this._chunkingService));let n=await UQe(this._accessor,void 0,qr.None);for(let i of n)this.createOrUpdateFsEntry(i)})(),this._initializedWorkspacePromise}createOrUpdateFsEntry(r){let n=this._fsFiles.get(r);n&&n.dispose();let i=new RY(r,this._chunkingService,this._fileSystem);this._fsFiles.set(r,i)}};var BQe="1.0.8",wg=re("IWorkspaceChunkEmbeddingsIndex"),Ff=class{constructor(e){this._accessor=e;this._embeddingsMemoryCache=new Map;this.shouldSearchTimeout=!0;this._embeddingsComputer=e.get(Bs),this._workspaceIndex=e.get(cu),this._embeddingsStorageCache=new t_(e,2,"workspaceEmbeddingsCache",BQe),this._logger=e.get(ce).getLogger("WorkspaceChunkEmbeddingsIndex"),this.loadCacheFromStorage()}static{this._MAX_EMBEDDINGS_COMPUTATION_TIME=1e4}static{this._MAX_CHUNK_LENGTH=2e3}get fileSystemFileCount(){return this._workspaceIndex.fileSystemFileCount}workspaceEmbeddingsInitialized(){return this._initializedWorkspacePromise??=this._workspaceIndex.initialize(),this._initializedWorkspacePromise}async triggerIndexing(e){let r=await this.getChunksToSearch(e);if(e.isCancellationRequested)return;let n=await this.getEmbeddings(r.map(i=>this.chunkToIndexString(i)),e);this._logger.debug(`Indexed ${n.length} chunks`)}async searchAllChunks(e,r,n){let i=await this.getChunksToSearch(n);return n.isCancellationRequested?[]:this.searchChunks(i,e,r,n)}async searchChunks(e,r,n,i){if(!e.length)return[];let o=[r,...e.map(l=>this.chunkToIndexString(l))],s=this.shouldSearchTimeout?await N0(this.getEmbeddings(o,i),Ff._MAX_EMBEDDINGS_COMPUTATION_TIME):await this.getEmbeddings(o,i);if(i.isCancellationRequested)return[];if(!s)throw new Error("Timeout computing embeddings");if(s.length<1)throw new Error("Invalid response");let[a,...c]=s,u=c.map((l,d)=>[e[d],l]);return _ne(a,u,n)}async getChunksToSearch(e){let r=(await Promise.all(Array.from(this._workspaceIndex.values(),n=>n.getSemanticChunks(e)))).flat();return e.isCancellationRequested?[]:r.filter(n=>n.text.length<Ff._MAX_CHUNK_LENGTH)}chunkToIndexString(e){let r=this._accessor.get(rt),n=bg(r,e.file);return qQe(e,n)}async loadCacheFromStorage(){let e=await this._embeddingsStorageCache.getCache();e||await this._embeddingsStorageCache.clearCache(),this._embeddingsMemoryCache.clear();for(let[r,n]of Object.entries(e??{}))this._embeddingsMemoryCache.set(r,n)}async getEmbeddings(e,r){let n=new Array(e.length),i=[];for(let[s,a]of e.entries()){let c=this._embeddingsMemoryCache.get(a);c?n[s]=c:i.push({index:s,value:a})}if(i.length===0)return n;let o=await this.computeEmbeddingsWithRetry(i.map(s=>s.value),r);for(let s=0;s<i.length;s++){let a=i[s],c=o[s];n[a.index]=c,this._embeddingsMemoryCache.set(a.value,c)}return n}async computeEmbeddingsWithRetry(e,r){let i=0,o;for(;i<3;)try{if(o=await this._embeddingsComputer.computeEmbeddings(e,{parallelism:2},r),!o)throw new Error("Failed to compute embeddings");return o}catch(s){if(i++,i===3)throw s;if(r.isCancellationRequested)throw new Error("Cancelled computing embeddings");this._logger.warn(`Error computing embeddings. Retrying in ${i} seconds. Error: ${s}`),await new Promise(a=>setTimeout(a,1e3*i))}throw new Error("Failed to compute embeddings")}};Ff=we([de(0,Ct)],Ff);function qQe(t,e){return`File: \`${e}\`
${Ii(ZO(t.file),t.text)}`}var zY=W(lr());var hS=class extends Error{constructor(r,n){super(n);this.repo=r}},c2=class extends hS{constructor(){super(...arguments);this.name="ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG"}},AY=class extends hS{constructor(){super(...arguments);this.name="ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE"}},PY=class extends hS{constructor(){super(...arguments);this.name="ERROR_TYPE_NOT_INDEXED"}},kY=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_MAX_RETRIES_EXCEEDED"}},DY=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_NO_ACCESS_TO_ENDPOINT"}};function QEe({error:t,message:e,repo:r}){switch(t){case"ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG":return new c2(r,e);case"ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE":return new AY(r,e);case"ERROR_TYPE_NOT_INDEXED":return new PY(r,e);default:return new hS(r,e)}}function NY({error:t,message:e}){switch(t){case"ERROR_TYPE_MAX_RETRIES_EXCEEDED":return new kY(e);case"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT":return new DY(e);default:return new Error(e)}}var GY=W(gTe());function c5(t,e){return typeof e=="string"?GY.default.isMatch(t.fsPath,e,{dot:!0,windows:process.platform==="win32"}):GY.default.isMatch(t.fsPath,e.pattern,{dot:!0,windows:process.platform==="win32"})}function vTe(t,e){return e.exclude?.some(r=>c5(t,r))?!1:e.include?e.include.some(r=>c5(t,r)):!0}var u5=re("codeSearchClient"),l5=re("docsSearchClient");var Rg=class extends Ur{constructor(r){super();this._accessor=r}async toSemanticChunks(r,n){let i=this._accessor.get(cu),o=this._accessor.get(Za),s=new Un;for(let c of r){let u=s.get(c.file);u?u.push(c):s.set(c.file,[c])}let a=await Promise.all(Array.from(s,async([c,u])=>{let l=i.get(c);if(l&&o.canSemanticallyChunk(c)){let d=await l.getSemanticChunks(n);if(n.isCancellationRequested)return[];let p=new Set;for(let f of u){let m=!1;for(let h of d)h.range.intersectRanges(f.range)&&(p.add(h),m=!0);m||p.add(f)}return Array.from(p)}else return u}));return Array.from(new Set(a.flat()))}};var jy=class extends Rg{constructor(r){super(r);this.id="codesearch";this.timeout=5e3;this._codeSearchClient=r.get(u5),this._workspaceChunkIndex=r.get(cu),this._embeddingsIndex=r.get(wg),this._logger=r.get(ce).getLogger("CodeSearchChunkSearch")}async searchFileChunks(r,n,i,o){if(o.isCancellationRequested)return[];if(await ql(this._logger,"initialize",()=>this.initialized()),o.isCancellationRequested)return[];let s=await this.getSimilarFilesFromCodeSearch(r);if(!s||o.isCancellationRequested)return[];let a=await ql(this._logger,"toSemanticChunks",()=>this.toSemanticChunks(s,o));return o.isCancellationRequested?[]:i.include?a.filter(c=>vTe(c.file,i.include)):a}async isAvailable(){let r=this._accessor.get(Pe).getConfig(Ne.WorkspaceCodeSearchEnabled);return!(r===!1||r===void 0&&await this._accessor.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.useCodeSearch",!0)!==!0)}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}async getSimilarFilesFromCodeSearch(r){let n=this._accessor.get(rt).getWorkspaceFolders(),i=this._accessor.safeGet(vi)?.repositories;if(!i){if(n.length)throw new Error("No repo contexts available for workspace folders");return}let o=[],s=new Map;for(let u=0;u<i.length;u++){let l=i[u];if(!l)continue;let d=CP(l);d&&(o.push(d),s.set(d,n[u]))}if(!o.length)throw new Error("No repos to search through");let a=await this._codeSearchClient.search(r.fullText,{repo:o});return(await this.processResults(s,[a])).flat().sort((u,l)=>l.score-u.score)}async processResults(r,n){let i=[];for(let o of n){if(o.errors.length){let s=!0;for(let a of r.keys()){let c=o.errors.filter(u=>u.repo===a);if(c){this._logger.debug(`[${a}] Errors when searching codesearch: ${c.map(FR)}`);continue}s=!1}if(s)throw o.errors.length===1?o.errors[0]:new AggregateError(o.errors)}for(let s of o.results){let a=r.get(s.repoOwner+"/"+s.repoName);if(!a){this._logger.error("Could not find workspace folder for repo",s.repoOwner+"/"+s.repoName);continue}let c=this._workspaceChunkIndex.get(gt.joinPath(a,s.path));c&&(await this._accessor.get(Oe).isCopilotIgnored(c.uri)||i.push({file:c.uri,score:s.score,text:s.contents,sources:[],range:new Li(s.range.start,0,s.range.end+1,0)}))}}return i}};we([ti(r=>r._logger)],jy.prototype,"searchFileChunks",1),we([ti(r=>r._logger)],jy.prototype,"getSimilarFilesFromCodeSearch",1);var p5=class p5 extends Rg{constructor(r,n=!1){super(r);this.id="ada";this.timeout=5e3;this._embeddingsIndex=r.get(wg),this._logger=r.get(ce).getLogger("EmbeddingsCacheChunkSearch"),n&&(this._embeddingsIndex.shouldSearchTimeout=!1)}static{this.FILE_CAP=200}async searchFileChunks(r,n,i,o){return await this.initialized(),o.isCancellationRequested?[]:(this._logger.debug("Fetching related workspace chunks in repository..."),await this._embeddingsIndex.searchAllChunks(r.fullText,n,o))}async isAvailable(){return this._isAvailable===void 0&&(this._isAvailable=this.doIsAvailable()),this._isAvailable}async doIsAvailable(){return await this.initialized(),this._embeddingsIndex.fileSystemFileCount<p5.FILE_CAP&&this.triggerIndexing(),!1}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}triggerIndexing(){this._initializedWorkspacePromise||(this._logger.debug("Starting indexing"),this._initializedWorkspacePromise=this._embeddingsIndex.triggerIndexing(qr.None).then(()=>{this._isAvailable=Promise.resolve(!0),this._logger.debug("Workspace Chunk Embeddings Index initialized.")}).catch(r=>{this._logger.warn(`Failed to index workspace: ${r}`),this._initializedWorkspacePromise=void 0}))}};we([ti(r=>r._logger)],p5.prototype,"searchFileChunks",1);var d5=p5;var yTe=W(require("path"));function d2(t,e){if(!t)return t;if(Array.isArray(t))return t.map(r=>d2(r,e));if(typeof t=="object"){let r=e(t);if(r)return r;let n={};for(let i in t)n[i]=d2(t[i],e);return n}return t}var _Xe=yTe.default.join(__dirname,"tfidfWorker.js"),vS=class extends Ur{constructor(r){super();this.id="tfidf";this.timeout=500;this._tfIdfWorker=new Ms(()=>new wm(_Xe,{name:"TfIdf Worker"})),this._logger=r.get(ce).getLogger("TfidfChunkSearch");let n=i=>{let o=this._workspaceIndex.get(i);o&&this.addOrUpdateTfidfEntries([o])};this._workspaceIndex=r.get(cu),this._register(this._workspaceIndex.onDidCreateFile(n)),this._register(this._workspaceIndex.onDidChangeFile(n)),this._register(this._workspaceIndex.onDidDeleteFile(i=>{this._tfIdfWorker.value.proxy.delete(i)}))}dispose(){super.dispose(),this._tfIdfWorker.hasValue&&this._tfIdfWorker.value.terminate()}initialize(){return this._initializePromise??=this._initializeWorkspaceFiles(),this._initializePromise}async searchFileChunks(r,n,i,o){if(await qb(this.initialize(),o),o.isCancellationRequested)return[];let s=await ql(this._logger,"search",()=>this._tfIdfWorker.value.proxy.search([r.keywords.length?r.keywords.join(", "):r.fullText],{maxResults:n,include:i.include,maxSpread:.75}));return SXe(s)}async isAvailable(){return await this.initialize(),!0}async _initializeWorkspaceFiles(){await ql(this._logger,"initialize workspaceIndex",()=>this._workspaceIndex.initialize()),await ql(this._logger,"initialize tfidf",()=>this.addOrUpdateTfidfEntries(this._workspaceIndex.values()))}async addOrUpdateTfidfEntries(r){let n=new Bb(20);this._tfIdfWorker.value.proxy.addOrUpdate(xXe(await Promise.all(Array.from(r,i=>n.queue(async()=>({uri:i.uri,content:await i.getText(qr.None)})))))),n.dispose()}};we([ti(r=>r._logger)],vS.prototype,"initialize",1),we([ti(r=>r._logger)],vS.prototype,"searchFileChunks",1);function xXe(t){return d2(t,e=>{if(gt.isUri(e))return{$mid:"uri",...e};if(e instanceof Li)return{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn}})}function SXe(t){return d2(t,e=>{if(e.$mid==="range")return new Li(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);if(e.$mid==="uri")return gt.revive(e)})}var p2=class extends Rg{constructor(r){super(r);this.id="tfidf";this.timeout=500;this._tfidf=this._register(new vS(r)),this._logger=r.get(ce).getLogger("TfIdfWithSemanticChunkSearch")}async searchFileChunks(r,n,i,o){this._logger.debug("Performing full workspace search for chunks...");let a=await this._tfidf.searchFileChunks(r,n*2,i,o);if(o.isCancellationRequested||!a.length)return[];let c=await ql(this._logger,"toSemanticChunks",()=>this.toSemanticChunks(a,o));return o.isCancellationRequested||!c.length?[]:c}isAvailable(){return this._tfidf.isAvailable()}};we([ti(r=>r._logger)],p2.prototype,"searchFileChunks",1);var Ag=re("IWorkspaceChunkSearch"),qf=class{constructor(e,r){this._forcedChunkSearchStrategy=e;this._accessor=r;this._workspaceChunkEmbeddingsIndex=this._accessor.get(wg);this._logger=this._accessor.get(ce).getLogger("WorkspaceChunkSearch");this._inTests=!!this._forcedChunkSearchStrategy,this._embeddingsCacheChunkSearch=new d5(r,this._inTests),this._codeSearchChunkSearch=new jy(r),this._tfIdfWithSemanticChunkSearch=new p2(r)}dispose(){this._embeddingsCacheChunkSearch.dispose(),this._codeSearchChunkSearch.dispose(),this._tfIdfWithSemanticChunkSearch.dispose()}async triggerIndexing(){await Promise.allSettled([this._tfIdfWithSemanticChunkSearch.isAvailable(),this._embeddingsCacheChunkSearch.isAvailable()])}async searchFileChunks(e,r,n,i,o,s){let a=await this.getStrategies();if(o.isCancellationRequested)return[];let c=new Array,u=new Array;for(let m=0;m<a.length;m++)c.push(new Lb),u.push(a[m].searchFileChunks(r,n,i,c[m].token));try{await Promise.any(u)}catch(m){let h=m;throw h.errors.length===1?h.errors[0]:m}if(o.isCancellationRequested)return[];a.forEach((m,h)=>N0(u[h],a[h].timeout,()=>{c[h].cancel(),this._logger.warn(`WorkspaceChunkSearch strategy ${a[h].id} timed out`)}));let l=await Promise.allSettled(u);if(o.isCancellationRequested)return[];let d=new Array,p;for(let m=0;m<l.length;m++){let h=l[m],g=a[m];if(h.status==="fulfilled"){p||(p=g.id),d.push(...h.value);continue}else this._logger.debug(`Strategy, ${g.id}, failed with the following error: ${FR(h.reason)}`);if(h.reason instanceof c2&&g instanceof jy)try{if(await this._accessor.get(Rt).getPermissiveGitHubToken({silent:!0}))continue;if(await this._accessor.get(Rt).getPermissiveGitHubToken({forceNewSession:{detail:zY.t("To show you more relevant Copilot Chat results, we need permission to read the contents of your repository on GitHub."),learnMore:gt.parse("https://aka.ms/copilotRepoScope")}})){let b=await g.searchFileChunks(r,n,i,o);p=g.id,d.unshift(...b)}}catch{}}this.reportTopSuccessfulFlow(p);let f=this._accessor.get(Oe);if(d=Pr(await Promise.all(d.map(async m=>await f.isCopilotIgnored(m.file)?null:m))),this._inTests&&!d.length)throw new Error("No chunks returned");return this.rerankChunks(e,r,d,n,o,s)}async rerankChunks(e,r,n,i,o,s){return s?.(zY.t("Filtering to most relevant information")),this._accessor.get(Pe).getConfig(Ne.WorkspaceRerankStrategy)==="model"?this.sortChunksUsingModel(e,r,n,i,o):await this.getShouldUseAda()?o.isCancellationRequested?[]:this.rerankChunksUsingAda(r,n,i,o):n.slice(0,i)}async rerankChunksUsingAda(e,r,n,i){try{let o=r.map((u,l)=>({...u,index:l})),s=await this._workspaceChunkEmbeddingsIndex.searchChunks(o,e.fullText,n,i),a=this._accessor.get(ke),c=s.filter(u=>u.index<n).length;return a.sendMSFTTelemetryEvent("workspaceChunkAdaRerank",{topChunkInitialIndices:s.map(u=>u.index).join(",")},{originalTopInTopAfterRerank:c/n}),s}catch(o){return this._logger.warn("Failed to search chunk embeddings index: ",o),r.slice(0,n)}}async sortChunksUsingModel(e,r,n,i,o){let s=this._accessor.get(Qt),a=[];for(let c=0;c<n.length;c+=i){let u=n.slice(c,c+i),l=[...a,...u];BR(l);let d=await s.fetchOne([{role:"system",content:`
The user will provide you with question and a numbered list of code snippets.
You are to sort the code snippets by most to least helpful in answering the question.
If a code snippet is not related to the question in possible any way, you may opt not to include it in the list.
Return an ordered list of snippet numbers.
Only return snippet numbers.
Do not explain.
				`.trim()},{role:"user",content:`
Question: ${r.fullText}

${l.map((f,m)=>`# Snippet ${m}
 ${Ii("",f.text)}`).join(`

`)}
					`.trim()}],async f=>{},o,2,e,{agent:Sp},{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceChunkRerank"});if(o.isCancellationRequested)return[];if(d.type!=="success"){console.warn("Model re-rank failed");continue}let p=new Set(Array.from(d.value.matchAll(/\d+/g),f=>parseInt(f[0])));a=Pr(Array.from(p).map(f=>l.at(f))).slice(0,i)}return a}async getStrategies(){let e=new Array;switch(this._forcedChunkSearchStrategy){case"codesearch":e.push(this._codeSearchChunkSearch);break;case"ada":e.push(this._embeddingsCacheChunkSearch);break;case"tfidf":e.push(this._tfIdfWithSemanticChunkSearch);break;default:await this._codeSearchChunkSearch.isAvailable()&&e.push(this._codeSearchChunkSearch),await this.getShouldUseAda()&&await this._embeddingsCacheChunkSearch.isAvailable()&&e.push(this._embeddingsCacheChunkSearch),e.push(this._tfIdfWithSemanticChunkSearch);break}return this._logger.debug(`Using ${e.map(r=>r.id).join(", ")} for chunk search`),e}async getShouldUseAda(){let e=this._accessor.get(Pe).getConfig(Ne.WorkspaceUseAdaEnabled);return e!==void 0?e:await this._accessor.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.workspaceUseAda",!0)??!0}reportTopSuccessfulFlow(e){this._logger.debug(`'${e}' was the top working workspace chunk search strategy`),this._accessor.get(ke).sendMSFTTelemetryEvent("workspaceChunkSearchStrategy",{strategy:e??"none"})}};we([ti(e=>e._logger)],qf.prototype,"triggerIndexing",1),we([ti(e=>e._logger)],qf.prototype,"searchFileChunks",1),we([ti(e=>e._logger)],qf.prototype,"rerankChunksUsingAda",1),qf=we([de(1,Ct)],qf);var bTe=require("vscode");var f2=class{static{this.version=1}#t;constructor(e){this.#t=e}async selectScope(e,r){if(e??=bTe.window.activeTextEditor,!!e)return this.#t.get(km).selectEnclosingScope(e,r)}};var yS=class{constructor(e){let r=Tp(e.get(mt).getEditorInfo().version);this.embeddingsCache=new Ol(e,1,"api",r,"api")}async updateIndex(){this.apiChunks=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this.apiChunks)return[];let i=this.apiChunks.map(o=>{if(!o.embedding)return{text:o.text,similarity:0};let s=Ll(e,o.embedding);return{text:this.toContextString(o),similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.text)}toContextString(e){return e.type==="code"?`Snippet from vscode.d.ts:
${Ii(e.lang,e.text)}`:e.type==="command"?`${e.text}`:e.type==="documentationCodeBlock"?`Example code from documentation:
${Ii(e.lang,e.text)}`:""}};yS=we([de(0,Ct)],yS);var f5=re("IApiEmbeddingsIndex");var $Y=class extends Ur{constructor(){super(...arguments);this._contextCtors=[];this._contextResolvers=new Map;this._initialized=!1}get contextResolvers(){return this._contextResolvers.values()}getContextResolver(r){return this._contextResolvers.get(r)}register(r){if(typeof r=="function"){this._handleCtor(r);return}else return this._contextResolvers.set(r.kind,r),Dte(r)&&this._register(r),r}initialize(r){if(this._initialized)return Ur.None;for(this._initialized=!0,this._accessor=r.get(ua);this._contextCtors.length;){let n=this._contextCtors.pop();this._handleCtor(n)}return this}_handleCtor(r){if(!this._accessor){this._contextCtors.push(r);return}try{let n=this._accessor.createInstance(r);this.register(n)}catch(n){console.error(n)}}},Nr=new $Y;var STe=W(lr()),ETe=W(st());var m2=W(lr());var WY=W(st()),Co=W(st());var vc=class{toString(){return Object.getPrototypeOf(this).constructor.name}},$d=class{constructor(e,r){this.request=e;this.sessionId=r;this.status="in-progress";this.contextParts=[];this.references=[]}addReferences(e){this.references=m5([...this.references,...e])}},ul=class t{constructor(e=[]){this.turns=e}copy(){let e=JSON.parse(JSON.stringify(this.turns));return new t(e)}getLatestTurn(){return this.turns[this.turns.length-1]}addTurn(e){this.turns.forEach(r=>r.chatMessages=[]),this.turns.push(e)}removeTurn(e){let r=this.turns.findIndex(n=>n.requestId===e);if(r!==-1)return this.turns.splice(r,1)[0]}insertBeforeLatestTurn(e){this.turns.splice(this.turns.length-1,0,...e)}getState(){return{turns:this.turns}}};function m5(t){let e=new Un,r=[],n=(o,s)=>{if(o.contains(s))return o;if(s.contains(o))return s;let[a,c]=o.start.line<s.start.line?[o,s]:[s,o];if(a.end.line>=c.start.line-1)return new Je(a.start,c.end)};return t.forEach(o=>{let s=o.anchor;if("variableName"in s)r.push(o);else if(!_Te(s))e.set(s,o);else{let a=e.get(s.uri);if(!a)e.set(s.uri,[o]);else if(!(a instanceof WY.PromptReference)){let c=[],u=s.range;a.forEach(d=>{if("variableName"in d.anchor||!_Te(d.anchor))return;let p=n(u,d.anchor.range);p?u=p:c.push(d.anchor)});let l={uri:s.uri,range:u};e.set(s.uri,[...c,l].sort((d,p)=>d.range.start.line-p.range.start.line||d.range.end.line-p.range.end.line).map(d=>new WY.PromptReference(d)))}}}),[...Array.from(e.keys()).sort((o,s)=>o.fsPath.localeCompare(s.fsPath)).map(o=>{let s=e.get(o);return s||[]}).flat(),...r]}function _Te(t){return"uri"in t&&"range"in t}function h5(t,e=!0){switch(t){case"snippy":return e?m2.t({message:"Sorry, the response matched public code so it was blocked. Please rephrase your prompt. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):m2.t("Sorry, the response matched public code so it was blocked. Please rephrase your prompt.");default:return e?m2.t({message:"Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):m2.t("Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again.")}}var wo=class{async buildPrompt(e,r,n,i,o,s){return await(await this.createRenderer(e,r,n,i,o,s)).render(i,s)}},nt=class extends ETe.PromptRenderer{constructor(r,n,i,o,s){super(r,n,i,o);this.accessor=s}createElement(r){return new r.ctor(r.props,this.accessor)}async render(r,n){let i=await super.render(r,n),o=i.messages[i.messages.length-1];if(o&&o.role!=="user")throw new Error(STe.t("Sorry, this message is too long. Please try a shorter question."));return{...i,references:m5(i.references)}}};async function Zo(t,e,r,n,i,o,s){let a=new nt(e,r,n,i,t),{messages:c,tokenCount:u,references:l}=await a.render(o,s),d=a.getAllMeta(),p=a.getUsedContext();return{messages:c,tokenCount:u,metadatas:d,usedContext:p,references:m5(l)}}var CTe=W(st());var TTe=require("util");var v5=re("IPromptWorkspaceLabels"),g5=class{constructor(){this.indicators=new Map;this.contentIndicators=new Map;this._labels=[];this.initIndicators()}get labels(){if(this._labels.includes("javascript")&&this._labels.includes("typescript")){let e=this._labels.indexOf("javascript");this._labels.splice(e,1)}return this._labels}async collectContext(e){let r=e.get(rt).getWorkspaceFolders();if(r)for(let n=0;n<r.length;n++)await this.addContextForFolders(e,r[n])}async addContextForFolders(e,r){for(let[n,i]of this.indicators.entries())await this.addLabelIfApplicable(e,r,n,i)}async addLabelIfApplicable(e,r,n,i){let o=Ji.joinPath(r,n);if(!await e.get(Oe).isCopilotIgnored(o))try{await e.get(gi).stat(o),i.forEach(a=>this._labels.push(a));let s=this.contentIndicators.get(n);if(s){let a=await e.get(gi).readFile(o);try{s(new TTe.TextDecoder().decode(a)).forEach(u=>this._labels.push(u))}catch{}}}catch{}}initIndicators(){this.addIndicator("package.json","javascript","npm"),this.addIndicator("tsconfig.json","typescript"),this.addIndicator("pom.xml","java","maven"),this.addIndicator("build.gradle","java","gradle"),this.addIndicator("requirements.txt","python","pip"),this.addIndicator("Pipfile","python","pip"),this.addIndicator("Cargo.toml","rust","cargo"),this.addIndicator("go.mod","go","go.mod"),this.addIndicator("pubspec.yaml","dart","pub"),this.addIndicator("build.sbt","scala","sbt"),this.addIndicator("build.boot","clojure","boot"),this.addIndicator("project.clj","clojure","lein"),this.addIndicator("mix.exs","elixir","mix"),this.addIndicator("composer.json","php","composer"),this.addIndicator("Gemfile","ruby","bundler"),this.addIndicator("build.xml","java","ant"),this.addIndicator("build.gradle.kts","java","gradle"),this.addIndicator("yarn.lock","yarn"),this.addIndicator("CMakeLists.txt","c++","cmake"),this.addIndicator("vcpkg.json","c++"),this.addIndicator("Makefile","c++","makefile"),this.addContentIndicator("CMakeLists.txt",this.collectCMakeListsTxtIndicators),this.addContentIndicator("package.json",this.collectPackageJsonIndicators)}addIndicator(e,...r){this.indicators.set(e,r)}addContentIndicator(e,r){this.contentIndicators.set(e,r)}collectCMakeListsTxtIndicators(e){function r(s,a,c){try{let u=Array.from(s.matchAll(a));if(u&&u[0]&&u[0][1]){let l=parseInt(u[0][1]);if(c.includes(l))return l}}catch{}}let n=[],i=r(e,/set\s*\(\s*CMAKE_CXX_STANDARD\s*(\d+)/gmi,[98,11,14,17,20,23,26]);i&&n.push(`C++${i}`);let o=r(e,/set\s*\(\s*CMAKE_C_STANDARD\s*(\d+)/gmi,[90,99,11,17,23]);return o&&n.push(`C${o}`),n}collectPackageJsonIndicators(e){let r=[],n=JSON.parse(e),i=n.dependencies,o=n.devDependencies;i&&(i["@angular/core"]&&r.push("angular"),i.react&&r.push("react"),i.vue&&r.push("vue")),o&&o.typescript&&r.push("typescript");let s=n.engines;return s&&(s.node&&r.push("node"),s.vscode&&r.push("vscode extension")),r}};var ITe=W(st()),Y=class extends ITe.PromptElement{constructor(r,n){super(r);this.accessor=n}};var uu=class extends Y{async prepare(){let e=this.accessor.get(v5);return await e.collectContext(this.accessor),{labels:[...new Set(e.labels)].sort()}}render(e,r){if(e.labels.length!==0)return vscpp(vscppf,null,vscpp(CTe.UserMessage,{priority:this.props.priority},"I am working on a project of the following nature:",vscpp("br",null),e.labels.reduce((n,i)=>`${n}
- ${i}`,"").trim()))}};var KY=class{constructor(){this.kind="project-labels"}async resolveContext(e,r){let{messages:n}=await Zo(e,r.endpoint,uu,{},e.get(ye));if(n.length>0)return{kind:this.kind,userMessages:n.map(i=>i.content)}}},S$t=Nr.register(new KY);var At=W(require("vscode"));var Ro=new class{constructor(){this.commands=new Set}registerCommand(t){this.commands.add(t)}getCommand(t,e){return this.getCommands(e).find(r=>r.commandId===t)}getCommands(t){return Array.from(this.commands.values()).filter(e=>e.locations.includes(t))}};var bS={workspace:{explain:"explain",review:"review",tests:"tests",fix:"fix",new:"new",newNotebook:"newNotebook",semanticSearch:"semanticSearch",fixTestFailure:"fixTestFailure"},vscode:{search:"search",api:"api"},terminal:{explain:"terminalExplain"}};function wTe(t){if(Object.keys(bS).includes(t))return{agent:t};for(let[e,r]of Object.entries(bS))if(Object.values(r).includes(t))return{agent:e,command:t}}var Gy="GitHub.copilot-chat";var Pg=re("IConversationStore"),y5=class{constructor(){this.conversationMap=new Map}addConversation(e,r){this.conversationMap.set(e,r)}getConversation(e){return this.conversationMap.get(e)}};var zf=W(lr());var Wd=re("IDiffService");var Vr=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new Uo(`Invalid range: ${this.toString()}`)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),s=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,s))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Uo(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Uo(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}};var Kd=class{get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;;){let n=e.indexOf(`
`,r);if(n===-1)break;this._lineStartOffsets.push(n+1),r=n+1}}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r];return new fo(r,n)}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};var Wi=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Error(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{this.empty=new t([])}static fromJson(e){return new t(e.map(wi.fromJson))}static from(e){let r=e.map(i=>new wi(Vr.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static async fromDiff(e,r,n){let i=await n.computeDiff(e,r,{maxComputationTimeMs:5e3,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new Kd(e),s=new Kd(r),a=[];for(let c of i.changes)for(let u of c.innerChanges??[]){let l=s.positionToOffset(u.modifiedRange.getStartPosition()),d=s.positionToOffset(u.modifiedRange.getEndPosition()),p=r.substring(l,d),f=o.positionToOffset(u.originalRange.getStartPosition()),m=o.positionToOffset(u.originalRange.getEndPosition()),h=new Vr(f,m);a.push(new wi(h,p))}return new t(a)}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new wi(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return EXe(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new wi(Vr.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Vr.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(r.push(new wi(a.replaceRange.delta(o),a.newText)),i++):(n++,o+=s.newText.length-s.replaceRange.length):(r.push(new wi(a.replaceRange.delta(o),a.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}convertOriginalOffsetToPostEditsOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}convertOriginalRangeToPostEditsRange(e){return new Vr(this.convertOriginalOffsetToPostEditsOffset(e.start),this.convertOriginalOffsetToPostEditsOffset(e.endExclusive))}convertPostEditsOffsetToOriginalOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},wi=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static fromJson(e){return new t(Vr.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=rA(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,sre(r,this.newText)),o=new Vr(this.replaceRange.start+n,this.replaceRange.endExclusive-i),s=this.newText.substring(n,this.newText.length-i);return new t(o,s)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function EXe(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let s=i,a,c;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;a||(a=u),c=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!a)n.push(new wi(o.replaceRange.delta(-i),o.newText));else{let u="",l=o.replaceRange.start-(a.replaceRange.start+s);l>0&&(u=a.newText.slice(0,l));let d=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(d>0){let m=new wi(Vr.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-d));r.unshift(m),i-=m.newText.length-m.replaceRange.length}let p=u+o.newText,f=new Vr(Math.min(a.replaceRange.start,o.replaceRange.start-s),o.replaceRange.endExclusive-i);n.push(new wi(f,p))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Wi(n).normalize()}var b5=class extends Ur{constructor(r,n,i){super();this._initialText=r;this._document=n;this._serviceAccessor=i;this._additionalEdits=Wi.empty;this._documentText=this._document.getText();let o=i.get(rt);this._register(o.onDidChangeTextDocument(s=>{if(s.document.uri.toString()!==this._document.uri.toString())return;let a=Wi.from(s.contentChanges);this._additionalEdits=this._additionalEdits.compose(a)}))}async compute(){let r=this._serviceAccessor.get(Wd),n=await Wi.fromDiff(this._initialText,this._documentText,r);return{getEditsSinceInitial:()=>{if(this._store.isDisposed)throw new Uo("EditComputer has been disposed");return n.compose(this._additionalEdits)}}}};var _S=class{constructor(e,r){this.initialText=e;this._diffService=r;this._document=new YY(e)}addEdits(e){let r=TXe(e,this._document);this._document.apply(r)}getText(){return this._document.getValue()}async getEdits(){let e=this.getText();return await Wi.fromDiff(this.initialText,e,this._diffService)}};_S=we([de(1,Wd)],_S);function TXe(t,e){return new Wi(t.map(r=>{let n=e.positionToOffset(r.range.start),i=e.positionToOffset(r.range.end);return new wi(new Vr(n,i),r.newText)}))}var YY=class{constructor(e=""){this._converter=void 0;this._value="";this._value=e}getValue(){return this._value}apply(e){this._value=e.apply(this._value),this._converter=void 0}positionToOffset(e){return this._converter||(this._converter=new Kd(this._value)),this._converter.positionToOffset(new fo(e.line+1,e.character+1))}};function h2(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function RTe(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}function ATe(t){if(typeof t!="object"||t===null||!("details"in t))return!1;let{details:e}=t;return typeof e=="object"&&e!==null&&"type"in e&&"description"in e&&typeof e.type=="string"&&typeof e.description=="string"}var IXe="vscode-notebook-cell";function gr(t){return t.scheme===IXe||t.scheme==="untitled"&&t.fragment.startsWith("notebook-chat-input")}function PTe(t,e){let r=t.notebookDocuments.find(i=>i.uri.fsPath===e.uri.fsPath&&i.getCells().find(o=>o.document===e));return r?r.getCells().findIndex(i=>i.document===e):-1}function xS(t){return gr(t)?t.path.endsWith(".ipynb"):!1}function kTe(t,e){return t.notebookDocuments.find(n=>n.uri.fsPath===e.fsPath)?.notebookType}var oIe=W(lr());var SS=class{constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},g2=class{constructor(e){this.lines=e}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.lines[r].trim();return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},kg=class{static Assert(e,r){if(!e)throw new Error(r)}},Dg=class{static Copy(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}static Copy2(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}};var _5=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new SS(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},x5=class t{constructor(e,r){let[n,i]=t._getElements(e),[o,s]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=s,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let l;return n<=i?(kg.Assert(e===r+1,"originalStart should only be one more than originalEnd"),l=[new SS(e,0,n,i-n+1)]):e<=r?(kg.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[new SS(e,r-e+1,n,0)]):(kg.Assert(e===r+1,"originalStart should only be one more than originalEnd"),kg.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[]),l}let o=[0],s=[0],a=this.ComputeRecursionPoint(e,r,n,i,o,s),c=o[0],u=s[0];if(a!==null)return a;{let l=this.ComputeDiffRecursive(e,c,n,u),d=this.ComputeDiffRecursive(c+1,r,u+1,i);return this.ConcatenateChanges(l,d)}}WALKTRACE(e,r,n,i,o,s,a,c,u,l,d,p,f,m,h,g,v){let b=null,y=null,S=new _5,x=r,T=n,L=f[0]-g[0]-i,M=-1073741824,q=this.m_forwardHistory.length-1;do{let O=L+e;O===x||O<T&&u[O-1]<u[O+1]?(d=u[O+1],m=d-L-i,d<M&&S.MarkNextChange(),M=d,S.AddModifiedElement(d+1,m),L=O+1-e):(d=u[O-1]+1,m=d-L-i,d<M&&S.MarkNextChange(),M=d-1,S.AddOriginalElement(d,m+1),L=O-1-e),q>=0&&(u=this.m_forwardHistory[q],e=u[0],x=1,T=u.length-1)}while(--q>=-1);b=S.getReverseChanges(),S=new _5,x=s,T=a,L=f[0]-g[0]-c,M=1073741824,q=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let O=L+o;O===x||O<T&&l[O-1]>=l[O+1]?(d=l[O+1]-1,m=d-L-c,d>M&&S.MarkNextChange(),M=d+1,S.AddOriginalElement(d+1,m+1),L=O+1-o):(d=l[O-1],m=d-L-c,d>M&&S.MarkNextChange(),M=d,S.AddModifiedElement(d+1,m+1),L=O-1-o),q>=0&&(l=this.m_reverseHistory[q],o=l[0],x=1,T=l.length-1)}while(--q>=-1);return y=S.getChanges(),this.ConcatenateChanges(b,y)}ComputeRecursionPoint(e,r,n,i,o,s){let a=0,c=0,u=0,l=0,d=0,p=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=r-e+(i-n),m=f+1,h=new Int32Array(m),g=new Int32Array(m),v=i-n,b=r-e,y=e-n,S=r-i,T=(b-v)%2===0;h[v]=e,g[b]=r;for(let L=1;L<=f/2+1;L++){let M=0,q=0;u=this.ClipDiagonalBound(v-L,L,v,m),l=this.ClipDiagonalBound(v+L,L,v,m);for(let O=u;O<=l;O+=2){O===u||O<l&&h[O-1]<h[O+1]?a=h[O+1]:a=h[O-1]+1,c=a-(O-v)-y;let Z=a;for(;a<r&&c<i&&this.ElementsAreEqual(a+1,c+1);)a++,c++;if(h[O]=a,a+c>M+q&&(M=a,q=c),!T&&Math.abs(O-b)<=L-1&&a>=g[O])return o[0]=a,s[0]=c,Z<=g[O]&&1447>0&&L<=1448?this.WALKTRACE(v,u,l,y,b,d,p,S,h,g,a,r,o,c,i,s,T):null}d=this.ClipDiagonalBound(b-L,L,b,m),p=this.ClipDiagonalBound(b+L,L,b,m);for(let O=d;O<=p;O+=2){O===d||O<p&&g[O-1]>=g[O+1]?a=g[O+1]-1:a=g[O-1],c=a-(O-b)-S;let Z=a;for(;a>e&&c>n&&this.ElementsAreEqual(a,c);)a--,c--;if(g[O]=a,T&&Math.abs(O-v)<=L&&a<=h[O])return o[0]=a,s[0]=c,Z>=h[O]&&1447>0&&L<=1448?this.WALKTRACE(v,u,l,y,b,d,p,S,h,g,a,r,o,c,i,s,T):null}if(L<=1447){let O=new Int32Array(l-u+2);O[0]=v-u+1,Dg.Copy2(h,u,O,1,l-u+1),this.m_forwardHistory.push(O),O=new Int32Array(p-d+2),O[0]=b-d+1,Dg.Copy2(g,d,O,1,p-d+1),this.m_reverseHistory.push(O)}}return this.WALKTRACE(v,u,l,y,b,d,p,S,h,g,a,r,o,c,i,s,T)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return Dg.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Dg.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return Dg.Copy(e,0,i,0,e.length),Dg.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(kg.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),kg.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(a=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new SS(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=r%2===0;if(e<0){let c=o%2===0;return a===c?0:1}else{let c=s%2===0;return a===c?i-1:i-2}}};function LTe(t,e){let r=t.getText().split(/\r|\n|\r\n/g),n=e||{tabSize:4},o=wXe({getLineCount:()=>r.length,getLineContent:a=>r[a-1],getOptions:()=>n},t.languageId),[s]=OTe(t,JY(t.languageId),o,void 0);return s}function OTe(t,e,r,n){if(typeof n<"u"&&n>=r.length)throw new Error(`Invalid region index ${n}`);let i,o,s;if(typeof n>"u")i=1,o=t.lineCount,s=1;else{if(i=r.getStartLineNumber(n),o=r.getEndLineNumber(n),e)i++;else if(o<t.lineCount){let c=t.lineAt(o).text.trim();/^[\}\]\)]$/.test(c)&&o++}s=i+1}let a=[];for(n=typeof n>"u"?0:n+1;n<r.length;){let c=r.getStartLineNumber(n),u=r.getEndLineNumber(n);if(c>o||u>o)break;for(let f=s;f<c;f++){let m=DTe(t,f);m&&a.push(m)}let[l,d,p]=OTe(t,JY(t.languageId),r,n);a.push(l),n=d,s=p}for(let c=s;c<o;c++){let u=DTe(t,c);u&&a.push(u)}return[CXe(t,i,o,a),n,o+1]}function DTe(t,e){let r=t.lineAt(e-1);if(r.isEmptyOrWhitespace)return null;let n=t.offsetAt(r.range.start),i=t.offsetAt(r.range.end);return new Rm(n,i,"LINE",[])}function CXe(t,e,r,n){let i=t.offsetAt(new Bn(e-1,0)),o=t.offsetAt(new Bn(r-1,t.lineAt(r-1).text.length));return new Rm(i,o,"FOLD",n)}function wXe(t,e){return RXe(t,JY(e))}function JY(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}function RXe(t,e){let r=t.getOptions().tabSize,n=new QY,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let s=t.getLineCount();s>0;s--){let a=t.getLineContent(s),c=PXe(a,r),u=i[i.length-1];if(c===-1){e&&(u.endAbove=s);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let l=u.endAbove-1;l-s>=1&&n.insertFirst(s,l,c)}u.indent===c?u.endAbove=s:i.push({indent:c,endAbove:s,line:s})}return n.toIndentRanges()}var AXe=65535,Vy=16777215,NTe=4278190080,QY=class{constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>Vy||r>Vy)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new XY(e,r)}};function PXe(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}var XY=class{constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=(n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i};for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],s=this._endIndexes[n];if(o>Vy||s>Vy)throw new Error("startLineNumber or endLineNumber must not exceed "+Vy);for(;e.length>0&&!r(o,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Vy}getEndLineNumber(e){return this._endIndexes[e]&Vy}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&NTe)>>>24)+((this._endIndexes[e]&NTe)>>>16);return r===AXe?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};function FTe(t,e,r){let n=MTe(t,e,r.start),i=MTe(t,e,r.end),o=t.offsetAt(r.start),s=t.offsetAt(r.end);return n&&(o=Math.min(o,n.startIndex),s=Math.max(s,n.endIndex)),i&&(o=Math.min(o,i.startIndex),s=Math.max(s,i.endIndex)),ds(t,{startIndex:o,endIndex:s})}async function UTe(t,e,r,n){let i=t.get(Ir),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(ho),a=mo(r,e),c=await za(t,e,n,()=>o.getCallExpressions(a),[]);async function u(m){let h=e.positionAt(m.startIndex);try{let g=await s.getImplementations(e.uri,h);return g.length?g:await s.getDefinitions(e.uri,h)}catch{return[]}}let l=await za(t,e,n*3,()=>Promise.all(c.map(u)),[]),d=[];for(let m=0;m<l.length;m++){let h=c[m],g=l[m];for(let v of g){let{uri:b,range:y}=Cp(v)?{uri:v.targetUri,range:v.targetRange}:v,S=await t.get(rt).openTextDocument(b),x=i.getTreeSitterAST(S);if(x){let L=(await x.getFunctionDefinitions()).find(M=>M.identifier===h.identifier);if(L){let M=mo(y,S);d.push({uri:b,range:y,version:S.version,identifier:h.identifier,startIndex:M.startIndex,endIndex:M.endIndex,text:L.text})}}}}if(d.length!==0)return d;let p=await za(t,e,n,()=>o.getFunctionDefinitions(),[]),f=[];for(let m of p)for(let h of c)m.identifier===h.identifier&&f.push(m);return f.sort((m,h)=>m.startIndex-h.startIndex)}async function BTe(t,e,r,n){let i=t.get(Ir),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(ho),a=mo(r,e),c=await za(t,e,n,()=>o.getClassReferences(a),[]),u=await za(t,e,n*3,async()=>await Promise.all(c.map(async f=>{try{let m=e.positionAt(f.startIndex),h=await s.getImplementations(e.uri,m);return h.length?h:await s.getDefinitions(e.uri,m)}catch{return[]}})),[]),l=[];for(let f=0;f<u.length;f++){let m=c[f],h=u[f];for(let g of h){let{uri:v,range:b}=Cp(g)?{uri:g.targetUri,range:g.targetRange}:g,y=await t.get(rt).openTextDocument(v),S=i.getTreeSitterAST(y);if(S){let x=(await S.getClassDeclarations()).find(T=>T.identifier===m.identifier);if(x){let T=mo(b,y);l.push({uri:v,range:b,version:y.version,identifier:m.identifier,startIndex:T.startIndex,endIndex:T.endIndex,text:x.text})}}}}if(l.length!==0)return l;let d=await za(t,e,n,()=>o.getClassDeclarations(),[]),p=[];for(let f of d)for(let m of c)f.identifier===m.identifier&&p.push(f);return p.sort((f,m)=>f.startIndex-m.startIndex)}async function qTe(t,e,r,n){let o=t.get(Ir).getTreeSitterAST(e);if(!o)return[];let s=mo(r,e),a=await za(t,e,n,()=>o.getTypeReferences(s),[]),c=await za(t,e,n,()=>o.getTypeDeclarations(),[]),u=[];for(let l of c)for(let d of a)l.identifier===d.identifier&&u.push(l);return u.sort((l,d)=>l.startIndex-d.startIndex)}function MTe(t,e,r){let n=t.offsetAt(r),i=null;for(let o of e)if(!(o.endIndex<n)){if(o.startIndex>n)break;i=o}return i}function kXe(t,e){return e===0?t.then(r=>({type:"success",value:r})):new Promise((r,n)=>{let i=setTimeout(()=>r({type:"timeout"}),e);t.then(o=>{clearTimeout(i),r({type:"success",value:o})}).catch(o=>{clearTimeout(i),n(o)})})}async function DXe(t,e,r){let i=t.get(Ir).getTreeSitterAST(e);if(!i)return[];let o=await za(t,e,r,()=>i.getFunctionPositions(),[]);return o.sort((s,a)=>s.startIndex-a.startIndex),o}async function ZY(t,e,r){let i=t.get(Ir).getTreeSitterAST(e);if(!i)return[];let o=await za(t,e,r,()=>i.getFunctionBodies(),[]);return o.sort((s,a)=>s.startIndex-a.startIndex),NXe(o)}function NXe(t){t.sort((r,n)=>r.startIndex-n.startIndex||n.endIndex-r.endIndex);let e=[];for(let r=0,n=t.length;r<n;){e.push(t[r]);let i=r+1;for(;i<t.length&&go.doesContain(t[r],t[i]);)++i;r=i}return e}async function za(t,e,r,n,i){let o=t.get(ce).getLogger("asyncCompute");try{let s=await kXe(HTe(e,n,i),r);return s.type==="success"?s.value:(o.info(`Computing async parser based result took longer than ${r}ms`),i)}catch(s){return s instanceof tP||(o.exception(s,"Failed to compute async parser based result"),t.get(ke).sendGHTelemetryException(s,"Failed to compute async parser based result")),i}}async function HTe(t,e,r,n=0){let i=t.version,o=await e();return t.version!==i?n<3?HTe(t,e,r,n+1):r:o}var Ao=class t{static forDocument(e,r){return this.forUri(e,r.uri)}static forUri(e,r){return`${this.forLanguage(e)}: ${r.path}`}static forLanguage(e){return`${e.lineComment.start} FILEPATH`}static testLine(e,r){let n=t.forLanguage(e);return r.trimStart().startsWith(n)}};var es=class{static begin(e,r){return typeof r>"u"?`${e.lineComment.start} BEGIN:`:`${e.lineComment.start} BEGIN: ${r}`}static end(e,r){return typeof r>"u"?`${e.lineComment.start} END:`:`${e.lineComment.start} END: ${r}`}};function jf(t){return/```[\s\S]+\n```/m.test(t)}function S5(t){return t.split("```",1)[0].match(/^.+/)?.[0]??""}var LXe={analysisTimeoutMs:100};async function Yd(t,e,r){let i=await t.get(Ir).getTreeSitterAST(e)?.getStructure();return i||LTe(e,r)}async function jTe(t,e,r){let n=t.get(Kr).extensionMode===ls.Test?0:LXe.analysisTimeoutMs,i=Date.now(),o=await DXe(t,e,n),s=Date.now()-i,a=n===0?0:Math.max(10,n-s),c=await ZY(t,e,a);return{wholeRange:e.validateRange(r),functionPositions:o,functionBodies:c}}var Ki=class extends vc{constructor(r,n){super();this.wholeRange=r;this.contextInfo=n}};(e=>{function t(r){return r instanceof e}e.is=t})(Ki||={});var eQ=class{constructor(){this.spacesDiff=0;this.looksLikeAlignment=!1}};function OXe(t,e,r,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=t.charCodeAt(o),f=r.charCodeAt(o);if(p!==f)break}let s=0,a=0;for(let p=o;p<e;p++)t.charCodeAt(p)===32?s++:a++;let c=0,u=0;for(let p=o;p<n;p++)r.charCodeAt(p)===32?c++:u++;if(s>0&&a>0||c>0&&u>0)return;let l=Math.abs(a-u),d=Math.abs(s-c);if(l===0){i.spacesDiff=d,d>0&&0<=c-1&&c-1<t.length&&c<r.length&&r.charCodeAt(c)!==32&&t.charCodeAt(c-1)===32&&t.charCodeAt(t.length-1)===44&&(i.looksLikeAlignment=!0);return}if(d%l===0){i.spacesDiff=d/l;return}}function zy(t,e,r){let n=Math.min(t.length,1e4),i=0,o=0,s="",a=0,c=[2,4,6,8,3,5,7],u=8,l=[0,0,0,0,0,0,0,0,0],d=new eQ;for(let m=0;m<n;m++){let h=t[m],g=h.length,v=!1,b=0,y=0,S=0;for(let T=0,L=g;T<L;T++){let M=h.charCodeAt(T);if(M===9)S++;else if(M===32)y++;else{v=!0,b=T;break}}if(!v||(S>0?i++:y>1&&o++,OXe(s,a,h,b,d),d.looksLikeAlignment&&!(r&&e===d.spacesDiff)))continue;let x=d.spacesDiff;x<=u&&l[x]++,s=h,a=b}let p=r;i!==o&&(p=i<o);let f=e;if(p){let m=p?0:.1*n;c.forEach(h=>{let g=l[h];g>m&&(m=g,f=h)}),f===4&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(f=2)}return{insertSpaces:p,tabSize:f}}function MXe(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?~r:r}function Ng(t,e){let r=MXe(t,e);return r<0?Math.floor(~r/e):Math.floor(r/e)}function FXe(t,e){return t+e-t%e}function UXe(t,e,r){let n=0;for(let o=0;o<t.length;o++)t.charAt(o)==="	"?n=FXe(n,e):n++;let i="";if(!r){let o=Math.floor(n/e);n=n%e;for(let s=0;s<o;s++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function tQ(t,e,r){let n=nre(t);return n===-1&&(n=t.length),UXe(t.substring(0,n),e,r)+t.substring(n)}var Yi=class{constructor(e,r,n,i="",o=`
`){this.firstLineIndex=e;this.endLineIndex=r;this.lines=n;this.prefix=i;this.suffix=o}toTextEdit(){let e=this.lines.length>0?this.prefix+this.lines.join(`
`)+this.suffix:"";return hi.replace(new Je(this.firstLineIndex,0,this.endLineIndex,0),e)}},Lg;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t;function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e})(Lg||={});var $y=class t{constructor(e,r){this.text=e;this.languageId=r}static fromDocumentContext(e){return new t(e.document.getText(),e.language.languageId)}};function Og(t,e,r,n,i,o){let s=Lg.fromString(r);if(s.length===e.range.lines.length&&e.range.lines.every((d,p)=>d===s[p]))return[];let a=[],c=!1;for(let d of s){let p=E5(e,d);p===null?a.push(d):(p.type==="fakestart"||p.type==="fakend")&&(c=!0)}let u;if(n===4)u=new Yi(e.range.lastLineIndex,e.range.lastLineIndex,s);else{let d=HXe(e,s,i),p=KXe(t,e,a,i);if(!d)u=p;else if(!p)u=d;else{let f=GTe(d);GTe(p)<f?u=p:u=d}u||(u=qXe(t,e,n,i,c,a))}o&&(u=BXe(o,u,i));let l=[u];return o&&(l=jXe(o,l)),l.map(d=>d.toTextEdit())}function BXe(t,e,r){let n=t.text.split(/\r\n|\r|\n/g),i=n.slice(0,e.firstLineIndex),o=n.slice(e.endLineIndex),s=e.lines.slice(0),[,a]=zTe(i,s);a>0&&s.splice(0,a),a>0&&(s=Mg(s,{whichLine:"bottomMost",lines:i.slice(i.length-a)},r).slice(0));let[c]=zTe(s,o);return c>0&&s.splice(s.length-c,c),new Yi(e.firstLineIndex,e.endLineIndex,s)}function qXe(t,e,r,n,i,o){let s=t.get(ce).getLogger("editGeneration");return i?(s.info("(case 6) Appending to selected code"),$Te(e.range,o,n)):r===3?(s.info("(case 7) Appending to selected code"),$Te(e.range,o,n)):r===1?(s.info("(case 8) Prepending to selected code"),JXe(e.range,Mg(o,e.range.lines.filter(a=>a.trim()!=="").length>0?{whichLine:"topMost",lines:e.range.lines}:{whichLine:"bottomMost",lines:e.above.lines},n))):(s.info("(Default) Replacing selected code"),Qd(e.range,o,n))}function GTe(t){let e=t.endLineIndex-t.firstLineIndex,r=t.lines.length;return e+r}function HXe(t,e,r){let n=null,i=[];for(let o of e){let s=E5(t,o);if(s===null){i.push(o);continue}if(n){if(s.type==="end"&&s.endMarker===n)return Qd(n,i,r);if(s.type==="end"&&n===t.above&&s.endMarker===t.range){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),Qd(a,i,r)}if(s.type==="end"&&n===t.above&&s.endMarker===t.below){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),a.mergeFromBelow(t.below.clone()),Qd(a,i,r)}}else s.type==="start"&&(n=s.startMarker,i=[])}if(i.length>0&&n)return Qd(n,i,r)}function jXe(t,e){let r=[],n=t.text.split(/\r\n|\r|\n/g),i=GXe(n,a=>ES(a,t.languageId)),o=[];for(let a of e){if(a.endLineIndex<=i+1)return e;let c=!1,u=[],l=a.lines;for(let d of l)ES(d,t.languageId)?(o.push(nQ(d)),c=!0):c&&d.length===0||(u.push(d),c=!1);if(!c&&u.length>0){if(a.firstLineIndex<i+1)return e;r.push(new Yi(a.firstLineIndex,a.endLineIndex,u))}}if(o.length===0)return e;let s=i+1;return r.unshift(new Yi(s,s,o)),r}function GXe(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}function nQ(t){return t.replace(/^\s+/g,"")}function ES(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"javascript":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}var VXe=/^(\t+)/,rQ=new Map;function zXe(t){return rQ.has(t)||rQ.set(t,new RegExp(`^(( {${t}})+)`)),rQ.get(t)}function iQ(t,e,r){let n=e?zXe(r):VXe,i=t.match(n);return i?[i[0],i[0].length/(e?r:1)]:["",0]}function $Xe(t){let{insertSpaces:e,tabSize:r}=zy(t,4,!1),n=Number.MAX_VALUE;for(let i of t){if(/^\s*$/.test(i))continue;let[,o]=iQ(i,e,r);n=Math.min(n,o)}return{insertSpaces:e,tabSize:r,minIndentLevel:n}}function VTe(t,e){if(e===0)return"";if(t===" ")switch(e){case 2:return"  ";case 4:return"    ";case 8:return"        ";case 12:return"            "}if(t==="	")switch(e){case 1:return"	";case 2:return"		";case 3:return"			"}return new Array(e).fill(t).join("")}function WXe(t,e){let r=t.lines,n;if(t.whichLine==="topMost")n=r.find(i=>i!=="");else for(let i=r.length-1;i>=0;--i)if(r[i]!==""){n=r[i];break}return n===void 0?0:iQ(n,e.insertSpaces,e.tabSize)[1]}function Mg(t,e,r){if(r===void 0)return t;let n=WXe(e,r),i=$Xe(t),o=r.insertSpaces?VTe(" ",r.tabSize):"	";return t.map(s=>{if(s==="")return"";{let[a,c]=iQ(s,i.insertSpaces,i.tabSize),u=s.substring(a.length);return VTe(o,n+(c-i.minIndentLevel))+u}})}function E5(t,e){switch(e){case t.above.startMarker:return{type:"start",startMarker:t.above};case t.above.endMarker:return{type:"end",endMarker:t.above};case t.range.startMarker:return{type:"start",startMarker:t.range};case t.range.endMarker:return{type:"end",endMarker:t.range};case t.below.startMarker:return{type:"start",startMarker:t.below};case t.below.endMarker:return{type:"end",endMarker:t.below}}return e.trimStart().startsWith(es.begin(t.language))?{type:"fakestart"}:e.trimStart().startsWith(es.end(t.language))?{type:"fakend"}:null}function KXe(t,e,r,n){let i=(f,m,h)=>{let g=0;for(let S of f)for(let x=S.originalStart;x<S.originalStart+S.originalLength;x++){let T=m.lines[x];g+=T.length}let v=m.getCharCount(),b=h.getCharCount(),y=v-g;return{equalCharCount:y,originalCharCount:v,modifiedCharCount:b,originalCharRatio:v>0?y/v:0,modifiedCharRatio:b>0?y/b:0}},o=f=>{let m=new g2(f.lines),h=new g2(r),v=new x5(m,h).ComputeDiff();return i(v,m,h)},s=e.range.clone();s.mergeFromAbove(e.above.clone()),s.mergeFromBelow(e.below.clone());let a=o(s),c=o(e.range),u={diffToEntireScore:a,diffToRangeScore:c},l=t.get(ce).getLogger("editGeneration");if(l.info(`Diff metrics: ${JSON.stringify(u,null,"	")}`),a.originalCharCount>30&&a.originalCharRatio>.7)return l.info("(case 1) Replacing entire code"),Qd(s,r,n);if(c.originalCharCount>20&&c.originalCharRatio>.7)return l.info("(case 2) Replacing selected code"),Qd(e.range,r,n);let d=Math.min(a.originalCharRatio,a.modifiedCharRatio),p=Math.min(c.originalCharRatio,c.modifiedCharRatio);if(d>.2&&d>p)return l.info("(case 3) Replacing entire code"),Qd(s,r,n);if(p>.2)return l.info("(case 4) Replacing selected code"),Qd(e.range,r,n);if(!e.range.hasContent)return l.info("(case 5) Replacing empty selected code"),Qd(e.range,r,n,{whichLine:"bottomMost",lines:e.above.lines})}function Qd(t,e,r,n){let o=Mg(e,n??{whichLine:"topMost",lines:t.lines},r).slice(0),s=t.lines.slice(0),a=t.firstLineIndex,c=t.lastLineIndex;if(s.length===1&&s[0]==="")return new Yi(c,c,o);let u=YXe(s,o);if(a+=u,s.splice(0,u),o.splice(0,u),s.length===0)return new Yi(c+1,c+1,o);let l=QXe(s,o);return c-=l,s.splice(s.length-l,l),o.splice(o.length-l,l),s.length===0?new Yi(a,a,o):new Yi(a,c+1,o)}function YXe(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[n]!==e[n])return n;return r}function QXe(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[t.length-1-n]!==e[e.length-1-n])return n;return r}function zTe(t,e){let r=t.filter(a=>!/^\s*$/.test(a)),n=e.filter(a=>!/^\s*$/.test(a)),i=XXe(r,n);if(i===0)return[0,0];let o=0;for(let a=0;a<i;a++)for(o++;/^\s*$/.test(t[t.length-o]);)o++;let s=0;for(let a=0;a<i;a++)for(s++;/^\s*$/.test(e[s]);)s++;return[o,s]}function XXe(t,e){for(let r=Math.min(t.length,e.length);r>0;r--){let n=t.length-r,i=!0;for(let o=0;o<r;o++)if(t[n+o]!==e[o]){i=!1;break}if(i)return r}return 0}function JXe(t,e){return new Yi(t.firstLineIndex,t.firstLineIndex,e)}function $Te(t,e,r){let n=Mg(e,{whichLine:"bottomMost",lines:t.lines},r),i=t.lastLineIndex+1;return new Yi(i,i,n)}var ts=W(lr());function Xd(t,e,r,n){return{type:"inlineEdit",edits:t,newWholeRange:e,content:r,followUp:n}}function Wy(t,e,r){let n=ZXe(t,e);if(!n)return null;let{code:i,contentBeforeCode:o,language:s}=n;if(Ao.testLine(r,i)){let a=i.indexOf(`
`);i=i.substring(a).trim()}return{code:i,contentBeforeCode:o,language:s}}function ZXe(t,e){e=e.trim();let n=As(e).at(0);if(n){let c=Fb(e);return{code:n.code,contentBeforeCode:c.slice(0,n.startLine).join(`
`).trimEnd(),language:n.language}}let i=e.split(/\r\n|\r|\n/g),o=!1,s=[],a=[];for(let c of i){let u=E5(t,c);if(o){if(u)return a.push(c),{code:a.join(`
`),contentBeforeCode:s.join(`
`),language:""};a.push(c)}else u?(o=!0,a.push(c)):s.push(c)}return null}var IS=class{constructor(e,r,n,i,o=!0,s=sQ){this.myDocument=e;this.initialSelection=r;this.adjustedSelection=n;this.editStrategy=i;this.extractCodeBlock=o;this.lineFilter=s;this.replyIndentationTracker=null}async processStream(e){let r=this.extractCodeBlock?cQ(e):KTe(e);r=r.filter(this.lineFilter),r=uQ(r,this.myDocument);let n=this.myDocument.firstSentLineIndex;for await(let i of this.findInitialAnchor(r))typeof i!="string"?n=this.handleFirstReplyLine(i.anchor,i.line):n=this.handleSubsequentReplyLine(n,i);return this.myDocument.didReplaceEdits&&n<=this.adjustedSelection.end.line&&this.myDocument.deleteLines(n,this.adjustedSelection.end.line),new v2(this.myDocument.didEdits,this.myDocument.additionalImports)}handleFirstReplyLine(e,r){if(e){this.replyIndentationTracker=new wS(this.myDocument,e.lineIndex,r);let o=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);return this.myDocument.getLine(e.lineIndex).sentInCodeBlock===2?this.myDocument.replaceLines(this.adjustedSelection.start.line,e.lineIndex,o):this.myDocument.replaceLine(e.lineIndex,o)}let n=this.adjustedSelection.start.line;this.replyIndentationTracker=new wS(this.myDocument,n,r);let i=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(this.initialSelection.isEmpty){let o=this.myDocument.getLine(n).content;if(/^\s*$/.test(o)||i.adjustedContent.startsWith(o))return this.myDocument.replaceLine(n,i,!0)}return this.editStrategy===1?this.myDocument.insertLineBefore(n,i):this.editStrategy===3||this.editStrategy===4?this.myDocument.insertLineAfter(n,i):this.myDocument.replaceLine(n,i)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(n.trimmedContent!==""||this.myDocument.didReplaceEdits){let o=this.matchReplyLine(n,e);if(o)return this.myDocument.replaceLines(e,o.lineIndex,n)}if(e>=this.myDocument.getLineCount())return this.myDocument.appendLineAtEndOfDocument(n);let i=this.myDocument.getLine(e);return!i.isSent||i.content===""||n.trimmedContent===""?this.myDocument.insertLineBefore(e,n):i.indentLevel<n.adjustedIndentLevel?this.myDocument.insertLineBefore(e,n):i.indentLevel===n.adjustedIndentLevel&&!this.myDocument.didReplaceEdits?this.myDocument.insertLineBefore(e,n):this.myDocument.replaceLine(e,n)}matchReplyLine(e,r){let n=e.trimmedContent.length<=3;for(let i=r;i<this.myDocument.getLineCount();i++){let o=this.myDocument.getLine(i);if(o.isSent){if(o.normalizedContent===e.adjustedContent)return new C5(i);if(o.trimmedContent.length>0&&o.indentLevel<e.adjustedIndentLevel||n&&o.trimmedContent.length>0)return null}}return null}findInitialAnchor(e){return new Ru(async r=>{let n=[],i=0,o=!1;for await(let s of e)if(o)r.emitOne(s);else if(n.push(s),i+=s.trim().length,i>10){let a=this.searchForEqualSentLines(n);o=!0,r.emitOne(new oQ(n[0],a)),r.emitMany(n.slice(1))}})}searchForEqualSentLines(e){let r=e.map(n=>n.trim());for(let n=this.myDocument.firstSentLineIndex,i=this.myDocument.getLineCount()-e.length;n<=i;n++){if(!this.myDocument.getLine(n).isSent)continue;let o=!0;for(let s=0;s<r.length;s++){let a=this.myDocument.getLine(n+s);if(!a.isSent||a.trimmedContent!==r[s]){o=!1;break}}if(o)return new C5(n)}return null}},T5=class{constructor(e,r,n=sQ){this._myDocument=e;this._cursorPosition=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=cQ(e);r=r.filter(this._lineFilter),r=uQ(r,this._myDocument);let n=0;for await(let i of r)this.replyIndentationTracker?n=this.handleSubsequentReplyLine(n,i):n=this.handleFirstReplyLine(i);return new v2(this._myDocument.didEdits,this._myDocument.additionalImports)}handleFirstReplyLine(e){let r=this._cursorPosition.line;this.replyIndentationTracker=new wS(this._myDocument,r,e);let n=this.replyIndentationTracker.reindent(e,this._myDocument.indentStyle),i=this._myDocument.getLine(r).content;return/^\s*$/.test(i)||n.adjustedContent.startsWith(i)?this._myDocument.replaceLine(r,n,!0):this._myDocument.insertLineAfter(r,n)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this._myDocument.indentStyle);return this._myDocument.insertLineBefore(e,n)}},CS=class{constructor(e,r,n=sQ){this._myDocument=e;this._selection=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=cQ(e);r=r.filter(this._lineFilter),r=uQ(r,this._myDocument);let n=0,i,o="";this._selection.end.line>this._selection.start.line&&this._selection.end.character===0?i=this._selection.end.line-this._selection.start.line:(i=this._selection.end.line-this._selection.start.line+1,o=this._myDocument.getLine(this._selection.end.line).content.substring(this._selection.end.character));for await(let s of r)if(this.replyIndentationTracker){let a=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);i>0?(n=this._myDocument.replaceLine(n,a),i--):n=this._myDocument.insertLineAfter(n-1,a)}else{let a=this._selection.start.line;this.replyIndentationTracker=new wS(this._myDocument,a,s);let c=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);n=this._myDocument.replaceLine(a,c),i--}return this._myDocument.didEdits&&i>0&&this._myDocument.deleteLines(n,n+i-1),this._myDocument.didEdits&&o.length>0&&this._myDocument.replaceLine(n-1,this._myDocument.getLine(n-1).content+o),new v2(this._myDocument.didEdits,this._myDocument.additionalImports)}},sQ=()=>!0,v2=class{constructor(e,r){this.didEdits=e;this.additionalImports=r}},wS=class{constructor(e,r,n){let i=0;for(let s=r;s>=0;s--){let a=e.getLine(s);if(a.content.length>0){i=a.indentLevel,s!==r&&a.content.endsWith("{")&&(i+=1);break}}this._replyIndentStyle=TS.guessIndentStyleFromLine(n);let o=Ng(n,this._replyIndentStyle?.tabSize??4);this.indentDelta=o-i}reindent(e,r){if(e==="")return new I5("",0,"",0);this._replyIndentStyle||(this._replyIndentStyle=TS.guessIndentStyleFromLine(e));let n=0,i=0,o=a=>(n=a,i=Math.max(n-this.indentDelta,0),i),s=TS.reindentLine(e,this._replyIndentStyle??{insertSpaces:!0,tabSize:4},r,o);return new I5(e,n,s,i)}},oQ=class{constructor(e,r){this.line=e;this.anchor=r}},RS=class{constructor(e,r){this.lineIndex=e;this.sentInCodeBlock=r}},AS=class{constructor(e,r){this.startLineIndex=e;this.endLineIndex=r}},PS=class{constructor(e,r,n,i,o,s){this.progress=e;this.languageId=o;this._originalLines=[];this.lines=[];this._didEdits=!1;this._didReplaceEdits=!1;this._additionalImports=[];this.indentStyle=TS.getDocumentIndentStyle(r,s),this._originalLines=r.split(/\r\n|\r|\n/g);for(let a=0;a<this._originalLines.length;a++)this.lines[a]=new Fg(this._originalLines[a],this.indentStyle);this.firstSentLineIndex=Number.MAX_SAFE_INTEGER;for(let a of n)this.lines[a.lineIndex].markSent(a.sentInCodeBlock),this.firstSentLineIndex=Math.min(this.firstSentLineIndex,a.lineIndex);this.firstSentLineIndex=Math.min(this.firstSentLineIndex,i.startLineIndex)}get didEdits(){return this._didEdits}get didReplaceEdits(){return this._didReplaceEdits}get additionalImports(){return this._additionalImports}getText(){return this.lines.map(e=>e.content).join(`
`)}getLineCount(){return this.lines.length}getLine(e){if(e<0||e>=this.lines.length)throw new Error("Invalid index");return this.lines[e]}addAdditionalImport(e){this._additionalImports.push(e)}replaceLine(e,r,n=!1){let i=typeof r=="string"?r:r.adjustedContent;return this.lines[e]=new Fg(i,this.indentStyle),this.progress.report({edits:[new hi(new Je(e,0,e,1e3),i)]}),this._didEdits=!0,this._didReplaceEdits=this._didReplaceEdits||!n,e+1}replaceLines(e,r,n){if(e>r)throw new Error("Invalid range");return e===r?this.replaceLine(e,n):(this.lines.splice(e,r-e+1,new Fg(n.adjustedContent,this.indentStyle)),this.progress.report({edits:[new hi(new Je(e,0,r,1e3),n.adjustedContent)]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1)}appendLineAtEndOfDocument(e){return this.lines.push(new Fg(e.adjustedContent,this.indentStyle)),this.progress.report({edits:[new hi(new Je(this.lines.length-1,1e3,this.lines.length-1,1e3),`
`+e.adjustedContent)]}),this._didEdits=!0,this.lines.length}insertLineAfter(e,r){return this.lines.splice(e+1,0,new Fg(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new hi(new Je(e,1e3,e,1e3),`
`+r.adjustedContent)]}),this._didEdits=!0,e+2}insertLineBefore(e,r){return e===this.lines.length?this.insertLineAfter(e-1,r):(this.lines.splice(e,0,new Fg(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new hi(new Je(e,0,e,0),r.adjustedContent+`
`)]}),this._didEdits=!0,e+1)}deleteLines(e,r){return this.lines.splice(e,r-e+1),this.progress.report({edits:[new hi(new Je(e,0,r+1,0),"")]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1}},I5=class{constructor(e,r,n,i){this.originalContent=e;this.originalIndentLevel=r;this.adjustedContent=n;this.adjustedIndentLevel=i;this.trimmedContent=this.originalContent.trim()}},C5=class{constructor(e){this.lineIndex=e}};var Fg=class{constructor(e,r){this.content=e;this._indentStyle=r;this._sentInCodeBlock=0;this._trimmedContent=null;this._normalizedContent=null;this._indentLevel=-1}get isSent(){return this._sentInCodeBlock!==0}get sentInCodeBlock(){return this._sentInCodeBlock}get trimmedContent(){return this._trimmedContent===null&&(this._trimmedContent=this.content.trim()),this._trimmedContent}get normalizedContent(){return this._normalizedContent===null&&(this._normalizedContent=tQ(this.content,this._indentStyle.tabSize,this._indentStyle.insertSpaces)),this._normalizedContent}get indentLevel(){return this._indentLevel===-1&&(this._indentLevel=Ng(this.content,this._indentStyle.tabSize)),this._indentLevel}markSent(e){this._sentInCodeBlock=e}},TS=class t{static getDocumentIndentStyle(e,r){return r||zy(Lg.fromString(e),4,!1)}static guessIndentStyleFromLine(e){let r=t._getLeadingWhitespace(e);if(!(r===""||r===" "))return zy([e],4,!1)}static reindentLine(e,r,n,i=o=>o){let o=Ng(e,r.tabSize),s=i(o);for(;o>0;)e=this._outdent(e,r),o--;for(;o<s;)e="	"+e,o++;return tQ(e,n.tabSize,n.insertSpaces)}static _outdent(e,r){let n=0;for(;n<e.length;){let i=e.charCodeAt(n);if(i===9){n++;break}if(i!==32||n===r.tabSize)break;n++}return e.substring(n)}static _getLeadingWhitespace(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n!==32&&n!==9)return e.substring(0,r)}return e}};function aQ(t){return new Ru(async e=>{let r;(a=>(a[a.BeforeCodeBlock=0]="BeforeCodeBlock",a[a.InCodeBlock=1]="InCodeBlock",a[a.AfterCodeBlock=2]="AfterCodeBlock"))(r||={});let n=0;for await(let i of t){if(n===0){if(/^```/.test(i)){n=1,e.emitOne({value:i,kind:2});continue}}else n===1&&/^```/.test(i)&&(n=2);e.emitOne({value:i,kind:n===1?1:2})}})}function WTe(t){let e=es.begin(t),r=es.end(t),n=!0,i=!1;return o=>n&&Ao.testLine(t,o)?(n=!1,!1):!i&&/^\s*$/.test(o)||o.startsWith(e)||o.startsWith(r)?!1:(i=!0,!0)}function cQ(t){let e=KTe(t);return aQ(e).filter(n=>n.kind===1).map(n=>n.value)}function KTe(t){return new Ru(async e=>{let r="";for await(let n of t){r+=n;do{let i=r.indexOf(`
`);if(i===-1)break;let o=r.substring(0,i);r=r.substring(i+1),e.emitOne(o)}while(!0)}r.length>0&&e.emitOne(r)})}function uQ(t,e){let r=!1,n=!1;return t.filter(i=>ES(i,e.languageId)?(e.addAdditionalImport(nQ(i)),r=!0,!1):i.trim().length===0&&r?n:(n=!0,!0))}var y2=class extends Error{constructor(r){super(typeof r=="string"?r:r.message);this.errorDetails=typeof r=="string"?{message:r}:r}},Jd=class extends vc{constructor(r){super();this.factory=r}create(r,n){return this.factory(r,n)}};var b2=class t{constructor(){this._data=new Map;this._messages={0:t._shuffleArray(t._progressMessages[0]),1:t._shuffleArray(t._progressMessages[1]),2:t._shuffleArray(t._progressMessages[2]),3:t._shuffleArray(t._progressMessages[3])}}static{this._progressMessages={0:[ts.t("Fetching response, it won't be long now."),ts.t("Working hard to get your response..."),ts.t("Request is being processed, sit tight!"),ts.t("Response is being prepared, please be patient.")],1:[ts.t("Data is on its way, please wait a moment."),ts.t("Request is being processed, sit tight!"),ts.t("Response is being prepared, please be patient.")],2:[ts.t("Data is on its way, please wait a moment."),ts.t("Source code arriving..."),ts.t("Hold on tight, we're almost there!"),ts.t("Response is being prepared, please be patient."),ts.t("Code chunks incoming..."),ts.t("Receiving code, please wait..."),ts.t("Code is being processed, please wait...")],3:[ts.t("Almost done, just a few more seconds..."),ts.t("Processing response, please wait...")]}}next(e){let r=this._data.get(e);if(r){if(Date.now()-r.time<3579)return this._messages[e][r.index];r.index+=1,r.time=Date.now();let n=this._messages[e];return n[Math.min(n.length-1,r.index)]}else return this._data.set(e,{index:0,time:Date.now()}),this._messages[e][0]}static _shuffleArray(e){return BR(e),e}},w5=class{constructor(e){this.progress=e;this._progressMessages=new b2;this._lastText=void 0}_reportProgress(e){let r=this._progressMessages.next(e);this.progress.report({message:r})}update(e){return this._reportProgress(this._lastText?e.includes("```")?2:1:0),this._lastText=e,{shouldFinish:jf(e)}}async finish(){if(!this._lastText)throw new Error("No text");return this._reportProgress(3),await this.interpretReply(this._lastText)}},kS=class t extends w5{constructor(r,n){super(n);this.replyInterpreter=r}static createFactory(r){return n=>new t(r,n)}interpretReply(r){return this.replyInterpreter(r,this.progress)}},DS=class extends w5{constructor(r,n,i,o,s){super(s);this.accessor=r;this.selectionContextMetadata=n;this.context=i;this.editStrategy=o}interpretReply(r){let{contextInfo:n,wholeRange:i}=this.selectionContextMetadata,o=Wy(n,r,this.context.language);if(!o)return{type:"conversational",content:r};let{code:s}=o,a=Og(this.accessor,n,s,this.editStrategy,this.context.fileIndentInfo,$y.fromDocumentContext(this.context));return Xd(a,i)}},R5=class t{constructor(e){this._progress=e;this._responseStream=new D0;this._lastLength=0;this._promise=void 0;this._progressMessages=new b2}static createFactory(){return e=>new t(e)}_reportProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}update(e){this._promise||(this._reportProgress(0),this._promise=this.processStream(this._responseStream,this._progress)),this._reportProgress(1);let r=e.slice(this._lastLength);return this._lastLength=e.length,this._responseStream.emitOne(r),{shouldFinish:!1}}async finish(){return this._responseStream.resolve(),{type:"conversational",content:""}}async processStream(e,r){for await(let n of e.asyncIterable)r.report({content:n});return!1}};function tJe(t,e){let r=new Bg(t),n=e.map(i=>{let o=r.toOffsetRange(i.range);return{startOffset:o.start,endOffset:o.endExclusive,text:i.newText}});lQ(n,(i,o)=>i.startOffset-o.startOffset||i.endOffset-o.endOffset);for(let i=n.length-1;i>=0;i--){let o=n[i];t=t.substring(0,o.startOffset)+o.text+t.substring(o.endOffset)}return t}function lQ(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);lQ(n,e),lQ(i,e);let o=0,s=0,a=0;for(;o<n.length&&s<i.length;)e(n[o],i[s])<=0?t[a++]=n[o++]:t[a++]=i[s++];for(;o<n.length;)t[a++]=n[o++];for(;s<i.length;)t[a++]=i[s++];return t}var Bg=class{constructor(e){this.textLength=e.length,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0),this.lineLengthsByLineIdx=[];let r=0;for(let n=0;n<e.length;n++)e.charAt(n)===`
`?(this.lineStartOffsetByLineIdx.push(n+1),this.lineLengthsByLineIdx.push(r),r=0):r++;this.lineLengthsByLineIdx.push(r)}getLineCount(){return this.lineStartOffsetByLineIdx.length}getLineOffset(e){return this.lineStartOffsetByLineIdx[e]}getLineLength(e){return this.lineLengthsByLineIdx[e]}getOffset(e){return e=this.validatePosition(e),this.lineStartOffsetByLineIdx[e.line]+e.character}getPosition(e){e<0&&(e=0),e>this.textLength&&(e=this.textLength);let r=w0(this.lineStartOffsetByLineIdx,o=>o<=e),n=r,i=e-this.lineStartOffsetByLineIdx[r];return new Bn(n,i)}fromOffsetRange(e){return new Je(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Vr(this.getOffset(e.start),this.getOffset(e.end))}validatePosition(e){let{line:r,character:n}=e;return r<0?(r=0,n=0):r>=this.lineLengthsByLineIdx.length?(r=this.lineLengthsByLineIdx.length-1,n=this.lineLengthsByLineIdx[r]):n<0?n=0:n>this.lineLengthsByLineIdx[r]&&(n=this.lineLengthsByLineIdx[r]),new Bn(r,n)}validateRange(e){return new Je(this.validatePosition(e.start),this.validatePosition(e.end))}},NS=class{constructor(e,r,n,i,o,s){this._accessor=e;this._selectionContextMetadata=r;this._context=n;this._editStrategy=i;this._extractCodeBlock=o;this._progress=s;this._lastText=void 0;this._initialDocText=this._context.document.getText();this._documentInfo=$y.fromDocumentContext(this._context);if(!this._selectionContextMetadata)throw new Error("code reply NEEDS a selection context");let a=this._selectionContextMetadata.contextInfo,c=a.range.firstLineIndex,u=a.range.firstLineIndex+a.range.lines.length-1,l;{let d=[],p=(m,h)=>{for(let g=0;g<m.lines.length;g++){let v=m.firstLineIndex+g;d.push(new RS(v,h))}};p(a.above,1),p(a.range,2),p(a.below,3);let f=new AS(c,u);l=new PS(s,this._context.document.getText(),d,f,this._context.document.languageId,this._context.fileIndentInfo)}this.streaming=new _2(s,new IS(l,this._context.selection,new Ep(c,0,u,this._context.document.lineAt(u).text.length),this._editStrategy,this._extractCodeBlock,WTe(this._context.language)))}update(e){return this.streaming.update(e),this._lastText=e,{shouldFinish:jf(this._lastText)}}async finish(){if(!this._lastText)throw new Error("No text");let{didEdits:e}=await this.streaming.finish(),r=await this._interpretReply(this._lastText);if(r.type==="inlineEdit"){let n=tJe(this._initialDocText,r.edits);return{type:"inlineEdit",edits:[{range:new Je(new Bn(0,0),new Bn(Number.MAX_SAFE_INTEGER,0)),newText:n}],newWholeRange:r.newWholeRange}}return e&&this._progress.report({edits:[{range:new Je(new Bn(0,0),new Bn(Number.MAX_SAFE_INTEGER,0)),newText:this._initialDocText}]}),r}_interpretReply(e){let{contextInfo:r,wholeRange:n}=this._selectionContextMetadata;if(this._extractCodeBlock){let i=Wy(r,e,this._context.language);if(!i)return{type:"conversational",content:e};let{code:o}=i,s=Og(this._accessor,r,o,this._editStrategy,this._context.fileIndentInfo,this._documentInfo);return Xd(s,n)}else{let i=Og(this._accessor,r,e,this._editStrategy,this._context.fileIndentInfo,this._documentInfo);return Xd(i,n)}}},_2=class{constructor(e,r){this._progress=e;this._responseStream=new D0;this._lastLength=0;this._lastText=void 0;this._progressMessages=new b2;this._streamingPromise=r.processStream(this._responseStream.asyncIterable)}update(e){this._reportMessageProgress(this._lastText?2:0),this._lastText=e;let r=e.slice(this._lastLength);this._lastLength=e.length,this._responseStream.emitOne(r)}_reportMessageProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}async finish(){return this._responseStream.resolve(),await this._streamingPromise}};var S2=W(st());var ar=class extends Y{render(){return vscpp(vscppf,null,"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.")}};var P5=W(st());var LS=W(st()),A5=class extends Y{render(){return vscpp(vscppf,null,this.props.children)}};var Vt=class extends Y{render(e,r){let n=[],i=this.props.history.filter(o=>o.status==="success"||o.status==="in-progress");for(let o of i)o.request.type==="user"&&n.push(vscpp(P5.UserMessage,null,o.request.message)),o.response?.type==="model"&&n.push(vscpp(P5.AssistantMessage,{name:o.response.name},o.response.message));return vscpp(LS.PrioritizedList,{priority:this.props.priority,descending:!1},n)}};var QTe=W(st());var k5=class extends Y{constructor(r,n){super(r,n);this._contextService=n.get(Kr),this._telemetryService=n.get(ke),this._logService=n.get(ce),this._ignoreService=n.get(Oe)}_handleFoulPrompt(){let r=new Error("BAD PROMPT");if(this._logService.defaultLogger.error(r),this._contextService.extensionMode!==ls.Production)throw r;this._telemetryService.sendMSFTTelemetryErrorEvent("prompt.invalidreference",{stack:r.stack})}},vt=class extends k5{async prepare(e,r,n){return{isIgnored:this.props.uri?await this._ignoreService.isCopilotIgnored(this.props.uri):!1}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r=Ii(this.props.languageId??"",this.props.code,this.props.shouldTrim??!0);return vscpp(QTe.TextChunk,null,r)}};var Gf=class extends k5{get insertLineBreakBefore(){return!1}async prepare(){return{isIgnored:await this._ignoreService.isCopilotIgnored(this.props.value)}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r;return this.props.mode===1?r=this.props.value.path:r=xc(this.props.value),vscpp(vscppf,null,r)}};async function lu(t){return{useScoreFunction:await t.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.summarizedDocument.useScoreFunction")??!1}}function du(t,e,r,n,i){let o=e.getText(),s=x2.convertToLinkedTree(o,e.languageId,n),a=e.offsetAt(r.start),c=e.offsetAt(r.end);return rJe(t,s,a,c,i)}var dQ=class{constructor(e,r,n,i){this.document=e;this.selection=r;this.adjustedSelection=n;this._debugData=i}getDebugData(){return this._debugData}};function rJe(t,e,r,n,i){let o=nJe(e,r,n),s=[];e.visit(f=>{f.isSurviving||s.push(f)});let a=f=>f.endIndex<o.start?o.start-f.endIndex:f.startIndex>o.endExclusive?3*(f.startIndex-o.endExclusive):0,c=a;i.useScoreFunction?(c=f=>100*f.scopeDistance+f.depth+10*(a(f)/e.text.length),s.sort(qR(c,HR))):s.sort((f,m)=>{if(f.scopeDistance===m.scopeDistance){if(f.depth===m.depth){let h=a(f),g=a(m);return h-g}return f.depth-m.depth}return f.scopeDistance-m.scopeDistance});let u=e.getSummarizedDocumentBuilder();for(;s.length>0&&u.textLength<t;){s.shift().markToKeep();let m=e.getSummarizedDocumentBuilder();if(m.textLength<=t)u=m;else break}let l=u.finalize(),d=l.convertOriginalRangeToPostEditsRange(new Vr(r,n)),p=l.convertOriginalRangeToPostEditsRange(o);return new dQ(l,d,p,{root:e,scoreFn:c})}function nJe(t,e,r){[e,r]=iJe(t,e,r);let[n,i,o]=oJe(t,e,r);{let s;for(n instanceof OS?(s=n.nextLeaf,n.parent.markSelectedGap(n.gapIndex)):(s=n,s.markSelected());s&&s.startIndex<=r;)s.markSelected(),s=s.nextLeaf}return t.setSelection(new Vr(i,o)),t.propagateScopeDistancesToChildren(),new Vr(i,o)}function iJe(t,e,r){let n=t.text.substring(e,r);if(!/^\s*$/.test(n))return[e,r];let o=e,s=r,a=!0,c=!0;do{if(c&&s>=t.text.length&&(c=!1),c){let u=t.text.charCodeAt(s);if(u===13||u===10)c=!1;else{if(u!==32&&u!==9)return[s,s+1];s++}}if(a&&o===0&&(a=!1),a){let u=t.text.charCodeAt(o-1);if(u===13||u===10)a=!1;else{if(u!==32&&u!==9)return[o-1,o];o--}}}while(a||c);return[e,r]}function oJe(t,e,r){e=XTe(t,e),r=JTe(t,r);let n=t.findLeaf2(e),i=t.findLeaf2(r),o=!1,s=c=>{c<e&&(e=XTe(t,c),o=!0,n=t.findLeaf2(e))},a=c=>{c>r&&(r=JTe(t,c),o=!0,i=t.findLeaf2(r))};do{if(o=!1,n instanceof OS){let c=n.isFirstGapInParent?n.parent.lastGap:null,u=n.hasSelectedContent(e,r),l=c&&c.hasSelectedContent(e,r),d=u||l;d&&s(n.firstNonWhitespaceIndex),d&&c&&a(c.lastNonWhitespaceIndex+1)}if(i instanceof OS){let c=i.isLastGapInParent?i.parent.firstGap:null,u=i.hasSelectedContent(e,r),l=c&&c.hasSelectedContent(e,r),d=u||l;d&&i.lastNonWhitespaceIndex+1>r&&a(i.lastNonWhitespaceIndex+1),d&&c&&s(c.firstNonWhitespaceIndex)}n instanceof x2&&t.hasContentInRange(new Vr(e,r))&&n.startIndex<e&&s(n.startIndex),i instanceof x2&&t.hasContentInRange(new Vr(e,r))&&i.endIndex>r&&a(i.endIndex)}while(o);return[n,e,r]}function XTe(t,e){for(;e>0;){let r=t.text.charCodeAt(e-1);if(r!==32&&r!==9)break;e--}return e}function JTe(t,e){if((e>0?t.text.charCodeAt(e-1):0)===10)return e;for(;e<t.text.length;){let n=t.text.charCodeAt(e);if(n!==32&&n!==9)break;e++}return e}function ZTe(t){return t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}var x2=class t{constructor(e,r,n,i,o,s,a,c,u){this._originalText=e;this._languageId=r;this.parent=n;this.startIndex=i;this.endIndex=o;this.kind=s;this.children=a;this.depth=c;this.myIndex=u;this._scopeDistance=Number.MAX_SAFE_INTEGER;this._isSurviving=!1;this._summarizedDocumentBuilder=null;this._survivingGapBeforeChild=-1;this._hasSurvivingChildren=!1;this._selection=null}static convertToLinkedTree(e,r,n){let i=new t(e,r,null,n.startIndex,n.endIndex,n.kind,[],0,0);return t._convertChildrenToLinkedTree(e,r,n,i,1),i}static _convertChildrenToLinkedTree(e,r,n,i,o){for(let s=0;s<n.children.length;s++){let a=n.children[s],c=new t(e,r,i,a.startIndex,a.endIndex,a.kind,[],o,s);i.children.push(c),t._convertChildrenToLinkedTree(e,r,a,c,o+1)}}get scopeDistance(){return this._scopeDistance}get isSurviving(){return this._isSurviving}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}textAt(e){return e.substring(this._originalText)}hasContentInRange(e){let r=this.textAt(e);return!/^\s*$/s.test(r)}toString(){return`Node (${this.startIndex}-${this.endIndex}) ${ZTe(this._originalText.substring(this.startIndex,this.endIndex))}`}setSelection(e){this._selection=e;for(let r of this.children)r.setSelection(e)}_touchesSelection(e){return this._selection?e.start<=this._selection.endExclusive&&this._selection.start<=e.endExclusive:!1}markSelected(){this.markToKeep();{let e=1,r=this.parent;for(this._scopeDistance=0;r&&r._scopeDistance>e;)r._scopeDistance=e,e++,r=r.parent}}gapBeforeChild(e){let r=e===0?this.startIndex:this.children[e-1].endIndex,n=e===this.children.length?this.endIndex:this.children[e].startIndex;return new OS(this._originalText,this,r,n,e)}markSelectedGap(e){this._survivingGapBeforeChild=e,this.markSelected()}childAt(e){return this.children[e]??null}get firstGap(){return this.children.length===0?null:this.gapBeforeChild(0)}get lastGap(){return this.children.length===0?null:this.gapBeforeChild(this.children.length)}markToKeep(){if(!this.isSurviving){this._isSurviving=!0;{let e=this.parent;for(;e;)e._summarizedDocumentBuilder=null,e._hasSurvivingChildren=!0,e._isSurviving=!0,e=e.parent}}}propagateScopeDistancesToChildren(){for(let e of this.children)e._scopeDistance>this._scopeDistance&&(e._scopeDistance=this._scopeDistance),e.propagateScopeDistancesToChildren()}findLeaf(e){if(this.children.length===0)return[this,0];let r=Cte(this.children.length,n=>{let i=this.children[n];return e>=i.startIndex&&e<=i.endIndex?0:e<i.startIndex?1:-1});return r<0?[this,r]:this.children[r].findLeaf(e)}findLeaf2(e){let[r,n]=this.findLeaf(e);return n<0?r.gapBeforeChild(~n):r}get nextLeaf(){let e=this;do{let r=e.nextSibling;if(r)return r.leftMostLeafChild;e=e.parent}while(e);return null}get leftMostLeafChild(){let e=this;for(;e.children.length>0;)e=e.children[0];return e}get prevSibling(){let e=this.parent,r=this.myIndex-1;return e&&r>=0?e.children[r]:null}get nextSibling(){let e=this.parent,r=this.myIndex+1;return e&&r<e.children.length?e.children[r]:null}getSummarizedDocumentBuilder(){return this._summarizedDocumentBuilder===null&&(this._summarizedDocumentBuilder=new fQ(this._originalText,this._languageId,this.startIndex,this.endIndex),this._extractSurvivingText(this._summarizedDocumentBuilder)),this._summarizedDocumentBuilder}_extractSurvivingText(e){if(!this.isSurviving)return;if(this.children.length===0)return e.appendText(this.startIndex,this.endIndex);let r=e.createSurvivingStringPiece(this.startIndex,this.children[0].startIndex),n=e.createSurvivingStringPiece(this.children[this.children.length-1].endIndex,this.endIndex);if(!this._hasSurvivingChildren){let i=r.trimEnd(),o=n.trimStart();i.endsWith("{")&&o.startsWith("}")?(e.appendSurvivingStringPiece(i),e.setNextElideText("\u2026"),e.appendSurvivingStringPiece(o)):(e.appendSurvivingStringPiece(r),e.appendSurvivingStringPiece(n));return}for(let i=0;i<this.children.length;i++){let o=this.children[i],s=o.isSurviving,a=i>0?this.children[i-1]:null,c=a?a.isSurviving:!1;this._appendGapIfSurviving(e,this.gapBeforeChild(i),c&&s),s&&e.appendChildBuilder(o.getSummarizedDocumentBuilder())}this._appendGapIfSurviving(e,this.gapBeforeChild(this.children.length),!1)}_appendGapIfSurviving(e,r,n){if(this._touchesSelection(r.range)||this._survivingGapBeforeChild===r.gapIndex){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i)}else if(r.gapIndex===0||r.gapIndex===this.children.length||n){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i.trimDupNewLines())}}visit(e){e(this);for(let r of this.children)r.visit(e)}},OS=class t{constructor(e,r,n,i,o){this._originalText=e;this.parent=r;this.startIndex=n;this.endIndex=i;this.gapIndex=o;if(this.startIndex>this.endIndex)throw new Uo("Invalid gap")}equals(e){return e instanceof t?this.startIndex===e.startIndex&&this.endIndex===e.endIndex:!1}get range(){return new Vr(this.startIndex,this.endIndex)}get isFirstGapInParent(){return this.gapIndex===0}get isLastGapInParent(){return this.gapIndex===this.parent.children.length}toString(){return`NodeGap (${this.startIndex}-${this.endIndex}) ${ZTe(this._originalText.substring(this.startIndex,this.endIndex))}`}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}hasSelectedContent(e,r){let n=this.range.intersect(new Vr(e,r)),i=n?this._originalText.substring(n.start,n.endExclusive):"";return!/^\s*$/s.test(i)}get firstNonWhitespaceIndex(){let e=this.startIndex;for(;e<this.endIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e++}return this.endIndex}get lastNonWhitespaceIndex(){let e=this.endIndex-1;for(;e>=this.startIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e--}return this.startIndex-1}get nextLeaf(){let e=this.parent.childAt(this.gapIndex);return e?e.leftMostLeafChild:this.parent.nextLeaf}},pQ=class t{constructor(e,r,n){this.allText=e;this.startIndex=r;this.endIndex=n}get text(){return this.allText.substring(this.startIndex,this.endIndex)}trimStart(){let e=this.text.trimStart();return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimStartDupNewLines(){let e=this.text.replace(/^\n+/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimEnd(){let e=this.text.trimEnd();return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimEndDupNewLines(){let e=this.text.replace(/\n+$/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimDupNewLines(){return this.trimStartDupNewLines().trimEndDupNewLines()}startsWith(e){return this.text.startsWith(e)}endsWith(e){return this.text.endsWith(e)}},qg=class{constructor(e,r,n){this.originalText=e;this.edits=r;this.languageId=n;this._text=new Ms(()=>this.edits.apply(this.originalText));this._transformer=new Ms(()=>new Bg(this.text))}get transformer(){return this._transformer.value}get text(){return this._text.value}get lineCount(){return this.transformer.getLineCount()}convertOriginalOffsetToPostEditsOffset(e){return this.edits.convertOriginalOffsetToPostEditsOffset(e)}convertOriginalRangeToPostEditsRange(e){return this.edits.convertOriginalRangeToPostEditsRange(e)}convertPostEditsOffsetToOriginalOffset(e){return this.edits.convertPostEditsOffsetToOriginalOffset(e)}},fQ=class{constructor(e,r,n,i){this._allText=e;this._languageId=r;this._scopeStartIndex=n;this._scopeEndIndex=i;this._elidedRanges=[];this._len=0;this._nextElidedRangeReplacementText=null;this._firstStartIndex=-1,this._lastEndIndex=n}createSurvivingStringPiece(e,r){return new pQ(this._allText,e,r)}get textLength(){return this._len}finalize(){let e=[];return this._scopeStartIndex<this._firstStartIndex&&e.push(new wi(new Vr(this._scopeStartIndex,this._firstStartIndex),"")),e=e.concat(this._elidedRanges),this._lastEndIndex<this._scopeEndIndex&&e.push(new wi(new Vr(this._lastEndIndex,this._scopeEndIndex),"")),new qg(this._allText,new Wi(e),this._languageId)}appendSurvivingStringPiece(e){this.appendText(e.startIndex,e.endIndex)}appendText(e,r){this._markSurviving(e,r);let n=this._allText.substring(e,r);this._len+=n.length}appendChildBuilder(e){this._markSurviving(e._firstStartIndex,e._lastEndIndex),this._elidedRanges=this._elidedRanges.concat(e._elidedRanges),this._len+=e._len}_markSurviving(e,r){this._firstStartIndex===-1?this._firstStartIndex=e:e>this._lastEndIndex&&(this._nextElidedRangeReplacementText?(this._len+=this._nextElidedRangeReplacementText.length,this._elidedRanges.push(new wi(new Vr(this._lastEndIndex,e),this._nextElidedRangeReplacementText)),this._nextElidedRangeReplacementText=null):this._elidedRanges.push(new wi(new Vr(this._lastEndIndex,e),""))),this._lastEndIndex=r}setNextElideText(e){this._nextElidedRangeReplacementText=e}};var US=W(st());var MS=class{constructor(e){this._derivedDocument=e;this._workingCopyOriginalDocument=new hQ(this._derivedDocument.originalText)}get originalText(){return this._workingCopyOriginalDocument.text}get text(){return this._derivedDocument.text}get languageId(){return this._derivedDocument.languageId}get derivedDocumentTransformer(){return this._derivedDocument.transformer}get originalDocumentTransformer(){return this._workingCopyOriginalDocument.transformer}get allReportedEdits(){return this._workingCopyOriginalDocument.appliedEdits}createDerivedDocumentProgress(e,r){return new mQ(e,r,this)}applyAndTransformProgressItem(e){if(!e.edits)return e;let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=eIe(n.transformer,e.edits).tryRebase(i.inverse(r.text)),a=i.tryRebase(s),c={...e,edits:N5(r.transformer,s)};return this._workingCopyOriginalDocument.applyOffsetEdits(s),this._derivedDocument=new qg(this._workingCopyOriginalDocument.text,a,this._derivedDocument.languageId),c}rebaseEdits(e){let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=eIe(n.transformer,e).tryRebase(i.inverse(r.text));return N5(r.transformer,s)}convertPostEditsOffsetToOriginalOffset(e){return this._derivedDocument.convertPostEditsOffsetToOriginalOffset(e)}},mQ=class{constructor(e,r,n){this._actual=e;this._streamEdits=r;this._workingCopySummarizedDoc=n}get finalEdits(){return this._streamEdits?new Wi([]):this._workingCopySummarizedDoc.allReportedEdits}report(e){let r=this._workingCopySummarizedDoc.applyAndTransformProgressItem(e);r.edits&&!this._streamEdits||this._actual.report(r)}},hQ=class{constructor(e){this._text=e;this._transformer=null;this._appliedEdits=new Wi([])}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new Bg(this._text)),this._transformer}get appliedEdits(){return this._appliedEdits}applyOffsetEdits(e){let{edits:r}=e,n=this._text;for(let i=r.length-1;i>=0;i--){let o=r[i];n=n.substring(0,o.replaceRange.start)+o.newText+n.substring(o.replaceRange.endExclusive)}this._text=n,this._transformer=null,this._appliedEdits=this._appliedEdits.compose(e)}},D5=class{constructor(e){this._text=e;this._transformer=null}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new Bg(this._text)),this._transformer}};function eIe(t,e){let r=e.map(n=>new hi(t.validateRange(n.range),n.newText));return new Wi(r.map(n=>new wi(t.toOffsetRange(n.range),n.newText)))}function N5(t,{edits:e}){return e.map(r=>new hi(t.fromOffsetRange(r.replaceRange),r.newText))}var L5=class extends Y{async prepare(){return{structure:await Yd(this.accessor,this.props.documentContext.document,this.props.documentContext.fileIndentInfo),wholeRange:this.props.documentContext.document.validateRange(this.props.documentContext.wholeRange),summarizedDocumentSettings:await lu(this.accessor),isIgnored:await this.accessor.get(Oe).isCopilotIgnored(this.props.documentContext.document.uri)}}render(e,r){if(gr(this.props.documentContext.document.uri))throw Fn("InlineChatGenerateCodePrompt should not be used with a notebook!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let i=r.endpoint.modelMaxPromptTokens/3*4,o=du(i,this.props.documentContext.document,e.wholeRange,e.structure,e.summarizedDocumentSettings),{language:s,document:a}=this.props.documentContext,{document:c}=o,u=a.offsetAt(e.wholeRange.end),l=c.convertOriginalOffsetToPostEditsOffset(u),d=c.transformer.getPosition(l),p=c.text.length>0,f=c.text.substring(0,l),m=c.text.substring(l),h=`${f}$PLACEHOLDER$${m}`,g;return r.endpoint.model==="gpt-4"?g=b=>new T5(b,d,y=>y.trim()!=="$PLACEHOLDER$"):g=b=>new IS(b,new Ep(d,d),new Ep(d,d),3,!0,y=>y.trim()!=="$PLACEHOLDER$"),vscpp(vscppf,null,vscpp("replyInterpreter",{value:(b,y)=>new Ky(b,y,c,this.props.documentContext.fileIndentInfo,g)}),vscpp(US.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",s.languageId,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to write some new code.",vscpp("br",null),p&&vscpp(vscppf,null,"The user includes existing code and marks with $PLACEHOLDER$ where the new code should go.",vscpp("br",null)),p&&vscpp(vscppf,null,'DO NOT include the text "$PLACEHOLDER$" in your reply.',vscpp("br",null)),p&&vscpp(vscppf,null,"DO NOT repeat any code from the user in your reply.",vscpp("br",null)),!p&&vscpp(vscppf,null,"Your must generate a code block surrounded with ``` that will be used in a new file",vscpp("br",null)),vscpp(ar,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),p&&vscpp(US.UserMessage,null,"I have the following code in a file called `",vscpp(Gf,{value:a.uri,mode:1}),"`:",vscpp(vt,{uri:a.uri,languageId:s.languageId,code:h,shouldTrim:!1})),!p&&vscpp(US.UserMessage,null,"I am in an empty file `",vscpp(Gf,{value:a.uri,mode:1}),"`."),vscpp(US.UserMessage,null,this.props.query,vscpp("br",null),p&&vscpp(vscppf,null,"The code that would fit at $PLACEHOLDER$ with ``` is:")))}},Ky=class{constructor(e,r,n,i,o){this._lastText=void 0;this._initialDocumentSnapshot=new D5(n.originalText),this._workingCopySummarizedDoc=new MS(n),this._progress=this._workingCopySummarizedDoc.createDerivedDocumentProgress(e,r);let s=new PS(this._progress,this._workingCopySummarizedDoc.text,this._workingCopySummarizedDoc.text.split(`
`).map((a,c)=>new RS(c,4)),new AS(0,0),this._workingCopySummarizedDoc.languageId,i);this._streaming=new _2(this._progress,o(s))}update(e){return this._streaming.update(e),this._lastText=e,{shouldFinish:jf(e)}}async finish(){let{didEdits:e,additionalImports:r}=await this._streaming.finish();if(e){let n=N5(this._initialDocumentSnapshot.transformer,this._progress.finalEdits);n.push(...this._generateAdditionalImportsEdits(r));let i=this._workingCopySummarizedDoc.allReportedEdits.inverse(this._initialDocumentSnapshot.text),o=i.edits.reduce((c,u)=>c.join(u.replaceRange),i.edits[0].replaceRange),s=this._workingCopySummarizedDoc.originalDocumentTransformer.fromOffsetRange(o),a={lastDocumentContent:this._workingCopySummarizedDoc.originalText,lastWholeRange:s};return{type:"inlineEdit",edits:n,newWholeRange:void 0,store:a}}if(!this._lastText)throw new Error("No text");return{type:"conversational",content:this._lastText}}_generateAdditionalImportsEdits(e){if(e.length===0)return[];let r=this._workingCopySummarizedDoc.originalText.split(/\r\n|\r|\n/g),n=cF(r,o=>ES(o,this._workingCopySummarizedDoc.languageId));if(n===-1)return[new hi(new Je(0,0,0,0),e.join(`
`)+`

`)];let i=r[n].length;return[new hi(new Je(n,i,n,i),`
`+e.join(`
`))]}};var O5=class extends Y{async prepare(){return{structure:await Yd(this.accessor,this.props.documentContext.document,this.props.documentContext.fileIndentInfo),wholeRange:this.props.documentContext.document.validateRange(this.props.documentContext.wholeRange),summarizedDocumentSettings:await lu(this.accessor),isIgnored:await this.accessor.get(Oe).isCopilotIgnored(this.props.documentContext.document.uri)}}render(e,r){if(gr(this.props.documentContext.document.uri))throw Fn("InlineChatEditCodePrompt should not be used with a notebook!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let i=r.endpoint.modelMaxPromptTokens/3*4,o=du(i,this.props.documentContext.document,e.wholeRange,e.structure,e.summarizedDocumentSettings),{language:s,document:a}=this.props.documentContext,{document:c,adjustedSelection:u}=o,l=c.transformer.fromOffsetRange(u),d=c.text.substring(0,u.start),p=c.text.substring(u.endExclusive),f=c.text.substring(u.start,u.endExclusive),m=d.trim().length>0||p.trim().length>0,h=`${d}$SELECTION_PLACEHOLDER$${p}`,g=b=>new CS(b,l,y=>y.trim()!=="$SELECTION_PLACEHOLDER$");return vscpp(vscppf,null,vscpp("replyInterpreter",{value:(b,y)=>new Ky(b,y,c,this.props.documentContext.fileIndentInfo,g)}),vscpp(S2.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",s.languageId,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to modify some code.",vscpp("br",null),m&&vscpp(vscppf,null,"The user includes existing code and marks with $SELECTION_PLACEHOLDER$ where the selected code should go.",vscpp("br",null)),vscpp(ar,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),vscpp(S2.UserMessage,null,"I have the following code in a file called `",vscpp(Gf,{value:a.uri,mode:1}),"`:",m&&vscpp(vscppf,null,vscpp(vt,{uri:a.uri,languageId:s.languageId,code:h,shouldTrim:!1}),vscpp("br",null)),m&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(vt,{uri:a.uri,languageId:s.languageId,code:f,shouldTrim:!1})),vscpp(S2.UserMessage,null,this.props.query,vscpp("br",null),m&&vscpp(vscppf,null,"The modified $SELECTION_PLACEHOLDER$ code with ``` is:")))}};var Vf=W(st());var rs=W(st());var ea=class{constructor(e){this.charLimit=e;this._totalChars=0}get totalChars(){return this._totalChars}addLine(e){this._totalChars+=e.length+1}lineWouldFit(e){return this._totalChars+e.length+1<this.charLimit}},Po=class t{constructor(e,r,n,i){this.tracker=e;this.document=r;this.language=n;this.kindOrUniqueStr=i;this.lines=[];this.firstLineIndex=this.document.lineCount;this.lastLineIndex=-1;this.isComplete=!1;this.nonTrimWhitespaceCharCount=0;this._startMarker=es.begin(n,i),this._endMarker=es.end(n,i),this.lines=[],this.firstLineIndex=r.lineCount,this.lastLineIndex=-1}get startMarker(){return this._startMarker}get endMarker(){return this._endMarker}get lineCount(){return this.lines.length}get isVerySmallOrEmpty(){return this.nonTrimWhitespaceCharCount<10}get hasContent(){return this.lines.length===0||this.nonTrimWhitespaceCharCount===0?!1:this.lines.length>0}clone(){let e=new t(this.tracker,this.document,this.language,this.kindOrUniqueStr);return e._startMarker=this.startMarker,e._endMarker=this.endMarker,e.lines.push(...this.lines),e.firstLineIndex=this.firstLineIndex,e.lastLineIndex=this.lastLineIndex,e.nonTrimWhitespaceCharCount=this.nonTrimWhitespaceCharCount,e}clear(){this.lines.length=0,this.firstLineIndex=this.document.lineCount,this.lastLineIndex=-1,this.nonTrimWhitespaceCharCount=0}generatePrompt(e){if(!this.hasContent)return[];let r=[];return r.push("```"+this.language.languageId),r.push(Ao.forDocument(this.language,this.document)),e&&r.push(`${this.startMarker}`),r.push(...this.lines),e&&r.push(`${this.endMarker}`),r.push("```"),r}prependLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.unshift(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}appendLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.push(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}trim(e){let r=e?Math.min(this.lastLineIndex,e.start.line):this.lastLineIndex;for(;this.firstLineIndex<r&&this.lines.length>0&&this.lines[0].trim().length===0;)this.firstLineIndex++,this.lines.shift();let n=e?Math.max(this.firstLineIndex,e.end.line):this.firstLineIndex;for(;n<this.lastLineIndex&&this.lines.length>0&&this.lines[this.lines.length-1].trim().length===0;)this.lastLineIndex--,this.lines.pop()}removeFirstNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(0,e),n=0;for(let i of r)n+=i.trim().length;return this.firstLineIndex+=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}removeLastNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(this.lines.length-e,e),n=0;for(let i of r)n+=i.trim().length;return this.lastLineIndex-=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}takeFromAbove(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeLastNLines(r);this.lines.unshift(...n),this.firstLineIndex-=n.length,this.nonTrimWhitespaceCharCount+=i}takeFromBelow(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeFirstNLines(r);this.lines.push(...n),this.lastLineIndex+=n.length,this.nonTrimWhitespaceCharCount+=i}mergeFromAbove(e){e.hasContent&&(this.lines.unshift(...e.lines),this.firstLineIndex=e.firstLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}mergeFromBelow(e){e.hasContent&&(this.lines.push(...e.lines),this.lastLineIndex=e.lastLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}toRange(){try{let e=this.lastLineIndex===-1?this.document.lineCount-1:this.lastLineIndex,r=new Je(this.firstLineIndex,0,e,this.document.lineAt(e).text.length);if(this.document.validateRange(r)===r)return r}catch{return}}toString(){return`{${this.firstLineIndex} -> ${this.lastLineIndex}}`}};var Yy=W(st());var Ps=class extends Y{render(){return vscpp(vscppf,null,"```",this.props.language.languageId,vscpp("br",null),this.props.document&&vscpp(vscppf,null,Ao.forDocument(this.props.language,this.props.document),vscpp("br",null)),this.props.code&&vscpp(vscppf,null,this.props.code,vscpp("br",null)),"```")}};var Qn=class extends Y{render(){if(!this.props.codeRegion.hasContent)return;let e=[];return this.props.useMarkers&&e.push(this.props.codeRegion.startMarker),e.push(...this.props.codeRegion.lines),this.props.useMarkers&&e.push(this.props.codeRegion.endMarker),vscpp(Ps,{language:this.props.codeRegion.language,document:this.props.codeRegion.document,code:e.join(`
`)})}};var M5=class extends Y{async prepare(){return{...await jTe(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange),isIgnored:await this.accessor.get(Oe).isCopilotIgnored(this.props.documentContext.document.uri)}}render(e,r){if(gr(this.props.documentContext.document.uri))throw Fn("InlineChatSelection should not be used with a notebook!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let{wholeRange:n,functionPositions:i,functionBodies:o}=e,s=sJe(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n,i,o),a=this.props.documentContext.document,c=this.props.documentContext.language,u=new Ki(n,s),l=[{uri:a.uri,version:a.version,ranges:Pr([s.range.toRange(),s.above.toRange(),s.below.toRange()])}],d=s.above.hasContent||s.below.hasContent||s.outlineAbove.length>0||s.outlineBelow.length>0;return vscpp(vscppf,null,vscpp("usedContext",{value:l}),vscpp("meta",{value:u}),s.outlineAbove.length>0&&vscpp(Yy.UserMessage,null,"I have the following code above:",vscpp(Ps,{language:c,document:a,code:s.outlineAbove})),s.above.hasContent&&vscpp(Yy.UserMessage,null,"I have the following code above the selection:",vscpp(Qn,{codeRegion:s.above,useMarkers:d})),s.below.hasContent&&vscpp(Yy.UserMessage,null,"I have the following code below the selection:",vscpp(Qn,{codeRegion:s.below,useMarkers:d})),s.outlineBelow.length>0&&vscpp(Yy.UserMessage,null,"I have the following code below:",vscpp(Ps,{language:c,document:a,code:s.outlineBelow})),s.range.hasContent&&vscpp(Yy.UserMessage,null,"I have the following code in the selection:",vscpp(Qn,{codeRegion:s.range,useMarkers:d})),!s.range.hasContent&&!d&&vscpp(Yy.UserMessage,null,"I am in an empty file:",vscpp(Ps,{language:c,document:a,code:""})))}};function sJe(t,e,r,n,i,o){let s=e*4,a=new ea(s),c=E2(r.document,r.selection,n,new Je(0,0,r.document.lineCount,0),r.language,a);if(!(c.above.hasContent&&!c.above.isComplete))return{language:c.language,above:c.above,range:c.range,below:c.below,outlineAbove:"",outlineBelow:""};let l=new ea(s),d=FTe(r.document,i,n),p=new Je(d.start.line,0,d.end.line,r.document.lineAt(d.end.line).range.end.character),f=E2(r.document,r.selection,n,p,r.language,l),m="",h="";if(f.above.isComplete&&f.below.isComplete){let g=rIe({document:r.document,functionBodies:o,rangeExpandedToFunctionWholeLines:p}),v=nIe(g,l);m=v.outlineAbove,h=v.outlineBelow}return{language:f.language,above:f.above,range:f.range,below:f.below,outlineAbove:m,outlineBelow:h}}var gQ=class{constructor(){this.kind="inline-chat-selection"}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=gr(i.document.uri)?Hg:M5,{messages:s,metadatas:a,usedContext:c}=await Zo(e,r.endpoint,o,{documentContext:i},e.get(ye)),u=a.get(Ki);return{kind:this.kind,userMessages:s.map(l=>l.content),usedContext:c,metadata:u}}},mQt=Nr.register(new gQ);function E2(t,e,r,n,i,o){if(r.start.line!==r.end.line&&r.end.character===0){let d=t.lineAt(r.end.line-1);r=new Je(r.start,new Bn(r.end.line-1,d.text.length))}else if(e.end.character===0&&e.end.line!==e.start.line&&(r.start.line===e.start.line&&r.start.character===0&&r.end.line===e.end.line&&r.end.character===t.lineAt(r.end.line).text.length||r.isEqual(e))){let d=t.lineAt(r.end.line-1);r=new Je(r.start,new Bn(r.end.line-1,d.text.length))}let s=new Po(o,t,i,"ed8c6549bwf9"),a=new Po(o,t,i,"abpxx6d04wxr"),c=new Po(o,t,i,"be15d9bcejpp"),u=()=>(a.trim(),s.trim(e),c.trim(),{language:i,above:a,range:s,below:c});for(let d=r.end.line;d>=r.start.line;d--)if(!s.prependLine(d))return u();let l={aboveLineIndex:r.start.line-1,belowLineIndex:r.end.line+1,minimumLineIndex:Math.max(0,n.start.line),maximumLineIndex:Math.min(t.lineCount-1,n.end.line)};return yQ(l,a,c),u()}function yQ(t,e,r){let n=t.aboveLineIndex,i=!0,o=t.belowLineIndex,s=!0;for(let a=0;a<100&&(i||s);a++)!i||s&&a%4===3?o<=t.maximumLineIndex&&r.appendLine(o)?o++:s=!1:n>=t.minimumLineIndex&&e.prependLine(n)?n--:i=!1;e.isComplete=n<t.minimumLineIndex,r.isComplete=o>t.maximumLineIndex}function rIe({document:t,functionBodies:e,rangeExpandedToFunctionWholeLines:r}){let n="";t.languageId==="typescript"&&(n=";");let i=d=>{let f=ds(t,d);return f.end.line<r.start.line?r.start.line-f.start.line>50:f.start.line>r.end.line?f.end.line-r.end.line>50:!0},o=e.filter(i),s=t.offsetAt(r.start),a=t.offsetAt(r.end),c={startOffset:s,endOffset:a},{outlineAbove:u,outlineBelow:l}=bQ(t.getText(),o,c,n);return{outlineAboveRange:u,outlineBelowRange:l}}function bQ(t,e,r,n){let i=0,o="",s=r.endOffset,a="";for(let c of e)if(c.endIndex<r.startOffset)o+=t.substring(i,c.startIndex),o+=n,i=c.endIndex;else if(c.startIndex>r.endOffset)a+=t.substring(s,c.startIndex),a+=n,s=c.endIndex;else continue;return o+=t.substring(i,r.startOffset),a+=t.substring(s,t.length),{outlineAbove:o,outlineBelow:a}}function nIe(t,e){let r=/\r\n|\r|\n/g,n=t.outlineAboveRange===""?[]:t.outlineAboveRange.split(r),i=t.outlineBelowRange===""?[]:t.outlineBelowRange.split(r),o=[],s=[],a=f=>e.lineWouldFit(f)?(e.addLine(f),o.unshift(f),!0):!1,c=f=>e.lineWouldFit(f)?(e.addLine(f),s.push(f),!0):!1,u=n.length-1,l=!0,d=0,p=!0;for(let f=0;f<100&&(l||p);f++)!l||p&&f%4===3?d<i.length&&c(i[d])?d++:p=!1:u>=0&&a(n[u])?u--:l=!1;return{outlineAbove:o.join(`
`),outlineBelow:s.join(`
`)}}function F5(t,e,r,n,i){let o={...n,outlineAbove:"",outlineBelow:"",aboveCells:[],belowCells:[]},s,a,c;if(r.document.uri.scheme==="vscode-notebook-cell"){s=e.notebookDocuments.find(S=>S.uri.fsPath===r.document.uri.fsPath&&S.getCells().find(x=>x.document===r.document));let y=s?.getCells().findIndex(S=>S.document===r.document);if(y===void 0||y===-1)return o;a=y-1,c=y+1}else{if(t.activeNotebookEditor?.notebook.uri.path!==r.document.uri.path)return o;let y=t.activeNotebookEditor;s=y?.notebook;let S=y.selection.start;a=S-1,c=S}if(!s)return o;let{language:u,above:l,range:d,below:p}=n,f=l.lines.length+d.lines.length+p.lines.length,m=[],h=[],g=()=>(m.forEach(y=>y.trim()),h.forEach(y=>y.trim()),{language:u,above:l,range:d,below:p,outlineAbove:"",outlineBelow:"",aboveCells:m,belowCells:h}),v=!0,b=!0;for(let y=f;y<100&&(v||b);y++)if(v)if(a>=0){let x=s.cellAt(a).document,T=new Po(i,x,ma(x),"CELL:"+x.uri.fragment);for(let L=0;L<x.lineCount;L++)T.appendLine(L);m.unshift(T),a--}else v=!1;else if(c<s.cellCount){let x=s.cellAt(c).document,T=new Po(i,x,ma(x),"CELL:"+x.uri.fragment);for(let L=0;L<x.lineCount;L++)T.appendLine(L);h.push(T),c++}else b=!1;return g()}var Hg=class extends Y{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext;return{wholeRange:e.validateRange(r)}}render(e,r){if(!gr(this.props.documentContext.document.uri))throw Fn("InlineChatNotebookSelection should be used only with a notebook!");let{wholeRange:n}=e,i=aJe(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n),o=this.props.documentContext.document,s=new Ki(n,i),a=[{uri:o.uri,version:o.version,ranges:Pr([i.range.toRange(),i.above.toRange(),i.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:a}),vscpp("meta",{value:s}),vscpp(T2,{documentContext:this.props.documentContext,above:i.above,range:i.range,below:i.below,aboveCells:i.aboveCells,belowCells:i.belowCells}))}},T2=class extends Y{render(e,r){if(!gr(this.props.documentContext.document.uri))throw Fn("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=xS(this.props.documentContext.document.uri),{below:i,above:o,range:s,aboveCells:a,belowCells:c,includeDelimeters:u}=this.props;return vscpp(vscppf,null,n?vscpp(TQ,{documentContext:this.props.documentContext,above:o,range:s,below:i,aboveCells:a,belowCells:c,includeDelimeters:u}):vscpp(xQ,{documentContext:this.props.documentContext,above:o,range:s,below:i,aboveCells:a,belowCells:c,includeDelimeters:u}))}},iIe=[{viewType:"polyglot-notebook",exampleCells:[{lan:"markdown",source:"Samples"},{lan:"csharp",source:"using Microsoft.Data.Analysis;"},{lan:"csharp",source:`DateTimeDataFrameColumn dateTimes = new DateTimeDataFrameColumn("DateTimes");
 Int32DataFrameColumn ints = new Int32DataFrameColumn("Ints", 6);
 StringDataFrameColumn strings = new StringDataFrameColumn("Strings", 6);`},{lan:"csharp",source:'dateTimes.Append(DateTime.Parse("2019/01/01"));'}]},{viewType:"sql-notebook",exampleCells:[{lan:"sql",source:"SELECT * FROM users;"}]},{viewType:"node-notebook",exampleCells:[{lan:"javascript",source:'console.log("Hello World");'},{lan:"javascript",source:"const {display} = require('node-kernel');"},{lan:"markdown",source:"# Plain text output"},{lan:"javascript",source:"display.text('Hello World');"}]},{viewType:"sas-notebook",exampleCells:[{lan:"sas",source:"proc print data=sashelp.class; run;"},{lan:"sas",source:`data race;
pr = probnorm(-15/sqrt(325));
run;

proc print data=race;
var pr;
run;
`}]},{viewType:"http-notebook",exampleCells:[{lan:"http",source:"GET https://httpbin.org/get"},{lan:"http",source:"POST https://httpbin.org/post"}]},{viewType:"powerbi-notebook",exampleCells:[{lan:"markdown",source:"# Get Groups"},{lan:"powerbi-api",source:"GET /groups"},{lan:"powerbi-api",source:`%dax /groups/ccce57d1-10af-1234-1234-665f8bbd8458/datasets/51ba6d4b-1234-1234-8635-a7d743a5ea89
EVALUATE INFO.TABLES()
This`}]},{viewType:"wolfram-language-notebook",exampleCells:[{lan:"wolfram",source:"Plot[Sin[x], {x, 0, 2 Pi}]"}]},{viewType:"github-issues",exampleCells:[{lan:"github-issues",source:`$vscode=repo:microsoft/vscode
$milestone=milestone:"May 2020"`},{lan:"github-issues",source:"$vscode $milestone is:closed author:@me -assignee:@me label:bug -label:verified"},{lan:"github-issues",source:"$vscode assignee:@me is:open label:freeze-slow-crash-leak"}]},{viewType:"rest-book",exampleCells:[{lan:"rest-book",source:"GET google.com"},{lan:"rest-book",source:`GET https://www.google.com
    ?query="fun"
    &page=2
    User-Agent: rest-book
    Content-Type: application/json`}]}],_Q=class extends Y{render(){let e=this.props.viewType,r=iIe.find(i=>i.viewType===this.props.viewType);if(!r)return vscpp(vscppf,null);let{exampleCells:n}=r;return vscpp(rs.UserMessage,null,"Below you will find a set of example cells for a ",e," notebook.",vscpp("br",null),n.map((i,o)=>vscpp(vscppf,null,"CELL INDEX: ",o,":",vscpp("br",null),"```",i.lan,vscpp("br",null),i.source,vscpp("br",null),vscpp("br",null),"```")))}},xQ=class extends Y{render(e,r){if(!gr(this.props.documentContext.document.uri))throw Fn("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=this.props.includeDelimeters??!1,{below:i,above:o,range:s,aboveCells:a,belowCells:c}=this.props,u=a||[],l=c||[],d=this.props.documentContext.language,p=kTe(this.accessor.get(rt),this.props.documentContext.document.uri),f=iIe.find(h=>h.viewType===p),m=f?p:"custom";return vscpp(vscppf,null,vscpp(rs.UserMessage,null,"I am working on a ",m," notebook in VS Code.",vscpp("br",null),m," notebooks in VS Code are documents that contain a mix of rich Markdown, executable code snippets, ",vscpp("br",null),"and accompanying rich output. These are all separated into distinct cells and can be interleaved in any order ",vscpp("br",null),"A ",m," notebook contains multiple cells.",vscpp("br",null)),f&&vscpp(_Q,{viewType:f.viewType}),(u.length>0||l.length>0)&&vscpp(rs.UserMessage,null,"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",d.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),u.length>0&&vscpp(BS,{cells:u,title:`Here are the cells in this custom notebook:
`}),l.length>0&&vscpp(BS,{cells:l,cellIndexDelta:u.length+1,title:`Here are the cells below the current cell that I am editing in this custom notebook:
`})),d.languageId==="markdown"?vscpp(SQ,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}):vscpp(EQ,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}))}},SQ=class extends Y{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(rs.UserMessage,null,"Now I create a new cell in this custom Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describte and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(Qn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Ps,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following markdown content above the selection:",vscpp(Qn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following markdown content below the selection:",vscpp(Qn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},EQ=class extends Y{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(rs.UserMessage,null,"Now I create a new cell in this custom Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(Qn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Ps,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following code above the selection:",vscpp(Qn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following code below the selection:",vscpp(Qn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},TQ=class extends Y{render(e,r){if(!gr(this.props.documentContext.document.uri))throw Fn("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=this.props.includeDelimeters??!1,{below:i,above:o,range:s,aboveCells:a,belowCells:c}=this.props,u=a||[],l=c||[],d=this.props.documentContext.language;return vscpp(vscppf,null,(u.length>0||l.length>0)&&vscpp(rs.UserMessage,null,"I am working on a Jupyter notebook.",vscpp("br",null),"This Jupyter Notebook already contains multiple cells.",vscpp("br",null),"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",d.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Since it is Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells as well.",vscpp("br",null),"For the same reason, if a variable is defined in a cell, it can be used in other cells as well.",vscpp("br",null),"We should not repeat the same import or variable definition in multiple cells, unless we want to overwrite the previous definition.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),"## Examples starts here",vscpp("br",null),"Here are the cells in this Jupyter Notebook:",vscpp("br",null),"`CELL INDEX: 0",vscpp("br",null),"```python",vscpp("br",null),"import pandas as pd",vscpp("br",null),vscpp("br",null),"# create a dataframe with sample data",vscpp("br",null),"df = pd.DataFrame({'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35], 'Gender': ['F', 'M', 'M']})",vscpp("br",null),"print(df)",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"Now I create a new cell in this Jupyter Notebook document at index 1.",vscpp("br",null),"In this new cell, I am working with the following code:",vscpp("br",null),"```python",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"plot the data frame",vscpp("br",null),vscpp("br",null),"---------------------------------",vscpp("br",null),"ChatGPT Answer",vscpp("br",null),"---------------------------------",vscpp("br",null),"To plot the dataframe, we can use the `plot()` method of pandas dataframe. Here's the code:",vscpp("br",null),vscpp("br",null),"```python",vscpp("br",null),"df.plot(x='Name', y='Age', kind='bar')",vscpp("br",null),"```",vscpp("br",null),"## Example ends here",vscpp("br",null),u.length>0&&vscpp(BS,{cells:u,title:`Here are the cells in this Jupyter Notebook:
`}),l.length>0&&vscpp(BS,{cells:l,cellIndexDelta:u.length+1,title:`Here are the cells below the current cell that I am editing in this Jupyter Notebook:
`})),d.languageId==="markdown"?vscpp(IQ,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}):vscpp(CQ,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}))}},IQ=class extends Y{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(rs.UserMessage,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describte and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(Qn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Ps,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following markdown content above the selection:",vscpp(Qn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following markdown content below the selection:",vscpp(Qn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},CQ=class extends Y{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(rs.UserMessage,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(Qn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Ps,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following code above the selection:",vscpp(Qn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(rs.UserMessage,null,"In this new cell, I have the following code below the selection:",vscpp(Qn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},BS=class extends Y{render(){return vscpp(vscppf,null,this.props.title,vscpp("br",null),this.props.cells.map((e,r)=>vscpp(wQ,{index:r+(this.props.cellIndexDelta??0),cell:e})))}},wQ=class extends Y{render(){return vscpp(vscppf,null,"CELL INDEX: ",this.props.index,vscpp("br",null),"```",this.props.cell.language.languageId,vscpp("br",null),this.props.cell.lines.join(`
`),vscpp("br",null),"```")}};function aJe(t,e,r,n){let i=e*4,o=new ea(i),s=E2(r.document,r.selection,n,new Je(0,0,r.document.lineCount,0),r.language,o);return F5(t.get(_t),t.get(rt),r,s,o)}var qS=class extends Y{render(){let e=this.props.language;return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"The user has a ",e.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and ",Ao.forLanguage(e),".",vscpp("br",null),"Answer with a single ",e.languageId," code block.",vscpp("br",null),"If you modify existing code, you will use the ",es.begin(e)," and ",es.end(e)," markers.")}};var RQ=class extends Y{async prepare(){let e=this.accessor.get(_t);if(e.activeNotebookEditor?.notebook.uri.path!==this.props.documentContext.document.uri.path)return{variables:[],packages:[]};let n=e.activeNotebookEditor?.notebook;if(!n)return{variables:[],packages:[]};let i=this.accessor.get(GT).getVariables(n.uri),o=this.accessor.get(GT).getPipPackages(n.uri),[s,a]=await Promise.all([i,o]);return{variables:s,packages:a}}render(e){return vscpp(vscppf,null,e.variables.length!==0&&vscpp(vscppf,null,vscpp(Vf.UserMessage,null,"The following variables are present in this Jupyter Notebook:",e.variables.map(r=>vscpp(vscppf,null,vscpp(Vf.TextChunk,null,"Variable Name: ",r.variable.name,vscpp("br",null),r.variable.type&&vscpp(vscppf,null,"Type: ",r.variable.type),vscpp("br",null),"Value: ",r.variable.value,vscpp("br",null),r.indexedChildrenCount>0&&vscpp(vscppf,null,"Length: ",r.indexedChildrenCount),vscpp("br",null),r.variable.summary&&vscpp(vscppf,null,"Summary: ",r.variable.summary),vscpp("br",null),vscpp("br",null)),vscpp("br",null))))),e.packages.length!==0&&vscpp(vscppf,null,vscpp(Vf.UserMessage,null,"The following pip packages are available in this Jupyter Notebook:",e.packages.map(r=>vscpp(vscppf,null,vscpp(Vf.TextChunk,null,"Package Name: ",r.name,", Version: ",r.version),vscpp("br",null))))))}},U5=class extends Y{render(){if(!gr(this.props.documentContext.document.uri))throw Fn("InlineChatNotebookBasePrompt should be used only with a notebook!");let e=this.props.documentContext.language,r=xS(this.props.documentContext.document.uri);return vscpp(vscppf,null,vscpp(Vf.SystemMessage,null,vscpp(qS,{language:e}),vscpp("br",null),r&&vscpp(vscppf,null,"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If the Jupyter Notebook already contains variables, you should respect the name and value of the variables, and use them in your code when necessary.",vscpp("br",null)),vscpp(ar,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),vscpp(Hg,{documentContext:this.props.documentContext}),vscpp(RQ,{documentContext:this.props.documentContext}),vscpp(Vf.UserMessage,null,this.props.query))}};var jg=class t{constructor(e,r,n){this.accessor=e;this.documentContext=r;this.editStrategy=n;this.replyInterpreterFactory=null}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let c=new t(r,a,i);return{intent:e,location:s,endpoint:o,promptCrafter:c,createReplyInterpreter:(u,l)=>c.createReplyInterpreter(u,l)}}async buildPrompt(e,r,n,i,o,s){let c=e.getLatestTurn().request.message,u=e.turns.length>1?e.turns.slice(0,-1):[],l;gr(this.documentContext.document.uri)?l=U5:l=this.editStrategy===4?L5:O5;let d=new nt(r,l,{documentContext:this.documentContext,query:c,history:u},this.accessor.get(ye),this.accessor),p=await d.render(i,s);return this.replyInterpreterFactory=d.getReplyInterpreterFactory(),this.selectionContextMetadata=d.getMeta(Ki),p}createReplyInterpreter(e,r){if(this.replyInterpreterFactory)return this.replyInterpreterFactory(e,r);if(!this.selectionContextMetadata)throw new Error("Could not create reply interpreter without selection context metadata");let n=!(gr(this.documentContext.document.uri)&&this.documentContext.document.languageId==="markdown");return r?new NS(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,n,e):new DS(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,e)}};var Gg=class t{constructor(){this.id=t.ID;this.description=oIe.t("Make changes to existing code");this.intentDetectionInput={sampleQuestion:"Change this method to use async/await",modelDescription:"Make changes to existing code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="edit"}async invoke(e,r){let n=await e.get(Ge).getUserRequestEndpoint(this.locations[0],this.id);return jg.createIntentInvocation(this,e,r,2,n)}};var sIe=W(lr());var Vg=class t{constructor(){this.id=t.ID;this.description=sIe.t("Generate new code");this.intentDetectionInput={sampleQuestion:"Add a function that returns the sum of two numbers",modelDescription:"Generate new code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="generate"}async invoke(e,r){let n=await e.get(Ge).getUserRequestEndpoint(this.locations[0],this.id);return jg.createIntentInvocation(this,e,r,4,n)}};var dIe=W(st());var zg=class extends Y{async prepare(){let e=Object.entries(bS).reduce((r,[n,i])=>{let o=Ro.getCommand(n,this.props.location)?.intent?.description;r+=`
* ${o}`;for(let s of Object.values(i)){let a=Ro.getCommand(s,this.props.location)?.intent?.description;r+=`
* ${a}`}return r},"");return{modelName:cJe(this.props.endpoint.model),commandDescriptions:e}}render(e){return vscpp(vscppf,null,"You can answer general programming questions and perform the following tasks: ",e.commandDescriptions,vscpp("br",null),"You use the ",e.modelName," version of OpenAI's GPT models.")}};function cJe(t){switch(t){case"gpt-4":return"GPT-4";case"code-llama":return"Code Llama";case"gpt-3.5-turbo":case"copilot-preview-gpt35-centralus":return"GPT 3.5 Turbo";case"copilot-preview-gpt4-centralus":case"gpt-4-0125-adaf089e":default:return"GPT-4 Turbo"}}var Lr=class extends Y{render(){return vscpp(vscppf,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.")}};var uJe=["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],vr=class extends Y{render(){let r=this.accessor.get(Pe).getConfig(Ne.LocaleOverride);if(!uJe.find(i=>r===i))return;let n=r!=="auto"?r:this.accessor.get(mt).language;if(n!=="en")return vscpp(vscppf,null,"Respond in the following locale: ",n)}};var di=class extends Y{render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.")}};var Qy=W(st());var HS=W(st());var B5=class extends Y{async prepare(e){let r=this.accessor.get(Za),n=await this.accessor.get(rt).openTextDocument(this.props.variableValue),i=n.getText().replace(/\r/g,"");return{chunks:await r.chunkFileText(n.uri,i,{shouldSemanticChunk:!0},qr.None),languageId:n.languageId,fullText:i}}async truncateMarkdownContent(e,r,n,i){let s=await this.accessor.get(Za).chunkFileText(r.uri,e,{shouldSemanticChunk:!0},qr.None),a=`

<!-- Content truncated -->`,c=this.accessor.get(ye),u=c.tokenize(a).length,l=Math.floor(n.tokenBudget/4)-u,d="",p=0,f=!1;for(let m of s){let h=c.tokenize(m.text);if(h.length+p>l){f=!0;break}d+=`

`+m.text,p+=h.length}return f&&(d+=a),i=d,i}render(e,r){if(!e.chunks.length)return;let n=GEe(e.fullText);return vscpp(HS.UserMessage,{priority:this.props.priority},"# ",this.props.variableName.toUpperCase()," CONTEXT",vscpp("br",null),n,e.languageId,vscpp("br",null),e.chunks.map(i=>vscpp(HS.TextChunk,null,vscpp("references",{value:[new HS.PromptReference({variableName:this.props.variableName,value:this.props.variableValue})]}),i.text)),vscpp("br",null),n)}};var pi=class extends Y{async prepare(){let{query:e,chatVariables:r}=this.props,n=[];return r.forEach((i,o)=>{let s=i.values.find(a=>a.level===ine.Full)??i.values[0];if(s?.kind==="github.docset")i.range&&(e=e.slice(0,i.range[0])+s.value+e.slice(i.range[1]));else if(s){let a=this.uniqueFileName(i.name,r.slice(o+1));n.push({variableName:a,variableValue:s.value}),i.range&&(e=e.slice(0,i.range[0])+`[#${a}](#${a}-context)`+e.slice(i.range[1]))}}),n.reverse(),{data:n,rewrittenMessage:e}}render(e,r){let n=[];for(let{variableName:i,variableValue:o}of e.data)o instanceof Ji?n.push(vscpp(B5,{variableName:i,variableValue:o})):n.push(vscpp(Qy.UserMessage,{priority:this.props.priority&&this.props.priority-1},vscpp(Qy.TextChunk,null,vscpp("references",{value:[new Qy.PromptReference({variableName:i})]}),"# ",i.toUpperCase()," CONTEXT",vscpp("br",null),o)));return vscpp(vscppf,null,...n,vscpp(Qy.UserMessage,{priority:this.props.priority},e.rewrittenMessage))}uniqueFileName(e,r){let n=r.filter(i=>i.name===e).length;return n===0?e:`${e}-${n}`}};var uIe=W(st()),lIe=W(require("path"));var aIe=W(st()),cIe=W(require("path"));var q5=class extends Y{constructor(r,n){super(r,n);this._ignoreService=this.accessor.get(Oe)}async prepare(r){let n=this.accessor.get(_t).activeTextEditor;if(!n)return{isIgnored:!1};let i=n.visibleRanges[0],o=n.document;return{isIgnored:await this._ignoreService.isCopilotIgnored(o.uri),document:o,range:i}}render(r,n){let{document:i,range:o}=r;if(i&&o){let s=[{uri:i.uri,version:i.version,ranges:[o]}],a=[new Co.PromptReference({uri:i.uri,range:o})];return r.isIgnored?vscpp("ignoredFiles",{value:[i.uri]}):vscpp(vscppf,null,vscpp("usedContext",{value:s}),vscpp("references",{value:a}),vscpp(aIe.UserMessage,{priority:this.props.priority},"Excerpt from active file ",cIe.basename(i.uri.path),", lines ",o.start.line+1," to ",o.end.line+1,":",vscpp("br",null),vscpp(vt,{code:i.getText(o),languageId:i.languageId,uri:i.uri}),vscpp("br",null),vscpp("br",null),o.isSingleLine&&vscpp(vscppf,null,"The cursor is on line: ",o.start.line)))}else return}};var hn=class t extends Y{static{this.variableInfo={name:"selection",description:"The current selection in the active editor",defaultEnablement:!0}}async prepare(e){return this.props.document?{isIgnored:await this.accessor.get(Oe).isCopilotIgnored(this.props.document.uri)}:{isIgnored:!1}}render(e,r){let n=t.getCurrentSelection(this.accessor.get(_t));if(!n)return vscpp(q5,null);let i=[{uri:n.activeDocument.uri,version:n.activeDocument.version,ranges:[n.range]}],o=[new Co.PromptReference(new Pl(n.activeDocument.uri,n.range))],s=[n.activeDocument.uri];return e.isIgnored?vscpp("ignoredFiles",{value:s}):vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp("references",{value:o}),vscpp(uIe.UserMessage,{priority:this.props.priority},"Active selection:",vscpp("br",null),vscpp("br",null),vscpp("br",null),n.fileName&&vscpp(vscppf,null,"From the file: ",lIe.basename(n.fileName),vscpp("br",null)),vscpp(vt,{code:n.selectedText,languageId:n.languageId,uri:n.activeDocument.uri}),vscpp("br",null),vscpp("br",null)))}static getCurrentSelection(e,r=!1){let n=e.activeTextEditor,i=n?.document;if(i){let o=n.selection;if(o&&(!o.isEmpty||o.isEmpty&&r)){let s=i.languageId,a=i.getText(o);return{languageId:s,selectedText:a,activeDocument:i,range:o,fileName:i.fileName}}}}};var H5=class extends Y{render(e,r){let n=this.accessor.get(mt).OS,i=this.props.chatVariables.find(o=>o.name===hn.variableInfo.name);return vscpp(vscppf,null,vscpp(dIe.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),vscpp(Lr,null),vscpp(di,null),vscpp("br",null),vscpp(zg,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",n," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp(vr,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),!i&&vscpp(hn,{document:this.props.documentContext?.document,range:this.props.documentContext?.selection,priority:800}),vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var jS=class t extends wo{constructor(r,n=H5,i){super();this.accessor=r;this.prompt=n;this.documentContext=i}static async createIntentInvocation(r,n,i,o){let{location:s,documentContext:a}=i,c=new t(n,o,a),u=await n.get(Ge).getUserRequestEndpoint(s,r.id);return{intent:r,location:s,endpoint:u,promptCrafter:c}}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new nt(n,this.prompt,{documentContext:this.documentContext,endpoint:n,query:u,history:l,chatVariables:i},this.accessor.get(ye),this.accessor)}};var ks=class t{constructor(){this.id=t.ID;this.locations=[1,2];this.description="Intent of this command is unclear or is not related to information technologies";this.commandInfo={hiddenFromUser:!0};this.intentDetectionInput={sampleQuestion:"Add a dog to this comment."}}static{this.ID="unknown"}static{this.Instance=new t}async invoke(e,r){if(r.location===1){let n=await e.get(Ge).getUserRequestEndpoint(1,this.id);return jg.createIntentInvocation(this,e,r,2,n)}return jS.createIntentInvocation(this,e,r)}};var lJe=3,dJe=3,pJe=1;function GS(t,e){let r=0;for(let n of e)r+=fJe(t,n);return r+=lJe,r}function fJe(t,e){let r=dJe;for(let[n,i]of Object.entries(e))i&&(r+=t.tokenLength(i),n==="name"&&(r+=pJe));return r}var j5=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Wi.empty;this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r}handleEdits(e){let r=e.apply(this._text),n=this._combinedEditsSinceStart.compose(e);n=n.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=n,this._text=r}computeTrackedEditsSurvivalScore(){let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewTextRanges(),s=mJe(o,this._combinedEditsSinceStart);for(let a=0;a<o.length;a++){let c=this._originalEdits.edits[a],u=this.originalText.substring(c.replaceRange.start,c.replaceRange.endExclusive),l=c.newText,d=s[a],p=this._text.substring(d.start,d.endExclusive),f=I2(p,l),m=I2(l,u),h=I2(p,u);if(m!==1){let b=1-Math.max(h-m,0)/(1-m);n+=c.replaceRange.length*b,i+=c.replaceRange.length}let g=c.newText.length*f,v=c.newText.length;e+=g,r+=v}return{fourGram:r===0?1:e/r,noRevert:i===0?1:n/i}}};function I2(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let a=0;a<=t.length-4;a++){let c=t.substring(a,a+4),u=n.get(c)||0;n.set(c,u+1)}for(let a=0;a<=e.length-4;a++){let c=e.substring(a,a+4),u=n.get(c)||0;n.set(c,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let a of n.values())o+=Math.abs(a);return(i-o)/i}function mJe(t,e){t=t.slice();let r=[],n=0;for(let i of e.edits){for(;;){let s=t[0];if(!s||s.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(s.delta(n))}let o=[];for(;;){let s=t[0];if(!s||!s.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(s)}for(let s=o.length-1;s>=0;s--){let a=o[s],c=a.intersect(i.replaceRange).length;a=a.deltaEnd(-c+(s===0?i.newText.length:0));let u=a.start-i.replaceRange.start;u>0&&(a=a.delta(-u)),s!==0&&(a=a.delta(i.newText.length)),a=a.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(a)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}var G5=class{constructor(e,r,n,i,o,s,a){this._accessor=e;this._document=r;this._originalDocumentText=n;this._edits=i;this._sharedProps=s;this._sharedMeasures=a;this._editSurvivalTracker=new j5(this._originalDocumentText,this._edits);this._store=new Ht;let c=this._accessor.get(rt);this._store.add(c.onDidChangeTextDocument(u=>{if(u.document!==this._document)return;let l=Wi.from(u.contentChanges);this._editSurvivalTracker.handleEdits(l)})),this._editSurvivalTracker.handleEdits(o),this._initialBranchName=this._getCurrentBranchName(),this._reportAfter(30*1e3),this._reportAfter(120*1e3),this._reportAfter(300*1e3),this._reportAfter(600*1e3,()=>{this._store.dispose()})}_getCurrentBranchName(){return this._accessor.get(vi).getRepository(this._document.uri)?.headBranchName}_reportAfter(e,r){let n=new aA(()=>{this._report(e),n.dispose(),r&&r()},e);this._store.add(n)}_report(e){let r=this._editSurvivalTracker.computeTrackedEditsSurvivalScore(),n=this._accessor.get(ke),o=this._getCurrentBranchName()!==this._initialBranchName;n.sendMSFTTelemetryEvent("inline.trackEditSurvival",this._sharedProps,{...this._sharedMeasures,survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:e,didBranchChange:o?1:0})}};var VS=re("IFeedbackReporter");var z5=W(st());var V5=class extends Y{render(){return vscpp(vscppf,null,vscpp(z5.SystemMessage,{priority:1e3},vscpp("br",null),"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with \\"GitHub Copilot\\".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),vscpp("br",null),vscpp("br",null),vscpp(zg,{location:this.props.location,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn."),vscpp(Vt,{priority:800,history:this.props.history}),vscpp(z5.UserMessage,{priority:900},"Write a short one-sentence question that the user can ask that naturally follows from the previous few questions and answers. It should not ask a question which is already answered in the conversation. It should be a question that you are capable of answering. Reply with only the text of the question and nothing else.",vscpp("br",null),vscpp(vr,null)))}};var zS=class{constructor(e,r){this.accessor=e;this.options=r;this.logger=e.get(ce).getLogger("ConversationFollowUp")}async followUp(e,r,n,i){let o=i?{...i}:{};o.requestId=cn(),o.messageSource="chat.followup";let s=await this.accessor.get(Ge).getNonUserRequestEndpoint(),{messages:a}=await Zo(this.accessor,s,V5,{history:e.copy().turns,endpoint:s,location:r},this.accessor.get(ye)),c=await this.accessor.get(Qt).fetchOne(a,void 0,n,r,s,void 0,{temperature:this.options.temperature,top_p:this.options.topP},o);if(c.type==="success"){let u=[];return c.value&&u.push(c.value.trim()),u}else return this.logger.error(`Failed to fetch followups because of response type (${c.type}) and reason (${c.reason})`,c),[]}};function $S(){let t=cn(),e=Er.createAndMarkAsIssued({messageId:t});return new AQ(e)}var AQ=class t{constructor(e){this.raw=e}get properties(){return this.raw.properties}get measurements(){return this.raw.measurements}markAsDisplayed(){this.raw.markAsDisplayed()}extendedBy(e,r){let n=this.raw.extendedBy(e,r);return new t(n)}};function $5(t,e,r,n,i,o,s){let a=t.turns[t.turns.length-1].contextParts.map(l=>l.kind).sort(),c={source:"user",turnIndex:(t.turns.length-1).toString(),conversationId:e,uiKind:r,inputSources:a.join(",")},u={promptTokenLen:i,messageCharLen:n.length};return o&&(c.suggestion=o),s=s.extendedBy(c,u),s}function W5(t,e,r,n,i,o,s){i!==void 0&&(s=s.extendedBy({offTopic:i.toString()})),s=s.extendedBy({headerRequestId:r}),PQ(t,o,e,n,{},{},s)}function K5(t,e,r,n,i,o,s,a){let c=kQ(i);PQ(t,s,n,i,{source:"model",turnIndex:e.turns.length.toString(),conversationId:r,headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:i.length,numCodeBlocks:c.length},a)}function Y5(t,e,r,n,i,o,s,a){PQ(t,s,n,i,{source:"offTopic",turnIndex:e.turns.length.toString(),conversationId:r,userMessageId:o,uiKind:n},{messageCharLen:i.length},a)}function PQ(t,e,r,n,i,o,s){let a={...n?{messageText:n}:{},...i};e&&(i.languageId=e.languageId,o.documentLength=e.getText().length);let c=s.extendedBy(i,o),u=s.extendedBy(a),l=hJe(r),d=t.get(ke);return d.sendGHTelemetryEvent(`${l}.message`,c.raw.properties,c.raw.measurements),d.sendRestrictedGHTelemetryEvent(`${l}.messageText`,u.raw.properties,u.raw.measurements),c.raw}function Q5(t,e,r,n,i){return WS(t,i,{suggestion:e,messageId:r,suggestionId:n},{},"conversation.suggestionShown")}function WS(t,e,r,n,i,o){let s=o??Er.createAndMarkAsIssued();e&&(r.languageId=e.languageId,n.documentLength=e.getText().length);let a=s.extendedBy(r,n);return t.get(ke).sendGHTelemetryEvent(i,a.properties,a.measurements),a}function hJe(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}function kQ(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}var X5={top_p:1,temperature:.1};var Z5=re("ICommandService"),J5=class{constructor(e){this.accessor=e;this.commandPrefix="/";this.readConfig()}readConfig(){this._enabledCommands=this.accessor.get(Pe).getConfigMixedWithDefaults(Ne.ConversationSlashCommandEnablements)}isCommandEnabled(e,r){if(this._enabledCommands===void 0)return!1;if(this._enabledCommands[e]===void 0){if(this._enabledCommands["*"])return!0;let n=Ro.getCommand(e,r)?.intent?.commandInfo?.defaultEnablement;return typeof n=="boolean"?n:!0}return!!this._enabledCommands[e]}parse(e,r){if(e=e.trimStart(),e.startsWith(this.commandPrefix)){let n=/\/(?<intentId>\w+)(?::(?<intentArgument>\w*))?(?<restOfQuery>\s.*)?/s.exec(e)?.groups,i=n?.intentId??"",o=n?.intentArgument??"",s=(n?.restOfQuery??"").trim(),a=Ro.getCommand(i,r);if(this.readConfig(),a&&this.isCommandEnabled(i,r))return{command:a,intentArgument:o,restOfQuery:s}}return{restOfQuery:e}}getCommand(e,r){return this.allCommands(r).find(n=>n.commandId===e)}allCommands(e){return this.readConfig(),Ro.getCommands(e).filter(r=>this.isCommandEnabled(r.commandId,e))}};var YS=W(st());var gJe=["code","doc","edit","search","workspace","tests","fix","explain","review","terminal","terminalExplain","unknown","api","newNotebook","new"],fi=new class{constructor(){this.intents=new Set}registerIntent(t){t.locations.every(e=>this.getIntent(t.id,e))||(this.intents.add(t),(!t.commandInfo||!t.commandInfo.hiddenFromUser)&&Ro.registerCommand({commandId:t.id,intent:t,details:t.description,locations:t.locations}))}getIntents(t){let e=r=>{let n=gJe.indexOf(r);return n===-1?Number.MAX_SAFE_INTEGER:n};return Array.from(this.intents.values()).filter(r=>r.locations.includes(t)).sort((r,n)=>e(r.id)-e(n.id))}getIntent(t,e){return this.getIntents(e).find(r=>r.id===t)}};var KS=class t{constructor(e,r){this.accessor=e;this.location=r;this.logger=e.get(ce).getPromptResponseLogger("intent detection"),this.telemetryService=e.get(ke),this.options=e.get(ki)}async detectIntent(e,r,n,i,o,s,a){let c=await this.accessor.get(Ge).getNonUserRequestEndpoint(),u=new nt(c,DQ,{preferredIntent:s,location:this.location,userQuestion:r,documentContext:e},this.accessor.get(ye),this.accessor),{messages:l}=await u.render(void 0,i);this.logger.logPrompt(l);let d=await this.accessor.get(Qt).fetchMany(l,void 0,i,this.location,c,{agent:n},{temperature:this.options.temperature,top_p:this.options.topP,stop:[";"],n:1},{messageSource:"chat.intentprompt"}),p=this.handleResult(d,o,r);this.sendTelemetry(s,p?.id,e?.language.languageId,a);let f=u.getMeta(e6);return this.sendInternalTelemetry(r,s,f?.filePath,f?.fileExcerpt,p?.id,e?.language.languageId,a),p}handleResult(e,r,n){if(this.logger.logResponse(e),e.type!=="success"){this.sendPromptIntentErrorTelemetry(r,e);return}let i=e.value.map(c=>c.trimStart().split(`
`)[0].replace(/function id:|response:/i,"").trim()),o=i.map(c=>fi.getIntent(c,this.location)).filter(c=>c!==void 0&&c.id!==ks.ID),s=t.pickMostFrequent(o);this.logger.info(`picked intent "${s?.id}" from ${JSON.stringify(e.value,null,"	")}`);let a=r.extendedBy({messageText:n,promptContext:i.join(),intent:s?.id||"unknown"});return this.telemetryService.sendRestrictedGHTelemetryEvent("conversation.promptIntent",a.raw.properties,a.raw.measurements),s}sendPromptIntentErrorTelemetry(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason});this.telemetryService.sendRestrictedGHTelemetryErrorEvent("conversation.promptIntentError",n.raw.properties,n.raw.measurements)}static pickMostFrequent(e){if(e.length===0)return;let r=new Map;for(let i of e){let o=r.get(i.id)??[0,i];o[0]+=1,r.set(i.id,o)}let[,n]=[...r.values()].reduce((i,o)=>i[0]>o[0]?i:o);return n}sendTelemetry(e,r,n,i){this.accessor.safeGet(ke)?.sendMSFTTelemetryEvent("intentDetection",{chatLocation:lt.toString(this.location),preferredIntent:e??"<none>",detectedIntent:r??"<none>",languageId:n??"<none>",isRerunWithoutIntentDetection:String(i)??"<none>"})}sendInternalTelemetry(e,r,n,i,o,s,a){i=i&&i.length<5e3?i:void 0,this.accessor.safeGet(ke)?.sendInternalMSFTTelemetryEvent("intentDetection",{chatLocation:lt.toString(this.location),request:e,preferredIntent:r??"<none>",filePath:n??"<none>",fileExerpt:i??"<none>",detectedIntent:o??"<none>",languageId:s??"<none>",isRerunWithoutIntentDetection:String(a)??"<none>"},{})}},e6=class extends YS.PromptMetadata{constructor(r,n){super();this.fileExcerpt=r;this.filePath=n}},DQ=class extends Y{async prepare(e,r,n){let{documentContext:i}=this.props,o=!1;return i!==void 0&&(o=await this.accessor.get(Oe).isCopilotIgnored(i.document.uri)),{isDocumentCopilotIgnored:o}}render(e){let{preferredIntent:r,location:n,userQuestion:i,documentContext:o}=this.props,s,a,c;try{if(o!==void 0&&!e.isDocumentCopilotIgnored){let{document:f,selection:m}=o;s=f.uri;let h=new Je(new Bn(Math.max(m.start.line-5,0),0),new Bn(Math.min(m.end.line+5,f.lineCount),f.lineAt(m.end.line).text.length));a=f.getText(h),c=a.trim().length>0?vscpp(vt,{uri:s,languageId:f.languageId,code:a,shouldTrim:!1}):void 0}}catch{}let u=new e6(a,s?.path),l=this.accessor.get(Pe),d=fi.getIntents(n),p=[];for(let f=0;f<d.length;f++){let m=d[f];m.id==="review"&&!l.getConfig(Ne.ReviewIntent)||m.id==="fixTestFailure"&&!this.accessor.get(sl).isEnabled.get()||p.push(m)}return vscpp(vscppf,null,vscpp("meta",{value:u}),vscpp(YS.SystemMessage,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null)),vscpp(YS.UserMessage,null,"A software developer is using an AI chatbot in a code editor",s&&` in file ${s.path}`,".",vscpp("br",null),c===void 0?vscpp("br",null):vscpp(vscppf,null,"Current active file contains following excerpt:",vscpp("br",null),c,vscpp("br",null)),"The developer added the following request to the chat and your goal is to select a function to perform the request.",vscpp("br",null),r&&`The developer probably wants Function Id '${r}', pick different only if you're certain.`,vscpp("br",null),"Request: ",i,vscpp("br",null),vscpp("br",null),"Available functions:",vscpp("br",null),p.map(f=>vscpp(vscppf,null,"Function Id: ",f.id,vscpp("br",null),"Function Description: ",f.intentDetectionInput.modelDescription||f.description,vscpp("br",null),vscpp("br",null))),vscpp("br",null),"Here are some examples to make the instructions clearer:",vscpp("br",null),p.map(f=>vscpp(vscppf,null,"Request: ",f.intentDetectionInput.sampleQuestion,vscpp("br",null),"Response: ",f.id,vscpp("br",null),vscpp("br",null))),"Request: ",i,vscpp("br",null),"Response:"))}};async function fIe(t,e,r,n,i,o,s){let a=t.get(Z5),c,u,l="",d=a.parse(e,1);if(d.command)u=d.command.intent,l=d.restOfQuery,c=d.intentArgument;else{let m=t.get(Pe),h=new KS(t,1),g=r===void 0?!1:!r,v=h.detectIntent(n,e,i?.agent,s,o,i?.preferredIntent,g);(r===void 0||r)&&(m.isDefaultSettingOverwritten(Ne.ConversationIntentDetection)?m.getConfig(Ne.ConversationIntentDetection):!0)&&(u=await v),l=e}let p;u&&i&&(p=i.slashCommands.find(m=>m.command===u.id)),u??=ks.Instance;let f=await u.invoke(t,{location:1,documentContext:n,intentArgument:c},p);return{queryWithoutCommand:l,intentInvocation:f,slashCommand:p}}async function mIe(t,e,r,n){let i=new ul;if(e&&e.length>0){let s=`The current code is a result of a previous interaction with you. Here are my previous messages: 
- ${e.join(`
- `)}`,a=new $d({message:s,type:"user"});i.addTurn(a)}let o=new $d({message:t.queryWithoutCommand,type:"user"});return o.intentInvocation=t.intentInvocation,i.addTurn(o),await t.intentInvocation.promptCrafter.buildPrompt(i,t.intentInvocation.endpoint,[],{report(){}},r,n)}var NQ=class{constructor(e,r,n,i,o,s,a,c,u){this.placeholder=e;this.slashCommands=r;this.wholeRange=n;this.document=i;this.formattingOptions=o;this.message=s;this.input=a;this.preferredIntent=c;this.agent=u;this._requests=[];this.aiEditCollector=void 0;this.store=void 0;this.sessionId=cn(),this.conversation=void 0}addRequest(e){this._requests.push(e)}getRequests(){return this._requests}},$g=class{constructor(e,r,n,i,o,s,a,c,u,l,d,p,f){this.agent=e;this.rejectionMessage=r;this._telemetryService=i;this.tabAndEditorsService=o;this.languageDiagnosticService=s;this.ignoreService=a;this.conversationOptions=c;this.workspaceService=u;this.chatMLFetcher=l;this.tokenizer=d;this.feedbackReporter=p;this.accessor=f;this.logger=n.getPromptResponseLogger("interactiveEditor"),this.logger.info(`CopilotInteractiveEditorSessionProvider created, with rejection message: ${this.rejectionMessage}`)}async prepareInteractiveEditorSession(e){if(await this.ignoreService.isCopilotIgnored(e.document.uri))throw new Error(zf.t("Inline chat is disabled for this file due to content exclusion policies."));let n;if(this.tabAndEditorsService.activeTextEditor?.document.uri.toString()===e.document.uri.toString()){let f=this.tabAndEditorsService.activeTextEditor.options;n={insertSpaces:f.insertSpaces,tabSize:f.tabSize}}let i,o=this.languageDiagnosticService.getDiagnostics(e.document.uri).find(f=>f.range.contains(e.selection));o&&(o.severity===Al.Warning||o.severity===Al.Error)&&(i=`/fix ${o.message}`);let s={document:e.document,fileIndentInfo:n,language:ma(e.document),selection:e.selection,wholeRange:e.selection},a=[];for(let f of Ro.getCommands(1))if(f.intent?.asSlashCommand){let m=await f.intent.asSlashCommand(this.accessor,s);m&&a.push(m)}else a.push({command:f.commandId,detail:f.details,executeImmediately:f.executeImmediately});let c=[zf.t({message:"{0} Copilot generated code may be incorrect",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})],u=zf.t({message:"{0} You can also type / for commands",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]}),l,d;e.selection.isEmpty&&e.document.lineAt(e.selection.start.line).text.trim()===""?(c.push(u,zf.t({message:"{0} You can also select code to make an edit",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})),d=zf.t("Ask Copilot to generate code..."),l=Vg.ID):!e.selection.isEmpty&&e.selection.start.line!==e.selection.end.line?(c.push(u),d=zf.t("Ask Copilot to edit code..."),l=Gg.ID):d=zf.t("Ask Copilot or type / for commands");let p=c[Math.floor(Math.random()*c.length)];return new NQ(d,a,e.selection,e.document,n,p,i,l,this.agent)}async provideInteractiveEditorResponse(e,r,n,i){this.logger.info(`CopilotInteractiveEditorSessionProvider query: ${r.prompt}`),n.report({message:zf.t("Fetching response..."),edits:[]}),r.attempt===0&&e.addRequest(r.prompt);let o=e.aiEditCollector=this.accessor.get(ua).createInstance(_S,e.document.getText()),s=n;n={report(c){c.edits&&o.addEdits(c.edits),s.report(c)}};let a=await this.fetchResponse(e,r,n,r.live,i);if(a)return"edits"in a?.parsedReply&&o.addEdits(a.parsedReply.edits),vJe(e,a,r.live)}async provideFollowups(e,r,n){if(!xS(e.document.uri)||!e.conversation||!e.wholeRange?.isEmpty)return;let i=0,o=PTe(this.workspaceService,e.document);if(o>=0)i=o+1;else if(this.tabAndEditorsService.activeNotebookEditor?.selection.end!==void 0)i=this.tabAndEditorsService.activeNotebookEditor.selection.end;else return;return(await new zS(this.accessor,this.conversationOptions).followUp(e.conversation,1,n)).map(c=>({commandId:"notebook.cell.chat.start",title:`$(sparkle) ${c}`,args:[{index:i,input:c,autoSend:!0}]}))}handleInteractiveEditorResponseFeedback(e,r,n){if(this.logger.debug("CopilotInteractiveEditorSessionProvider feedback received"),n===ha.Bug&&e.conversation){this.feedbackReporter.reportInline(e.conversation,r.promptQuery,r.reply);return}let i={messageId:r.messageId},o,{selection:s,wholeRange:a,intent:c,query:u}=r.promptQuery,l=e.conversation?.getLatestTurn()?.requestId??"",d=e.sessionId,p=c?.id,f=e.document.languageId,m=r.reply.type,h=m==="inlineEdit"?r.reply.edits:null,g=p==="fix"?hIe(s,this.languageDiagnosticService.getDiagnostics(e.document.uri)):void 0,v=gr(e.document.uri)?1:0,b={languageId:f,replyType:m,conversationId:d,requestId:l,command:p},y={selectionLineCount:s?Math.abs(s.end.line-s.start.line):-1,wholeRangeLineCount:a?Math.abs(a.end.line-a.start.line):-1,editCount:h?.length??-1,editLineCount:h?.reduce((x,T)=>x+T.newText.split(`
`).length,0)??-1,isNotebook:v,problemsCount:g?.fileDiagnosticsTelemetry.problemsCount??0,selectionProblemsCount:g?.selectionDiagnosticsTelemetry.problemsCount??0,diagnosticsCount:g?.fileDiagnosticsTelemetry.diagnosticsCount??0,selectionDiagnosticsCount:g?.selectionDiagnosticsTelemetry.diagnosticsCount??0},S=(x,T)=>{this._telemetryService.sendInternalMSFTTelemetryEvent(x,{language:f,intent:p,query:u,conversationId:d,requestId:l,replyType:m,problems:g?.fileDiagnosticsTelemetry.problems??"",selectionProblems:g?.selectionDiagnosticsTelemetry.problems??"",diagnosticCodes:g?.fileDiagnosticsTelemetry.diagnosticCodes??"",selectionDiagnosticCodes:g?.selectionDiagnosticsTelemetry.diagnosticCodes??""},{isNotebook:v,...T})};if(n===ha.Accepted&&e.aiEditCollector){let x=e.aiEditCollector,T=new b5(e.aiEditCollector.getText(),e.document,this.accessor);(async()=>{try{let[L,M]=await Promise.all([x.getEdits(),T.compute()]),q=M.getEditsSinceInitial();new G5(this.accessor,e.document,x.initialText,L,q,b,y)}finally{T.dispose()}})()}if(e.aiEditCollector=void 0,n===ha.Helpful||n===ha.Unhelpful){let x=n===ha.Helpful?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.action.vote",b,{...y,vote:x}),S("interactiveSessionVote",{vote:x})}else if(n===ha.Undone||n===ha.Accepted){let x=n===ha.Accepted?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.done",b,{...y,accepted:x}),S("interactiveSessionDone",{accepted:x})}switch(n){case ha.Helpful:i.rating="positive",o="inlineConversation.messageRating";break;case ha.Unhelpful:i.rating="negative",o="inlineConversation.messageRating";break;case ha.Undone:i.action="undo",o="inlineConversation.undo";break;case ha.Accepted:i.action="accept",o="inlineConversation.accept";break;case ha.Bug:o="";break}o&&WS(this.accessor,e.document,i,{},o)}async fetchResponse(e,r,n,i,o){let s=$S(),a=Date.now(),c;e.getRequests().length>1&&r.attempt===0&&e.store&&e.document.getText()===e.store.lastDocumentContent&&(c=e.store.lastWholeRange,this.logger.debug("Ignoring passed in whole range and using the whole range from the previous turn"));let u={document:e.document,fileIndentInfo:e.formattingOptions,language:ma(e.document),selection:r.selection,wholeRange:c??r.wholeRange};(e.getRequests().length>1||r.attempt>0)&&(e.preferredIntent=void 0);let l=await fIe(this.accessor,r.prompt,r.withIntentDetection,u,e,s,o),d=l.intentInvocation;n.report({slashCommand:l.slashCommand});let p={query:l.queryWithoutCommand,...u,intent:d.intent},{messages:f}=await mIe(l,e.getRequests().slice(0,-1),s,o);if(o.isCancellationRequested)return;let m=e.conversation,h=m===void 0;m||(m=e.conversation=new ul);let g=f.map(N=>N.content).join(`
`),v=new $d({message:g,type:"user"});v.chatMessages=f,m.addTurn(v),s=$5(m,e.sessionId,"conversationInline",r.prompt,yJe(this.tokenizer,f),d.intent.id,s);let b=s.properties.messageId;v.requestId=b,this.logger.logPrompt(f);let y,S,x=d.createReplyInterpreter(n,i);if(f.length===0)return{promptQuery:p,parsedReply:await x.finish(),messageId:s.properties.messageId};let L=gr(e.document.uri)?1:0,M=hIe(r.selection,this.languageDiagnosticService.getDiagnostics(e.document.uri));this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionRequest",{conversationId:e.sessionId,requestId:b,chatLocation:"inline",intent:d.intent.id,language:e.document.languageId,prompt:f.map(N=>`${N.role.toUpperCase()}:
${N.content}`).join(`
---
`),model:d.endpoint.model},{isNotebook:L});let q=0,O=async N=>(q===0&&(q=Date.now()),x.update(N).shouldFinish?N.length:void 0),Z=Date.now(),z=d.endpoint;try{y=await this.chatMLFetcher.fetchOne(f,O,o,1,z,{agent:MT},{temperature:$g.pickTemperature(r),top_p:X5.top_p},{messageId:b,messageSource:d.intent.id!==ks.ID?`inline.${d.intent.id}`:"inline.user"},{intent:!0})}catch(N){throw this.logger.exception(N,"Fetching failed: "),this._telemetryService.sendGHTelemetryException(N,"Fetching failed: "),v.status="error",v.response={message:N.message,type:"server"},new Error("Failed to make request")}y&&(this.logger.logResponse(y),W5(this.accessor,"conversationInline",y.requestId,r.prompt,y.type==="offTopic",this.tabAndEditorsService.activeTextEditor?.document,s));let D=N=>{this._telemetryService.sendMSFTTelemetryEvent("inline.request",{command:d.intent.id??"",contextTypes:"none",promptTypes:f.map(te=>`${te.role}${te.name?`-${te.name}`:""}:${te.content.length}`).join(","),conversationId:e.sessionId,requestId:b,languageId:this.tabAndEditorsService.activeTextEditor?.document?.languageId,responseType:y.type,replyType:N?.type,model:z.model,diagnosticsProvider:M.diagnosticsProvider,diagnosticCodes:M.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:M.selectionDiagnosticsTelemetry.diagnosticCodes},{firstTurn:h?1:0,isNotebook:L,withIntentDetection:r.withIntentDetection===void 0?void 0:r.withIntentDetection?1:0,messageTokenCount:this.tokenizer.tokenLength(l.queryWithoutCommand),promptTokenCount:GS(this.tokenizer,f),responseTokenCount:y.type==="success"?this.tokenizer.tokenLength(y.value):-1,implicitCommand:r.prompt.trim().startsWith(`/${d.intent.id}`)?0:1,attemptCount:r.attempt||0,selectionLineCount:r.selection?Math.abs(r.selection.end.line-r.selection.start.line)+1:-1,wholeRangeLineCount:r.wholeRange?Math.abs(r.wholeRange.end.line-r.wholeRange.start.line)+1:-1,editCount:N?.type==="inlineEdit"?N.edits.length:-1,editLineCount:N?.type==="inlineEdit"?N.edits.reduce((te,pe)=>te+pe.newText.split(`
`).length,0):-1,problemsCount:M.fileDiagnosticsTelemetry.problemsCount,selectionProblemsCount:M.selectionDiagnosticsTelemetry.problemsCount,diagnosticsCount:M.fileDiagnosticsTelemetry.diagnosticsCount,selectionDiagnosticsCount:M.selectionDiagnosticsTelemetry.diagnosticsCount,timeToRequest:Z-a,timeToFirstToken:q?q-a:-1,timeToComplete:Date.now()-a})},E=(N,te)=>{this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{conversationId:e.sessionId,requestId:b,chatLocation:"inline",intent:d.intent.id??"",problems:M.fileDiagnosticsTelemetry.problems,selectionProblems:M.selectionDiagnosticsTelemetry.problems,diagnosticCodes:M.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:M.selectionDiagnosticsTelemetry.diagnosticCodes,diagnosticsProvider:M.diagnosticsProvider,language:this.tabAndEditorsService.activeTextEditor?.document?.languageId,request:r.prompt,responseType:N,response:te},{isNotebook:L})};switch(y.type){case"rateLimited":{let N=`Response failed ${y.type}: ${y.reason}`;throw v.status="error",v.response={message:N,type:"server"},D(),E(y.type,N),new Error("Oops, your request failed due to a rate limit. Please try again later.")}case"badRequest":{let N=`Response failed ${y.type}: ${y.reason}`;throw v.status="error",v.response={message:N,type:"server"},D(),E(y.type,N),new Error("Failed to make request")}case"failed":{this.logger.error(`Response failed: ${y.reason}`),v.status="error";let N=y.reason;throw v.response={message:N,type:"server"},D(),E(y.type,N),new Error("Failed to make request")}case"canceled":{this.logger.debug(`Response canceled: ${y.reason}`),v.status="error";let N="Cancelled";v.response={message:N,type:"user"},D(),E(y.type,N);return}case"unknown":{let N=`Response is empty: ${y.reason}`;this.logger.info(N),v.status="error",v.response={message:N,type:"server"},D(),E(y.type,N);return}case"filtered":{let N=`Response got filtered: ${y.reason}`;throw this.logger.info(N),v.status="filtered",v.response={message:N,type:"server"},D(),E(y.type,N),new Error(h5(y.category,!1))}case"offTopic":{this.logger.info(`Response marked as offtopic: ${y.reason}`),v.status="off-topic";let N=this.rejectionMessage;v.response={message:N,type:"offtopic-detection"},D(),E(y.type,N),Y5(this.accessor,m,e.sessionId,"conversationInline",r.prompt,b,e.document,s);return}case"length":{let N=`Response was too long: ${y.reason}`;this.logger.info(N),v.status="error",v.response={message:N,type:"server"},D(),E(y.type,N);return}case"success":break;default:{this.logger.error("Unexpected response type"),this.logger.info(JSON.stringify(y)),v.status="error";let N=`Unexpected response type: ${JSON.stringify(y)}`;v.response={message:N,type:"server"},D(),E("unknown",N);return}}if(S=y.value,S.length===0){this.logger.info("Response is empty."),D(),E("unknown","Empty response");return}x.update(S);let k=await x.finish();v.status="success";let F=S;return v.response={message:F,type:"model"},D(k),E("success",F),s=s.extendedBy({replyType:k.type}),K5(this.accessor,m,e.sessionId,"conversationInline",S,b,e.document,s),this.logger.info(`Parsed response: ${JSON.stringify(k,null,"	")}`),{promptQuery:p,parsedReply:k,messageId:s.properties.messageId}}static pickTemperature(e){return"attempt"in e&&typeof e.attempt=="number"?Math.min(X5.temperature*(e.attempt+1),2):X5.temperature}};$g=we([de(2,ce),de(3,ke),de(4,_t),de(5,Zi),de(6,Oe),de(7,ki),de(8,rt),de(9,Qt),de(10,ye),de(11,VS),de(12,Ct)],$g);function vJe(t,e,r){let{promptQuery:n,parsedReply:i,messageId:o}=e;if(i.type==="conversational")return{contents:new Ja(i.content),promptQuery:n,reply:i,messageId:o};let s=i.content!==void 0?new Ja(i.content):void 0;return i.type==="workspaceEdit"?{edits:i.workspaceEdit,promptQuery:n,reply:i,messageId:o,contents:s}:(t.store=i.store,{edits:i.edits,wholeRange:i.newWholeRange,reply:i,promptQuery:n,messageId:o,contents:i.content!==void 0?new Ja(i.content):void 0})}function yJe(t,e){let r=0;for(let n of e)r+=t.tokenLength(n.content);return r}function hIe(t,e){let r=e.filter(u=>t.intersection(u.range)),n={problems:e.map(u=>u.message).join(", "),problemsCount:e.length,diagnosticCodes:"",diagnosticsCount:0},i={problems:r.map(u=>u.message).join(", "),problemsCount:r.length,diagnosticCodes:"",diagnosticsCount:0},o=new Map,s=new Map;e.forEach(u=>{let l=u.code,d=typeof l=="string"||typeof l=="number"?l.toString():l?l.value.toString():"",p=u.source?`${u.source}@${d}`:d;o.set(p,(o.get(p)||0)+1),t.intersection(u.range)&&s.set(p,(s.get(p)||0)+1)});let a=u=>{let l="";return u.forEach((d,p)=>{l+=`${p}:${d},`}),l};n.diagnosticCodes=a(o),n.diagnosticsCount=o.size,i.diagnosticCodes=a(s),i.diagnosticsCount=s.size;let c=e.length>0?e[0].source??"":"";return{fileDiagnosticsTelemetry:n,selectionDiagnosticsTelemetry:i,diagnosticsProvider:c}}var QS=class t{constructor(e,r){this.accessor=e;this.outputChannelProvider=r;this.requestCount=-1;this.logger=e.get(ce).getPromptResponseLogger("chat")}logRequest(e){this.requestCount++,this.logInfo("REQUEST",`User:${this.headerSeparator()}${this.printMessageContent(e.message)}`)}logMessages(e){this.logInfo("PROMPT MESSAGES",e.map(r=>`${this.getDisplayName(r)}:${this.headerSeparator()}${this.printMessageContent(r.content)}`).join(`
`))}logProgress(e,r){let n=typeof e.value=="string"?e.value:e.value.value;n&&(r?this.logInfo("RESPONSE",`Assistant:	${n}`,!1):this.logInfo("",`${n.replaceAll(/\r?\n/g,`
`+this.bodySeparator())}`,!1))}logResponse(e){this.logInfo("",""),e.errorDetails&&this.logInfo("ERROR DETAILS",JSON.stringify(e.errorDetails,void 0,4))}logFollowups(e){this.logInfo("FOLLOWUPS","Followups:	"+e.map((r,n)=>`${r.label??r.prompt}
${this.bodySeparator()}`).join(`
${this.bodySeparator()}`))}logThrownError(e){this.logInfo("THROWN ERROR",e.stack?e.stack:e.message)}logIntent(e,r){this.logInfo("INTENT",e!==void 0?`User intent determined to be '${e}' via the ${r?"user":"model"}`:"Intent could not be determined")}logInfo(e,r,n=!0){if(!this.accessor.get(Pe).getConfig(Ne.ConversationLoggingEnabled))return;let o=new Date().toISOString();e&&(r=`[${e} ${this.requestCount}]
${r}`,r=`${o} [info] ${r}`),t.outputChannel===void 0&&(t.outputChannel=this.outputChannelProvider()),n?(this.logger.info(r+`
`),t.outputChannel.appendLine(r+`
`)):(this.logger.info(r),t.outputChannel.append(r))}printMessageContent(e){return e.split(`
`).join(`
${this.bodySeparator()}`)}headerSeparator(){return"		"}bodySeparator(){return"			"}getDisplayName(e){let r=this.getDisplayRole(e.role),n=e.name;return n?`${r} (${n})`:r}getDisplayRole(e){switch(e){case"system":return"System";case"user":return"User";case"assistant":return"Assistant"}}};var ep=W(lr());function gIe(t){let e=(i,o,s)=>{let a="",c=s?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ";if(o===1?a=`${c}${i.name}
`:o>1&&(a=`|   ${"    ".repeat(o-2)}${c}${i.name}
`),i.children){let u=i.children.length-1;i.children.forEach((l,d)=>{a+=e(l,o+1,d===u)})}return a},r=`${t.baseUri.path.replace("/","")}
`,n=t.value.length-1;return t.value.forEach((i,o)=>{r+=e(i,1,o===n)}),`\`\`\`filetree
${r}\`\`\`
`}var LQ;(e=>{function t(r,n,i){let{options:o,document:s,selection:a,visibleRanges:c}=n,u={insertSpaces:o.insertSpaces,tabSize:o.tabSize},l=ma(s);return i||(c.length===1?i=c[0]:c.length>1?i=c[0].union(c[c.length-1]):i=a),{document:s,fileIndentInfo:u,language:l,selection:a,wholeRange:i}}e.fromEditor=t})(LQ||={});var XS=class{constructor(e,r){this.stopStartMappings=e;this.processNonReportedDelta=r;this.stagedDeltasToApply=[];this.currentStartStop=void 0;this._appliedText="";this.nonReportedDeltas=[]}async processResponse(e,r,n,i,o){return this.doProcessResponse(n,i,o)}async doProcessResponse(e,r,n){for await(let{delta:i}of e){if(n.isCancellationRequested)break;this.applyDelta(i,r)}return this._appliedText}applyDeltaToProgress(e,r){let n=e.codeVulnAnnotations?.map(i=>({title:i.details.type,description:i.details.description}));n?.length?r.markdownWithVulnerabilities(e.text??"",n):e.text&&r.markdown(e.text)}updateStagedDeltasUpToIndex(e,r){let n=[];for(let i=0;i<e+r;){let o=this.stagedDeltasToApply.shift();if(o){if(i+o.text.length<=e)n.push(o);else if(i<e||i<e+r){if(i<e){let a={...o};a.text=o.text.substring(0,e-i),n.push(a)}let s={...o};s.text=o.text.substring(e-i+r),s.text&&this.stagedDeltasToApply.unshift(s)}i+=o.text.length}else break}return n}checkForKeyWords(e,r,n){let i=this.stagedDeltasToApply.map(o=>o.text).join("")+r.text;for(let o of e){let s=i.indexOf(o);if(s===-1)continue;return this.stagedDeltasToApply.push(r),this.updateStagedDeltasUpToIndex(s,o.length).forEach(c=>n(c)),o}for(let o of e)for(let s=o.length-1;s>0;s--){let a=o.substring(0,s);if(i.endsWith(a)){this.stagedDeltasToApply=[...this.stagedDeltasToApply,r];return}}[...this.stagedDeltasToApply,r].forEach(o=>{n(o)}),this.stagedDeltasToApply=[]}postReportRecordProgress(e){this.nonReportedDeltas.push(e)}applyDelta(e,r){if(this._appliedText+=e.text,this.currentStartStop===void 0){let n=this.checkForKeyWords(this.stopStartMappings.map(i=>i.stop),e,i=>this.applyDeltaToProgress(i,r));n&&(this.currentStartStop=this.stopStartMappings.find(i=>i.stop===n));return}else{if(!this.currentStartStop.start)return;this.checkForKeyWords([this.currentStartStop.start],e,this.postReportRecordProgress.bind(this))&&(this.processNonReportedDelta&&this.processNonReportedDelta(this.nonReportedDeltas).forEach(o=>this.applyDeltaToProgress({text:o},r)),this.currentStartStop=void 0,this.stagedDeltasToApply.length>0&&this.applyDelta({text:""},r))}}};var C2={errorDetails:{message:ep.t("Cancelled")}},t6=class{constructor(e,r,n){this.options=r;this.conversationLogger=n;this.inputPlaceholder=ep.t("Ask Copilot or type / for commands");this._telemetryService=e.get(ke),this._configurationService=e.get(Pe),this.accessor=e,this.conversation=new ul,this.intentDetector=new KS(e,2),this.conversation=this.initializeConversation(),this._conversationStore=e.get(Pg)}addHistory(e){let r;for(let n of e)if(n instanceof ane)r=new $d({message:n.prompt,type:"user"});else{let i=n.response.map(s=>s instanceof kl?s.value.value:s instanceof HT?gIe(s):"content"in s?s.content:null).filter(s=>!!s).join("");if(r){let s=n.command||Are(n.participant),a=Ro.getCommand(s,2);r.response={message:i,type:"model",name:a?.commandId||ks.ID},n.result.errorDetails?n.result.errorDetails?.responseIsFiltered?r.status="filtered":n.result.errorDetails.message==="Cancelled"?r.status="cancelled":r.status="error":r.status="success",this.conversation.addTurn(r),r=void 0}let o=n.result;typeof o.metadata?.sessionId=="string"&&(this._sessionId=o.metadata.sessionId)}this._sessionId||(this._sessionId=cn())}initializeConversation(){return new ul}async provideResponseWithProgress(e,r,n,i){try{let o=this,s=!0,a=new class{detectedParticipant(p,f){return r.detectedParticipant(p,f)}markdown(p){return o.conversationLogger?.logProgress(new kl(p),s),s=!1,r.markdown(p)}button(p){return r.button(p)}filetree(p,f){return r.filetree(p,f)}anchor(p,f){return r.anchor(p,f)}progress(p){return r.progress(p)}reference(p){return r.reference(p)}push(p){return r.push(p),this}markdownWithVulnerabilities(p,f){return r.markdownWithVulnerabilities(p,f)}textEdit(p,f){return r.textEdit(p,f)}},c=this.newTurn(e),u=$S();u.markAsDisplayed();let l=await this._provideResponseWithProgress(c,e,a,n,u,i),d=await c.intentInvocation?.commands?.(this.accessor,c);return d&&d.forEach(p=>r.button(p)),this.conversationLogger?.logResponse(l),this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{chatLocation:"panel",intent:c.intentInvocation?.intent.id??"",request:e.prompt,response:c.response?.message??"",sessionId:this._sessionId},{turnNumber:this.conversation.turns.length}),this._conversationStore.addConversation(c.requestId,this.conversation),{...l,metadata:{responseId:c.requestId,sessionId:this._sessionId}}}catch(o){throw this.conversationLogger?.logThrownError(o),o}}newTurn(e){let r={message:e.prompt,type:"user"},n=new $d(r,this._sessionId);return this.conversation.addTurn(n),n}async _provideResponseWithProgress(e,r,n,i,o,s){let a=()=>{if(i.isCancellationRequested)return e.status="cancelled",!0};if(a())return C2;try{let c=this.accessor.get(_t).activeTextEditor,u=e.request.message;this.conversationLogger?.logRequest(e.request);let l={command:s.intentId?Ro.getCommand(s.intentId,2):void 0,restOfQuery:u};if(l.command?.intent&&!(l.command.intent.commandInfo?.allowsEmptyArgs??!0)&&!l.restOfQuery){let L=wTe(l.command.intent.id),M="";return L&&(M=`@${L.agent} `,L.command&&(M+=` /${L.command}`),M+=` ${l.command.details}`),e.response={message:ep.t(`Please specify a question when using this command.

Usage: {0}`,M),type:"meta"},e.status="error",{errorDetails:{message:e.response.message,responseIsFiltered:!1,responseIsIncomplete:!1}}}let d=l?.command?.intent,p;if(d&&(e.request={message:l.restOfQuery||d.intentDetectionInput.sampleQuestion,type:"user"},this.conversationLogger?.logIntent(d.id,!0)),!d&&this.accessor.get(Pe).getConfig(Ne.ConversationIntentDetection)&&(d=p=await this.intentDetector.detectIntent(void 0,u,s.agentId,i,o,void 0,void 0),this.conversationLogger?.logIntent(d?.id,!1),a()))return C2;d??=ks.Instance;let f=c?LQ.fromEditor(this.accessor,c):void 0,m=await d.invoke(this.accessor,{location:2,documentContext:f},void 0);if(a())return C2;e.intentInvocation=m,r=await this.sanitizeVariables(r,e);let h=m.endpoint,g,v,b=!1,y;try{let L={report(M){n.push(M)}};({messages:g,tokenCount:v,hasIgnoredFiles:b,references:y}=await m.promptCrafter.buildPrompt(this.conversation,h,r.variables,L,o,i));for(let M of y)L.report(new eP(M.anchor));e.addReferences(y)}catch(L){if(C0(L))return C2;throw L}if(a())return C2;if(g.length===0)return{};let S=this.conversation.getLatestTurn()?.contextParts.map(L=>L.kind)??[];if(this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionMessage",{intent:d?.id??"none",detectedIntent:p?.id??"none",contextTypes:S.join(","),query:l.restOfQuery},{}),e.chatMessages=g,this.fixMessageNames(d,g),this.conversationLogger?.logMessages(g),o=$5(this.conversation,this._sessionId,"conversationPanel",u,v,d?.id,o),i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:ep.t("Cancelled")}};let x=m?.responseProcessor??new XS([{stop:"[COMMANDS START]"}]),T=await this.fetchConversationResponse(e,h,u,g,s.agentId,i,n,x,o,{messageId:o.properties.messageId,messageSource:d?.id&&d.id!==ks.ID?`chat.${d.id}`:"chat.user"});return b&&n.markdown(ep.t(RP)),T}catch(c){this.accessor.get(ce).defaultLogger.exception(c),this.accessor.get(ke).sendGHTelemetryException(c,"Error"),this.conversationLogger?.logThrownError(c);let u=c.message;return e.status="error",e.response={message:u,type:"meta"},{errorDetails:{message:u,responseIsIncomplete:!0}}}}async sanitizeVariables(e,r){let n=e.variables.map(async o=>{let s=!1;for(let a of o.values)a.value instanceof Ji&&(s=await this.accessor.get(Oe).isCopilotIgnored(a.value));return s&&o.range&&(r.request.message=r.request.message.slice(0,o.range[0])+r.request.message.slice(o.range[1])),s?null:o}),i=Pr(await Promise.all(n));return{...e,variables:i}}fixMessageNames(e,r){let n=this._configurationService.getConfig(Ne.UseMessageNames);r.forEach(i=>{n?i.role!=="system"&&i.name===e?.id&&(i.name=void 0):i.name=void 0})}async fetchConversationResponse(e,r,n,i,o,s,a,c,u,l){let d=$S();e.requestId=u.properties.messageId;let p=Date.now(),f=0,m=new D0,h=c.processResponse(e,i,m.asyncIterable,a,s),g=new Set,v=await this.accessor.get(Qt).fetchOne(i,async(q,O,Z)=>{f===0&&(f=Date.now()),Z.codeVulnAnnotations&&(!((q.match(/(^|\n)```/g)?.length??0)%2===1)||q.match(/(^|\n)```\w*\s*$/))&&(Z.codeVulnAnnotations=void 0),Z.codeVulnAnnotations&&(Z.codeVulnAnnotations=Z.codeVulnAnnotations.filter(z=>!g.has(z.details.type)),Z.codeVulnAnnotations.forEach(z=>g.add(z.details.type))),m.emitOne({text:q,delta:Z})},s,2,r,{agent:o},{temperature:this.options.temperature,top_p:this.options.topP},l,{intent:!0});m.resolve();let b=await h,y=b?kQ(b):[],S=b?b.match(/\]\(command:_github\.copilot\.open/g):[],x=u.raw.displayedTime??p,T=["programming-related tasks","programming related questions","software development topics","related to programming","expertise is limited","sorry, i can't assist with that"],L=0;v.type==="success"&&!b.trim().includes(`
`)&&T.some(q=>b.toLowerCase().includes(q))&&(L=1);let M=this.accessor.get(ye);switch(this._telemetryService.sendMSFTTelemetryEvent("panel.request",{command:e.intentInvocation?.intent.id??"none",contextTypes:e.contextParts.map(q=>q.kind).join(",")??"none",promptTypes:i.map(q=>`${q.role}${q.name?`-${q.name}`:""}:${q.content.length}`).join(","),conversationId:this._sessionId,requestId:e.requestId,responseId:v.requestId,responseType:v.type,codeBlocks:y.join(","),model:r.model},{turn:this.conversation.turns.length,textBlocks:y.length?-1:b.split(/\n{2,}/).length??0,links:S?.length??0,maybeOffTopic:L,messageTokenCount:M.tokenLength(e.request.message),promptTokenCount:GS(this.accessor.get(ye),i),userPromptCount:i.filter(q=>q.role==="user").length,responseTokenCount:M.tokenLength(b)??0,timeToRequest:p-x,timeToFirstToken:f?f-x:-1,timeToComplete:Date.now()-x}),W5(this.accessor,"conversationPanel",v.requestId,n,v.type==="offTopic",this.accessor.get(_t).activeTextEditor?.document,u),v.type){case"success":return await this.processSuccessfulFetchResult(e,b,v.requestId,d);case"offTopic":return this.processOffTopicFetchResult(a,e,n,u);case"canceled":return e.status="cancelled",e.response={message:"Cancelled",type:"user"},{errorDetails:e.response};case"rateLimited":return e.status="error",{errorDetails:{message:ep.t("Sorry, your request was rate-limited. Please wait and try sending again later."),responseIsFiltered:!0}};case"badRequest":case"failed":return e.status="error",e.response={message:v.reason,type:"server"},{errorDetails:e.response};case"filtered":return e.status="filtered",{errorDetails:{message:h5(v.category),responseIsFiltered:!0}};case"agent_unauthorized":return e.status="error",{};case"agent_failed_dependency":return e.status="error",{errorDetails:{message:v.reason}};case"length":return e.status="error",{errorDetails:{message:ep.t("Sorry, the response hit the length limit. Please rephrase your prompt.")}};case"unknown":return e.status="error",{errorDetails:{message:ep.t("Sorry, no response was returned."),responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i){return r.length>0?(e.status="success",e.response={message:r,type:"model"},i.markAsDisplayed(),K5(this.accessor,this.conversation,this._sessionId,"conversationPanel",r,n,this.accessor.get(_t).activeTextEditor?.document,i),{}):(e.status="error",e.response={message:ep.t("The model unexpectedly did not return a response, which may indicate a service issue. Please report a bug."),type:"meta"},{errorDetails:e.response})}processOffTopicFetchResult(e,r,n,i){let o=$S();return e.markdown(this.options.rejectionMessage),r.response={message:this.options.rejectionMessage,type:"offtopic-detection"},r.status="off-topic",o.markAsDisplayed(),Y5(this.accessor,this.conversation,this._sessionId,"conversationPanel",n,i.properties.messageId,this.accessor.get(_t).activeTextEditor?.document,o),{}}getLatestTurn(){return this.conversation.getLatestTurn()}removeRequest(e){let r=this.conversation.removeTurn(e);this._telemetryService.sendMSFTTelemetryEvent("panel.action.remove",{command:r?.intentInvocation?.intent.id,contextTypes:r?.contextParts.map(n=>n.kind).join(",")??"none",responseType:r?.response?.type,conversationId:this._sessionId,requestId:e})}};async function vIe(t,e,r,n,i){let o=r.getLatestTurn();if(!o)return[];let s={messageId:o.requestId},u=(o.status==="success"?await new zS(t,e).followUp(r,2,i,s):[]).map(f=>bJe(f,t,s));i.isCancellationRequested||n?.logFollowups(u);let l=o,d=[],p=l?.intentInvocation;return p?.followUps&&(d=await p.followUps(t,l)),u.concat(d)}function bJe(t,e,r){let n=r??{};return n.suggestionId=cn(),n.suggestionType="Follow-up from model",Q5(e,n.suggestionType,n.messageId,n.suggestionId,e.get(_t).activeTextEditor?.document),{prompt:t,metadata:n}}var Wg=W(require("vscode"));function yIe(t,e){let r=Wg.window.activeTextEditor?.document,n=Wg.window.activeTextEditor?.selection,i=e.result,o=t.get(ke),s=i.metadata?.responseId&&t.get(Pg).getConversation(i.metadata.responseId);switch(e.action.kind){case"copy":o.sendMSFTTelemetryEvent("panel.action.copy",{languageId:r?.languageId,requestId:i.metadata?.responseId},{codeBlockIndex:e.action.codeBlockIndex,copyType:e.action.copyKind,characterCount:e.action.copiedCharacters,lineCount:e.action.copiedText.split(`
`).length});break;case"insert":o.sendMSFTTelemetryEvent("panel.action.insert",{languageId:r?.languageId,requestId:i.metadata?.responseId},{codeBlockIndex:e.action.codeBlockIndex,characterCount:e.action.totalCharacters});break;case"runInTerminal":o.sendMSFTTelemetryEvent("panel.action.runinterminal",{languageId:r?.languageId,requestId:i.metadata?.responseId,blockLanguage:e.action.languageId},{codeBlockIndex:e.action.codeBlockIndex});break;case"followUp":break;case"bug":s&&t.get(VS)?.reportChat(s.getLatestTurn());break}if(e.action.kind==="copy"||e.action.kind==="insert"){let a={};a={totalCharacters:e.action.totalCharacters},e.action.kind==="copy"&&(a={...a,copiedCharacters:e.action.copiedCharacters}),r&&n&&(a={...a,cursorLocation:r.offsetAt(n.active)}),WS(t,Wg.window.activeTextEditor?.document,{codeBlockIndex:e.action.codeBlockIndex.toString(),messageId:i.metadata?.responseId??""},a,e.action.kind==="copy"?"conversation.acceptedCopy":"conversation.acceptedInsert")}}function bIe(t,e){let r=Wg.window.activeTextEditor?.document,n=e.result;t.get(ke).sendMSFTTelemetryEvent("panel.action.vote",{languageId:r?.languageId,requestId:n.metadata.responseId},{direction:e.kind===Wg.ChatResultFeedbackKind.Helpful?1:2}),WS(t,r,{rating:e.kind===Wg.ChatResultFeedbackKind.Helpful?"positive":"negative",messageId:n.metadata.responseId},{},"conversation.messageRating")}var ns=W(require("vscode"));function r6(){return"https://aka.ms/microsoft/vscode-copilot-release"}var JS=class{constructor(e,r){this.configurationService=e;this.accessor=r;this.hasShownWelcomeMessage=!1}async provideWelcomeMessage(e,r){let i=(await Sc(this.configurationService))?.account?.label,o=r6(),s=this.configurationService.getConfig(Ne.WelcomeMessage),a=ns.l10n.t({message:"I'm powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and [share feedback]({0}) so that we can learn and improve. Check out the [{1} documentation]({2}) to learn more.",args:[o,"Copilot","https://code.visualstudio.com/docs/copilot/getting-started-chat"],comment:["{Locked=']({'}","the [text](url) is a markdown link syntax. Do not add any additional spaces between ] and ("]}),c=i?" **@"+i+"**":"";if(s==="never"||this.hasShownWelcomeMessage&&s==="first")return[ns.l10n.t("Hi{0}, how can I help you?",c)];this.hasShownWelcomeMessage=!0;let u="workbench.action.quickchat.launchInlineChat",l=ns.window.activeNotebookEditor||ns.window.activeTextEditor?ns.l10n.t("You can also [start an inline chat session]({0}).",`command:${u}`):"",d=new ns.MarkdownString(ns.l10n.t("Welcome,{0}, I'm your {1} and I'm here to help you get things done faster. {2}",c,"Copilot",l));return d.isTrusted={enabledCommands:[u]},[d,a]}provideSampleQuestions(e,r){let n=ns.window.activeNotebookEditor||ns.window.activeTextEditor?_Je():_Ie([["","help",ns.l10n.t("What can you do?")]]);return xJe([...n],this.accessor,"welcome"),n}};JS=we([de(0,Pe),de(1,Ct)],JS);function _Je(){let t=M0("workspace");return _Ie([[t,"fix",ns.l10n.t("the problems in my code")],[t,"tests",ns.l10n.t("add unit tests for my code")],[t,"explain",ns.l10n.t("how the selected code works")]])}function _Ie(t){return t.map(([e,r,n])=>({prompt:"",participant:e,command:r,label:`/${r} ${n}`}))}function xJe(t,e,r){t.map(n=>{Q5(e,`@${n.participant} /${n.command} ${n.prompt}`,r,"",ns.window.activeTextEditor?.document)})}var ZS=class{constructor(e){this.instantiationService=e}register(){let e=this.instantiationService.createInstance(ta);return e.register(),e}};ZS=we([de(0,ua)],ZS);var ta=class{constructor(e,r,n,i,o,s,a){this.options=e;this.extensionContext=r;this.configurationService=n;this.languageDiagnosticsService=i;this.accessor=o;this.logService=s;this.instantiationService=a;this._disposables=new Ht;this._inlineChatSessions=new xl(10,1);this._logger=new QS(this.accessor,()=>this._disposables.add(At.window.createOutputChannel("GitHub Copilot Chat Conversation","log")))}dispose(){this._disposables.dispose()}register(){this._disposables.add(this.registerDefaultAgent()),this._disposables.add(this.registerEditorDefaultAgent()),this._disposables.add(this.registerWorkspaceAgent()),this._disposables.add(this.registerVSCodeAgent()),this._disposables.add(this.registerTerminalAgent())}createAgent(e,r){let n=At.chat.createChatParticipant(M0(e),this.getChatParticipantHandler(e,r));return n.onDidReceiveFeedback(i=>{if(ta.isInlineChatResult(i.result))return this.handleInlineChatUserAction(i.result,void 0,i);bIe(this.accessor,i)}),n.onDidPerformAction(i=>{if(ta.isInlineChatResult(i.result))return this.handleInlineChatUserAction(i.result,i,void 0);yIe(this.accessor,i)}),n.supportIssueReporting=this.accessor.get(Pe).getConfig(Ne.DebugReportFeedback),n.followupProvider={provideFollowups:async(i,o,s)=>{if(ta.isInlineChatResult(i))return this.handleInlineChatFollowUps(i,o,s);let a=i.metadata?.responseId&&this.accessor.get(Pg).getConversation(i.metadata.responseId);return a?await vIe(this.accessor,this.options,a,this._logger,s):[]}},n}registerWorkspaceAgent(){let e=this.createAgent(Sp,"workspace");return e.iconPath=new At.ThemeIcon("code"),e.isSecondary=!0,e.sampleRequest=Ro.getCommand("workspace",2)?.intent?.commandInfo?.sampleRequest,e}registerVSCodeAgent(){let e=this.createAgent(UF,"vscode"),r=At.env.appName.includes("Insiders")||At.env.appName.includes("OSS");return e.iconPath=gt.joinPath(this.extensionContext.extensionUri,"assets",r?"vscode-chat-avatar-insiders.svg":"vscode-chat-avatar-stable.svg"),e.sampleRequest=Ro.getCommand("vscode",2)?.intent?.commandInfo?.sampleRequest,e}registerTerminalAgent(){let e=this.createAgent($b,"terminal");return e.iconPath=new At.ThemeIcon("terminal"),e.sampleRequest=Ro.getCommand("terminal",2)?.intent?.commandInfo?.sampleRequest,e}async initDefaultAgentRequestorProps(e){let r=async()=>{let n=await Sc(this.configurationService);if(n){let i=n?.account?.label;return e.requester={name:i,icon:gt.parse(`https://avatars.githubusercontent.com/${i}`)},!0}return!1};if(!await r()){let n=At.authentication.onDidChangeSessions(async i=>{O0(i,this.configurationService)&&await r()&&n.dispose()})}}registerDefaultAgent(){let e=this.createAgent(FF,"unknown");e.iconPath=new At.ThemeIcon("copilot"),this.initDefaultAgentRequestorProps(e);try{e.helpTextPrefix=At.l10n.t("You can ask me general programming questions, or chat with the following participants which have specialized expertise and can perform actions:");let r=At.l10n.t({message:`To have a great conversation, ask me questions as if I was a real programmer:

* **Show me the code** you want to talk about by having the files open and selecting the most important lines.
* **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
* **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.

You can also ask me questions about your editor selection by [starting an inline chat session](command:inlineChat.start).

Learn more about [GitHub Copilot](https://docs.github.com/copilot/using-github-copilot/getting-started-with-github-copilot?tool=vscode&utm_source=editor&utm_medium=chat-panel&utm_campaign=2024q3-em-MSFT-getstarted) in [Visual Studio Code](https://code.visualstudio.com/docs/copilot/overview).`,comment:"{Locked='](command:inlineChat.start)'}"}),n=new At.MarkdownString(r);n.isTrusted={enabledCommands:["inlineChat.start"]},e.helpTextPostfix=n,e.helpTextVariablesPrefix=At.l10n.t("You can also help me understand your question by using the following variables to give me extra context:")}catch{}return e.fullName="GitHub Copilot",e.welcomeMessageProvider=this.accessor.get(ua).createInstance(JS),e}registerEditorDefaultAgent(){let e=this.createAgent(MT,"unknown");return e.iconPath=new At.ThemeIcon("copilot"),e.fullName="GitHub Copilot",e.welcomeMessageProvider={provideWelcomeMessage:()=>[],provideSampleQuestions:(r,n)=>{if(At.window.activeTextEditor){let{document:i,selection:o}=At.window.activeTextEditor,s=this.languageDiagnosticsService.getDiagnostics(i.uri).find(a=>a.range.contains(o));if(s&&(s.severity===Al.Warning||s.severity===Al.Error))return[{prompt:`/fix ${s.message}`}]}}},e}getChatParticipantHandler(e,r){return async(n,i,o,s)=>{if(n.location===At.ChatLocation.Editor)return this.handleInlineChatRequest(e,n,i,o,s);let a=new t6(this.accessor,this.options,this._logger);a.addHistory(i.history);let c=bS[r],u=n.command&&c?c[n.command]:r;return await a.provideResponseWithProgress(n,o,s,{agentId:e,intentId:u})}}static{this.metadataKey="inlineChatSession"}static isInlineChatResult(e){return!!this.retrieveSessionId(e)}static retrieveSessionId(e){return e?.metadata?.[ta.metadataKey]}static asChatResultWithSessionId(e){return{metadata:{[ta.metadataKey]:e}}}async handleInlineChatRequest(e,r,n,i,o){this._inlineChatProvider??=this.instantiationService.createInstance($g,e,this.options.rejectionMessage);let s=r.variables.find(v=>v.name==="_inlineChatContext")?.values[0],a=r.variables.find(v=>v.name==="_inlineChatDocument")?.values[0],c,u,l;if(typeof s?.value=="string"){let v=JSON.parse(s.value);u=new At.Selection(v.selection.selectionStartLineNumber-1,v.selection.selectionStartColumn-1,v.selection.positionLineNumber-1,v.selection.positionColumn-1),l=new At.Range(v.wholeRange.startLineNumber-1,v.wholeRange.startColumn-1,v.wholeRange.endLineNumber-1,v.wholeRange.endColumn-1),c=At.workspace.textDocuments.find(b=>b.uri.toString()===gt.revive(v.uri).toString())}if(a?.value instanceof At.Uri&&(c=At.workspace.textDocuments.find(v=>v.uri.toString()===a.value.toString())),!c||!u||!l)return this.logService.defaultLogger.warn("Inline chat request is missing context information",c,u,l),{};let d;for(let v=n.history.length-1;v>=0;v--){let b=n.history[v];if(b instanceof At.ChatResponseTurn){d=b.result;break}}let p=ta.retrieveSessionId(d)??cn(),f=this._inlineChatSessions.get(p);f||(f={session:await this._inlineChatProvider.prepareInteractiveEditorSession({document:c,selection:u}),responses:[]},this._inlineChatSessions.set(p,f));let m={live:!0,previewDocument:f.session.document,attempt:r.attempt,withIntentDetection:r.enableCommandDetection,prompt:r.prompt,selection:u,wholeRange:l},h={report(v){v.edits&&v.edits.length>0?i.textEdit(m.previewDocument.uri,v.edits):v.content?i.markdown(v.content):v.message||v.slashCommand&&i.detectedParticipant(M0("default"),{name:v.slashCommand.command,description:v.slashCommand.detail??""})}},g=await this._inlineChatProvider.provideInteractiveEditorResponse(f.session,m,h,o);if(!g)return{};if(f.responses.push(g),g.contents&&i.markdown(g.contents),g.edits){let{edits:v}=g;if(v instanceof At.WorkspaceEdit)for(let[b,y]of v.entries())i.textEdit(b,y);else i.textEdit(m.previewDocument.uri,v)}return ta.asChatResultWithSessionId(p)}async handleInlineChatUserAction(e,r,n){let i=ta.retrieveSessionId(e);if(!i)return;let o=this._inlineChatSessions.get(i);if(!o||o.responses.length===0)return;let s;r?.action.kind==="editor"?s=r.action.accepted?At.InteractiveEditorResponseFeedbackKind.Accepted:At.InteractiveEditorResponseFeedbackKind.Undone:r?.action.kind==="bug"?s=At.InteractiveEditorResponseFeedbackKind.Bug:n?.kind===At.ChatResultFeedbackKind.Helpful?s=At.InteractiveEditorResponseFeedbackKind.Helpful:n?.kind===At.ChatResultFeedbackKind.Unhelpful&&(s=At.InteractiveEditorResponseFeedbackKind.Unhelpful),s&&this._inlineChatProvider?.handleInteractiveEditorResponseFeedback(o.session,o.responses.at(-1),s)}async handleInlineChatFollowUps(e,r,n){let i=ta.retrieveSessionId(e);if(!i)return[];let o=this._inlineChatSessions.get(i);if(!o||o.responses.length===0)return[];let s=await this._inlineChatProvider?.provideFollowups(o.session,o.responses.at(-1),n),a=[];if(s)for(let c of s)c.message&&a.push({prompt:c.message,label:c.title});return a}};ta=we([de(0,ki),de(1,Kr),de(2,Pe),de(3,Zi),de(4,Ct),de(5,ce),de(6,ua)],ta);var Re=W(require("vscode"));var ko=require("vscode");function xIe(t){if(typeof t!="string")throw new TypeError("Argument must be a string.");if(!t)return t;let e=t.startsWith("!"),r=e?t.slice(1):t,n=r,i=!1;switch(r[0]==="/"&&(i=!0,n=r.slice(1)),n[0]){case"*":r[1]!=="*"&&(n="**/"+n);break;default:if((!i&&!n.includes("/")||n.endsWith("/"))&&(n="**/"+n),n.endsWith("*")||n.endsWith("?"))break;/\.[a-z\d_-]+$/.test(n)||(n.endsWith("/")||(n+="/"),n+="**")}return e?"!"+n:n}var NIe=W(kIe()),ra=require("path");var i6=class{constructor(){this._ignoreMap=new Map;this._ignoreCache=new Map;this._searchRankCache=null}setIgnoreFile(e,r,n){let i="";e&&(i=(0,ra.relative)(e.fsPath,(0,ra.dirname)(r.fsPath)),i.startsWith("..")&&(i="")),this._ignoreMap.set(r.fsPath,{ignore:(0,NIe.default)().add(n),patterns:Fb(n).filter(o=>o.trim()&&!o.startsWith("#")).map(xIe).map(o=>i?ra.posix.join(i,o):o)}),this._searchRankCache=null,this._ignoreCache.clear()}removeIgnoreFile(e){this._ignoreMap.delete(e.fsPath),this._searchRankCache=null,this._ignoreCache.clear()}removeWorkspace(e){let r=0;for(let n of this._ignoreMap.keys())DIe(e.fsPath,n)&&(this._ignoreMap.delete(n),r+=1);r>0&&(this._searchRankCache=null,this._ignoreCache.clear())}asMinimatchPatterns(){return[...this._ignoreMap.values()].flatMap(e=>e.patterns)}isIgnored(e){if(this._ignoreMap.size===0)return!1;let r=e.fsPath;if(this._ignoreCache.has(r))return this._ignoreCache.get(r);let n=0,i={ignored:!1,unignored:!1};try{let o=this._searchRank;for(let s of o){n+=1;let a=(0,ra.dirname)(s),c=(0,ra.relative)(a,r);if(!c.startsWith("..")&&a!==r&&DIe(a,r)){let u=this._ignoreMap.get(s);if(!u)throw new Error(`No ignore patterns found for ${s}`);if(i=u.ignore.test(c),i.ignored||i.unignored)break}}return this._ignoreCache.set(r,i.ignored),i.ignored}catch{return!1}}get _searchRank(){if(this._searchRankCache!==null)return this._searchRankCache;let e={},r=n=>n.split(ra.sep).length;return this._searchRankCache=[...this._ignoreMap.keys()].sort((n,i)=>(e[i]||=r(i))-(e[n]||=r(n)))}};function DIe(t,e){return t===e?!0:(t.charAt(t.length-1)!==ra.sep&&(t+=ra.sep),(0,ra.normalize)(e).startsWith((0,ra.normalize)(t)))}var eCe=W($Ie(),1);var R2=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var $Je={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},A2=t=>t.replace(/[[\]\\-]/g,"\\$&"),WJe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),WIe=t=>t.join(""),KIe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,a=!1,c=!1,u=!1,l=r,d="";e:for(;o<t.length;){let h=t.charAt(o);if((h==="!"||h==="^")&&o===r+1){u=!0,o++;continue}if(h==="]"&&s&&!c){l=o+1;break}if(s=!0,h==="\\"&&!c){c=!0,o++;continue}if(h==="["&&!c){for(let[g,[v,b,y]]of Object.entries($Je))if(t.startsWith(g,o)){if(d)return["$.",!1,t.length-r,!0];o+=g.length,y?i.push(v):n.push(v),a=a||b;continue e}}if(c=!1,d){h>d?n.push(A2(d)+"-"+A2(h)):h===d&&n.push(A2(h)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(A2(h+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=h,o+=2;continue}n.push(A2(h)),o++}if(l<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let h=n[0].length===2?n[0].slice(-1):n[0];return[WJe(h),!1,l-r,!1]}let p="["+(u?"^":"")+WIe(n)+"]",f="["+(u?"":"^")+WIe(i)+"]";return[n.length&&i.length?"("+p+"|"+f+")":n.length?p:f,a,l-r,!0]};var Kg=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var KJe=new Set(["!","?","+","*","@"]),YIe=t=>KJe.has(t),YJe="(?!(?:^|/)\\.\\.?(?:$|/))",o6="(?!\\.)",QJe=new Set(["[","."]),XJe=new Set(["..","."]),JJe=new Set("().*{}+?[]^$\\!"),ZJe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jQ="[^/]",QIe=jQ+"*?",XIe=jQ+"+?",eE=class t{type;#t;#n;#i=!1;#e=[];#r;#s;#c;#a=!1;#o;#u;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#n=!0),this.#r=r,this.#t=this.#r?this.#r.#t:this,this.#o=this.#t===this?n:this.#t.#o,this.#c=this.#t===this?[]:this.#t.#c,e==="!"&&!this.#t.#a&&this.#c.push(this),this.#s=this.#r?this.#r.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#f(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#s+1;!n.type&&i<n.#e.length;i++)for(let o of e.#e){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#e[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#e.push(r)}}toJSON(){let e=this.type===null?this.#e.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#e.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#t===this)return!0;if(!this.#r?.isStart())return!1;if(this.#s===0)return!0;let e=this.#r;for(let r=0;r<this.#s;r++){let n=e.#e[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#e.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#e)r.copyIn(n);return r}static#l(e,r,n,i){let o=!1,s=!1,a=-1,c=!1;if(r.type===null){let f=n,m="";for(;f<e.length;){let h=e.charAt(f++);if(o||h==="\\"){o=!o,m+=h;continue}if(s){f===a+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(f===a+2&&c)&&(s=!1),m+=h;continue}else if(h==="["){s=!0,a=f,c=!1,m+=h;continue}if(!i.noext&&YIe(h)&&e.charAt(f)==="("){r.push(m),m="";let g=new t(h,r);f=t.#l(e,g,f,i),r.push(g);continue}m+=h}return r.push(m),f}let u=n+1,l=new t(null,r),d=[],p="";for(;u<e.length;){let f=e.charAt(u++);if(o||f==="\\"){o=!o,p+=f;continue}if(s){u===a+1?(f==="^"||f==="!")&&(c=!0):f==="]"&&!(u===a+2&&c)&&(s=!1),p+=f;continue}else if(f==="["){s=!0,a=u,c=!1,p+=f;continue}if(YIe(f)&&e.charAt(u)==="("){l.push(p),p="";let m=new t(f,l);l.push(m),u=t.#l(e,m,u,i);continue}if(f==="|"){l.push(p),p="",d.push(l),l=new t(null,r);continue}if(f===")")return p===""&&r.#e.length===0&&(r.#d=!0),l.push(p),p="",r.push(...d,l),u;p+=f}return r.type=null,r.#n=void 0,r.#e=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#l(e,n,0,r),n}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#n||this.#o.nocase&&!this.#o.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#o.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#o.dot;if(this.#t===this&&this.#f(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#e.map(f=>{let[m,h,g,v]=typeof f=="string"?t.#m(f,this.#n,c):f.toRegExpSource(e);return this.#n=this.#n||g,this.#i=this.#i||v,m}).join(""),l="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&XJe.has(this.#e[0]))){let m=QJe,h=r&&m.has(u.charAt(0))||u.startsWith("\\.")&&m.has(u.charAt(2))||u.startsWith("\\.\\.")&&m.has(u.charAt(4)),g=!r&&!e&&m.has(u.charAt(0));l=h?YJe:g?o6:""}let d="";return this.isEnd()&&this.#t.#a&&this.#r?.type==="!"&&(d="(?:$|\\/)"),[l+u+d,Kg(u),this.#n=!!this.#n,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#p(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#e=[c],this.type=null,this.#n=void 0,[c,Kg(this.toString()),!1,!1]}let s=!n||e||r||!o6?"":this.#p(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#d)a=(this.isStart()&&!r?o6:"")+XIe;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?o6:"")+QIe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+c}return[a,Kg(o),this.#n=!!this.#n,this.#i]}#p(e){return this.#e.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#i=this.#i||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,o+=(JJe.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,l,d,p]=KIe(e,a);if(d){o+=u,s=s||l,a+=d-1,r=r||p;continue}}if(c==="*"){n&&e==="*"?o+=XIe:o+=QIe,r=!0;continue}if(c==="?"){o+=jQ,r=!0;continue}o+=ZJe(c)}return[o,Kg(e),!!r,s]}};var GQ=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var is=(t,e,r={})=>(R2(e),!r.nocomment&&e.charAt(0)==="#"?!1:new tE(e,r).match(t)),eZe=/^\*+([^+@!?\*\[\(]*)$/,tZe=t=>e=>!e.startsWith(".")&&e.endsWith(t),rZe=t=>e=>e.endsWith(t),nZe=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),iZe=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),oZe=/^\*+\.\*+$/,sZe=t=>!t.startsWith(".")&&t.includes("."),aZe=t=>t!=="."&&t!==".."&&t.includes("."),cZe=/^\.\*+$/,uZe=t=>t!=="."&&t!==".."&&t.startsWith("."),lZe=/^\*+$/,dZe=t=>t.length!==0&&!t.startsWith("."),pZe=t=>t.length!==0&&t!=="."&&t!=="..",fZe=/^\?+([^+@!?\*\[\(]*)?$/,mZe=([t,e=""])=>{let r=tCe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},hZe=([t,e=""])=>{let r=rCe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},gZe=([t,e=""])=>{let r=rCe([t]);return e?n=>r(n)&&n.endsWith(e):r},vZe=([t,e=""])=>{let r=tCe([t]);return e?n=>r(n)&&n.endsWith(e):r},tCe=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},rCe=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},nCe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",JIe={win32:{sep:"\\"},posix:{sep:"/"}},yZe=nCe==="win32"?JIe.win32.sep:JIe.posix.sep;is.sep=yZe;var fu=Symbol("globstar **");is.GLOBSTAR=fu;var bZe="[^/]",_Ze=bZe+"*?",xZe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",SZe="(?:(?!(?:\\/|^)\\.).)*?",EZe=(t,e={})=>r=>is(r,t,e);is.filter=EZe;var pu=(t,e={})=>Object.assign({},t,e),TZe=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return is;let e=is;return Object.assign((n,i,o={})=>e(n,i,pu(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,pu(t,o))}static defaults(i){return e.defaults(pu(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,pu(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,pu(t,o))}},unescape:(n,i={})=>e.unescape(n,pu(t,i)),escape:(n,i={})=>e.escape(n,pu(t,i)),filter:(n,i={})=>e.filter(n,pu(t,i)),defaults:n=>e.defaults(pu(t,n)),makeRe:(n,i={})=>e.makeRe(n,pu(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,pu(t,i)),match:(n,i,o={})=>e.match(n,i,pu(t,o)),sep:e.sep,GLOBSTAR:fu})};is.defaults=TZe;var iCe=(t,e={})=>(R2(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,eCe.default)(t));is.braceExpand=iCe;var IZe=(t,e={})=>new tE(t,e).makeRe();is.makeRe=IZe;var CZe=(t,e,r={})=>{let n=new tE(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};is.match=CZe;var ZIe=/[?*]|[+@!]\(.*?\)|\[|\]/,wZe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),tE=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){R2(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||nCe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!ZIe.test(o[2]))&&!ZIe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(l=>this.parse(l))];if(u)return[o[0],...o.slice(1).map(l=>this.parse(l))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let a=n[i+1],c=n[i+2],u=n[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let l=n.slice(0);l[i]="**",e.push(l),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let a=n[s];s===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let c=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...c),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(a==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),g=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),v=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!v&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),y=g?3:h?0:void 0,S=b?3:v?0:void 0;if(typeof y=="number"&&typeof S=="number"){let[x,T]=[e[y],r[S]];x.toLowerCase()===T.toLowerCase()&&(r[S]=x,S>y?r=r.slice(S):y>S&&(e=e.slice(y)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,a=0,c=e.length,u=r.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var l=r[a],d=e[s];if(this.debug(r,l,d),l===!1)return!1;if(l===fu){this.debug("GLOBSTAR",[r,l,d]);var p=s,f=a+1;if(f===u){for(this.debug("** at the end");s<c;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;p<c;){var m=e[p];if(this.debug(`
globstar while`,e,p,r,f,m),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,c,m),!0;if(m==="."||m===".."||!i.dot&&m.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===c))}let h;if(typeof l=="string"?(h=d===l,this.debug("string match",l,d,h)):(h=l.test(d),this.debug("pattern match",l,d,h)),!h)return!1}if(s===c&&a===u)return!0;if(s===c)return n;if(a===u)return s===c-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return iCe(this.pattern,this.options)}parse(e){R2(e);let r=this.options;if(e==="**")return fu;if(e==="")return"";let n,i=null;(n=e.match(lZe))?i=r.dot?pZe:dZe:(n=e.match(eZe))?i=(r.nocase?r.dot?iZe:nZe:r.dot?rZe:tZe)(n[1]):(n=e.match(fZe))?i=(r.nocase?r.dot?hZe:mZe:r.dot?gZe:vZe)(n):(n=e.match(oZe))?i=r.dot?aZe:sZe:(n=e.match(cZe))&&(i=uZe);let o=eE.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?_Ze:r.dot?xZe:SZe,i=new Set(r.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(l=>{if(l instanceof RegExp)for(let d of l.flags.split(""))i.add(d);return typeof l=="string"?wZe(l):l===fu?fu:l._src});return u.forEach((l,d)=>{let p=u[d+1],f=u[d-1];l!==fu||f===fu||(f===void 0?p!==void 0&&p!==fu?u[d+1]="(?:\\/|"+n+"\\/)?"+p:u[d]=n:p===void 0?u[d-1]=f+"(?:\\/|"+n+")?":p!==fu&&(u[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+p,u[d+1]=fu))}),u.filter(l=>l!==fu).join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let c=o[a],u=i;if(n.matchBase&&c.length===1&&(u=[s]),this.matchOne(u,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return is.defaults(e).Minimatch}};is.AST=eE;is.Minimatch=tE;is.escape=GQ;is.unescape=Kg;var s6=class t{constructor(e){this.accessor=e;this._contentExclusionCache=new Map;this._contentExclusionFetchPromise=void 0;this._repositoryDiscoveryComplete=!1;this._disposables=[];let r=new cA;this._disposables.push(r),r.cancelAndSet(async()=>{await this.makeContentExclusionRequest()},30*60*1e3),this.accessor.get(vi).repositories.map(n=>this.shouldFetchContentExclusionRules(n)),this.makeContentExclusionRequest(),this._disposables.push(this.accessor.get(vi).onDidOpenRepository(async n=>{this.shouldFetchContentExclusionRules(n)&&await this.makeContentExclusionRequest()})),this._disposables.push(this.accessor.get(vi).onDidCloseRepository(async n=>{let i=this.getRepositoryInfo(n);if(i)for(let o of i.fetchUrls)this._contentExclusionCache.delete(o)})),this.accessor.get(Ml).extensionAvaiable||(this._repositoryDiscoveryComplete=!0),this.accessor.get(vi).isInitialized?this._repositoryDiscoveryComplete=!0:this._disposables.push(this.accessor.get(vi).onDidFinishInitialization(()=>{this._repositoryDiscoveryComplete=!0}))}static{this.CONTENT_EXCLUSION_ENDPOINT="https://api.github.com/copilot_internal/content_exclusion"}async isIgnored(e){await this._contentExclusionFetchPromise,this.shouldFetchContentExclusionRules(e)&&await this.makeContentExclusionRequest();for(let{patterns:r}of this._contentExclusionCache.values())for(let n of r)if(is(e.path,n,{nocase:!0,matchBase:!0,nonegate:!0}))return this.accessor.get(ce).defaultLogger.debug(`File ${e.path} is ignored by content exclusion rule ${n}`),!0;return this._repositoryDiscoveryComplete?!1:(this.accessor.get(ce).defaultLogger.debug(`File ${e.path} is automatically ignored by content exclusion rules as repository discovery is not complete`),!0)}async asMinimatchPatterns(){return await this._contentExclusionFetchPromise,Array.from(this._contentExclusionCache.values()).flatMap(({patterns:r})=>r)}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[],this._contentExclusionCache.clear()}shouldFetchContentExclusionRules(e){let r=this.getRepositoryInfo(e);if(!r)return!1;let n=!1;for(let i of r?.fetchUrls??[])this._contentExclusionCache.has(i)||(n=!0,this._contentExclusionCache.set(i,{patterns:[],repoRoot:r.repoRoot}));return n}async makeContentExclusionRequest(){return this._contentExclusionFetchPromise=this._contentExclusionRequest(),this._contentExclusionFetchPromise}async _contentExclusionRequest(){let e=this.accessor.get(Sr),r=await this.accessor.get(Rt).getAnyGitHubToken(),n=Array.from(this._contentExclusionCache.keys());for(let i=0;i<n.length;i+=10){let o=n.slice(i,i+10),s=o.join(","),a=new URL(t.CONTENT_EXCLUSION_ENDPOINT);a.searchParams.set("repos",s);let c=await e.fetch(a.toString(),{headers:{Authorization:`token ${r}`}});if(!c.ok)continue;let u=await c.json();for(let l=0;l<u.length;l++){let d=u[l].rules.map(m=>m.paths).flat(),p=o[l],f=this._contentExclusionCache.get(p)?.repoRoot;f&&this._contentExclusionCache.set(p,{patterns:RZe(d,f),repoRoot:f})}this._contentExclusionFetchPromise=void 0}}getRepositoryInfo(e){let r=gt.isUri(e)?this.accessor.get(vi).getRepository(e):e;if(!r||!r.remoteFetchUrls)return;let n=Pr(r.remoteFetchUrls).map(i=>Cne(i));return{repoRoot:r.rootUri,fetchUrls:n}}};function RZe(t,e){return t.map(r=>r.startsWith("/")?`${e.path}${r}`:r)}var a6=".copilotignore";var c6=class{constructor(e,r,n){this.accessor=e;this.searchService=r;this.fs=n;this._copilotIgnoreFiles=new i6;this._copilotIgnoreEnabled=!1;this._onDidChangeCopilotIgnoreEnablement=new Br;this._disposables=[];this.onDidChangeCopilotIgnoreEnablement=this._onDidChangeCopilotIgnoreEnablement.event;this._filesIgnoredThisSession={"Remote Content Exclusions":new Set,"Copilot Ignore File":new Set},this._disposables.push(this._onDidChangeCopilotIgnoreEnablement),this._disposables.push(e.get(po).onCopilotToken(async i=>{let o=i.envelope.copilotignore_enabled??!1;this._copilotIgnoreEnabled!==o&&this._onDidChangeCopilotIgnoreEnablement.fire(o),this._copilotIgnoreEnabled=o,this._copilotIgnoreEnabled===!1&&this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._copilotIgnoreEnabled===!0&&!this._remoteContentExclusions&&(this._remoteContentExclusions=new s6(e))}))}dispose(){this._disposables.forEach(e=>e.dispose()),this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._disposables=[]}async isCopilotIgnored(e){let r=!1;if(this._copilotIgnoreEnabled){let n=this._copilotIgnoreFiles.isIgnored(e);r=n||await(this._remoteContentExclusions?.isIgnored(e)??!1),r&&(n?this._filesIgnoredThisSession["Copilot Ignore File"].add(e.toString()):this._filesIgnoredThisSession["Remote Content Exclusions"].add(e.toString()))}return r}async asMinimatchPattern(){let e=[];e.push(await this._remoteContentExclusions?.asMinimatchPatterns()??[]),e.push(this._copilotIgnoreFiles.asMinimatchPatterns());let r=e.flat();if(r.length!==0)return r.length===1?r[0]:`{${r.join(",")}}`}init(){return this._init??=(async()=>{for(let e of this.accessor.get(rt).getWorkspaceFolders())await this.addWorkspace(e)})(),this._init}async sessionInfo(){let e=`# Content Exclusion Session Info

`;for(let n in this._filesIgnoredThisSession){let i=this._filesIgnoredThisSession[n];i.size>0&&(e+=`## Files ignored this session from ${n}:

${Array.from(i).join(`
`)}`,e+=`

`)}let r=await this.asMinimatchPattern();return r&&(e+=`## Exclude glob used during search:
`+r),e}trackIgnoreFile(e,r,n){r.path.endsWith(a6)&&this._copilotIgnoreFiles.setIgnoreFile(e,r,n)}removeIgnoreFile(e){e.path.endsWith(a6)&&this._copilotIgnoreFiles.removeIgnoreFile(e)}removeWorkspace(e){this._copilotIgnoreFiles.removeWorkspace(e)}isIgnoreFile(e){return!!e.path.endsWith(a6)}async addWorkspace(e){if(e.scheme!=="file")return;let r=await this.searchService.findFilesWithDefaultExcludes(new mS(e,`${a6}`),void 0,qr.None);for(let n of r){let i=(await this.fs.readFile(n)).toString();this.trackIgnoreFile(e,n,i)}}};var u6=class{constructor(e){this.contentProvider=e}async provideTextDocumentContent(e,r){return this.contentProvider()}};var oCe="copilot-ignore",P2=class extends c6{constructor(e,r,n){super(e,r,n),this.installListeners(),this._disposables.push(ko.workspace.registerTextDocumentContentProvider(oCe,new u6(this.sessionInfo.bind(this))))}installListeners(){this._disposables.push(ko.workspace.onDidChangeWorkspaceFolders(e=>{for(let r of e.removed)this.removeWorkspace(r.uri);for(let r of e.added)this.addWorkspace(r.uri)})),this._disposables.push(ko.workspace.onDidSaveTextDocument(async e=>{if(this.isIgnoreFile(e.uri)){let r=(await ko.workspace.fs.readFile(e.uri)).toString(),n=ko.workspace.getWorkspaceFolder(e.uri);this.trackIgnoreFile(n?.uri,e.uri,r)}}),ko.workspace.onDidDeleteFiles(e=>{for(let r of e.files)this.removeIgnoreFile(r)}),ko.workspace.onDidRenameFiles(async e=>{for(let r of e.files)if(this.isIgnoreFile(r.newUri)){let n=(await ko.workspace.fs.readFile(r.newUri)).toString();this.removeIgnoreFile(r.oldUri);let i=ko.workspace.getWorkspaceFolder(r.newUri);this.trackIgnoreFile(i?.uri,r.newUri,n)}})),this._disposables.push(this.onDidChangeCopilotIgnoreEnablement(e=>{ko.commands.executeCommand("setContext","github.copilot.copilotIgnoreEnabled",e)}))}async dispalyContentExclusionSessionInfo(){let e=gt.from({scheme:oCe,authority:cn(),path:"/Content Exclusion Session Info"}),r=await ko.workspace.openTextDocument(e);await ko.languages.setTextDocumentLanguage(r,"markdown"),await ko.window.showTextDocument(r)}};function sCe(t){let e=t.get(Oe);return e instanceof P2?ko.commands.registerCommand("github.copilot.debug.contentExclusions",e.dispalyContentExclusionSessionInfo.bind(e)):{dispose:()=>{}}}var en=W(require("vscode"));var aCe=W(require("path"));var rE=class{constructor(){this.kind="current-selection";this.variableInfo=hn.variableInfo;this.metaContextResolverInfo={description:"Active selection."}}async resolveContext(e,r){let{messages:n,references:i,usedContext:o}=await Zo(e,r.endpoint,hn,{},e.get(ye));if(n.length>0)return{kind:this.kind,userMessages:n.map(s=>s.content),usedContext:o,references:i}}static formatSelection(e){let r=e.fileName?`From the file: ${aCe.basename(e.fileName)}
`:"",{trimmedLines:n}=jT(e.selectedText.split(/\r?\n/g));return`

${r}${Ii(e.languageId,Pr(n).join(`
`))}

`}},znr=Nr.register(new rE);var l6=W(lr()),D2=W(st());var cCe=W(st());var nE=class extends Y{async prepare(e,r,n){if(await this.accessor.get(Oe).isCopilotIgnored(this.props.documentContext.document.uri))return{k:"ignored"};let i=this.props.nodeToDocument??await iE(this.accessor,this.props.documentContext),o=AZe(this.props.endpointInfo,this.props.documentContext,i.range);return{k:"found",nodeToDocument:i,codeExcerptToDocument:o.range,metadata:new Ki(this.props.documentContext.wholeRange,o)}}render(e,r){if(e.k==="ignored")return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let n=e.codeExcerptToDocument.generatePrompt(!1).join(`
`);return vscpp(cCe.UserMessage,null,vscpp("meta",{value:e.metadata}),"I have the following code in the selection:",n!==""?vscpp("br",null):"",e.codeExcerptToDocument.generatePrompt(!1).join(`
`))}};async function iE(t,e){let r=t.get(Ir),n=mo(e.selection,e.document),i=r.getTreeSitterAST(e.document);if(i===void 0)return{range:e.wholeRange};let o=Date.now(),s=await i.getNodeToDocument(n),a=Date.now()-o,c=mo(e.wholeRange,e.document);PZe(t,n,c,s,e.document.languageId,a);let u=ds(e.document,s.nodeToDocument);return{identifier:s.nodeIdentifier,range:u}}function AZe(t,e,r){let n=new ea(t.modelMaxPromptTokens*4/3),i=new Po(n,e.document,e.language,"ed8c6549bwf9"),o=new Po(new ea(0),e.document,e.language,"abpxx6d04wxr"),s=new Po(new ea(0),e.document,e.language,"be15d9bcejpp");for(let a=r.start.line,c=r.end.line;a<=c&&!(a===c&&r.end.character===0||!i.appendLine(a));++a);return i.trim(e.selection),{language:e.language,above:o,range:i,below:s,outlineAbove:"",outlineBelow:""}}function PZe(t,e,r,n,i,o){t.get(ke).sendMSFTTelemetryEvent("getNodeToDocument",{languageId:i,typeOfNodeToDocument:n.nodeToDocument.type,nodeToDocumentStart:n.nodeToDocument.startIndex.toString(),nodeToDocumentEnd:n.nodeToDocument.endIndex.toString(),selectionOffsetRangeStart:e.startIndex.toString(),selectionOffsetRangeEnd:e.endIndex.toString(),wholeRangeOffsetRangeStart:r.startIndex.toString(),wholeRangeOffsetRangeEnd:r.endIndex.toString()},{timeSpentMs:o})}var kZe=6e4,DZe=1500,Xy=class t{constructor(){this.id=t.ID;this.description=l6.t("Add documentation comment for this symbol");this.intentDetectionInput={sampleQuestion:"Add jsdoc to this method"};this.locations=[1];this.commandInfo={executeImmediately:!0}}static{this.ID="doc"}async asSlashCommand(e,r){if(r.document.lineCount>DZe||r.document.getText().length>kZe)return new k2("Add documentation comment for this symbol");let n=await iE(e,r),i=n.identifier?l6.t("Add documentation comment for '{0}'",n.identifier):l6.t("Add documentation comment for this symbol");return new k2(i,n)}async invoke(e,r,n){let i=r.documentContext;if(!i)throw new Error("Open a file to add documentation.");let o;n instanceof k2?o=n.nodeToDocument:e.get(ce).getLogger("InlineDocIntent#invoke").warn("Unexpected: SlashCommand given to intent invocation is not a DocSlashCommand");let s=await e.get(Ge).getUserRequestEndpoint(r.location,this.id);return new VQ(e,s,i,this,o)}},k2=class{constructor(e,r=void 0){this.detail=e;this.nodeToDocument=r;this.command=Xy.ID;this.executeImmediately=!0}},VQ=class t{constructor(e,r,n,i,o=void 0){this.accessor=e;this.endpoint=r;this.context=n;this.intent=i;this.nodeToDocument=o;this.location=1;this.createReplyInterpreter=kS.createFactory(async e=>{if(!this.contextInfo||!this.wholeRange)throw new Error("doc intent NEEDS a selection context");let r=Wy(this.contextInfo,e,this.context.language);if(!r)return{type:"conversational",content:e};let n=Xb(this.context.document.languageId),i=r.code;if(n){let s=Date.now(),a=await this.accessor.get(Ir).extractDoc(n,i),c=Date.now()-s;t._sendExtractDocTelemetry(this.accessor.get(ke),this.context.document.languageId,i.length,a,c),a&&(i=a)}let o=Og(this.accessor,this.contextInfo,i,1,this.context.fileIndentInfo);return Xd(o,this.wholeRange)});let s=this;this.promptCrafter=new class{constructor(){}async buildPrompt(a,c,u,l,d,p){let f=s.nodeToDocument??await iE(s.accessor,s.context),m=new nt(s.endpoint,zQ,{userQuery:a.getLatestTurn()?.request?.message??"",documentContext:s.context,nodeToDocument:f,endpointInfo:c,history:a.turns.at(-2)?.request.message},s.accessor.get(ye),s.accessor),h=await m.render(l,p),g=m.getMeta(Ki);return iA(g!==void 0,"not undefined"),s.contextInfo=g.contextInfo,s.wholeRange=g.wholeRange,h}}}static _sendExtractDocTelemetry(e,r,n,i,o){e.sendMSFTTelemetryEvent("extractDoc",{languageId:r,couldExtractDoc:i===void 0?"false":"true"},{codeBlockLen:n,timeSpentMs:o})}},zQ=class extends Y{render(e,r){let n=JO(this.props.documentContext.language.languageId);return vscpp(vscppf,null,vscpp(D2.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You must follow user's requirements carefully.",vscpp("br",null),"You must follow Microsoft content policies.",vscpp("br",null),"You must avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, you should give a reminder that you are an AI programming assistant.",vscpp("br",null),"Each code block starts with ``` and ",this.props.documentContext.language.lineComment.start," FILEPATH.",vscpp("br",null),"When user asks you to document something, you must answer in the form of a ",n," markdown code block.",vscpp("br",null)),vscpp(nE,{documentContext:this.props.documentContext,nodeToDocument:this.props.nodeToDocument,endpointInfo:this.props.endpointInfo}),this.props.history&&vscpp(D2.UserMessage,null,this.props.history),vscpp(D2.UserMessage,null,`${this.getQueryPrefix()} ${this.props.userQuery}`.trim()))}getQueryPrefix(){let e=this.props.nodeToDocument?.identifier,r=e!==void 0&&e!=="",n=r?e:"the selection",i;switch(this.props.documentContext.language.languageId){case"typescript":case"typescriptreact":i=r?"a TSDoc comment":"TSDoc comment";break;case"javascript":case"javascriptreact":i=r?"a JSDoc comment":"JSDoc comment";break;case"python":i="docstring";break;default:i="documentation comment"}return`Please add ${i} for ${n}.`}};var hCe=W(lr());var oE="_github.copilot.openRelativePath",f6="_github.copilot.openSymbolInFile";function d6(t,e){return`[\`${t}\`](${m6(oE,[{scheme:e.scheme,authority:e.authority,path:e.path,query:e.query,fragment:e.fragment}])} "${lCe(e.fsPath)}")`}function NZe(t,e){return`[\`${t}\`](${m6(f6,[e.replace(/\\/g,"/"),t])} "${lCe(e)}")`}function m6(t,e){return`command:${t}?${encodeURIComponent(JSON.stringify(e))}`}function lCe(t){return t.replace(/"/g,'\\"')}var $Q=new Set;function dCe(t){return $Q.add(t),{dispose:()=>$Q.delete(t)}}var p6=class{constructor(e,r,n,i=[]){this.references=e;this.workspaceFolders=r;this.fileSystem=n;this._isInCodeBlock=!1;this.additionalLinkifiers=Array.from($Q,o=>o(e,r,n)).concat(i)}async linkify(e,r){let n=new Set([oE,f6,"_github.copilot.openSymbolFromReferences"]);if(e.startsWith("```")&&(this._isInCodeBlock=!this._isInCodeBlock),this._isInCodeBlock)return{text:e,trustedCommands:Array.from(n)};if(e=await eA(e,/\[`([^`\[\]]+?)`]\((\S+?\.\w+)\)/g,async(o,s,a)=>{let c=Ji.joinPath(this.workspaceFolders[0],a);return await uCe(this.fileSystem,c)?NZe(s,a):"`"+s+"`"}),r?.isCancellationRequested)return{text:e};let i=async(o,s,a)=>{if(/^\w+:/.test(a)||!this.workspaceFolders.length)return o;for(let l of this.workspaceFolders){let d=Ji.joinPath(l,a);if(await uCe(this.fileSystem,d))return d6(s,d)}let c=XR(a),u=this.references.map(l=>"variableName"in l.anchor?TT(l.anchor.value)?l.anchor.value:l.anchor.value?.uri:TT(l.anchor)?l.anchor:l.anchor.uri).filter(l=>!!l).find(l=>xc(l)===c);return u?d6(s,u):s};if(e=await eA(e,/\[([^`\s]+)\]\((\1)\)/g,i),r?.isCancellationRequested)return{text:e};e=await eA(e,/(?<!\[)(`([^`\s]+)`)(?!\])/g,i);for(let o of this.additionalLinkifiers){let s=await o.linkify(e,r);e=s.text;for(let a of s.trustedCommands??[])n.add(a);if(r?.isCancellationRequested)return{text:e}}return e=e.replace(/\[([^\[\]]+)]\((\S+?\.\w+)\)/g,(o,s,a)=>/^\w+:/.test(a)?o:s),{text:e,trustedCommands:Array.from(n)}}};async function uCe(t,e){try{return await t.stat(e),!0}catch{return!1}}var Yg=class{constructor(e,r=[]){this.accessor=e;this.additionalLinkifiers=r}async processResponse(e,r,n,i,o){let s=this.accessor.get(gi),a=this.accessor.get(rt),c=e.references,u=new p6(c,a.getWorkspaceFolders(),s,this.additionalLinkifiers),l="",d="",p=async f=>{let{text:m,trustedCommands:h}=await u.linkify(f,o),g=new Ja(m);g.isTrusted={enabledCommands:h??[]},d+=m,i.markdown(g)};for await(let{delta:f}of n){l+=f.text;let m=l.split(`
`);for(let h=0;h<m.length-1;h++)await p(m[h]+`
`);l=m[m.length-1]}return await p(l),d}};var mCe=W(st());var Xn=class extends Y{render(){return vscpp(vscppf,null,"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.")}};var h6=W(lr()),fCe=W(st());var pCe=W(st());var Qg=class t extends Y{static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){let e={implementations:[],activeDocument:void 0,isIgnored:!1},{document:r,range:n}=this.props;if(!r){let a=this.accessor.get(_t).activeTextEditor;if(!a)return e;r??=a.document,n??=a.selection}if(!n||n.isEmpty)return e;if(await this.accessor.get(Oe).isCopilotIgnored(r.uri))return{...e,isIgnored:!0};let i=this.accessor.get(Kr).extensionMode===ls.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,o=[{header:"Relevant function implementations",findImpls:UTe},{header:"Relevant class declarations",findImpls:BTe},{header:"Relevant type declarations",findImpls:qTe}],s=[];for(let{header:a,findImpls:c}of o){let u=await c(this.accessor,r,n,i);s.push([a,u])}return{implementations:s,activeDocument:r,isIgnored:!1}}render(e,r){if(!e.implementations.length||!e.activeDocument)return;let n=e.activeDocument.uri;if(e.isIgnored)return vscpp("ignoredFiles",{value:[n]});let i=[],o=[],s=[];for(let[a,c]of e.implementations){let{references:u,usedContext:l,text:d,uris:p}=WQ(e.activeDocument,c);if(d.length===0)continue;let f=vscpp(pCe.UserMessage,{priority:this.props.priority},a,":",vscpp("br",null),vscpp("br",null),d.map((m,h)=>vscpp(vscppf,null,vscpp(vt,{code:m,languageId:e.activeDocument?.languageId,uri:p[h]}),vscpp("br",null))));i.push(f),o.push(...u),s.push(...l)}return vscpp(vscppf,null,vscpp("usedContext",{value:s}),vscpp("references",{value:o}),...i)}};function WQ(t,e){let r=[],n=new Map,i=new Set,o=[],s=[];for(let a of e){let c=a.uri??t.uri,u=a.range??ds(t,a),l=`${c.toString()}-${u.start.line}-${u.start.character}-${u.end.line}-${u.end.character}`;if(i.has(l))continue;i.add(l),r.push(new Co.PromptReference(new Pl(c,u))),o.push(a.text),s.push(c);let[d,p]=n.get(c)??[a.version??t.version,[]];p.push(u),n.set(c,[d,p])}return{references:r,usedContext:[...n.entries()].map(([a,[c,u]])=>({uri:a,version:c,ranges:u})),text:o,uris:s}}var Xg=class t extends Y{static getSymbolAtCursor(e,r){let{selection:n,document:i}=r;if(!n||!i){let a=e.get(_t).activeTextEditor;if(!a)return;({selection:n,document:i}=a)}if(!n.isEmpty)return;let o=i.getWordRangeAtPosition(n.active)??n;return{selectedText:i.getText(o),document:i,range:o}}static async getDefinitionAtRange(e,r,n,i){if(await e.get(Oe).isCopilotIgnored(r.uri))return;let s=e.get(Ir).getTreeSitterAST(r);if(s===void 0)return;let a=mo(n,r),c;i&&(c=await s.getNodeToExplain(a)),c??=await s.getNodeToDocument(a);let{startIndex:u,endIndex:l}="nodeToDocument"in c?c.nodeToDocument:c.nodeToExplain,d=ds(r,{startIndex:u,endIndex:l});return{identifier:c.nodeIdentifier,text:r.getText(d),range:d,uri:r.uri,startIndex:u,endIndex:l}}static async getSelectedScope(e,r){let n=e.get(Oe);if(!r.document||await n.isCopilotIgnored(r.document.uri))return;let i=t.getSymbolAtCursor(e,r),o,s=i?await t.getDefinitionAtRange(e,i.document,i.range,!1):void 0;if(e.get(Pe).getConfig(Ne.ExplainScopeSelection)||i&&(s?.identifier!==i.selectedText||!i.selectedText)){let c=e.get(_t).activeTextEditor;if(!c)return;let u=await e.get(km).selectEnclosingScope(c,{reason:h6.t("Select an enclosing range to explain"),includeBlocks:!0});if(u){let l=c.document,d=l.getText(u);if(!d)return;o={codeAtCursor:d,document:l,range:u,definitions:[],references:[]}}}return{symbolAtCursorState:o,definition:s,symbolAtCursor:i}}async prepare(e,r,n){let i=await t.getSelectedScope(this.accessor,this.props).catch(()=>{});if(!i)return;let{symbolAtCursorState:o,definition:s,symbolAtCursor:a}=i;if(a){s?.identifier===a?.selectedText?o??={codeAtCursor:s.text,document:a.document,range:s.range,definitions:[],references:[]}:o??={codeAtCursor:a.document.lineAt(a.range.start).text,document:a.document,range:a.document.lineAt(a.range.start).range,definitions:[],references:[]},r.report(new Us(h6.t("Searching for relevant definitions...")));try{for(let c of await this.accessor.get(ho).getDefinitions(a.document.uri,a.range.start)){let{uri:u,range:l}=Cp(c)?{uri:c.targetUri,range:c.targetRange}:c;if(l.isEqual(a.range))continue;let d=await this.accessor.get(rt).openTextDocument(u),p=await t.getDefinitionAtRange(this.accessor,d,l,!0);p&&o.definitions.push(p)}}catch{}r.report(new Us(h6.t("Searching for relevant references...")));try{let c=new Set;for(let u of await this.accessor.get(ho).getReferences(a.document.uri,a.range.start)){let{uri:l,range:d}=Cp(u)?{uri:u.targetUri,range:u.targetRange}:u;if(d.isEqual(a.range))continue;let p=`${l.toString()}-${d.start.line}-${d.start.character}-${d.end.line}-${d.end.character}`;if(c.has(p))continue;c.add(p);let f=await this.accessor.get(rt).openTextDocument(l),m=await t.getDefinitionAtRange(this.accessor,f,d,!1);m&&o.references.push(m)}}catch{}return o}}render(e,r){if(!e)return;let n=[...e.definitions,...e.references];if(e.codeAtCursor){let{startIndex:s,endIndex:a}=mo(e.range,e.document);n.push({version:e.document.version,uri:e.document.uri,range:e.range,text:e.codeAtCursor,startIndex:s,endIndex:a})}let{usedContext:i,references:o}=WQ(e.document,n);return vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp("references",{value:o}),vscpp(fCe.UserMessage,null,"I have the following  code in the active editor:",vscpp("br",null),vscpp(vt,{uri:e.document.uri,languageId:e.document.languageId,code:e.codeAtCursor}),vscpp("br",null),!!e.definitions.length&&vscpp(vscppf,null,"Here are some relevant definitions for the symbols in my code:",vscpp("br",null)),!!e.definitions.length&&vscpp(LS.PrioritizedList,{priority:this.props.priority,descending:!0},e.definitions.map(s=>vscpp(vt,{uri:e.document.uri,languageId:e.document.languageId,code:s.text}))),!!e.references.length&&vscpp(vscppf,null,vscpp("br",null),"Here are some places where the the symbols in my code are referenced:",vscpp("br",null)),!!e.references.length&&vscpp(LS.PrioritizedList,{priority:this.props.priority-e.definitions.length,descending:!0},e.references.map(s=>vscpp(vscppf,null,!!s.uri&&vscpp(vscppf,null,"From the file ",XR(s.uri.toString()),":",vscpp("br",null)),vscpp(vt,{uri:e.document.uri,languageId:e.document.languageId,code:s.text}),vscpp("br",null))))))}};var g6=class extends Y{render(e,r){let n=this.props.chatVariables.find(i=>i.name===hn.variableInfo.name);return vscpp(vscppf,null,vscpp(mCe.SystemMessage,{priority:1e3},"You are a world-class coding tutor. Your code explanations perfectly balance high-level concepts and granular details. Your approach ensures that students not only understand how to write code, but also grasp the underlying principles that guide effective programming.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Examine the provided code selection and any other context like user question, related errors, project details, class definitions, etc.",vscpp("br",null),"2. If you are unsure about the code, concepts, or the user's question, ask clarifying questions.",vscpp("br",null),"3. If the user provided a specific question or error, answer it based on the selected code and additional provided context. Otherwise focus on explaining the selected code.",vscpp("br",null),"4. Provide suggestions if you see opportunities to improve code readability, performance, etc.",vscpp("br",null),vscpp("br",null),"Focus on being clear, helpful, and thorough without assuming extensive prior knowledge.",vscpp("br",null),"Use developer-friendly terms and analogies in your explanations.",vscpp("br",null),"Identify 'gotchas' or less obvious parts of the code that might trip up someone new.",vscpp("br",null),"Provide clear and relevant examples aligned with any provided context."),this.props.history&&vscpp(vscppf,null,vscpp(Vt,{priority:600,history:this.props.history})),vscpp(uu,{priority:700}),!n&&vscpp(hn,{document:this.props.document,range:this.props.selection,priority:900}),vscpp(Qg,{document:this.props.document,range:this.props.selection,priority:800}),vscpp(Xg,{document:this.props.document,selection:this.props.selection,priority:800}),vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var b6="Write an explanation for the active selection as paragraphs of text.",v6=class extends wo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(_t).activeTextEditor;return new nt(n,g6,{query:u,history:l,chatVariables:i,document:d?.document,selection:d?.selection},this.accessor.get(ye),this.accessor)}},y6=class{constructor(){this.id="explain";this.locations=[2,1];this.description=hCe.t("Explain how the code in your active editor works");this.intentDetectionInput={sampleQuestion:"Write an explanation for the code above as paragraphs of text."}}static{this.ID="explain"}async invoke(e,r,n){let i=new Yg(e),o=r.location,s=await e.get(Ge).getUserRequestEndpoint(o,this.id);if(o===1){let a=r.documentContext,c=new class extends v6{async buildPrompt(l,d,p,f,m,h){let g=l.getLatestTurn();return g?.request.message===""&&(g.request={message:b6,type:"user"}),super.buildPrompt(l,d,p,f,m,h)}}(e),u=a&&R5.createFactory();return{intent:this,location:o,endpoint:s,promptCrafter:c,createReplyInterpreter:u,responseProcessor:i}}return{intent:this,location:o,endpoint:s,promptCrafter:new v6(e),responseProcessor:i}}async asSlashCommand(e,r){return{command:this.id,detail:this.description,refer:e.get(Pe).getConfig(Ne.ExplainIntentRefer)}}};var JQ=W(lr());var C6=W(st());var x6=W(lr()),T6=W(st());var _6=W(st());var KQ=class extends Y{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(Vt,{priority:500,history:this.props.history}),vscpp(_6.SystemMessage,{priority:1e3},"You are a coding assistant who help the user answer questions about code in their workspace by providing a list of relevant keywords they can search for to answer the question.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"Respond in Markdown. First under a `# Question` header, output a rephrased version of the user's question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for.",vscpp("br",null),"Then under a `# Keywords` header, output a short markdown list of up to 8 relevant keywords that the user can search for to answer the question. You may include variations after each keyword.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),"2. If the question contains pronouns such as 'it' or 'that', try to understand what the pronoun refers to by looking at the rest of the question and the conversation history.",vscpp("br",null),"3. If the question contains an ambiguous word such as 'this', try to understand what is refers to by looking at the rest of the question, the user's active selection, and the conversation history.",vscpp("br",null),"4. After a `# Question` header, output a precise version of question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns and words like 'this'.",vscpp("br",null),"5. Then after a `# Keywords` header, output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),"6. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"Examples",vscpp("br",null),vscpp("br",null),"User: Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"Assistant:",vscpp("br",null),"# Question",vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"# Keywords",vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders"),vscpp(hn,{priority:600,document:this.props.document,range:this.props.selection}),this.props.fileTree&&vscpp(_6.UserMessage,{priority:700},this.props.fileTree),vscpp(pi,{priority:1e3,chatVariables:this.props.chatVariables,query:this.props.query}))}};async function gCe(t,e,r,n,i,o){let s=e.turns.length>1?e.turns.slice(0,-1):[],a=t.get(_t).activeTextEditor;return new nt(r,KQ,{chatVariables:n,query:i,history:s,fileTree:o,document:a?.document,selection:a?.selection},t.get(ye),t).render()}var LZe=/^[\*\-]\s*(.+)/m;function sE(t,e){let r=e.match(/#+\s*Question\n(?<question>.+?)#+\s*Keywords\n(?<keywords>.+)/si);if(!r?.groups)return{rephrasedQuestion:t.trim(),keywords:[]};let n=[];for(let i of r.groups.keywords.trim().split(`
`)){let o=i.match(LZe);if(o){let s=o[1].split(/,/g).map(a=>a.trim());s.length&&n.unshift({keyword:s[0],variations:s.slice(1)})}}return{rephrasedQuestion:r.groups.question.trim(),keywords:n}}function vCe(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}async function MZe(t,e=1/0,r){let n=yCe(0,t,e),i=e-vCe(n);for(;;){let o=!1,s=[];for(let a of n)if(a.type==="text")s.push(a);else if(a.type==="dir"){s.push({type:"text",value:a.value});let c=await a.getChildren();if(r?.isCancellationRequested)return"";let u=yCe(a.level+1,c,i-1);u.length&&(o=!0,i-=vCe(u)+1,s.push(...u))}if(n=s,!o)break}return n.map(o=>o.value).join(`
`)}function yCe(t,e,r){let n="	".repeat(t),i=[],o=r;for(let s=0;s<e.length;++s){let a=e[s],c=n+a.name+(a.type===2?"/":"");if(c.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",value:u});break}a.type===2?i.push({type:"dir",level:t,value:c,getChildren:a.getChildren}):i.push({type:"text",value:c}),o-=c.length,s!==e.length-1&&(o-=1)}return i}async function YQ(t,e,r,n){let i=t.get(gi),o=t.get(Oe);async function s(c){let u;try{u=await i.readDirectory(c)}catch(l){return console.error(l),[]}return n.isCancellationRequested?[]:(u.sort((l,d)=>l[0].localeCompare(d[0])),Promise.all(u.map(async l=>{let d=gt.joinPath(c,l[0]);return Hy(d)&&!await o.isCopilotIgnored(d)?l:null})).then(l=>l.filter(d=>d!==null).map(d=>d[1]===2?{type:2,name:d[0],getChildren:()=>s(gt.joinPath(c,d[0]))}:{type:1,name:d[0]})))}if(await o.init(),n.isCancellationRequested)return"";let a=await s(e);return n.isCancellationRequested?"":MZe(a,r,n)}async function N2(t,e=500,r){let n=t.get(rt).getWorkspaceFolders().at(0);if(!n)return;let i=await YQ(t,n,e,r);return FZe("I am working in a workspace that has the following structure:","",Ii("",i))}var S6=class extends Y{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(ce).getLogger("<WorkspaceSymbols>")}async prepare(r,n,i){let o=this.accessor.get(rt),s=await B0(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.getSymbols();return!a.length||i.isCancellationRequested?[]:bCe(a.map(c=>`- ${c.name} \u2014 ${bg(o,c.location.uri)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(T6.TextChunk,{priority:this.props.priority},"Here are some potentially relevant symbols from the current workspace:",vscpp("br",null),r.join(`
`))}async getSymbols(){let r=this.accessor.get(Oe),n=await Promise.all(this.props.keywords.flatMap(o=>[o.keyword,...o.variations]).map(o=>N0(this.accessor.get(ho).getWorkspaceSymbols(o),this.timeout))),i=await Promise.all(n.flat().map(async o=>(o?await r.isCopilotIgnored(o.location.uri):!1)?null:o));return Pr(i).filter(Boolean)}};we([ti(r=>r.logger)],S6.prototype,"prepare",1);var E6=class extends Y{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(ce).getLogger("<WorkspaceFiles>")}async prepare(r,n,i){let o=this.accessor.get(rt),s=await B0(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.findFiles(s,i);return!a.length||i.isCancellationRequested?[]:bCe(a.map(c=>`- ${bg(o,c)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(T6.TextChunk,{priority:this.props.priority},"Here are some potentially relevant file names from the workspace:",vscpp("br",null),r.join(`
`))}async findFiles(r,n){let i=this.accessor.get(ya),o=await N0(i.findFilesWithDefaultExcludes(`{${this.props.keywords.flatMap(s=>[s.keyword,...s.variations]).map(s=>`**/*${s}*`).join(",")}}`,r,n),this.timeout);return o?o.sort((s,a)=>s.toString().localeCompare(a.toString())):[]}};we([ti(r=>r.logger)],E6.prototype,"prepare",1);var Jy=class extends Y{constructor(r,n){super(r,n);this.logger=n.get(ce).getLogger("<WorkspaceChunks>")}async prepare(r,n,i=qr.None){let o=this.accessor.get(Ag),s=await B0(this.accessor,{valueFor4096:4,maxMultiplier:4});if(i.isCancellationRequested)return;let a={fullText:this.props.fullQuestionText,keywords:this.props.keywords.flatMap(d=>[d.keyword,...d.variations])},c=(await o.searchFileChunks(r.endpoint,a,this.props.maxResults??s,{include:this.props.include},i,d=>n?.report(new Us(d)))).slice(0,s);if(i.isCancellationRequested||!c.length)return;let u=new Un;for(let d of c){let p=u.get(d.file)??[];d.isFullFile?p=[d]:p.some(f=>f.isFullFile||f.range.containsRange(d.range))||(p=[...p.filter(f=>!d.range.containsRange(f.range)),d]),u.set(d.file,p)}let l=Array.from(u.values()).flatMap(d=>d.sort((p,f)=>Li.compareRangesUsingStarts(p.range,f.range)).map(p=>new Co.PromptReference(p.isFullFile?p.file:new Pl(p.file,Nl(p.range)))));return{chunks:c,references:l}}render(r,n){if(!r)return;let i=this.accessor.get(rt);return vscpp(vscppf,null,vscpp("references",{value:r.references}),r.chunks.map((o,s)=>{let a=typeof this.props.priority<"u"?this.props.priority+(1-(s+1)/r.chunks.length):void 0;return{chunk:o,priority:a}}).reverse().map(({chunk:o,priority:s})=>{let a=bg(i,o.file);return vscpp(T6.TextChunk,{priority:s},"Here is a potentially relevant code excerpt from `",a,"`:",vscpp("br",null),Ii(ZO(o.file),o.text))}))}};we([ti(r=>r.logger)],Jy.prototype,"prepare",1);function bCe(t){return[...new Set(t)]}function FZe(...t){return t.join(`
`)}var QQ=class extends Y{async prepare(e,r,n){let i=this.accessor.get(rt).getWorkspaceFolders().at(0);if(!i)return;let o=500;return YQ(this.accessor,i,o,n)}render(e,r){if(e)return vscpp(vscppf,null,"I am working in a workspace that has the following structure:",vscpp("br",null),vscpp("br",null),Ii("",e))}},aE=class extends Y{async prepare(e,r,n){r?.report(new Us(x6.t("Deciding which workspace information to collect")));let i=this.accessor.get(ke),o=this.props.query;if(!o)return;let s=this.accessor.get(Qt),a=this.accessor.get(ce).getLogger("workspaceResolver");a.debug("Determining workspace structure...");let c=await N2(this.accessor,1e3,n);if(n.isCancellationRequested)return;a.debug("Asking the model to update the user question and provide queries...");let{messages:u}=await gCe(this.accessor,this.props.conversation,e.endpoint,this.props.chatVariables,o,c);if(n.isCancellationRequested)return;let l=this.accessor.get(ye).tokenLength(o),d=200,p=await s.fetchOne(u,async h=>{},n,2,e.endpoint,{agent:Sp},{temperature:0,top_p:1,stop:["dontStopBelieving"],max_tokens:l+d},{messageSource:"workspaceIntent"});if(n.isCancellationRequested)return;let f;if(p.type!=="success")if(i.sendMSFTTelemetryEvent("workspaceResolver.error",{type:p.type,reason:p.reason,requestId:p.requestId}),p.type==="length")f=p.truncatedValue;else throw new Error(x6.t("Encountered an error while deciding what workspace information to collect: ({0}) {1}",p.type,p.reason));else f=p.value;let m=sE(o,f);return i.sendMSFTTelemetryEvent("workspaceResolver.success",{type:p.type,requestId:p.requestId},{totalKeywordCount:m.keywords.flatMap(h=>[h.keyword,h.variations]).length}),a.debug("Running all tools..."),r?.report(new Us(x6.t("Collecting workspace information"))),{keywords:m.keywords,fullQuestionText:m.rephrasedQuestion}}render(e,r){if(!e)return;let n={keywords:e.keywords,fullQuestionText:e.fullQuestionText},i=this.props.include??{workspaceStructure:!0,workspaceSymbols:!0,workspaceFiles:!0,workspaceChunks:!0};return vscpp(vscppf,null,i.workspaceStructure&&vscpp(QQ,{...this.props}),i.workspaceSymbols&&vscpp(S6,{priority:this.props.priority,...n}),i.workspaceFiles&&vscpp(E6,{priority:this.props.priority,...n}),i.workspaceChunks&&vscpp(Jy,{priority:this.props.priority,...n}))}};var I6=class extends Y{render(e,r){return vscpp(vscppf,null,vscpp(C6.SystemMessage,{priority:1e3},"You are a software engineer with expert knowledge of the codebase the user has open in their workspace.",vscpp("br",null),vscpp("br",null),vscpp(Lr,null),vscpp(di,null),vscpp(Xn,null),vscpp(vr,null),"# Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the provided relevant workspace information (code excerpts, file names, and symbols) to understand the user's workspace.",vscpp("br",null),"2. Consider how to answer the user's prompt based on the provided information and your specialized coding knowledge. Always assume that the user is asking about the code in their workspace instead of asking a general programming question. Prefer using variables, functions, types, and classes from the workspace over those from the standard library.",vscpp("br",null),"3. Generate a response that clearly and accurately answers the user's question. In your response, add fully qualified links for referenced symbols (example: [`namespace.VariableName`](path/to/file.ts)) and links for files (example: [path/to/file](path/to/file.ts)) so that the user can open them. If you do not have enough information to answer the question, respond with \"I'm sorry, I can't answer that question with what I currently know about your workspace\".",vscpp("br",null),vscpp("br",null),"DO NOT mention that you cannot read files in the workspace.",vscpp("br",null),"DO NOT ask the user to provide additional information about files in the workspace.",vscpp("br",null),"Remember that you MUST add links for all referenced symbols from the workspace and fully qualify the symbol name in the link, for example: [`namespace.functionName`](path/to/util.ts).",vscpp("br",null),"Remember that you MUST add links for all workspace files, for example: [path/to/file.js](path/to/file.js)",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),"Question:",vscpp("br",null),"What file implements base64 encoding?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Base64 encoding is implemented in [src/base64.ts](src/base64.ts) as [`encode`](src/base64.ts) function.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How can I join strings with newlines?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the [`joinLines`](src/utils/string.ts) function from [src/utils/string.ts](src/utils/string.ts) to join multiple strings with newlines.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I build this project?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To build this TypeScript project, run the `build` script in the [package.json](package.json) file:",vscpp("br",null),vscpp("br",null),"```sh",vscpp("br",null),"npm run build",vscpp("br",null),"```",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I read a file?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To read a file, you can use a [`FileReader`](src/fs/fileReader.ts) class from [src/fs/fileReader.ts](src/fs/fileReader.ts).",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Vt,{priority:400,history:this.props.history})),vscpp(hn,{document:this.props.document,range:this.props.selection,priority:600}),vscpp(C6.UserMessage,null,vscpp(aE,{priority:800,...this.props})),vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var cE="workspace",XQ=class extends wo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(_t).activeTextEditor;return new nt(n,I6,{chatVariables:i,conversation:r,query:u,history:l,document:d?.document,selection:d?.selection},this.accessor.get(ye),this.accessor)}},_Ce=JQ.t("How do I build this project?"),w6=class t{constructor(){this.id=t.ID;this.description=JQ.t("Ask a question about the files in your current workspace");this.intentDetectionInput={sampleQuestion:_Ce};this.locations=[2];this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!0,sampleRequest:_Ce}}static{this.ID=cE}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new XQ(e),responseProcessor:new Yg(e)}}};var Zt=W(require("vscode"));var Jg=class extends Zt.CodeAction{constructor(){super(...arguments);this.isAI=!0}},Zy=class t{constructor(e){this.accessor=e}static{this.providedCodeActionKinds=[Zt.CodeActionKind.QuickFix]}static getSevereDiagnostics(e){let r=e.filter(n=>n.severity<=Zt.DiagnosticSeverity.Warning);return r.length===0?[]:r}static getDiagnosticsAsText(e){return e.map(r=>r.message).join(", ")}async provideCodeActions(e,r,n){if(!Zt.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||await this.accessor.get(Oe).isCopilotIgnored(e.uri))return;let o=[],s=Zt.window.activeTextEditor;if(!s)return o;let a=t.getSevereDiagnostics(n.diagnostics);if((this.accessor.get(Pe).getConfig(Ne.ReviewIntent)||Zt.workspace.getConfiguration("github.copilot.advanced.review").get("intent",!1))&&!s.selection.isEmpty){let g=new Jg(Zt.l10n.t("Review using Copilot"),Zt.CodeActionKind.QuickFix),v="/review";g.command={title:g.title,command:"github.copilot.interactiveEditor.review",arguments:[v]},o.push(g)}let u=this.accessor.get(Pm).getDiagnosticCollection().get(s.document.uri);if(u?.length){let g=u.filter(v=>v.range.intersection(r));if(g.length){let v=new Zt.CodeAction(g.length===1?Zt.l10n.t("Discard Copilot Review"):Zt.l10n.t("Discard Copilot Reviews"),Zt.CodeActionKind.QuickFix);v.diagnostics=g,v.command={title:v.title,command:"github.copilot.interactiveEditor.discardReviews",arguments:[s.document.uri,g]},o.push(v)}if(u.length>g.length){let v=new Zt.CodeAction(Zt.l10n.t("Discard All Copilot Reviews"),Zt.CodeActionKind.QuickFix);v.diagnostics=u.slice(),v.command={title:v.title,command:"github.copilot.interactiveEditor.discardReviews",arguments:[s.document.uri,u]},o.push(v)}}if(a.length===0)return o;let l=a.map(g=>g.range).reduce((g,v)=>g.union(v)),d=new Zt.Selection(l.start,l.end),p=t.getDiagnosticsAsText(a),f=new Jg(Zt.l10n.t("Fix using Copilot"),Zt.CodeActionKind.QuickFix);f.diagnostics=a,f.command={title:f.title,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${p}`,position:l.start,initialSelection:d,initialRange:l}]};let m=new Jg(Zt.l10n.t("Explain using Copilot"),Zt.CodeActionKind.QuickFix);m.diagnostics=a;let h=`/explain ${p}`;return this.accessor.get(Pe).getConfig(Ne.ExplainIntentRefer)&&(h=`@${cE} ${h}`),m.command={title:m.title,command:"github.copilot.interactiveEditor.explain",arguments:[h]},o.push(f,m),o}},L2=class{static{this.providedCodeActionKinds=[Zt.CodeActionKind.RefactorRewrite]}constructor(e){this.logger=e.get(ce).getLogger("RefactorsProvider"),this.telemetryService=e.get(ke),this.parserService=e.get(Ir),this.ignoreService=e.get(Oe)}async provideCodeActions(e,r,n){if(!Zt.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||await this.ignoreService.isCopilotIgnored(e.uri))return;let o=this.provideGenerateUsingCopilotCodeAction(e,r),s=await this.provideDocumentUsingCopilotCodeAction(e,r),a=await this.provideTestUsingCopilotCodeAction(e,r);return Pr([s,o,a])}provideGenerateUsingCopilotCodeAction(e,r){let n;if(r.isEmpty){let o=e.lineAt(r.start.line).text;r.end.character===o.length&&/^\s*$/g.test(o)&&(n=Zt.l10n.t("Generate using Copilot"))}else{let o=e.getText(r);/^\s*$/g.test(o)||(n=Zt.l10n.t("Modify using Copilot"))}if(n===void 0)return;let i=new Jg(n,Zt.CodeActionKind.RefactorRewrite);return i.command={title:i.title,command:"vscode.editorChat.start",arguments:[{position:r.start,initialSelection:new Zt.Selection(r.start,r.end),initialRange:r}]},i}async provideDocumentUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getDocumentableNodeIfOnIdentifier(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed")}if(s===void 0)return;let c=Zt.l10n.t("Document using Copilot: {0}",s.identifier),u=new Jg(c,Zt.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Je(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return u.command={title:c,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/doc",initialRange:l}]},u}async provideTestUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getTestableNode(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getTestableNode failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getTestableNode failed")}if(s===void 0)return;let c=Zt.l10n.t("Test using Copilot: {0}",s.identifier),u=new Jg(c,Zt.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Je(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return u.command={title:c,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/tests",initialRange:l}]},u}};var xCe=require("util"),Zg=W(require("vscode"));var UZe="application/vnd.code.notebook.error",R6=class{constructor(e){this.accessor=e}async provideCellStatusBarItems(e,r){if(Zg.workspace.getConfiguration("notebook").get("cellFailureDiagnostics"))return[];if(e.kind===Zg.NotebookCellKind.Markup){let s=Zg.workspace.getConfiguration("notebook.experimental").get("cellChat");if(!s)return[];let a=e.document.getText().trim();if(!s||a.length===0)return[];let c="Generate code from markdown content",u=a;return[{text:"$(sparkle)",alignment:Zg.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:c,command:{title:c,command:"notebook.cell.chat.start",arguments:[{index:e.index+1,input:u,autoSend:!0}]}}]}let i=e.outputs.flatMap(s=>s.items).find(s=>s.mime===UZe);if(!i)return[];let o;try{let s=new xCe.TextDecoder;if(o=JSON.parse(s.decode(i.data)),!o.name&&!o.message)return[];let a="Fix using Copilot",c=[o.name,o.message].filter(Boolean).join(": ").replace(/\s*\(\S+,\s*line\s*\d+\)/,"");return[{text:"$(sparkle)",alignment:Zg.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:a,command:{title:a,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${c}`}]}}]}catch(s){this.accessor.get(ce).defaultLogger.error(`Failed to parse error output ${s}`)}return[]}};function SCe(t){let e=new Ht,r=async(u,l)=>{let d=`@${cE} /explain `,p,f;if(typeof u=="string"&&u)d=u;else{let m=t.get(_t),h=hn.getCurrentSelection(m);if(h){let v=en.languages.getDiagnostics(h.activeDocument.uri),b=v.filter(S=>!!S.range.intersection(h.range));Zy.getSevereDiagnostics(b).length?d+=Zy.getDiagnosticsAsText(v):(d+=b6,p=rE.formatSelection({languageId:h.languageId,selectedText:h.selectedText}),f=h.activeDocument.uri)}let g=hn.getCurrentSelection(m,!0);if(g&&l)try{let v=await Xg.getSelectedScope(t,{document:g.activeDocument,selection:g.range});if(v&&v.symbolAtCursorState&&v.symbolAtCursorState.codeAtCursor){d+=b6;let b=v.symbolAtCursorState.document.languageId??"";p=rE.formatSelection({languageId:b,selectedText:v.symbolAtCursorState.codeAtCursor}),f=g.activeDocument.uri}}catch(v){if(v instanceof la)return}}f&&p&&!await t.get(Oe).isCopilotIgnored(f)&&(d+=p),en.commands.executeCommand("workbench.action.chat.open",{query:d})},n=async(u,l)=>{if(l){let d=`@${cE} /review`;typeof u=="string"&&u&&(d=u),en.commands.executeCommand("workbench.action.chat.open",{query:d})}else return en.commands.executeCommand("vscode.editorChat.start",{message:"/review ",autoSend:!0})},i=async(u,l)=>{let d=t.get(Pm).getDiagnosticCollection(),p=new Set(l);d.set(u,d.get(u)?.filter(f=>!p.has(f)))},o=()=>en.commands.executeCommand("vscode.editorChat.start",{message:"/generate "}),s=()=>en.commands.executeCommand("vscode.editorChat.start",{message:`/${Xy.ID} `,autoSend:!0,initialRange:en.window.activeTextEditor?.selection}),a=()=>en.commands.executeCommand("vscode.editorChat.start",{message:"/tests ",autoSend:!0,initialRange:en.window.activeTextEditor?.selection}),c=()=>{let u=en.window.activeTextEditor;if(!u)return;let l=u.selection,d=en.languages.getDiagnostics(u.document.uri).filter(p=>!!l.intersection(p.range)).map(p=>p.message).join(", ");return en.commands.executeCommand("vscode.editorChat.start",{message:`/fix ${d}`,autoSend:!0,initialRange:en.window.activeTextEditor?.selection})};return e.add(en.commands.registerCommand("github.copilot.interactiveEditor.explain",r)),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.explain.palette",()=>r(void 0,!0))),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.review",()=>n(void 0,!1))),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.review.palette",()=>n(void 0,!0))),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.discardReviews",i)),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.generate",o)),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.generateDocs",s)),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.generateTests",a)),e.add(en.commands.registerCommand("github.copilot.interactiveEditor.fix",c)),e.add(en.languages.registerCodeActionsProvider("*",new Zy(t),{providedCodeActionKinds:Zy.providedCodeActionKinds})),e.add(en.languages.registerCodeActionsProvider("*",new L2(t),{providedCodeActionKinds:L2.providedCodeActionKinds})),e.add(en.notebooks.registerNotebookCellStatusBarItemProvider("jupyter-notebook",new R6(t))),e}var mu=W(st());var A6=class extends Y{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(mu.SystemMessage,{priority:1e3},"You are an AI that creates a detailed content outline for a Jupyter notebook on a given topic.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"DO NOT include Introduction or Conclusion section in the outline!",vscpp("br",null),"Focus only on sections that will need code!",vscpp("br",null),["","Generate the outline as two parts:","- First part is markdown bullet list of section titles","- Second part is the JSON data that will validate against this JSON schema, wrap the response in code block. We assume that a code block begins with ```[optionally the language] and ends with ```","","The JSON schema is:","{",'  "$schema": "http://json-schema.org/draft-07/schema#",','  "type": "object",','  "properties": {','	"description": {','	  "type": "string"',"	},",'	"sections": {','	  "type": "array",','	  "items": {','		"type": "object",','		"properties": {','		  "title": {','			"type": "string"',"		  },",'		  "content": {','			"type": "string"',"		  }","		},",'		"required": ["title", "content"]',"	  }","	}","  },",'  "required": ["sections"]',"}"].join(`
`),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid notebook creation question","","user: Creating Random Arrays with Numpy","","assistant: Here's an outline for a Jupyter notebook that creates Random Arrays with Numpy:","","* **Import Required Libraries**","* **Create Random Arrays**","* **Seed the Random Number Generator**","* **Generate Random Integers**","","```json","{",'  "description": "A Jupyter notebook that creates Random Arrays with Numpy.",','  "sections": [',"    {",'      "title": "Import Required Libraries",','      "content": "Import the necessary libraries, including NumPy."',"    },","    {",'      "title": "Create Random Arrays",','      "content": "Use NumPy to create random arrays of various shapes and sizes, including 1D, 2D, and 3D arrays."',"    },","    {",'      "title": "Seed the Random Number Generator",','      "content": "Use the seed() function to seed the random number generator for reproducibility."',"    },","	{",'	  "title": "Generate Random Integers",','	  "content": "Use the randint() function to generate random integers within a specified range."',"	}","  ]","}","```"].join(`
`))),this.props.chatVariables&&Object.keys(this.props.chatVariables).length>0?vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:`Create notebook: ${this.props.query}`}):vscpp(mu.UserMessage,{priority:900},"Create notebook: ",this.props.query))}},P6=class extends Y{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,this.props.history&&vscpp(ZQ,{messages:this.props.history.chatMessages??[]}),vscpp(mu.SystemMessage,{priority:1e3},"You are an AI that writes Python code for a single section of a Jupyter notebook.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(vr,null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If the Jupyter Notebook already contains variables, you should respect the name and value of the variables, and use them in your code when necessary.",vscpp("br",null),"Your output should be valid Python code with inline comments.",vscpp("br",null),"You should return the code directly without any explantion.",vscpp("br",null),"You should not print message to explain the code or purpose of the code.",vscpp("br",null),"You should return the code directly, without wrapping it inside \\`\\`\\`.",vscpp("br",null),"Please make sure that the new code is syntactically valid Python code. It can be validated by running it in a Python interpreter.",vscpp("br",null),"For example, it should pass the validation through builtin module codeop \\`codeop.compile_command(statement)\\`.",vscpp("br",null)),vscpp(mu.UserMessage,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebok section: ",this.props.section.content,vscpp("br",null),"Given this information, write all the code for this section and this section only.",vscpp("br",null),"The request to generate the outline of the notebook is already completed.",vscpp("br",null),"Here is the request details for the outline generation:",vscpp("br",null),vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Please make sure the new code you generate works fine with the code above.",vscpp("br",null))))}},ZQ=class extends Y{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(mu.UserMessage,{priority:800},i.content));break;case"assistant":n.push(vscpp(mu.AssistantMessage,{priority:800},i.content));break;case"system":n.push(vscpp(mu.SystemMessage,{priority:100},i.content));break;default:break}return vscpp(vscppf,null,n)}},k6=class extends Y{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(mu.SystemMessage,{priority:1e3},"You are an AI that improves Python code with respect to readability and performance for a single section of a Jupyter notebook.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(vr,null),"You MUST return Python code as your answer.",vscpp("br",null),"DO NOT explain in inline comments for your the improvements.",vscpp("br",null),"You should not print messages to explain the code or purpose of the code.",vscpp("br",null),"Make sure the new code you generate works fine with the code above.",vscpp("br",null),"Make sure if a module is already imported in the code above, it can be used in the new code directly without importing it again. For the same reason, if a variable is defined above, it can be used in new code as well. ",vscpp("br",null),"Make sure to return the code only - don't give an explanation of the improvements.",vscpp("br",null)),vscpp(mu.UserMessage,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebook section: ",this.props.section.content,vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Given this information, suggest improvements for the following code:",vscpp("br",null),vscpp("br",null),this.props.code,vscpp("br",null),vscpp("br",null))))}};var D6=class{constructor(){this.stagedTextToApply="";this.reporting=!0;this._appliedText="";this._resolvedContentDeferredPromise=new k0;this._incodeblock=!1}async processResponse(e,r,n,i,o){for await(let{delta:s}of n){if(o.isCancellationRequested)return this._appliedText;this.applyDelta(s.text,e,i)}return this._appliedText}applyDeltaToTurn(e,r){r.response||(r.response={message:e,type:"model"}),this._appliedText+=e,r.response.message+=e}applyDeltaToProgress(e,r){r.markdown(e)}applyDelta(e,r,n){if(!this.reporting){this.applyDeltaToTurn(e,r);return}if(e=this.stagedTextToApply+e,this._incodeblock){let o=e.indexOf("```");if(o===-1){this.stagedTextToApply=e,this.applyDeltaToProgress("",n),this.applyDeltaToTurn("",r),n.progress("Thinking ...");return}else{this._incodeblock=!1,e=e.substring(0,o)+"```";try{this.applyDeltaToTurn(e,r)}catch{}finally{this.reporting=!1,this.stagedTextToApply="",this._resolvedContentDeferredPromise.complete(new kl(""))}return}}let i=e.indexOf("```");if(i!==-1){this._incodeblock=!0;let o=e.indexOf("```",i+3);if(o!==-1){this._incodeblock=!1,this.applyDeltaToProgress(e.substring(0,i),n),this.applyDeltaToProgress(e.substring(o+3),n),this.applyDeltaToTurn(e,r),this.reporting=!1,this.stagedTextToApply="";return}else{let s=e.substring(0,i);this.applyDeltaToProgress(s,n),this.applyDeltaToTurn(e,r),this.stagedTextToApply="",n.progress("Thinking ..."),this._resolvedContentDeferredPromise.p.then(a=>n.push(a));return}}this.applyDeltaToProgress(e,n),this.applyDeltaToTurn(e,r),this.stagedTextToApply=""}};async function ECe(t,e,r,n,i,o,s,a){let c={messageSource:"slash.newNotebook"},{messages:u}=await Zo(t,e,P6,{history:n,description:i,section:o,existingCode:s},t.get(ye)),d=await t.get(Qt).fetchOne(u,void 0,a,2,e,void 0,{temperature:r.temperature,top_p:r.topP},c);if(d.type!=="success")return;let p=As(d.value);return p.length>0?p[0].code:d.value}async function TCe(t,e,r,n,i,o,s,a){let c={messageSource:"slash.newNotebook"},{messages:u}=await Zo(t,e,k6,{description:n,section:i,existingCode:o,code:s},t.get(ye)),d=await t.get(Qt).fetchOne(u,void 0,a,2,e,void 0,{temperature:r.temperature,top_p:r.topP},c);if(d.type==="success")return d.value}var tX=W(lr());var O2=W(st());var ICe=W(st());var N6=class extends Y{static{this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0}}async prepare(){return this.accessor.get($i).terminalLastCommand}render(e,r){if(!e)return;let n=[];e.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(e.commandLine)),e.cwd&&(n.push("It was run in the directory:"),n.push(typeof e.cwd=="object"?e.cwd.toString():e.cwd)),e.output&&(n.push("It has the following output:"),n.push(e.output));let i=n.join(`
`);return vscpp(vscppf,null,vscpp(ICe.UserMessage,{priority:this.props.priority},"The active terminal's last run command:",vscpp("br",null),i))}};var eX=W(st());var L6=class extends Y{static{this.variableInfo={name:"terminalSelection",description:"The active terminal's selection",defaultEnablement:!0}}async prepare(){return this.accessor.get($i).terminalSelection}render(e,r){return e.trim().length===0?vscpp(vscppf,null,vscpp(eX.UserMessage,{priority:this.props.priority},"The active terminal has no selection.")):vscpp(vscppf,null,vscpp(eX.UserMessage,{priority:this.props.priority},"The active terminal's selection:",vscpp("br",null),e))}};var O6=class extends Y{render(e){return vscpp(vscppf,null,vscpp(O2.SystemMessage,{priority:1e3},"You are a programmer who specializes in using the command line. Your task is to help the Developer by giving a detailed answer to their query.",vscpp("br",null),vscpp(Lr,null),vscpp(di,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),`Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
- Provide any command suggestions using the active shell and operating system.
- Say "I'm not quite sure how to do that." when you aren't confident in your explanation`,vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Vt,{priority:600,history:this.props.history})),vscpp(O2.UserMessage,{priority:800},"The active terminal's shell type is:",vscpp("br",null),this.props.shellType),vscpp(O2.UserMessage,{priority:800},"The active operating system is:",vscpp("br",null),this.props.osName),vscpp(L6,{priority:800}),vscpp(N6,{priority:800}),vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var eb=class{constructor(){this.id="terminalExplain";this.locations=[2];this.description=tX.t("Explain what just happened in the terminal");this.intentDetectionInput={sampleQuestion:"What did the last command do?"};this.commandInfo={allowsEmptyArgs:!0,defaultEnablement:!0,sampleRequest:tX.t("What did the last command do?")}}static{this.intentName="explain"}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return new rX(e,this,o,i)}},rX=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;let o=this,s=e.get(mt).OS,a=e.get($i).terminalShellType;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=u.turns.length>1?u.turns.slice(0,-1):[];return await new nt(l,O6,{query:g,chatVariables:d,history:v,osName:s,shellType:a},e.get(ye),o.accessor).render(p,m)}}}};var nX=W(lr()),Ds=W(require("vscode"));function CCe(t){let e=new Ht,r=t.get(sl);return r.setEnablement(t.get(Yr)),BZe(e,t.get(ke)),qZe(r,e),e}function BZe(t,e){t.add(Ds.commands.registerCommand("github.copilot.tests.fixTestFailure",async r=>{if(!r.test.uri)return;e.sendMSFTTelemetryEvent("intent.fixTestFailure.actioned",{source:r.source??"testResultsPanel"});let n=await Ds.workspace.openTextDocument(r.test.uri);await Ds.window.showTextDocument(n,{preserveFocus:!1,preview:!0,selection:r.test.range?new Ds.Range(r.test.range.start,r.test.range.start):void 0}),await Ds.commands.executeCommand("vscode.editorChat.start",{message:"/fixTestFailure",autoSend:!0})}))}function qZe(t,e){e.add(Ds.languages.registerCodeActionsProvider("*",{provideCodeActions(r,n,i,o){if(!Ds.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||!t.isEnabled.get())return;let a=t.getFailureAtPosition(r.uri,n.start);if(!a)return;let c=new Ds.CodeAction(nX.t("Fix test failure"),Ds.CodeActionKind.QuickFix);return c.isAI=!0,c.command={title:nX.t("Fix test failure"),command:"github.copilot.tests.fixTestFailure",arguments:[{message:a.task.messages[0],test:a.snapshot,source:"sparkles"}]},[c]}}))}var Cn=W(require("vscode"));function M6(t,e){if(!e.length)return;let r;for(let n of t)if(n.children){let i=n.name===e[0]?{symbol:n,matchCount:1}:void 0;if(i){let a=M6(n.children,e.slice(1));a&&(i={symbol:a.symbol,matchCount:i.matchCount+a.matchCount})}let o=M6(n.children,e),s;i&&o?s=i.matchCount>=o.matchCount?i:o:s=i??o,s&&(!r||s.matchCount>r?.matchCount)&&(r=s)}else n.name===e[0]&&(r??={symbol:n,matchCount:1});return r}function wCe(t,e){return(M6(t,[e])??M6(t,HZe(e)))?.symbol}function HZe(t){return Array.from(t.matchAll(/[#\w$][\w\d$]*/g),e=>e[0])}var F6="_github.copilot.openSymbolFromReferences";function RCe(t){return GR(Cn.commands.registerCommand(oE,async e=>{t.sendMSFTTelemetryEvent("panel.action.filelink");let r=Cn.workspace.workspaceFolders?.[0].uri;if(!r)return;let n=typeof e=="string"?Cn.Uri.joinPath(r,e):Cn.Uri.from(e);if(await i(n))await Cn.commands.executeCommand("revealInExplorer",n);else return Cn.commands.executeCommand("vscode.open",n);async function i(o){if(o.path.endsWith("/"))return!0;try{return(await Cn.workspace.fs.stat(o)).type===Cn.FileType.Directory}catch{return!1}}}),Cn.commands.registerCommand(f6,async(e,r,n)=>{if(n??=Cn.workspace.workspaceFolders?.[0].uri,!n)return;let i=Cn.Uri.joinPath(n,e),o=await Cn.commands.executeCommand("vscode.executeDocumentSymbolProvider",i);if(o){let s=wCe(o,r);if(t.sendMSFTTelemetryEvent("panel.action.symbollink",{},{hadMatch:s?1:0}),s){let a=s instanceof Cn.SymbolInformation?s.location.range:s.selectionRange;return Cn.commands.executeCommand("vscode.open",i,{selection:new Cn.Range(a.start,a.start)})}}return Cn.commands.executeCommand("vscode.open",i)}),Cn.commands.registerCommand(F6,(e,r)=>Cn.commands.executeCommand("vscode.open",e,{selection:new Cn.Range(r,r)})))}var hu=W(require("vscode"));var ACe=/(?<!\[)`([^`]+)`(?!\])/g,uE=class{constructor(e,r){this.references=e;this.parserService=r;this.symbolCache=new Map}async linkify(e,r){if(!this.references.length)return{text:e};let n=new Map;for(let[s,a]of e.matchAll(ACe)){if(n.has(a))continue;let c=this.symbolCache.get(a);if(c)n.set(a,c);else{let u=this.tryResolve(a,r);this.symbolCache.set(a,u),n.set(a,u)}}let i=new Map(await Promise.all(Array.from(n.entries(),async([s,a])=>[s,await a])));return{text:e.replace(ACe,(s,a)=>{let c=i.get(a);if(c){let u=(hu.workspace.workspaceFolders?.length?gre(hu.workspace.workspaceFolders[0].uri,c.uri):void 0)??c.uri.fsPath,l=m6(F6,[c.uri,c.range.start]);return`[${s}](${l} "${u?.replaceAll(/"/g,'\\"')}")`}return s}),trustedCommands:[F6]}}async tryResolve(e,r){let n=await this.findWordInReferences(e,r);if(!r?.isCancellationRequested){if(!n.length){let i=e.split(/([#\w$][\w\d$]*)/g).map(s=>s.trim()).filter(s=>s.length),o;for(let s of i){if(!/[#\w$][\w\d$]*/.test(s))break;o=s}if(o&&o!==e&&(n=await this.findWordInReferences(o,r),r?.isCancellationRequested))return}for(let i of n){let o=await this.executeDefinitionProvider(i.uri,i.range.start);if(o)return o;if(r?.isCancellationRequested)return}}}async executeDefinitionProvider(e,r){let n=(await hu.commands.executeCommand("vscode.executeDefinitionProvider",e,r)).at(0);return n&&GZe(n)}async findWordInReferences(e,r){return Pr(await Promise.all(this.references.map(n=>{if(TT(n.anchor))return this.findWordInDoc(e,n.anchor,new hu.Range(0,0,Number.MAX_SAFE_INTEGER,0),r);if("range"in n.anchor)return this.findWordInDoc(e,n.anchor.uri,n.anchor.range,r)})))}async findWordInDoc(e,r,n,i){let o=await hu.workspace.openTextDocument(r);if(i?.isCancellationRequested)return;let s=await this.getSymbolsInRange(o,n);if(i?.isCancellationRequested)return;for(let u of s)if(u.identifier===e){let l=o.positionAt(u.startIndex);return new hu.Location(r,l)}let a=o.getText(n),c=o.offsetAt(n.start);for(let u of a.matchAll(new RegExp(jZe(e),"g")))if(u.index){let l=o.positionAt(c+u.index),d=o.getText(o.getWordRangeAtPosition(l));if(e===d)return new hu.Location(r,l)}}async getSymbolsInRange(e,r){let n=this.parserService.getTreeSitterAST(e);return n?n.getSymbols({startIndex:e.offsetAt(r.start),endIndex:e.offsetAt(r.end)}):[]}};uE=we([de(1,Ir)],uE);function jZe(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function GZe(t){return"uri"in t?t:new hu.Location(t.targetUri,t.targetRange)}var B6=W(st());var lE=class t extends Y{constructor(){super(...arguments);this._logger=this.accessor.get(ce).getLogger("DefinitionAtPosition")}static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){if(await this.accessor.get(Oe).isCopilotIgnored(this.props.document.uri))return{k:"ignored"};let r=this.accessor.get(Kr).extensionMode===ls.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,n=await this.findDefinition(r);return this._logger.debug(`Found ${n.length} implementation(s)/definition(s)`),n.length>0&&this._logger.debug("Implementation(s)/definition(s) found:",JSON.stringify(n,null,"	")),{k:"found",definitions:n}}render(r,n){if(r.k==="ignored")return vscpp("ignoredFiles",{value:[this.props.document.uri]});let{document:i,position:o}=this.props,{definitions:s}=r;if(s.length===0){let a=i.lineAt(o.line);s.push({languageId:i.languageId,uri:i.uri,code:a.text,excerptRange:a.range})}return vscpp(vscppf,null,"Relevant definition",s.length>1?"s":"",": ",vscpp("br",null),vscpp("br",null),s.map(a=>{let l=`${`${ma(a.languageId).lineComment.start} FILEPATH: ${a.uri.path}`}
${a.code}`;return vscpp(vt,{uri:a.uri,languageId:a.languageId,code:l})}))}async findDefinition(r){let{document:n,position:i}=this.props,o=this.accessor.get(ho),s=async u=>{try{let l=await o.getImplementations(n.uri,u);if(this._logger.debug(`Found ${l.length} implementations`,JSON.stringify(l,null,"	")),l.length>0)return l}catch{}try{let l=await o.getDefinitions(n.uri,u);if(this._logger.debug(`Found ${l.length} definitions`,JSON.stringify(l,null,"	")),l.length>0)return l}catch{}return this._logger.debug("No definitions or implementations found"),[]},a=await za(this.accessor,n,r*3,()=>s(i),[]),c=Pr(await Promise.all(a.map(async u=>{let l=Cp(u)?u.targetUri:n.uri;return await this.accessor.get(Oe).isCopilotIgnored(l)?void 0:u})));return Promise.all(c.map(async u=>{let{uri:l,range:d}=Cp(u)?{uri:u.targetUri,range:u.targetRange}:u,p=await this.accessor.get(rt).openTextDocument(l),f=Xb(p.languageId),m,h;if(f===void 0){let g=p.lineAt(d.start.line);m=g.text,h=g.range}else h=(await iE(this.accessor,{document:p,language:ma(n.languageId),wholeRange:d,selection:new Ep(d.start,d.end),fileIndentInfo:void 0})).range,m=p.getText(h);return{languageId:p.languageId,uri:p.uri,code:m,excerptRange:h}}))}};var U6=class extends Y{constructor(r,n){super(r,n);let{document:i,range:o}=this.props;this._defAtPos=new lE({document:i,position:o.start},this.accessor)}async prepare(r,n,i){let{document:o,range:s}=this.props,a=await this._defAtPos.prepare();if(!(a.k==="found"&&a.definitions.some(l=>l.excerptRange.contains(this.props.range)))){let l=await this.accessor.get(Ge).getUserRequestEndpoint(3),d={document:o,fileIndentInfo:void 0,language:ma(o.languageId),wholeRange:s,selection:new Ep(s.start,s.end)};this._defAroundCursor=new nE({documentContext:d,endpointInfo:l},this.accessor)}return{defAtPositionState:a,defAroundCursorState:this._defAroundCursor?await this._defAroundCursor.prepare(r):void 0}}render(r,n){let{document:i,range:o}=this.props,s=i.getText(o),a=gu._determinePrefix(s),c=a?` keeping prefix '${a}'`:"",u=this._defAtPos.render(r.defAtPositionState,n),l=r.defAroundCursorState!==void 0&&this._defAroundCursor?.render(r.defAroundCursorState,n);return vscpp(vscppf,null,vscpp(B6.SystemMessage,null,"You are a distinguished software engineer.",vscpp("br",null),vscpp(di,null),vscpp("br",null),'You must reply with a JSON array of strings of at least four new names, e.g., `["newName1", "newName2", "newName3"]`.',vscpp("br",null),"You must respect existing naming conventions",c,"."),l,vscpp(B6.UserMessage,null,u!==void 0&&vscpp(vscppf,null,u,vscpp("br",null)),"Think of the purpose of `",s,"` in the given code. Think of several names that reflect what `",s,"` is and what it does",c,". Follow existing naming conventions. Reply with a a JSON array of strings of at least four new names for `",s,"`."))}};var gu=class{constructor(e){this._accessor=e;this.supportsAutomaticTriggerKind=this.isEnabled(y7.Automatic).then(r=>!!r),this._logger=this._accessor.get(ce).getLogger("RenameSuggestionsProvider"),this._promptLogger=this._accessor.get(ce).getPromptResponseLogger("RenameSuggestionsProvider")}async isEnabled(e){return e===y7.Invoke?!0:this._accessor.get(Pe).getConfig(Ne.RenameSuggestionsEnabled)||await this._accessor.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.renameSuggestionsEnabled",!0)}async provideNewSymbolNames(e,r,n,i){if(!await this.isEnabled(n))throw new Error("CopilotFeatureUnavailable");if(await this._accessor.get(Oe).isCopilotIgnored(e.uri))throw new Error("CopilotIgnoredDocument");let o=await this._accessor.get(Ge).getNonUserRequestEndpoint(),s=new lm(!1);s.reset();let a=await this._computePrompt(e,r,o,i),c=s.elapsed(),u=await this._accessor.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.renameSuggestionsDelayBeforeFetch",!0),l=u?Math.max(0,u-c):void 0;l!==void 0&&l>0&&await new Promise(h=>setTimeout(h,l)),this._promptLogger.logPrompt(a.messages);let d=this._accessor.get(Qt);s.reset();let p=await d.fetchOne(a.messages,void 0,i,3,o,{agent:"symbol-names"},void 0,{messageSource:"symbolNamesProvider"}),f=s.elapsed();this._promptLogger.logResponse(p),this._logger.debug("provideNewSymbolNames",{promptTokenCount:a.tokenCount,promptConstructionTime:c,fetchTime:f,fetchResultType:p.type});let m=e.languageId;switch(p.type){case"success":{let h=p.value,{replyFormat:g,symbolNames:v,redundantCharCount:b}=gu.processReply(h);return g==="unknown"&&this._sendInternalTelemetry({languageId:m,reply:h}),this._sendPublicTelemetry({languageId:m,fetchResultType:p.type,promptConstructionTime:c,promptTokenCount:a.tokenCount,expectedDelayBeforeFetch:u,actualDelayBeforeFetch:l,successResponseCharCount:h.length,responseUnusedCharCount:b,fetchTime:f,replyFormat:g,symbolNamesCount:v.length}),v.map(y=>new cne(y,[une.AIGenerated]))}default:return this._sendPublicTelemetry({languageId:m,fetchResultType:p.type,promptConstructionTime:c,promptTokenCount:a.tokenCount,expectedDelayBeforeFetch:u,actualDelayBeforeFetch:l,fetchTime:f}),null}}_computePrompt(e,r,n,i){return new nt(n,U6,{document:e,range:r},this._accessor.get(ye),this._accessor).render(void 0,i)}static processReply(e){let r=gu._parseReplyAsJSONStringArray(e);if(r!==void 0)return r;let n=gu._parseReplyAsList(e);return n!==void 0?n:{replyFormat:"unknown",symbolNames:[],redundantCharCount:e.length}}static _parseReplyAsJSONStringArray(e){let r=/\[.*?\]/gs,n=[...e.matchAll(r)];for(let i=0;i<n.length;i++){let o=n[i];try{let s=JSON.parse(o[0]);if(Array.isArray(s)){let a=s.filter(c=>typeof c=="string");if(a.length>0){let c=i===0?"jsonStringArray":"multiJsonStringArray",u=e.length-o[0].length;return{replyFormat:c,redundantCharCount:u,symbolNames:a.map(l=>l.trim())}}}}catch{}}}static _parseReplyAsList(e){let r=/(?:\d+[\.|\)]|[\*\-])\s*(.*)/g,n=e.matchAll(r),i=[];for(let s of n){let a=s[1].trim(),c=["'",'"',"`"];c.includes(a[0])&&(a=a.slice(1)),c.includes(a[a.length-1])&&(a=a.slice(0,-1)),a&&i.push(a)}return i.length===0?void 0:{replyFormat:"list",redundantCharCount:e.length-i.reduce((s,a)=>s+a.length,0),symbolNames:i}}_sendPublicTelemetry({languageId:e,fetchResultType:r,promptConstructionTime:n,promptTokenCount:i,expectedDelayBeforeFetch:o,actualDelayBeforeFetch:s,successResponseCharCount:a,responseUnusedCharCount:c,fetchTime:u,replyFormat:l,symbolNamesCount:d}){this._accessor.safeGet(ke)?.sendMSFTTelemetryEvent("provideRenameSuggestions",{languageId:e,fetchResultType:r,replyFormat:l},{promptConstructionTime:n,promptTokenCount:i,expectedDelayBeforeFetch:o,actualDelayBeforeFetch:s,fetchTime:u,successResponseCharCount:a,responseUnusedCharCount:c,symbolNamesCount:d})}_sendInternalTelemetry({languageId:e,reply:r}){this._accessor.safeGet(ke)?.sendInternalMSFTTelemetryEvent("provideRenameSuggestionsIncorrectFormatResponse",{languageId:e,reply:r})}static _determinePrefix(e){return e.match(/^([\\.\\$\\_]+)/)?.[0]}};gu=we([de(0,Ct)],gu);var DCe=W(lr());var PCe=W(lr());var kCe=W(require("fs"));var M2=W(st());var dE=class extends Y{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(Vt,{priority:600,history:this.props.history}),vscpp(M2.SystemMessage,{priority:1e3},vscpp("br",null),"You are a coding assistant who helps the user find relevant code in their workspace by providing a list of relevant keywords they can search for.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT try to answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),vscpp("br",null),"2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.",vscpp("br",null),vscpp("br",null),"3. Output a precise version of question that resolves all pronouns to the nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns.",vscpp("br",null),vscpp("br",null),"4. Then output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),vscpp("br",null),"5. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),vscpp("br",null),"User: base64 encoding",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders",vscpp("br",null)),this.props.fileTree&&vscpp(M2.UserMessage,{priority:700},this.props.fileTree),vscpp(M2.UserMessage,{priority:1e3},this.props.query))}};var q6=re("IWorkspaceSemanticChunkService"),pE=class{constructor(e){this._accessor=e;this._workspaceChunkSearch=this._accessor.get(Ag),this._chatFetcher=this._accessor.get(Qt)}async searchFileChunks(e,r,n,i){let{messages:o}=await this.buildMetaPrompt(r,e,i);if(i.isCancellationRequested)return[];let s=await this._chatFetcher.fetchOne(o,async c=>{},i,2,r,{agent:Sp},{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"semanticSearchIntent"});if(s.type!=="success")throw new Error(PCe.t("Encountered an error while deciding what workspace information to collect: ({0}) {1}",s.type,s.reason));if(i.isCancellationRequested)return[];let a=sE(e,s.value);return iX(this._workspaceChunkSearch,r,a,n,i,!1)}dispose(){}async buildMetaPrompt(e,r,n){let i=await N2(this._accessor,1e3,n);return new nt(e,dE,{query:r,fileTree:i},this._accessor.get(ye),this._accessor).render()}};pE=we([de(0,Ct)],pE);async function iX(t,e,r,n,i,o){let s={fullText:r.rephrasedQuestion,keywords:r.keywords.flatMap(c=>[c.keyword,...c.variations])},a=(await t.searchFileChunks(e,s,n,{},i)).slice(0,n);return i.isCancellationRequested||!a.length?[]:await VZe(a,o)}async function VZe(t,e){let r=[],n=new Un;for(let[i,o]of t.entries()){let s=n.get(o.file),a=s?s.rank:i,c=s?[...s.ranges,o.range]:[o.range];n.set(o.file,{ranges:c,rank:a})}for(let[i,o]of n.entries()){let s=o.ranges.filter((p,f)=>{for(let[m,h]of o.ranges.entries())if(f!==m&&p.containsRange(h))if(p.equalsRange(h)){if(f<m)return!1}else return!1;return!0}),a=[],c;s.sort((p,f)=>p.startLineNumber-f.startLineNumber);for(let p of s)c&&c.endLineNumber>=p.startLineNumber-1?c=new Li(c.startLineNumber,c.startColumn,p.endLineNumber,p.endColumn):(c&&a.push(c),c=p);c&&a.push(c);let l=(await kCe.promises.readFile(i.fsPath,"utf8")).split(`
`),d=[];for(let p of a){let f=p.startLineNumber,m=p.endLineNumber,h=l.slice(f,m);if(!$Ze(h,5))continue;let{trimmedLines:g}=jT(zZe(h,1e3,15)),v;e?(g.length<h.length&&g.push("..."),v=Ii(Xa(i).replace(/\./g,""),g.join(`
`).replace(/^\n*|\n*$/g,""),!1)):v=g.join(`
`),d.push({range:p,code:v})}d.length>0&&r.push({result:{file:i,locations:d},rank:o.rank})}return r.sort((i,o)=>i.rank-o.rank).map(i=>i.result)}function zZe(t,e,r){let n=[],i=0;for(;i<t.length&&n.join(`
`).length<e&&n.length<r;)n.push(t[i]),i++;return n}function $Ze(t,e){let r=0;for(let n of t)if(r+=n.trim().length,r>=e)return!0;return!1}var H6=class{constructor(e){this._accessor=e}provideAITextSearchResults(e,r,n,i){return(async()=>(this._endpoint=this._endpoint??await this._accessor.get(Ge).getUserRequestEndpoint(2),(await this._accessor.get(q6).searchFileChunks(e,this._endpoint,10,i)).forEach(a=>{a.locations.forEach(c=>{n.report({uri:a.file,ranges:Nl(c.range),preview:{text:c.code,matches:new Je(new Bn(0,c.range.startColumn),new Bn(c.range.endLineNumber-c.range.startLineNumber,c.range.endColumn))}})})}),{limitHit:!1,message:{text:DCe.t("Results are from Copilot"),trusted:!0,type:1}}))()}};var ll=W(require("vscode"));var NCe=W(lr()),LCe=W(st()),oX=W(require("path"));var fE=class t extends Y{async prepare(e){let{document:r,change:n}=this.props,{selection:i}=this.props;if(await this.accessor.get(Oe).isCopilotIgnored(r.uri))return{change:void 0};if(this.props.editor&&!n&&(!i||i.isEmpty)){let h=await this.accessor.get(km).selectEnclosingScope(this.props.editor,{reason:NCe.t("Select an enclosing range to review"),includeBlocks:!0});if(!h)return{change:void 0};i=h}let s=i?i.end.line+(i.end.character>0?1:0):void 0,a=n?[n.range.start.line>0?t.enumeratedLines(r,0,n.range.start.line):"",t.enumeratedChangeLines(n.text,n.range.start.line),`
`,n.range.end.line<r.lineCount?t.enumeratedLines(r,n.range.end.line,r.lineCount):""].join(""):i?t.enumeratedSelectedLines(r,0,r.lineCount,i.start.line,s):t.enumeratedLines(r,0,r.lineCount),c=this.accessor.get(ye),u=c.tokenLength(a),l=this.props.logService.getLogger("CurrentChange");if(l.info(`Full document: ${u} tokens, ${e.tokenBudget} budget`),u<=e.tokenBudget)return{change:{range:new Je(0,0,r.lineCount,0),text:a}};let d=(n||i)&&await Xg.getDefinitionAtRange(this.accessor,r,n?.range||i,!1);if(!d)return{change:n};let p=d.range.end.line+(d.range.end.character>0?1:0),f=n?[d.range.start.line<n.range.start.line?t.enumeratedLines(r,d.range.start.line,n.range.start.line):"",t.enumeratedChangeLines(n.text,n.range.start.line),`
`,p>n.range.end.line?t.enumeratedLines(r,n.range.end.line,p):""].join(""):t.enumeratedSelectedLines(r,d.range.start.line,p,i.start.line,s),m=c.tokenLength(f);return l.info(`Definition: ${m} tokens, ${e.tokenBudget} budget`),{change:{range:n?new Je(Math.min(d.range.start.line,n.range.start.line),0,Math.max(p,n.range.end.line),0):d.range,text:f}}}render(e,r){if(!e.change)return;let n=this.props.document,i=[{uri:n.uri,version:n.version,ranges:[e.change.range]}],o=[new Co.PromptReference(new Pl(n.uri,e.change.range))],s=e.change.range.start.line+1,a=`${n.languageId}/${oX.basename(n.uri.fsPath)}: FROM_LINE: ${s} - TO_LINE: ${e.change.range.end.line+1}`;return vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp("references",{value:o}),vscpp(LCe.UserMessage,{priority:this.props.priority},this.props.change?vscpp(vscppf,null,"Change at cursor:",vscpp("br",null),vscpp("br",null),"Changes are indicated by lines starting with + and -. Each line is annotated with the line number in the file.",vscpp("br",null)):vscpp(vscppf,null,"Current selection with the selected lines labeled as such:",vscpp("br",null)),vscpp("br",null),"From the file: ",oX.basename(n.uri.fsPath),vscpp("br",null),vscpp(vt,{uri:n.uri,code:e.change.text,languageId:a}),vscpp("br",null),vscpp("br",null)))}static async getCurrentChange(e,r,n){let o=e.get(Ml).getExtensionApi();if(!o)return;let s=o.getRepository(r.uri);if(!s)return;let a=await s.diffWithHEAD(r.uri.fsPath);if(!a)return;let c=a.split(`
@@`);c.length&&c[c.length-1].endsWith(`
`)&&(c[c.length-1]=c[c.length-1].slice(0,-1));let l=c.map(p=>{let f=p.match(/-(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))?/);if(f){let m=parseInt(f[1]),h=f[2]?parseInt(f[2]):1,g=parseInt(f[3]),v=f[4]?parseInt(f[4]):1,b=[],y=p.split(`
`).slice(1),S=0,x;for(let T of y){let L=T.charAt(0);L==="+"?(x===void 0&&(x=g+S),S++):(x!==void 0&&(b.push({start:x,length:g+S-x}),x=void 0),L===" "&&S++)}return x!==void 0&&(b.push({start:x,length:g+S-x}),x=void 0),{startDeletedLine:m,deletedLines:h,startAddedLine:g,addedLines:v,additions:b,diffText:y.join(`
`)}}return null}).filter(Boolean).find(p=>p.additions.some(f=>{let m=f.start-1,h=m+f.length-1;return n.line>=m&&n.line<=h}));return l?{range:new Je(l.startAddedLine-1,0,l.startAddedLine-1+l.addedLines,0),text:l.diffText}:void 0}static enumeratedLines(e,r,n){return e.getText(new Je(r,0,n,0)).split(`
`).map((s,a)=>`/* Line ${r+a+1} */${s}`).join(`
`)}static enumeratedSelectedLines(e,r,n,i,o){return e.getText(new Je(r,0,n,0)).split(`
`).map((c,u)=>{let l=r+u;return`/* ${i<=l&&l<o?"Selected ":""}Line ${l+1} */${c}`}).join(`
`)}static enumeratedChangeLines(e,r){let n=0;return e.split(`
`).filter(o=>o[0]!=="-").map((o,s)=>{let a=o.substring(0,1),c=a==="-";return c&&n++,`${a}/* ${c?"Removed Line":`Line ${r+s-n+1}`} */${o.substring(1)}`}).join(`
`)}};var OCe=W(st());var mE=class extends Y{render(e,r){return vscpp(vscppf,null,vscpp(OCe.SystemMessage,{priority:1e3},"You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",vscpp("br",null),vscpp(Lr,null),vscpp(di,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.",vscpp("br",null),"2. Provide feedback on the current ",this.props.change?vscpp(vscppf,null,"change"):vscpp(vscppf,null,"selection")," on where it can be improved or introduces a problem.",vscpp("br",null),"2a. Avoid commenting on correct code.",vscpp("br",null),"2b. Avoid commenting on commented out code.",vscpp("br",null),"3. Reply with an enumerated list of feedback with source line number, relevance between 1 (worst) and 10 (best), and feedback text.",vscpp("br",null),"3a. Use relevance 10 for logical errors, e.g.: 1. Line 357, relevance 10: `i` is not incremented.",vscpp("br",null),"3b. Use relevance 1 for missing documentation, e.g.: 2. Line 361, relevance 1: Function `binarySearch` is not documented.",vscpp("br",null),"3c. Use relevance 1 for missing documentation or checks of assumptions, e.g.: 3. Line 376, relevance 1: Function `binarySearch` assumes that the input array `arr` is sorted. This assumption should be documented or checked.",vscpp("br",null),"3d. Use relevance 1 for missing documentation of common conventions, e.g.: 3. Line 410, relevance 1: Returning `-1` when the target is not found is a common convention, but it should be documented.",vscpp("br",null),vscpp("br",null),"Focus on being clear, helpful, and thorough.",vscpp("br",null),"Use developer-friendly terms and analogies in your explanations.",vscpp("br",null),"Provide clear and relevant examples when helpful."),vscpp(uu,{priority:700}),this.props.document&&vscpp(fE,{editor:this.props.editor,document:this.props.document,change:this.props.change,selection:this.props.selection,logService:this.props.logService,priority:1e3}),vscpp(Qg,{document:this.props.document,range:this.props.selection,priority:800}),this.props.chatVariables&&this.props.query&&vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var j6=class{constructor(e,r){this.accessor=e;this.getChatOutputChannel=r;this.telemetryService=e.get(ke),this.options=e.get(ki),this.tokenizer=e.get(ye),this.endpointProvider=this.accessor.get(Ge),this.fetcher=this.accessor.get(Qt),this.logService=this.accessor.get(ce),this.chatLogger=new QS(e,()=>this.getChatOutputChannel())}async generateDiagnostics(e,r,n){let i=Date.now(),o=this.accessor.get(ce).getLogger("FeedbackGenerator");if(await this.accessor.get(Oe).isCopilotIgnored(e.uri))return o.info("Feedback generation is ignored for this document."),[];let a=await fE.getCurrentChange(this.accessor,e,r.start);if(!a)return o.info("No change found in the current document at the current position."),[];let c=await this.endpointProvider.getUserRequestEndpoint(3,void 0,"gpt-4"),l=await new nt(c,mE,{document:e,change:a,selection:r,logService:this.logService},this.tokenizer,this.accessor).render();this.chatLogger.logMessages(l.messages);let d=Date.now(),p=await this.fetcher.fetchOne(l.messages,void 0,n,3,c,void 0,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:"command.generateFeedbackPrompt"});p.type==="success"?this.chatLogger.logProgress({value:new Ja(p.value)},!0):this.chatLogger.logResponse({errorDetails:{message:p.reason}});let f=p.type==="success"?sX(e,p.value):void 0;return this.telemetryService.sendMSFTTelemetryEvent("feedback.generateDiagnostics",{model:c.model,requestId:p.requestId,responseType:p.type},{numberOfDiagnostics:f?.length??-1,timeToRequest:d-i,timeToComplete:Date.now()-i}),f||[]}};function sX(t,e){let r=[];for(let n of aX(e)){let{from:i,to:o,relevance:s,content:a}=n,c=t.lineAt(i),u=t.lineAt(o-1),l=u.text.trimEnd().length,d=new nne(new Je(c.lineNumber,c.firstNonWhitespaceCharacterIndex,u.lineNumber,l),`[Relevance ${s}] ${a}`,Al.Information);r.push(d)}return r}function aX(t){let e=/(?<num>\d+)\. Line (?<from>\d+)(-(?<to>\d+))?(, relevance (?<relevance>\d+))?: (?<content>.+?)(?=\n\d+\.|\n\n|$)/gs;return Array.from(t.matchAll(e),r=>{let n=r.groups,i=parseInt(n.from)-1,o=n.to?parseInt(n.to):i+1,s=n.relevance?parseInt(n.relevance):void 0,a=n.content.trim();return{from:i,to:o,linkOffset:r.index+n.num.length+2,linkLength:5+n.from.length+(n.to?n.to.length+1:0),relevance:s,content:a}})}var WZe=10,KZe=5*60*1e3,YZe=10*1e3,G6=[],MCe;function QZe(){return MCe||(MCe=ll.window.createOutputChannel("GitHub Copilot Chat Conversation","log"))}function FCe(t){let e=new Ht;if(!t.get(Pe).getConfig(Ne.FeedbackOnChange))return e;let n=e.add(ll.languages.createDiagnosticCollection("github.copilot.provideFeedback")),i=new j6(t,QZe);return e.add(ll.workspace.onDidChangeTextDocument(async o=>{if(o.document.uri.scheme==="file"&&o.contentChanges.length&&o.document===ll.window.activeTextEditor?.document){let s=t.get(ce).getLogger("FeedbackCollection");try{s.info("Document changed, delaying diagnostics request");let a=o.document.version;if(await new Promise(p=>setTimeout(p,YZe)),a!==o.document.version){s.info("Skipping diagnostics request because the document has changed");return}let c=Date.now(),u=c-KZe;if(G6=G6.filter(p=>p>u),G6.length>=WZe){s.info("Max requests reached, skipping diagnostics request");return}G6.push(c),s.info("Requesting diagnostics");let l=ll.window.activeTextEditor?.selection,d=await i.generateDiagnostics(o.document,l,new ll.CancellationTokenSource().token);n.set(o.document.uri,d)}catch(a){s.info("Error generating diagnostics",a?.stack||a?.message||String(a))}}})),e.add(ll.workspace.onDidCloseTextDocument(o=>{n.delete(o.uri)})),e}var F2=W(require("vscode"));var z6=W(st());var cX=class extends Y{render(){let e=this.props.issues?.map(r=>vscpp(vscppf,null,"------- Issue ",r.reference,":",vscpp("br",null),r.content,vscpp("br",null)));return e&&e.length>0?vscpp(vscppf,null,"You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository to fix the following issues: ",vscpp("br",null),e):vscpp(vscppf,null,"You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository.")}},uX=class extends Y{render(){return vscpp(vscppf,null,"Here are two good examples:",vscpp("br",null)," ",this.props.issues&&this.props.issues.length>0?vscpp(vscppf,null,"Example One:",vscpp("br",null),"+++Batch mark/unmark files as viewed",vscpp("br",null),"+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.",vscpp("br",null),"Fixes #4520+++",vscpp("br",null),"Example two:",vscpp("br",null),"+++Fallback to hybrid after 20 process ports",vscpp("br",null),"+++Additionally the \\`remote.autoForwardPortsSource\\` setting has been updated to remove the \\`markdownDescription\\` reference to a reload being required for changes to take effect.",vscpp("br",null),"Fixes microsoft/vscode-internalbacklog#4533+++",vscpp("br",null)):vscpp(vscppf,null,"Example One:",vscpp("br",null),"+++Batch mark/unmark files as viewed",vscpp("br",null),"+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.+++",vscpp("br",null),"Example two:",vscpp("br",null),"+++Fallback to hybrid after 20 process ports",vscpp("br",null),"+++Additionally the \\`remote.autoForwardPortsSource\\` setting has been updated to remove the \\`markdownDescription\\` reference to a reload being required for changes to take effect.+++",vscpp("br",null)),";")}},lX=class extends Y{render(){return vscpp(vscppf,null,vscpp(cX,{issues:this.props.issues}),"Pull requests have a short and concise title that describes the changes in the code and a slightly longer description.",vscpp("br",null),"The description can be more detailed but should still be concise. Do not list commits, files or patches. Do not make up an issue reference if the pull request isn't fixing an issue.",vscpp("br",null),"The title and description of a pull request should be markdown and start with +++ and end with +++.",vscpp("br",null),vscpp(uX,{issues:this.props.issues}))}},dX=class extends Y{render(){let e=this.props.commitMessages.map(n=>vscpp(vscppf,null,"* ",n,vscpp("br",null))),r=this.props.patches.map(n=>vscpp(vscppf,null,"```diff",vscpp("br",null),n,vscpp("br",null),"```",vscpp("br",null)));return vscpp(vscppf,null,"These are the commits that will be included in the pull request you are about to make:",vscpp("br",null),e,vscpp("br",null),"Below is a list of git patches that contain the file changes for all the files that will be included in the pull request:",vscpp("br",null),r,vscpp("br",null),"Based on the git patches and on the git commit messages above, the title and description of the pull request should be:",vscpp("br",null))}},V6=class extends Y{render(){return vscpp(vscppf,null,vscpp(z6.SystemMessage,null,vscpp(lX,{issues:this.props.issues}),vscpp(ar,null)),vscpp(z6.UserMessage,null,vscpp(dX,{commitMessages:this.props.commitMessages,patches:this.props.patches})))}};var $6=class t{constructor(e){this.accessor=e;this.disposables=new Ht;this.lastContext={commitMessages:[],patches:[]};this.internalLogger=e.get(ce).getPromptResponseLogger("GitHub pull request title and description generator"),this.logger=e.get(ce).getLogger("githubTitleAndDescriptionProvider"),this.logger.info("Initializing GitHub PR title and description provider provider."),this.options=e.get(ki)}dispose(){this.disposables.dispose()}isRegenerate(e,r){if(e.length!==this.lastContext.commitMessages.length||r.length!==this.lastContext.patches.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==this.lastContext.commitMessages[n])return!1;for(let n=0;n<r.length;n++)if(r[n]!==this.lastContext.patches[n])return!1;return!0}async excludePatches(e){let r=this.accessor.get(Oe),n=[];for(let i of e)i.fileUri&&await r.isCopilotIgnored(gt.parse(i.fileUri))||i.previousFileUri&&i.previousFileUri!==i.fileUri&&await r.isCopilotIgnored(gt.parse(i.previousFileUri))||n.push(i.patch);return n}async provideTitleAndDescription(e,r){let n=e.commitMessages,i=nA(e.patches)?e.patches.map(d=>({patch:d})):e.patches,o=await this.excludePatches(i),s=e.issues,a=await this.accessor.get(Ge).getUserRequestEndpoint(3),c=Math.floor(a.modelMaxPromptTokens*4/3),u=await this.createPRTitleAndDescriptionPrompt(n,o,s,c);this.internalLogger.logPrompt(u.messages);let l=await this.accessor.get(Qt).fetchOne(u.messages,void 0,r,3,a,void 0,{temperature:this.isRegenerate(n,o)?this.options.temperature+.1:this.options.temperature,top_p:this.options.topP},{messageSource:"extension.providePullRequestTitleAndDescription"});if(this.internalLogger.logResponse(l),this.lastContext={commitMessages:n,patches:o},l.type==="success")return t.parseFetchResult(l.value)}static parseFetchResult(e,r=!0){e=e.trim();let n=e,i=n.indexOf("+++");if(i===-1)return;let o=n.lastIndexOf("+++");n=n.substring(i+3,o>i+3?o:void 0).trim().replace(/\+\+\+?(\n)\+\+\+/,"+++");let s=n.split("+++").filter(l=>l.trim().length>0),a;if(s.length===1)a=s[0].split(`
`);else if(s.length>1){let l=s.slice(1).map(d=>d.split(`
`)).flat().filter(d=>d.trim().length>0);a=[s[0],...l]}else return;let c,u;if(a.length===1){if(c=a[0].trim(),r&&e.includes(`
`)&&e.split("+++").length===3)return this.parseFetchResult(e+"+++",!1)}else if(a.length>1){c=a[0].trim(),u="";let l=a.slice(1);for(let d of l)d.includes("commit message")||(u+=`${d.trim()}

`)}if(c)return c=c.replace(/Title\:\s/,"").trim(),u&&(u=u.replace(/Description\:\s/,"").trim()),{title:c,description:u}}async createPRTitleAndDescriptionPrompt(e,r,n,i){let o=i-Math.floor(i*.2),s=r.join(`

`).length;if(s>o)for(r.sort((u,l)=>u.length-l.length);s>o&&r.length>0;){let u=r.pop();s-=u.length}let a=await this.accessor.get(Ge).getUserRequestEndpoint(3);return new nt(a,V6,{commitMessages:e,issues:n,patches:r},this.accessor.get(ye),this.accessor).render(void 0,void 0)}};var W6=class extends $6{constructor(r){super(r);this.initializeGitHubPRExtensionApi()}getExtension(){return F2.extensions.getExtension("github.vscode-pull-request-github")}initializeGitHubPRExtensionApi(){let r=this.getExtension(),n=async()=>{if(r){let i=await r.activate();this.logger.info("Successfully activated the GitHub.vscode-pull-request-github extension."),this.gitHubExtensionApi=i,this.registerTitleAndDescriptionProvider()}};if(r)n();else{this.logger.info("GitHub.vscode-pull-request-github extension is not yet activated.");let i=F2.extensions.onDidChange(()=>{r=this.getExtension(),r&&(n(),i.dispose())});this.disposables.add(i)}}async registerTitleAndDescriptionProvider(){if(this.gitHubExtensionApi)try{this.disposables.add(this.gitHubExtensionApi.registerTitleAndDescriptionProvider(F2.l10n.t("Generate with Copilot"),this)),this.logger.info("Successfully registered GitHub PR title and description provider.")}catch{}}};var dl=W(require("vscode"));var K6=class{provideMappedEdits(e,r,n,i){if(n.documents.length===0)return null;let o=n.documents[0],s=e.uri.toString(),a=o.find(b=>b.uri.toString()===s);if(!a)return null;let c=a.ranges;if(c.length!==1||r.length!==1)return null;let u=c[0],l=r[0];if(!e.getText(new dl.Range(new dl.Position(u.start.line,0),new dl.Position(u.start.line,u.start.character))).match(/^\s*$/))return null;let p=dl.window.activeTextEditor,f;if(p&&p.options&&e.languageId===p.document.languageId){let b=p.options,y=typeof b.tabSize=="number"?b.tabSize:4,S=typeof b.insertSpaces=="boolean"?b.insertSpaces:!0;f={tabSize:y,insertSpaces:S}}let m=new dl.Range(new dl.Position(u.start.line,0),u.end),h=e.getText(m),g=Mg(l.split(`
`),{whichLine:"topMost",lines:h.split(`
`)},f).join(`
`),v=new dl.WorkspaceEdit;return v.replace(e.uri,m,g),v}};var rwe=W(require("path")),nwe=require("util"),Tt=require("vscode");var XZe=["dockerfile","license","makefile","readme","procfile","gemfile","rakefile","jenkinsfile","vagrantfile"];function UCe(t){return/\.[^/.]+$/.test(t)&&XZe.indexOf(t.toLowerCase())===-1}var e0=W(lr()),XCe=W(require("path"));var rpr=new Uint32Array(10);var npr=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),ipr=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),opr=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),spr=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function qCe(...t){return function(e,r){for(let n=0,i=t.length;n<i;n++){let o=t[n](e,r);if(o)return o}return null}}var mpr=jCe.bind(void 0,!1),HCe=jCe.bind(void 0,!0);function jCe(t,e,r){if(!r||r.length<e.length)return null;let n;return t?n=_T(r,e):n=r.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function JZe(t,e){let r=e.toLowerCase().indexOf(t.toLowerCase());return r===-1?null:[{start:r,end:r+t.length}]}function ZZe(t,e){return pX(t.toLowerCase(),e.toLowerCase(),0,0)}function pX(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]===e[n]){let i=null;return(i=pX(t,e,r+1,n+1))?VCe({start:n,end:n+1},i):null}return pX(t,e,r,n+1)}function mX(t){return 97<=t&&t<=122}function Q6(t){return 65<=t&&t<=90}function hX(t){return 48<=t&&t<=57}function eet(t){return t===32||t===9||t===10||t===13}var tet=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(t=>tet.add(t.charCodeAt(0)));function GCe(t){return mX(t)||Q6(t)||hX(t)}function VCe(t,e){return e.length===0?e=[t]:t.end===e[0].start?e[0].start=t.start:e.unshift(t),e}function zCe(t,e){for(let r=e;r<t.length;r++){let n=t.charCodeAt(r);if(Q6(n)||hX(n)||r>0&&!GCe(t.charCodeAt(r-1)))return r}return t.length}function fX(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=fX(t,e,r+1,n+1);!i&&(o=zCe(e,o))<e.length;)i=fX(t,e,r+1,o),o++;return i===null?null:VCe({start:n,end:n+1},i)}}function ret(t){let e=0,r=0,n=0,i=0,o=0;for(let l=0;l<t.length;l++)o=t.charCodeAt(l),Q6(o)&&e++,mX(o)&&r++,GCe(o)&&n++,hX(o)&&i++;let s=e/t.length,a=r/t.length,c=n/t.length,u=i/t.length;return{upperPercent:s,lowerPercent:a,alphaPercent:c,numericPercent:u}}function net(t){let{upperPercent:e,lowerPercent:r}=t;return r===0&&e>.6}function iet(t){let{upperPercent:e,lowerPercent:r,alphaPercent:n,numericPercent:i}=t;return r>.2&&e<.8&&n>.6&&i<.2}function oet(t){let e=0,r=0,n=0,i=0;for(let o=0;o<t.length;o++)n=t.charCodeAt(o),Q6(n)&&e++,mX(n)&&r++,eet(n)&&i++;return(e===0||r===0)&&i===0?t.length<=30:e<=5}function $Ce(t,e){if(!e||(e=e.trim(),e.length===0)||!oet(t)||e.length>60)return null;let r=ret(e);if(!iet(r)){if(!net(r))return null;e=e.toLowerCase()}let n=null,i=0;for(t=t.toLowerCase();i<e.length&&(n=fX(t,e,0,i))===null;)i=zCe(e,i+1);return n}var hpr=qCe(HCe,$Ce,JZe),gpr=qCe(HCe,$Ce,ZZe),vpr=new xl(1e4);var Y6=128;function gX(){let t=[],e=[];for(let r=0;r<=Y6;r++)e[r]=0;for(let r=0;r<=Y6;r++)t.push(e.slice(0));return t}function WCe(t){let e=[];for(let r=0;r<=t;r++)e[r]=0;return e}var ypr=WCe(2*Y6),bpr=WCe(2*Y6),_pr=gX(),xpr=gX(),Spr=gX();var set;(r=>{r.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}r.isDefault=e})(set||={});var BCe=class{constructor(e,r){this.firstMatchCanBeWeak=e;this.boostFullMatch=r}static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}};var KCe;(e=>{function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(KCe||={});var U2;(h=>{h.iconNameSegment="[A-Za-z0-9]+",h.iconNameExpression="[A-Za-z0-9-]+",h.iconModifierExpression="~[A-Za-z]+",h.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${h.iconNameExpression})(${h.iconModifierExpression})?$`);function o(g){let v=i.exec(g.id);if(!v)return o(jr.error);let[,b,y]=v,S=["codicon","codicon-"+b];return y&&S.push("codicon-modifier-"+y.substring(1)),S}h.asClassNameArray=o;function s(g){return o(g).join(" ")}h.asClassName=s;function a(g){return"."+o(g).join(".")}h.asCSSSelector=a;function c(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||KCe.isThemeColor(g.color))}h.isThemeIcon=c;let u=new RegExp(`^\\$\\((${h.iconNameExpression}(?:${h.iconModifierExpression})?)\\)$`);function l(g){let v=u.exec(g);if(!v)return;let[,b]=v;return{id:b}}h.fromString=l;function d(g){return{id:g}}h.fromId=d;function p(g,v){let b=g.id,y=b.lastIndexOf("~");return y!==-1&&(b=b.substring(0,y)),v&&(b=`${b}~${v}`),{id:b}}h.modify=p;function f(g){let v=g.id.lastIndexOf("~");if(v!==-1)return g.id.substring(v+1)}h.getModifier=f;function m(g,v){return g.id===v.id&&g.color?.id===v.color?.id}h.isEqual=m})(U2||={});var vX=new RegExp(`\\$\\(${U2.iconNameExpression}(?:${U2.iconModifierExpression})?\\)`,"g"),aet=new RegExp(`(\\\\)?${vX.source}`,"g");function YCe(t){return t.replace(aet,(e,r)=>r?e:`\\${e}`)}var Dpr=new RegExp(`\\\\${vX.source}`,"g");var Npr=new RegExp(`(\\s)?(\\\\)?${vX.source}(\\s)?`,"g");var Lpr=new RegExp(`\\$\\(${U2.iconNameCharacter}+\\)`,"g");var tb=class{constructor(e="",r=!1){if(this.value=e,typeof this.value!="string")throw Fn("value");typeof r=="boolean"?(this.isTrusted=r,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=r.isTrusted??void 0,this.supportThemeIcons=r.supportThemeIcons??!1,this.supportHtml=r.supportHtml??!1)}appendText(e,r=0){return this.value+=cet(this.supportThemeIcons?YCe(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,r===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,r){return this.value+=`
${uet(r,e)}
`,this}appendLink(e,r,n){return this.value+="[",this.value+=this._escape(r,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,r){let n=new RegExp(P0(r),"g");return e.replace(n,(i,o)=>e.charAt(o-1)!=="\\"?`\\${i}`:i)}};function cet(t){return t.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function uet(t,e){let r=t.match(/^`+/gm)?.reduce((i,o)=>i.length>o.length?i:o).length??0,n=r>=3?r+1:3;return[`${"`".repeat(n)}${e}`,t,`${"`".repeat(n)}`].join(`
`)}var yX=W(lr()),q2=W(st()),QCe=W(require("path"));async function B2(t,e,r,n){let i=null,o=!1;i=setTimeout(()=>{o||t.report(e)},n);try{let s=await r;return o=!0,s}finally{i&&clearTimeout(i)}}var X6=class extends Y{async prepare(r,n,i){if(!this.props.useTemplates)return{};if(!n)throw new Error("Progress is required");this._embeddingCompute??=this.accessor.get(Bs);let o=await this._embeddingCompute?.computeEmbeddings([this.props.query],{},void 0);if(!o)return{};let s=this.accessor.get(gP);n.report(new Us(yX.t("Searching project template index...")));let a=await s.nClosestValues(o[0],1,.8);if(a.length===0)return{};{let c=a[0]?.split(":"),u=c[0].trim(),l=c[1].trim(),d=c[2].trim()===""?".":c[2].trim();if(!u||!l||!d)return{};let p=this.accessor.get(Fl),f=await B2(n,new Us(yX.t("Fetching project contents...")),p.getRepositoryItems(u,l,d),500),m;return d==="."?m=`httpx://github.com/${u}/${l}`:m=QCe.default.dirname(f[0]?.html_url),this._metadata=new rb(u,l,d,f),{url:m}}}render(r){return vscpp(vscppf,null,this.props.history&&vscpp(vscppf,null,vscpp(Vt,{priority:600,history:this.props.history.filter(n=>n.response?.name===bX&&n.request.type==="user")})),!this._metadata&&vscpp(vscppf,null,vscpp(q2.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to suggest a filetree directory structure for a project that a user wants to create. If a step does not relate to filetree directory structures, do not respond. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),`You should always start your response to the user with "Sure, here's a proposed directory structure for a [project type] app:"`,vscpp("br",null),"You should generate a markdown file tree structure for the same project and include it in your response.",vscpp("br",null),"You should only list common files for the user's desired project type.",vscpp("br",null),"You should always include a README.md file which describes the project.",vscpp("br",null),"Do not include folders and files generated after compiling, building or running the project such as node_modules, dist, build, out",vscpp("br",null),"Do not include image files such as png, jpg, ico, etc",vscpp("br",null),"Do not include any descriptions or explanations in your response.",vscpp("br",null),"If the user asks for a file content to be modified, respond with the same file tree structure and ask them to open the file to view the modifications.",vscpp("br",null),"Do not attempt to modify the file content your self and simply respond with the same file tree structure.",vscpp("br",null),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid setup question","","User: Create a TypeScript express app","Assistant:","","Sure, here's a proposed directory structure for a TypeScript Express app:","","```filetree","my-express-app","\u251C\u2500\u2500 src","\u2502   \u251C\u2500\u2500 app.ts","\u2502   \u251C\u2500\u2500 controllers","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u251C\u2500\u2500 routes","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u2514\u2500\u2500 types","\u2502       \u2514\u2500\u2500 index.ts","\u251C\u2500\u2500 package.json","\u251C\u2500\u2500 tsconfig.json","\u2514\u2500\u2500 README.md","```","","## Invalid setup question","","User: Create a horse project","Assistant: Sorry, I don't know how to set up a horse project."].join(`
`))),this._metadata&&vscpp(vscppf,null,vscpp(q2.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to format the given information as shown in the example below.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(Xn,null),vscpp(vr,null),"The current question is related to sample GitHub repositories.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"Use the URL provided to create the markdown link in your response",vscpp("br",null),"Please respond as shown below only if URL is provided in the context.",vscpp("br",null),"[Valid Example]:",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample",vscpp("br",null),"[Output]",vscpp("br",null),"Sure, here's a GitHub sample project to help you get started on creating a VSCode extension with a walkthrough contribution: [Walkthrough Sample](https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample)",vscpp("br",null),vscpp("br",null),"Please respond with NA as shown below if no URL is provided in the context.",vscpp("br",null),"[Invalid Example Input]: ",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: ",vscpp("br",null),"[Output] NA ",vscpp("br",null),vscpp("br",null),r.url&&vscpp(vscppf,null,"Below is the URL you should use as input",vscpp("br",null),"URL: ",r.url,vscpp("br",null)))),vscpp(q2.UserMessage,{priority:900},this.props.query),this._metadata&&vscpp(vscppf,null,vscpp("meta",{value:this._metadata})))}},rb=class extends vc{constructor(r,n,i,o){super();this.org=r;this.repo=n;this.path=i;this.githubRepoItems=o}};(e=>{function t(r){return r instanceof e}e.is=t})(rb||={});var tp=W(st());var J6=class extends Y{render(){return vscpp(vscppf,null,this.props.history&&vscpp(e8,{messages:this.props.history}),vscpp(tp.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to generate the contents of a file in a project when given the user description, specification and tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and give me contents for just the file ",this.props.filePath," within this project. The code should not contain bugs.",vscpp("br",null),"If the user has asked for modifications to an existing file, please use the File path and File contents provided below if applicable.",vscpp("br",null),"If the file is supposed to be empty, please respond with a code comment saying that this file is intentionally left blank.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null)),this.props.relavantFiles&&this.props.relavantFiles.size>0&&vscpp(vscppf,null,vscpp(tp.UserMessage,{priority:500},"Below, you will find a list of file paths and their contents previously used",vscpp("br",null),Array.from(this.props.relavantFiles).map(([e,r])=>`File path: ${e}
File contents: ${r}
`).join(`
`))),vscpp(tp.UserMessage,{priority:900},"Generate the contents of the file: ",this.props.filePath," ",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`filetree' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"The project should adhere to the following specification:",vscpp("br",null),this.props.projectSpecification,vscpp("br",null)))}},Z6=class extends Y{render(){return vscpp(vscppf,null,this.props.history&&vscpp(e8,{messages:this.props.history}),vscpp(tp.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to generate the project specification when given the user description and file tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and respond with a text description that lists and summarizes each file inside this project.",vscpp("br",null),"List the classes, types, interfaces, functions, and constants it exports and imports if it is a code file.",vscpp("br",null),"Consider filenames and file extensions when determining the programming languages used in the project. List any special configurations or settings required for configuration files such as package.json or tsconfig.json to help compile the project successfully",vscpp("br",null),"You should be as specific as possible when listing the public properties and methods for each exported class.",vscpp("br",null),"Do not use code blocks or backticks. Do not include any text before or after the file contents.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Valid question",vscpp("br",null),"User: I want to set up the following project: Create a TypeScript Express app",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown ",vscpp("br",null),"my-express-app",vscpp("br",null),"\u251C\u2500\u2500 src",vscpp("br",null),"\u2502   \u251C\u2500\u2500 app.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 controllers",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 routes",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u2514\u2500\u2500 types",vscpp("br",null),"\u2502       \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u251C\u2500\u2500 package.json",vscpp("br",null),"\u251C\u2500\u2500 tsconfig.json",vscpp("br",null),"\u2514\u2500\u2500 README.md",vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"## Valid response",vscpp("br",null),"Assistant: The project has the following files:",vscpp("br",null),"\\`src/app.ts\\`: This file is the entry point of the application. It creates an instance of the express app and sets up middleware and routes.",vscpp("br",null),"\\`src/controllers/index.ts\\`: This file exports a class \\`IndexController\\` which has a method \\`getIndex\\` that handles the root route of the application.",vscpp("br",null),"\\`src/routes/index.ts\\`: This file exports a function \\`setRoutes\\` which sets up the routes for the application. It uses the \\`IndexController\\` to handle the root route.",vscpp("br",null),"\\`src/types/index.ts\\`: This file exports interfaces \\`Request\\` and \\`Response\\` which extend the interfaces from the \\`express\\` library.",vscpp("br",null),"\\`tsconfig.json\\`: This file is the configuration file for TypeScript. It specifies the compiler options and the files to include in the compilation.",vscpp("br",null),"\\`package.json\\`: This file is the configuration file for npm. It lists the dependencies and scripts for the project.",vscpp("br",null),"\\`README.md\\`: This file contains the documentation for the project.",vscpp("br",null)),vscpp(tp.UserMessage,{priority:900},"I want to set up the following project: ",this.props.query,vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null)))}},e8=class extends Y{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(tp.UserMessage,{priority:600},i.content));break;case"assistant":n.push(vscpp(tp.AssistantMessage,{priority:800},i.content));break;default:break}return vscpp(vscppf,null,n)}};var t8=class{constructor(e,r){this.accessor=e;this.promptType=r;this.logger=e.get(ce).getPromptResponseLogger(this.constructor.name),this.options=e.get(ki)}async generate(e,r){let n=await this.accessor.get(Ge).getUserRequestEndpoint(3),o=await new nt(n,this.promptType,e,this.accessor.get(ye),this.accessor).render(),s=await this.accessor.get(Qt).fetchOne(o.messages,void 0,r,3,n,void 0,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:typeof this.promptType});return this.logger.logResponse(s),s.type==="success"?e.filePath?this.parseContents(e.filePath,s.value):s.value:""}},r8=class extends t8{constructor(e){super(e,Z6)}parseContents(e,r){throw new Error("Method not implemented.")}},n8=class extends t8{constructor(e){super(e,J6)}parseContents(e,r){function n(i,o){try{let s=o.exec(i.trim());if(s&&s.length>2)return s[2]}catch(s){console.error(s)}return i}if(e.endsWith(".md")){let i=n(r,/^```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/),[o,...s]=i.split("#");return o.length?["",...s].join("#"):i}else return n(r,/```([^\n]+)?\s*\n([\s\S]+?)\s*```/g)}};var rp=re("INewWorkspacePreviewContentManager"),hE=class{constructor(e){this.responseScopedData=new Map;this.prevFileContents=new Map;this.copilotContentManager=new _X(e),this.githubContentManager=new xX(e)}set(e,r,n,i){this.responseScopedData.set(e,n),TX(n.baseUri)?this.githubContentManager.set(e,r,n,i):this.copilotContentManager.set(e,r,n,i)}get(e){this.prevResponseId!==e.authority&&(this.prevFileContents.clear(),this.prevResponseId=e.authority);let r;return TX(e)?r=this.githubContentManager.get(e.authority,e.path):r=this.copilotContentManager.get(e.authority,e.path),r?.content?.then(n=>{if(this.prevFileContents.has(e.path))return;let o=new TextDecoder().decode(n);this.prevFileContents.set(e.path,o)}),r}getFileTree(e){return this.responseScopedData.get(e)}getFileContentsFromPrevHistory(){return this.prevFileContents}};hE=we([de(0,Ct)],hE);var _X=class{constructor(e){this.accessor=e;this.promises=[];this.responseScopedData=new Map;this.generatePlanPrompt=new r8(this.accessor);this.generateFilePrompt=new n8(this.accessor)}set(e,r,n,i){let{userPrompt:o,projectStructure:s,chatMessages:a}=i,c={query:o,fileTreeStr:s,history:a},u=this.generatePlanPrompt.generate(c,qr.None);this.promises.push(u);let l=this._getResponseScopedData(e),d={userPrompt:o,projectSpecification:u,projectStructure:s,fileTree:n,chatMessages:a};l.set(r,d)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,c=JCe(a,i);if(c&&!c?.content){let u=c;u.content=this._getFileContent(s.userPrompt,s.projectStructure,s.projectSpecification,r,s.chatMessages).catch(()=>u.content=void 0)}return c}_prefetch(e,r,n,i,o){let s=Date.now();return i.children?{...i,type:2,children:i.children.map(a=>this._prefetch(e,r,n,a,o)),ctime:s}:{...i,type:1,content:void 0,ctime:s}}async _getFileContent(e,r,n,i,o){let s=this.accessor.get(rp).getFileContentsFromPrevHistory(),a={query:e,fileTreeStr:r,filePath:i,projectSpecification:await n,history:o,relavantFiles:s.has(i)?new Map([[i,s.get(i)]]):void 0};return this.generateFilePrompt.generate(a,qr.None).then(c=>Buffer.from(c))}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}},xX=class{constructor(e){this.responseScopedData=new Map;this.repositoryService=e.get(Fl)}set(e,r,n,i){let o=i,s=this._getResponseScopedData(e),a={...o,fileTree:n};s.set(r,a)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,c=JCe(a,i);if(c&&!c?.content&&!c?.children){let u=c,l=s.path==="."?XCe.relative(s.repo,r):r.slice(1);u.content=this.repositoryService.getRepositoryItemContent(s.org,s.repo,l).catch(()=>u.content=void 0)}return c}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}};function JCe(t,e){let r;for(let n of e)r?r.children&&(r=r.children.find(i=>i.name===n)??r):r=t.find(i=>i.name===n);return r}var bX="new",i8=class{constructor(){this.id="new";this.locations=[2];this.description=e0.t("Scaffold code for a new workspace");this.intentDetectionInput={modelDescription:"Scaffolds a new project from scratch based on requirements from the user.",sampleQuestion:"Create a RESTful API server using typescript"};this.commandInfo={followupPlaceholder:"Provide additional instructions to refine the proposed workspace",shouldRepopulate:!0,allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:e0.t("Create a RESTful API server using typescript")}}static{this.ID="new"}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return new SX(e,this,o,i)}async asSlashCommand(e,r){return{command:this.id,detail:this.description}}};function ZCe(t){return{command:"github.copilot.createProject",arguments:[t],title:e0.t("Create Workspace")}}var SX=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.commands=async(e,r)=>{let n=e.get(ce).getPromptResponseLogger("new");if(!r.response?.message||!r.requestId)return[];let i=e.get(rp).getFileTree(r.requestId);return i?TX(i.baseUri)?[]:[ZCe(i)]:(n.info("[workspaceIntent] Failed to fetch project items."),[])};let o=this;this.promptCrafter=new class{async getShouldUseProjectTemplate(a){let c=a.get(Pe).getConfig(Ne.UseProjectTemplates);return c!==void 0?c:await a.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.useProjectTemplates",!0)?(await a.get(Rt).getCopilotToken(a)).public_suggestions!=="enabled":!1}async buildPrompt(a,c,u,l,d,p){let f=a.getLatestTurn(),m=f.request.message,h=a.turns.length>1?a.turns.slice(0,-1):[],g=h[h.length-1]?.request?.message!==f.request.message&&await this.getShouldUseProjectTemplate(e),v=new nt(c,X6,{useTemplates:g,query:m,history:h},e.get(ye),e),b=await v.render(l,p),y=v.getMeta(rb);return y&&(o.githubContentMetadata=y),b}}}get responseProcessor(){return new EX(this.accessor,this.githubContentMetadata)}};function det(t){let e=(t.match(/│   /g)||[]).length;return e+=(t.match(/\|   /g)||[]).length,e+=(t.match(/    /g)||[]).length,e+=(t.match(/├── /g)||[]).length,e+=(t.match(/└── /g)||[]).length,e}var pet=["node_modules","out","bin","debug","obj","lib",".dll",".pdb",".lib",".jpg",".png",".ico",".gif",".svg",".jpeg",".tiff",".bmp",".webp",".jpeg",".gitignore","LICENSE.txt","yarn.lock","package-lock.json"];function ewe(t){let e=[];for(let r of t)fet(r)||(r.children&&(r.children=ewe(r.children)),e.push(r));return e}function fet(t){return!!pet.includes(t.name)}function met(t,e){let r=e.trim().split(`
`),n=[],i,o={name:"",children:[]};n[0]=o;for(let a of r){let c=det(a),u=a.lastIndexOf("\u2500\u2500 "),l=u>=0?a.substring(u+3):a,d={name:l};if(c===0){i=twe(t,l),o.name=l;continue}else{for(;c>0&&n[c-1]===void 0;)c--;n[c-1].children===void 0?n[c-1].children=[d]:n[c-1].children?.push(d),n[c]=d}}if(i===void 0)throw new Error("Base URI is undefined");let s=ewe(o.children);return s=s.sort((a,c)=>a.children&&!c.children?-1:1),{chatResponseTree:new HT(s,i),projectName:o.name}}function het(t,e,r){let n;r?n=t.map(u=>[e.path,u.path].join("/")):n=t.map(u=>u.path);let i=n[0].split("/")[0],o={name:i,children:[]},s={rootName:o};for(let u of n){let l=u.split("/"),d=i,p=o;for(let f=1;f<l.length;f++){let m=l[f];if(d+=`/${m}`,!s[d]){let h={name:m};p.children===void 0&&(p.children=[]),p.children.push(h),s[d]=h}p=s[d]}}let a;r?a=o.children?.[0].children??[]:a=o.children??[];let c=a?.sort((u,l)=>u.children&&!l.children?-1:1)??[];return new HT(c,e)}var IX="vscode-copilot-workspace",CX="vscode-copilot-github-workspace";function twe(t,e,r=!1){return Ji.from({scheme:r?CX:IX,authority:t??"",path:e?`/${e}`:void 0})}var EX=class{constructor(e,r){this.accessor=e;this.githubContentMetadata=r;this._appliedText="";this._p=Promise.resolve("")}async processResponse(e,r,n,i,o){let s=!1,a="",c=/```filetree\n/,u=r.filter(d=>d.role!=="system"),l=!1;for await(let{delta:d}of n){if(o.isCancellationRequested)break;let p=d.text;this._p=this._p.then(async()=>{let f=e.requestId??"";if(e.response||(e.response={message:this._appliedText,type:"model"}),!p)return this._appliedText;if(e.response.message+=p,this._appliedText+=p,this.githubContentMetadata)this._appliedText.split(`
`).length<3&&i.markdown(p);else{let m=e.request.message,h=this._appliedText.match(/```filetree\n([\s\S]+?)\n```/);if(h&&(s||!l)){s=!1;let[g,v]=this._appliedText.split(h[0]);l||i.markdown(g),a=h[1];let{chatResponseTree:b,projectName:y}=met(f,a);i.progress(e0.t("Generating workspace preview...")),i.push(b),i.markdown(v),this.accessor.get(rp).set(f,y,b,{userPrompt:m,projectStructure:a,chatMessages:u})}else if(this._appliedText.match(c)&&!s&&!h){s=!0;let[g,v]=this._appliedText.split(c);a+=v,i.progress(e0.t("Generating workspace preview..."))}else s?a+=p:!s&&!this._appliedText.match(/```/)&&(l=!0,i.markdown(p))}return this._appliedText})}if(await this._p,e.requestId&&this.githubContentMetadata&&this.githubContentMetadata.org&&this.githubContentMetadata.repo&&this.githubContentMetadata.path&&this.githubContentMetadata.githubRepoItems&&!this.accessor.get(rp).getFileTree(e.requestId)){i.progress(e0.t("Generating workspace preview..."));let d=this.githubContentMetadata.path===".",p=d?this.githubContentMetadata.repo:this.githubContentMetadata.path.split("/")[0],f=het(this.githubContentMetadata.githubRepoItems,twe(e.requestId,p,!0),d);i.push(f),i.button(ZCe(f)),this.accessor.get(rp).set(e.requestId,p,f,this.githubContentMetadata);let m=encodeURIComponent(`["@workspace /${bX} ${e.request.message}"]`),h=new tb(e0.t("Hint: You can [regenerate this project without using this sample](command:workbench.action.chat.open?{0}) or use this [setting](command:workbench.action.openSettings?%5B%22github.copilot.chat.useProjectTemplates%22%5D) to configure the behavior.",m));h.isTrusted={enabledCommands:["workbench.action.openSettings","workbench.action.chat.open"]},i.markdown(h)}return this._appliedText}};function TX(t){return t.scheme==="vscode-copilot-github-workspace"}var Ns=require("vscode"),H2=class{constructor(e){this.contentManager=e;this._onDidChangeFile=new Ns.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event}async stat(e){let r=this.contentManager.get(e);if(!r)throw Ns.FileSystemError.FileNotFound(e);let n=await r.content?.then(i=>i?.length)??0;return{ctime:r.ctime??0,mtime:r.ctime??0,size:n,type:r.children?Ns.FileType.Directory:Ns.FileType.File}}readDirectory(e){let r=this.contentManager.get(e);if(!r)throw Ns.FileSystemError.FileNotFound(e);return r.children?.map(n=>[n.name,n.children?Ns.FileType.Directory:Ns.FileType.File])??[]}async readFile(e){let r=this.contentManager.get(e);if(!r)throw Ns.FileSystemError.FileNotFound(e);let n;try{n=await r.content}catch{}return n??new Uint8Array}watch(e,r){return{dispose(){}}}createDirectory(e){throw Ns.FileSystemError.NoPermissions(e)}writeFile(e,r,n){throw Ns.FileSystemError.NoPermissions(e)}delete(e,r){throw Ns.FileSystemError.NoPermissions(e)}rename(e,r,n){throw Ns.FileSystemError.NoPermissions(r)}copy(e,r,n){throw Ns.FileSystemError.NoPermissions(r)}};function iwe(t,e){return Tt.Disposable.from(Tt.workspace.registerFileSystemProvider(IX,new H2(t.get(rp)),{isReadonly:new Tt.MarkdownString(Tt.l10n.t(`This file preview was generated by Copilot and may contain surprises or mistakes.

Ask followup questions to refine it, then press Create Workspace.`))}),Tt.workspace.registerFileSystemProvider(CX,new H2(t.get(rp)),{isReadonly:!0}),Tt.commands.registerCommand("github.copilot.createProject",async r=>{let n=(await Tt.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select as Parent Folder"}))?.[0];if(!n)return;let i=r.baseUri.path,o=await get(n,i),s=[];Tt.window.tabGroups.all.forEach(c=>{c.tabs.forEach(u=>{u.input instanceof Tt.TabInputText&&u.input.uri.scheme==="vscode-copilot-workspace"&&s.push(u)})}),Tt.window.tabGroups.close(s,!0);let a=Tt.Uri.joinPath(n,o);try{await Tt.window.withProgress({location:Tt.ProgressLocation.Notification,cancellable:!0},async(c,u)=>{await Tt.workspace.fs.createDirectory(a);async function l(d,p,f){let m=Tt.Uri.joinPath(a,d,p.name);if(p.children?.length||!UCe(p.name)){c.report({message:Tt.l10n.t("Creating folder {0}...",m.path)}),await Tt.workspace.fs.createDirectory(m);for(let h of p.children??[])await l(rwe.posix.join(d,p.name),h,f)}else{c.report({message:Tt.l10n.t("Creating file {0}...",m.path)});let h=await Tt.workspace.fs.readFile(Tt.Uri.joinPath(f,d,p.name));await Tt.workspace.fs.writeFile(m,Buffer.from(h))}}for(let d of r.value)await l("",d,r.baseUri);Tt.interactive.transferActiveChat(a),t.get(ce).getLogger("newIntent").info("Opening folder: "+a.fsPath),await yet(a),await Tt.commands.executeCommand("vscode.openFolder",a)})}catch(c){let u=`Failed to create workspace: ${o}`;t.get(ce).getLogger("newIntent").error(`${u}
${c.message}`),Tt.window.showErrorMessage(u),await Tt.workspace.fs.delete(a,{recursive:!0})}}))}async function get(t,e){let r=0,n=!0,i=e;for(;n;)try{await Tt.workspace.fs.stat(Tt.Uri.joinPath(t,i)),i=e+"-"+ ++r}catch{n=!1}return i}async function vet(t){try{return await Tt.workspace.fs.stat(t),!0}catch{return!1}}async function yet(t){let e=bet();if(e)if(await vet(e)){let r=await Tt.workspace.fs.readFile(e).then(i=>new nwe.TextDecoder().decode(i)),n=JSON.parse(r);n.push(t.toString()),await Tt.workspace.fs.writeFile(e,Buffer.from(JSON.stringify(n,null,2)))}else await Tt.workspace.fs.writeFile(e,Buffer.from(JSON.stringify([t.toString()],null,2)))}function bet(){let t=Tt.env.appName.indexOf("Insider")>0||Tt.env.appName.indexOf("Code - OSS Dev")>=0?"Code - Insiders":"Code",e=Tt.Uri.file(process.env.HOME||(process.env.USERPROFILE?process.env.USERPROFILE:""));switch(process.platform){case"darwin":return Tt.Uri.joinPath(e,"Library","Application Support",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"linux":return Tt.Uri.joinPath(e,".config",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"win32":return process.env.APPDATA?Tt.Uri.joinPath(Tt.Uri.file(process.env.APPDATA),t,"User","workspaceStorage","aiGeneratedWorkspaces.json"):void 0;default:return}}async function owe(t,e){let r=t.get(_t),n=t.get(Zi),i=t.get(ho),o=t.get(rt),s=t.get($i),a=t.get(e_),c=t.get(vi),u=o.getWorkspaceFolders().map(v=>v.fsPath+"/"),l=o.notebookDocuments.map(v=>v.uri.fsPath),p=(await Promise.all(e.map(v=>i.getWorkspaceSymbols(v)))).flat().map(v=>({name:v.name,kind:v.kind,containerName:v.containerName,filePath:v.location.uri.fsPath,start:v.location.range.start,end:v.location.range.end})),f=r.activeTextEditor?n.getDiagnostics(r.activeTextEditor.document.uri).map(v=>({start:v.range.start,end:v.range.end,message:v.message,severity:v.severity,relatedInformation:v.relatedInformation?.map(_et)})):[],m=r.activeTextEditor?{selections:r.activeTextEditor?.selections.map(v=>({anchor:v.anchor,active:v.active,isReversed:v.isReversed}))??[],documentFilePath:r.activeTextEditor?.document.uri.fsPath??"",visibleRanges:r.activeTextEditor?.visibleRanges.map(v=>({start:v.start,end:v.end}))??[],languageId:r.activeTextEditor?.document.languageId??"javascript"}:void 0,h=s.terminalLastCommand?{commandLine:s.terminalLastCommand.commandLine,cwd:typeof s.terminalLastCommand.cwd=="object"?s.terminalLastCommand.cwd.toString():s.terminalLastCommand.cwd,exitCode:s.terminalLastCommand.exitCode,output:s.terminalLastCommand.output}:void 0;return{workspaceFoldersFilePaths:u,symbols:p,activeFileDiagnostics:f,activeTextEditor:m,debugConsoleOutput:a.consoleOutput,terminalBuffer:s.terminalBuffer,terminalLastCommand:h,terminalSelection:s.terminalSelection,terminalShellType:s.terminalShellType,repoContexts:c.repositories,notebookDocumentFilePaths:l,activeNotebookEditor:void 0}}function _et(t){return{filePath:t.location.uri.fsPath,start:t.location.range.start,end:t.location.range.end,message:t.message}}var wX=re("IConversationFeature"),gE=class{constructor(e,r,n,i,o,s,a,c,u,l,d){this.accessor=e;this.instantionService=r;this.configurationService=i;this.conversationOptions=o;this.chatAgentService=s;this.telemetryService=a;this.copilotTokenNotifier=c;this.embeddingIndex=u;this.devContainerConfigurationService=l;this.gitCommitMessageService=d;this._disposables=new Ht;this._activatedDisposables=new Ht;if(this.logger=n.getLogger("chat"),this._enabled=!1,this._activated=!1,Re.interactive?._version!==1){this.logger.warn("Not activating ConversationFeature- api version mismatch");return}this.registerCopilotTokenListener(),this._disposables.add(Re.authentication.onDidChangeSessions(async p=>{if(!O0(p,this.configurationService))return;let m=await NA(p,this.accessor);this.logger.debug("onDidChangeSessionsHandler",m),m?this.activated=!0:this.activated=!1}))}get enabled(){return this._enabled}set enabled(e){e&&!this.activated&&(this.activated=!0),this._enabled=e,Re.commands.executeCommand("setContext","github.copilot.interactiveSession.disabled",!e)}get activated(){return this._activated}set activated(e){if(this._activated!==e)if(this._activated=e,Re.commands.executeCommand("setContext","github.copilot.activated",e),!e)this._activatedDisposables.clear();else{let r=this.conversationOptions;this._activatedDisposables.add(this.registerProviders()),this._activatedDisposables.add(this.registerCommands(r)),this._activatedDisposables.add(this.registerRelatedInformationProviders()),this.checkVSCodeVersion()&&this._activatedDisposables.add(this.registerParticipants(r))}}checkVSCodeVersion(){return!Re.chat.createChatParticipant||!Re.chat.registerChatVariableResolver?(Re.window.showErrorMessage("VS Code MUST be updated to use Copilot Chat!"),!1):!0}dispose(){this._activated=!1,this._activatedDisposables.dispose(),this._disposables?.dispose()}[Symbol.dispose](){this.dispose()}registerParticipants(e){return this.chatAgentService.register(e)}registerProviders(){let e=new Ht;try{"registerMappedEditsProvider"in Re.chat&&e.add(Re.chat.registerMappedEditsProvider("*",new K6)),"registerNewSymbolNamesProvider"in Re.languages&&e.add(Re.languages.registerNewSymbolNamesProvider({language:"*"},this.instantionService.createInstance(gu))),e.add(Re.workspace.registerAITextSearchProvider("file",new H6(this.accessor)))}catch(r){this.logger.error("Registration of interactive providers failed:",r.toString())}return e}registerCommands(e){let r=new Ht,n=o=>"body"in o&&(o.body instanceof Re.MarkdownString||typeof o.body=="string"),i=o=>"range"in o&&o.range instanceof Re.Range;return[Re.commands.registerCommand("github.copilot.interactiveSession.feedback",async()=>Re.env.openExternal(Re.Uri.parse(r6()))),Re.commands.registerCommand("github.copilot.ghpr.applySuggestion",async(o,s)=>{if(!n(o)||!i(s))return;let a=o.body instanceof Re.MarkdownString?o.body.value:o.body;await Re.commands.executeCommand("vscode.editorChat.start",{initialRange:s.range,message:a,autoSend:!0})}),Re.commands.registerCommand("github.copilot.debug.workbenchState",async()=>{let o=await Re.window.showInputBox({prompt:"Enter a comma-separated list of symbol queries. Can be left blank if not using WorkspaceSymbols"}),s=await Re.window.showInputBox({prompt:"Enter a file name - .state.json will be appended as the extension",value:"workspaceState"});if(!s)return;let a=await owe(this.accessor,o?.split(",")??[]),c=Re.workspace.workspaceFolders?.[0].uri;if(!c)return;let u=Re.Uri.joinPath(c,`${s}.state.json`),l=JSON.stringify(a,null,2);l=l.replace(new RegExp(`${c.fsPath}/`,"g"),"./"),Re.workspace.fs.writeFile(u,Buffer.from(l))}),Re.commands.registerCommand("github.copilot.terminal.explainTerminalSelection",async()=>this.triggerTerminalChat({query:`/${eb.intentName} #terminalSelection`})),Re.commands.registerCommand("github.copilot.terminal.explainTerminalSelectionContextMenu",()=>Re.commands.executeCommand("github.copilot.terminal.explainTerminalSelection")),Re.commands.registerCommand("github.copilot.terminal.explainTerminalLastCommand",async()=>this.triggerTerminalChat({query:`/${eb.intentName} #terminalLastCommand`})),Re.commands.registerCommand("github.copilot.terminal.generateCommitMessage",async()=>{let o=Re.workspace.workspaceFolders;if(!o?.length)return;let s=o.length===1?o[0].uri:await Re.window.showWorkspaceFolderPick().then(u=>u?.uri);if(!s)return;let a=this.gitCommitMessageService.getRepository(s);if(!a)return;let c=await this.gitCommitMessageService.generateCommitMessage(a,qr.None);if(c){let l=`git commit -m "${c.replace(/"/g,'\\"').replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}"`;Re.window.activeTerminal?.sendText(l,!1)}}),Re.commands.registerCommand("github.copilot.git.generateCommitMessage",async(o,s,a)=>{let c=this.gitCommitMessageService.getRepository(o);if(!c)return;let u=await this.gitCommitMessageService.generateCommitMessage(c,a);u&&(c.inputBox.value=u)}),Re.commands.registerCommand("github.copilot.devcontainer.generateDevContainerConfig",async(o,s=new Re.CancellationTokenSource().token)=>this.devContainerConfigurationService.generateConfiguration(o,s)),FCe(this.accessor),RCe(this.telemetryService),dCe(o=>this.instantionService.createInstance(uE,o)),SCe(this.accessor),this.registerTerminalQuickFixProviders(),xet(this.accessor,e),iwe(this.accessor,e),Tet(this.accessor),sCe(this.accessor),Eet(),CCe(this.accessor)].forEach(o=>r.add(o)),r}async triggerTerminalChat(e){let r=this.configurationService.getConfig(Ne.TerminalChatLocation),n;switch(r){case"quickChat":n="workbench.action.quickchat.toggle",e.query=`@${$b} `+e.query;break;case"terminal":n="workbench.action.terminal.chat.start";break;case"chatView":default:n="workbench.action.chat.open",e.query=`@${$b} `+e.query;break}await Re.commands.executeCommand(n,e)}registerRelatedInformationProviders(){let e=new Ht;return[Re.ai.registerRelatedInformationProvider(Re.RelatedInformationType.CommandInformation,this.embeddingIndex.commandIdIndex),Re.ai.registerRelatedInformationProvider(Re.RelatedInformationType.SettingInformation,this.embeddingIndex.settingsIndex)].forEach(r=>e.add(r)),e}registerCopilotTokenListener(){this._disposables.add(this.copilotTokenNotifier.onCopilotToken(e=>{this.logger.info(`copilot token chat_enabled: ${e.envelope.chat_enabled}`),this.enabled=e.envelope.chat_enabled??!1}))}registerTerminalQuickFixProviders(){let e=new Ht;return e.add(Re.window.registerTerminalQuickFixProvider("copilot-chat.fixWithCopilot",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.explainTerminalLastCommand",title:Re.l10n.t("Explain using Copilot")}]:[]})),e.add(Re.window.registerTerminalQuickFixProvider("copilot-chat.generateCommitMessage",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.generateCommitMessage",title:Re.l10n.t("Generate Commit Message")}]:[]})),e}};gE=we([de(0,Ct),de(1,ua),de(2,ce),de(3,Pe),de(4,ki),de(5,OA),de(6,ke),de(7,po),de(8,Tm),de(9,dP),de(10,IP)],gE);function xet(t,e){let r=t.get(Pe);return Re.commands.registerCommand("github.copilot.newNotebook",async n=>{let i=r.getConfig(Ne.NotebookIterativeImproving);await Re.window.withProgress({location:Re.ProgressLocation.Notification},async o=>{let s=new Re.NotebookData([]);s.metadata={custom:{cells:[],metadata:{orig_nbformat:4},nbformat:4,nbformat_minor:2}};let a=await Re.workspace.openNotebookDocument("jupyter-notebook",s),c=await Re.window.showNotebookDocument(a);o.report({message:Re.l10n.t("Generating notebook...")});let u=n.outline.description,l=n.outline.sections,d=await t.get(Ge).getUserRequestEndpoint(2);for(let p of l){let f=c.notebook.getCells().filter(x=>x.kind===Re.NotebookCellKind.Code).map(x=>x.document.getText()).join(`
`),m=new Re.CancellationTokenSource;o.report({message:Re.l10n.t('Generating section "{0}"...',p.title)});let h=await ECe(t,d,e,n.turn,u,p,f,m.token);if(!h)return;h=h.trim();let g=/```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/.exec(h);if(g&&g.length>2&&(h=g[2]),i){o.report({message:Re.l10n.t('Improving code for section "{0}"...',p.title)});let x=await TCe(t,d,e,u,p,f,h,m.token);if(!x)return;h=x}let v=new Re.NotebookCellData(Re.NotebookCellKind.Markup,`# ${p.title}
${p.content}`,"markdown"),b=new Re.NotebookCellData(Re.NotebookCellKind.Code,h,"python"),y=Re.NotebookEdit.insertCells(a.cellCount,[v,b]),S=new Re.WorkspaceEdit;S.set(a.uri,[y]),await Re.workspace.applyEdit(S),c.revealRange(new Re.NotebookRange(a.cellCount-1,a.cellCount),Re.NotebookEditorRevealType.Default),c.selection=new Re.NotebookRange(a.cellCount-1,a.cellCount)}o.report({increment:100})})})}function Eet(){return Re.commands.registerCommand("github.copilot.executeSearch",async t=>{let e=t.filesToExclude.length>0||t.filesToInclude.length>0;Re.commands.executeCommand("workbench.view.search.focus").then(()=>Re.commands.executeCommand("workbench.action.search.toggleQueryDetails",{show:e})),Re.commands.executeCommand("workbench.action.findInFiles",t)})}function Tet(t){return new W6(t)}var o8=W(require("vscode"));var RX="---------------------------------",vE=class{constructor(e){this.accessor=e}async _canReport(){return!(!this.accessor.get(Pe).getConfig(Ne.DebugReportFeedback)||!(await this.accessor.get(Rt).getCopilotToken(this.accessor))?.isInternal)}async reportInline(e,r,n){if(!await this._canReport())return;let i=e.getLatestTurn();if(!i)return;let o=r.intent?this._embedCodeblock("INTENT",JSON.stringify(r.intent,null,"	")):"",s=this._embedCodeblock("CONTEXT",JSON.stringify({document:r.document.uri.toString(),fileIndentInfo:r.fileIndentInfo,language:r.language,wholeRange:r.wholeRange,selection:r.selection},null,"	")),a="",c=i.chatMessages;if(c&&c.length>0){let f=c.map(m=>this._embedCodeblock(m.role.toUpperCase(),m.content)).join(`
`);a=`	${RX}
${this._headerSeparator()}PROMPT MESSAGES:
${f}`}else a=this._embedCodeblock(i.request.type.toUpperCase(),i.request.message);let u=this._embedCodeblock("ASSISTANT",i.response?.message||""),l=this._embedCodeblock("Parsed response",JSON.stringify(n,null,"	")),p=`
<details><summary>Prompt Details</summary>
<p>

${`${o}
${s}
${a}
${u}
${l}
`}

</p>
</details>
`;await this._reportIssue("Feedback for inline chat",p)}async reportChat(e){if(!await this._canReport())return;let r="",n=e.chatMessages;if(n&&n.length>0){let c=n.map(u=>this._embedCodeblock(u.role.toUpperCase(),u.content)).join(`
`);r=`	${RX}
${this._headerSeparator()}PROMPT MESSAGES:
${c}`}else r=this._embedCodeblock(e.request.type.toUpperCase(),e.request.message);let i=e.intentInvocation?.intent?this._embedCodeblock("INTENT",`[${e.intentInvocation.intent.id}] ${e.intentInvocation.intent.description}`):"",o=this._embedCodeblock("ASSISTANT",e.response?.message||""),a=`
<details><summary>Prompt Details</summary>
<p>

${`${i}
${r}
${o}
`}

</p>
</details>`;await this._reportIssue("Feedback for sidebar chat",a)}_embedCodeblock(e,r){let n=this._bodySeparator()+r.split(`
`).join(`
${this._bodySeparator()}`);return`	${RX}
${this._headerSeparator()}${e}:
${n}`}_headerSeparator(){return"	"}_bodySeparator(){return"		"}async _reportIssue(e,r){await o8.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:Gy,issueTitle:e,data:r,issueBody:"",uri:o8.Uri.parse("https://github.com/microsoft/vscode-copilot")})}};vE=we([de(0,Ct)],vE);var t0=W(require("vscode"));var yE=W(st()),bE=W(require("vscode"));var s8=class extends Y{render(){let e=[],r=[];for(let n of this.props.messages)n instanceof bE.LanguageModelChatSystemMessage?e.push(n.content):n instanceof bE.LanguageModelChatAssistantMessage?r.push(vscpp(yE.AssistantMessage,null,n.content)):n instanceof bE.LanguageModelChatUserMessage&&r.push(vscpp(yE.UserMessage,{name:n.name},n.content));return vscpp(vscppf,null,vscpp(yE.SystemMessage,null,this.props.noSafety?e:vscpp(vscppf,null,vscpp(di,null),vscpp(Xn,null),vscpp("br",null),e.join(`
`))),r)}};async function swe(t){let e=t.get(ua),r=t.get(Pe),n=t.get(Ge),i=t.get(ce).getLogger("registerChatResponseProvider"),{extensionMode:o,subscriptions:s}=t.get(Kr),a=new Ht;if(s.push(a),o===ls.Test){i.warn("Chat response providers are not available in test mode");return}let c=["gpt-3.5-turbo","gpt-4"];function u(d){return`copilot-${d}`}let l=await Sc(r);if(!l){i.error("Auth token not present when we expected it to be");return}for(let d of c){let p=await n.getUserRequestEndpoint(3,void 0,d);if(a.isDisposed)return;let f=u(d),m=e.createInstance(j2,p);a.add(t0.chat.registerChatResponseProvider(f,m,{name:d,version:d,tokens:PX.defaultTokenLimit,auth:{label:l.account.label}}))}}var j2=class extends Ur{constructor(r,n,i,o,s,a){super();this._endpoint=r;this._accessor=n;this._expService=i;this._telemetryService=o;this._chatMLFetcher=s;this._tokenizer=a;this._onDidReceiveLanguageModelResponse2=this._register(new Br);this.onDidReceiveLanguageModelResponse2=this._onDidReceiveLanguageModelResponse2.event;this._register(this._chatMLFetcher.onDidMakeChatMLRequest(({model:c,source:u,tokenCount:l})=>{c===this._endpoint.model&&this._onDidReceiveLanguageModelResponse2.fire({extensionId:u?.extensionId??Gy,participant:u?.agent,tokenCount:l})}))}async provideLanguageModelResponse2(r,n,i,o,s){let a=t0.extensions.getExtension(i,!0);if(!a||typeof a.packageJSON.version!="string")throw new Error("Invalid extension information");let c=a.packageJSON.version,u=await this._expService.getTreatmentVariableAsync("vscode","copilotchat.languageModelControlList"),l=PX.extractCustomTokenLimit(u??"",i),{messages:d,tokenCount:p}=await new nt(this._endpoint,s8,{noSafety:!1,messages:r},this._accessor.get(ye),this._accessor).render();if(this._telemetryService.sendMSFTTelemetryEvent("languagemodelrequest",{extensionId:i,extensionVersion:c,model:this._endpoint.model},{tokenCount:p,tokenLimit:l}),p>Math.min(this._endpoint.modelMaxPromptTokens,l))throw new Error("Message exceeds token limit.");let f=new Proxy(this._endpoint,{get:function(b,y,S){return y==="getExtraHeaders"?function(){return{...b.getExtraHeaders?.()??{},"x-onbehalf-extension-id":`${i}/${c}`}}:Reflect.get(b,y,S)}}),m=async(b,y,S)=>{o.report({part:S.text,index:y})},h=AX.options[this._endpoint.model].convert(n),g={messageSource:`api.${i}`},v=await this._chatMLFetcher.fetchMany(d,m,s,3,f,{extensionId:i},h,g,{intent:!0});if(v.type!=="success")throw new Error(v.reason)}async provideTokenCount(r){if(typeof r=="string")return this._tokenizer.tokenLength(r);{let n;return r instanceof t0.LanguageModelChatUserMessage?n={role:"user",content:r.content,name:r.name}:r instanceof t0.LanguageModelChatAssistantMessage?n={role:"assistant",content:r.content,name:r.name}:n={role:"system",content:r.content},this._tokenizer.countMessageTokens(n)}}};j2=we([de(1,Ct),de(2,Yr),de(3,ke),de(4,Qt),de(5,ye)],j2);var PX;(r=>{r.defaultTokenLimit=4e3;function e(n,i){let o=n.indexOf(i);if(o<0)return 4e3;let s=o+i.length,a=n.indexOf(",",s);a<0&&(a=n.length);let c=Number(n.substring(s,a));return isNaN(c)?4e3:c*1e3}r.extractCustomTokenLimit=e})(PX||={});function Iet(...t){return e=>t.some(r=>r(e))}var AX=class t{constructor(e){this._description=e}static{this._defaultDesc={stop:Iet(nA,xT),temperature:Ub,max_tokens:Ub,frequency_penalty:Ub,presence_penalty:Ub}}static{this.options={"gpt-3.5-turbo":new t({...this._defaultDesc}),"gpt-4":new t({...this._defaultDesc}),"copilot-preview-gpt35-centralus":new t({...this._defaultDesc}),"copilot-preview-gpt4-centralus":new t({...this._defaultDesc}),"gpt-4-0125-adaf089e":new t({...this._defaultDesc}),"code-llama":new t({})}}convert(e){let r={};for(let n in this._description){let i=this._description[n],o=e[n];o!=null&&i(o)&&(r[n]=o)}return r}};var ywe=require("crypto"),NX=W(require("path")),OX=W(require("util")),Ot=require("vscode");var a8=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.newText=[];this.tokens=[];this.text_offset=[]}append(e){e.text&&(this.text.push(e.text),this.newText.push(e.text)),e.delta?.content&&(this.text.push(e.delta.content),this.newText.push(e.delta.content)),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[]))}flush(){let e=this.newText.join("");return this.newText=[],e}};function wet(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var c8=class t{constructor(e,r,n,i,o,s){this.telemetryService=r;this.expectedNumChoices=n;this.response=i;this.body=o;this.cancellationToken=s;this.requestId=h2(this.response);this.stats=new kX(this.expectedNumChoices);this.solutions={};this.logger=e.getLogger("streamChoices")}static async create(e,r,n,i,o){let s=await i.body();return s.setEncoding("utf8"),new t(e,r,n,i,s,o)}async*processSSE(e=async()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),this.logger.info(`request done: requestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),this.logger.debug(`request stats: ${this.stats}`)}}async*processSSEInner(e){let r="",n=!1;e:for await(let i of this.body){if(this.maybeCancel("after awaiting body chunk"))return;this.logger.debug("chunk",i.toString());let[o,s]=wet(r+i.toString());r=s;let a=!1;for(let c of o){let u=c.slice(5).trim();if(u==="[DONE]"){yield*this.finishSolutions();return}let l;try{l=JSON.parse(u)}catch{this.logger.error(`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,c),Wf(this.telemetryService,`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,c);continue}if(l.copilot_errors){yield{solution:new a8,finishOffset:void 0,errors:l.copilot_errors,reason:"agent-error",requestId:this.requestId,index:0};return}if(!l.choices){l.copilot_references||(l.error!==void 0?(this.logger.error(`Error in response for request id ${this.requestId.headerRequestId}:`,l.error.message),Wf(this.telemetryService,`Error in response for request id ${this.requestId.headerRequestId}:`,l.error.message)):(this.logger.error(`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`),Wf(this.telemetryService,`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`)));continue}if(this.requestId.created===0&&(this.requestId=h2(this.response,l),this.requestId.created===0&&l.choices?.length&&(this.logger.error(`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId),Wf(this.telemetryService,`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId))),this.allSolutionsDone())break e;for(let d=0;d<l.choices.length;d++){let p=l.choices[d];if(p.delta?.function_call){a=!0;break}this.logger.debug("choice",p),this.stats.add(p.index),p.index in this.solutions||(this.solutions[p.index]=new a8);let f=this.solutions[p.index];if(f===null)continue;let m,h=async(v,b)=>(v&&(!Array.isArray(v)||!v.every(y=>ATe(y)))&&(v=void 0),m=await e(f.text.join(""),p.index,{text:f.flush(),codeVulnAnnotations:v,copilotReferences:b}),m!==void 0&&(n=!0),this.maybeCancel("after awaiting finishedCb"));if(p.delta?.annotations?.CodeVulnerability){if(await h()||!n&&(f.append(p),await h(p.delta.annotations.CodeVulnerability)))continue}else if(p.delta?.role==="function"){if(p.delta.content)try{let v=JSON.parse(p.delta.content);if(Array.isArray(v)&&await h(void 0,v))continue}catch(v){this.logger.error(`Error parsing function references: ${JSON.stringify(v)}`)}}else if(f.append(p),await h())continue;if(p.finish_reason||m!==void 0){if(this.stats.markYielded(p.index),yield{solution:f,errors:[],finishOffset:m,reason:p.finish_reason??"client-trimmed",filterReason:Ret(p),requestId:this.requestId,index:p.index},this.maybeCancel("after yielding finished choice"))return;a||(this.solutions[p.index]=null)}}}}for(let[i,o]of Object.entries(this.solutions)){let s=Number(i);if(o!==null&&(this.stats.markYielded(s),yield{solution:o,errors:[],finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0&&!n)try{let i=JSON.parse(r);i.error!==void 0&&(this.logger.error(`Error in response: ${i.error.message}`,i.error),Wf(this.telemetryService,`Error in response: ${i.error.message}`,i.error))}catch{this.logger.error(`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`),Wf(this.telemetryService,`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`)}}async*finishSolutions(){for(let[e,r]of Object.entries(this.solutions)){let n=Number(e);if(r!==null&&(this.stats.markYielded(n),yield{solution:r,errors:[],finishOffset:void 0,reason:"DONE",requestId:this.requestId,index:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(this.logger.debug("Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body.destroy()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length===this.expectedNumChoices&&e.every(r=>r===null)}};function awe(t){let r={text:t.text.join(""),tokens:t.text};if(t.logprobs.length===0)return r;let n=t.logprobs.reduce((a,c)=>a.concat(c),[]),i=t.top_logprobs.reduce((a,c)=>a.concat(c),[]),o=t.text_offset.reduce((a,c)=>a.concat(c),[]),s=t.tokens.reduce((a,c)=>a.concat(c),[]);return{...r,logprobs:{token_logprobs:n,top_logprobs:i,text_offset:o,tokens:s}}}function Ret(t){if(t.finish_reason!=="content_filter")return;if(!!t.delta?.annotations?.TextCopyright)return"snippy";if(t.content_filter_results){for(let r of Object.keys(t.content_filter_results))if(t.content_filter_results[r]?.filtered)return r}}var kX=class{constructor(e){this.choices=new Map;for(let r=0;r<e;r++)this.choices.set(r,new G2)}add(e){let r=this.choices.get(e)??new G2;r.increment(),this.choices.set(e,r)}markYielded(e){let r=this.choices.get(e)??new G2;r.markYielded(),this.choices.set(e,r)}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},G2=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};function Wf(t,e,r){let n=[e,r],i=n.length>0?JSON.stringify(n):"no msg",o=Er.createAndMarkAsIssued({context:"fetch",level:AT[3],message:i});t.sendRestrictedGHTelemetryErrorEvent("log",o.properties,o.measurements);let s=Er.createAndMarkAsIssued({context:"fetch",level:AT[3],message:"[redacted]"});t.sendGHTelemetryErrorEvent("log",s.properties,s.measurements)}function DX(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});t.sendRestrictedGHTelemetryEvent("engine.messages",n.properties,n.measurements)}function Aet(t,e,r,n,i,o,s,a,c,u){return DX(t,[e],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:s,filterReason:a,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:c,errors:u}}function cwe(t,e,r,n){let i=e.getLogger("streamMessages"),o=r.solution.text.join(""),s=!1;r.finishOffset!==void 0&&(i.debug(`message ${r.index}: early finish at offset ${r.finishOffset}`),o=o.substring(0,r.finishOffset),s=!0),i.info(`message ${r.index} returned. finish reason: [${r.reason}]`),i.debug(`message ${r.index} details: finishOffset: [${r.finishOffset}] completionId: [{${r.requestId.completionId}}] created: [{${r.requestId.created}}]`);let a=awe(r.solution),c={role:"assistant",content:o};return Aet(t,c,a,r.index,r.requestId,s,r.reason,r.filterReason,n,r.errors)}function Pet(t){let e=t.get(Pe),r=t.get(Kr),n=e.getConfig(Ne.DebugTestOverrideProxyUrl);return r.extensionMode===ls.Test&&n.length>0?n:e.getConfig(Ne.DebugChatOverrideProxyUrl)??e.getConfig(Ne.DebugOverrideProxyUrl)}function ket(t,e){let r=Pet(t);return r.length===0?(r="https://api.githubcopilot.com",`${r}${e}`):r}function uwe(t){return ket(t,"/chat/completions")}async function lwe(t,e){let n=(await t.get(Rt).getCopilotToken(t)).isInternal?t.get(Pe).getConfig(Ne.DebugOverrideChatMaxTokenNum):0;if(n>0)return n;let o=await t.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.panelGpt4Context",!0);switch(e){case"gpt-3.5-turbo":return 7168;case"gpt-4":return o||3072;default:return 7168}}async function Det(t,e,r,n,i,o,s){let c=(await c8.create(e,t,n,r,s)).processSSE(i);return Ru.map(c,l=>{let d=l.reason??"client-trimmed",p=o.extendedBy({completionChoiceFinishReason:d});return t.sendGHTelemetryEvent("completion.finishReason",p.properties,p.measurements),cwe(t,e,l,o)})}var _E=class{constructor(e,r,n,i){this.url=e;this.disableSnippy=i;this._maxTokens=n,this.model=r}get modelMaxPromptTokens(){return this._maxTokens}interceptBody(e){e&&this.disableSnippy&&(e.snippy={enabled:!1},Object.keys(e).forEach(r=>{r.startsWith("intent")&&delete e[r]}))}getExtraHeaders(){let e={};return this.disableSnippy&&(e["Editor-Plugin-Version"]="simulation-tests-plugin/2",e["Editor-Version"]="simulation-tests-editor/1.85"),e}async processResponseFromChatEndpoint(e,r,n,i,o,s,a){return Det(e,r,n,i,o,s,a)}};var r0=class{},Net=30*1e3;function dwe(t,e,r,n,i,o,s,a,c,u){let l={Authorization:`Bearer ${o}`,"X-Request-Id":a,"X-GitHub-Api-Version":"2023-07-07","Openai-Organization":"github-copilot","Copilot-Integration-Id":e.isProduction()?"vscode-chat":"vscode-chat-dev","VScode-SessionId":e.sessionId,"VScode-MachineId":e.machineId,...e.getEditorVersionHeaders(),...i.getExtraHeaders?i.getExtraHeaders():{}};i.interceptBody&&i.interceptBody(c),s&&(l["OpenAI-Intent"]=s);let d={method:n,headers:l,json:c,timeout:Net},p=t;if(u){let m=p.makeAbortController();u.onCancellationRequested(()=>{r.sendGHTelemetryEvent("networking.cancelRequest",{headerRequestId:a}),m.abort()}),d.signal=m.signal}return p.fetch(i.url,d).catch(m=>{if(m.code==="ECONNRESET"||m.code==="ETIMEDOUT"||m.code==="ERR_HTTP2_INVALID_SESSION"||m.message==="ERR_HTTP2_GOAWAY_SESSION")return r.sendGHTelemetryEvent("networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(i.url,d));throw p.isAbortError(m)?new la:m})}function n0(t,e,r,n,i,o,s,a,c){return dwe(t,e,r,"POST",n,i,o,s,a,c)}function pwe(t,e,r,n,i,o,s,a,c){return dwe(t,e,r,"GET",n,i,o,s,a,c)}var fwe=re("headerContributors"),u8=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let r=this.contributors.indexOf(e);r!==-1&&this.contributors.splice(r,1)}contributeHeaders(e){for(let r of this.contributors)r.contributeHeaderValues(e)}size(){return this.contributors.length}};var l8=re("IPromptVariablesService");var V2=new Map,p8=class{constructor(e){this.label=e;this.iconPath=new Ot.ThemeIcon("lock")}};async function bwe(t){let e=t.get(Kr);e.subscriptions.push(new Ot.Disposable(()=>V2.forEach(r=>r.dispose()))),e.subscriptions.push(Ot.commands.registerCommand(_we,async()=>{let r=Ot.window.createQuickPick();r.placeholder=Ot.l10n.t("Select a knowledge base"),r.busy=!0,r.show(),r.items=await vwe(t),r.busy=!1;let n=await new Promise((i,o)=>{r.canSelectMany=!1;let s=!1;r.onDidAccept(async()=>{r.selectedItems[0]instanceof p8?(r.busy=!0,await t.get(Rt).getPermissiveGitHubToken({forceNewSession:!0}),s=!0,z2=!1,nb?.clear(),r.items=await vwe(t),r.busy=!1,r.show()):(i(r.selectedItems[0]),r.hide())}),r.onDidHide(()=>{s||i(void 0)})});return r.dispose(),n?.insertText})),mwe(t),t.get(Rt).githubTokenChangedEventEmitter.on(OF,()=>{mwe(t)})}var _we="github.copilot.chat.selectKnowledgeBase",MX="github",Let=["default","githubissue"],d8;async function mwe(t){return d8||(d8=Oet(t)),d8.finally(()=>d8=void 0)}async function Oet(t){let e=t.get(ce).getLogger("RemoteAgents");if(!t.get(Pe).getConfig(Ne.EnableRemoteAgents))return;let n=t.get(Pe).getConfig(Ne.AgentsEndpointUrl),i=new Set(V2.keys());try{let o=t.get(Rt),s=await o.getAnyGitHubToken();if(!s){e.warn("Unable to fetch remote agents because user is not signed in.");return}let c=await(await t.get(Sr).fetch(`${n}/agents`,{method:"GET",headers:{Authorization:OX.format("Bearer %s",s),...t.get(mt).getEditorVersionHeaders()}})).text(),u;try{if(u=JSON.parse(c).agents,!Array.isArray(u))throw new Error("Expected 'agents' to be an array")}catch(d){e.warn(`Invalid remote agent response: ${c} (${d})`);return}for(let d of u)Let.includes(d.slug.toLowerCase())||i.delete(d.slug)||V2.set(d.slug,hwe(t,e,d,n));(await o.getCopilotToken(t)).sku?.startsWith("copilot_enterprise")&&await t.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.githubPlatformAgent",!0)&&hwe(t,e,null,n)}catch(o){e.warn(`Failed to load remote slash commands: ${o}`)}for(let o of i)V2.get(o).dispose(),V2.delete(o)}function Met(t,e){let r=[];for(let n of e.history)if(n.participant===t&&(n instanceof Ot.ChatRequestTurn&&r.push({role:"user",content:n.prompt}),n instanceof Ot.ChatResponseTurn)){let i=n.result.metadata?.copilot_references,o=n.response.map(s=>s instanceof Ot.ChatResponseMarkdownPart?s.value.value:"content"in s?s.content:null).filter(s=>!!s).join("");r.push({role:"assistant",content:o,...i?{copilot_references:i}:void 0})}return r}async function Fet(t,e,r,n){let i=[],o=[],s=!1;for(let a of n){let c=a.values.find(u=>u.value instanceof Ji)?.value;if(c instanceof Ji){if(await r.isCopilotIgnored(c)){s=!0;continue}let u=await t.openTextDocument(c);i.push({type:"client.file",data:{language:u.languageId,content:u.getText()},id:NX.basename(c.path)}),o.push({variableName:a.name,value:c})}else if(a.name==="selection"){let{activeTextEditor:u}=e;if(!u)throw new Error(Ot.l10n.t({message:"Please open a text editor to use the `#selection` variable.",comment:"{Locked='`#selection`'}"}));if(await r.isCopilotIgnored(u.document.uri)){s=!0;continue}let l=u.selection.start.line,d=u.selection.isEmpty?new Ot.Range(new Ot.Position(l,0),new Ot.Position(l+1,0)):u.selection;i.push({type:"client.selection",data:{start:{line:d.start.line,col:d.start.character},end:{line:d.end.line,col:d.end.character},content:u.document.getText(d)},id:NX.basename(u.document.uri.path)}),o.push({variableName:a.name,value:new Ot.Location(u.document.uri,d)})}}return{clientReferences:i,vscodeReferences:o,hasIgnoredFiles:s}}function Uet(t){let e;for(let r of t.history)if(r instanceof Ot.ChatResponseTurn){let n=r.result.metadata?.sessionId;if(typeof n=="string"){e=n;break}}return e??cn()}function hwe(t,e,r,n){let i=`github.copilot-dynamic.${r?.slug??"platform"}`,o=r?.slug??MX,s=r?.description??"Get answers grounded in web search and your enterprise's knowledge bases",a="GitHub",c=Ot.chat.createDynamicChatParticipant(i,o,s,async(u,l,d,p)=>{let f=Uet(l),h={sessionId:f,responseId:""};try{let g=new _E(r?`${n}/agents/${r.slug}?chat`:`${n}/agents/chat`,"gpt-3.5-turbo",4096),b=await t.get(l8).resolveVariablesInPrompt(u.prompt,u.variables),y=[],{copilot_skills:S,copilot_references:x}=await qet(t,o,u);x&&y.push(...x);let T=!1;try{let q=await Fet(t.get(rt),t.get(_t),t.get(Oe),[...u.variables]);T=q.hasIgnoredFiles,q.clientReferences&&y.push(...q.clientReferences);for(let O of q.vscodeReferences)d.reference(O)}catch(q){return q instanceof Error&&q.message.includes("File seems to be binary and cannot be opened as text")?(d.markdown(Ot.l10n.t("Sorry, binary files are not currently supported.")),{metadata:h}):{errorDetails:{message:q.message},metadata:h}}let L=new Map,M=await t.get(Qt).fetchMany([...Met(i,l),{role:"user",content:b.message,...y.length?{copilot_references:y}:void 0}],async(q,O,Z)=>{if(Z.copilotReferences){let z=(D,E)=>{if(!L.has(E)){let k=new URL(E).hostname==="github.com"?new Ot.ThemeIcon("github"):void 0;d.reference(Ji.parse(E),k),L.set(E,D)}};for(let D of Z.copilotReferences)Array.isArray(D.data.results)?D.data.results.forEach(E=>{z(D,E.url)}):"url"in D.data&&typeof D.data.url=="string"&&z(D,D.data.url)}d.markdown(Z.text)},p,2,g,void 0,{secretKey:await t.get(Rt).getAnyGitHubToken(),copilot_thread_id:f,...S?{copilot_skills:S}:void 0},{messageSource:`serverAgent.${r?r.slug:"platform"}`});if(h.copilot_references=[...new Set(L.values()).values()],M.type==="success"&&T&&d.markdown(Ot.l10n.t(RP)),M.type!=="success"){if(e.warn(`Bad response from /agents/${o}: ${M.type} ${M.reason}`),M.reason.includes("400 no docs found"))return{errorDetails:{message:"No docs found"},metadata:h};if(M.type==="agent_unauthorized"){d.markdown(Ot.l10n.t("Please authorize usage of this agent and resend your question."));let q=Ji.parse(M.authorizationUrl),O=new URL(M.authorizationUrl);d.button({command:"vscode.open",title:Ot.l10n.t("Authorize on {0}",O.hostname),arguments:[q]})}else return M.type==="agent_failed_dependency"?{errorDetails:{message:Ot.l10n.t("Sorry, an error occurred: {0}",M.reason)},metadata:h}:{errorDetails:{message:M.reason},metadata:h}}return{metadata:h}}catch(g){return e.warn(`/agents/${o} failed: ${g}`),{metadata:h}}});return c.fullName=a,c.iconPath=r?Ji.parse(r.avatar_url):new Ot.ThemeIcon("github"),c.participantVariableProvider={triggerCharacters:["#"],provider:{async provideCompletionItems(u,l){return(await Het(t,o,u,e,l)).map(p=>{let f=new Ot.ChatCompletionItem("#"+p.name,[{value:p.insertText,level:Ot.ChatVariableLevel.Full,description:p.description,kind:p.kind}]);return f.command=p.command,f.detail=p.description,f})}}},c}async function Bet(t,e){return t.get(Sr).fetch("https://api.github.com/user/knowledge-bases",{method:"GET",headers:{Authorization:OX.format("Bearer %s",e),...t.get(mt).getEditorVersionHeaders()}})}var nb=null,z2=!1;async function xwe(t){if(nb?.size)return{knowledgeBases:[...nb.values()],organizationsMissingSSO:z2};let e=await t.get(Rt).getPermissiveGitHubToken({silent:!0});if(!e)return{knowledgeBases:[],organizationsMissingSSO:!0};let r=await Bet(t,e),n=await r.text();r.headers.get("X-GitHub-SSO")&&r.headers.get("X-GitHub-SSO")?.split("partial-results; organizations=")[1]&&(z2=!0);try{let i=JSON.parse(n);nb=new Map;let o=i.map(s=>({label:s.name,organization:s.owner.login,iconPath:new Ot.ThemeIcon("github"),insertText:s.name.replaceAll(" ","-"),name:s.name,description:s.description,type:"github.knowledge-base",id:(0,ywe.randomUUID)(),data:{type:"knowledge-base",id:s.id}}));for(let s of o)nb.set(s.name.replaceAll(" ","-"),s);return{knowledgeBases:[...nb.values()],organizationsMissingSSO:z2}}catch(i){return console.error(i),{knowledgeBases:[],organizationsMissingSSO:z2}}}var gwe={web:"bing-search",docs:"kb-search"},LX="kb:";async function qet(t,e,r){if(e===MX){let n=new Set,i=new Set;for(let o of r.variables)if(gwe[o.name])n.add(gwe[o.name]);else if(o.name.startsWith(LX)){n.add("kb-search"),await xwe(t);let s=nb?.get(o.name.slice(LX.length));s&&i.add(s)}return{copilot_skills:[...n],copilot_references:[...i]}}return{copilot_skills:[]}}async function vwe(t){let{knowledgeBases:e,organizationsMissingSSO:r}=await xwe(t),n=[];if(r){let o=Ot.l10n.t("Single-sign on to see knowledge bases from additional organizations");n.push(new p8(o)),n.push({kind:Ot.QuickPickItemKind.Separator,label:""})}let i=new Map;for(let o of e){let s=o.organization;i.has(s)||i.set(s,[]),i.get(s)?.push(o)}for(let o of[...i.keys()].sort()){let s=i.get(o);s?.length&&(n.push({kind:Ot.QuickPickItemKind.Separator,label:o}),n.push(...s.sort((a,c)=>a.label.localeCompare(c.label))))}return n}async function Het(t,e,r,n,i){if(e===MX)return[{name:"web",insertText:"#web",description:"Search Bing for real-time context",kind:"bing-search"},{name:"kb",insertText:`#${LX}:`,description:"Search your enterprises' knowledge bases",kind:"kb-search",command:{title:"",command:_we}}];let a={url:`${t.get(Pe).getConfig(Ne.AgentsEndpointUrl)}/agents/autocomplete`,modelMaxPromptTokens:0};r.startsWith("#")&&(r=r.substring(1));let u=await t.get(Rt).getAnyGitHubToken(),d=await(await n0(t.get(Sr),t.get(mt),t.get(ke),a,u??"",void 0,cn(),{agents:[e],query:r},i)).text();try{let p=JSON.parse(d);if(p===null)return[];if(!Array.isArray(p))throw new Error("Expected array");return p.map(f=>({name:f.metadata.display_name,kind:"github.docset",description:"",insertText:`#${f.metadata.display_name}`}))}catch(p){return n.warn(`Invalid autocomplete response (${p.toString()}): ${d}`),[]}}var m8=W(lr());var $2=W(st());var f8=class extends Y{render(e,r){let n=this.props.chatVariables.find(i=>i.name===hn.variableInfo.name);return vscpp(vscppf,null,vscpp($2.SystemMessage,{priority:1e3},"You are an expert in VS Code extension development. You know how to use the VS Code API to extend the editor. Your task is to help the Developer with their VS Code extension development.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Assume the question is about VS Code extension development.",vscpp("br",null),"Politely decline to answer if the question is not about VS Code extension development.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the API related context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"The user cannot see the API context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),"Do not talk about initial setup of creating an extension unless the user asks about it.",vscpp("br",null),"Only provide information to related VS Code extension development."),this.props.history&&vscpp(vscppf,null,vscpp(Vt,{priority:600,history:this.props.history})),vscpp(uu,{priority:700}),!n&&vscpp(hn,{priority:900}),vscpp(hn,{priority:800}),vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}),vscpp(FX,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}},FX=class extends Y{async prepare(e,r,n){let i=this.accessor.get(Bs),o=this.accessor.get(f5);if(await o.updateIndex(),n.isCancellationRequested)return;let s=await i.computeEmbeddings([this.props.query],{},n);if(!n.isCancellationRequested&&s&&s.length>0){let a=o.nClosestValues(s[0],5,.7);if(a.length)return{snippets:a}}}render(e,r){return vscpp(vscppf,null,e&&e.snippets.length>0&&vscpp($2.UserMessage,{priority:900},"Below are some potentially relevant code samples related to VS Code extension development. You may use information from these samples to help you answer the question if you believe it is relevant."),e&&e.snippets.map(n=>vscpp($2.UserMessage,{priority:900},n,vscpp("br",null))))}};var Swe=m8.t("How do I add text to the status bar?"),UX=class extends wo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(_t).activeTextEditor;return new nt(n,f8,{chatVariables:i,query:u,history:l,document:d?.document,selection:d?.selection},this.accessor.get(ye),this.accessor)}},h8=class{constructor(){this.id="api";this.locations=[2];this.description=m8.t("Ask about VS Code extension development");this.intentDetectionInput={sampleQuestion:Swe,modelDescription:m8.t("Ask about VS Code extension development")};this.commandInfo={sampleRequest:Swe,defaultEnablement:!0,allowsEmptyArgs:!1}}static{this.ID="api"}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new UX(e)}}};var XX=W(lr());var g8=class t{constructor(e,r,n){this.accessor=e;this.prompt=r;this.documentContext=n}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let c=new t(r,i,a);return{intent:e,location:s,endpoint:o,promptCrafter:c,createReplyInterpreter:c.createReplyInterpreter.bind(c)}}async buildPrompt(e,r,n,i,o,s){let c=e.getLatestTurn().request.message,u=e.turns.length>1?e.turns.slice(0,-1):[],l=new nt(r,this.prompt,{documentContext:this.documentContext,query:c,history:u},this.accessor.get(ye),this.accessor),d=await l.render();return this.replyInterpreterFactory=l.getMeta(Jd),d}createReplyInterpreter(e,r){if(!this.replyInterpreterFactory)throw new Error("No reply interpreter factory available.");return this.replyInterpreterFactory.create(e,r)}};var _8=W(st());function Ewe(t,e){let r=t;for(let n of e){let i=n.range.start,o=n.range.end,s=r.start,a=r.end,c=n.newText.split(`
`).length,u=c-(o.line-i.line)-1,l=s.line,d=s.line;o.isBefore(s)?(l=s.line+u,d=a.line+u):i.isBefore(s)&&o.isAfterOrEqual(s)&&o.isBeforeOrEqual(a)?(l=i.line,d=a.line+u):i.isAfterOrEqual(s)&&i.isBeforeOrEqual(a)&&o.isAfter(a)?(l=s.line,d=o.line+u):i.isAfter(a)?(l=s.line,d=a.line):r.contains(n.range)?(l=s.line,d=a.line+u):n.range.contains(r)&&(l=i.line,d=i.line+c-1),r=new Je(l,0,d,0)}return r}function v8(t,e,r,n){let i=t.modelMaxPromptTokens*4/3,o=new ea(i),s=e.document,a=e.language,c=new Po(o,s,a,"ed8c6549bwf9"),u=new Po(o,s,a,"abpxx6d04wxr"),l=new Po(o,s,a,"be15d9bcejpp"),d=()=>(u.trim(),c.trim(),l.trim(),{contextInfo:{language:a,above:u,range:c,below:l,outlineAbove:"",outlineBelow:""},tracker:o});if(!jet(c,r,n))return d();let f={aboveLineIndex:n.start.line-1,belowLineIndex:n.end.line+1,minimumLineIndex:0,maximumLineIndex:s.lineCount-1};return yQ(f,u,l),d()}function jet(t,e,r){let n=Math.floor((e.start.line+e.end.line)/2),i=Math.max(n-r.start.line,r.end.line-n);t.appendLine(n);for(let o=1;o<=i;o++){let s=n-o,a=n+o;if(s>=r.start.line&&!t.prependLine(s)||a<=r.end.line&&!t.appendLine(a))return!1}return!0}function np(t,e,r,n){let i=t.getDiagnostics(e).filter(o=>!!o.range.intersection(r));if(n){let o=i.filter(s=>n.includes(s.message));if(o.length>0)return o}return i}async function y8(t,e,r){let n=rP(e),i=Math.max(r,e.end.line-e.start.line+r),o=await t.getFixSelectionOfInterest(n,i);return nP(o)}function Twe(t,e){let r=typeof e.code=="object"?e.code.value:e.code,n=zet(t,e.source,r);return{fixes:n,messageReplacement(){for(let i of n)if(typeof i=="object"&&i.replaceMessage!==void 0)return i.replaceMessage},additionalContext(){let i=[];for(let o of n)typeof o=="object"&&o.additionalContext!==void 0&&i.push(o.additionalContext);return i}}}var Get=["typescript"],Vet=["eslint","ts"];function zet(t,e,r){if(!Get.includes(t)||!Vet.includes(e))return[];let n=`${t}:${e}`;if(!BX[n]||!r||!BX[n][r])return[];let i=BX[n][r];return Array.isArray(i)?i:[i]}var BX={"typescript:ts":{2345:{title:"Use this declaration and other usages as examples.",message:"",additionalContext:0}},"typescript:eslint":{"class-methods-use-this":["Make the method static.","Move the method outside of the class.","Rewrite the method to use properties of the class."],"consistent-this":["Use the alias for this required by eslint consistent-this rule.","Use this directly instead of an alias."],"constructor-super":{title:"Add missing super call and pass through new arguments.",message:"The code is missing a super call in the constructor. Copy base class parameters to this constructor and pass them to super.",replaceMessage:"Missing super call in constructor"},"func-names":["Give the function expression the same name as the variable it is assigned to.","Convert the function to an arrow function."],"func-style":[{title:"Convert the function declaration to an expression.",message:"The function expression should be assigned to a variable with the name of the original function declaration."}],"max-lines-per-function":["Split into multiple functions."],"max-nested-callbacks":["Rewrite to avoid at least one callback."],"max-params":[{title:"Rewrite the signature to use an object parameter.",message:"Preserve all the parameters of the original signature."}],"max-statements":["Split into multiple functions."],"no-case-declarations":["Surround the case block with braces.","Move the declaration outside the case block."],"no-dupe-else-if":["Fix the duplicate condition to be different from the first.","Remove the duplicate condition"],"no-duplicate-case":[{title:"Change the duplicate condition to be different.",message:"Do not delete the duplicate case, just fix it.",replaceMessage:"Duplicated condition."},"Remove the duplicate condition"],"no-duplicate-imports":"Merge the duplicated import lines.","no-fallthrough":[{title:"Rewrite to avoid fallthrough.",message:"Use the return value of the following cases and copy it to the preceding fallthrough case.",replaceMessage:"Fallthrough case in switch statement."},"Add a // fallthrough comment.","Add a break statement."],"no-inner-declarations":["Move the inner declaration to the top of its containing function.","Move the inner declaration to the bottom of its containing function.","Change the inner function declaration to an expression."],"no-multi-assign":"Assign each variable in separate statements.","no-negated-condition":"Invert the branches of the conditional.","no-new":["Convert the class to functions.","Assign the resulting object to a variable."],"no-sequences":[{title:"Wrap the whole comma sequence in parentheses.",message:"",replaceMessage:"Unnecessary comma sequence"},{title:"Rewrite, preserving the original behavior.",message:"The last element of the comma sequence is the one returned."},{title:"Delete the non-final elements of the sequence.",message:"They are unused unless it is for side effects."}],"no-sparse-arrays":["Remove duplicated commas.","Add default values for the missing elements."],"require-await":["Removed the unused async keyword.",{title:"Rewrite the function to use await.",message:"The code should change to call asynchronous functions where appropriate."}],"sort-keys":{title:"Sort the properties of the entire object literal.",message:"",replaceMessage:"Unsorted keys in object literal."}}};var $et=200,Iwe=300,vu=class extends Y{async prepare(e,r,n){return{isIgnored:await this.accessor.get(Oe).isCopilotIgnored(this.props.documentContext.document.uri)}}render(e,r){let{diagnostics:n,documentContext:i}=this.props;return e.isIgnored?vscpp("ignoredFiles",{value:[i.document.uri]}):n.length>0&&vscpp(vscppf,null,n.map((o,s)=>{let a=Twe(i.language.languageId,o);return vscpp(vscppf,null,vscpp(qX,{diagnostic:o,cookbook:a,showLineNumbers:this.props.showLineNumbers??!1,maxLength:$et,documentContext:i}),vscpp(HX,{diagnostic:o,cookbook:a,document:i.document}),vscpp(jX,{cookbook:a}))}))}},qX=class extends Y{render(e,r){let n=this.props.diagnostic,i=this.props.cookbook?.messageReplacement()??n.message;if(this.props.showLineNumbers)return n.message?vscpp(vscppf,null,"At line ",n.range.start.line+1," column ",n.range.start.character+1,": ",vscpp("br",null),i," ",vscpp("br",null)):vscpp(vscppf,null);let o=this.props.documentContext.document,s=n.range,a=o.getText(new Je(s.start.line,0,s.end.line+1,0)).trim(),c=a.length>0&&a.length<this.props.maxLength?a:"";return c?vscpp(vscppf,null,"This code",vscpp("br",null),vscpp(vt,{code:c,uri:o.uri}),vscpp("br",null),vscpp(vscppf,null,"has the problem reported:",vscpp("br",null),i," ",vscpp("br",null))):vscpp(vscppf,null)}},HX=class extends Y{constructor(r,n){super(r,n);this.workspaceService=n.get(rt),this.parserService=n.get(Ir),this.ignoreService=n.get(Oe)}async prepare(){return this.getRelatedInfos()}render(r,n){return!r.infos.length&&!r.definitionRanges.length?vscpp("ignoredFiles",{value:r.ignoredFiles}):vscpp(vscppf,null,"This diagnostic has some related code:",vscpp("br",null),r.infos.map(i=>vscpp(vt,{code:i.content,uri:i.uri})),r.definitionRanges.map(i=>vscpp(lE,{document:this.props.document,position:i.start})),vscpp("ignoredFiles",{value:r.ignoredFiles}),";")}async getRelatedInfos(){let r=[],n=[],i=[],o=this.props.diagnostic;if(o.relatedInformation)for(let a of o.relatedInformation)try{let c=a.location;if(await this.ignoreService.isCopilotIgnored(c.uri)){i.push(c.uri);continue}let u=await this.workspaceService.openTextDocument(c.uri),l=c.range,d=this.parserService.getTreeSitterAST(u),p;if(d){let f=rP(l),m=await d.getCoarseParentScope(f);p=u.getText(nP(m))}(!p||p.length>Iwe)&&(p=u.getText(l)),p.length<=Iwe&&r.push({content:p,uri:c.uri})}catch{}let s=this.props.cookbook.additionalContext();for(let a of s)switch(a){case 0:{let c=this.parserService.getTreeSitterAST(this.props.document);if(c){let u=mo(this.props.diagnostic.range,this.props.document),l=await za(this.accessor,this.props.document,500,()=>c.getCallExpressions(u),[]);for(let d of l){let p=ds(this.props.document,d);n.push(p)}}break}case 1:{n.push(this.props.diagnostic.range);break}}return{infos:r,definitionRanges:n,ignoredFiles:i}}},jX=class extends Y{render(e,r){let n=this.props.cookbook.fixes;if(n.length){let i=n[0];return vscpp(vscppf,null,"Suggested fix:",vscpp("br",null),typeof i=="string"?i:i.title+i.message)}return null}};var xE=class extends Y{async prepare(){let e=this.accessor.get(Yr),r=this.accessor.get(Pe),n=async(i,o)=>r.getConfig(i)||!!await e.getTreatmentVariableAsync("vscode",o,!0);return{useWorkspaceChunksFromSelection:await n(Ne.FixUseWorkspaceChunksFromSelection,"copilotchat.useWorkspaceChunksFromSelection"),useWorkspaceChunksFromDiagnostics:await n(Ne.FixUseWorkspaceChunksFromDiagnostics,"copilotchat.useWorkspaceChunksFromDiagnostics")}}render(e,r){if(!e.useWorkspaceChunksFromSelection&&!e.useWorkspaceChunksFromDiagnostics)return null;let n=r.tokenBudget;return e.useWorkspaceChunksFromSelection&&e.useWorkspaceChunksFromDiagnostics&&(n=n/2),vscpp(vscppf,null,e.useWorkspaceChunksFromSelection&&vscpp(Jy,{...this.getChunkSearchPropsForSelection(n)}),e.useWorkspaceChunksFromDiagnostics&&vscpp(Jy,{...this.getChunkSearchPropsForDiagnostics(n)}))}getChunkSearchPropsForSelection(e){let{document:r,wholeRange:n}=this.props.documentContext,i=r.validateRange(n);this.props.diagnostics.forEach(s=>{i=i.union(s.range)});let o=r.getText(i);return{fullQuestionText:[`Please find code that is similar to the following code block:
`,"```",o,"```"].join(`
`),keywords:Cwe(o),include:{exclude:[r.uri.fsPath]},maxResults:3}}getChunkSearchPropsForDiagnostics(e){let r=this.props.documentContext.document,n=this.props.diagnostics.map(i=>i.message).join(" ");return{fullQuestionText:`Please find code that can help me fix the following problems: ${n}`,keywords:Cwe(n),include:{exclude:[r.uri.fsPath]},maxResults:3}}};function Cwe(t){let e=new Set;for(let r of t.matchAll(/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g))e.add(r[0]);return Array.from(e.values(),r=>({keyword:r,variations:[]}))}var Wet=15,b8=class extends Y{async prepare(){let{document:e,selection:r}=this.props.documentContext,n=np(this.accessor.get(Zi),e.uri,r,this.props.query),i=n.length>0?AP(n):r,o=this.accessor.get(Ir).getTreeSitterAST(e),s=o?await y8(o,i,Wet):i,a=await this.accessor.get(Oe).isCopilotIgnored(e.uri);return{range:i,rangeOfInterest:s,diagnostics:n,isIgnored:a}}render({range:e,rangeOfInterest:r,diagnostics:n,isIgnored:i},o){let s=this.props.documentContext;if(gr(this.props.documentContext.document.uri))throw Fn("InlineFix3Prompt should not be used with a notebook!");if(i)return vscpp("ignoredFiles",{value:[s.document.uri]});let{contextInfo:a}=v8(o.endpoint,s,e,r),c=s.document,u=[{uri:c.uri,version:c.version,ranges:Pr([a.range.toRange(),a.above.toRange(),a.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:u}),vscpp("meta",{value:new Jd(l=>new W2(this.accessor,e,a,s,l))}),vscpp(_8.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"First think step-by-step how you would fix the issue.",vscpp("br",null),"You are expected to either edit the selected code or propose a bash command to install missing packages.",vscpp("br",null),"If you propose a code change, use a single code block that starts with ``` and ",Ao.forLanguage(s.language),".",vscpp("br",null),"If you propose to run a bash command, use a code block that starts with ```bash.",vscpp("br",null),"When adding missing imports, always insert them inside of the selected code at the top, do not replace the rest of the selected code.",vscpp("br",null),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),vscpp(ar,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),vscpp(_8.UserMessage,null,a.above.hasContent&&vscpp(vscppf,null,"I have the following code above the selection:",vscpp("br",null),vscpp(Qn,{codeRegion:a.above,useMarkers:!0})),a.below.hasContent&&vscpp(vscppf,null,"I have the following code below the selection:",vscpp("br",null),vscpp(Qn,{codeRegion:a.below,useMarkers:!0})),a.range.hasContent&&vscpp(vscppf,null,"I have the following code in the selection:",vscpp("br",null),vscpp(Qn,{codeRegion:a.range,useMarkers:!0}))||vscpp(vscppf,null,"There is no code in the selection.",vscpp("br",null)),"Only change the code inside of the selection, delimited by markers '",a.range.startMarker,"' and '",a.range.endMarker,"'. The code block with the suggested changes should also contain the markers.",vscpp(vu,{documentContext:s,diagnostics:n}),vscpp(xE,{diagnostics:n,documentContext:this.props.documentContext}),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),this.props.query,vscpp("br",null)))}},W2=class{constructor(e,r,n,i,o){this.accessor=e;this.wholeRange=r;this.contextInfo=n;this.documentContext=i;this.progress=o;this._lastText=void 0;this._lastLength=0}update(e){if(this._lastText=e,this._firstSentence===void 0){let r=S5(e);r.length<e.length&&(this._firstSentence=r),this.progress.report({content:r.substring(this._lastLength)}),this._lastLength=r.length}return{shouldFinish:jf(e)}}async finish(){if(!this._lastText)throw new Error("No text");let e=Wy(this.contextInfo,this._lastText,this.documentContext.language);if(!e||e.language==="bash"||e.language==="ps1")return{type:"conversational",content:this._lastText.substring(this._lastLength)};let r=this.generateEdits(e.code),n=this.documentContext.document.version,i=o=>this.generateFollowUps(r,this.wholeRange,n,o);return Xd(r,this.wholeRange,void 0,i)}generateEdits(e){return Og(this.accessor,this.contextInfo,e,2,this.documentContext.fileIndentInfo,$y.fromDocumentContext(this.documentContext))}async generateFollowUps(e,r,n,i){let s=await this.accessor.get(Zi).waitForNewDiagnostics(this.documentContext.document.uri,i);if(!i.isCancellationRequested&&s.length&&this.documentContext.document.version!==n){let a=Ewe(r,e),c=s.filter(u=>Ane(u)&&u.range.intersection(a));if(c.length)return c.length===1?[{title:b7.t("An error remains after applying the change, click here to iterate."),message:`/fix ${c[0].message}`}]:[{title:b7.t("{0} errors remain after applying the change, click here to iterate.",c.length),message:"/fix Fix the remaining errors"}]}}};var Kf=W(st());function wwe(t,e,r){let n=Xet(e),i=zy(t,4,!1),o=Zet(n),s;function a(f,m){let h=f.content,g=Rwe(m),v=f.indentLength,b=g,y=0;for(;v<h.length&&b<m.length&&h.charCodeAt(v)===m.charCodeAt(b);)v++,b++,y++;if(v<h.length||b<m.length)return(m.length-g)*3/4<y&&(h.length-f.indentLength)*3/4<y?2:0;if(s===void 0){let S=Ng(h,o);S>=0&&(s=Ng(m,i.tabSize)-S)}return 1}function c(f,m,h){for(let g=h;g<m.length;g++)if(a(f,m[g])===1)return r?.recovery(h,g),g;return r?.warning("Unable to find a matching line for the diff line: "+f.content),-1}function u(f,m){for(let h=0;h<m.length;h++)if(a(f,m[h])===1)return h;return 0}let l=[],d=0,p=0;for(n.length>0&&(p=u(n[0],t));d<n.length&&p<t.length;){let f=n[d];switch(f.op){case 1:{let m=GX(f,o,s??0,i);l.push(new Yi(p,p,[m]));break}case-1:{let m=t[p];if(a(f,m)===0){let v=c(f,t,p);if(v!==-1)p=v;else break}let g=n[d+1];if(g?.op===1&&g.indentLength===f.indentLength){let v=Yet(m)+g.content.substring(g.indentLength);l.push(new Yi(p,p+1,[v])),d++,p++;break}l.push(new Yi(p,p+1,[])),p++;break}default:{let m=a(f,t[p]);if(m===0){let h=c(f,t,p);if(h!==-1)p=h;else break}else if(m===2){let h=GX(f,o,s??0,i);l.push(new Yi(p,p+1,[h]))}p++;break}}d++}if(p===t.length&&d<n.length)for(;d<n.length;d++){let f=n[d];if(f.op===1){let m=GX(f,o,s??0,i);l.push(new Yi(p,p,[m],`
`,""))}}return l}function x8(t){return t===32||t===9}function Ket(t){return t===45||t===43}function Rwe(t){let e=0;for(;e<t.length&&x8(t.charCodeAt(e));)e++;return e}function Yet(t){let e=0;for(;e<t.length&&x8(t.charCodeAt(e));)e++;return t.substring(0,e)}function GX(t,e,r,n){if(r===0&&(!n.insertSpaces&&t.indentKind===1||n.insertSpaces&&t.indentKind===2))return t.content;let i=Ng(t.content,e);return(n.insertSpaces?" ".repeat(n.tabSize*(i+r)):"	".repeat(i+r))+t.content.substring(t.indentLength)}function Qet(t){let e=0,r=0,n=t.content;if(n.length>0){let i=n.charCodeAt(0);if(x8(i))for(r++,e=i===32?2:1;r<n.length;){let o=n.charCodeAt(r);if(!x8(o))break;r++,o!==i&&(e=3)}}t.indentKind=e,t.indentLength=r}function Xet(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r],i={content:n,op:0,indentKind:0,indentLength:0};n.length>0&&(Ket(n.charCodeAt(0))&&(i.op=n.charCodeAt(0)===45?-1:1,n.length>1&&n.charCodeAt(1)===32?(i.content=n.substring(1),Rwe(i.content)%2===1&&(i.content=" "+i.content)):i.content=n.substring(1)),Qet(i)),e.push(i)}return Jet(e),e}function Jet(t){let e=Number.MAX_VALUE;for(let r of t){if(r.indentKind!==2||r.indentLength===0)return;r.indentLength<e&&(e=r.indentLength)}if(e>0)for(let r of t)r.indentLength-=e,r.content=r.content.substring(e)}function Zet(t){return 4}var S8=class extends Y{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext,n=e.validateRange(r),o=this.accessor.get(Ir).getTreeSitterAST(e),s=o?await o.getStructure():void 0;return{wholeRange:n,structure:s,summarizedDocumentSettings:await lu(this.accessor),isIgnored:await this.accessor.get(Oe).isCopilotIgnored(e.uri)}}render(e,r){let{document:n,language:i,selection:o}=this.props.documentContext;if(gr(n.uri))throw Fn("InlineFix4Prompt should not be used with a notebook!");if(e.isIgnored)return vscpp("ignoredFiles",{value:[n.uri]});let s=e.wholeRange,c=r.endpoint.modelMaxPromptTokens/3*4,u=s,l,d,p;if(e.structure&&n.getText().length>c){let g=du(c,n,s,e.structure,e.summarizedDocumentSettings);u=g.document.transformer.fromOffsetRange(g.selection),l=g.document,p=g.document.text,d={firstLineIndex:0,endLineIndex:g.document.lineCount}}else{let g=ett(r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,e.wholeRange);d=g.lineRange,p=g.code,l=n}let f=p.length>0,m=[{uri:n.uri,version:n.version,ranges:[new Je(d.firstLineIndex,0,d.endLineIndex,0)]}],h=np(this.accessor.get(Zi),n.uri,o,this.props.query);return vscpp(vscppf,null,vscpp("usedContext",{value:m}),vscpp("meta",{value:new Jd(g=>new VX(u,d,l,g))}),vscpp(Kf.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"The user has a ",i.languageId," file opened in a code editor.",vscpp("br",null),"The user expects you to propose a fix for one or more problems in that file.",vscpp("br",null),"For the response always follow these instructions:",vscpp("br",null),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),"When proposing a change in the code, use a single code block that starts with ```diff and that describes the changes in the diff format. In the diff, always use tab to indent, never spaces. Make sure that the diff format is valid and contains all changes: Removed and unchanged lines must match exactly the original code line. Keep the changes minimal and the diff short.",vscpp("br",null),"When proposing to fix the problem by running a terminal command, provide the terminal script in a code block that starts with ```bash.",vscpp("br",null),vscpp(ar,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),vscpp(Kf.UserMessage,{priority:100},"I have the following code open in the editor.",vscpp("br",null),"```csharp",vscpp("br",null),"// This is my class",vscpp("br",null),"class C { }",vscpp("br",null),vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```"),vscpp(Kf.AssistantMessage,{priority:100},"The problem is that the class 'C' does not have a field or property named 'Field'. To fix this, you need to add a 'Field' property to the 'C' class.",vscpp("br",null),vscpp("br",null),"```diff",vscpp("br",null),"// This is my class",vscpp("br",null),"-class C { }",vscpp("br",null),"+class C {",vscpp("br",null),"+   public int Field { get; set; }",vscpp("br",null),"+}",vscpp("br",null),vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```",vscpp("br",null)),vscpp(Kf.UserMessage,{priority:700},vscpp(A5,null,f&&vscpp(vscppf,null,"I have the following code open in the editor, starting from line ",d.firstLineIndex+1," to line ",d.endLineIndex,":",vscpp(Ps,{language:i,code:p}),vscpp("br",null),"The user has currently selected from line ",u.start.line+1,", column ",u.start.character+1," to line ",u.end.line+1," column ",u.end.character+1,".",vscpp("br",null)),!f&&vscpp(vscppf,null,"I am in an empty file:",vscpp(Ps,{language:i,code:""}))),vscpp(vu,{documentContext:this.props.documentContext,diagnostics:h,showLineNumbers:!0}),vscpp(xE,{diagnostics:h,documentContext:this.props.documentContext}),vscpp(Kf.TextChunk,null,"Please find a fix for my code so that the result is without any errors.",vscpp("br",null),this.props.query,vscpp("br",null))))}};function ett(t,e,r){let n=t*4,i=new ea(n),o=new Po(i,e.document,e.language,"ed8c6549bwf9"),s=!1,a=p=>{o.prependLine(p)||(s=!0)},c=p=>{o.appendLine(p)||(s=!0)},u=e.document.lineCount,l=r.end.line;for(l=r.end.line;!s&&l>=r.start.line;l--)a(l);let d=r.end.line+1;for(;!s&&(l>=0||d<u);)l>=0&&a(l--),l>=0&&a(l--),d<u&&c(d++);return o.trim(e.selection),{code:o.lines.join(`
`),lineRange:{firstLineIndex:o.firstLineIndex,endLineIndex:o.lastLineIndex+1}}}var VX=class{constructor(e,r,n,i){this.wholeRange=e;this.lineRange=r;this.targetDocument=n;this.progress=i;this._lastText=void 0;this._lastLength=0}update(e){if(this._lastText=e,this._firstSentence===void 0){let r=S5(e);r.length<e.length&&(this._firstSentence=r),this.progress.report({content:r.substring(this._lastLength)}),this._lastLength=r.length}return{shouldFinish:jf(e)}}async finish(){if(!this._lastText)throw new Error("No text");let e=ttt(this._lastText);if(!e||e.language==="bash"||e.language==="ps1")return{type:"conversational",content:this._lastText.substring(this._lastLength)};let r=[];if(e.language==="diff"){let i=Lg.fromString(e.code),o=Lg.fromString(this.targetDocument instanceof qg?this.targetDocument.text:this.targetDocument.getText());r=wwe(o,i)}else r=[new Yi(this.lineRange.firstLineIndex,this.lineRange.endLineIndex,Lg.fromString(e.code))];let n=r.map(i=>i.toTextEdit());return this.targetDocument instanceof qg&&(n=new MS(this.targetDocument).rebaseEdits(n)),Xd(n,this.wholeRange,void 0)}};function ttt(t){let r=As(t).at(0);if(r){let n=Fb(t);return{code:r.code,contentBeforeCode:n.slice(0,r.startLine).join(`
`).trimEnd(),language:r.language}}}var T8=W(st());var rtt=15,E8=class extends Y{async prepare(){let{document:e,selection:r}=this.props.documentContext,n=np(this.accessor.get(Zi),e.uri,r,this.props.query),i=n.length>0?AP(n):r,o=this.accessor.get(Ir).getTreeSitterAST(e),s=o?await y8(o,i,rtt):i;return{range:i,rangeOfInterest:s,diagnostics:n}}render({range:e,rangeOfInterest:r,diagnostics:n},i){let o=this.props.documentContext;if(!gr(this.props.documentContext.document.uri))throw Fn("InlineFix4Prompt should not be used with a non-notebook!");let s=v8(i.endpoint,o,e,r),a=F5(this.accessor.get(_t),this.accessor.get(rt),o,s.contextInfo,s.tracker),c=o.document,u=[{uri:c.uri,version:c.version,ranges:Pr([a.range.toRange(),a.above.toRange(),a.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:u}),vscpp("meta",{value:new Jd(l=>new zX(this.accessor,e,a,o,l))}),vscpp(T8.SystemMessage,null,vscpp(qS,{language:o.language}),vscpp("br",null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If you suggest to run a terminal command, use a code block that starts with ```bash.",vscpp("br",null),'When fixing "ModuleNotFoundError" or "Import could not be resolved" errors, always use magic command "%pip install" to add the missing packages. The imports MUST be inserted at the top of the code block and it should not replace existing code.',vscpp("br",null),"You should not import the same module twice.",vscpp("br",null),vscpp(ar,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),vscpp(T2,{documentContext:o,above:a.above,range:a.range,below:a.below,aboveCells:a.aboveCells,belowCells:a.belowCells,includeDelimeters:!0}),vscpp(T8.UserMessage,null,vscpp(vu,{documentContext:o,diagnostics:n}),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),this.props.query,vscpp("br",null)))}},zX=class extends W2{generateEdits(e){let r=e.split(`
`),n=[],i=[];for(let a of r)a.match(/^[%\!]pip/)?n.push(a):i.push(a);if(!n.length)return super.generateEdits(e);let o=[],s=Mg(n,{whichLine:"topMost",lines:this.contextInfo.range.lines},this.documentContext.fileIndentInfo).join(`
`)+`
`;return o.push(new hi(new Je(this.wholeRange.start,this.wholeRange.start),s)),i.length&&o.push(...super.generateEdits(i.join(`
`))),o}};var C8=W(st());var I8=class extends Y{render(e,r){let n=this.props.documentContext,i=({document:o,selection:s})=>np(this.accessor.get(Zi),o.uri,s,this.props.query);return vscpp(vscppf,null,vscpp(C8.SystemMessage,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),vscpp(ar,null),vscpp("br",null),vscpp("br",null),vscpp(zg,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You specialize in being a highly skilled code generator. Your task is to help the Developer fix an issue.",vscpp("br",null),"If context is provided, try to match the style of the provided code as best as possible.",vscpp("br",null),"Generated code is readable and properly indented.",vscpp("br",null),"Markdown blocks are used to denote code.",vscpp("br",null),"Preserve user's code comment blocks, do not exclude them when refactoring code.",vscpp("br",null),"Pay especially close attention to the selection or exception context.",vscpp("br",null),"Given a description of what to do you can refactor, fix or enhance the existing code.",vscpp(vr,null)),this.props.history&&vscpp(Vt,{priority:700,history:this.props.history}),vscpp(hn,{priority:800,document:this.props.documentContext?.document,range:this.props.documentContext?.selection}),n&&vscpp(C8.UserMessage,{priority:800},vscpp(vu,{documentContext:n,diagnostics:i(n)})),vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var i0=W(lr());async function $X({diffService:t,chunk:e,editedChunk:r}){let n=new Kd(e.text),i=new Kd(r),o=await t.computeDiff(e.text,r,{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:3e4}),s=[],a=!1,c=(u,l)=>{let d=n.positionToOffset(new fo(u.startLineNumber,u.startColumn)),p=n.positionToOffset(new fo(u.endLineNumber,u.endColumn));p=Math.min(p,e.text.length);let f,m,h=e.sources.find(y=>y.start<=d&&y.end>=p);if(h){let y=Ec(d-h.start,e.text.slice(h.start),h.range);f=new fo(y.range.startLineNumber,y.range.startColumn)}else{let y;for(let S of e.sources)S.start>d&&(!y||y.start>S.start)&&(y=S);y&&(f=new fo(y.range.startLineNumber,y.range.startColumn))}let g=e.sources.find(y=>y.start<=p&&y.end>=p);if(g){let y=ga(g.end-p,e.text.slice(0,g.end),g.range);m=new fo(y.range.endLineNumber,y.range.endColumn)}else{let y;for(let S of e.sources)S.end<p&&(!y||y.end<S.end)&&(y=S);y&&(m=new fo(y.range.endLineNumber,y.range.endColumn))}f||=m,m||=f;let v=i.positionToOffset(new fo(l.startLineNumber,l.startColumn)),b=l.endLineNumber>i.lines?r.length:i.positionToOffset(new fo(l.endLineNumber,l.endColumn));if(f&&m){let y=r.slice(v,b);s.push(new hi(new Je(f.lineNumber,f.column,m.lineNumber,m.column),y))}else a=!0};for(let u of o.changes)if(u.innerChanges)for(let l of u.innerChanges)c(l.originalRange,l.modifiedRange);else c(u.original.toExclusiveRange(),u.modified.toExclusiveRange());return{edits:s,unmappedEdits:a}}var KX=W(lr());var Nwe=W(st());var Awe=W(st());var w8=class extends Y{render(){let{chunk:e,failure:r,priority:n}=this.props,i=r.task.messages.filter(o=>o.location?.uri.toString()===e.file.toString()&&Nl(e.range).contains(o.location.range.start));return vscpp(Awe.UserMessage,{priority:n},i.length?vscpp(vscppf,null,'This is the source code of the test that failed. The error message is shown after the text "FAILURE_MESSAGE" on the line where it occurred:'):vscpp(vscppf,null,"The test failed with the message: ",r.task.messages.map(o=>typeof o.message=="object"?o.message.value:o.message).join(`
`),". The source code of the test is:"),vscpp("br",null),vscpp(vt,{languageId:e.file.toString(),uri:e.file,code:e.text.split(`
`).map((o,s)=>{let a=i.find(c=>c.location?.range.start.line===s+e.range.startLineNumber);return a?`${o} FAILURE_MESSAGE: ${a.message.toString().replaceAll(`
`," ")}`:o}).join(`
`)}),vscpp("br",null))}};var WX=W(st());var ntt=/^[\*\-]\s*`?([^<([`\s]+).*? +in +(.+)/gm,Pwe=(t,e)=>[...t.matchAll(ntt)].flatMap(([,r,n])=>r.split(",").map(i=>({keyword:i,fileUri:n,interest:"IMPLEMENTATION"}))).map(({keyword:r,fileUri:n,interest:i})=>{let o=e.filter(p=>p.file.toString().toLowerCase()===n.toLowerCase());o.length===0&&(o=e);let s,a,c=new RegExp(`\\b${P0(r)}\\b`);for(let p=o.length-1;!s&&p>=0;p--){let f=o[p],m=c.exec(f.text)?.index;m!==void 0&&(s=f,a=m)}if(!s||a===void 0)return;let u=s.sources.find(p=>p.start<=a&&p.end>a)||{start:0,end:0,range:s.range},l=s.text.lastIndexOf(`
`,a),d=ZR(s.text.slice(u.start,a),`
`);return{keyword:r,interest:i,location:{uri:s.file,position:new Bn(u.range.startLineNumber+d,d===0?u.range.startColumn+a-u.start:a-(l+1))}}}).filter(ST),kwe=async(t,e,r)=>{let n=e.get(cu).get(t);if(n)return n.getSemanticChunks(r);try{let i=await e.get(gi).readFile(t),o=new TextDecoder().decode(i);return await e.get(Za).chunkFileText(t,o,{shouldSemanticChunk:!0},r)}catch{return[]}};var R8=class extends Y{render(){let e=this.props.symbolChunks;return vscpp(vscppf,null,vscpp(WX.UserMessage,{priority:this.props.priority},"Here are some potentially relevant symbols we have found before:",vscpp("br",null)),e.map(r=>vscpp(WX.UserMessage,{priority:this.props.priority-1},"**",r.interest==="DEFINITION"?"Definition of":"Implementation of"," `",r.keywords.join(", "),"`:**",vscpp("br",null),vscpp(vt,{languageId:r.chunk.file.toString(),uri:r.chunk.file,code:r.chunk.text}))))}};var A8=class extends Y{render(){let{chunk:e,testFailure:r,symbolChunks:n,turnsLeft:i}=this.props;return vscpp(vscppf,null,vscpp(Nwe.SystemMessage,{priority:1e3},"You are an assistant who specializes in diagnosing and fixing failing tests. The user will provide you with the source code of the test that failed, and the location where the failure happened. They will also provide you with relevant related code. This information may be incomplete.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),`- Read the test's source code and the line containing "FAILURE_MESSAGE". The text after "FAILURE_MESSAGE" is the error returned from running tests.`,vscpp("br",null),"- Assume that the test code and test fixtures are correct. It's more likely the problem is code called by the test.",vscpp("br",null),!!n.length&&vscpp(vscppf,null,"- The provided implementations are incomplete. DO NOT assume that something isn't implemented if it doesn't appear here.",vscpp("br",null)),i===0?vscpp(vscppf,null,'- Respond with "SOLUTION", followed by the file URI, and then the corrected code and a brief explanation of the change. Make sure to include the entire code snippet with your correction, do not omit anything!',vscpp("br",null)):vscpp(vscppf,null,n.length?vscpp(vscppf,null,'- If you believe you have found a bug in one of the "implementations" the user provided, respond with "SOLUTION", followed by the file URI, and then the corrected code and a brief explanation of the change. Make sure to include the entire code snippet with your correction, do not omit anything!',vscpp("br",null),"- Otherwise, print a list of up to five keywords, classes, or function calls from the last implementation snippet that you need more information about to diagnose the failure. Make sure the most relevant keywords are written first. ",i===0&&"You won't get another chance to ask for more info.",vscpp("br",null),Dwe):vscpp(vscppf,null,"- Don't try to fix the failure yet. Instead, print a list of keywords, classes, or function calls that you need more information about to diagnose the failure!",vscpp("br",null),Dwe),`- If there is no more relevant information to request and you don't see a change to make WITHOUT CHANGING THE TEST CODE, respond with "NO MORE INFO".`,vscpp("br",null)),vscpp("br",null),"# Example",vscpp("br",null),i>0&&vscpp(vscppf,null,"# Example",vscpp("br",null),ott,vscpp("br",null),vscpp("br",null)),!!n.length&&vscpp(vscppf,null,"# Example",vscpp("br",null),stt,vscpp("br",null))),vscpp(w8,{chunk:e,failure:r,priority:800}),!!n.length&&vscpp(R8,{symbolChunks:n,priority:700}))}},ott=vscpp(vscppf,null,"User:",vscpp("br",null),`\`\`\`file:///project/my.test.ts
test('reverseString test', () => {'{'}
	const value = 'hello';
	const value2 = doReverseString(value);
	assert.deepStrictEquals(value2, 'olleh'); FAILURE_MESSAGE: Expected undefinedolleh to equal olleh
{'}'});
\`\`\`

Implementation of \`doReverseString\` in file:///project/my.test.ts:

\`\`\`file:///project/strings.ts
function doReverseString(str: string): number {
	return stringUtils.reverseString(str);
}
\`\`\`
`,vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"I need more information about:",vscpp("br",null),"- stringUtils.reverseString",vscpp("br",null)),stt=vscpp(vscppf,null,"User:",vscpp("br",null),`\`\`\`file:///project/my.test.ts
test('reverseString test', () => {'{'}
	const value = 'hello';
	const value2 = doReverseString(value);
	assert.deepStrictEquals(value2, 'olleh'); FAILURE_MESSAGE: Expected undefinedolleh to equal olleh
{'}'});
\`\`\`

Implementation of \`doReverseString\`:

\`\`\`file:///project/my.test.ts
function doReverseString(str: string): number {
	return stringUtils.reverseString(str);
}

Implementation of \`stringUtils.reverseString\`:

\`\`\`file:///project/strings.ts
function reverseString(str) {
	let out = '';
	for (let i = str.length; i >= 0; i--) {
		out += str[i];
	}
	return out;
}
\`\`\`
`,vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"SOLUTION: file:///project/stringUtils.ts",vscpp("br",null),`\`\`\`typescript
function reverseString(str) {
	let out = '';
	for (let i = str.length - 1; i >= 0; i--) {
		out += str[i];
	}
	return out;
}
\`\`\`
`,vscpp("br",null),"`reverseString` had an off-by-one error which started past the end of the string. I fixed your code by making `i` begin at `str.length - 1` instead of `str.length`.",vscpp("br",null)),Dwe=vscpp(vscppf,null,'- Write your response in a list in the form "- [keyword] in [file where keyword is used]". Do not include any extra text. Keywords should be EXACT substrings from the code the user provides, do not modify them.',vscpp("br",null));var att=1e3,Lwe="SOLUTION:";function ctt(t,e){t=t.trim();let r=t.split(`
`);if(!r[0].startsWith(Lwe))return;let n;try{n=gt.parse(r[0].slice(Lwe.length).trim())}catch{}let i=As(t);if(!i.length)return;let[o]=i;return{text:r.slice(o.startLine).join(`
`),uri:n,code:o.code,explaination:r.slice(o.endLine).join(`
`).trim(),chunk:n&&e.find(s=>s.file.toString().toLowerCase()===n.toString().toLowerCase())}}var P8=class{constructor(e){this.chunkCache=new Un;this.globallySeen=new Set;this._promise=new k0;this.turnsUsed=0;this.tokensUsed=0;this.endpoint=e.endpoint,this.progress=e.progress,this.token=e.token,this.accessor=e.accessor,this.turnsBudget=e.turnsBudget,this.timeBudget=e.timeBudget,this.tokenBudget=e.tokenBudget,this.deadline=Date.now()+this.timeBudget,this.logger=e.accessor.get(ce).getPromptResponseLogger("FailingTest")}get promise(){return this._promise.p}get hasFoundSolution(){return this._promise.isResolved}foundSolution(e){this._promise.complete(e)}takeTurn(){return this.turnsUsed++,Date.now()+att>=this.deadline?0:Math.max(0,this.turnsBudget-this.turnsUsed)}async getSemanticChunkForLocation({uri:e,range:r}){let n=this.chunkCache.get(e);return n||(n=kwe(e,this.accessor,this.token),this.chunkCache.set(e,n)),n.then(i=>i.find(o=>Nl(o.range).intersection(r)))}throwIfCancelled(){if(this.token.isCancellationRequested||this.hasFoundSolution)throw new la}async getSymbols(e){let r=this.accessor.get(Oe),n=new Map,i=await this.getDefinitionLocations(e);this.throwIfCancelled();for(let{keyword:o,links:s}of i)for(let{interest:a,link:c}of s){if(await r.isCopilotIgnored(c.uri))continue;let u=[a,c.uri.toString(),c.range.start.line].join("\0");if(this.globallySeen.has(u))continue;let l=n.get(u);if(l){l.keywords.push(o);continue}n.set(u,{keywords:[o],interest:a,link:c}),this.progress.report(new eP(c))}for(let o of n.keys())this.globallySeen.add(o);return this.symbolsToChunks([...n.values()])}async symbolsToChunks(e){return(await Promise.all(e.map(async n=>{let i=await this.getSemanticChunkForLocation(n.link);if(i)return{keywords:n.keywords,interest:n.interest,chunk:i}}))).filter(ST)}async getDefinitionLocations(e){let r=this.accessor.get(ho);return Promise.all(e.map(async({keyword:n,interest:i,location:o})=>{let s=o.position.translate(0,n.length-1),a=o.uri,c=()=>r.getDefinitions(a,s).then(p=>p.length?p:r.getImplementations(a,s)).then(p=>p.length?{interest:"DEFINITION",link:p[0]}:void 0),u=()=>r.getImplementations(a,s).then(p=>p.length?p:r.getDefinitions(a,s)).then(p=>p.length?{interest:"IMPLEMENTATION",link:p[0]}:void 0),l=[];(i==="DEFINITION"||i==="BOTH")&&l.push(c()),(i==="IMPLEMENTATION"||i==="BOTH")&&l.push(u());let d=(await Promise.all(l)).filter(ST);return{keyword:n,links:d.map(p=>"targetUri"in p.link?{interest:p.interest,link:new Pl(p.link.targetUri,p.link.targetRange)}:p)}}))}};var k8=class t{constructor(e,r,n){this.context=e;this.testFailure=r;this.testLocation=n}static create(e,r,n){let i=Tte(r.task.messages,o=>o.location);return(!i||n.uri.toString()!==i.uri.toString())&&(i=n),new t(new P8(e),r,i)}async climb(){let e=new P8(this.context),r=await e.getSemanticChunkForLocation(this.testLocation);if(!r)throw new Error("Could not find semantic information for the test location");let n=await Promise.race([e.promise.then(o=>({type:0,solution:o})),this.climbInner(e,r,{chunks:[],name:`"${this.testFailure.snapshot.label}"`,tokens:0}).then(()=>({type:2}),o=>{if(C0(o))return{type:1};throw o})]);return this.context.accessor.get(ke).sendMSFTTelemetryEvent("intent.fixTestFailure.outcome",{outcome:n.type===0?"solution":n.type===1?"cancelled":"nosolution",languageId:MA(this.testLocation.uri).languageId},{requestsMade:e.turnsUsed,tokenCount:e.tokensUsed}),n}async climbInner(e,r,n,i=!1){let{endpoint:o,progress:s,token:a,accessor:c}=this.context,u=c.get(ke),l=c.get(Qt),d=n.name,p=e.takeTurn(),f=c.get(ye),{messages:m,tokenCount:h}=await new nt(o,A8,{testFailure:this.testFailure,chunk:r,symbolChunks:n.chunks,turnsLeft:i?0:p},f,c).render();if(e.tokensUsed+=h,e.throwIfCancelled(),n.tokens===0){for(let y of m)n.tokens+=f.tokenLength(y.content);n.tokens*=1.2}s.report(new Us(KX.t("Investigating the code around {0}",d))),e.logger.logPrompt(m);let g=await l.fetchOne(m,async y=>{},a,2,o,void 0,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"failingTestMeta"});if(e.throwIfCancelled(),e.logger.logResponse(g),g.type!=="success")throw u.sendMSFTTelemetryEvent("failingTestResolver.error",{type:g.type,reason:g.reason,requestId:g.requestId}),new Error(KX.t("Encountered an error while deciding what test information to collect: ({0}) {1}",g.type,g.reason));let v=n.chunks.map(y=>y.chunk);v.unshift(r);let b=ctt(g.value,v);if(b)e.foundSolution(b);else if(p>0){let y=await e.getSymbols(Pwe(g.value,v));await this.chunkAndSendFollowups(e,r,y,n)}}async chunkAndSendFollowups(e,r,n,i){let o=[],s=e.accessor.get(ye);for(let a of n){let c=o[o.length-1],u=s.tokenLength(a.chunk.text)+s.tokenLength(a.chunk.file.toString());!c||u+c.tokens>e.tokenBudget?o.push({chunks:[...i.chunks,a],tokens:i.tokens+u,name:i.name+" \u279C "+a.keywords[0]}):(c.chunks.push(a),c.tokens+=u)}for(let a of o)await this.climbInner(e,r,a);if(o.length===0)return this.climbInner(e,r,i,!1)}};var SE=class{constructor(){this.id="fixTestFailure";this.locations=[1,2];this.description=i0.t("Propose a fix for the a test failure");this.intentDetectionInput={sampleQuestion:"This test failed, suggest how to fix it."};this.commandInfo={sampleRequest:i0.t("This test failed, suggest how to fix it."),defaultEnablement:!0,allowsEmptyArgs:!0,shouldRepopulate:!0}}static{this.ID="fixTestFailure"}async asSlashCommand(e){if(e.get(sl).isEnabled.get())return{command:this.id,detail:this.description,executeImmediately:!0}}async invoke(e,r){let n=e.get(sl),i;(g=>(g[g.Any=0]="Any",g[g.SameDocument=1]="SameDocument",g[g.InViewRange=2]="InViewRange",g[g.InSelection=3]="InSelection"))(i||={});let o,s=0,a=r.documentContext?.document.uri.toString();for(let p of n.getAllFailures())if(!o||!o.snapshot.uri||!o.snapshot.range)o=p;else if(p.snapshot.range&&p.snapshot.uri?.toString()===a&&(s<1&&(o=p,s=1),p.snapshot.range.intersection(r.documentContext.wholeRange)&&(o=p,s=2),p.snapshot.range.intersection(r.documentContext.selection))){o=p,s=3;break}if(!o)throw new y2(i0.t("No test failures found."));let{range:c,uri:u}=o.snapshot;if(!u||!c)throw new y2(i0.t("Tests have no associated editor location."));let l=r.location,d=await e.get(Ge).getUserRequestEndpoint(l,this.id,"gpt-4");return new YX(e,this,d,l,o,{uri:u,range:c})}},YX=class{constructor(e,r,n,i,o,s){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.createReplyInterpreter=e=>new K2(this.lastSolutionForInterpreter,this.accessor.get(Wd));let a=this;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=new nt(l,QX,{testFailure:o,chatVariables:d,query:g,endpoint:l,progress:p,chatLocation:i,location:s,history:u.turns},e.get(ye),e),b=await v.render(p,m);return i===1&&(a.lastSolutionForInterpreter=v.getMeta(D8)?.value),b}}}},QX=class extends Y{async prepare(e,r,n=qr.None){let{progress:i}=this.props,s=await k8.create({accessor:this.accessor,endpoint:this.props.endpoint,progress:i,token:n,tokenBudget:e.tokenBudget,timeBudget:1/0,turnsBudget:6},this.props.testFailure,this.props.location).climb();if(this.props.chatLocation===1)return{outcome:s};if(s.type===0){let a=s.solution.chunk&&await $X({diffService:this.accessor.get(Wd),editedChunk:s.solution.code,chunk:s.solution.chunk});a&&!a.unmappedEdits?(i.report(new kl(new tb(s.solution.explaination))),i.report(new sne(s.solution.chunk.file,a.edits))):i.report(new kl(new tb(s.solution.text)))}else s.type===1?(i.report(new kl(Owe())),i.report(new one({command:"workbench.action.openSettings",title:i0.t("Go to Settings"),arguments:[{query:"github.copilot.config.testFixLimits"}]}))):i.report(new kl(Mwe()))}render(e,r){return vscpp(vscppf,null,vscpp("meta",{value:new D8(e?.outcome)}))}},Owe=()=>i0.t("Unfortunately I was unable to find a solution to this test failure in the time alloted. My time limit can be configured in your settings."),Mwe=()=>i0.t("Unfortunately I was unable to find a solution to this test failure. Please try providing more context."),D8=class extends vc{constructor(r){super();this.value=r}},K2=class{constructor(e,r){this.solution=e;this.diffService=r}update(e){return{shouldFinish:!0}}async finish(){let e=this.solution;if(!e||e.type===1)return{type:"conversational",content:Owe()};if(e.type===2)return{type:"conversational",content:Mwe()};let r=e.solution,n=r.chunk&&await $X({diffService:this.diffService,editedChunk:r.code,chunk:r.chunk});if(!n||n.unmappedEdits||!r.chunk)return{type:"conversational",content:r.text};let i=new qT;return i.set(r.chunk.file,n.edits),{type:"workspaceEdit",workspaceEdit:i,content:r.explaination}}};K2=we([de(1,Wd)],K2);var utt={3:"gpt-3.5-turbo",4:"gpt-4",cl:"code-llama"},EE=class{constructor(){this.id="fix";this.locations=[1,2];this.description=XX.t("Propose a fix for the problems in the selected code");this.intentDetectionInput={sampleQuestion:"There is a problem in this code. Rewrite the code to show it with the bug fixed."};this.commandInfo={sampleRequest:XX.t("There is a problem in this code. Rewrite the code to show it with the bug fixed.")}}static{this.ID="fix"}async invoke(e,r){if(this.shouldDelegateToTestFixer(e,r))return new SE().invoke(e,r);let n=r.documentContext;if(!n)throw new Error("Open a file to fix an issue");let i=r.location;if(i===2)return jS.createIntentInvocation(this,e,r,I8);let o=r.intentArgument?utt[r.intentArgument]:void 0,s=await e.get(Ge).getUserRequestEndpoint(i,this.id,o),a=b8;return gr(n.document.uri)&&n.document.languageId==="python"?a=E8:(s.model==="gpt-4"||s.model==="copilot-preview-gpt4-centralus"||s.model==="gpt-4-0125-adaf089e")&&(a=S8),g8.createIntentInvocation(this,e,r,a,s)}shouldDelegateToTestFixer(e,r){let n=e.safeGet(sl);return!n?.isEnabled||r.documentContext?.selection.isEmpty===!1?!1:!!(r.location===1&&r.documentContext&&n.getFailureAtPosition(r.documentContext.document.uri,r.documentContext.selection.end)||n.lastResultsFrom&&Date.now()-n.lastResultsFrom<1e4&&!R0.isEmpty(n.getAllFailures()))}};var JX=W(lr());var N8=class{constructor(){this.id="newNotebook";this.description=JX.t("Create a new Jupyter Notebook");this.locations=[2];this.intentDetectionInput={modelDescription:"Creates a new Jupyter Notebook for tasks such as data analysis, scientific computing, and machine learning.",sampleQuestion:"How do I create a notebook to load data from a csv file?"};this.commandInfo={allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:JX.t("How do I create a notebook to load data from a csv file?")}}static{this.ID="newNotebook"}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return new ZX(e,this,o,i)}async asSlashCommand(e,r){return{command:this.id,detail:this.description}}},ZX=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.commands=async(e,r)=>{let n=(r.response?.message??"").replace(/\n/g,""),o=/```(?:json)?(.+)/g.exec(n);if(o)try{let s=o[1],a=s.indexOf("```"),c=a===-1?s:s.substring(0,a),u=JSON.parse(c);return Promise.resolve([{command:"github.copilot.newNotebook",arguments:[{turn:r,outline:u}],title:"Create Notebook"}])}catch{}return[]};this.responseProcessor=new D6;this.promptCrafter=new class{async buildPrompt(s,a,c,u,l,d){let f=s.getLatestTurn().request.message,m=s.turns.length>1?s.turns.slice(0,-1):[];return await new nt(a,A6,{query:f,history:m,chatVariables:c},e.get(ye),e).render(u,d)}}}};var L8=W(lr());var Fwe="Review the currently selected code.",O8=class extends wo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(_t).activeTextEditor;return new nt(n,mE,{query:u,history:l,chatVariables:i,editor:d,document:d?.document,selection:d?.selection,logService:this.accessor.get(ce)},this.accessor.get(ye),this.accessor)}},M8=class{constructor(){this.id="review";this.locations=[2,1];this.description=L8.t("Review the selected code in your active editor");this.intentDetectionInput={sampleQuestion:Fwe}}static{this.ID="review"}async invoke(e,r,n){let i=r.documentContext,o=new Yg(e,i?[new eJ(i.document.uri)]:[]),s=r.location,a=await e.get(Ge).getUserRequestEndpoint(s,this.id,"gpt-4");if(s===1){let c=new class extends O8{async buildPrompt(u,l,d,p,f,m){let h=u.getLatestTurn();return h?.request.message===""&&(h.request={message:Fwe,type:"user"}),super.buildPrompt(u,l,d,p,f,m)}}(e);return{intent:this,location:s,endpoint:a,promptCrafter:c,createReplyInterpreter:i?u=>new tJ(e,i.document,u):void 0,responseProcessor:o}}return{intent:this,location:s,endpoint:a,promptCrafter:new O8(e),responseProcessor:o}}async asSlashCommand(e,r){return{command:this.id,detail:this.description}}},eJ=class{constructor(e){this.file=e}async linkify(e,r){let n=0,i=[];for(let o of aX(e))i.push(e.substring(n,o.linkOffset)),i.push(d6(e.substring(o.linkOffset,o.linkOffset+o.linkLength),this.file.with({fragment:String(o.from+1)}))),n=o.linkOffset+o.linkLength;return i.push(e.substring(n)),{text:i.join(""),trustedCommands:[oE]}}},tJ=class{constructor(e,r,n){this.accessor=e;this.document=r;this.progress=n;this.updating=!1;this.text="";this.reviewService=this.accessor.get(Pm)}update(e){if(this.text=e,!this.updating){this.updating=!0;let n=new Ja(L8.t({message:`Receiving [diagnostics](command:workbench.panel.markers.view.focus)...
`,comment:"{Locked='](command:workbench.panel.markers.view.focus)'}"}));n.isTrusted={enabledCommands:["workbench.panel.markers.view.focus"]},this.progress.report({content:n})}return this.reviewService.getDiagnosticCollection().set(this.document.uri,sX(this.document,this.text)),{shouldFinish:!1}}async finish(){let r=this.reviewService.getDiagnosticCollection().get(this.document.uri);return{type:"conversational",content:L8.t("Received {0} diagnostics.",r?.length||0)}}};var $we=W(lr());function F8(t,e=!1){let r=t.length,n=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,d=0;function p(y,S){let x=0,T=0;for(;x<y||!S;){let L=t.charCodeAt(n);if(L>=48&&L<=57)T=T*16+L-48;else if(L>=65&&L<=70)T=T*16+L-65+10;else if(L>=97&&L<=102)T=T*16+L-97+10;else break;n++,x++}return x<y&&(T=-1),T}function f(y){n=y,i="",o=0,s=16,d=0}function m(){let y=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&TE(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&TE(t.charCodeAt(n)))for(n++;n<t.length&&TE(t.charCodeAt(n));)n++;else return d=3,t.substring(y,n);let S=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&TE(t.charCodeAt(n))){for(n++;n<t.length&&TE(t.charCodeAt(n));)n++;S=n}else d=3;return t.substring(y,S)}function h(){let y="",S=n;for(;;){if(n>=r){y+=t.substring(S,n),d=2;break}let x=t.charCodeAt(n);if(x===34){y+=t.substring(S,n),n++;break}if(x===92){if(y+=t.substring(S,n),n++,n>=r){d=2;break}switch(t.charCodeAt(n++)){case 34:y+='"';break;case 92:y+="\\";break;case 47:y+="/";break;case 98:y+="\b";break;case 102:y+="\f";break;case 110:y+=`
`;break;case 114:y+="\r";break;case 116:y+="	";break;case 117:let L=p(4,!0);L>=0?y+=String.fromCharCode(L):d=4;break;default:d=5}S=n;continue}if(x>=0&&x<=31)if(Y2(x)){y+=t.substring(S,n),d=2;break}else d=6;n++}return y}function g(){if(i="",d=0,o=n,c=a,l=u,n>=r)return o=r,s=17;let y=t.charCodeAt(n);if(rJ(y)){do n++,i+=String.fromCharCode(y),y=t.charCodeAt(n);while(rJ(y));return s=15}if(Y2(y))return n++,i+=String.fromCharCode(y),y===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,u=n,s=14;switch(y){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=h(),s=10;case 47:let S=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!Y2(t.charCodeAt(n));)n++;return i=t.substring(S,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;let x=r-1,T=!1;for(;n<x;){let L=t.charCodeAt(n);if(L===42&&t.charCodeAt(n+1)===47){n+=2,T=!0;break}n++,Y2(L)&&(L===13&&t.charCodeAt(n)===10&&n++,a++,u=n)}return T||(n++,d=1),i=t.substring(S,n),s=13}return i+=String.fromCharCode(y),n++,s=16;case 45:if(i+=String.fromCharCode(y),n++,n===r||!TE(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;n<r&&v(y);)n++,y=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(y),n++,s=16}}function v(y){if(rJ(y)||Y2(y))return!1;switch(y){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function b(){let y;do y=g();while(y>=12&&y<=15);return y}return{setPosition:f,getPosition:()=>n,scan:e?b:g,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenStartLine:()=>c,getTokenStartCharacter:()=>o-l,getTokenError:()=>d}}function rJ(t){return t===32||t===9}function Y2(t){return t===10||t===13}function TE(t){return t>=48&&t<=57}var Uwe;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(Uwe||(Uwe={}));var U8;(function(t){t.DEFAULT={allowTrailingComma:!1}})(U8||(U8={}));function Bwe(t,e=[],r=U8.DEFAULT){let n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}return qwe(t,{onObjectBegin:()=>{let c={};s(c),o.push(i),i=c,n=null},onObjectProperty:c=>{n=c},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(c,u,l)=>{e.push({error:c,offset:u,length:l})}},r),i[0]}function qwe(t,e,r=U8.DEFAULT){let n=F8(t,!1),i=[];function o(z){return z?()=>z(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(z){return z?()=>z(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(z){return z?D=>z(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function c(z){return z?D=>z(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let u=s(e.onObjectBegin),l=c(e.onObjectProperty),d=o(e.onObjectEnd),p=s(e.onArrayBegin),f=o(e.onArrayEnd),m=c(e.onLiteralValue),h=a(e.onSeparator),g=o(e.onComment),v=a(e.onError),b=r&&r.disallowComments,y=r&&r.allowTrailingComma;function S(){for(;;){let z=n.scan();switch(n.getTokenError()){case 4:x(14);break;case 5:x(15);break;case 3:x(13);break;case 1:b||x(11);break;case 2:x(12);break;case 6:x(16);break}switch(z){case 12:case 13:b?x(10):g();break;case 16:x(1);break;case 15:case 14:break;default:return z}}}function x(z,D=[],E=[]){if(v(z),D.length+E.length>0){let k=n.getToken();for(;k!==17;){if(D.indexOf(k)!==-1){S();break}else if(E.indexOf(k)!==-1)break;k=S()}}}function T(z){let D=n.getTokenValue();return z?m(D):(l(D),i.push(D)),S(),!0}function L(){switch(n.getToken()){case 11:let z=n.getTokenValue(),D=Number(z);isNaN(D)&&(x(2),D=0),m(D);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return S(),!0}function M(){return n.getToken()!==10?(x(3,[],[2,5]),!1):(T(!1),n.getToken()===6?(h(":"),S(),Z()||x(4,[],[2,5])):x(5,[],[2,5]),i.pop(),!0)}function q(){u(),S();let z=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(z||x(4,[],[]),h(","),S(),n.getToken()===2&&y)break}else z&&x(6,[],[]);M()||x(4,[],[2,5]),z=!0}return d(),n.getToken()!==2?x(7,[2],[]):S(),!0}function O(){p(),S();let z=!0,D=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(D||x(4,[],[]),h(","),S(),n.getToken()===4&&y)break}else D&&x(6,[],[]);z?(i.push(0),z=!1):i[i.length-1]++,Z()||x(4,[],[4,5]),D=!0}return f(),z||i.pop(),n.getToken()!==4?x(8,[4],[]):S(),!0}function Z(){switch(n.getToken()){case 3:return O();case 1:return q();case 10:return T(!0);default:return L()}}return S(),n.getToken()===17?r.allowEmptyContent?!0:(x(4,[],[]),!1):Z()?(n.getToken()!==17&&x(9,[],[]),!0):(x(4,[],[]),!1)}var Hwe;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(Hwe||(Hwe={}));var jwe;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(jwe||(jwe={}));var Q2=Bwe;var Gwe;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(Gwe||(Gwe={}));var q8=W(st());var B8=class extends Y{render(e,r){return vscpp(vscppf,null,vscpp(q8.SystemMessage,{priority:1e3},"You are a VS Code search expert who helps to write search queries for text in a workspace. Users want to search across a whole workspace. Your response will contain parameters to use in the search that targets what the user wants.",vscpp("br",null),vscpp(Lr,null),vscpp(ar,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"The user's question is ALWAYS related to search or replace. When the user's question does not seem to be related to searching or replacing, you MUST assume that they're searching for or replacing what they are describing.",vscpp("br",null),`For example, if the user says "emojis", try appending "I'm looking for _____" to the beginning (e.g. I'm looking for emojis) to make more sense of it.`,vscpp("br",null),vscpp("br",null),"For all valid questions, you MUST respond with a JSON object with search parameters to use.",vscpp("br",null),'- Your answer MUST wrap the JSON object in "[ARGS START]" and "[ARGS END]". "[ARGS START]" must be on a new line.',vscpp("br",null),'- Your answer MUST have an explanation in full, human-readable sentences. This goes before the "[ARGS START]" line.',vscpp("br",null),vscpp("br",null),'If you put a regex in the "query" parameter, make sure to set "isRegex" to true.',vscpp("br",null),'If you put a regex in the "query" parameter, do not start and/or end with forward slashes to denote a regex literal.',vscpp("br",null),"You MUST NOT give an answer with an empty-string query parameter.",vscpp("br",null),vscpp("br",null),'The "replace" string will be used to replace the query-matched search results.',vscpp("br",null),vscpp("br",null),'If you want to target certain files, set "filesToInclude" to a glob pattern. DO NOT assume the "filesToInclude" and "filesToExclude" without being very sure that the user wants to target these files!',vscpp("br",null),vscpp("br",null),'If the query is case sensitive, set "isCaseSensitive" to true.',vscpp("br",null),vscpp("br",null),"By default, all string fields are the empty string, and all boolean fields are false. Only list the fields you want to change.",vscpp("br",null),vscpp("br",null),"You should write the JSON object of the search parameters in the following format:",vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": ...,',vscpp("br",null),'	"replace": ...,',vscpp("br",null),'	"filesToInclude": ...,',vscpp("br",null),'	"filesToExclude": ...,',vscpp("br",null),'	"isRegex": ...,',vscpp("br",null),'	"isCaseSensitive": ...,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Search for 'foo' in all files under my 'src' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Populate the query field with 'foo' and specify the files to include as 'src/'.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "foo",',vscpp("br",null),'	"filesToInclude": "src" ,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all CamelCase words in all files under the 'src/extensions' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a regex search for camelCase variables by checking for any word that has a lowercase letter followed by an uppercase letter, followed by any number of lowercase letters. You can use `\\b[a-z]+[A-Z][a-z]+\\b` to acheive this.",vscpp("br",null),"This must be case-sensitive since the capitalization of the letters in our regex matters.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "\\\\b[a-z]+[A-Z][a-z]+\\\\b",',vscpp("br",null),'	"filesToInclude": "src/extensions" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all hex color codes in css files",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a search for 6-digit or 3-digit hex color codes using the regex `#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\b`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\\\b",',vscpp("br",null),'	"filesToInclude": "*.css" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all HTTPS links in markdown.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Search all URLs that have the HTTPS protocol in a markdown file. Make sure to include all valid URL characters in their respective places. This regex should achieve this: `https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#()?&//=]*)`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#()?&//=]*)",',vscpp("br",null),'	"filesToInclude": "*.md" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all YYYY-MM-DD dates with MM/DD/YYYY dates. Don't do this in typescript files.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"You will need to use the regex `(\\d{4})-(\\d{2})-(\\d{2})` to match the YYYY-MM-DD date format. Then, you will need to use the replace string `$2/$3/$1` to replace the date with the MM/DD/YYYY format.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "(\\\\d{4})-(\\\\d{2})-(\\\\d{2})",',vscpp("br",null),'	"replace: "$2/$3/$1",',vscpp("br",null),'	"filesToExclude": "*.ts",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all camel case variable names with snake case variable names.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To replace all camel case variables with snake case, we will need to:",vscpp("br",null),"1. Find all sequences of lowercase letters succeeded by uppercase letters. Use `([a-z]+)([A-Z])` to capture these sequences.",vscpp("br",null),"2. Separate them with an underscore character. `$1_$2` does this.",vscpp("br",null),"3. Convert both characters to lowercase. Adjust the previous replace text to be `\\l$1_\\l$2`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "([a-z]+)([A-Z])",',vscpp("br",null),'	"replace: "\\\\l$1_\\\\l$2",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"alphanumeric",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all alphanumeric characters, you can use the regex `[a-zA-Z0-9]`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "[a-zA-Z0-9]",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"link",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all web links, use the regex `https?:\\/\\/\\S+`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/\\\\S+",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),'Search for actionbar files outside of my "extensions" directoy',vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To do this, use the query `actionbar` in all files except the ones in `extensions`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "actionbar",',vscpp("br",null),'	"filesToExclude": "extensions",',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"typescript for loop",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),'To look for "for" loops in most languages, use the query `for\\s*\\(`.',vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "for\\s*\\(",',vscpp("br",null),'	"isRegex: true,',vscpp("br",null),'	"filesToInclude: "*.ts"',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Vt,{priority:600,history:this.props.history})),vscpp(uu,{priority:700}),vscpp(hn,{priority:800,document:this.props.document,range:this.props.selection}),vscpp(q8.UserMessage,{priority:900},this.props.query))}};function vtt(t){if(!t)return[];let e=[],r={query:t.query??"",replace:t.replace??"",filesToInclude:t.filesToInclude??"",filesToExclude:t.filesToExclude??"",isRegex:t.isRegex??!1,isCaseSensitive:t.isRegex??!1};return e.push({command:"github.copilot.executeSearch",arguments:[r],title:"Search"}),e}function Vwe(t){let e=As(t).at(0),r;if(e){let n;try{n=Q2(e.code)}catch{}n&&(r=n)}return r}function ytt(t){if(!t)return[];let e=[`| Parameter  | Value |
`,`| ------ | ----- |
`];for(let[r,n]of Object.entries(t)){if(n==="")continue;let i=n;(typeof n=="string"||n instanceof String)&&(i=n.replace(/\|/g,"\\|")),e.push(`| ${r} | \`${i}\` |
`)}return e.push(`
`),e}var zwe="Search for 'foo' in all files under my 'src' directory",nJ=class extends wo{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new nt(n,B8,{query:u,history:l},this.accessor.get(ye),this.accessor)}},H8=class{constructor(){this.id="search";this.locations=[2];this.description=$we.t("Generate query parameters for workspace search");this.intentDetectionInput={sampleQuestion:zwe};this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:Il,sampleRequest:zwe}}static{this.ID="search"}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new nJ(e),responseProcessor:new XS([{start:"[ARGS END]",stop:"[ARGS START]"}],s=>ytt(Vwe(s.join("")))),commands:async(s,a)=>{let c=Vwe(a.response?.message??"");return vtt(c)}}}};var X2=W(lr());var iJ=class extends wo{constructor(r){super();this.accessor=r}async createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=await N2(this.accessor,1e3,a);return new nt(n,dE,{query:u,history:l,fileTree:d},this.accessor.get(ye),this.accessor)}},Wwe="Where is the toolbar code?",j8=class{constructor(){this.id="semanticSearch";this.locations=[2];this.description=X2.t("Find relevant code to your query");this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!1,sampleRequest:Wwe};this.intentDetectionInput={sampleQuestion:Wwe}}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new iJ(e),responseProcessor:new oJ(e,o)}}},oJ=class{constructor(e,r){this.accessor=e;this.endpoint=r}async processResponse(e,r,n,i,o){let s=r[r.length-1].content,a=0,c="";for await(let{delta:l}of n)a+=l.text.length,c+=l.text;i.progress(X2.t("Looking for relevant code"));let u=sE(s,c);return btt(this.accessor,this.endpoint,u,o).then(l=>_tt(this.accessor,l,i))}};async function btt(t,e,r,n){let i=t.get(Ag),o=await B0(t,{valueFor4096:8,maxMultiplier:4});return iX(i,e,r,o,n,!0)}function _tt(t,e,r){if(e.length===0){let o=X2.t(`No relevant code found. Please be more specific.
`);return r.markdown(o),o}r.markdown(X2.t(`Here is some relevant code:

`));let n=t.get(rt),i="";for(let o of e)i+=xtt(o,r,n);return i}function xtt(t,e,r){let n=[],o=`## ${bg(r,t.file)}

`;return e.markdown(o),n.push(o),t.locations.forEach(s=>{let a={uri:t.file,range:Nl(s.range)},c=s.range.startLineNumber,u=s.range.endLineNumber,l=c+1===u?`Line ${c+1}`:`Lines ${c+1}-${u}`;e.markdown("- "),e.anchor(a,l),e.markdown(`

`),n.push(l+`

`),e.markdown(s.code+`
`),n.push(s.code+`
`)}),n.join("")}var sJ=W(lr());var IE=W(st());var G8=class extends Y{render(e){return vscpp(vscppf,null,vscpp(IE.SystemMessage,{priority:1e3},"You are a programmer who specializes in using the command line. Your task is to help the Developer craft a command to run on the command line.",vscpp("br",null),vscpp(Lr,null),vscpp(di,null),vscpp(Xn,null),vscpp(vr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",`
1. Read the provided relevant workspace information (file names, project files in the project root) to understand the user's workspace.`,`
2. Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
    - Prefer single line commands.
    - Omit an explanation unless the suggestion is complex, if an explanation is included then be concise.
    - Provide the command suggestions using the active shell and operating system.
    - When there is text that needs to be replaced in the suggestion, prefix the text with '{', suffix the text with '}' and use underscores instead of whitespace. Only do this when the replacement text is NOT provided.
    - Say "I'm not quite sure how to do that." when you aren't confident in your explanation`,Kwe(this.props.shellType)?"\n    - Prefer idiomatic PowerShell over aliases for other shells or system utilities. For example use `Stop-Process` or `Get-NetTCPConnection` instead of `kill` or `lsof` respectively.\n	- Only use unix utilities when there is no PowerShell equivalent.\n    - Prefer cross-platform PowerShell scripting that works on any operating system.":`
    - Only use a tool like python or perl when it is not possible with the shell.`,`
3. At the end of the response, list all text that needs to be replaced with associated descriptions in the form of a markdown list
`.trim(),vscpp("br",null)),vscpp(IE.SystemMessage,{priority:700},"Examples:",vscpp("br",null),Stt(this.props.shellType)),this.props.history&&vscpp(vscppf,null,vscpp(Vt,{priority:600,history:this.props.history})),vscpp(IE.UserMessage,{priority:800},"The active terminal's shell type is:",vscpp("br",null),this.props.shellType),vscpp(IE.UserMessage,{priority:800},"The active operating system is:",vscpp("br",null),this.props.osName),vscpp(pi,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};function Stt(t){let e=['User: How do I revert a specific commit?\nAssistant:\n```sh\ngit revert {commit_id}\n```\n\nUser: How do I commit in git?\nAssistant:\n```sh\ngit commit -m "{message}"\n```'];switch(Kwe(t)||e.push("User: go to the foo dir\nAssistant:\n```sh\ncd foo\n```"),t){case"ps1":case"pwsh":case"powershell":{e.push("User: go to the foo dir\nAssistant:\n```pwsh\ncd .\\foo\\\n```\n\nUser: How do I delete a directory?\nAssistant:\n```pwsh\nRemove-Item {dir_name}\n```\n\nUser: create a file called foo\nAssistant:\n```pwsh\nNew-Item -ItemType File -Name foo\n```");break}case"bash":{e.push("User: Print all files starting with \"pre\"\n```bash\nfind . -type f -name 'pre*'\n```");break}default:{e.push("\nUser: How do I print all files recursively within a directory?\nAssistant:\n```sh\nls -lR\n```");break}}return e.join(`

`)}function Kwe(t){return t==="ps1"||t==="pwsh"||t==="powershell"}var V8=class{constructor(){this.locations=[2];this.id="terminal";this.description=sJ.t("Ask how to do something in the terminal");this.intentDetectionInput={sampleQuestion:"How do I list files in the terminal"};this.commandInfo={sampleRequest:sJ.t("How do I view all files within a directory including sub-directories")}}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return new aJ(e,this,o,i)}},aJ=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;let o=this,s=e.get(mt).OS,a=e.get($i).terminalShellType;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=u.turns.length>1?u.turns.slice(0,-1):[];return await new nt(l,G8,{query:g,chatVariables:d,history:v,osName:s,shellType:a},e.get(ye),o.accessor).render(p,m)}}}async followUps(e,r){let n="Explain the suggested command",i=!1,o=r.response?.message;if(o){let a=As(o);if(a.length===0)return[];a.length===1?n=`Explain this command:

${s(a[0])}`:(i=!0,n=`Explain these commands:${a.map(c=>`

${s(c)}`).join("")}`)}return[{prompt:n,label:i?"Explain the suggested commands":"Explain the suggested command"}];function s(a){return`${a.startMarkup}${a.language}
${a.code.trim()}
${a.startMarkup}`}}};var e2e=W(lr());var CE={location:"sameFolder",prefix:"test_",suffixes:[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"]},wE={csharp:{suffixes:["Test"],location:"testFolder"},dart:{suffixes:["_test"],location:"testFolder"},go:{suffixes:["_test"],location:"sameFolder"},java:{suffixes:["Test"],location:"testFolder"},javascript:{suffixes:[".test",".spec"],location:"sameFolder"},javascriptreact:{suffixes:[".test",".spec"],location:"sameFolder"},kotlin:{suffixes:["Test"],location:"testFolder"},php:{suffixes:["Test"],location:"testFolder"},powershell:{suffixes:[".Tests"],location:"testFolder"},python:{prefix:"test_",location:"testFolder"},ruby:{suffixes:["_test","_spec"],location:"testFolder"},rust:{suffixes:[""],location:"testFolder"},swift:{suffixes:["Tests"],location:"testFolder"},typescript:{suffixes:[".test",".spec"],location:"sameFolder"},typescriptreact:{suffixes:[".test",".spec"],location:"sameFolder"}},Ett={cs:"csharp",dart:"dart",go:"go",java:"java",js:"javascriptreact",kt:"kotlin",php:"php",ps1:"powershell",py:"python",rb:"ruby",rs:"rust",swift:"swift",ts:"typescript",tsx:"typescriptreact"},Ttt=function(){let t={};for(let[e,r]of Object.entries(Ett))t[e]=wE[r];return t}(),RE=class{constructor(e,r){this._search=e;this._tabs=r}_findTabMatchingPattern(e){return this._tabs.tabs.find(n=>n.uri&&n.uri.scheme!==Hr.untitled&&c5(n.uri,e))?.uri}async findTestFileForSourceFile(e,r){if(e.isUntitled)return;let n=xc(e.uri),i=Xa(e.uri),o=wE[e.languageId]??CE,s=[];if(o.prefix&&s.push(o.prefix+n),o.suffixes)for(let u of o.suffixes??[]){let l=n.replace(`${i}`,`${u}${i}`);s.push(l)}let a=`**/{${s.join(",")}}`,c=this._findTabMatchingPattern(a);return c||(c=await this._search.findFilesWithDefaultExcludes(a,1,r)),c}async findAnyTestFileForSourceFile(e,r){let n=wE[e.languageId]??CE,i=[];if(n.prefix&&i.push(`${n.prefix}*`),n.suffixes){let a=Xa(e.uri);for(let c of n.suffixes??[])i.push(`*${c}${a}`)}let o=`**/{${i.join(",")}}`,s=this._findTabMatchingPattern(o);return s||(s=await this._search.findFilesWithDefaultExcludes(o,1,r)),s}async findFileForTestFile(e,r){let n=wE[e.languageId]??CE,i=xc(e.uri),o=[];n.suffixes&&o.splice(0,0,...n.suffixes),n.prefix&&o.splice(0,0,n.prefix);for(let s of o){let a=i.replace(s,"");if(a!==i){let c=`**/${a}`,u=this._findTabMatchingPattern(c);if(u||(u=await this._search.findFilesWithDefaultExcludes(c,1,r)),u)return u}}}};function AE(t){let e;gt.isUri(t)||(e=wE[t.languageId],t=t.uri);let r=xc(t),n=Xa(t);return e??=Ttt[n.replace(".","")],e?!(e.suffixes&&!e.suffixes.some(o=>r.endsWith(o+n))||e.prefix&&!r.startsWith(e.prefix)):!!(CE.suffixes.some(o=>r.endsWith(o+n))||r.startsWith(CE.prefix))}function Ywe(t){let e=wE[t.languageId]??CE,r=xc(t.uri);if(e.prefix)return e.prefix+r;let n=Xa(t.uri),i=e.suffixes&&e.suffixes.length>0?e.suffixes[0]:".test";return r.replace(`${n}`,`${i}${n}`)}var Z2=W(st());var cJ=W(st()),Qwe=W(require("assert"));var J2=class extends vc{constructor(r){super();this.uri=r}},z8=class extends Y{async prepare(e,r,n){let{documentContext:i}=this.props,o=this.accessor.get(Oe);if(AE(i.document)||await o.isCopilotIgnored(i.document.uri))return;let s=new RE(this.accessor.get(ya),this.accessor.get(_t)),a,c=await s.findTestFileForSourceFile(i.document,n??qr.None);if(c!==void 0)a="candidateTestFile";else{let p=await s.findAnyTestFileForSourceFile(i.document,n??qr.None);a="anyTestFile",c=p}if(c===void 0||await o.isCopilotIgnored(c))return;let u;try{u=await this.accessor.get(rt).openTextDocument(c)}catch{return}let l=await Yd(this.accessor,this.props.documentContext.document,this.props.documentContext.fileIndentInfo),d=du(e.tokenBudget*4,u,new Je(0,0,0,0),l,await lu(this.accessor));if(a==="anyTestFile")return{kind:a,doc:c,codeExcerpt:d.document,promptReferences:[new Co.PromptReference(c)]};if(a==="candidateTestFile")return{kind:a,doc:c,codeExcerpt:d.document,promptReferences:[new Co.PromptReference(c)],candidateTestFile:c};(0,Qwe.default)(!1,"impossible: unexpected kind")}render(e,r){if(e!==void 0)switch(e.kind){case"candidateTestFile":return vscpp(cJ.UserMessage,null,vscpp("meta",{value:new J2(e.candidateTestFile)}),vscpp("references",{value:e.promptReferences}),"Excerpt of the existing test file:",vscpp("br",null),vscpp(vt,{uri:e.doc,code:e.codeExcerpt.text,languageId:e.codeExcerpt.languageId}),vscpp("br",null),"Because a test file exists: ",vscpp("br",null),"- Do not generate preambles, like imports, copyright headers etc.",vscpp("br",null),"- Do generate code that can be appended to the existing test file.");case"anyTestFile":return vscpp(cJ.UserMessage,null,"This is a sample test file:",vscpp("br",null),vscpp(vt,{uri:e.doc,code:e.codeExcerpt.text,languageId:e.codeExcerpt.languageId}))}}};var Xwe=require("util");var $8=re("ITestDepsResolver"),PE=class{constructor(e,r){this._searchService=e;this._fileSystemService=r;this._jsTsTestDeps=new Set(["mocha","jest","chai","ava","jasmine","qunit","tape","cypress","puppeteer","enzyme","testing-library","sinon","supertest","happy-dom"]);this._cachedResults=new Map,this._textDecoder=new Xwe.TextDecoder}async getTestDeps(e){if(this._cachedResults.has(e))return this._cachedResults.get(e);let r=[];switch(e){case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":{r=await this._findTestDepInPackageJSON();break}default:r=[];break}return this._cachedResults.set(e,r),r}async _findTestDepInPackageJSON(){let e=await this._searchService.findFiles("**/package.json",{exclude:"**/node_modules/**",useDefaultExcludes:!0});return(await Promise.allSettled(e.map(async n=>{let i=await this._fileSystemService.readFile(n),o=JSON.parse(this._textDecoder.decode(i)),s=o.dependencies||{},a=o.devDependencies||{};return[s,a].flatMap(u=>Object.keys(u).filter(l=>this._jsTsTestDeps.has(l)))}))).flatMap(n=>n.status==="fulfilled"?n.value:[])}};PE=we([de(0,ya),de(1,gi)],PE);var W8=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.documentContext=o;this.createReplyInterpreter=kS.createFactory(async(e,r)=>{let n=As(e);if(n.length===0)return{type:"conversational",content:e};let i=n[0],s=e.split(`
`).slice(0,i.startLine).join(`
`).trimEnd();r.report({content:s});let a=i.code,c=this.documentContext.document,u=this.promptCrafter.existingTestFile;if(u){let f=await this.accessor.get(rt).openTextDocument(u),m=new qT;return m.set(u,[hi.insert(new Bn(f.lineCount,0),a)]),{type:"workspaceEdit",workspaceEdit:m}}let l=Ywe(c),d=Ji.joinPath(c.uri,`../${l}`).with({scheme:Hr.untitled}),p=new qT;return p.createFile(d,{ignoreIfExists:!0}),p.replace(d,new Je(0,0,0,0),a),{type:"workspaceEdit",workspaceEdit:p}});this.promptCrafter=new uJ(i,r,o,n)}},uJ=class{constructor(e,r,n,i){this._accessor=e;this._endpoint=r;this._documentContext=n;this._location=i}get selectionContextMetadata(){return iA(this._selectionContextMetadata!==void 0,"not undefined"),this._selectionContextMetadata}get existingTestFile(){return this._existingTestFile}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn()?.request.message,c=e.turns.at(-2)?.request.message,u=new nt(this._endpoint,lJ,{history:c,context:this._documentContext,endpoint:this._endpoint,userQuery:a??"",location:this._location},this._accessor.get(ye),this._accessor),l=await u.render(i,s),d=u.getMeta(J2);return d&&(this._existingTestFile=d.uri),this._selectionContextMetadata=u.getMeta(Ki),l}},lJ=class extends Y{async prepare(e,r,n){let{context:i}=this.props,o=await Yd(this.accessor,i.document,i.fileIndentInfo),s=this.accessor.get(Ir).getTreeSitterAST(i.document),a=i.selection,c;if(s!==void 0){let f=await s.getNodeToDocument(mo(i.selection,i.document));a=ds(i.document,f.nodeToDocument),c=f.nodeIdentifier}let u=4*(e.tokenBudget/2),l=du(u,i.document,a,o,await lu(this.accessor));return{testFrameworks:await this.accessor.get($8).getTestDeps(this.props.context.document.languageId),identifier:c,summarization:l}}render(e,r){let{history:n,context:i,endpoint:o,userQuery:s,location:a}=this.props,c=e.summarization,u=i.language.languageId,l=e.identifier?`\`${e.identifier}\``:"my code";return vscpp(vscppf,null,vscpp(Z2.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),vscpp(Lr,null),vscpp("br",null),vscpp(di,null),vscpp("br",null),a===1?vscpp(vscppf,null,"The user has a ",u," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Answer with a single ",u," code block."):a===2?vscpp(vscppf,null,"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn."):void 0,e.testFrameworks.length>0&&vscpp(vscppf,null,vscpp("br",null),"The project has following testing dependencies: ",e.testFrameworks.join(", "),".")),n&&vscpp(Z2.UserMessage,null,n),vscpp(z8,{documentContext:i,endpointInfo:o}),vscpp(Z2.UserMessage,null,"Here is the current file at `",i.document.uri.path,"`:",vscpp("br",null),vscpp("br",null),vscpp(vt,{uri:i.document.uri,languageId:i.document.languageId,code:c.document.text}),vscpp("br",null),vscpp("br",null),`Please, generate tests for ${l}. ${s}`.trim()))}};var kE=W(st());var Jwe=W(st()),Zwe=require("util");var K8=class extends Y{async prepare(e,r,n){let{documentContext:i,endpointInfo:o}=this.props;if(!AE(i.document))return;let a=await new RE(this.accessor.get(ya),this.accessor.get(_t)).findFileForTestFile(i.document,n??qr.None);if(a===void 0||await this.accessor.get(Oe).isCopilotIgnored(a))return;let c=o.modelMaxPromptTokens*4/3;function u(d,p,f=c){return`${Ao.forUri(i.language,d)}

${p.substring(0,f)}`}let l;try{let d=await this.accessor.get(rt).openTextDocument(a),p=d.getText(),f=await ZY(this.accessor,d,100),{outlineAbove:m,outlineBelow:h}=bQ(p,f,{startOffset:p.length,endOffset:p.length},""),g=`${m}
${h}`;l=new Ja(`
This is an excerpt of the file that this test is covering:

`),l.appendCodeblock(u(a,g),i.document.languageId)}catch{}if(!l){l=new Ja(`
This is an excerpt of the file that this test is covering:

`);let p=await this.accessor.get(gi).readFile(a),f=new Zwe.TextDecoder().decode(p),m=u(a,f);l.appendCodeblock(m,i.document.languageId)}return{message:l,references:[new Co.PromptReference(a)]}}render(e,r){if(e!==void 0)return vscpp(Jwe.UserMessage,null,vscpp("references",{value:e.references}),e.message.value)}};var Y8=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.context=o;this.responseProcessor={processResponse:async(e,r,n,i)=>{try{let o=[es.begin(this.context.language),es.end(this.context.language),Ao.forLanguage(this.context.language)];for await(let s of aQ(Ru.map(n,a=>a.text)))s.kind===1&&o.some(a=>s.value.startsWith(a))||i.markdown(s.value)}catch(o){console.error(o)}return""}};this.createReplyInterpreter=(e,r)=>this.promptCrafter.createReplyInterpreter(e,r);this.promptCrafter=new dJ(i,r,o)}},dJ=class{constructor(e,r,n){this._accessor=e;this._endpoint=r;this._docCtx=n;this.replyInterpreterFactory=null}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn()?.request.message,c=e.turns.at(-2)?.request.message,u=this._docCtx,l=new nt(this._endpoint,pJ,{history:c,context:u,endpoint:this._endpoint,userQuery:a??""},this._accessor.get(ye),this._accessor),d=await l.render(i,s);return this.replyInterpreterFactory=l.getReplyInterpreterFactory(),this.selectionContextMetadata=l.getMeta(Ki),d}createReplyInterpreter(e,r){if(this.replyInterpreterFactory)return this.replyInterpreterFactory(e,r);if(!this.selectionContextMetadata)throw new Error("Could not create reply interpreter without selection context metadata");return r?new NS(this._accessor,this.selectionContextMetadata,this._docCtx,4,!1,e):new DS(this._accessor,this.selectionContextMetadata,this._docCtx,4,e)}},pJ=class extends Y{render(e,r){let{history:n,context:i,endpoint:o,userQuery:s}=this.props;return vscpp(vscppf,null,vscpp(kE.SystemMessage,null,"You are an AI programming assistant.",vscpp("br",null),vscpp(Lr,null),vscpp("br",null),"The user has a ",i.language.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Answer with a single ",i.language.languageId," code block.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),vscpp(di,null)),n&&vscpp(kE.UserMessage,null,n),vscpp(K8,{documentContext:i,endpointInfo:o}),gr(i.document.uri)?vscpp(Hg,{documentContext:i}):vscpp(fJ,{documentContext:i}),vscpp(kE.UserMessage,null,`Please, generate more tests, taking into account existing tests. ${s}`.trim()))}},fJ=class extends Y{async prepare(e,r,n){let{documentContext:i}=this.props;return{structure:await Yd(this.accessor,i.document,i.fileIndentInfo),wholeRange:i.document.validateRange(i.wholeRange),summarizedDocumentSettings:await lu(this.accessor),isIgnored:await this.accessor.get(Oe).isCopilotIgnored(i.document.uri)}}render(e,r){if(gr(this.props.documentContext.document.uri))throw Fn("InlineChatEditCodePrompt should not be used with a notebook!");if(e.isIgnored)return;let i=r.endpoint.modelMaxPromptTokens/3*4,o=du(i,this.props.documentContext.document,e.wholeRange,e.structure,e.summarizedDocumentSettings),{language:s,document:a}=this.props.documentContext,{document:c,adjustedSelection:u}=o,l=c.transformer.fromOffsetRange(u),d=c.text.substring(0,u.start),p=c.text.substring(u.endExclusive),f=c.text.substring(u.start,u.endExclusive),m=d.trim().length>0||p.trim().length>0,h=`${d}$SELECTION_PLACEHOLDER$${p}`,g=b=>new CS(b,l,y=>y.trim()!=="$SELECTION_PLACEHOLDER$");return vscpp(kE.UserMessage,null,vscpp("replyInterpreter",{value:(b,y)=>new Ky(b,y,c,this.props.documentContext.fileIndentInfo,g)}),"I have the following code in a file called `",vscpp(Gf,{value:a.uri,mode:1}),"`:",m&&vscpp(vscppf,null,vscpp(vt,{uri:a.uri,languageId:s.languageId,code:h,shouldTrim:!1}),vscpp("br",null)),m&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(vt,{uri:a.uri,languageId:s.languageId,code:f,shouldTrim:!1}))}};var Q8=class{constructor(){this.id="tests";this.locations=[2,1];this.description=e2e.t("Generate unit tests for the selected code");this.intentDetectionInput={sampleQuestion:"Write a set of detailed unit test functions for the code above."};this.commandInfo=void 0}static{this.ID="tests"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to generate tests.");if(await e.get(Oe).isCopilotIgnored(n.document.uri))throw new Error("Copilot is disabled for this file.");let o=r.location,s=await e.get(Ge).getUserRequestEndpoint(o,this.id);return AE(n.document)?new Y8(this,s,o,e,n):new W8(this,s,o,e,n)}};var mJ=W(lr());async function t2e(t,e){let r=t.get(Tm);await r.loadIndexes();let n=Itt(r,e.response?.message??"");return Ctt(r,n.settings,n.commands)}function Itt(t,e){let r=[];for(let c of As(e)){if(c.language!=="json"&&c.language!=="")continue;let u;try{u=Q2(c.code)}catch{}u&&!Array.isArray(u)&&r.push(u)}let n=[],i=/\[COMMANDS START\]```(?:json)?(.+)\[COMMANDS END\]/g;e=e.replace(/\n/g,"");let o;for(o of e.matchAll(i)){let c=o[1].trim(),u;try{u=Q2(c)}catch{}u&&Array.isArray(u)&&n.push(...u)}let s=r.map(c=>{for(let u of Object.keys(c))if(!t.hasSetting(u))return!1;return!0}).some(c=>c===!1),a=n.map(c=>{if(c.command&&!t.hasCommand(c.command))return!1}).some(c=>c===!1);return{settings:r,commands:n,validationFailed:s||a}}async function Ctt(t,e,r){let n=[],i=r.length;for(let o of e){let s="";for(let a of Object.keys(o))n.some(c=>c.arguments&&c.arguments[0].includes(`@id:${a}`))||t.hasSetting(a)&&(s+=`@id:${a} `);s=s.trimEnd(),s&&n.push({command:"workbench.action.openSettings",arguments:[s],title:"Show in Settings Editor"})}for(let o of r)if(o.command==="workbench.extensions.search"||o.command==="workbench.extensions.installExtension"){let s=(Array.isArray(o.args)?o.args:[o.args]).filter(a=>typeof a=="string");if(s.length===1){let a=["featured","popular","recentlyPublished","recommended","updates","builtin","enabled","disabled","installed","workspaceUnsupported"];s[0].includes(":")&&!s[0].startsWith("@")?s[0]=`@${s[0]}`:a.includes(s[0])&&(s[0]=`@${s[0]}`)}n.push({command:"workbench.extensions.search",arguments:s,title:"Search Extension Marketplace"})}else{let s=t.getCommand(o.command);if(!s)continue;n.push({command:"workbench.action.quickOpen",arguments:[`>${s.originalLabel}`],title:i>1?`Show "${s.originalLabel}"`:"Show in Command Palette"})}return n}var r2e=W(lr()),Yf=W(st());var X8=class extends Y{async prepare(r,n,i){let o=n?await B2(n,new Us(r2e.t("Searching doc index....")),this.searchDocsSearchForContext(this.props.query,10,i),1e3):await this.searchDocsSearchForContext(this.props.query,10,i),s=this.accessor.get(Tm);this._embeddingCompute??=this.accessor.get(Bs);let a=await this._embeddingCompute?.computeEmbeddings([this.props.query],{},void 0);if(!a)return{docSearchResults:o,settings:[],commands:[]};let{commands:c,settings:u}=n?await B2(n,new Us("Searching command and setting index...."),s.nClosestValues(a[0],5),500):await s.nClosestValues(a[0],5);return{docSearchResults:o,settings:u,commands:c}}async searchDocsSearchForContext(r,n,i){this._docsSearchClient||(this._docsSearchClient=this.accessor.get(l5));try{return this._docsSearchClient.search(r,{repo:"microsoft/vscode-docs"},n,.75,i)}catch{return[]}}render(r){let n=this.accessor.get(mt).OS;return vscpp(vscppf,null,vscpp(Yf.SystemMessage,{priority:1e3},"You are a VS Code assistant. Your job is to assist users in using VS Code by providing knowledge to accomplish their task. This knowledge should focus on settings and commands, but also includes documentation. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",n," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You must respond with either a setting to set or a command to execute when applicable.",vscpp("br",null),"When referring to a command, you must use the command name in markdown bold syntax.",vscpp("br",null),"When referring to any commands, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] at the end of your response which lists all commands you referenced in your response in the order they were referenced in a JSON code block containing a JSON array.",vscpp("br",null),"If a command or setting references another command or setting, you must respond with the original setting or command and the referenced setting or command.",vscpp("br",null),"All referenced settings must be properly formatted in a JSON markdown code block to allow copying them into the user's settings.json file.",vscpp("br",null),"You must not respond with a setting that is not in a properly formatted JSON markdown code block.",vscpp("br",null),"If a setting and command will accomplish the same thing, you must suggest the command instead.",vscpp("br",null),"You must not suggest opening the settings editor.",vscpp("br",null),"If answering with a keybinding, please still include the command bound to the keybinding.",vscpp("br",null),"If a keybinding contains a backtick you must escape it. For example the keybinding Ctrl + backtick would be written as ``ctrl + ` ``",vscpp("br",null),"You must not suggest opening the command palette to execute commands.",vscpp("br",null),"You must not suggest commands or settings identifiers that do not exist.",vscpp("br",null),"If you believe the context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),'If an extension might help the user, you may suggest a search query for the extension marketplace. You must also include the command **Search marketplace** (`workbench.extensions.search`) with args set to the suggested query in the commands section at the end of your response. The query can also contain the tags "@popular", "@recommended", or "@featured" to filter the results.',vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"[EXAMPLES START]",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Settings response",vscpp("br",null),"Question: How do I disable telemetry?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp(vt,{uri:null,code:`{
	"telemetry.telemetryLevel": "off"
}`,languageId:"json"}),"is a setting which can be used to disable telemetry.",vscpp("br",null),vscpp("br",null),"## Command response",vscpp("br",null),"Question: How do I close all editors?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Close All Editors** command to close all editors.",vscpp("br",null),vscpp("br",null),"[COMMANDS START]",vscpp("br",null),vscpp(vt,{uri:null,code:`[
	{"command": "workbench.action.closeAllEditors" }
]`,languageId:"json"}),"[COMMANDS END]",vscpp("br",null),vscpp("br",null),"## No such command",vscpp("br",null),"Question: How do I move the terminal to a new window?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"There is no such command.",vscpp("br",null),vscpp("br",null),"## Invalid Question",vscpp("br",null),"Question: How do I bake a potato?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Sorry this question isn't related to VS Code.",vscpp("br",null),vscpp("br",null),"## Marketplace search",vscpp("br",null),"Question: How do I add PHP support?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Search marketplace** command to search for extensions that add PHP support.",vscpp("br",null),vscpp("br",null),"[COMMANDS START]",vscpp("br",null),vscpp(vt,{uri:null,code:`[
	{"command": "workbench.extensions.search", "args": "php" }
]`,languageId:"json"}),"[COMMANDS END]"),vscpp(Vt,{priority:700,history:this.props.history}),vscpp(Yf.UserMessage,{priority:800},"Relevant information about VS Code:",vscpp("br",null),"The current question is related to VS Code. The application is currently open.",vscpp("br",null),"If a command or setting is not a valid answer, but it still relates to VS Code, please still respond.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"At the end of your response, if you reference a command, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all commands you referenced in your response.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),'Below is a list of commands and settings we found which might be relevant to the question. For view related commands "Toggle" often means Show or Hide. A setting may reference another setting, that will appear as \\`#setting.id#\\`, you must return the referenced setting as well. You may use this context to help you formulate your response, but are not required to.',vscpp("br",null),r.commands.length>0&&vscpp(vscppf,null,"Here are some possible commands:",vscpp("br",null)),r.commands.length>0&&r.commands.map(i=>vscpp(Yf.TextChunk,null,"- ",i.label,' ("',i.key,'") (Keybinding: "',i.keybinding,'")')),r.settings.length>0&&vscpp(vscppf,null,"Here are some possible settings:",vscpp("br",null)),r.settings.length>0&&r.settings.map(i=>vscpp(Yf.TextChunk,null,R7(i))),r.docSearchResults.length>0&&vscpp(vscppf,null,"Below is a list of information from the VS Code documentation which might be relevant to the question. Feel free to use this context to help you formulate your response, but you are not required to.",vscpp("br",null)),r.docSearchResults.map(i=>vscpp(Yf.TextChunk,null,"##",i?.title?.trim()," - ",i.path,vscpp("br",null),i.contents))),vscpp(Yf.UserMessage,{priority:900},this.props.query))}};var hJ=class extends wo{constructor(r){super();this.accessor=r}async createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new nt(n,X8,{query:u,history:l},this.accessor.get(ye),this.accessor)}},J8=class{constructor(){this.id="vscode";this.locations=[2];this.description=mJ.t("Ask questions about VS Code");this.intentDetectionInput={sampleQuestion:"What is the command to open the integrated terminal?",modelDescription:"Looks up information about VS Code via commands, settings, and documentation to accomplish the given editor-specific task."};this.commandInfo={allowsEmptyArgs:!1,sampleRequest:mJ.t("What is the command to open the integrated terminal?")}}async invoke(e,r,n){let i=r.location,o=await e.get(Ge).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new hJ(e),commands:t2e}}};fi.registerIntent(new Vg);fi.registerIntent(new Xy);fi.registerIntent(new Gg);fi.registerIntent(new Q8);fi.registerIntent(new EE);fi.registerIntent(new y6);fi.registerIntent(new M8);fi.registerIntent(new H8);fi.registerIntent(new j8);fi.registerIntent(new V8);fi.registerIntent(new eb);fi.registerIntent(ks.Instance);fi.registerIntent(new h8);fi.registerIntent(new i8);fi.registerIntent(new J8);fi.registerIntent(new w6);fi.registerIntent(new N8);fi.registerIntent(new SE);var wtt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function i2e(t,e="client"){if(e==="proxy")return!1;let r=t.slice();return r.reverse(),n2e(r)||n2e(r.filter(n=>n.trim().length>0))}function n2e(t){let e=Rtt(t);for(let r of wtt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function Rtt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}function o2e(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}async function s2e(t,e,r,n,i,o,s){let a=t.get(ce).getLogger("chat fetch"),c=Ptt(t,r);if(o?.isCancellationRequested)return{type:"canceled",reason:"before fetch request"};a.info(`url ${e.url}`),a.info(`modelMaxPromptTokens ${e.modelMaxPromptTokens}`),a.info(`modelMaxResponseTokens ${c.max_tokens??2048}`),a.info(`chat model ${r.model}`),r.intent_model&&a.info(`intent model ${r.intent_model}`),r.intent_tokenizer&&a.info(`intent tokenizer ${r.intent_tokenizer}`),r.intent_threshold&&a.info(`intent threshold ${r.intent_threshold}`);let u=r.secretKey??(await t.get(Rt).getCopilotToken(t)).token;if(!u)return a.error(`Failed to send request to ${e.url} due to missing key`),Wf(t.get(ke),`Failed to send request to ${e.url} due to missing key`),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:"key is missing"};let l=await Dtt(t,e,r.ourRequestId,c,u,r.location,o,s);if(o?.isCancellationRequested){let h=await l.body();try{h.destroy()}catch(g){a.exception(g,"Error destroying stream"),t.get(ke).sendGHTelemetryException(g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(l.status!==200){let h=Att(e,t,r.location,r.ourRequestId);return a.info("Request ID for failed request: ",r.ourRequestId),ktt(t,h,l)}let d=t.get(ke),p=t.get(ce),f=r.postOptions?.n??1;return{type:"success",chatCompletions:await e.processResponseFromChatEndpoint(d,p,l,f,i,n,o),getProcessingTime:()=>RTe(l)}}function Att(t,e,r,n){return Er.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:lt.toString(r),headerRequestId:n})}function Ptt(t,e){let r={messages:e.messages,model:e.model};e.postOptions&&Object.assign(r,e.postOptions);let n=o2e(e.repoInfo);return n!==void 0&&(r.nwo=n),e.intent&&(r.intent=e.intent,e.intent_model&&(r.intent_model=e.intent_model),e.intent_tokenizer&&(r.intent_tokenizer=e.intent_tokenizer),e.intent_threshold&&(r.intent_threshold=e.intent_threshold)),r}async function ktt(t,e,r){let n=t.get(ce).getLogger("chat fetch"),i=t.get(ke);e.properties.error=`Response status was ${r.status}`,e.properties.status=String(r.status),i.sendGHTelemetryEvent("request.shownWarning",e.properties,e.measurements);let o=await r.text();if(r.status===401&&o.includes("authorize_url"))try{let s=JSON.parse(o);return{type:"failed",failKind:"unauthorized",reason:r.statusText||r.statusText,data:s}}catch{}return r.status===401||r.status===403?(t.get(Rt).resetCopilotToken(t,r.status),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:`token expired or invalid: ${r.status}`}):r.status===499?(n.info("Cancelled by server"),{type:"failed",failKind:"serverCanceled",reason:"canceled by server"}):r.status===466?(n.info(o),{type:"failed",failKind:"clientNotSupported",reason:`client not supported: ${o}`}):r.status===400&&o.includes("off_topic")?{type:"failed",failKind:"offTopic",reason:"filtered as off_topic by intent classifier: message was not programming related"}:r.status===424?{type:"failed",failKind:"failedDependency",reason:o}:r.status===429?{type:"failed",failKind:"rateLimited",reason:o}:r.status>=500&&r.status<600?{type:"failed",failKind:"serverError",reason:`${r.status} ${o}`}:r.status===422?{type:"failed",failKind:"contentFilter",reason:"Filtered by Responsible AI Service"}:(n.error("Unhandled status from server:",r.status,o),Wf(t.get(ke),"Unhandled status from server: "+r.status,o),{type:"failed",failKind:"unknown",reason:`unhandled status from server: ${r.status} ${o}`})}function Dtt(t,e,r,n,i,o,s,a){let c=t.get(ce).getLogger("chat fetch"),u=t.get(ke),l=Er.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:lt.toString(o),...a},{maxTokenWindow:e.modelMaxPromptTokens});for(let[f,m]of Object.entries(n))f!=="messages"&&(l.properties[`request.option.${f}`]=JSON.stringify(m)??"undefined");l.properties.headerRequestId=r,u.sendGHTelemetryEvent("request.sent",l.properties,l.measurements);let d=Date.now(),p=Ntt(o);return n0(t.get(Sr),t.get(mt),t.get(ke),e,i,p,r,n,s).then(f=>{let m=h2(f,void 0);l.extendWithRequestId(m);let h=Date.now()-d;return l.measurements.totalTimeMs=h,c.info(`request.response: [${e.url}], took ${h} ms`),c.debug("request.response properties",l.properties),c.debug("request.response measurements",l.measurements),c.debug(`messages: ${JSON.stringify(n.messages)}`),u.sendGHTelemetryEvent("request.response",l.properties,l.measurements),f}).catch(f=>{if(t.get(Sr).isAbortError(f))throw f;let h=l.extendedBy({error:"Network exception"});u.sendGHTelemetryEvent("request.shownWarning",h.properties,h.measurements),l.properties.code=String(f.code??""),l.properties.errno=String(f.errno??""),l.properties.message=String(f.message??""),l.properties.type=String(f.type??"");let g=Date.now()-d;throw l.measurements.totalTimeMs=g,c.debug(`request.response: [${e.url}] took ${g} ms`),c.debug("request.error properties",l.properties),c.debug("request.error measurements",l.measurements),u.sendGHTelemetryEvent("request.error",l.properties,l.measurements),f}).finally(()=>{DX(u,n.messages,l)})}function Ntt(t){switch(t){case 2:return"conversation-panel";case 1:return"conversation-inline"}}var gJ=class{constructor(){this._onDidMakeChatMLRequest=new Br;this.onDidMakeChatMLRequest=this._onDidMakeChatMLRequest.event}async fetchOne(e,r,n,i,o,s,a,c,u){let l=await this.fetchMany(e,r,n,i,o,s,{...a,n:1},c,u);return l.type==="success"?{...l,value:l.value[0]}:l}},o0=class extends gJ{constructor(r){super();this.accessor=r;this.logger=r.get(ce).getPromptResponseLogger("ChatMLFetcher")}async fetchMany(r,n,i,o,s,a,c,u,l){let d=u?.requestId??u?.messageId??cn(),p=GS(this.accessor.get(ye),r.map(b=>({role:b.role,content:b.content,...b.name?{name:b.name}:void 0}))),f=Math.min(s.modelMaxPromptTokens-p+2048,4096);c={max_tokens:f,...c};let m=o0.preparePostOptions(c),h=s.model;l&&(l.intent_model=await this.getOffTopicModelName(),l.intent_tokenizer=await this.getOffTopicModelTokenizer(),l.intent_threshold=await this.getOffTopicModelThreshold());let g={messages:r.filter(b=>b.content&&b.content!==""),model:h,repoInfo:void 0,ourRequestId:d,location:o,postOptions:m,secretKey:c.secretKey,...l},v=Er.createAndMarkAsIssued({...u,uiKind:lt.toString(o)});try{let b,y=Ltt(g);if(!y.isValid)b={type:"failed",failKind:"validationFailed",reason:`Prompt failed validation with the reason: ${y.reason}. Please file an issue.`};else{b=await s2e(this.accessor,s,g,v,n||(async()=>{}),i,u);let T=a?.extensionId??Gy,L=a?.agent&&T===Gy&&Rre.includes(a.agent)?M0(a.agent):a?.agent;this._onDidMakeChatMLRequest.fire({model:s.model,source:{extensionId:T,agent:L},tokenCount:p})}let S=Date.now()-v.issuedTime,x;switch(b.type){case"success":return await this.processSuccessfulResponse(b,g.ourRequestId,f,p,S,v,s);case"canceled":return this.accessor.get(ke).sendMSFTTelemetryEvent("response.cancelled",{source:u?.messageSource??"unknown",requestId:g.ourRequestId,model:s.model},{totalTokenMax:s.modelMaxPromptTokens??-1,promptTokenCount:p,tokenCountMax:f,timeToFirstToken:S,timeToCancelled:v?Date.now()-v.issuedTime:-1}),this.processCanceledResponse(b,g.ourRequestId);case"failed":return x=this.processFailedResponse(b,g.ourRequestId),this._sendResponseErrorTelemetry(x,u,g,s,p,f,S),x}}catch(b){let y=Date.now()-v.issuedTime,S=this.processError(b,g.ourRequestId);return this._sendResponseErrorTelemetry(S,u,g,s,p,f,y),S}}_sendResponseErrorTelemetry(r,n,i,o,s,a,c){this.accessor.get(ke).sendMSFTTelemetryEvent("response.error",{type:r.type,reason:r.reason,source:n?.messageSource??"unknown",requestId:i.ourRequestId,model:o.model},{totalTokenMax:o.modelMaxPromptTokens??-1,promptTokenCount:s,tokenCountMax:a,timeToFirstToken:c})}static preparePostOptions(r){return{...r,stream:!0}}async processSuccessfulResponse(r,n,i,o,s,a,c){let u=[];for await(let p of r.chatCompletions)this.accessor.get(ke).sendMSFTTelemetryEvent("response.success",{reason:p.finishReason,filterReason:p.filterReason,source:a?.properties.messageSource??"unknown",model:c?.model,requestId:n},{totalTokenMax:c?.modelMaxPromptTokens??-1,tokenCountMax:i,promptTokenCount:o,tokenCount:p.numTokens,timeToFirstToken:s,timeToComplete:a?Date.now()-a.issuedTime:-1}),this.isRepetitive(p,a?.properties)||u.push(p);this.logger.debug(`Received choices: ${JSON.stringify(u,null,2)}`);let l=u.filter(p=>p.finishReason==="stop"||p.finishReason==="client-trimmed");if(l.length>=1)return{type:"success",value:l.map(p=>p.message.content),requestId:n};let d=u[0];switch(d?.finishReason){case"content_filter":return{type:"filtered",category:d.filterReason??"snippy",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:d.message.content};case"agent-error":return{type:"failed",reason:d.errors.map(p=>p.message).join(`

`),requestId:n}}return{type:"unknown",reason:"Response contained no choices.",requestId:n}}async getOffTopicModelName(){let r=this.accessor.get(Pe).getConfig(Ne.DebugOverrideChatOffTopicModel);if(r)return r;let n=await this.accessor.get(Im).chatOffTopicModel();return n||""}async getOffTopicModelTokenizer(){let r=this.accessor.get(Pe).getConfig(Ne.DebugOverrideChatOffTopicModelTokenizer);if(r)return r;let n=await this.accessor.get(Im).chatOffTopicModelTokenizer();return n||""}async getOffTopicModelThreshold(){let r=this.accessor.get(Pe).getConfig(Ne.DebugOverrideChatOffTopicModelThreshold);if(r!==0)return r;let n=await this.accessor.get(Im).chatOffTopicModelThreshold();return n!==0?n:0}isRepetitive(r,n){let i=i2e(r.tokens);if(i){let o=Er.createAndMarkAsIssued();o.extendWithRequestId(r.requestId);let s=o.extendedBy(n);this.accessor.get(ke).sendRestrictedGHTelemetryEvent("conversation.repetition.detected",s.properties,s.measurements),this.logger.info("Filtered out repetitive conversation result")}return i}processCanceledResponse(r,n){return this.logger.debug("Cancelled after awaiting fetchConversation"),{type:"canceled",reason:r.reason,requestId:n}}processFailedResponse(r,n){return r.failKind==="rateLimited"?{type:"rateLimited",reason:r.reason,requestId:n}:r.failKind==="offTopic"?{type:"offTopic",reason:r.reason,requestId:n}:r.failKind==="tokenExpiredOrInvalid"||r.failKind==="clientNotSupported"||r.reason.includes("Bad request: ")?{type:"badRequest",reason:r.reason,requestId:n}:r.failKind==="serverError"?{type:"failed",reason:r.reason,requestId:n}:r.failKind==="contentFilter"?{type:"filtered",reason:r.reason,category:"prompt",requestId:n}:r.failKind==="unauthorized"?{type:"agent_unauthorized",reason:r.reason,authorizationUrl:r.data.authorize_url,requestId:n}:r.failKind==="failedDependency"?{type:"agent_failed_dependency",reason:r.reason,requestId:n}:{type:"failed",reason:r.reason,requestId:n}}processError(r,n){let i=this.accessor.get(Sr);return i.isAbortError(r)?{type:"canceled",reason:"network request aborted",requestId:n}:C0(r)?{type:"canceled",reason:"Got a cancellation error",requestId:n}:(this.accessor.get(ce).defaultLogger.exception(r,"Error on conversation request"),this.accessor.get(ke).sendGHTelemetryException(r,"Error on conversation request"),i.isDNSLookupFailedError(r)?{type:"failed",reason:"It appears you're not connected to the internet, please check your network connection and try again.",requestId:n}:i.isFetcherError(r)?{type:"failed",reason:i.getUserMessageForFetcherError(r),requestId:n}:{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};o0=we([de(0,Ct)],o0);function Ltt(t){return t.messages.length===0?{isValid:!1,reason:"No messages provided"}:t?.postOptions?.max_tokens&&t?.postOptions?.max_tokens<1?{isValid:!1,reason:"Invalid response token parameter"}:t.messages[t.messages.length-1].role!=="user"?{isValid:!1,reason:"Last message must be from user"}:t.messages.some(e=>!e.content)?{isValid:!1,reason:"Empty message content"}:{isValid:!0,reason:""}}var a2e=W(require("path")),c2e=W(require("vscode"));var eM=W(st());var Z8=class extends Y{render(){return vscpp(vscppf,null,vscpp(eM.SystemMessage,null,vscpp(vJ,null),vscpp(ar,null)),vscpp(eM.UserMessage,null,vscpp(yJ,{templates:this.props.templates,features:this.props.features,filenames:this.props.filenames})))}},vJ=class extends Y{render(){return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),"You are helping a software developer to configure a Dev Container by picking a configuration template and features.")}},yJ=class extends Y{render(){return vscpp(vscppf,null,"This is a partial list of workspace files:",vscpp("br",null),this.props.filenames.map(e=>`- ${e}
`).join(""),vscpp("br",null),"Based on the workspace files, please suggest the best template from the list of templates below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick the best template and reply with the best template's id.",vscpp("br",null),"This is the list of available templates:",vscpp("br",null),this.props.templates.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null),"Also based on the workspace files, please suggest all relevant features from the list of features below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick all relevant features and reply with the relevant features' ids.",vscpp("br",null),"This is the list of available features:",vscpp("br",null),this.props.features.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null))}};var Ott=["alpine","debian","docker-existing-docker-compose","docker-existing-dockerfile","docker-in-docker","docker-outside-of-docker","docker-outside-of-docker-compose","ubuntu","universal"].map(t=>`ghcr.io/devcontainers/templates/${t}`),Mtt=["common-utils","git"].map(t=>`ghcr.io/devcontainers/features/${t}`),tM=class{constructor(e){this.accessor=e;this.telemetryService=e.get(ke),this.logger=e.get(ce).getPromptResponseLogger("Dev Container Configuration Generator"),this.options=e.get(ki)}async generate(e,r,n){if(!r.length)return{type:"success",template:void 0,features:[]};let i=Date.now(),o=await this.accessor.get(Ge).getUserRequestEndpoint(3),s=Math.floor(o.modelMaxPromptTokens*4/3),a=this.processFilenames(r,s),c=e.templates.filter(h=>!Ott.includes(h.id)),u=(e.features||[]).filter(h=>!Mtt.includes(h.id)),d=await new nt(o,Z8,{filenames:a,templates:c,features:u},this.accessor.get(ye),this.accessor).render(),p=Date.now(),f=await this.accessor.get(Qt).fetchOne(d.messages,void 0,n,3,o,void 0,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:"command.generateDevContainerConfigPrompt"});this.logger.logResponse(f);let m=f.type==="success"?this.processGeneratedConfig(f.value,c,u):void 0;return this.telemetryService.sendMSFTTelemetryEvent("devcontainer.generateConfig",{model:o.model,requestId:f.requestId,responseType:f.type,templateId:m?.template,featureIds:m?.features.join(",")},{originalFilenameCount:r.length,originalFilenameLength:r.join("").length,processedFilenameCount:a.length,processedFilenameLength:a.join("").length,timeToRequest:p-i,timeToComplete:Date.now()-i}),{type:"success",template:m?.template,features:m?.features||[]}}processFilenames(e,r){let n=[...e],i=Math.floor(r*.9),o=n.join(`
`).length;if(o>i)for(;o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedConfig(e,r,n){let i=r.find(o=>new RegExp(`\\b${P0(o.id)}\\b`).test(e))?.id;return i==="ghcr.io/devcontainers/templates/javascript-node"&&(i="ghcr.io/devcontainers/templates/typescript-node"),{template:i,features:n.filter(o=>new RegExp(`\\b${P0(o.id)}\\b`).test(e)).map(o=>o.id)}}};var DE=class{constructor(e){this.accessor=e}async generateConfiguration(e,r){if(r.isCancellationRequested)return{type:"cancelled"};let n=this.accessor.get(ya),i=(await Promise.all(["*","*/*","*/*/*"].map(s=>n.findFilesWithDefaultExcludes(new c2e.RelativePattern(e.rootUri,s),1e3,r)))).flat().map(s=>a2e.posix.relative(e.rootUri.path,s.path));return new tM(this.accessor).generate(e.index,i,r)}};DE=we([de(0,Ct)],DE);var _J=W(require("path")),pl=require("vscode");var ib=W(st());var rM=class extends Y{render(){return vscpp(vscppf,null,vscpp(ib.SystemMessage,null,vscpp(bJ,null),vscpp(di,null),vscpp(vr,null)),vscpp(ib.UserMessage,{priority:700,name:"changes"},"# CODE CHANGES:",vscpp("br",null),this.props.diff.map(e=>vscpp(vt,{uri:null,code:e}))),this.props.recentCommitMessages.user.length>0&&vscpp(ib.UserMessage,{priority:600,name:"user-commits"},"# RECENT USER COMMITS:",vscpp("br",null),this.props.recentCommitMessages.user.map(e=>vscpp(vt,{uri:null,languageId:"text",code:e}))),this.props.recentCommitMessages.repository.length>0&&vscpp(ib.UserMessage,{priority:500,name:"recent-commits"},"# RECENT REPOSITORY COMMITS:",vscpp("br",null),this.props.recentCommitMessages.repository.map(e=>vscpp(vt,{uri:null,languageId:"text",code:e}))),vscpp(ib.UserMessage,null,"Remember to ONLY return a single markdown ```text code block with the suggested commit message. NO OTHER PROSE! If you write more than the commit message, your commit message gets lost.",vscpp("br",null),"Example:",vscpp("br",null),vscpp(vt,{uri:null,languageId:"text",code:"commit message goes here"})))}},bJ=class extends Y{render(){return vscpp(vscppf,null,"You are an AI programming assistant, helping a software developer to come with the best git commit message for their code changes.",vscpp("br",null),"You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.",vscpp("br",null),"# Examples of commit messages:",vscpp("br",null),vscpp(vt,{uri:null,languageId:"text",code:"feat: improve page load with lazy loading for images"}),vscpp(vt,{uri:null,languageId:"text",code:"Fix bug preventing submitting the signup form"}),vscpp(vt,{uri:null,languageId:"text",code:"chore: update npm dependency to latest stable version"}),vscpp(vt,{uri:null,languageId:"text",code:"Update landing page banner color per client request"}),vscpp("br",null),vscpp("br",null),"# First, think step-by-step:",vscpp("br",null),"1. Analyze the CODE CHANGES thoroughly to understand what's been modified.",vscpp("br",null),"2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.",vscpp("br",null),"3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.",vscpp("br",null),"4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the the established writing conventions. 5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.",vscpp("br",null),"6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details",vscpp("br",null))}};var nM=class{constructor(e){this.accessor=e;this.telemetryService=e.get(ke),this.logger=e.get(ce).getPromptResponseLogger("git commit message generator"),this.options=e.get(ki)}async generateGitCommitMessage(e,r,n,i){let o=Date.now(),s=await this.accessor.get(Ge).getUserRequestEndpoint(3),a=Math.floor(s.modelMaxPromptTokens*4/3),c=this.processDiff(e,a),l=await new nt(s,rM,{diff:c,recentCommitMessages:r},this.accessor.get(ye),this.accessor).render(void 0,void 0),d=Math.min(this.options.temperature*(1+n),2),p=Date.now(),f=await this.accessor.get(Qt).fetchOne(l.messages,void 0,i,3,s,{agent:"git-commit"},{temperature:d,top_p:this.options.topP},{messageSource:"command.generateGitCommitMessagePrompt"});if(this.logger.logResponse(f),this.telemetryService.sendMSFTTelemetryEvent("git.generateCommitMessage",{model:s.model,requestId:f.requestId,responseType:f.type},{attemptCount:n+1,originalDiffFileCount:e.length,originalDiffLength:e.join("").length,processedDiffFileCount:c.length,processedDiffLength:c.join("").length,timeToRequest:p-o,timeToComplete:Date.now()-o}),f.type!=="success")return;let[m,h]=this.processGeneratedCommitMessage(f.value);return m!=="oneTextCodeBlock"&&this.telemetryService.sendMSFTTelemetryEvent("git.generateCommitMessageIncorrectResponseFormat",{requestId:f.requestId,responseFormat:m}),h}processDiff(e,r){let n=[...e],i=r-Math.floor(r*.2),o=n.join(`

`).length;if(o>i)for(n.sort((s,a)=>s.length-a.length);o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedCommitMessage(e){let n=/^```text\s*([\s\S]+?)\s*```$/m.exec(e);return n===null?["noTextCodeBlock",e]:n.length!==2?["multipleTextCodeBlocks",e]:["oneTextCodeBlock",n[1]]}};var NE=class{constructor(e){this.accessor=e;this._commitMessages=new Map;this._disposables=new Ht;this._repositoryDisposables=new wb;let r=()=>{this._disposables.add(this._gitExtensionApi.onDidOpenRepository(this._onDidOpenRepository,this)),this._disposables.add(this._gitExtensionApi.onDidCloseRepository(this._onDidCloseRepository,this));for(let i of this._gitExtensionApi.repositories)this._onDidOpenRepository(i)},n=this.accessor.get(Ml);this._gitExtensionApi=n.getExtensionApi(),this._gitExtensionApi?r():this._disposables.add(n.onDidChange(i=>{i.enabled&&(this._gitExtensionApi=n.getExtensionApi(),r())}))}async generateCommitMessage(e,r=qr.None){if(!r.isCancellationRequested)return pl.window.withProgress({location:pl.ProgressLocation.SourceControl},async()=>{let n=await this._getChanges(e),i=await this._applyContentExclusion(n);if(i.length===0){pl.window.showInformationMessage(pl.l10n.t("Cannot generate a commit message because the changes were excluded from the context due to content exclusion rules."));return}let o=this._getAttemptCount(e,i),s=await this._getRecentCommitMessages(e),c=await new nM(this.accessor).generateGitCommitMessage(i,s,o,r);if(c&&e.state.HEAD&&e.state.HEAD.commit){let u=this._commitMessages.get(e.rootUri.toString())??new Map;u.set(e.state.HEAD.commit,{attemptCount:o,changes:i,message:c}),this._commitMessages.set(e.rootUri.toString(),u)}return c})}getRepository(e){return this._gitExtensionApi?this._gitExtensionApi.repositories.length===1?this._gitExtensionApi.repositories[0]:(e=e??pl.window.activeTextEditor?.document.uri,e?this._gitExtensionApi.getRepository(e):null):null}async _applyContentExclusion(e){let r=[],n=this.accessor.get(Oe);for(let i of e)i.originalUri===void 0&&i.modifiedUri===void 0||i.originalUri&&await n.isCopilotIgnored(i.originalUri)||i.modifiedUri&&i.modifiedUri!==i.originalUri&&await n.isCopilotIgnored(i.modifiedUri)||r.push(i.diff);return r}_getAttemptCount(e,r){let i=this._commitMessages.get(e.rootUri.toString())?.get(e.state.HEAD?.commit??"");if(!i||i.changes.length!==r.length)return 0;for(let o=0;o<r.length;o++)if(i.changes[o]!==r[o])return 0;return i.attemptCount+1}async _getChanges(e){let r=await e.diff(!0);if(r!=="")return this._parseGitDiff(e,r);let n=await e.diff();return this._parseGitDiff(e,n)}async _getRecentCommitMessages(e){let r=[],n=[];try{let i=await e.log({maxEntries:10});r.push(...i.map(a=>a.message));let o=await e.getConfig("user.name")??await e.getGlobalConfig("user.name"),s=await e.log({maxEntries:10,author:o});n.push(...s.map(a=>a.message))}catch{}return{repository:r,user:n}}_parseGitDiff(e,r){let n=[],i=c=>{let u=/^---\s(.*)\n\+\+\+\s(.*)$/m.exec(c);if(!u||u.length!==3)return{originalUri:void 0,modifiedUri:void 0};let l=u[1]==="/dev/null"?void 0:pl.Uri.file(_J.join(e.rootUri.fsPath,u[1].substring(2))),d=u[2]==="/dev/null"?void 0:pl.Uri.file(_J.join(e.rootUri.fsPath,u[2].substring(2)));return{originalUri:l,modifiedUri:d}},o=0,s,a=/^diff --git a\/(.+?) b\/(.+?)$/gm;do{if(s=a.exec(r),s===null)break;if(o<s.index){let c=r.substring(o,s.index),{originalUri:u,modifiedUri:l}=i(c);n.push({diff:c,originalUri:u,modifiedUri:l})}o=s.index}while(!0);if(o<r.length){let c=r.substring(o),{originalUri:u,modifiedUri:l}=i(c);n.push({diff:c,originalUri:u,modifiedUri:l})}return n}_onDidOpenRepository(e){typeof e.onDidCommit!==void 0&&this._repositoryDisposables.set(e,e.onDidCommit(()=>this._onDidCommit(e),this))}_onDidCloseRepository(e){this._repositoryDisposables.deleteAndDispose(e),this._commitMessages.delete(e.rootUri.toString())}async _onDidCommit(e){let r=e.state.HEAD;if(!r?.commit)return;let n=this._commitMessages.get(e.rootUri.toString());if(!n)return;let i=await e.getCommit(r.commit),o=i.parents.length>0?i.parents[0]:"",s=n.get(o);if(!s)return;let a=I2(i.message,s.message);this.accessor.get(ke).sendMSFTTelemetryEvent("git.generateCommitMessageSurvival",void 0,{attemptCount:s.attemptCount,survivalRateFourGram:a}),n.delete(o),this._commitMessages.set(e.rootUri.toString(),n)}dispose(){this._repositoryDisposables.dispose(),this._disposables.dispose()}};NE=we([de(0,Ct)],NE);var oM=require("vscode");var LE=re("ChatVariableService"),iM=class{constructor(e){this._variableEnablements=e.get(Pe).getConfigMixedWithDefaults(Ne.ConversationVariablesEnablements)}isVariableEnabled(e){return typeof this._variableEnablements[e.name]=="boolean"?this._variableEnablements[e.name]:typeof e.defaultEnablement=="boolean"?e.defaultEnablement:!!this._variableEnablements["*"]}getVariables(){let e=[];for(let r of Nr.contextResolvers)r.variableInfo&&this.isVariableEnabled(r.variableInfo)&&e.push({name:r.variableInfo.name,kind:r.kind,description:r.variableInfo.description,resolve:r.resolveContext.bind(r)});return e}getVariable(e){return this.getVariables().find(r=>r.name===e)}};var OE=class{constructor(e,r){this._chatVariableService=e,this._fsService=r}async resolveVariablesInPrompt(e,r){let n=[];for(let i of r){let o=i.values.find(s=>s.level===oM.ChatVariableLevel.Full)??i.values[0];if(o.value instanceof oM.Uri){let s=(await this._fsService.readFile(o.value)).toString().replace(/\r/g,"");o={...o,value:Ii("",s)}}if(o.kind==="github.docset")i.range&&(e=e.slice(0,i.range[0])+o.value+e.slice(i.range[1]));else{let s=this._chatVariableService.getVariable(i.name);n.push({kind:s?.kind??"variable",userMessages:[Ftt(i.name)+o.value]}),i.range&&(e=e.slice(0,i.range[0])+`[#${i.name}](#${i.name}-context)`+e.slice(i.range[1]))}}return{parts:n,message:e}}};OE=we([de(0,LE),de(1,gi)],OE);function Ftt(t){return`# ${t.toUpperCase()} CONTEXT
`}var Utt=[],u2e=Utt;var NJ={};rn(NJ,{create:()=>Htt});var xJ=W(lr());var eR=class{constructor(e){this.kind="workspace";let r,n;e.getConfig(Ne.WorkspaceUseFilesVariable)?(r="files",n=xJ.t("Searches through the files in the workspace and pulls out relevant information for the query.")):(r="codebase",n=xJ.t("Searches through the codebase and pulls out relevant information for the query.")),this.variableInfo={name:r,description:n,defaultEnablement:Il||void 0}}async resolveContext(e,r,n,i){if(!r.message)return;let{messages:o,references:s,usedContext:a}=await Zo(e,r.endpoint,aE,{chatVariables:[],conversation:r.conversation??new ul,query:this.turnQueryIntoWorkspaceQuery(r.message),include:{workspaceChunks:!0}},e.get(ye),i,n);if(o.length>0)return{kind:this.kind,userMessages:o.map(c=>c.content),usedContext:a,references:s}}turnQueryIntoWorkspaceQuery(e){let r=e;return r.startsWith("@")&&(r=r.replace(/@\w+\s*/,"")),r=r.replaceAll(/\#files/gi,"files"),r}};eR=we([de(0,Pe)],eR);Nr.register(eR);var Btt=require("path"),SJ=class{constructor(){this.kind="current-editor";this.variableInfo={name:"editor",description:"The visible source code in the active editor",defaultEnablement:!0};this.metaContextResolverInfo={description:"Source code in the active document."}}async resolveContext(e,r){let n=e.get(_t).activeTextEditor,i=n?.visibleRanges[0];if(i){let o="";n.selection.isSingleLine&&(o=`The cursor is on line: ${n.selection.start.line}`);let s=[`Excerpt from active file ${Btt.basename(n.document.uri.path)}, lines ${i.start.line+1} to ${i.end.line+1}:`,Ii(n.document.languageId,n.document.getText(i),!1),"",o].join(`
`),a=[{uri:n.document.uri,version:n.document.version,ranges:[i]}];return{kind:this.kind,userMessages:[s],usedContext:a,references:[new Co.PromptReference({uri:n.document.uri,range:i})]}}}},WCr=Nr.register(new SJ);var EJ=class{constructor(){this.kind="current-selection-implementations";this.metaContextResolverInfo={description:"Relevant implementations referenced in active selection."}}async resolveContext(e,r,n,i){let{references:o,messages:s,usedContext:a}=await Zo(e,r.endpoint,Qg,{},e.get(ye));return{kind:this.kind,references:o,userMessages:s.map(c=>c.content),usedContext:a}}},ewr=Nr.register(new EJ);var TJ=class{constructor(){this.kind="debug-console-output";this.variableInfo={name:"debugConsole",description:"The output in the debug console",defaultEnablement:!1};this.metaContextResolverInfo={description:"Debug console output."}}async resolveContext(e){return{kind:this.kind,userMessages:[`Debug console output:
`+e.get(e_).consoleOutput]}}},owr=Nr.register(new TJ);var IJ=class{constructor(){this.kind="diagnostics";this.metaContextResolverInfo={description:"Diagnostics in the active editor."}}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=np(e.get(Zi),i.document.uri,i.selection,r.message),{messages:s,usedContext:a}=await Zo(e,r.endpoint,vu,{documentContext:i,diagnostics:o},e.get(ye));return{kind:this.kind,userMessages:s.map(c=>c.content),usedContext:a}}},mwr=Nr.register(new IJ);var CJ=class{constructor(e){let r=Tp(e.get(mt).getEditorInfo().version);this.embeddingsCache=new Ol(e,1,"extensionEmbeddings",r,"extensions")}async updateIndex(){this._embeddings=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[1].name}(${o[0]})`,similarity:0};let s=Ll(e,o[1].embedding);return{key:`${o[1].name}(${o[0]})`,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}},qtt=`
The current question is related to VS Code extensions. The application is currently open.
If an extension is not a valid answer, but it still relates to VS Code, please still respond.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the given context given to you is incorrect or not relevant you may ignore it.
At the end of your response, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all extension IDs you referenced in your response.
The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
`.trimStart(),wJ=class{constructor(){this.kind="extensions"}async resolveContext(e,r,n){let i=qtt+`

`;this._embeddingCompute??=e.get(Bs);let o=r.message;if(!o||(this._extensionsIndex||(this._extensionsIndex=new CJ(e),await this._extensionsIndex.updateIndex()),n.isCancellationRequested))return;let s=await this._embeddingCompute?.computeEmbeddings([o],{},n);if(!(!s||n.isCancellationRequested)&&s&&s.length>0){let a=this._extensionsIndex.nClosestValues(s[0],5);if(a.length)return i+=`Here are some possible extensions:
`,i+=a.join(`

`),{kind:this.kind,userMessages:[`Relevant information about extensions for VS Code:
`+i]}}}},Swr=Nr.register(new wJ);var l2e=W(require("path"));var RJ=class{constructor(){this.kind="git-metadata";this.variableInfo={name:"git",description:"Information about the current git repository"};this.metaContextResolverInfo={description:"Metadata about the current git repository."}}async resolveContext(e,r,n){let i=e.get(rt),s=e.get(vi).repositories,a=i.getWorkspaceFolders();if(s.length===0||!a)return;if(a.length>1){let u=r.documentContext?.document.uri??e.get(_t).activeTextEditor?.document.uri;if(u){let l=i.getWorkspaceFolder(u);if(l){let d=a.findIndex(p=>p.toString()===l.toString());d!==-1&&(s=[s[d]],a=[a[d]])}}}let c=[];for(let u=0;u<s.length;u++){if(n.isCancellationRequested)return;let l=s[u],d=a[u];if(!l)continue;let p=[];p.push(`Workspace Folder: ${l2e.basename(d.path)}`),p.push("```"),l.headBranchName?(p.push(`Current Branch name: ${l.headBranchName}`),p.push(`Upstream: ${l.upstreamBranchName?l.upstreamBranchName:"none"}`)):p.push("Detached HEAD?: yes"),p.push(`Is currently rebasing?: ${l.isRebasing?"yes":"no"}`),p.push(`Remotes: ${(l.remotes??[]).join(", ")}`),p.push("```"),c.push(p.join(`
`))}return{kind:this.kind,userMessages:[`Metadata about the current git repository:
`+c.join(`
`)]}}},Awr=Nr.register(new RJ);var AJ=class{constructor(){this.kind="terminal-buffer";this.variableInfo={name:"terminalBuffer",description:"The active terminal's buffer",defaultEnablement:!1};this.metaContextResolverInfo={description:"The active terminal's buffer."}}async resolveContext(e){let r=e.get($i).terminalBuffer;return{kind:this.kind,userMessages:[`The active terminal's buffer:
`+r]}}},Lwr=Nr.register(new AJ);var PJ=class{constructor(){this.kind="terminal-last-command";this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's last run command."}}async resolveContext(e){let r=e.get($i).terminalLastCommand;if(!r)return;let n=[];r.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(r.commandLine)),r.cwd&&(n.push("It was run in the directory:"),n.push(typeof r.cwd=="object"?r.cwd.toString():r.cwd)),r.output&&(n.push("It has the following output:"),n.push(r.output));let i=n.join(`
`);return{kind:this.kind,userMessages:[`The active terminal's last run command:
`+i]}}},Bwr=Nr.register(new PJ);var kJ=class{constructor(){this.kind="terminal-selection";this.variableInfo={name:"terminalSelection",description:"The active terminal's selection",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's selection."}}async resolveContext(e){let r=e.get($i).terminalSelection;return{kind:this.kind,userMessages:[`The active terminal's selection:
`+r]}}},Vwr=Nr.register(new kJ);var DJ=class{constructor(){this.kind="terminal-shell-type"}async resolveContext(e){let r=e.get($i).terminalShellType;return{kind:this.kind,userMessages:[`The active terminal's shell type:
`+r]}}},Ywr=Nr.register(new DJ);function Htt(){}var LJ={};rn(LJ,{create:()=>jtt});function jtt(t){let e=new Ht;return e.add(Nr.initialize(t)),e}var OJ={};rn(OJ,{create:()=>Gtt});async function Gtt(t){await t.get(rt).ensureWorkspaceIsFullyLoaded()}var Vtt=[...u2e,OJ,NJ,LJ],d2e=Vtt;var FJ={};rn(FJ,{create:()=>ztt});var aM=require("vscode");var ME=require("vscode");async function sM(t,e,r){let n=t?.repositories;if(!n)return r.debug("No git repositories found"),!1;let i=n.map(CP).filter(s=>s);return(await Promise.all(i.map(s=>{let[a,c]=s.split("/");return e.isAvailable(a,c)}))).every(s=>s)}async function p2e(t){let e=new MJ(t);return await e.run(),e}var MJ=class{constructor(e){this.accessor=e;this.tokenManager=this.accessor.get(Rt);this.logger=this.accessor.get(ce).getLogger("auth");this.configurationService=this.accessor.get(Pe);this.ghRepoService=this.accessor.get(Fl);this.gitService=this.accessor.safeGet(vi);this.vscodeExtensionContext=this.accessor.get(Kr);this.disposables=new Ht}async run(){await this.waitForChatEnabled(),!(!this.gitService||await sM(this.gitService,this.ghRepoService,this.logger)||(this.registerListeners(),await this.tokenManager.getPermissiveGitHubToken({silent:!0})))&&await this.showPrompt()}async waitForChatEnabled(){try{if((await this.tokenManager.getCopilotToken(this.accessor)).getTokenValue("chat")==="1")return}catch(e){this.logger.debug("Failed to get copilot token",e)}await new Promise(e=>{let r=this.accessor.get(po).onCopilotToken(async n=>{n.envelope.chat_enabled!==!1&&(r.dispose(),e())})})}registerListeners(){this.disposables.add(ME.authentication.onDidChangeSessions(async e=>{if(e.provider.id!==DT(this.configurationService)||await this.tokenManager.getPermissiveGitHubToken({silent:!0}))return;if(await this.tokenManager.getAnyGitHubToken())await this.showPrompt();else{this.vscodeExtensionContext.globalState.update("copilot.shownPermissiveTokenModal",!1);return}}))}async showPrompt(){try{let e=this.vscodeExtensionContext.globalState.get("copilot.shownPermissiveTokenModal",!1),r={};e||(r.forceNewSession={detail:ME.l10n.t("To show you more relevant Copilot Chat results, we need permission to read the contents of your repository on GitHub."),learnMore:ME.Uri.parse("https://aka.ms/copilotRepoScope")},this.vscodeExtensionContext.globalState.update("copilot.shownPermissiveTokenModal",!0)),await this.tokenManager.getPermissiveGitHubToken(r)&&this.logger.debug("Got permissive GitHub token")}catch(e){this.logger.debug("Failed to get permissive GitHub token",e),await this.tokenManager.getPermissiveGitHubToken({})}}dispose(){this.disposables.dispose()}};var f2e="github.copilotChat.signIn";async function m2e(t){let e=t.get(vi),r=t.get(Fl),n=t.get(Rt),i=t.get(ce).getLogger("authSignInCommand");if(await sM(e,r,i)){await n.getAnyGitHubToken({prompt:!0});return}await n.getPermissiveGitHubToken({forceNewSession:{learnMore:gt.parse("https://aka.ms/copilotRepoScope")}})}async function ztt(t){return aM.Disposable.from(aM.commands.registerCommand(f2e,()=>m2e(t)),await p2e(t))}var UJ={};rn(UJ,{create:()=>$tt});var cM=require("vscode");function $tt(t){let e=new Ht;for(let r of t.get(LE).getVariables())e.add(cM.chat.registerChatVariableResolver(r.name,r.description??"",{async resolve(n,i,o){return[]},resolve2:async(n,i,o,s)=>{let a={endpoint:await t.get(Ge).getUserRequestEndpoint(3),message:i.prompt},c={report(l){o.push(l)}},u=await r.resolve(t,a,s,c);return u?(u.references?.forEach(l=>{"variableName"in l.anchor||o.reference(l.anchor)}),[{level:cM.ChatVariableLevel.Full,value:u.userMessages.join(`

`),description:""}]):[]}}));return e}var Wtt=[...d2e,FJ,UJ],h2e=Wtt;var g2e=W(require("path"));var na=class t{static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new uM(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new uM(e[n].slice()));return r.ranges}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new Uo(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new Li(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new Li(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Vr(this.startLineNumber-1,this.endLineNumberExclusive-1)}},uM=class t{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=UR(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=w0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=uF(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=uF(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],c=e._normalizedRanges[i];a.startLineNumber<c.startLineNumber?(s=a,n++):(s=c,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new na(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(r.push(o),o=s)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=UR(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=w0(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let s=r;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new na(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new na(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&r.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var lM=class t{constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};var tR=class t{static inverse(e,r,n){let i=[],o=1,s=1;for(let c of e){let u=new t(new na(o,c.original.startLineNumber),new na(s,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,s=c.modified.endLineNumberExclusive}let a=new t(new na(o,r+1),new na(s,n+1));return a.modified.isEmpty||i.push(a),i}static clip(e,r,n){let i=[];for(let o of e){let s=o.original.intersect(r),a=o.modified.intersect(n);s&&!s.isEmpty&&a&&!a.isEmpty&&i.push(new t(s,a))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}},dM=class t extends tR{constructor(r,n,i){super(r,n);this.innerChanges=i}flip(){return new t(this.modified,this.original,this.innerChanges?.map(r=>r.flip()))}},pM=class t{constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}};var Ktt=g2e.join(__dirname,"diffWorker.js"),fM=class{constructor(e=Ktt){this._worker=new Ms(()=>new wm(e,{name:"Diff worker"}))}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:s(i.changes),moves:i.moves.map(a=>new lM(new tR(new na(a[0],a[1]),new na(a[2],a[3])),s(a[4])))};function s(a){return a.map(c=>new dM(new na(c[0],c[1]),new na(c[2],c[3]),c[4]?.map(u=>new pM(new Li(u[0],u[1],u[2],u[3]),new Li(u[4],u[5],u[6],u[7])))))}}};var mM=class{constructor(e){this.accessor=e}async getEmbeddingEndpoint(){return this._embeddingEndpoint?this._embeddingEndpoint:await this.accessor.get(Ge).getEmbeddingsEndpointInfo()}async computeEmbeddings(e,r,n){this._embeddingEndpoint=await this.getEmbeddingEndpoint();let i=this._embeddingEndpoint.maxBatchSize,o=this._embeddingEndpoint.modelMaxPromptTokens-1;return this.fetchResponseWithBatches(e,n,o,i,r?.parallelism)}async fetchResponseWithBatches(e,r,n,i,o=1){let s=this.accessor.get(ye);for(let l of e)if(s.tokenLength(l)>n)return;let a=[],c=[],u=new Bb(o);try{for(let l=0;l<e.length;l+=i){let d=e.slice(l,l+i);c.push(u.queue(async()=>{if(r?.isCancellationRequested)return;let p=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,cn(),d,r);if(p.type==="failed")throw new Error("Embeddings request failed "+p.reason);return p}))}a=(await Promise.all(c)).flatMap(l=>l?.embeddings??[])}catch{return[]}finally{u.dispose()}if(!r?.isCancellationRequested)return a.length===0?void 0:a}async rawEmbeddingsFetchWithTelemetry(e,r,n,i){let o=Date.now(),s=this.accessor.get(ke),a=await this.rawEmbeddingsFetch(e,r,n,i);return a.type==="failed"?(s.sendMSFTTelemetryErrorEvent("embedding.error",{type:a.type,reason:a.reason}),a):(s.sendMSFTTelemetryEvent("embedding.success",{},{batchSize:n.length,inputTokenCount:n.reduce((c,u)=>c+this.accessor.get(ye).tokenLength(u),0),timeToComplete:Date.now()-o}),a)}async rawEmbeddingsFetch(e,r,n,i){this._embeddingEndpoint||(this._embeddingEndpoint=await this.accessor.get(Ge).getEmbeddingsEndpointInfo());try{let o=e.get(Rt),s=o instanceof PT?await o.getEmbeddingsToken(e):await o.getCopilotToken(e),a={input:n,model:this._embeddingEndpoint.model};this._embeddingEndpoint.interceptBody?.(a);let c=await n0(e.get(Sr),e.get(mt),e.get(ke),this._embeddingEndpoint,s.token,"copilot-panel",r,a,i),u=c.status===200?await c.json():await c.text();return c.status===200&&u.data?{type:"success",embeddings:u.data.map(l=>l.embedding)}:{type:"failed",reason:u.error}}catch(o){let s=o?.message??"Unknown error";return s.match(/Unexpected.*JSON/i)&&(s="timeout"),{type:"failed",reason:s}}}};var FE=W(require("vscode"));var hM=class{get sessionId(){return FE.env.sessionId}get machineId(){return FE.env.machineId}get OS(){switch(zte){case 3:return"Windows";case 1:return"Mac";case 2:return"Linux";default:return"Linux"}}get language(){return FE.env.language}isProduction(){return fA}isPreRelease(){return Il}getBuildType(){return fa.buildType}getVersion(){return fa.version}getBuild(){return fa.build}getName(){return fa.name}getEditorInfo(){return new RT("vscode",FE.version)}getEditorPluginInfo(){return new RT("copilot-chat",fa.version)}getEditorVersionHeaders(){return{"Editor-Version":this.getEditorInfo().format(),"Editor-Plugin-Version":this.getEditorPluginInfo().format()}}};var fl=W(require("vscode")),UE=class{async stat(e){return fl.workspace.fs.stat(e)}async readDirectory(e){return fl.workspace.fs.readDirectory(e)}async createDirectory(e){return fl.workspace.fs.createDirectory(e)}async readFile(e){return fl.workspace.fs.readFile(e)}async writeFile(e,r){return fl.workspace.fs.writeFile(e,r)}async delete(e,r){return fl.workspace.fs.delete(e,r)}async rename(e,r,n){return fl.workspace.fs.rename(e,r,n)}async copy(e,r,n){return fl.workspace.fs.copy(e,r,n)}isWritableFileSystem(e){return!!fl.workspace.fs.isWritableFileSystem(e)}createFileSystemWatcher(e){return fl.workspace.createFileSystemWatcher(e)}};var gM=class extends UE{constructor(){super()}async readFile(e){return super.readFile(e)}};var rR=re("ICertificateReaderCache"),vM=class{constructor(){this.cache=new Map}get(e){return this.cache.get(e)}set(e,r){this.cache.set(e,r)}};var UAe=W(require("fs"));var JM=re("IRootCertificateReader"),BAe=(t,e=process.platform)=>new zZ(t.get(po),Lot(e,t),new ZZ),zZ=class{constructor(e,r,n){this.realReader=r;this.noopReader=n;this.delegate=r,e.onCopilotToken(i=>{this.delegate=i.token.getTokenValue("ssc")==="1"?this.realReader:this.noopReader})}getAllRootCAs(){return this.delegate.getAllRootCAs()}},Lot=(t,e)=>{let r=e.get(rR).get(t);if(r)return r;let n=Oot(t,e),i=new KZ(n),o=new WZ(i),s=new $Z(e,o);return e.get(rR).set(t,s),s},Oot=(t,e)=>{switch(t){case"linux":return new YZ;case"darwin":return new QZ;case"win32":return new XZ(e);default:return new JZ}},$Z=class{constructor(e,r){this.accessor=e;this.delegate=r}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(e){return this.accessor.get(ce).getLogger("certificates").warn(`Failed to read root certificates: ${e}`),[]}}},WZ=class{constructor(e){this.delegate=e}async getAllRootCAs(){return this.certificates||(this.certificates=await this.delegate.getAllRootCAs()),this.certificates}},KZ=class{constructor(e){this.delegate=e}async getAllRootCAs(){let e=await this.delegate.getAllRootCAs(),r=process.env.NODE_EXTRA_CA_CERTS;if(!r)return e;let n=await qAe(r);return e.concat(n)}},YZ=class{async getAllRootCAs(){let e=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let n=await qAe(r);e=e.concat(n)}return e}},QZ=class{async getAllRootCAs(){let e=FAe();return e.all(e.der2.pem).filter(r=>r!==void 0)}},XZ=class{constructor(e){this.accessor=e}async getAllRootCAs(){return await this.accessor.get(NP).loadCaCerts()||[]}},JZ=class{async getAllRootCAs(){throw new Error("No certificate reader available for unsupported platform")}},ZZ=class{async getAllRootCAs(){return[]}};async function qAe(t){try{let n=(await UAe.promises.readFile(t,{encoding:"utf8"})).split(/(?=-----BEGIN CERTIFICATE-----)/g).filter(o=>o.length>0),i=new Set(n);return Array.from(i)}catch(e){if(e?.code!=="ENOENT")throw e}return[]}var HAe=W(require("http"));var Mot=407,ZM=re("IProxySocketFactory"),em=class extends Error{constructor(r,n,i){super(r);this.cause=n;this.responseStatus=i}};function jAe(t){return new eee(t,new tee(t))}var eee=class{constructor(e,r,n=process.platform){this.accessor=e;this.delegate=r;this.platform=n;this.successfullyAuthorized=new xl(20);this.logger=e.get(ce).getLogger("proxy-socket-factory")}async createSocket(e,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(this.logger.debug("Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(e,r));try{return await this.delegate.createSocket(e,r)}catch(n){if(n instanceof em&&n.responseStatus===Mot){this.logger.debug("Proxy authorization required, trying to authorize first time");let i=await this.authorizeAndCreateSocket(e,r);if(i)return this.logger.debug("Proxy authorization successful, caching result"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),i}throw n}}async reauthorize(e,r){let n=await this.authorize(r);n&&(this.logger.debug("Proxy re-authorization successful, received token"),e.headers["Proxy-Authorization"]="Negotiate "+n)}async authorizeAndCreateSocket(e,r){let n=await this.authorize(r);if(this.logger.debug("Proxy authorization successful, received token"),n)return this.logger.debug("Trying to create socket with proxy authorization"),e.headers["Proxy-Authorization"]="Negotiate "+n,await this.delegate.createSocket(e,r)}async authorize(e){this.logger.debug("Loading kerberos module");let r=await Fot(this.accessor);if(!r){this.logger.debug("Could not load kerberos module");return}let n=this.computeSpn(e);this.logger.debug("Initializing kerberos client using spn",n);let i=await r.initializeClient(n);this.logger.debug("Perform client side kerberos step");let o=await i.step("");return this.logger.debug("Received kerberos server response"),o}computeSpn(e){let r=this.accessor.get(Pe),n=r.isDefaultSettingOverwritten(Ne.KerberosServicePrincipal)?r.getConfig(Ne.KerberosServicePrincipal):e.kerberosServicePrincipal;if(n)return this.logger.debug("Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${e.host}`:`HTTP@${e.host}`;return this.logger.debug("Using default kerberos spn",i),i}getProxyCacheKey(e){return e.host+":"+e.port}},tee=class{constructor(e){this.logger=e.get(ce).getLogger("proxy-socket-factory")}async createSocket(e,r){let n=this.createConnectRequestOptions(e,r);return new Promise((i,o)=>{this.logger.debug("Attempting to establish connection to proxy");let s=HAe.request(n);s.useChunkedEncodingByDefault=!1,s.once("connect",(a,c,u)=>{this.logger.debug("Socket Connect returned status code",a.statusCode),s.removeAllListeners(),c.removeAllListeners(),a.statusCode!==200?(c.destroy(),o(new em("tunneling socket could not be established",void 0,a.statusCode))):u.length>0?(c.destroy(),o(new em("got illegal response body from proxy"))):(this.logger.debug("Successfully established tunneling connection to proxy"),i(c))}),s.once("error",a=>{this.logger.debug("Proxy socket connection error",a.message),s.removeAllListeners(),o(new em("tunneling socket could not be established",a))}),s.on("timeout",()=>{this.logger.debug("Proxy socket connection timeout"),o(new em(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${n.host}:${n.port}`))}),s.end()})}createConnectRequestOptions(e,r){let n={...r,method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port,"Proxy-Connection":"keep-alive"},timeout:e.timeout};return e.localAddress&&(n.localAddress=e.localAddress),this.configureProxyAuthorization(n,e),n}configureProxyAuthorization(e,r){e.headers["Proxy-Authorization"]=[],e.proxyAuth&&e.headers["Proxy-Authorization"].push("Basic "+Buffer.from(e.proxyAuth).toString("base64")),r.headers&&r.headers["Proxy-Authorization"]&&e.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}};async function Fot(t){try{return t.get(DP).loadKerberos()}catch{return}}var Uot=W(require("http")),Bot=W(require("https"));var e9=class extends r0{constructor(r){super();this._envService=r}fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}_fetch(r,n,i,o,s){return new Promise((a,c)=>{let l=(r.startsWith("https:")?Bot:Uot).request(r,{method:n,headers:i},d=>{if(s.aborted){d.destroy(),l.destroy(),c(ree(s));return}let p=new nee(l,d,s);a(new bm(d.statusCode||0,d.statusMessage||"",p.headers,async()=>p.text(),async()=>p.json(),async()=>p.body()))});l.setTimeout(60*1e3),l.on("error",c),o&&l.write(o),l.end()})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return qot(r)}isDNSLookupFailedError(r){return r&&r.code==="ENOTFOUND"}isFetcherError(r){return r&&["EADDRINUSE","ECONNREFUSED","ECONNRESET","ENOTFOUND","EPIPE","ETIMEDOUT"].includes(r.code)}getUserMessageForFetcherError(r){return`Please check your firewall rules and network connection then try again. Error Code: ${r.code}.`}};function ree(t){return t.reason}function qot(t){return t&&t.name==="AbortError"}var nee=class{constructor(e,r,n){this.req=e;this.res=r;this.signal=n;this.headers=new class{get(i){let o=r.headers[i];return Array.isArray(o)?o[0]:o??null}[Symbol.iterator](){let i=Object.keys(r.headers),o=0;return{next:()=>{if(o>=i.length)return{done:!0,value:void 0};let s=i[o++];return{done:!1,value:[s,this.get(s)]}}}}}}text(){return new Promise((e,r)=>{let n=[];this.res.on("data",i=>n.push(i)),this.res.on("end",()=>e(Buffer.concat(n).toString())),this.res.on("error",r),this.signal.addEventListener("abort",()=>{this.res.destroy(),this.req.destroy(),r(ree(this.signal))})})}async json(){let e=await this.text();return JSON.parse(e)}async body(){return this.signal.addEventListener("abort",()=>{this.res.emit("error",ree(this.signal)),this.res.destroy(),this.req.destroy()}),this.res}};var iee=require("stream");var t9=class t extends r0{constructor(r,n){super();this._net=r;this._envService=n}static create(r){let n=Hot();return n?new t(n,r):null}async fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}async _fetch(r,n,i,o,s){let a=await this._net.fetch(r,{method:n,headers:i,body:o,signal:s});return new bm(a.status,a.statusText,a.headers,()=>a.text(),()=>a.json(),async()=>{if(!a.body)return iee.Readable.from([]);let c=a.body[Symbol.asyncIterator]();return iee.Readable.from(c)})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return r&&r.name==="AbortError"}isDNSLookupFailedError(r){return r.message==="net::ERR_INTERNET_DISCONNECTED"}isFetcherError(r){return r&&r.message&&r.message.startsWith("net::")}getUserMessageForFetcherError(r){return`Please check your firewall rules and network connection then try again. Error Code: ${r.message}.`}};function Hot(){try{return require("electron").net}catch{}}var oT=W($Pe(),1),wPr={ALPN_HTTP2:oT.default.ALPN_HTTP2,ALPN_HTTP2C:oT.default.ALPN_HTTP2C,ALPN_HTTP1_1:oT.default.ALPN_HTTP1_1,ALPN_HTTP1_0:oT.default.ALPN_HTTP1_0},{fetch:RPr,context:WPe,reset:APr,noCache:PPr,h1:kPr,keepAlive:DPr,h1NoCache:NPr,keepAliveNoCache:LPr,cacheStats:OPr,clearCache:MPr,offPush:FPr,onPush:UPr,createUrl:BPr,timeoutSignal:qPr,Body:HPr,Headers:jPr,Request:GPr,Response:VPr,AbortController:KPe,AbortError:YPe,AbortSignal:zPr,FetchBaseError:$Pr,FetchError:Nee,ALPN_HTTP2:WPr,ALPN_HTTP2C:KPr,ALPN_HTTP1_1:YPr,ALPN_HTTP1_0:QPr}=oT.default;var QPe=W(require("tls"));var y9=class{constructor(e){this._certificateReader=e.get(JM)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async applyToRequestOptions(e){let r=await this._certificateReader.getAllRootCAs(),n={_vscodeAdditionalCaCerts:r};e.secureContext=QPe.createSecureContext(n),e.ca=r,e.cert=r,r.map(i=>{e.secureContext.context.addCACert(i)})}};var b9=class extends r0{constructor(r){super();this.accessor=r;this.createSocketFactory=(r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);try{return await this.proxySocketFactory.createSocket(i,o)}catch(s){throw s instanceof em&&s.cause?new Error(`${s.message}, cause=${s.cause.message}`):new Error(s.message)}};this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new y9(r),this.proxySocketFactory=r.get(ZM)}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.accessor)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){this._rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.accessor)}get rejectUnauthorized(){return this._rejectUnauthorized}createFetchApi(r){let n=r.get(mt);return WPe({userAgent:`GitHubCopilotChat/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,this.rejectUnauthorized):void 0,rejectUnauthorized:this.rejectUnauthorized})}async fetch(r,n){let i={...n,body:n.body?n.body:n.json,signal:n.signal};await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(o);let s=await this.fetchApi.fetch(r,i);return new bm(s.status,s.statusText,s.headers,()=>s.text(),()=>s.json(),async()=>s.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new KPe}isAbortError(r){return r instanceof YPe}isDNSLookupFailedError(r){return r instanceof Nee&&r.code==="ENOTFOUND"}isFetcherError(r){return r instanceof Nee}getUserMessageForFetcherError(r){return`Please check your firewall rules and network connection then try again. Error Code: ${r.code}.`}};var JPe=require("net"),ZPe=require("url"),sT=require("vscode");function dct(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy||null}function eke(t,e){let r=sT.workspace.onDidChangeConfiguration(n=>{let i=n.affectsConfiguration("http.proxy");(n.affectsConfiguration("http.proxyStrictSSL")||n.affectsConfiguration("http.proxyAuthorization")||n.affectsConfiguration("http.proxyKerberosServicePrincipal")||i)&&XPe(t,e,i)});return XPe(t,e),r}var XPe=(t,e,r)=>{let i=sT.workspace.getConfiguration("http").get("proxy")||dct(e);if(i){let o={},s=sT.workspace.getConfiguration("http").get("proxyAuthorization"),a=sT.workspace.getConfiguration("http").get("proxyStrictSSL",!0);s&&(o["Proxy-Authorization"]=s);let c=i,u=i.split(":");if(u.length>2){if(i.includes("[")){let v=i.indexOf("["),b=i.indexOf("]");c=i.substring(v+1,b)}}else c=u[0];let l=(0,JPe.isIP)(c);l===4?i=`https://${i}`:l===6&&(i.includes("[")?i.startsWith("https://")||(i=`https://${i}`):i=`https://[${i}]`);let{hostname:d,port:p,username:f,password:m}=pct(i),h=f&&m&&`${decodeURIComponent(f)}:${decodeURIComponent(m)}`;t.proxySettings={host:d,port:parseInt(p),proxyAuth:h,headers:o};let g=sT.workspace.getConfiguration("http").get("proxyKerberosServicePrincipal");g&&(t.proxySettings.kerberosServicePrincipal=g),t.rejectUnauthorized=a}else r&&!i&&(t.proxySettings=void 0)};function pct(t){try{return new ZPe.URL(t)}catch{throw new Error(`Invalid proxy URL: '${t}'`)}}var _9=class extends b9{constructor(r){super(r);this._store=new Ht;this._store.add(eke(this,process.env))}dispose(){this._store.dispose()}};var x9=class{get fetchStrategy(){return this._fetchStrategy}set fetchStrategy(e){e===2&&!this._electronFetcher&&(this._logger.warn("Cannot use Electron fetcher: Electron net module is not available!"),e=0),this._logger.info(`Using ${bA[e]} fetcher`),this._fetchStrategy=e}get _fetcher(){switch(this.fetchStrategy){case 1:return this._nodeFetcher;case 0:return this._helixFetcher;case 2:return this._electronFetcher??this._helixFetcher}}constructor(e){this._logger=e.get(ce).getLogger("FetcherService"),this._nodeFetcher=new e9(e.get(mt)),this._helixFetcher=new _9(e),this._electronFetcher=t9.create(e.get(mt)),this._fetchStrategy=0;let r=e.get(Pe).getConfig(Ne.DebugUseElectronFetcher),n=e.get(Pe).getConfig(Ne.DebugUseNodeFetcher);this.fetchStrategy=r?2:n?1:0}fetch(e,r){return this._fetcher.fetch(e,r)}disconnectAll(){return this._fetcher.disconnectAll()}makeAbortController(){return this._fetcher.makeAbortController()}isAbortError(e){return this._fetcher.isAbortError(e)}isDNSLookupFailedError(e){return this._fetcher.isDNSLookupFailedError(e)}isFetcherError(e){return this._fetcher.isFetcherError(e)}getUserMessageForFetcherError(e){return this._fetcher.getUserMessageForFetcherError(e)}};var E9=W(require("vscode")),S9=class{async open(e){await E9.commands.executeCommand("vscode.open",E9.Uri.parse(e))}};function tke(t){let r=[`(repo:${(Array.isArray(t.repo)?t.repo:[t.repo]).join(" OR repo:")})`];return t.lang&&r.push(`(lang:${t.lang.join(" OR lang:")})`),t.notLang&&r.push(`NOT (lang:${t.notLang.join(" OR lang:")})`),t.path&&r.push(`(path:${t.path.join(" OR path:")})`),t.notPath&&r.push(`NOT (path:${t.notPath.join(" OR path:")})`),r.join(" ")}var T9=class extends Error{constructor(r,n){super(n);this.status=r}},IR=class{constructor(e){this._accessor=e;this._logger=this._accessor.get(ce).getLogger("CodeOrDocsSearchClient");this._configurationService=this._accessor.get(Pe)}async search(e,r,n=6,i=.766,o){let s;if(Array.isArray(r.repo)&&!r.repo.length)throw new Error("No repos specified");try{s=await this.postCodeOrDocsSearchRequestWithRetry(e,r,i,n,o)}catch(c){throw this._accessor.get(ke).sendGHTelemetryException(c,`${this.slug} search failed`),c}let a=s.errors?.map(QEe)??[];if(!Array.isArray(r.repo)){if(a.length)throw a.length>1?new AggregateError(a):a[0];return s.results}return{results:s.results,errors:a}}async postCodeOrDocsSearchRequestWithRetry(e,r,n,i,o){let s=this._accessor.get(Rt),a=await s.getPermissiveGitHubToken({silent:!0})??await s.getAnyGitHubToken(),c=`${this._configurationService.getConfig(Ne.AgentsEndpointUrl)}/search/${this.slug}`,u=5,l=0,d=new Set,p;for(;l<u;)try{let f;try{return f=await this.postCodeOrDocsSearchRequest(c,a,e,r,n,i,o),f}catch(m){if(m instanceof T9)throw m;p=m;break}}catch(f){l++;let m=l*1e3;d.add(`Error fetching ${this.slug} search. ${f.message??f}`),this._logger.warn(`[repo:${r.repo}] Error fetching ${this.slug} search. Retrying in ${l} seconds. Query: ${e}`),await new Promise(h=>setTimeout(h,m))}throw l>=u&&(this._logger.warn(`[repo:${r.repo}] Max Retry Error thrown while querying '${e}'`),p=NY({error:"ERROR_TYPE_MAX_RETRIES_EXCEEDED",message:`${this.slug} search timed out after ${u} retries. ${Array.from(d).join(`
`)}`})),p}async postCodeOrDocsSearchRequest(e,r,n,i,o,s,a){let c={url:e,modelMaxPromptTokens:0,getExtraHeaders(){return{Accept:"application/json","X-GitHub-Api-Version":"2023-12-12-preview"}}},u=await n0(this._accessor.get(Sr),this._accessor.get(mt),this._accessor.get(ke),c,r??"",void 0,cn(),{query:n,scopingQuery:tke(i),similarity:o,limit:s},a),l=await u.text();if(u.status===404||u.status===400&&l.includes("unknown integration"))throw this._logger.debug(`${this.slug} search endpoint not available for this user.`),NY({error:"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT",message:`${this.slug}: ${l}`});let d;try{d=JSON.parse(l)}catch{throw new T9(u.status,l)}return d}};we([ti(e=>e._logger)],IR.prototype,"search",1);var I9=class extends IR{constructor(){super(...arguments);this.slug="code"}},C9=class extends IR{constructor(){super(...arguments);this.slug="docs"}};var w9=class{sendEventData(e,r){throw new Error("Telemetry disabled")}sendErrorData(e,r){throw new Error("Telemetry disabled")}flush(){return Promise.resolve()}};var Lee=class{getReporter(e,r){if(!r)return this.reporter;if(R9(e))return this.reporterSecure;if(e.get(Kr).extensionMode===ls.Test)return new w9}setReporter(e){this.reporter=e}setSecureReporter(e){this.reporterSecure=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.flush?this.reporter.flush():void 0,this.reporter=void 0);let r=Promise.resolve();this.reporterSecure&&(r=this.reporterSecure.flush?this.reporterSecure.flush():void 0,this.reporterSecure=void 0),await Promise.all([e,r])}},A9=class{constructor(e){this.accessor=e;this.reporters=new Lee;this.openPromises=void 0}withPromise(e){return this.openPromises?(this.openPromises.add(e),e.then(r=>{this.openPromises?.delete(e)})):e}async enablePromiseTracking(e){e?this.openPromises||(this.openPromises=new Set):await this.awaitOpenPromises(void 0)}setSecureReporter(e){this.reporters.setSecureReporter(e)}setReporter(e){this.reporters.setReporter(e)}async sendTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!1))}async sendRestrictedTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!0))}async sendErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!1))}async sendRestrictedErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!0))}async sendExpProblemTelemetry(e){await this.withPromise(this._sendExpProblemTelemetry(e))}async sendExceptionTelemetry(e,r){await this.withPromise(this._sendExceptionTelemetry(e,r))}async deactivate(){await this.awaitOpenPromises(new Set),await this.reporters.deactivate()}async awaitOpenPromises(e){if(this.openPromises){let r=[...this.openPromises.values()];this.openPromises=e,await Promise.all(r)}}async _sendTelemetry(e,r,n){if(n&&!R9(this.accessor))return;let i=r||Er.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor),this.sendTelemetryEvent(n??!1,e,i)}async _sendExpProblemTelemetry(e){let r="expProblem",n=Er.createAndMarkAsIssued(e,{});await n.makeReadyForSending(this.accessor),this.sendTelemetryEvent(!1,r,n)}async _sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=R9(this.accessor),o=Er.createAndMarkAsIssued({origin:g4(r),reason:i?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await o.makeReadyForSending(this.accessor),this.sendTelemetryEvent(!1,"exception",o),!i)return;let s=Er.createAndMarkAsIssued({origin:r});await s.makeReadyForSending(this.accessor),this.sendTelemetryException(!0,n,s)}async _sendErrorTelemetry(e,r,n){if(n&&!R9(this.accessor))return;let i=r||Er.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor),this.sendTelemetryErrorEvent(n??!1,e,i)}sendTelemetryEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Er.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}sendTelemetryException(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Er.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendErrorData(r,{...o,...n.measurements})}}sendTelemetryErrorEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Er.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}};function R9(t){return t.get(Gb).optedIn}var CR=W(require("vscode")),P9=class{getAllExtensions(){return CR.extensions.all}async getAllCommands(){return CR.commands.executeCommand("_getAllCommands")}async getAllSettings(){return CR.commands.executeCommand("_getAllSettings")}};function mct(t){switch(t){case"text-embedding-ada-002":case"copilot-preview-ada-centralus":case"copilot-preview-babbage-centralus":return{maxBatchSize:16,maxTokens:8192};default:throw new Error(`Unknown model ${t}`)}}var k9=class{constructor(e){this.model=e;this.url="https://api.githubcopilot.com/embeddings";let r=mct(e);this.maxBatchSize=r.maxBatchSize,this.modelMaxPromptTokens=r.maxTokens}};var hct={url:"https://api.githubcopilot.com/models",modelMaxPromptTokens:0},D9=class{constructor(e,r,n,i){this._fetcher=e;this._envService=r;this._copilotTokenManager=n;this._telemetryService=i;this._lastFetchTime=0}async getGpt4Model(){return this._shouldRefreshModels()&&await this._fetchModels(),this._gpt4Model?this._gpt4Model:"gpt-4"}async getGPT3Model(){return this._shouldRefreshModels()&&await this._fetchModels(),this._gpt3Model?this._gpt3Model:"gpt-3.5-turbo"}_shouldRefreshModels(){if(!this._gpt3Model||!this._gpt4Model)return!0;let e=10*60*1e3,r=Date.now();return this._lastFetchTime?r-this._lastFetchTime>e:!0}async _fetchModels(){let e=await this._copilotTokenManager.getAnyGitHubToken();if(e)try{let r=await pwe(this._fetcher,this._envService,this._telemetryService,hct,e,"model-access",cn());this._lastFetchTime=Date.now();let i=(await r.json()).data.filter(a=>a.capabilities.type==="chat"),o=!1,s=!1;for(let a of i)if(a.capabilities.family==="gpt-4"&&!o&&(this._gpt4Model=a.id,o=!0),a.capabilities.family==="gpt-3"&&!s&&(this._gpt3Model=a.id,s=!0),s&&o)break}catch{this._lastFetchTime=0}}};var aT=class{constructor(e){this.accessor=e;this._chatEndpoints=new Map;this.accessor.get(po).onCopilotToken(r=>{let n=this.accessor.get(Pe).getConfig(Ne.DebugOverrideChatEngine);r.token.isInternal&&n&&(this._overridenChatModel=n)}),this._modelFetcher=new D9(e.get(Sr),e.get(mt),e.get(Rt),e.get(ke))}async getChatEndpointInfo(e){let r=this._chatEndpoints.get(e);if(!r){let n=uwe(this.accessor),i=await lwe(this.accessor,e),o=await this.shouldDisableSnippy();r=new _E(n,e,i,o),this._chatEndpoints.set(e,r)}return r}async shouldDisableSnippy(){let e=await this.accessor.get(Rt).getCopilotToken(this.accessor),r=this.accessor.get(Kr).extensionMode===ls.Development;return e.isInternal&&r}async getEmbeddingsEndpointInfo(){return this._embeddingsEndpoint??=new k9("text-embedding-ada-002"),this._embeddingsEndpoint}async getNonUserRequestEndpoint(){return this.getChatEndpointInfo(await this._modelFetcher.getGPT3Model())}async getUserRequestEndpoint(e,r,n){if(n=n??this._overridenChatModel,n)return this.getChatEndpointInfo(n);let i=this.accessor.get(Yr),o=this.accessor.get(Pe),s=await i.getTreatmentVariableAsync("vscode","copilotchat.gpt4Turbo",!0)?"gpt-4-0125-adaf089e":await this._modelFetcher.getGpt4Model(),a;if(e===2)a=s;else if(e===1)switch(r){case EE.ID:{let c=o.getConfig(Ne.FixUseGPT4InInlineChat);(await i.getTreatmentVariableAsync("vscode","copilotchat.fixInlineGpt4",!0)||c)&&(a=s);break}case Vg.ID:case Gg.ID:case ks.ID:{o.isDefaultSettingOverwritten(Ne.DebugOverrideChatEngine)?a=o.getConfig(Ne.DebugOverrideChatEngine):await this.accessor.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.inlineChatGpt4",!0)&&(a=s);break}}return a||(a=await this._modelFetcher.getGPT3Model()),this.getChatEndpointInfo(a)}};aT=we([de(0,Ct)],aT);function rke(t){t.define(po,new IA),t.define(mt,new hM),t.define(Wd,new fM),t.define(_m,new A9(t)),t.define(rR,new vM),t.define(JM,BAe(t)),t.define(ZM,jAe(t)),t.define(Sr,new x9(t)),t.define(Ge,new Lt(aT));let e=new P2(t,new f_,new UE);t.define(Oe,e),t.define(Gb,new CA(t)),t.define(RA,new wA),t.define(fwe,new u8),t.define(TA,new EA(t)),t.define(jb,new S9),t.define(i_,new bP),t.define(gi,new gM),t.define(Bs,new mM(t)),t.define(Za,new Em(t)),t.define(cu,new n5(t)),t.define(Z5,new J5(t)),t.define(LE,new iM(t)),t.define(u5,new I9(t)),t.define(l5,new C9(t)),t.define(q0,new P9)}var gct=$r.window.createOutputChannel("GitHub Copilot Chat",{log:!0});async function vct(t,e){if(t.extensionMode===$r.ExtensionMode.Test&&!e)return t;$r.l10n.bundle&&N9.config({contents:$r.l10n.bundle});let r=await oke(t);t.subscriptions.push(ske(r));let n=r.get(_m),i=r.get(ke);return r.get(mt).isProduction||ike.install(),await(async()=>{let a=c=>{let u=c.message||c,l=Er.createAndMarkAsIssued({reason:u});i.sendGHTelemetryErrorEvent("activationFailed",l.properties,l.measurements),n.deactivate();let d=u==="GitHubLoginFailed"?MF:`GitHub Copilot could not connect to server. Extension activation failed: "${u}"`;r.get(ce).defaultLogger.error(d),$r.commands.executeCommand("setContext","github.copilot.activated",!1);let p=$r.authentication.onDidChangeSessions(async f=>{try{O0(f,r.get(Pe))&&await NA(f,r)&&($r.commands.executeCommand("setContext","github.copilot.activated",!0),RR(r),p.dispose())}catch(m){RR(r,m),a(m)}})};try{await r.get(Rt).getCopilotToken(r),$r.commands.executeCommand("setContext","github.copilot.activated",!0),await swe(r)}catch(c){r.get(Sr).isDNSLookupFailedError(c)&&t.subscriptions.push(bct(r,a)),RR(r,c),a(c)}t.subscriptions.push($r.workspace.onDidChangeConfiguration(c=>Lne(c,r))),bwe(r),_ct(r,t),i.sendGHTelemetryEvent("extension.activate")})(),$r.ExtensionMode.Test===t.extensionMode?r:{getAPI(a){if(a>f2.version)throw new Error("Invalid Copilot Chat extension API version. Please upgrade Copilot Chat.");return new f2(r)}}}async function oke(t){let e=new pA;e.define(Pe,new Lt(uP)),e.define(ce,new Lt(_p,[[new gA,new vA(gct)]])),e.define(VP,new Lt(GP)),e.define(Ir,new Lt(l_,[!0])),e.define(ye,new v7.Cl100KBaseTokenizer),rke(e),e.define(Kr,t),e.define(Za,new Lt(Em)),e.define(wg,new Lt(Ff)),e.define(ya,new Lt(H0)),e.define($8,new Lt(PE)),e.define(_t,new Lt($P)),e.define(km,new Lt(p_)),e.define(Ml,new wP(e)),e.define(IP,new Lt(NE)),e.define(vi,new Lt(ku)),e.define(Fl,new Lt(o_)),e.define(dP,new Lt(DE)),e.define(Pm,new Lt(d_)),e.define(Zi,new Lt(PP)),e.define(ho,new Lt(kP)),e.define(pP,new fP),e.define(DP,new LP),e.define(NP,new OP),e.define($i,new AO),e.define(e_,new lP),e.define(sl,new NO),e.define(Im,new Lt(Pu)),e.define(OA,new Lt(ZS)),e.define(Pg,new y5);let r=t.extension.packageJSON.internalAIKey??"",n=t.extension.packageJSON.ariaKey??"";if(t.extensionMode===$r.ExtensionMode.Test)e.define(Rt,Tre()),e.define(jb,new xA),await nke(e,t,r,n,"copilot-test",!0);else{let i=new LA(e.get(Pe));t.subscriptions.push(i),e.define(Rt,i),e.define(i_,new yP),await nke(e,t,r,n,t.extension.packageJSON.name,$r.env.isTelemetryEnabled),await e.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.useElectronFetcher",!0)?e.get(Sr).fetchStrategy=2:await e.get(Yr).getTreatmentVariableAsync("vscode","copilotchat.useNodeFetcher",!0)&&(e.get(Sr).fetchStrategy=1)}return e.define(Qt,new Lt(o0)),e.define(VS,new Lt(vE)),e.define(SA,new FP),e.define(N7,new TP),e.define(Hb,new Lt(c_)),e.define(ki,{_serviceBrand:void 0,maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:e.get(Pe).getConfig(Ne.ConversationAdditionalPromptContext),rejectionMessage:N9.t("Sorry, but I can only assist with programming related questions.")}),e.define(GT,new MP),Ine(e),e.define(rt,new Lt(aS)),e.define(Tm,new Lt(n_)),e.define(f5,new Lt(yS)),e.define(Ag,new Lt(qf,[void 0])),e.define(q6,new Lt(pE)),e.define(rp,new Lt(hE)),e.define(wX,new Lt(gE)),t.subscriptions.push(e.get(wX)),e.define(l8,new Lt(OE)),e.define(v5,new g5),e.define(gP,new Lt(r_)),t.subscriptions.push(e.get(Oe)),e.get(Oe).init(),e.seal(),e}async function yct(t,e){if($r.ExtensionMode.Production===e.extensionMode){let r=t.get(ke),n=await Bve(e,r,t.get(mt).isPreRelease());t.define(Yr,n)}else t.define(Yr,new WP)}async function nke(t,e,r,n,i,o){let s=await iV(t,i,o),a=$r.env.onDidChangeTelemetryEnabled(async c=>{s?.dispose(),s=await iV(t,e.extension.packageJSON.name,c&&$r.env.isTelemetryEnabled)});if(e.subscriptions.push(a),e.subscriptions.push(new $r.Disposable(()=>s?.dispose())),$r.ExtensionMode.Production===e.extensionMode){let c=new wO(e.extension.packageJSON.name,t,r,n,rV,nV);t.define(ke,c),e.subscriptions.push(c)}else t.define(ke,new KP);yct(t,e)}function ske(t){return{dispose:async()=>{t.get(ke).sendGHTelemetryEvent("extension.deactivate")}}}var wR={Offline:"github.copilot.offline",IndividualDisabled:"github.copilot.interactiveSession.individual.disabled",IndividualExpired:"github.copilot.interactiveSession.individual.expired",EnterpriseDisabled:"github.copilot.interactiveSession.enterprise.disabled"};function RR(t,e){let r=Object.values(wR),n;t.get(Sr).isDNSLookupFailedError(e)?n=wR.Offline:e instanceof NT?n=wR.IndividualDisabled:e instanceof LT?n=wR.IndividualExpired:e instanceof OT&&(n=wR.EnterpriseDisabled),n&&$r.commands.executeCommand("setContext",n,!0);for(let o of r)o!==n&&$r.commands.executeCommand("setContext",o,!1)}function bct(t,e){return $r.commands.registerCommand("github.copilot.offline",async()=>{try{await t.get(Rt).getCopilotToken(t),$r.commands.executeCommand("setContext","github.copilot.activated",!0),RR(t)}catch(r){if(t.get(Sr).isDNSLookupFailedError(r))return;RR(t,r),e(r)}})}async function _ct(t,e){let r=t.get(ce).getLogger("contributions"),n=o=>{r.error(`Error while loading contribution: ${o} ${o.stack}`)},i=o=>{o instanceof $r.Disposable&&e.subscriptions.push(o)};for(let o of h2e){let s;try{s=o.create(t)}catch(a){n(a)}i(s),s instanceof Promise&&s.then(i).catch(n)}}0&&(module.exports={activate,createExtensionContext,onDeactivate});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

@vscode/prompt-tsx/dist/base/util/arrays.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
