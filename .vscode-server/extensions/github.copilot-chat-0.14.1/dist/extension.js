"use strict";var gRe=Object.create;var hS=Object.defineProperty;var kJ=Object.getOwnPropertyDescriptor;var vRe=Object.getOwnPropertyNames;var yRe=Object.getPrototypeOf,bRe=Object.prototype.hasOwnProperty;var T=(t,e)=>()=>(t&&(e=t(t=0)),e);var k=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),$r=(t,e)=>{for(var r in e)hS(t,r,{get:e[r],enumerable:!0})},DJ=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vRe(e))!bRe.call(t,i)&&i!==r&&hS(t,i,{get:()=>e[i],enumerable:!(n=kJ(e,i))||n.enumerable});return t};var fe=(t,e,r)=>(r=t!=null?gRe(yRe(t)):{},DJ(e||!t||!t.__esModule?hS(r,"default",{value:t,enumerable:!0}):r,t)),Ti=t=>DJ(hS({},"__esModule",{value:!0}),t),ze=(t,e,r,n)=>{for(var i=n>1?void 0:n?kJ(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&hS(e,r,i),i},rt=(t,e)=>(r,n)=>e(r,n,t);var fr=k((iot,MJ)=>{"use strict";var pM=Object.defineProperty,_Re=Object.getOwnPropertyDescriptor,xRe=Object.getOwnPropertyNames,ERe=Object.prototype.hasOwnProperty,SRe=(t,e)=>{for(var r in e)pM(t,r,{get:e[r],enumerable:!0})},TRe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xRe(e))!ERe.call(t,i)&&i!==r&&pM(t,i,{get:()=>e[i],enumerable:!(n=_Re(e,i))||n.enumerable});return t},CRe=t=>TRe(pM({},"__esModule",{value:!0}),t),LJ={};SRe(LJ,{config:()=>PRe,t:()=>OJ});MJ.exports=CRe(LJ);var IRe=require("fs"),wRe=require("fs/promises");async function RRe(t){if(t.protocol==="file:")return await(0,wRe.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let n=`Unexpected ${e.status} response while trying to read ${t}`;try{n+=`: ${await e.text()}`}catch{}throw new Error(n)}return await e.text()}throw new Error("Unsupported protocol")}function ARe(t){return(0,IRe.readFileSync)(t,"utf8")}var gS;function PRe(t){if("contents"in t){typeof t.contents=="string"?gS=JSON.parse(t.contents):gS=t.contents;return}if("fsPath"in t){let e=ARe(t.fsPath),r=JSON.parse(e);gS=NJ(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=RRe(e).then(o=>{try{let s=JSON.parse(o);gS=NJ(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function OJ(...t){let e=t[0],r,n,i;if(typeof e=="string")r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return OJ(a,...s)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=gS?.[r];return o?typeof o=="string"?O2(o,i):o.comment?O2(o.message,i):O2(n,i):O2(n,i)}var kRe=/{([^}]+)}/g;function O2(t,e){return Object.keys(e).length===0?t:t.replace(kRe,(r,n)=>e[n]??r)}function NJ(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var UJ=k(fM=>{var FJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");fM.encode=function(t){if(0<=t&&t<FJ.length)return FJ[t];throw new TypeError("Must be between 0 and 63: "+t)};fM.decode=function(t){var e=65,r=90,n=97,i=122,o=48,s=57,a=43,c=47,u=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=s?t-o+l:t==a?62:t==c?63:-1}});var gM=k(hM=>{var BJ=UJ(),mM=5,qJ=1<<mM,HJ=qJ-1,jJ=qJ;function DRe(t){return t<0?(-t<<1)+1:(t<<1)+0}function NRe(t){var e=(t&1)===1,r=t>>1;return e?-r:r}hM.encode=function(e){var r="",n,i=DRe(e);do n=i&HJ,i>>>=mM,i>0&&(n|=jJ),r+=BJ.encode(n);while(i>0);return r};hM.decode=function(e,r,n){var i=e.length,o=0,s=0,a,c;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=BJ.decode(e.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(c&jJ),c&=HJ,o=o+(c<<s),s+=mM}while(a);n.value=NRe(o),n.rest=r}});var Hy=k(es=>{function LRe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}es.getArg=LRe;var GJ=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,ORe=/^data:.+\,.+$/;function vS(t){var e=t.match(GJ);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}es.urlParse=vS;function By(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}es.urlGenerate=By;function vM(t){var e=t,r=vS(t);if(r){if(!r.path)return t;e=r.path}for(var n=es.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,By(r)):e}es.normalize=vM;function VJ(t,e){t===""&&(t="."),e===""&&(e=".");var r=vS(e),n=vS(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),By(r);if(r||e.match(ORe))return e;if(n&&!n.host&&!n.path)return n.host=e,By(n);var i=e.charAt(0)==="/"?e:vM(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,By(n)):i}es.join=VJ;es.isAbsolute=function(t){return t.charAt(0)==="/"||GJ.test(t)};function MRe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}es.relative=MRe;var zJ=function(){var t=Object.create(null);return!("__proto__"in t)}();function $J(t){return t}function FRe(t){return WJ(t)?"$"+t:t}es.toSetString=zJ?$J:FRe;function URe(t){return WJ(t)?t.slice(1):t}es.fromSetString=zJ?$J:URe;function WJ(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function BRe(t,e,r){var n=qy(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:qy(t.name,e.name)}es.compareByOriginalPositions=BRe;function qRe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=qy(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:qy(t.name,e.name)}es.compareByGeneratedPositionsDeflated=qRe;function qy(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function HRe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=qy(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:qy(t.name,e.name)}es.compareByGeneratedPositionsInflated=HRe;function jRe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}es.parseSourceMapInput=jRe;function GRe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=vS(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=VJ(By(n),e)}return vM(e)}es.computeSourceURL=GRe});var _M=k(YJ=>{var yM=Hy(),bM=Object.prototype.hasOwnProperty,zg=typeof Map<"u";function qd(){this._array=[],this._set=zg?new Map:Object.create(null)}qd.fromArray=function(e,r){for(var n=new qd,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n};qd.prototype.size=function(){return zg?this._set.size:Object.getOwnPropertyNames(this._set).length};qd.prototype.add=function(e,r){var n=zg?e:yM.toSetString(e),i=zg?this.has(e):bM.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(zg?this._set.set(e,o):this._set[n]=o)};qd.prototype.has=function(e){if(zg)return this._set.has(e);var r=yM.toSetString(e);return bM.call(this._set,r)};qd.prototype.indexOf=function(e){if(zg){var r=this._set.get(e);if(r>=0)return r}else{var n=yM.toSetString(e);if(bM.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};qd.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};qd.prototype.toArray=function(){return this._array.slice()};YJ.ArraySet=qd});var XJ=k(QJ=>{var KJ=Hy();function VRe(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||KJ.compareByGeneratedPositionsInflated(t,e)<=0}function M2(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}M2.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};M2.prototype.add=function(e){VRe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};M2.prototype.toArray=function(){return this._sorted||(this._array.sort(KJ.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};QJ.MappingList=M2});var xM=k(JJ=>{var yS=gM(),Ci=Hy(),F2=_M().ArraySet,zRe=XJ().MappingList;function oc(t){t||(t={}),this._file=Ci.getArg(t,"file",null),this._sourceRoot=Ci.getArg(t,"sourceRoot",null),this._skipValidation=Ci.getArg(t,"skipValidation",!1),this._sources=new F2,this._names=new F2,this._mappings=new zRe,this._sourcesContents=null}oc.prototype._version=3;oc.fromSourceMap=function(e){var r=e.sourceRoot,n=new oc({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Ci.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Ci.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};oc.prototype.addMapping=function(e){var r=Ci.getArg(e,"generated"),n=Ci.getArg(e,"original",null),i=Ci.getArg(e,"source",null),o=Ci.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};oc.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Ci.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ci.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Ci.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};oc.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Ci.relative(o,i));var s=new F2,a=new F2;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=Ci.join(n,c.source)),o!=null&&(c.source=Ci.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var l=c.source;l!=null&&!s.has(l)&&s.add(l);var d=c.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=s,this._names=a,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=Ci.join(n,c)),o!=null&&(c=Ci.relative(o,c)),this.setSourceContent(c,u))},this)};oc.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};oc.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,o=0,s=0,a="",c,u,l,d,p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(u=p[f],c="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)c+=";",r++;else if(f>0){if(!Ci.compareByGeneratedPositionsInflated(u,p[f-1]))continue;c+=","}c+=yS.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(d=this._sources.indexOf(u.source),c+=yS.encode(d-s),s=d,c+=yS.encode(u.originalLine-1-i),i=u.originalLine-1,c+=yS.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(l=this._names.indexOf(u.name),c+=yS.encode(l-o),o=l)),a+=c}return a};oc.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Ci.relative(r,n));var i=Ci.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};oc.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};oc.prototype.toString=function(){return JSON.stringify(this.toJSON())};JJ.SourceMapGenerator=oc});var ZJ=k($g=>{$g.GREATEST_LOWER_BOUND=1;$g.LEAST_UPPER_BOUND=2;function EM(t,e,r,n,i,o){var s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?EM(s,e,r,n,i,o):o==$g.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?EM(t,s,r,n,i,o):o==$g.LEAST_UPPER_BOUND?s:t<0?-1:t}$g.search=function(e,r,n,i){if(r.length===0)return-1;var o=EM(-1,r.length,e,r,n,i||$g.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var tZ=k(eZ=>{function SM(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function $Re(t,e){return Math.round(t+Math.random()*(e-t))}function TM(t,e,r,n){if(r<n){var i=$Re(r,n),o=r-1;SM(t,i,n);for(var s=t[n],a=r;a<n;a++)e(t[a],s)<=0&&(o+=1,SM(t,o,a));SM(t,o+1,a);var c=o+1;TM(t,e,r,c-1),TM(t,e,c+1,n)}}eZ.quickSort=function(t,e){TM(t,e,0,t.length-1)}});var nZ=k(U2=>{var Je=Hy(),CM=ZJ(),jy=_M().ArraySet,WRe=gM(),bS=tZ().quickSort;function fn(t,e){var r=t;return typeof t=="string"&&(r=Je.parseSourceMapInput(t)),r.sections!=null?new ou(r,e):new wo(r,e)}fn.fromSourceMap=function(t,e){return wo.fromSourceMap(t,e)};fn.prototype._version=3;fn.prototype.__generatedMappings=null;Object.defineProperty(fn.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});fn.prototype.__originalMappings=null;Object.defineProperty(fn.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});fn.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};fn.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};fn.GENERATED_ORDER=1;fn.ORIGINAL_ORDER=2;fn.GREATEST_LOWER_BOUND=1;fn.LEAST_UPPER_BOUND=2;fn.prototype.eachMapping=function(e,r,n){var i=r||null,o=n||fn.GENERATED_ORDER,s;switch(o){case fn.GENERATED_ORDER:s=this._generatedMappings;break;case fn.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=Je.computeSourceURL(a,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)};fn.prototype.allGeneratedPositionsFor=function(e){var r=Je.getArg(e,"line"),n={source:Je.getArg(e,"source"),originalLine:r,originalColumn:Je.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Je.compareByOriginalPositions,CM.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:Je.getArg(s,"generatedLine",null),column:Je.getArg(s,"generatedColumn",null),lastColumn:Je.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var c=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==c;)i.push({line:Je.getArg(s,"generatedLine",null),column:Je.getArg(s,"generatedColumn",null),lastColumn:Je.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};U2.SourceMapConsumer=fn;function wo(t,e){var r=t;typeof t=="string"&&(r=Je.parseSourceMapInput(t));var n=Je.getArg(r,"version"),i=Je.getArg(r,"sources"),o=Je.getArg(r,"names",[]),s=Je.getArg(r,"sourceRoot",null),a=Je.getArg(r,"sourcesContent",null),c=Je.getArg(r,"mappings"),u=Je.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=Je.normalize(s)),i=i.map(String).map(Je.normalize).map(function(l){return s&&Je.isAbsolute(s)&&Je.isAbsolute(l)?Je.relative(s,l):l}),this._names=jy.fromArray(o.map(String),!0),this._sources=jy.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(l){return Je.computeSourceURL(s,l,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=c,this._sourceMapURL=e,this.file=u}wo.prototype=Object.create(fn.prototype);wo.prototype.consumer=fn;wo.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Je.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};wo.fromSourceMap=function(e,r){var n=Object.create(wo.prototype),i=n._names=jy.fromArray(e._names.toArray(),!0),o=n._sources=jy.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return Je.computeSourceURL(n.sourceRoot,f,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,l=s.length;u<l;u++){var d=s[u],p=new rZ;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=o.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=i.indexOf(d.name)),c.push(p)),a.push(p)}return bS(n.__originalMappings,Je.compareByOriginalPositions),n};wo.prototype._version=3;Object.defineProperty(wo.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function rZ(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}wo.prototype._parseMappings=function(e,r){for(var n=1,i=0,o=0,s=0,a=0,c=0,u=e.length,l=0,d={},p={},f=[],m=[],h,g,v,b,y;l<u;)if(e.charAt(l)===";")n++,l++,i=0;else if(e.charAt(l)===",")l++;else{for(h=new rZ,h.generatedLine=n,b=l;b<u&&!this._charIsMappingSeparator(e,b);b++);if(g=e.slice(l,b),v=d[g],v)l+=g.length;else{for(v=[];l<b;)WRe.decode(e,l,p),y=p.value,l=p.rest,v.push(y);if(v.length===2)throw new Error("Found a source, but no line and column");if(v.length===3)throw new Error("Found a source and line, but no column");d[g]=v}h.generatedColumn=i+v[0],i=h.generatedColumn,v.length>1&&(h.source=a+v[1],a+=v[1],h.originalLine=o+v[2],o=h.originalLine,h.originalLine+=1,h.originalColumn=s+v[3],s=h.originalColumn,v.length>4&&(h.name=c+v[4],c+=v[4])),m.push(h),typeof h.originalLine=="number"&&f.push(h)}bS(m,Je.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,bS(f,Je.compareByOriginalPositions),this.__originalMappings=f};wo.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return CM.search(e,r,o,s)};wo.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};wo.prototype.originalPositionFor=function(e){var r={generatedLine:Je.getArg(e,"line"),generatedColumn:Je.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Je.compareByGeneratedPositionsDeflated,Je.getArg(e,"bias",fn.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Je.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Je.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=Je.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:Je.getArg(i,"originalLine",null),column:Je.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};wo.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};wo.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Je.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Je.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};wo.prototype.generatedPositionFor=function(e){var r=Je.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Je.getArg(e,"line"),originalColumn:Je.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Je.compareByOriginalPositions,Je.getArg(e,"bias",fn.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Je.getArg(o,"generatedLine",null),column:Je.getArg(o,"generatedColumn",null),lastColumn:Je.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};U2.BasicSourceMapConsumer=wo;function ou(t,e){var r=t;typeof t=="string"&&(r=Je.parseSourceMapInput(t));var n=Je.getArg(r,"version"),i=Je.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new jy,this._names=new jy;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=Je.getArg(s,"offset"),c=Je.getArg(a,"line"),u=Je.getArg(a,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new fn(Je.getArg(s,"map"),e)}})}ou.prototype=Object.create(fn.prototype);ou.prototype.constructor=fn;ou.prototype._version=3;Object.defineProperty(ou.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});ou.prototype.originalPositionFor=function(e){var r={generatedLine:Je.getArg(e,"line"),generatedColumn:Je.getArg(e,"column")},n=CM.search(r,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};ou.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};ou.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};ou.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Je.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};ou.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],c=i.consumer._sources.at(a.source);c=Je.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;a.name&&(u=i.consumer._names.at(a.name),this._names.add(u),u=this._names.indexOf(u));var l={source:c,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}bS(this.__generatedMappings,Je.compareByGeneratedPositionsDeflated),bS(this.__originalMappings,Je.compareByOriginalPositions)};U2.IndexedSourceMapConsumer=ou});var oZ=k(iZ=>{var YRe=xM().SourceMapGenerator,B2=Hy(),KRe=/(\r?\n)/,QRe=10,Gy="$$$isSourceNode$$$";function Na(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[Gy]=!0,n!=null&&this.add(n)}Na.fromStringWithSourceMap=function(e,r,n){var i=new Na,o=e.split(KRe),s=0,a=function(){var p=m(),f=m()||"";return p+f;function m(){return s<o.length?o[s++]:void 0}},c=1,u=0,l=null;return r.eachMapping(function(p){if(l!==null)if(c<p.generatedLine)d(l,a()),c++,u=0;else{var f=o[s]||"",m=f.substr(0,p.generatedColumn-u);o[s]=f.substr(p.generatedColumn-u),u=p.generatedColumn,d(l,m),l=p;return}for(;c<p.generatedLine;)i.add(a()),c++;if(u<p.generatedColumn){var f=o[s]||"";i.add(f.substr(0,p.generatedColumn)),o[s]=f.substr(p.generatedColumn),u=p.generatedColumn}l=p},this),s<o.length&&(l&&d(l,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=B2.join(n,p)),i.setSourceContent(p,f))}),i;function d(p,f){if(p===null||p.source===void 0)i.add(f);else{var m=n?B2.join(n,p.source):p.source;i.add(new Na(p.originalLine,p.originalColumn,m,f,p.name))}}};Na.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Gy]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Na.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Gy]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Na.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Gy]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Na.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};Na.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Gy]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};Na.prototype.setSourceContent=function(e,r){this.sourceContents[B2.toSetString(e)]=r};Na.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Gy]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(B2.fromSetString(i[r]),this.sourceContents[i[r]])};Na.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};Na.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new YRe(e),i=!1,o=null,s=null,a=null,c=null;return this.walk(function(u,l){r.code+=u,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||c!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),o=l.source,s=l.line,a=l.column,c=l.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var d=0,p=u.length;d<p;d++)u.charCodeAt(d)===QRe?(r.line++,r.column=0,d+1===p?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(u,l){n.setSourceContent(u,l)}),{code:r.code,map:n}};iZ.SourceNode=Na});var sZ=k(q2=>{q2.SourceMapGenerator=xM().SourceMapGenerator;q2.SourceMapConsumer=nZ().SourceMapConsumer;q2.SourceNode=oZ().SourceNode});var cZ=k((got,aZ)=>{var XRe=Object.prototype.toString,IM=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function JRe(t){return XRe.call(t).slice(8,-1)==="ArrayBuffer"}function ZRe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return IM?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function eAe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return IM?Buffer.from(t,e):new Buffer(t,e)}function tAe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return JRe(t)?ZRe(t,e,r):typeof t=="string"?eAe(t,e):IM?Buffer.from(t):new Buffer(t)}aZ.exports=tAe});var gZ=k((Yg,PM)=>{var rAe=sZ().SourceMapConsumer,wM=require("path"),el;try{el=require("fs"),(!el.existsSync||!el.readFileSync)&&(el=null)}catch{}var nAe=cZ();function uZ(t,e){return t.require(e)}var lZ=!1,dZ=!1,RM=!1,_S="auto",Wg={},xS={},iAe=/^data:application\/json[^,]+base64,/,Pf=[],kf=[];function kM(){return _S==="browser"?!0:_S==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function oAe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function sAe(){return typeof process=="object"&&process!==null?process.version:""}function aAe(){if(typeof process=="object"&&process!==null)return process.stderr}function cAe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function H2(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var DM=H2(Pf);Pf.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in Wg)return Wg[t];var e="";try{if(el)el.existsSync(t)&&(e=el.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return Wg[t]=e});function AM(t,e){if(!t)return e;var r=wM.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+wM.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+wM.resolve(r.slice(i.length),e)}function uAe(t){var e;if(kM())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=DM(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var NM=H2(kf);kf.push(function(t){var e=uAe(t);if(!e)return null;var r;if(iAe.test(e)){var n=e.slice(e.indexOf(",")+1);r=nAe(n,"base64").toString(),e=t}else e=AM(t,e),r=DM(e);return r?{url:e,map:r}:null});function LM(t){var e=xS[t.source];if(!e){var r=NM(t.source);r?(e=xS[t.source]={url:r.url,map:new rAe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=AM(e.url,i);Wg[a]=s}})):e=xS[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=AM(e.url,n.source),n}return t}function fZ(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=LM({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+fZ(e[2])+")":t}function lAe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),c=!(this.isToplevel()||a);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var l=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,l&&o.indexOf("."+l)!=o.length-l.length-1&&(i+=" [as "+l+"]")):i+=u+"."+(l||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function pZ(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=lAe,e}function mZ(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(sAe())?0:62;n===1&&i>s&&!kM()&&!t.isEval()&&(i-=s);var a=LM({source:r,line:n,column:i});e.curPosition=a,t=pZ(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=fZ(u),t=pZ(t),t.getEvalOrigin=function(){return u}),t}function dAe(t,e){RM&&(Wg={},xS={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+mZ(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function hZ(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=Wg[r];if(!o&&el&&el.existsSync(r))try{o=el.readFileSync(r,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function pAe(t){var e=hZ(t),r=aAe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),cAe(1)}function fAe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return pAe(arguments[1])}return t.apply(this,arguments)}}var mAe=Pf.slice(0),hAe=kf.slice(0);Yg.wrapCallSite=mZ;Yg.getErrorSource=hZ;Yg.mapSourcePosition=LM;Yg.retrieveSourceMap=NM;Yg.install=function(t){if(t=t||{},t.environment&&(_S=t.environment,["node","browser","auto"].indexOf(_S)===-1))throw new Error("environment "+_S+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Pf.length=0),Pf.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(kf.length=0),kf.unshift(t.retrieveSourceMap)),t.hookRequire&&!kM()){var e=uZ(PM,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,s){return Wg[s]=o,xS[s]=void 0,r.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(RM||(RM="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),lZ||(lZ=!0,Error.prepareStackTrace=dAe),!dZ){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=uZ(PM,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&oAe()&&(dZ=!0,fAe())}};Yg.resetRetrieveHandlers=function(){Pf.length=0,kf.length=0,Pf=mAe.slice(0),kf=hAe.slice(0),NM=H2(kf),DM=H2(Pf)}});var hee=k((kat,CPe)=>{CPe.exports={name:"copilot-chat",displayName:"GitHub Copilot Chat",description:"AI chat features powered by Copilot",version:"0.14.1",build:"1",internalAIKey:"1058ec22-3c95-4951-8443-f26c1f325911",ariaKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",buildType:"prod",publisher:"GitHub",homepage:"https://github.com/features/copilot",license:"SEE LICENSE IN LICENSE.txt",repository:{type:"git",url:"https://github.com/microsoft/vscode-copilot-release"},bugs:{url:"https://aka.ms/microsoft/vscode-copilot-release"},qna:"https://github.com/github-community/community/discussions/categories/copilot",icon:"assets/Copilot-App-Icon.png",pricing:"Trial",engines:{vscode:"^1.88.0-20240320",npm:">=9.0.0",node:">=18.0.0"},categories:["Programming Languages","Machine Learning","Education","Snippets"],keywords:["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],badges:[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup",description:"%github.copilot.badge.signUp%"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"%github.copilot.badge.star%"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"%github.copilot.badge.youtube%"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"%github.copilot.badge.twitter%"}],activationEvents:["onStartupFinished","onLanguageModelAccess:copilot-gpt-3.5-turbo","onLanguageModelAccess:copilot-gpt-4"],main:"./dist/extension",l10n:"./l10n",enabledApiProposals:["extensionsAny","newSymbolNamesProvider","interactive","chatProvider","codeActionAI","findTextInFiles","findFiles2","textSearchProvider","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","mappedEditsProvider","aiRelatedInformation","chatParticipant","chatParticipantAdditions","defaultChatParticipant","chatVariableResolver","contribSourceControlInputBoxMenu","authLearnMore","testObserver","aiTextSearchProvider"],contributes:{chatParticipants:[{id:"github.copilot.default",name:"copilot",description:"%copilot.description%",isDefault:!0},{id:"github.copilot.workspace",name:"workspace",description:"%copilot.workspace.description%",commands:[{name:"explain",description:"%copilot.workspace.explain.description%"},{name:"tests",description:"%copilot.workspace.tests.description%"},{name:"fix",description:"%copilot.workspace.fix.description%",sampleRequest:"%copilot.workspace.fix.sampleRequest%"},{name:"new",description:"%copilot.workspace.new.description%",sampleRequest:"%copilot.workspace.new.sampleRequest%",isSticky:!0},{name:"newNotebook",description:"%copilot.workspace.newNotebook.description%",sampleRequest:"%copilot.workspace.newNotebook.sampleRequest"},{name:"fixTestFailure",description:"%copilot.workspace.fixTestFailure.description%",when:"github.copilot.chat.fixTestFailures.enabled"},{name:"semanticSearch",description:"%copilot.workspace.semanticSearch.description%",sampleRequest:"%copilot.workspace.semanticSearch.sampleRequest%",when:"config.github.copilot.semanticSearch.enabled"}]},{id:"github.copilot.vscode",name:"vscode",description:"%copilot.vscode.description%",commands:[{name:"search",description:"%copilot.vscode.search.description%",sampleRequest:"%copilot.vscode.search.sampleRequest%"},{name:"api",description:"%copilot.vscode.api.description%",sampleRequest:"%copilot.vscode.api.sampleRequest%"}]},{id:"github.copilot.terminal",name:"terminal",description:"%copilot.terminal.description%",locations:["panel","terminal"],commands:[{name:"explain",description:"%copilot.terminal.explain.description%",sampleRequest:"%copilot.terminal.explain.sampleRequest%"}]}],interactiveSession:[{label:"GitHub Copilot",id:"copilot",icon:"",when:"!github.copilot.interactiveSession.disabled"}],viewsWelcome:[{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.signIn%",when:"!github.copilot.activated && !github.copilot.offline && !github.copilot.interactiveSession.individual.disabled && !github.copilot.interactiveSession.individual.expired && !github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual%",when:"github.copilot.interactiveSession.individual.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual.expired%",when:"github.copilot.interactiveSession.individual.expired"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.enterprise%",when:"github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.offline%",when:"github.copilot.offline"}],commands:[{command:"github.copilotChat.signIn",title:"%github.copilot.command.signIn%",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.explain",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.explain.palette",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generate",title:"%github.copilot.command.generateThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateDocs",title:"%github.copilot.command.generateDocs%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateTests",title:"%github.copilot.command.generateTests%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.fix",title:"%github.copilot.command.fixThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveSession.feedback",title:"%github.copilot.command.sendChatFeedback%",enablement:"github.copilot.activated && !github.copilot.interactiveSession.disabled",icon:"$(feedback)",category:"GitHub Copilot"},{command:"github.copilot.debug.workbenchState",title:"%github.copilot.command.logWorkbenchState%",category:"Developer"},{command:"github.copilot.ghpr.applySuggestion",title:"%github.copilot.command.applySuggestionWithCopilot%",icon:"$(sparkle)",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelection",title:"%github.copilot.command.explainTerminalSelection%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",title:"%github.copilot.command.explainTerminalSelectionContextMenu%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalLastCommand",title:"%github.copilot.command.explainTerminalLastCommand%",category:"GitHub Copilot"},{command:"github.copilot.terminal.suggestCommand",title:"%github.copilot.command.suggestCommand%",category:"GitHub Copilot"},{command:"github.copilot.git.generateCommitMessage",title:"%github.copilot.git.generateCommitMessage%",icon:"$(sparkle)",enablement:"!github.copilot.interactiveSession.disabled",category:"GitHub Copilot"},{command:"github.copilot.devcontainer.generateDevContainerConfig",title:"%github.copilot.devcontainer.generateDevContainerConfig%",category:"GitHub Copilot"},{command:"github.copilot.debug.contentExclusions",title:"%github.copilot.command.contentExclusions%",category:"GitHub Copilot",enablement:"github.copilot.copilotIgnoreEnabled"},{command:"github.copilot.tests.fixTestFailure",icon:"$(sparkle)",title:"%github.copilot.command.fixTestFailure%",category:"GitHub Copilot"}],configuration:{title:"Copilot",properties:{"github.copilot.editor.enableCodeActions":{type:"boolean",default:!0,description:"%github.copilot.config.enableCodeActions%"},"github.copilot.chat.localeOverride":{type:"string",enum:["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],enumDescriptions:["Use VS Code's configured display language","English","fran\xE7ais","italiano","Deutsch","espa\xF1ol","\u0440\u0443\u0441\u0441\u043A\u0438\u0439","\u4E2D\u6587(\u7B80\u4F53)","\u4E2D\u6587(\u7E41\u9AD4)","\u65E5\u672C\u8A9E","\uD55C\uAD6D\uC5B4","\u010De\u0161tina","portugu\xEAs","T\xFCrk\xE7e","polski"],default:"auto",markdownDescription:"%github.copilot.config.localeOverride%"},"github.copilot.chat.welcomeMessage":{type:"string",default:"first",markdownDescription:"%github.copilot.config.welcomeMessage%",markdownEnumDescriptions:["%github.copilot.config.welcomeMessage.first%","%github.copilot.config.welcomeMessage.always%","%github.copilot.config.welcomeMessage.never%"],enum:["first","always","never"]},"github.copilot.chat.terminalChatLocation":{type:"string",default:"chatView",markdownDescription:"%github.copilot.config.terminalChatLocation%",markdownEnumDescriptions:["%github.copilot.config.terminalChatLocation.chatView%","%github.copilot.config.terminalChatLocation.quickChat%"],enum:["chatView","quickChat"]},"github.copilot.chat.scopeSelection":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.scopeSelection%",tags:["experimental"]},"github.copilot.chat.useProjectTemplates":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.useProjectTemplates%"},"github.copilot.chat.fixTestFailures":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.fixTestFailures%",scope:"application",tags:["experimental"]}}},configurationDefaults:{"terminal.integrated.commandsToSkipShell":["github.copilot.terminal.suggestCommand"]},keybindings:[{command:"github.copilot.terminal.suggestCommand",key:"ctrl+i",mac:"cmd+i",when:"terminalFocus"}],submenus:[{id:"copilot",label:"%github.copilot.submenu.copilot.label%"}],menus:{"editor/context":[{submenu:"copilot",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"1_copilot@0"}],copilot:[{command:"inlineChat.start",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilot@1"},{command:"github.copilot.interactiveEditor.explain",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@1"},{command:"github.copilot.interactiveEditor.fix",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@2"},{command:"github.copilot.interactiveEditor.generateDocs",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@3"},{command:"github.copilot.interactiveEditor.generateTests",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@4"}],"terminal/context":[{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",group:"1_copilot@0"}],commandPalette:[{command:"github.copilot.interactiveSession.feedback",when:"github.copilot.activated && !github.copilot.interactiveSession.disabled"},{command:"github.copilot.debug.workbenchState",when:"true"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",when:"false"},{command:"github.copilot.git.generateCommitMessage",when:"false"},{command:"github.copilot.interactiveEditor.explain",when:"false"},{command:"github.copilot.devcontainer.generateDevContainerConfig",when:"false"},{command:"github.copilot.tests.fixTestFailure",when:"false"}],"view/title":[{command:"github.copilot.interactiveSession.feedback",when:"view == workbench.panel.chat.view.copilot"},{command:"github.copilot.debug.contentExclusions",when:"view == workbench.panel.chat.view.copilot && github.copilot.copilotIgnoreEnabled"}],"comments/comment/title":[{command:"github.copilot.ghpr.applySuggestion",title:"Apply Suggestion with Copilot",group:"inline@0",when:"commentController =~ /^github-review/ && !(comment =~ /hasSuggestion/)"}],"scm/inputBox":[{command:"github.copilot.git.generateCommitMessage",when:"scmProvider == git"}],"testing/message/context":[{command:"github.copilot.tests.fixTestFailure",when:"testing.testItemHasUri && github.copilot.chat.fixTestFailures.enabled",group:"inline@1"}]},icons:{"copilot-logo":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0041"}},"copilot-warning":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0042"}},"copilot-notconnected":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0043"}}},iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],terminalQuickFixes:[{id:"copilot-chat.fixWithCopilot",commandLineMatcher:".+",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0},kind:"explain"},{id:"copilot-chat.generateCommitMessage",commandLineMatcher:"git add .+",commandExitResult:"success",kind:"explain",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0}}],languages:[{id:"ignore",filenamePatterns:[".copilotignore"]}]},extensionPack:["GitHub.copilot"],scripts:{postinstall:"tsx ./script/postinstall.ts",prepare:"tsx script/setup/prepare.ts","husky:install":"husky install","vscode:prepublish":"npm run build","vscode-dts:dev":"npx vscode-dts dev && mv vscode.proposed.*.ts src/extension",build:"tsx .esbuild.ts",compile:"tsx .esbuild.ts --dev",watch:"npm-run-all -p watch:*","watch:esbuild":"tsx .esbuild.ts --watch --dev","watch:tsc-extension":"tsc --noEmit --watch --project tsconfig.json","watch:tsc-simulation-workbench":"tsc --noEmit --watch --project test/simulation/workbench/tsconfig.json",typecheck:"tsc --noEmit -project tsconfig.json && tsc --noEmit --project test/simulation/workbench/tsconfig.json",lint:"eslint src test --max-warnings=0 --ext ts --ext tsx","lint-staged":"eslint --max-warnings=0 --ext ts --ext tsx",tsfmt:"npx tsfmt -r --verify",test:"npm-run-all test:*","test:extension":"vscode-test","test:unit":"mocha -u tdd dist/test-unit.js --require source-map-support/register --exit --timeout=5000","test:unit_jest":"jest",get_token:"tsx script/setup/getToken.mts","patch-release":"tsx script/build/applyPatchForRelease.ts","patch-prerelease":"tsx script/build/applyPatchForRelease.ts -- --prerelease",prettier:"prettier --list-different --write --cache .",simulate:"node dist/simulationMain.js","simulate-ci":"node dist/simulationMain.js --ci --require-cache","simulate-baseline":"node dist/simulationMain.js --update-baseline",setup:"python script/setup/setup.py && npm run get_token","setup:dotnet":"run-script-os","setup:dotnet:darwin:linux":"curl -O https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.sh && chmod u+x dotnet-install.sh && ./dotnet-install.sh --version latest --quality GA --channel STS && rm dotnet-install.sh","setup:dotnet:win32":"Invoke-WebRequest -Uri https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.ps1 && chmod u+x dotnet-install.ps1 && ./dotnet-install.ps1 --version latest --quality GA --channel STS && rm dotnet-install.ps1",aml:"python test/aml/run.py",package:"vsce package"},devDependencies:{"@fluentui/react-components":"^9.44.4","@fluentui/react-icons":"^2.0.224","@jest/globals":"^29.7.0","@nteract/messaging":"^7.0.20","@parcel/watcher":"^2.4.1","@types/eslint":"8.44.8","@types/kerberos":"^1.1.5","@types/markdown-it":"^13.0.7","@types/minimist":"^1.2.5","@types/mocha":"^10.0.6","@types/node":"^20.10.3","@types/picomatch":"^2.3.3","@types/react":"17.0.44","@types/react-dom":"^18.2.17","@types/sinon":"^17.0.2","@types/source-map-support":"^0.5.10","@types/tar":"^6.1.10","@types/vscode":"^1.85.0","@typescript-eslint/eslint-plugin":"^6.13.2","@typescript-eslint/parser":"^6.13.2","@typescript-eslint/typescript-estree":"^6.13.2","@vscode/dts":"^0.4.0","@vscode/test-cli":"^0.0.4","@vscode/test-electron":"^2.3.9","@vscode/vsce":"2.22.0","@vscode/zeromq":"0.2.0","csv-parse":"^5.5.2",dotenv:"^16.3.1",electron:"^27.1.3",esbuild:"^0.19.8",eslint:"^8.55.0","eslint-import-resolver-typescript":"^3.6.1","eslint-plugin-header":"^3.1.1","eslint-plugin-import":"^2.29.0","eslint-plugin-jsdoc":"^46.9.0","eslint-plugin-local":"^1.0.0","eslint-plugin-no-only-tests":"^3.1.0",glob:"^10.3.10",husky:"^8.0.3",jest:"^29.7.0","lint-staged":"^15.2.0",minimist:"^1.2.8",mobx:"^6.12.0","mobx-react-lite":"^4.0.5",mocha:"^10.2.0","monaco-editor":"0.44.0","npm-run-all":"^4.1.5",open:"^10.0.4",outdent:"^0.8.0",picomatch:"^3.0.1",prettier:"^2.8.7",react:"^17.0.2","react-dom":"17.0.2","run-script-os":"^1.1.6",sinon:"^17.0.1",tar:"^6.2.0","tree-sitter-c-sharp":"^0.20.0","tree-sitter-cli":"^0.20.8","tree-sitter-cpp":"^0.20.3","tree-sitter-go":"^0.20.0","tree-sitter-java":"^0.20.2","tree-sitter-javascript":"^0.20.1","tree-sitter-python":"^0.20.4","tree-sitter-ruby":"^0.19.0","tree-sitter-rust":"^0.20.4","tree-sitter-typescript":"^0.20.3","ts-dedent":"^2.2.0","ts-jest":"^29.1.1","ts-node":"^10.9.1",tsx:"^4.6.2",typescript:"^5.3.2","typescript-formatter":"7.2.2",zeromq:"github:rebornix/zeromq.js#a19e8e373b3abc677f91b936d3f00d49b1b61792",zlib:"^1.0.5"},dependencies:{"@adobe/helix-fetch":"github:devm33/helix-fetch#eaa2f1344d93625e1bddb83d6846be5eea007e94","@humanwhocodes/gitignore-to-minimatch":"1.0.2","@microsoft/tiktokenizer":"^1.0.3","@roamhq/mac-ca":"^1.0.7","@vscode/extension-telemetry":"^0.9.4","@vscode/l10n":"^0.0.17",applicationinsights:"^2.9.1",ignore:"^5.3.0",isbinaryfile:"^5.0.0","jsonc-parser":"^3.2.0","markdown-it":"^14.0.0",minimatch:"^9.0.3","source-map-support":"^0.5.21","vscode-tas-client":"^0.1.84","web-tree-sitter":"^0.20.8"},"lint-staged":{"!({.esbuild.ts,test/simulation/fixtures/**,.test-scenarios/**,.vscode/extensions/**,**/vscode.proposed.*})*{.ts,.js,.tsx}":["npm run tsfmt --","npm run lint-staged --"]},isPreRelease:!1}});var ite=k((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),readBinary=t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},readAsync=(t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=t=>document.title=t);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var s=t[e++];if(128&s){var a=63&t[e++];if((224&s)!=192){var c=63&t[e++];if((s=(240&s)==224?(15&s)<<12|a<<6|c:(7&s)<<18|a<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),a<=127){if(r>=o)break;e[r++]=a}else if(a<=2047){if(r+1>=o)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=o)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}return e[r]=0,r-i}function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}function isFileURI(t){return t.startsWith("file://")}function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var s=i.exports;s=relocateExports(s,1024);var a=getDylinkMetadata(o);a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(s,"main"),Module.asm=s,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function r(i){e(i.instance,i.module)}function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r}};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}function getDylinkMetadata(t){var e=0,r=0;function n(){for(var v=0,b=1;;){var y=t[e++];if(v+=(127&y)*b,b*=128,!(128&y))break}return v}function i(){var v=n();return UTF8ArrayToString(t,(e+=v)-v,v)}function o(v,b){if(v)throw new Error(b)}var s="dylink.0";if(t instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(t,s);a.length===0&&(s="dylink",a=WebAssembly.Module.customSections(t,s)),o(a.length===0,"need dylink section"),r=(t=new Uint8Array(a[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=n();r=e+c,s=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(s=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var l=n(),d=0;d<l;++d){var p=i();u.neededDynlibs.push(p)}}else for(o(s!=="dylink.0");e<r;){var f=t[e++],m=n();if(f===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(f===2)for(l=n(),d=0;d<l;++d)p=i(),u.neededDynlibs.push(p);else if(f===3)for(var h=n();h--;){var g=i();256&n()&&u.tlsExports.add(g)}else if(f===4)for(h=n();h--;)i(),g=i(),(3&n())==1&&u.weakImports.add(g);else e+=m}return u}function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}function alignMemory(t,e){return Math.ceil(t/e)*e}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(a){if(e.fs&&e.fs.findObject(a)){var c=e.fs.readFile(a,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(a=locateFile(a),e.loadAsync)return new Promise(function(u,l){readAsync(a,d=>u(new Uint8Array(d)),l)});if(!readBinary)throw new Error(a+": file not found, and synchronous loading of external files is not available");return readBinary(a)}function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var a=preloadedWasm[t];return e.loadAsync?Promise.resolve(a):a}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,r)}):loadWebAssemblyModule(i(t),e,r)}function s(a){n.global&&mergeLibSymbols(a,t),n.module=a}return n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(a){return s(a),!0}):(s(o()),!0)}function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((s=65536)-o%s)%s)))return!0}var o,s;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},doStat:function(t,e,r){try{var n=t(e)}catch(a){if(a&&a.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(a.node)))return-54;throw a}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),s=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=s%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(t){return UTF8ToString(t)},getStreamFromFD:function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e}};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var s=SYSCALLS.getStreamFromFD(t);return FS.llseek(s,o,n),tempI64=[s.position>>>0,(tempDouble=s.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],s.getdents&&o===0&&n===0&&(s.getdents=null),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var s=HEAPU32[e>>2],a=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,s,a,n);if(c<0)return-1;i+=c,n!==void 0&&(n+=c)}return i}function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var s=t.charCodeAt(o);HEAP16[e>>1]=s,e+=2}return HEAP16[e>>1]=0,e-n}function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(s=>{HEAP32[i++]=allocateUTF8OnStack(s)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(s){return handleException(s)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=(c,u,l)=>e.slice(c,l);else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,n.includedRanges[u]),c+=SIZE_OF_RANGE}let s=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!s)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let a=new Tree(INTERNAL,s,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,a}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let s=0;s<r;s++)i[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let l=0,d=o.length;l<d;l++)e.includes(o[l])&&i.push(l);let s=C._malloc(SIZE_OF_INT*i.length);for(let l=0,d=i.length;l<d;l++)setValue(s+l*SIZE_OF_INT,i[l],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],s,i.length,r.row,r.column,n.row,n.column);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(a);if(a>0){let l=c;for(let d=0;d<a;d++)u[d]=unmarshalNode(this.tree,l),l+=SIZE_OF_NODE}return C._free(c),C._free(s),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,v=e.substr(g,100).split(`
`)[0],b,y=v.match(QUERY_WORD_REGEX)[0];switch(h){case 2:b=new RangeError(`Bad node name '${y}'`);break;case 3:b=new RangeError(`Bad field name '${y}'`);break;case 4:b=new RangeError(`Bad capture name @${y}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${g}: '${v}'...`),y="";break;default:b=new SyntaxError(`Bad syntax at offset ${g}: '${v}'...`),y=""}throw b.index=g,b.length=y.length,C._free(n),b}let o=C._ts_query_string_count(i),s=C._ts_query_capture_count(i),a=C._ts_query_pattern_count(i),c=new Array(s),u=new Array(o);for(let h=0;h<s;h++){let g=C._ts_query_capture_name_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");c[h]=UTF8ToString(g,v)}for(let h=0;h<o;h++){let g=C._ts_query_string_value_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");u[h]=UTF8ToString(g,v)}let l=new Array(a),d=new Array(a),p=new Array(a),f=new Array(a),m=new Array(a);for(let h=0;h<a;h++){let g=C._ts_query_predicates_for_pattern(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");f[h]=[],m[h]=[];let b=[],y=g;for(let E=0;E<v;E++){let x=getValue(y,"i32");y+=SIZE_OF_INT;let R=getValue(y,"i32");if(y+=SIZE_OF_INT,x===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:c[R]});else if(x===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[R]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let L=b[0].value,O=!0;switch(L){case"not-eq?":O=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let J=b[1].name,D=b[2].name;m[h].push(function(S){let P,F;for(let M of S)M.name===J&&(P=M.node),M.name===D&&(F=M.node);return P===void 0||F===void 0||P.text===F.text===O})}else{let J=b[1].name,D=b[2].value;m[h].push(function(S){for(let P of S)if(P.name===J)return P.node.text===D===O;return!0})}break;case"not-match?":O=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let z=b[1].name,N=new RegExp(b[2].value);m[h].push(function(J){for(let D of J)if(D.name===z)return N.test(D.node.text)===O;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(J=>J.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');l[h]||(l[h]={}),l[h][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${L}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(J=>J.type!=="string"))throw new Error(`Arguments to \`#${L}\` predicate must be a strings.".`);let ce=L==="is?"?d:p;ce[h]||(ce[h]={}),ce[h][b[1].value]=b[2]?b[2].value:null;break;default:f[h].push({operator:L,operands:b.slice(1)})}b.length=0}}Object.freeze(l[h]),Object.freeze(d[h]),Object.freeze(p[h])}return C._free(n),new Query(INTERNAL,i,c,m,f,Object.freeze(l),Object.freeze(d),Object.freeze(p))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let a=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${a}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),s=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let a=i[s]();return new Language(INTERNAL,a)})}}class Query{constructor(e,r,n,i,o,s,a,c){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=s,this.assertedProperties=a,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(s);this.exceededMatchLimit=!!c;let l=0,d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=new Array(m);if(d=unmarshalCaptures(this,e.tree,d,h),this.textPredicates[f].every(g=>g(h))){u[l++]={pattern:f,captures:h};let g=this.setProperties[f];g&&(u[p].setProperties=g);let v=this.assertedProperties[f];v&&(u[p].assertedProperties=v);let b=this.refutedProperties[f];b&&(u[p].refutedProperties=b)}}return u.length=l,C._free(a),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let l=[],d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=getValue(d,"i32");if(d+=SIZE_OF_INT,l.length=m,d=unmarshalCaptures(this,e.tree,d,l),this.textPredicates[f].every(g=>g(l))){let g=l[h],v=this.setProperties[f];v&&(g.setProperties=v);let b=this.assertedProperties[f];b&&(g.assertedProperties=b);let y=this.refutedProperties[f];y&&(g.refutedProperties=y),u.push(g)}}return C._free(a),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let s=getValue(r,"i32"),a=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[s],node:a}}return r}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,t);return a.id=r,a.startIndex=n,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var K9=k(Kt=>{"use strict";var W9=Kt&&Kt.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Y9=Kt&&Kt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getShallowFileSize=Kt.getShallowDirectorySizeSync=Kt.getShallowDirectorySize=Kt.confirmDirExists=Kt.unlinkAsync=Kt.readdirAsync=Kt.readFileAsync=Kt.writeFileAsync=Kt.appendFileAsync=Kt.accessAsync=Kt.mkdirAsync=Kt.lstatAsync=Kt.statAsync=void 0;var hu=require("fs"),Nte=require("path"),Zd=require("util");Kt.statAsync=Zd.promisify(hu.stat);Kt.lstatAsync=Zd.promisify(hu.lstat);Kt.mkdirAsync=Zd.promisify(hu.mkdir);Kt.accessAsync=Zd.promisify(hu.access);Kt.appendFileAsync=Zd.promisify(hu.appendFile);Kt.writeFileAsync=Zd.promisify(hu.writeFile);Kt.readFileAsync=Zd.promisify(hu.readFile);Kt.readdirAsync=Zd.promisify(hu.readdir);Kt.unlinkAsync=Zd.promisify(hu.unlink);var Bke=function(t){return W9(void 0,void 0,void 0,function(){var e,r,n;return Y9(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Kt.lstatAsync(t)];case 1:if(e=i.sent(),!e.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(r=i.sent(),!(r&&r.code==="ENOENT"))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,Kt.mkdirAsync(t)];case 4:return i.sent(),[3,6];case 5:if(n=i.sent(),n&&n.code!=="EEXIST")throw n;return[3,6];case 6:return[3,7];case 7:return[2]}})})};Kt.confirmDirExists=Bke;var qke=function(t){return W9(void 0,void 0,void 0,function(){var e,r,n,i,o,s;return Y9(this,function(a){switch(a.label){case 0:return[4,Kt.readdirAsync(t)];case 1:e=a.sent(),r=0,n=0,i=e,a.label=2;case 2:return n<i.length?(o=i[n],[4,Kt.statAsync(Nte.join(t,o))]):[3,5];case 3:s=a.sent(),s.isFile()&&(r+=s.size),a.label=4;case 4:return n++,[3,2];case 5:return[2,r]}})})};Kt.getShallowDirectorySize=qke;var Hke=function(t){for(var e=hu.readdirSync(t),r=0,n=0;n<e.length;n++)r+=hu.statSync(Nte.join(t,e[n])).size;return r};Kt.getShallowDirectorySizeSync=Hke;var jke=function(t){return W9(void 0,void 0,void 0,function(){var e;return Y9(this,function(r){switch(r.label){case 0:return[4,Kt.statAsync(t)];case 1:return e=r.sent(),e.isFile()?[2,e.size]:[2]}})})};Kt.getShallowFileSize=jke});var Mte=k((s0,Ote)=>{"use strict";var Q9=s0&&s0.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},X9=s0&&s0.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Lte=s0&&s0.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},Gke=require("fs"),Vke=require("os"),o0=require("path"),dl=K9(),zke=function(){function t(){var e=this;this.TAG="Logger",this._cleanupTimeOut=60*30*1e3,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var r=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;r=="file+console"&&(this._logToFile=!0),r=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var n=process.env.APPLICATIONINSIGHTS_LOGDIR;n?o0.isAbsolute(n)?this._tempDir=n:this._tempDir=o0.join(process.cwd(),n):this._tempDir=o0.join(Vke.tmpdir(),"appInsights-node"),this._fileFullPath=o0.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(t._fileCleanupTimer||(t._fileCleanupTimer=setInterval(function(){e._fileCleanupTask()},this._cleanupTimeOut),t._fileCleanupTimer.unref()))}return t.prototype.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?Lte([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},t.prototype.warning=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?Lte([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._storeToDisk=function(e){return Q9(this,void 0,void 0,function(){var r,n,i,o,s,a;return X9(this,function(c){switch(c.label){case 0:r=e+`\r
`,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,dl.confirmDirExists(this._tempDir)];case 2:return c.sent(),[3,4];case 3:return n=c.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return c.trys.push([4,6,,11]),[4,dl.accessAsync(this._fileFullPath,Gke.constants.F_OK)];case 5:return c.sent(),[3,11];case 6:i=c.sent(),c.label=7;case 7:return c.trys.push([7,9,,10]),[4,dl.appendFileAsync(this._fileFullPath,r)];case 8:return c.sent(),[2];case 9:return o=c.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return c.trys.push([11,17,,18]),[4,dl.getShallowFileSize(this._fileFullPath)];case 12:return s=c.sent(),s>this.maxSizeBytes?[4,this._createBackupFile(r)]:[3,14];case 13:return c.sent(),[3,16];case 14:return[4,dl.appendFileAsync(this._fileFullPath,r)];case 15:c.sent(),c.label=16;case 16:return[3,18];case 17:return a=c.sent(),console.log(this.TAG,"Failed to create backup file: "+(a&&a.message)),[3,18];case 18:return[2]}})})},t.prototype._createBackupFile=function(e){return Q9(this,void 0,void 0,function(){var r,n,i;return X9(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,dl.readFileAsync(this._fileFullPath)];case 1:return r=o.sent(),n=o0.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,dl.writeFileAsync(n,r)];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return dl.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}})})},t.prototype._fileCleanupTask=function(){return Q9(this,void 0,void 0,function(){var e,r,n,i,o,s=this;return X9(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,dl.readdirAsync(this._tempDir)];case 1:e=a.sent(),e=e.filter(function(c){return o0.basename(c).indexOf(s._backUpNameFormat)>-1}),e.sort(function(c,u){var l=new Date(parseInt(c.split(s._backUpNameFormat)[0])),d=new Date(parseInt(u.split(s._backUpNameFormat)[0]));if(l<d)return-1;if(l>=d)return 1}),r=e.length,n=0,a.label=2;case 2:return n<r-this.maxHistory?(i=o0.join(this._tempDir,e[n]),[4,dl.unlinkAsync(i)]):[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=a.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}})})},t._fileCleanupTimer=null,t}();Ote.exports=zke});var gn=k((Cft,Ute)=>{"use strict";var Fte=Mte(),$ke="APPLICATION_INSIGHTS_ENABLE_DEBUG_LOGS",Wke="APPLICATION_INSIGHTS_DISABLE_WARNING_LOGS",Yke=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.enableDebug&&Fte.getInstance().info(this.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.disableWarnings||Fte.getInstance().warning(this.TAG+e,r)},t.enableDebug=!!process.env[$ke],t.disableWarnings=!!process.env[Wke],t.TAG="ApplicationInsights:",t}();Ute.exports=Yke});var NA=k(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});DA.JsonConfig=void 0;var Kke=require("fs"),kA=require("path"),J9=gn(),Qke="APPLICATIONINSIGHTS_CONFIGURATION_FILE",Xke="APPLICATIONINSIGHTS_CONNECTION_STRING",Bte="APPSETTING_",qte="APPINSIGHTS_INSTRUMENTATIONKEY",Hte="APPINSIGHTS_INSTRUMENTATION_KEY",Jke="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",Zke="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",eDe="http_proxy",tDe="https_proxy",rDe="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",nDe="APPLICATION_INSIGHTS_NO_STATSBEAT",iDe="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",oDe="APPLICATION_INSIGHTS_NO_PATCH_MODULES",sDe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",aDe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",cDe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",uDe="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",lDe="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",dDe=function(){function t(){this.connectionString=process.env[Xke],this.instrumentationKey=process.env[qte]||process.env[Bte+qte]||process.env[Hte]||process.env[Bte+Hte],!this.connectionString&&this.instrumentationKey&&J9.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[Zke],this.extendedMetricDisablers=process.env[Jke],this.proxyHttpUrl=process.env[eDe],this.proxyHttpsUrl=process.env[tDe],this.noDiagnosticChannel=!!process.env[rDe],this.disableStatsbeat=!!process.env[nDe],this.noHttpAgentKeepAlive=!!process.env[iDe],this.noPatchModules=process.env[oDe]||"",this.enableWebInstrumentation=!!process.env[sDe]||!!process.env[uDe],this.webInstrumentationSrc=process.env[cDe]||"",this.webInstrumentationConnectionString=process.env[aDe]||process.env[lDe]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._loadJsonFile=function(){var e="",r="{}";if(r)e=r;else{var n="applicationinsights.json",i=kA.join(__dirname,"../../"),o=kA.join(i,n),s=process.env[Qke];s&&(kA.isAbsolute(s)?o=s:o=kA.join(i,s));try{e=Kke.readFileSync(o,"utf8")}catch(c){J9.warn("Failed to read JSON config file: ",c)}}try{var a=JSON.parse(e);a.disableStatsbeat!=null&&(this.disableStatsbeat=a.disableStatsbeat),a.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=a.disableStatsbeat),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=a.noHttpAgentKeepAlive),a.connectionString!=null&&(this.connectionString=a.connectionString),a.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=a.extendedMetricDisablers),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.proxyHttpUrl!=null&&(this.proxyHttpUrl=a.proxyHttpUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.noPatchModules!=null&&(this.noPatchModules=a.noPatchModules),a.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=a.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=a.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=a.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=a.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=a.webInstrumentationConfig),a.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=a.webInstrumentationSrc),a.enableLoggerErrorToTrace!=null&&(this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace),this.endpointUrl=a.endpointUrl,this.maxBatchSize=a.maxBatchSize,this.maxBatchIntervalMs=a.maxBatchIntervalMs,this.disableAppInsights=a.disableAppInsights,this.samplingPercentage=a.samplingPercentage,this.correlationIdRetryIntervalMs=a.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=a.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=a.ignoreLegacyHeaders,this.distributedTracingMode=a.distributedTracingMode,this.enableAutoCollectExternalLoggers=a.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=a.enableAutoCollectConsole,this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=a.enableAutoCollectExceptions,this.enableAutoCollectPerformance=a.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=a.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=a.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=a.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=a.enableAutoCollectRequests,this.enableAutoCollectDependencies=a.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=a.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=a.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=a.enableUseAsyncHooks,this.enableUseDiskRetryCaching=a.enableUseDiskRetryCaching,this.enableResendInterval=a.enableResendInterval,this.enableMaxBytesOnDisk=a.enableMaxBytesOnDisk,this.enableInternalDebugLogging=a.enableInternalDebugLogging,this.enableInternalWarningLogging=a.enableInternalWarningLogging,this.enableSendLiveMetrics=a.enableSendLiveMetrics,this.quickPulseHost=a.quickPulseHost}catch(c){J9.warn("Invalid JSON config file: ",c)}},t}();DA.JsonConfig=dDe});var JS=k((wft,jte)=>{var pDe="2.0.0",fDe=Number.MAX_SAFE_INTEGER||9007199254740991,mDe=16,hDe=250,gDe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];jte.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:mDe,MAX_SAFE_BUILD_LENGTH:hDe,MAX_SAFE_INTEGER:fDe,RELEASE_TYPES:gDe,SEMVER_SPEC_VERSION:pDe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ZS=k((Rft,Gte)=>{var vDe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Gte.exports=vDe});var Ib=k((ep,Vte)=>{var{MAX_SAFE_COMPONENT_LENGTH:Z9,MAX_SAFE_BUILD_LENGTH:yDe,MAX_LENGTH:bDe}=JS(),_De=ZS();ep=Vte.exports={};var xDe=ep.re=[],EDe=ep.safeRe=[],Ze=ep.src=[],et=ep.t={},SDe=0,eF="[a-zA-Z0-9-]",TDe=[["\\s",1],["\\d",bDe],[eF,yDe]],CDe=t=>{for(let[e,r]of TDe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Ut=(t,e,r)=>{let n=CDe(e),i=SDe++;_De(t,i,e),et[t]=i,Ze[i]=e,xDe[i]=new RegExp(e,r?"g":void 0),EDe[i]=new RegExp(n,r?"g":void 0)};Ut("NUMERICIDENTIFIER","0|[1-9]\\d*");Ut("NUMERICIDENTIFIERLOOSE","\\d+");Ut("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${eF}*`);Ut("MAINVERSION",`(${Ze[et.NUMERICIDENTIFIER]})\\.(${Ze[et.NUMERICIDENTIFIER]})\\.(${Ze[et.NUMERICIDENTIFIER]})`);Ut("MAINVERSIONLOOSE",`(${Ze[et.NUMERICIDENTIFIERLOOSE]})\\.(${Ze[et.NUMERICIDENTIFIERLOOSE]})\\.(${Ze[et.NUMERICIDENTIFIERLOOSE]})`);Ut("PRERELEASEIDENTIFIER",`(?:${Ze[et.NUMERICIDENTIFIER]}|${Ze[et.NONNUMERICIDENTIFIER]})`);Ut("PRERELEASEIDENTIFIERLOOSE",`(?:${Ze[et.NUMERICIDENTIFIERLOOSE]}|${Ze[et.NONNUMERICIDENTIFIER]})`);Ut("PRERELEASE",`(?:-(${Ze[et.PRERELEASEIDENTIFIER]}(?:\\.${Ze[et.PRERELEASEIDENTIFIER]})*))`);Ut("PRERELEASELOOSE",`(?:-?(${Ze[et.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ze[et.PRERELEASEIDENTIFIERLOOSE]})*))`);Ut("BUILDIDENTIFIER",`${eF}+`);Ut("BUILD",`(?:\\+(${Ze[et.BUILDIDENTIFIER]}(?:\\.${Ze[et.BUILDIDENTIFIER]})*))`);Ut("FULLPLAIN",`v?${Ze[et.MAINVERSION]}${Ze[et.PRERELEASE]}?${Ze[et.BUILD]}?`);Ut("FULL",`^${Ze[et.FULLPLAIN]}$`);Ut("LOOSEPLAIN",`[v=\\s]*${Ze[et.MAINVERSIONLOOSE]}${Ze[et.PRERELEASELOOSE]}?${Ze[et.BUILD]}?`);Ut("LOOSE",`^${Ze[et.LOOSEPLAIN]}$`);Ut("GTLT","((?:<|>)?=?)");Ut("XRANGEIDENTIFIERLOOSE",`${Ze[et.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ut("XRANGEIDENTIFIER",`${Ze[et.NUMERICIDENTIFIER]}|x|X|\\*`);Ut("XRANGEPLAIN",`[v=\\s]*(${Ze[et.XRANGEIDENTIFIER]})(?:\\.(${Ze[et.XRANGEIDENTIFIER]})(?:\\.(${Ze[et.XRANGEIDENTIFIER]})(?:${Ze[et.PRERELEASE]})?${Ze[et.BUILD]}?)?)?`);Ut("XRANGEPLAINLOOSE",`[v=\\s]*(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:${Ze[et.PRERELEASELOOSE]})?${Ze[et.BUILD]}?)?)?`);Ut("XRANGE",`^${Ze[et.GTLT]}\\s*${Ze[et.XRANGEPLAIN]}$`);Ut("XRANGELOOSE",`^${Ze[et.GTLT]}\\s*${Ze[et.XRANGEPLAINLOOSE]}$`);Ut("COERCE",`(^|[^\\d])(\\d{1,${Z9}})(?:\\.(\\d{1,${Z9}}))?(?:\\.(\\d{1,${Z9}}))?(?:$|[^\\d])`);Ut("COERCERTL",Ze[et.COERCE],!0);Ut("LONETILDE","(?:~>?)");Ut("TILDETRIM",`(\\s*)${Ze[et.LONETILDE]}\\s+`,!0);ep.tildeTrimReplace="$1~";Ut("TILDE",`^${Ze[et.LONETILDE]}${Ze[et.XRANGEPLAIN]}$`);Ut("TILDELOOSE",`^${Ze[et.LONETILDE]}${Ze[et.XRANGEPLAINLOOSE]}$`);Ut("LONECARET","(?:\\^)");Ut("CARETTRIM",`(\\s*)${Ze[et.LONECARET]}\\s+`,!0);ep.caretTrimReplace="$1^";Ut("CARET",`^${Ze[et.LONECARET]}${Ze[et.XRANGEPLAIN]}$`);Ut("CARETLOOSE",`^${Ze[et.LONECARET]}${Ze[et.XRANGEPLAINLOOSE]}$`);Ut("COMPARATORLOOSE",`^${Ze[et.GTLT]}\\s*(${Ze[et.LOOSEPLAIN]})$|^$`);Ut("COMPARATOR",`^${Ze[et.GTLT]}\\s*(${Ze[et.FULLPLAIN]})$|^$`);Ut("COMPARATORTRIM",`(\\s*)${Ze[et.GTLT]}\\s*(${Ze[et.LOOSEPLAIN]}|${Ze[et.XRANGEPLAIN]})`,!0);ep.comparatorTrimReplace="$1$2$3";Ut("HYPHENRANGE",`^\\s*(${Ze[et.XRANGEPLAIN]})\\s+-\\s+(${Ze[et.XRANGEPLAIN]})\\s*$`);Ut("HYPHENRANGELOOSE",`^\\s*(${Ze[et.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ze[et.XRANGEPLAINLOOSE]})\\s*$`);Ut("STAR","(<|>)?=?\\s*\\*");Ut("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ut("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var LA=k((Aft,zte)=>{var IDe=Object.freeze({loose:!0}),wDe=Object.freeze({}),RDe=t=>t?typeof t!="object"?IDe:t:wDe;zte.exports=RDe});var tF=k((Pft,Yte)=>{var $te=/^[0-9]+$/,Wte=(t,e)=>{let r=$te.test(t),n=$te.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},ADe=(t,e)=>Wte(e,t);Yte.exports={compareIdentifiers:Wte,rcompareIdentifiers:ADe}});var os=k((kft,Jte)=>{var OA=ZS(),{MAX_LENGTH:Kte,MAX_SAFE_INTEGER:MA}=JS(),{safeRe:Qte,t:Xte}=Ib(),PDe=LA(),{compareIdentifiers:wb}=tF(),rF=class t{constructor(e,r){if(r=PDe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Kte)throw new TypeError(`version is longer than ${Kte} characters`);OA("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Qte[Xte.LOOSE]:Qte[Xte.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>MA||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MA||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MA||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<MA)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(OA("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),wb(this.major,e.major)||wb(this.minor,e.minor)||wb(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(OA("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return wb(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(OA("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return wb(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),wb(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Jte.exports=rF});var a0=k((Dft,ere)=>{var Zte=os(),kDe=(t,e,r=!1)=>{if(t instanceof Zte)return t;try{return new Zte(t,e)}catch(n){if(!r)return null;throw n}};ere.exports=kDe});var rre=k((Nft,tre)=>{var DDe=a0(),NDe=(t,e)=>{let r=DDe(t,e);return r?r.version:null};tre.exports=NDe});var ire=k((Lft,nre)=>{var LDe=a0(),ODe=(t,e)=>{let r=LDe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};nre.exports=ODe});var are=k((Oft,sre)=>{var ore=os(),MDe=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new ore(t instanceof ore?t.version:t,r).inc(e,n,i).version}catch{return null}};sre.exports=MDe});var lre=k((Mft,ure)=>{var cre=a0(),FDe=(t,e)=>{let r=cre(t,null,!0),n=cre(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,s=o?r:n,a=o?n:r,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};ure.exports=FDe});var pre=k((Fft,dre)=>{var UDe=os(),BDe=(t,e)=>new UDe(t,e).major;dre.exports=BDe});var mre=k((Uft,fre)=>{var qDe=os(),HDe=(t,e)=>new qDe(t,e).minor;fre.exports=HDe});var gre=k((Bft,hre)=>{var jDe=os(),GDe=(t,e)=>new jDe(t,e).patch;hre.exports=GDe});var yre=k((qft,vre)=>{var VDe=a0(),zDe=(t,e)=>{let r=VDe(t,e);return r&&r.prerelease.length?r.prerelease:null};vre.exports=zDe});var lc=k((Hft,_re)=>{var bre=os(),$De=(t,e,r)=>new bre(t,r).compare(new bre(e,r));_re.exports=$De});var Ere=k((jft,xre)=>{var WDe=lc(),YDe=(t,e,r)=>WDe(e,t,r);xre.exports=YDe});var Tre=k((Gft,Sre)=>{var KDe=lc(),QDe=(t,e)=>KDe(t,e,!0);Sre.exports=QDe});var FA=k((Vft,Ire)=>{var Cre=os(),XDe=(t,e,r)=>{let n=new Cre(t,r),i=new Cre(e,r);return n.compare(i)||n.compareBuild(i)};Ire.exports=XDe});var Rre=k((zft,wre)=>{var JDe=FA(),ZDe=(t,e)=>t.sort((r,n)=>JDe(r,n,e));wre.exports=ZDe});var Pre=k(($ft,Are)=>{var eNe=FA(),tNe=(t,e)=>t.sort((r,n)=>eNe(n,r,e));Are.exports=tNe});var eT=k((Wft,kre)=>{var rNe=lc(),nNe=(t,e,r)=>rNe(t,e,r)>0;kre.exports=nNe});var UA=k((Yft,Dre)=>{var iNe=lc(),oNe=(t,e,r)=>iNe(t,e,r)<0;Dre.exports=oNe});var nF=k((Kft,Nre)=>{var sNe=lc(),aNe=(t,e,r)=>sNe(t,e,r)===0;Nre.exports=aNe});var iF=k((Qft,Lre)=>{var cNe=lc(),uNe=(t,e,r)=>cNe(t,e,r)!==0;Lre.exports=uNe});var BA=k((Xft,Ore)=>{var lNe=lc(),dNe=(t,e,r)=>lNe(t,e,r)>=0;Ore.exports=dNe});var qA=k((Jft,Mre)=>{var pNe=lc(),fNe=(t,e,r)=>pNe(t,e,r)<=0;Mre.exports=fNe});var oF=k((Zft,Fre)=>{var mNe=nF(),hNe=iF(),gNe=eT(),vNe=BA(),yNe=UA(),bNe=qA(),_Ne=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return mNe(t,r,n);case"!=":return hNe(t,r,n);case">":return gNe(t,r,n);case">=":return vNe(t,r,n);case"<":return yNe(t,r,n);case"<=":return bNe(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};Fre.exports=_Ne});var Bre=k((emt,Ure)=>{var xNe=os(),ENe=a0(),{safeRe:HA,t:jA}=Ib(),SNe=(t,e)=>{if(t instanceof xNe)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(HA[jA.COERCE]);else{let n;for(;(n=HA[jA.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),HA[jA.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;HA[jA.COERCERTL].lastIndex=-1}return r===null?null:ENe(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};Ure.exports=SNe});var Hre=k((tmt,qre)=>{"use strict";qre.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Gre=k((rmt,jre)=>{"use strict";jre.exports=Er;Er.Node=c0;Er.create=Er;function Er(t){var e=this;if(e instanceof Er||(e=new Er),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Er.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Er.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Er.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Er.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)CNe(this,arguments[t]);return this.length};Er.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)INe(this,arguments[t]);return this.length};Er.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Er.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Er.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Er.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Er.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Er.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Er.prototype.map=function(t,e){e=e||this;for(var r=new Er,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Er.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Er,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Er.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Er.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Er.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Er.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Er.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Er;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Er.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Er;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Er.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=TNe(this,i,r[n]);return o};Er.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function TNe(t,e,r){var n=e===t.head?new c0(r,null,e,t):new c0(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function CNe(t,e){t.tail=new c0(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function INe(t,e){t.head=new c0(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function c0(t,e,r,n){if(!(this instanceof c0))return new c0(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Hre()(Er)}catch{}});var Yre=k((nmt,Wre)=>{"use strict";var wNe=Gre(),u0=Symbol("max"),rp=Symbol("length"),Rb=Symbol("lengthCalculator"),rT=Symbol("allowStale"),l0=Symbol("maxAge"),tp=Symbol("dispose"),Vre=Symbol("noDisposeOnSet"),ao=Symbol("lruList"),gu=Symbol("cache"),$re=Symbol("updateAgeOnGet"),sF=()=>1,cF=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[u0]=e.max||1/0,n=e.length||sF;if(this[Rb]=typeof n!="function"?sF:n,this[rT]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[l0]=e.maxAge||0,this[tp]=e.dispose,this[Vre]=e.noDisposeOnSet||!1,this[$re]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[u0]=e||1/0,tT(this)}get max(){return this[u0]}set allowStale(e){this[rT]=!!e}get allowStale(){return this[rT]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[l0]=e,tT(this)}get maxAge(){return this[l0]}set lengthCalculator(e){typeof e!="function"&&(e=sF),e!==this[Rb]&&(this[Rb]=e,this[rp]=0,this[ao].forEach(r=>{r.length=this[Rb](r.value,r.key),this[rp]+=r.length})),tT(this)}get lengthCalculator(){return this[Rb]}get length(){return this[rp]}get itemCount(){return this[ao].length}rforEach(e,r){r=r||this;for(let n=this[ao].tail;n!==null;){let i=n.prev;zre(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[ao].head;n!==null;){let i=n.next;zre(this,e,n,r),n=i}}keys(){return this[ao].toArray().map(e=>e.key)}values(){return this[ao].toArray().map(e=>e.value)}reset(){this[tp]&&this[ao]&&this[ao].length&&this[ao].forEach(e=>this[tp](e.key,e.value)),this[gu]=new Map,this[ao]=new wNe,this[rp]=0}dump(){return this[ao].map(e=>GA(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[ao]}set(e,r,n){if(n=n||this[l0],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[Rb](r,e);if(this[gu].has(e)){if(o>this[u0])return Ab(this,this[gu].get(e)),!1;let c=this[gu].get(e).value;return this[tp]&&(this[Vre]||this[tp](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[rp]+=o-c.length,c.length=o,this.get(e),tT(this),!0}let s=new uF(e,r,o,i,n);return s.length>this[u0]?(this[tp]&&this[tp](e,r),!1):(this[rp]+=s.length,this[ao].unshift(s),this[gu].set(e,this[ao].head),tT(this),!0)}has(e){if(!this[gu].has(e))return!1;let r=this[gu].get(e).value;return!GA(this,r)}get(e){return aF(this,e,!0)}peek(e){return aF(this,e,!1)}pop(){let e=this[ao].tail;return e?(Ab(this,e),e.value):null}del(e){Ab(this,this[gu].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[gu].forEach((e,r)=>aF(this,r,!1))}},aF=(t,e,r)=>{let n=t[gu].get(e);if(n){let i=n.value;if(GA(t,i)){if(Ab(t,n),!t[rT])return}else r&&(t[$re]&&(n.value.now=Date.now()),t[ao].unshiftNode(n));return i.value}},GA=(t,e)=>{if(!e||!e.maxAge&&!t[l0])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[l0]&&r>t[l0]},tT=t=>{if(t[rp]>t[u0])for(let e=t[ao].tail;t[rp]>t[u0]&&e!==null;){let r=e.prev;Ab(t,e),e=r}},Ab=(t,e)=>{if(e){let r=e.value;t[tp]&&t[tp](r.key,r.value),t[rp]-=r.length,t[gu].delete(r.key),t[ao].removeNode(e)}},uF=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},zre=(t,e,r,n)=>{let i=r.value;GA(t,i)&&(Ab(t,r),t[rT]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};Wre.exports=cF});var dc=k((imt,Jre)=>{var lF=class t{constructor(e,r){if(r=ANe(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof dF)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Qre(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&MNe(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&LNe)|(this.options.loose&&ONe))+":"+e,i=Kre.get(n);if(i)return i;let o=this.options.loose,s=o?ia[Rs.HYPHENRANGELOOSE]:ia[Rs.HYPHENRANGE];e=e.replace(s,$Ne(this.options.includePrerelease)),vn("hyphen replace",e),e=e.replace(ia[Rs.COMPARATORTRIM],kNe),vn("comparator trim",e),e=e.replace(ia[Rs.TILDETRIM],DNe),vn("tilde trim",e),e=e.replace(ia[Rs.CARETTRIM],NNe),vn("caret trim",e);let a=e.split(" ").map(d=>FNe(d,this.options)).join(" ").split(/\s+/).map(d=>zNe(d,this.options));o&&(a=a.filter(d=>(vn("loose invalid filter",d,this.options),!!d.match(ia[Rs.COMPARATORLOOSE])))),vn("range list",a);let c=new Map,u=a.map(d=>new dF(d,this.options));for(let d of u){if(Qre(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return Kre.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>Xre(n,r)&&e.set.some(i=>Xre(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new PNe(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(WNe(this.set[r],e,this.options))return!0;return!1}};Jre.exports=lF;var RNe=Yre(),Kre=new RNe({max:1e3}),ANe=LA(),dF=nT(),vn=ZS(),PNe=os(),{safeRe:ia,t:Rs,comparatorTrimReplace:kNe,tildeTrimReplace:DNe,caretTrimReplace:NNe}=Ib(),{FLAG_INCLUDE_PRERELEASE:LNe,FLAG_LOOSE:ONe}=JS(),Qre=t=>t.value==="<0.0.0-0",MNe=t=>t.value==="",Xre=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},FNe=(t,e)=>(vn("comp",t,e),t=qNe(t,e),vn("caret",t),t=UNe(t,e),vn("tildes",t),t=jNe(t,e),vn("xrange",t),t=VNe(t,e),vn("stars",t),t),As=t=>!t||t.toLowerCase()==="x"||t==="*",UNe=(t,e)=>t.trim().split(/\s+/).map(r=>BNe(r,e)).join(" "),BNe=(t,e)=>{let r=e.loose?ia[Rs.TILDELOOSE]:ia[Rs.TILDE];return t.replace(r,(n,i,o,s,a)=>{vn("tilde",t,n,i,o,s,a);let c;return As(i)?c="":As(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:As(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(vn("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,vn("tilde return",c),c})},qNe=(t,e)=>t.trim().split(/\s+/).map(r=>HNe(r,e)).join(" "),HNe=(t,e)=>{vn("caret",t,e);let r=e.loose?ia[Rs.CARETLOOSE]:ia[Rs.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{vn("caret",t,i,o,s,a,c);let u;return As(o)?u="":As(s)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:As(a)?o==="0"?u=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(vn("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(vn("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),vn("caret return",u),u})},jNe=(t,e)=>(vn("replaceXRanges",t,e),t.split(/\s+/).map(r=>GNe(r,e)).join(" ")),GNe=(t,e)=>{t=t.trim();let r=e.loose?ia[Rs.XRANGELOOSE]:ia[Rs.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{vn("xRange",t,n,i,o,s,a,c);let u=As(o),l=u||As(s),d=l||As(a),p=d;return i==="="&&p&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):l?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),vn("xRange return",n),n})},VNe=(t,e)=>(vn("replaceStars",t,e),t.trim().replace(ia[Rs.STAR],"")),zNe=(t,e)=>(vn("replaceGTE0",t,e),t.trim().replace(ia[e.includePrerelease?Rs.GTE0PRE:Rs.GTE0],"")),$Ne=t=>(e,r,n,i,o,s,a,c,u,l,d,p,f)=>(As(n)?r="":As(i)?r=`>=${n}.0.0${t?"-0":""}`:As(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,As(u)?c="":As(l)?c=`<${+u+1}.0.0-0`:As(d)?c=`<${u}.${+l+1}.0-0`:p?c=`<=${u}.${l}.${d}-${p}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),WNe=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(vn(t[n].semver),t[n].semver!==dF.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var nT=k((omt,ine)=>{var iT=Symbol("SemVer ANY"),mF=class t{static get ANY(){return iT}constructor(e,r){if(r=Zre(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),fF("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===iT?this.value="":this.value=this.operator+this.semver.version,fF("comp",this)}parse(e){let r=this.options.loose?ene[tne.COMPARATORLOOSE]:ene[tne.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new rne(n[2],this.options.loose):this.semver=iT}toString(){return this.value}test(e){if(fF("Comparator.test",e,this.options.loose),this.semver===iT||e===iT)return!0;if(typeof e=="string")try{e=new rne(e,this.options)}catch{return!1}return pF(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new nne(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new nne(this.value,r).test(e.semver):(r=Zre(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||pF(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||pF(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};ine.exports=mF;var Zre=LA(),{safeRe:ene,t:tne}=Ib(),pF=oF(),fF=ZS(),rne=os(),nne=dc()});var oT=k((smt,one)=>{var YNe=dc(),KNe=(t,e,r)=>{try{e=new YNe(e,r)}catch{return!1}return e.test(t)};one.exports=KNe});var ane=k((amt,sne)=>{var QNe=dc(),XNe=(t,e)=>new QNe(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));sne.exports=XNe});var une=k((cmt,cne)=>{var JNe=os(),ZNe=dc(),e4e=(t,e,r)=>{let n=null,i=null,o=null;try{o=new ZNe(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new JNe(n,r))}),n};cne.exports=e4e});var dne=k((umt,lne)=>{var t4e=os(),r4e=dc(),n4e=(t,e,r)=>{let n=null,i=null,o=null;try{o=new r4e(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new t4e(n,r))}),n};lne.exports=n4e});var mne=k((lmt,fne)=>{var hF=os(),i4e=dc(),pne=eT(),o4e=(t,e)=>{t=new i4e(t,e);let r=new hF("0.0.0");if(t.test(r)||(r=new hF("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new hF(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||pne(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||pne(r,o))&&(r=o)}return r&&t.test(r)?r:null};fne.exports=o4e});var gne=k((dmt,hne)=>{var s4e=dc(),a4e=(t,e)=>{try{return new s4e(t,e).range||"*"}catch{return null}};hne.exports=a4e});var VA=k((pmt,_ne)=>{var c4e=os(),bne=nT(),{ANY:u4e}=bne,l4e=dc(),d4e=oT(),vne=eT(),yne=UA(),p4e=qA(),f4e=BA(),m4e=(t,e,r,n)=>{t=new c4e(t,n),e=new l4e(e,n);let i,o,s,a,c;switch(r){case">":i=vne,o=p4e,s=yne,a=">",c=">=";break;case"<":i=yne,o=f4e,s=vne,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(d4e(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,p=null;if(l.forEach(f=>{f.semver===u4e&&(f=new bne(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0};_ne.exports=m4e});var Ene=k((fmt,xne)=>{var h4e=VA(),g4e=(t,e,r)=>h4e(t,e,">",r);xne.exports=g4e});var Tne=k((mmt,Sne)=>{var v4e=VA(),y4e=(t,e,r)=>v4e(t,e,"<",r);Sne.exports=y4e});var wne=k((hmt,Ine)=>{var Cne=dc(),b4e=(t,e,r)=>(t=new Cne(t,r),e=new Cne(e,r),t.intersects(e,r));Ine.exports=b4e});var Ane=k((gmt,Rne)=>{var _4e=oT(),x4e=lc();Rne.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((l,d)=>x4e(l,d,r));for(let l of s)_4e(l,e,r)?(o=l,i||(i=l)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===s[0]?a.push("*"):d?l===s[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var One=k((vmt,Lne)=>{var Pne=dc(),vF=nT(),{ANY:gF}=vF,sT=oT(),yF=lc(),E4e=(t,e,r={})=>{if(t===e)return!0;t=new Pne(t,r),e=new Pne(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=T4e(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},S4e=[new vF(">=0.0.0-0")],kne=[new vF(">=0.0.0")],T4e=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===gF){if(e.length===1&&e[0].semver===gF)return!0;r.includePrerelease?t=S4e:t=kne}if(e.length===1&&e[0].semver===gF){if(r.includePrerelease)return!0;e=kne}let n=new Set,i,o;for(let f of t)f.operator===">"||f.operator===">="?i=Dne(i,f,r):f.operator==="<"||f.operator==="<="?o=Nne(o,f,r):n.add(f.semver);if(n.size>1)return null;let s;if(i&&o){if(s=yF(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of n){if(i&&!sT(f,String(i),r)||o&&!sT(f,String(o),r))return null;for(let m of e)if(!sT(f,String(m),r))return!1;return!0}let a,c,u,l,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",u=u||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=Dne(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!sT(i.semver,String(f),r))return!1}if(o){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(c=Nne(o,f,r),c===f&&c!==o)return!1}else if(o.operator==="<="&&!sT(o.semver,String(f),r))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&l&&!i&&s!==0||p||d)},Dne=(t,e,r)=>{if(!t)return e;let n=yF(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Nne=(t,e,r)=>{if(!t)return e;let n=yF(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};Lne.exports=E4e});var Bne=k((ymt,Une)=>{var bF=Ib(),Mne=JS(),C4e=os(),Fne=tF(),I4e=a0(),w4e=rre(),R4e=ire(),A4e=are(),P4e=lre(),k4e=pre(),D4e=mre(),N4e=gre(),L4e=yre(),O4e=lc(),M4e=Ere(),F4e=Tre(),U4e=FA(),B4e=Rre(),q4e=Pre(),H4e=eT(),j4e=UA(),G4e=nF(),V4e=iF(),z4e=BA(),$4e=qA(),W4e=oF(),Y4e=Bre(),K4e=nT(),Q4e=dc(),X4e=oT(),J4e=ane(),Z4e=une(),eLe=dne(),tLe=mne(),rLe=gne(),nLe=VA(),iLe=Ene(),oLe=Tne(),sLe=wne(),aLe=Ane(),cLe=One();Une.exports={parse:I4e,valid:w4e,clean:R4e,inc:A4e,diff:P4e,major:k4e,minor:D4e,patch:N4e,prerelease:L4e,compare:O4e,rcompare:M4e,compareLoose:F4e,compareBuild:U4e,sort:B4e,rsort:q4e,gt:H4e,lt:j4e,eq:G4e,neq:V4e,gte:z4e,lte:$4e,cmp:W4e,coerce:Y4e,Comparator:K4e,Range:Q4e,satisfies:X4e,toComparators:J4e,maxSatisfying:Z4e,minSatisfying:eLe,minVersion:tLe,validRange:rLe,outside:nLe,gtr:iLe,ltr:oLe,intersects:sLe,simplifyRange:aLe,subset:cLe,SemVer:C4e,re:bF.re,src:bF.src,tokens:bF.t,SEMVER_SPEC_VERSION:Mne.SEMVER_SPEC_VERSION,RELEASE_TYPES:Mne.RELEASE_TYPES,compareIdentifiers:Fne.compareIdentifiers,rcompareIdentifiers:Fne.rcompareIdentifiers}});var _F=k(zA=>{"use strict";Object.defineProperty(zA,"__esModule",{value:!0});zA.makePatchingRequire=void 0;var uLe=require("path"),lLe=Bne(),qne=Jn(),jne=require("module"),dLe=Object.keys(process.binding("natives")),Hne=jne.prototype.require;function pLe(t){var e={};return function(n){var i=Hne.apply(this,arguments);if(t[n]){var o=jne._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(dLe.indexOf(n)<0)try{s=Hne.call(this,uLe.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var c=i,u=0,l=t[n];u<l.length;u++){var d=l[u];if(lLe.satisfies(s,d.versionSpecifier)&&(c=d.patch(c,o),qne.channel)){var p=d.publisherName||n;qne.channel.addPatchedModule(p,s)}}return e[o]=c}return i}}zA.makePatchingRequire=pLe});var Gne=k((_mt,fLe)=>{fLe.exports={name:"diagnostic-channel",version:"1.1.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"eslint ./ --fix",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^7.5.3"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var Jn=k(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.channel=pc.ContextPreservingEventEmitter=pc.trueFilter=pc.makePatchingRequire=void 0;var mLe=_F(),hLe=_F();Object.defineProperty(pc,"makePatchingRequire",{enumerable:!0,get:function(){return hLe.makePatchingRequire}});var gLe=function(t){return!0};pc.trueFilter=gLe;var zne=function(){function t(){this.version=Gne().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n,i){n===void 0&&(n=pc.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n,patchCallback:i});var o=this.checkIfModuleIsAlreadyPatched(e);o&&i&&i(o.name,o.version)},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=pc.trueFilter);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t.prototype.addPatchedModule=function(e,r){for(var n=0,i=this.modulesPatched;n<i.length;n++){var o=i[n];if(o.name===e)return}this.modulesPatched.push({name:e,version:r});var s=this.subscribers[e];s&&s.forEach(function(a){a.patchCallback&&a.patchCallback(e,r)})},t.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var r=0,n=this.modulesPatched;r<n.length;r++){var i=n[r];if(i.name===e)return i}return null},t}();pc.ContextPreservingEventEmitter=zne;global.diagnosticsSource||(global.diagnosticsSource=new zne,Vne=require("module"),Vne.prototype.require=mLe.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var Vne;pc.channel=global.diagnosticsSource});var $ne,Wne=T(()=>{$ne=typeof globalThis=="object"?globalThis:global});var Yne=T(()=>{Wne()});var Kne=T(()=>{Yne()});var np,xF=T(()=>{np="1.6.0"});function vLe(t){var e=new Set([t]),r=new Set,n=t.match(Qne);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(c){return c===t};function o(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var u=c.match(Qne);if(!u)return o(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||i.major!==l.major?o(c):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(c):o(c):i.minor<=l.minor?s(c):o(c)}}var Qne,Xne,Jne=T(()=>{xF();Qne=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;Xne=vLe(np)});function pl(t,e,r,n){var i;n===void 0&&(n=!1);var o=cT[aT]=(i=cT[aT])!==null&&i!==void 0?i:{version:np};if(!n&&o[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(o.version!==np){var s=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+np);return r.error(s.stack||s.message),!1}return o[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+np+"."),!0}function Fa(t){var e,r,n=(e=cT[aT])===null||e===void 0?void 0:e.version;if(!(!n||!Xne(n)))return(r=cT[aT])===null||r===void 0?void 0:r[t]}function fl(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+np+".");var r=cT[aT];r&&delete r[t]}var yLe,aT,cT,d0=T(()=>{Kne();xF();Jne();yLe=np.split(".")[0],aT=Symbol.for("opentelemetry.js.api."+yLe),cT=$ne});function uT(t,e,r){var n=Fa("diag");if(n)return r.unshift(e),n[t].apply(n,_Le([],bLe(r),!1))}var bLe,_Le,Zne,eie=T(()=>{d0();bLe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},_Le=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Zne=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uT("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uT("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uT("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uT("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uT("verbose",this._namespace,e)},t}()});var tn,$A=T(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(tn||(tn={}))});function tie(t,e){t<tn.NONE?t=tn.NONE:t>tn.ALL&&(t=tn.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",tn.ERROR),warn:r("warn",tn.WARN),info:r("info",tn.INFO),debug:r("debug",tn.DEBUG),verbose:r("verbose",tn.VERBOSE)}}var rie=T(()=>{$A()});var xLe,ELe,SLe,ss,p0=T(()=>{eie();rie();$A();d0();xLe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},ELe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},SLe="diag",ss=function(){function t(){function e(i){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=Fa("diag");if(a)return a[i].apply(a,ELe([],xLe(o),!1))}}var r=this,n=function(i,o){var s,a,c;if(o===void 0&&(o={logLevel:tn.INFO}),i===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof o=="number"&&(o={logLevel:o});var l=Fa("diag"),d=tie((a=o.logLevel)!==null&&a!==void 0?a:tn.INFO,i);if(l&&!o.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return pl("diag",d,r,!0)};r.setLogger=n,r.disable=function(){fl(SLe,r)},r.createComponentLogger=function(i){return new Zne(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}()});var TLe,CLe,nie,iie=T(()=>{TLe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},CLe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nie=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=TLe(e,2),n=r[0],i=r[1];return[n,i]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=new t(this._entries);try{for(var s=CLe(n),a=s.next();!a.done;a=s.next()){var c=a.value;o._entries.delete(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}()});var oie,sie=T(()=>{oie=Symbol("BaggageEntryMetadata")});function aie(t){return t===void 0&&(t={}),new nie(new Map(Object.entries(t)))}function WA(t){return typeof t!="string"&&(ILe.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:oie,toString:function(){return t}}}var ILe,EF=T(()=>{p0();iie();sie();ILe=ss.instance()});function ml(t){return Symbol.for(t)}var wLe,YA,lT=T(()=>{wLe=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),YA=new wLe});var SF,cie,uie=T(()=>{SF=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],cie=function(){function t(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var s=console[n];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,i)}}}for(var r=0;r<SF.length;r++)this[SF[r].n]=e(SF[r].c)}return t}()});function lie(){return IF}var Pb,RLe,TF,ALe,PLe,kLe,CF,DLe,NLe,LLe,IF,OLe,MLe,FLe,ULe,BLe,qLe,wF=T(()=>{Pb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RLe=function(){function t(){}return t.prototype.createHistogram=function(e,r){return MLe},t.prototype.createCounter=function(e,r){return OLe},t.prototype.createUpDownCounter=function(e,r){return FLe},t.prototype.createObservableGauge=function(e,r){return BLe},t.prototype.createObservableCounter=function(e,r){return ULe},t.prototype.createObservableUpDownCounter=function(e,r){return qLe},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),TF=function(){function t(){}return t}(),ALe=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(TF),PLe=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(TF),kLe=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(TF),CF=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),DLe=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(CF),NLe=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(CF),LLe=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(CF),IF=new RLe,OLe=new ALe,MLe=new kLe,FLe=new PLe,ULe=new DLe,BLe=new NLe,qLe=new LLe});var KA,die=T(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(KA||(KA={}))});var QA,XA,RF=T(()=>{QA={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},XA={set:function(t,e,r){t!=null&&(t[e]=r)}}});var HLe,jLe,pie,fie=T(()=>{lT();HLe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},jLe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},pie=function(){function t(){}return t.prototype.active=function(){return YA},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,jLe([n],HLe(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}()});var GLe,VLe,AF,zLe,Xf,dT=T(()=>{fie();d0();p0();GLe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},VLe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},AF="context",zLe=new pie,Xf=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return pl(AF,e,ss.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,VLe([e,r,n],GLe(o),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Fa(AF)||zLe},t.prototype.disable=function(){this._getContextManager().disable(),fl(AF,ss.instance())},t}()});var li,PF=T(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(li||(li={}))});var pT,fT,kb,JA=T(()=>{PF();pT="0000000000000000",fT="00000000000000000000000000000000",kb={traceId:fT,spanId:pT,traceFlags:li.NONE}});var Jf,ZA=T(()=>{JA();Jf=function(){function t(e){e===void 0&&(e=kb),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}()});function eP(t){return t.getValue(kF)||void 0}function mie(){return eP(Xf.getInstance().active())}function mT(t,e){return t.setValue(kF,e)}function hie(t){return t.deleteValue(kF)}function gie(t,e){return mT(t,new Jf(e))}function tP(t){var e;return(e=eP(t))===null||e===void 0?void 0:e.spanContext()}var kF,DF=T(()=>{lT();ZA();dT();kF=ml("OpenTelemetry Context Key SPAN")});function f0(t){return $Le.test(t)&&t!==fT}function NF(t){return WLe.test(t)&&t!==pT}function fc(t){return f0(t.traceId)&&NF(t.spanId)}function vie(t){return new Jf(t)}var $Le,WLe,rP=T(()=>{JA();ZA();$Le=/^([0-9a-f]{32})$/i,WLe=/^[0-9a-f]{16}$/i});function YLe(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var LF,nP,OF=T(()=>{dT();DF();ZA();rP();LF=Xf.getInstance(),nP=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=LF.active());var i=!!r?.root;if(i)return new Jf;var o=n&&tP(n);return YLe(o)&&fc(o)?new Jf(o):new Jf},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s??LF.active(),u=this.startSpan(e,o,c),l=mT(c,u);return LF.with(l,a,void 0,u)}},t}()});var KLe,iP,MF=T(()=>{OF();KLe=new nP,iP=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):KLe},t}()});var yie,bie=T(()=>{OF();yie=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new nP},t}()});var QLe,hT,FF=T(()=>{MF();bie();QLe=new yie,hT=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new iP(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:QLe},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}()});var oa,_ie=T(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(oa||(oa={}))});var Db,xie=T(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Db||(Db={}))});var Nb,Eie=T(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Nb||(Nb={}))});function Sie(t){return ZLe.test(t)}function Tie(t){return e3e.test(t)&&!t3e.test(t)}var UF,XLe,JLe,ZLe,e3e,t3e,Cie=T(()=>{UF="[_0-9a-z-*/]",XLe="[a-z]"+UF+"{0,255}",JLe="[a-z0-9]"+UF+"{0,240}@[a-z]"+UF+"{0,13}",ZLe=new RegExp("^(?:"+XLe+"|"+JLe+")$"),e3e=/^[ -~]{0,255}[!-~]$/,t3e=/,|=/});var Iie,r3e,wie,Rie,Aie,Pie=T(()=>{Cie();Iie=32,r3e=512,wie=",",Rie="=",Aie=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+Rie+e.get(n)),r},[]).join(wie)},t.prototype._parse=function(e){e.length>r3e||(this._internalState=e.split(wie).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(Rie);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);Sie(s)&&Tie(a)&&r.set(s,a)}return r},new Map),this._internalState.size>Iie&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Iie))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function kie(t){return new Aie(t)}var Die=T(()=>{Pie()});var Ps,Nie=T(()=>{dT();Ps=Xf.getInstance()});var ot,Lie=T(()=>{p0();ot=ss.instance()});var n3e,Oie,Mie=T(()=>{wF();n3e=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return IF},t}(),Oie=new n3e});var BF,Fie,Uie=T(()=>{Mie();d0();p0();BF="metrics",Fie=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return pl(BF,e,ss.instance())},t.prototype.getMeterProvider=function(){return Fa(BF)||Oie},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){fl(BF,ss.instance())},t}()});var qF,Bie=T(()=>{Uie();qF=Fie.getInstance()});var qie,Hie=T(()=>{qie=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}()});function jF(t){return t.getValue(HF)||void 0}function jie(){return jF(Xf.getInstance().active())}function Gie(t,e){return t.setValue(HF,e)}function Vie(t){return t.deleteValue(HF)}var HF,zie=T(()=>{dT();lT();HF=ml("OpenTelemetry Baggage Key")});var GF,i3e,$ie,Wie=T(()=>{d0();Hie();RF();zie();EF();p0();GF="propagation",i3e=new qie,$ie=function(){function t(){this.createBaggage=aie,this.getBaggage=jF,this.getActiveBaggage=jie,this.setBaggage=Gie,this.deleteBaggage=Vie}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return pl(GF,e,ss.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=XA),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=QA),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){fl(GF,ss.instance())},t.prototype._getGlobalPropagator=function(){return Fa(GF)||i3e},t}()});var ip,Yie=T(()=>{Wie();ip=$ie.getInstance()});var VF,Kie,Qie=T(()=>{d0();FF();rP();DF();p0();VF="trace",Kie=function(){function t(){this._proxyTracerProvider=new hT,this.wrapSpanContext=vie,this.isSpanContextValid=fc,this.deleteSpan=hie,this.getSpan=eP,this.getActiveSpan=mie,this.getSpanContext=tP,this.setSpan=mT,this.setSpanContext=gie}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=pl(VF,this._proxyTracerProvider,ss.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Fa(VF)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){fl(VF,ss.instance()),this._proxyTracerProvider=new hT},t}()});var Wi,Xie=T(()=>{Qie();Wi=Kie.getInstance()});var Lb={};$r(Lb,{DiagConsoleLogger:()=>cie,DiagLogLevel:()=>tn,INVALID_SPANID:()=>pT,INVALID_SPAN_CONTEXT:()=>kb,INVALID_TRACEID:()=>fT,ProxyTracer:()=>iP,ProxyTracerProvider:()=>hT,ROOT_CONTEXT:()=>YA,SamplingDecision:()=>oa,SpanKind:()=>Db,SpanStatusCode:()=>Nb,TraceFlags:()=>li,ValueType:()=>KA,baggageEntryMetadataFromString:()=>WA,context:()=>Ps,createContextKey:()=>ml,createNoopMeter:()=>lie,createTraceState:()=>kie,default:()=>o3e,defaultTextMapGetter:()=>QA,defaultTextMapSetter:()=>XA,diag:()=>ot,isSpanContextValid:()=>fc,isValidSpanId:()=>NF,isValidTraceId:()=>f0,metrics:()=>qF,propagation:()=>ip,trace:()=>Wi});var o3e,tr=T(()=>{EF();lT();uie();$A();wF();die();RF();MF();FF();_ie();xie();Eie();PF();Die();rP();JA();Nie();Lie();Bie();Yie();Xie();o3e={context:Ps,diag:ot,metrics:qF,propagation:ip,trace:Wi}});function gT(t){return t.setValue(zF,!0)}function s3e(t){return t.deleteValue(zF)}function m0(t){return t.getValue(zF)===!0}var zF,vT=T(()=>{tr();zF=ml("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var Jie,oP,Ob,sP,Zie,eoe,toe,$F=T(()=>{Jie="=",oP=";",Ob=",",sP="baggage",Zie=180,eoe=4096,toe=8192});var KF={};$r(KF,{getKeyPairs:()=>YF,parseKeyPairsIntoRecord:()=>c3e,parsePairKeyValue:()=>aP,serializeKeyPairs:()=>WF});function WF(t){return t.reduce(function(e,r){var n=""+e+(e!==""?Ob:"")+r;return n.length>toe?e:n},"")}function YF(t){return t.getAllEntries().map(function(e){var r=a3e(e,2),n=r[0],i=r[1],o=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=oP+i.metadata.toString()),o})}function aP(t){var e=t.split(oP);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(Jie);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),o=decodeURIComponent(r.substring(n+1).trim()),s;return e.length>0&&(s=WA(e.join(oP))),{key:i,value:o,metadata:s}}}}}function c3e(t){return typeof t!="string"||t.length===0?{}:t.split(Ob).map(function(e){return aP(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var a3e,QF=T(()=>{tr();$F();a3e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});var XF,roe=T(()=>{tr();vT();$F();QF();XF=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=ip.getBaggage(e);if(!(!i||m0(e))){var o=YF(i).filter(function(a){return a.length<=eoe}).slice(0,Zie),s=WF(o);s.length>0&&n.set(r,sP,s)}},t.prototype.extract=function(e,r,n){var i=n.get(r,sP),o=Array.isArray(i)?i.join(Ob):i;if(!o)return e;var s={};if(o.length===0)return e;var a=o.split(Ob);return a.forEach(function(c){var u=aP(c);if(u){var l={value:u.value};u.metadata&&(l.metadata=u.metadata),s[u.key]=l}}),Object.entries(s).length===0?e:ip.setBaggage(e,ip.createBaggage(s))},t.prototype.fields=function(){return[sP]},t}()});var u3e,noe=T(()=>{u3e=function(){function t(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}return t.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},t}()});function h0(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=ioe(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=l3e(o.value,2),a=s[0],c=s[1];if(!ooe(a)){ot.warn("Invalid attribute key: "+a);continue}if(!cP(c)){ot.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(c)?n[a]=c.slice():n[a]=c}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function ooe(t){return typeof t=="string"&&t.length>0}function cP(t){return t==null?!0:Array.isArray(t)?d3e(t):soe(t)}function d3e(t){var e,r,n;try{for(var i=ioe(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!=null){if(!n){if(soe(s)){n=typeof s;continue}return!1}if(typeof s!==n)return!1}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function soe(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var ioe,l3e,aoe=T(()=>{tr();ioe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l3e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});function JF(){return function(t){ot.error(p3e(t))}}function p3e(t){return typeof t=="string"?t:JSON.stringify(f3e(t))}function f3e(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var ZF=T(()=>{tr()});function m3e(t){coe=t}function sa(t){try{coe(t)}catch{}}var coe,e7=T(()=>{ZF();coe=JF()});var Ua,t7=T(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(Ua||(Ua={}))});var uoe,loe=T(()=>{uoe=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});function v3e(t){return g3e.indexOf(t)>-1}function b3e(t){return y3e.indexOf(t)>-1}function x3e(t){return _3e.indexOf(t)>-1}function E3e(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function S3e(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function T3e(t,e,r,n){n===void 0&&(n=h3e);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(o){return o.trim()}))}function I3e(t,e,r){var n=r[t];if(typeof n=="string"){var i=C3e[n.toUpperCase()];i!=null&&(e[t]=i)}}function yT(t){var e={};for(var r in uP){var n=r;switch(n){case"OTEL_LOG_LEVEL":I3e(n,e,t);break;default:if(v3e(n))E3e(n,e,t);else if(b3e(n))S3e(n,e,t);else if(x3e(n))T3e(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}function r7(){return typeof process<"u"&&process&&process.env?yT(process.env):yT(uoe)}var h3e,g3e,y3e,_3e,Mb,Fb,doe,poe,uP,C3e,n7=T(()=>{tr();t7();loe();h3e=",",g3e=["OTEL_SDK_DISABLED"];y3e=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];_3e=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];Mb=1/0,Fb=128,doe=128,poe=128,uP={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:tn.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Mb,OTEL_ATTRIBUTE_COUNT_LIMIT:Fb,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Mb,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Fb,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Mb,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Fb,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:doe,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:poe,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Ua.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};C3e={ALL:tn.ALL,VERBOSE:tn.VERBOSE,DEBUG:tn.DEBUG,INFO:tn.INFO,WARN:tn.WARN,ERROR:tn.ERROR,NONE:tn.NONE}});function Yi(){var t=yT(process.env);return Object.assign({HOSTNAME:foe.hostname()},uP,t)}var foe,moe=T(()=>{foe=fe(require("os"));n7()});var w3e,hoe=T(()=>{w3e=typeof globalThis=="object"?globalThis:global});function goe(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function P3e(t){var e;t.length===16?e=R3e:t.length===32?e=A3e:e=Buffer.alloc(t.length/2);for(var r=0,n=0;n<t.length;n+=2){var i=goe(t.charCodeAt(n)),o=goe(t.charCodeAt(n+1));e.writeUInt8(i<<4|o,r++)}return e.toString("base64")}var R3e,A3e,voe=T(()=>{R3e=Buffer.alloc(8),A3e=Buffer.alloc(16)});function yoe(t){return function(){for(var r=0;r<t/4;r++)lP.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(lP[r]>0);r++)r===t-1&&(lP[t-1]=1);return lP.toString("hex",0,t)}}var k3e,boe,D3e,lP,_oe=T(()=>{k3e=8,boe=16,D3e=function(){function t(){this.generateTraceId=yoe(boe),this.generateSpanId=yoe(k3e)}return t}(),lP=Buffer.allocUnsafe(boe)});var xoe,op,Eoe=T(()=>{xoe=require("perf_hooks"),op=xoe.performance});var i7,dP=T(()=>{i7="1.17.0"});var sp,N3e,L3e,O3e,M3e,F3e,U3e,B3e,q3e,H3e,j3e,G3e,V3e,z3e,Soe=T(()=>{sp={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},N3e={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},L3e={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},O3e={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},M3e={INSERT:"insert",EDIT:"edit",DELETE:"delete"},F3e={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},U3e={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},B3e={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},q3e={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},H3e={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},j3e={QUEUE:"queue",TOPIC:"topic"},G3e={RECEIVE:"receive",PROCESS:"process"},V3e={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},z3e={SENT:"SENT",RECEIVED:"RECEIVED"}});var Toe=T(()=>{Soe()});var $t,$3e,W3e,Y3e,K3e,Q3e,o7,Coe=T(()=>{$t={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},$3e={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},W3e={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},Y3e={EC2:"ec2",FARGATE:"fargate"},K3e={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},Q3e={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},o7={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var Ioe=T(()=>{Coe()});var s7={};$r(s7,{AwsEcsLaunchtypeValues:()=>Y3e,CloudPlatformValues:()=>W3e,CloudProviderValues:()=>$3e,DbCassandraConsistencyLevelValues:()=>L3e,DbSystemValues:()=>N3e,FaasDocumentOperationValues:()=>M3e,FaasInvokedProviderValues:()=>F3e,FaasTriggerValues:()=>O3e,HostArchValues:()=>K3e,HttpFlavorValues:()=>H3e,MessageTypeValues:()=>z3e,MessagingDestinationKindValues:()=>j3e,MessagingOperationValues:()=>G3e,NetHostConnectionSubtypeValues:()=>q3e,NetHostConnectionTypeValues:()=>B3e,NetTransportValues:()=>U3e,OsTypeValues:()=>Q3e,RpcGrpcStatusCodeValues:()=>V3e,SemanticAttributes:()=>sp,SemanticResourceAttributes:()=>$t,TelemetrySdkLanguageValues:()=>o7});var vu=T(()=>{Toe();Ioe()});var Ub,bT,woe=T(()=>{dP();vu();bT=(Ub={},Ub[$t.TELEMETRY_SDK_NAME]="opentelemetry",Ub[$t.PROCESS_RUNTIME_NAME]="node",Ub[$t.TELEMETRY_SDK_LANGUAGE]=o7.NODEJS,Ub[$t.TELEMETRY_SDK_VERSION]=i7,Ub)});function a7(t){t.unref()}var Roe=T(()=>{});var Aoe=T(()=>{moe();hoe();voe();_oe();Eoe();woe();Roe()});var c7=T(()=>{Aoe()});function hl(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*J3e);return[r,n]}function _T(){var t=op.timeOrigin;if(typeof t!="number"){var e=op;t=e.timing&&e.timing.fetchStart}return t}function fP(t){var e=hl(_T()),r=hl(typeof t=="number"?t:op.now());return gP(e,r)}function Z3e(t){if(xT(t))return t;if(typeof t=="number")return t<_T()?fP(t):hl(t);if(t instanceof Date)return hl(t.getTime());throw TypeError("Invalid input type")}function u7(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=pP),[r,n]}function eOe(t){var e=Poe,r=""+"0".repeat(e)+t[1]+"Z",n=r.substr(r.length-e-1),i=new Date(t[0]*1e3).toISOString();return i.replace("000Z",n)}function tOe(t){return t[0]*pP+t[1]}function rOe(t){return t[0]*1e3+t[1]/1e6}function mP(t){return t[0]*1e6+t[1]/1e3}function xT(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function hP(t){return xT(t)||typeof t=="number"||t instanceof Date}function gP(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=pP&&(r[1]-=pP,r[0]+=1),r}var Poe,X3e,J3e,pP,koe=T(()=>{c7();Poe=9,X3e=6,J3e=Math.pow(10,X3e),pP=Math.pow(10,Poe)});var Doe=T(()=>{});var mc,Noe=T(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(mc||(mc={}))});var nOe,l7,Loe=T(()=>{tr();nOe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l7=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,o;try{for(var s=nOe(this._propagators),a=s.next();!a.done;a=s.next()){var c=a.value;try{c.inject(e,r,n)}catch(u){ot.warn("Failed to inject with "+c.constructor.name+". Err: "+u.message)}}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(s){ot.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}()});function Ooe(t){return sOe.test(t)}function Moe(t){return aOe.test(t)&&!cOe.test(t)}var d7,iOe,oOe,sOe,aOe,cOe,Foe=T(()=>{d7="[_0-9a-z-*/]",iOe="[a-z]"+d7+"{0,255}",oOe="[a-z0-9]"+d7+"{0,240}@[a-z]"+d7+"{0,13}",sOe=new RegExp("^(?:"+iOe+"|"+oOe+")$"),aOe=/^[ -~]{0,255}[!-~]$/,cOe=/,|=/});var Uoe,uOe,Boe,qoe,p7,f7=T(()=>{Foe();Uoe=32,uOe=512,Boe=",",qoe="=",p7=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+qoe+e.get(n)),r},[]).join(Boe)},t.prototype._parse=function(e){e.length>uOe||(this._internalState=e.split(Boe).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(qoe);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);Ooe(s)&&Moe(a)&&r.set(s,a)}return r},new Map),this._internalState.size>Uoe&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Uoe))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function Hoe(t){var e=hOe.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var vP,yP,lOe,dOe,pOe,fOe,mOe,hOe,m7,joe=T(()=>{tr();vT();f7();vP="traceparent",yP="tracestate",lOe="00",dOe="(?!ff)[\\da-f]{2}",pOe="(?![0]{32})[\\da-f]{32}",fOe="(?![0]{16})[\\da-f]{16}",mOe="[\\da-f]{2}",hOe=new RegExp("^\\s?("+dOe+")-("+pOe+")-("+fOe+")-("+mOe+")(-.*)?\\s?$");m7=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=Wi.getSpanContext(e);if(!(!i||m0(e)||!fc(i))){var o=lOe+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||li.NONE).toString(16);n.set(r,vP,o),i.traceState&&n.set(r,yP,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,vP);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;var s=Hoe(o);if(!s)return e;s.isRemote=!0;var a=n.get(r,yP);if(a){var c=Array.isArray(a)?a.join(","):a;s.traceState=new p7(typeof c=="string"?c:void 0)}return Wi.setSpanContext(e,s)},t.prototype.fields=function(){return[vP,yP]},t}()});var Goe=T(()=>{});function gOe(t,e){return t.setValue(g7,e)}function vOe(t){return t.deleteValue(g7)}function yOe(t){return t.getValue(g7)}var g7,h7,Voe=T(()=>{tr();g7=ml("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(h7||(h7={}))});var bP,v7=T(()=>{tr();bP=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:oa.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var ET,y7=T(()=>{tr();ET=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:oa.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var bOe,zoe=T(()=>{tr();e7();v7();y7();bOe=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(sa(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new ET),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new ET,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new bP,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new ET,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new bP}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=Wi.getSpanContext(e);return!a||!fc(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&li.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&li.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var _Oe,$oe=T(()=>{tr();_Oe=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:f0(r)&&this._accumulate(r)<this._upperBound?oa.RECORD_AND_SAMPLED:oa.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function wOe(t,e){return function(r){return t(e(r))}}function b7(t){if(!ROe(t)||AOe(t)!==xOe)return!1;var e=IOe(t);if(e===null)return!0;var r=Koe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Woe.call(r)===COe}function ROe(t){return t!=null&&typeof t=="object"}function AOe(t){return t==null?t===void 0?SOe:EOe:g0&&g0 in Object(t)?POe(t):kOe(t)}function POe(t){var e=Koe.call(t,g0),r=t[g0],n=!1;try{t[g0]=void 0,n=!0}catch{}var i=Qoe.call(t);return n&&(e?t[g0]=r:delete t[g0]),i}function kOe(t){return Qoe.call(t)}var xOe,EOe,SOe,TOe,Woe,COe,IOe,Yoe,Koe,g0,Qoe,Xoe=T(()=>{xOe="[object Object]",EOe="[object Null]",SOe="[object Undefined]",TOe=Function.prototype,Woe=TOe.toString,COe=Woe.call(Object),IOe=wOe(Object.getPrototypeOf,Object),Yoe=Object.prototype,Koe=Yoe.hasOwnProperty,g0=Symbol?Symbol.toStringTag:void 0,Qoe=Yoe.toString});function x7(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=Zoe(r,t.shift(),0,n);return r}function _7(t){return xP(t)?t.slice():t}function Zoe(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>DOe)){if(r++,_P(t)||_P(e)||ese(e))i=_7(e);else if(xP(t)){if(i=t.slice(),xP(e))for(var o=0,s=e.length;o<s;o++)i.push(_7(e[o]));else if(ST(e))for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var c=a[o];i[c]=_7(e[c])}}else if(ST(t))if(ST(e)){if(!NOe(t,e))return e;i=Object.assign({},t);for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var c=a[o],u=e[c];if(_P(u))typeof u>"u"?delete i[c]:i[c]=u;else{var l=i[c],d=u;if(Joe(t,c,n)||Joe(e,c,n))delete i[c];else{if(ST(l)&&ST(d)){var p=n.get(l)||[],f=n.get(d)||[];p.push({obj:t,key:c}),f.push({obj:e,key:c}),n.set(l,p),n.set(d,f)}i[c]=Zoe(i[c],u,r,n)}}}}else i=e;return i}}function Joe(t,e,r){for(var n=r.get(t[e])||[],i=0,o=n.length;i<o;i++){var s=n[i];if(s.key===e&&s.obj===t)return!0}return!1}function xP(t){return Array.isArray(t)}function ese(t){return typeof t=="function"}function ST(t){return!_P(t)&&!xP(t)&&!ese(t)&&typeof t=="object"}function _P(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function NOe(t,e){return!(!b7(t)||!b7(e))}var DOe,tse=T(()=>{Xoe();DOe=20});function OOe(t,e){var r,n=new Promise(function(o,s){r=setTimeout(function(){s(new rse("Operation timed out."))},e)});return Promise.race([t,n]).then(function(i){return clearTimeout(r),i},function(i){throw clearTimeout(r),i})}var LOe,rse,nse=T(()=>{LOe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rse=function(t){LOe(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error)});function ise(t,e){return typeof e=="string"?t===e:!!t.match(e)}function FOe(t,e){var r,n;if(!e)return!1;try{for(var i=MOe(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(ise(t,s))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}var MOe,ose=T(()=>{MOe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});function UOe(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var sse=T(()=>{});var ase,cse=T(()=>{ase=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}()});var BOe,qOe,TT,use=T(()=>{cse();BOe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},qOe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},TT=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new ase}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,qOe([this._that],BOe(n),!1))).then(function(o){return r._deferred.resolve(o)},function(o){return r._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},t}()});function lse(t,e){return new Promise(function(r){Ps.with(gT(Ps.active()),function(){t.export(e,function(n){r(n)})})})}var dse=T(()=>{tr();vT()});var pse={};$r(pse,{AlwaysOffSampler:()=>bP,AlwaysOnSampler:()=>ET,AnchoredClock:()=>u3e,BindOnceFuture:()=>TT,CompositePropagator:()=>l7,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>Fb,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>Mb,DEFAULT_ENVIRONMENT:()=>uP,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>doe,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>poe,ExportResultCode:()=>mc,ParentBasedSampler:()=>bOe,RPCType:()=>h7,RandomIdGenerator:()=>D3e,SDK_INFO:()=>bT,TRACE_PARENT_HEADER:()=>vP,TRACE_STATE_HEADER:()=>yP,TimeoutError:()=>rse,TraceIdRatioBasedSampler:()=>_Oe,TraceState:()=>p7,TracesSamplerValues:()=>Ua,VERSION:()=>i7,W3CBaggagePropagator:()=>XF,W3CTraceContextPropagator:()=>m7,_globalThis:()=>w3e,addHrTimes:()=>gP,baggageUtils:()=>KF,callWithTimeout:()=>OOe,deleteRPCMetadata:()=>vOe,getEnv:()=>Yi,getEnvWithoutDefaults:()=>r7,getRPCMetadata:()=>yOe,getTimeOrigin:()=>_T,globalErrorHandler:()=>sa,hexToBase64:()=>P3e,hrTime:()=>fP,hrTimeDuration:()=>u7,hrTimeToMicroseconds:()=>mP,hrTimeToMilliseconds:()=>rOe,hrTimeToNanoseconds:()=>tOe,hrTimeToTimeStamp:()=>eOe,internal:()=>E7,isAttributeKey:()=>ooe,isAttributeValue:()=>cP,isTimeInput:()=>hP,isTimeInputHrTime:()=>xT,isTracingSuppressed:()=>m0,isUrlIgnored:()=>FOe,isWrapped:()=>UOe,loggingErrorHandler:()=>JF,merge:()=>x7,millisToHrTime:()=>hl,otperformance:()=>op,parseEnvironment:()=>yT,parseTraceParent:()=>Hoe,sanitizeAttributes:()=>h0,setGlobalErrorHandler:()=>m3e,setRPCMetadata:()=>gOe,suppressTracing:()=>gT,timeInputToHrTime:()=>Z3e,unrefTimer:()=>a7,unsuppressTracing:()=>s3e,urlMatches:()=>ise});var E7,ks=T(()=>{roe();noe();aoe();e7();ZF();koe();Doe();Noe();dP();QF();c7();Loe();joe();Goe();Voe();v7();y7();zoe();$oe();vT();f7();n7();tse();t7();nse();ose();sse();use();dP();dse();E7={_export:lse}});var fse,mse=T(()=>{fse="exception"});var HOe,jOe,S7,T7=T(()=>{tr();ks();vu();mse();HOe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jOe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},S7=function(){function t(e,r,n,i,o,s,a,c,u){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Nb.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a;var l=Date.now();this._performanceStartTime=op.now(),this._performanceOffset=l-(this._performanceStartTime+_T()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(ot.warn("Invalid attribute key: "+e),this):cP(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(ot.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=HOe(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=jOe(o.value,2),a=s[0],c=s[1];this.setAttribute(a,c)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return ot.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(ot.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),hP(r)&&(hP(n)||(n=r),r=void 0);var i=h0(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){ot.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=u7(this.startTime,this.endTime),this._duration[0]<0&&(ot.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<op.now())return fP(e+this._performanceOffset);if(typeof e=="number")return hl(e);if(e instanceof Date)return hl(e.getTime());if(xT(e))return e;if(this._startTimeProvided)return hl(Date.now());var r=op.now()-this._performanceStartTime;return gP(this.startTime,hl(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[sp.EXCEPTION_MESSAGE]=e:e&&(e.code?n[sp.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[sp.EXCEPTION_TYPE]=e.name),e.message&&(n[sp.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[sp.EXCEPTION_STACKTRACE]=e.stack)),n[sp.EXCEPTION_TYPE]||n[sp.EXCEPTION_MESSAGE]?this.addEvent(fse,n,r):ot.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&ot.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(ot.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}()});var gl,CT=T(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(gl||(gl={}))});var v0,EP=T(()=>{CT();v0=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:gl.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var ap,SP=T(()=>{CT();ap=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:gl.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var IT,C7=T(()=>{tr();ks();EP();SP();IT=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(sa(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new ap),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new ap,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new v0,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new ap,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new v0}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=Wi.getSpanContext(e);return!a||!fc(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&li.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&li.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var TP,I7=T(()=>{tr();CT();TP=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:f0(r)&&this._accumulate(r)<this._upperBound?gl.RECORD_AND_SAMPLED:gl.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function CP(){return{sampler:w7(GOe),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Yi().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Yi().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:Yi().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Yi().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Yi().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Yi().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:Yi().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:Yi().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function w7(t){switch(t===void 0&&(t=Yi()),t.OTEL_TRACES_SAMPLER){case Ua.AlwaysOn:return new ap;case Ua.AlwaysOff:return new v0;case Ua.ParentBasedAlwaysOn:return new IT({root:new ap});case Ua.ParentBasedAlwaysOff:return new IT({root:new v0});case Ua.TraceIdRatio:return new TP(hse(t));case Ua.ParentBasedTraceIdRatio:return new IT({root:new TP(hse(t))});default:return ot.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+VOe+'".'),new ap}}function hse(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return ot.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Bb+"."),Bb;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(ot.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Bb+"."),Bb):e<0||e>1?(ot.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Bb+"."),Bb):e}var GOe,VOe,Bb,R7=T(()=>{tr();ks();EP();SP();C7();I7();GOe=Yi(),VOe=Ua.AlwaysOn,Bb=1});function gse(t){var e={sampler:w7()},r=CP(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function vse(t){var e,r,n,i,o,s,a,c,u,l,d,p,f=Object.assign({},t.spanLimits),m=r7();return f.attributeCountLimit=(s=(o=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:Fb,f.attributeValueLengthLimit=(p=(d=(l=(c=(a=t.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&c!==void 0?c:(u=t.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&l!==void 0?l:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:Mb,Object.assign({},t,{spanLimits:f})}var A7=T(()=>{R7();ks()});var yse,bse=T(()=>{tr();ks();yse=function(){function t(e,r){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=Yi();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new TT(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ot.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&li.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&ot.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(ot.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);Ps.with(gT(Ps.active()),function(){var o=e._finishedSpans.splice(0,e._maxExportBatchSize),s=function(){return e._exporter.export(o,function(c){var u;clearTimeout(i),c.code===mc.SUCCESS?r():n((u=c.error)!==null&&u!==void 0?u:new Error("BatchSpanProcessor: span export failed"))})},a=o.map(function(c){return c.resource}).filter(function(c){return c.asyncAttributesPending});a.length===0?s():Promise.all(a.map(function(c){var u;return(u=c.waitForAsyncAttributes)===null||u===void 0?void 0:u.call(c)})).then(s,function(c){sa(c),n(c)})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){sa(r)})},this._scheduledDelayMillis),a7(this._timer))},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}()});var zOe,P7,_se=T(()=>{bse();zOe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P7=function(t){zOe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onShutdown=function(){},e}(yse)});function xse(t){return function(){for(var r=0;r<t/4;r++)IP.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(IP[r]>0);r++)r===t-1&&(IP[t-1]=1);return IP.toString("hex",0,t)}}var $Oe,Ese,k7,IP,Sse=T(()=>{$Oe=8,Ese=16,k7=function(){function t(){this.generateTraceId=xse(Ese),this.generateSpanId=xse($Oe)}return t}(),IP=Buffer.allocUnsafe(Ese)});var Tse=T(()=>{_se();Sse()});var wP=T(()=>{Tse()});var D7,Cse=T(()=>{tr();ks();T7();A7();wP();D7=function(){function t(e,r,n){this._tracerProvider=n;var i=gse(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new k7,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,o,s;r===void 0&&(r={}),n===void 0&&(n=Ps.active()),r.root&&(n=Wi.deleteSpan(n));var a=Wi.getSpan(n);if(m0(n)){ot.debug("Instrumentation suppressed, returning Noop Span");var c=Wi.wrapSpanContext(kb);return c}var u=a?.spanContext(),l=this._idGenerator.generateSpanId(),d,p,f;!u||!Wi.isSpanContextValid(u)?d=this._idGenerator.generateTraceId():(d=u.traceId,p=u.traceState,f=u.spanId);var m=(i=r.kind)!==null&&i!==void 0?i:Db.INTERNAL,h=((o=r.links)!==null&&o!==void 0?o:[]).map(function(R){return{context:R.context,attributes:h0(R.attributes)}}),g=h0(r.attributes),v=this._sampler.shouldSample(n,d,e,m,g,h);p=(s=v.traceState)!==null&&s!==void 0?s:p;var b=v.decision===oa.RECORD_AND_SAMPLED?li.SAMPLED:li.NONE,y={traceId:d,spanId:l,traceFlags:b,traceState:p};if(v.decision===oa.NOT_RECORD){ot.debug("Recording is off, propagating context in a non-recording span");var c=Wi.wrapSpanContext(y);return c}var E=new S7(this,n,e,y,m,f,h,r.startTime),x=h0(Object.assign(g,v.attributes));return E.setAttributes(x),E},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var c=s??Ps.active(),u=this.startSpan(e,o,c),l=Wi.setSpan(c,u);return Ps.with(l,a,void 0,u)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}()});function Ise(){return"unknown_service:"+process.argv0}var wse=T(()=>{});var Rse,Ase,N7=T(()=>{Rse=function(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},Ase=function(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}});var Pse,kse,qb,RP=T(()=>{Pse=fe(require("child_process")),kse=fe(require("util")),qb=kse.promisify(Pse.exec)});var Dse={};$r(Dse,{getMachineId:()=>KOe});function KOe(){return WOe(this,void 0,void 0,function(){var t,e,r,n;return YOe(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,qb('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:return t=i.sent(),e=t.stdout.split(`
`).find(function(o){return o.includes("IOPlatformUUID")}),e?(r=e.split('" = "'),r.length===2?[2,r[1].slice(0,-1)]:[3,3]):[2,""];case 2:return n=i.sent(),ot.debug("error reading machine id: "+n),[3,3];case 3:return[2,""]}})})}var WOe,YOe,Nse=T(()=>{RP();tr();WOe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},YOe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var Ose={};$r(Ose,{getMachineId:()=>ZOe});function ZOe(){return QOe(this,void 0,void 0,function(){var t,e,r,n,i,o,s,a,c;return XOe(this,function(u){switch(u.label){case 0:t=["/etc/machine-id","/var/lib/dbus/machine-id"],u.label=1;case 1:u.trys.push([1,8,9,10]),e=JOe(t),r=e.next(),u.label=2;case 2:if(r.done)return[3,7];n=r.value,u.label=3;case 3:return u.trys.push([3,5,,6]),[4,Lse.promises.readFile(n,{encoding:"utf8"})];case 4:return i=u.sent(),[2,i.trim()];case 5:return o=u.sent(),ot.debug("error reading machine id: "+o),[3,6];case 6:return r=e.next(),[3,2];case 7:return[3,10];case 8:return s=u.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(c=e.return)&&c.call(e)}finally{if(a)throw a.error}return[7];case 10:return[2,""]}})})}var Lse,QOe,XOe,JOe,Mse=T(()=>{Lse=require("fs");tr();QOe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},XOe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},JOe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});var Use={};$r(Use,{getMachineId:()=>r5e});function r5e(){return e5e(this,void 0,void 0,function(){var e,t,e,r;return t5e(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Fse.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return e=n.sent(),[2,e.trim()];case 2:return t=n.sent(),ot.debug("error reading machine id: "+t),[3,3];case 3:return n.trys.push([3,5,,6]),[4,qb("kenv -q smbios.system.uuid")];case 4:return e=n.sent(),[2,e.stdout.trim()];case 5:return r=n.sent(),ot.debug("error reading machine id: "+r),[3,6];case 6:return[2,""]}})})}var Fse,e5e,t5e,Bse=T(()=>{Fse=require("fs");RP();tr();e5e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},t5e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var qse={};$r(qse,{getMachineId:()=>o5e});function o5e(){return n5e(this,void 0,void 0,function(){var t,e,r,n,i;return i5e(this,function(o){switch(o.label){case 0:t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe",AP.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in AP.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,qb(e+" "+t)];case 2:return r=o.sent(),n=r.stdout.split("REG_SZ"),n.length===2?[2,n[1].trim()]:[3,4];case 3:return i=o.sent(),ot.debug("error reading machine id: "+i),[3,4];case 4:return[2,""]}})})}var AP,n5e,i5e,Hse=T(()=>{AP=fe(require("process"));RP();tr();n5e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},i5e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var jse={};$r(jse,{getMachineId:()=>c5e});function c5e(){return s5e(this,void 0,void 0,function(){return a5e(this,function(t){return ot.debug("could not read machine-id: unsupported platform"),[2,""]})})}var s5e,a5e,Gse=T(()=>{tr();s5e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},a5e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}});var Vse,y0,zse=T(()=>{Vse=fe(require("process"));switch(Vse.platform){case"darwin":y0=(Nse(),Ti(Dse)).getMachineId;break;case"linux":y0=(Mse(),Ti(Ose)).getMachineId;break;case"freebsd":y0=(Bse(),Ti(Use)).getMachineId;break;case"win32":y0=(Hse(),Ti(qse)).getMachineId;break;default:y0=(Gse(),Ti(jse)).getMachineId}});var PP,u5e,$se,L7=T(()=>{vu();Hb();PP=require("os");N7();zse();u5e=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[$t.HOST_NAME]=(0,PP.hostname)(),r[$t.HOST_ARCH]=Rse((0,PP.arch)()),r);return new Ds(n,this._getAsyncAttributes())},t.prototype._getAsyncAttributes=function(){return y0().then(function(e){var r={};return e&&(r[$t.HOST_ID]=e),r})},t}(),$se=new u5e});var l5e,ibt,Wse=T(()=>{L7();l5e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve($se.detect(e))},t}(),ibt=new l5e});var kP,d5e,Yse,O7=T(()=>{vu();Hb();kP=require("os");N7();d5e=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[$t.OS_TYPE]=Ase((0,kP.platform)()),r[$t.OS_VERSION]=(0,kP.release)(),r);return new Ds(n)},t}(),Yse=new d5e});var p5e,dbt,Kse=T(()=>{O7();p5e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Yse.detect(e))},t}(),dbt=new p5e});var Jse,Qse,Xse,f5e,Zse,M7=T(()=>{tr();vu();Hb();Jse=fe(require("os")),Qse=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Xse=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},f5e=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[$t.PROCESS_PID]=process.pid,r[$t.PROCESS_EXECUTABLE_NAME]=process.title,r[$t.PROCESS_EXECUTABLE_PATH]=process.execPath,r[$t.PROCESS_COMMAND_ARGS]=Xse(Xse([process.argv[0]],Qse(process.execArgv),!1),Qse(process.argv.slice(1)),!1),r[$t.PROCESS_RUNTIME_VERSION]=process.versions.node,r[$t.PROCESS_RUNTIME_NAME]="nodejs",r[$t.PROCESS_RUNTIME_DESCRIPTION]="Node.js",r);process.argv.length>1&&(n[$t.PROCESS_COMMAND]=process.argv[1]);try{var i=Jse.userInfo();n[$t.PROCESS_OWNER]=i.username}catch(o){ot.debug("error obtaining process owner: "+o)}return new Ds(n)},t}(),Zse=new f5e});var m5e,ybt,eae=T(()=>{M7();m5e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Zse.detect(e))},t}(),ybt=new m5e});var tae=T(()=>{wse();Wse();Kse();L7();O7();eae();M7()});var F7=T(()=>{tae()});var Zf,h5e,g5e,v5e,Ds,Hb=T(()=>{tr();vu();ks();F7();Zf=function(){return Zf=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zf.apply(this,arguments)},h5e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},g5e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},v5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Ds=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r?.then(function(o){return n._attributes=Object.assign({},n._attributes,o),n.asyncAttributesPending=!1,o},function(o){return ot.debug("a resource's async attributes promise rejected: %s",o),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[$t.SERVICE_NAME]=Ise(),e[$t.TELEMETRY_SDK_LANGUAGE]=bT[$t.TELEMETRY_SDK_LANGUAGE],e[$t.TELEMETRY_SDK_NAME]=bT[$t.TELEMETRY_SDK_NAME],e[$t.TELEMETRY_SDK_VERSION]=bT[$t.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&ot.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return h5e(this,void 0,void 0,function(){return g5e(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=Zf(Zf({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(s){var a,c=v5e(s,2),u=c[0],l=c[1];return Zf(Zf(Zf(Zf({},r._syncAttributes),u),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),l)});return new t(i,o)},t.EMPTY=new t({}),t}()});var rae=T(()=>{});var nae=T(()=>{});var iae=T(()=>{});var y5e,Mbt,oae=T(()=>{DP();y5e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(sae.detect(e))},t}(),Mbt=new y5e});var b5e,_5e,x5e,aae,U7=T(()=>{tr();ks();vu();Hb();b5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},x5e=function(){function t(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return t.prototype.detect=function(e){var r={},n=Yi(),i=n.OTEL_RESOURCE_ATTRIBUTES,o=n.OTEL_SERVICE_NAME;if(i)try{var s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(a){ot.debug("EnvDetector failed: "+a.message)}return o&&(r[$t.SERVICE_NAME]=o),new Ds(r)},t.prototype._parseResourceAttributes=function(e){var r,n;if(!e)return{};var i={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var s=b5e(o),a=s.next();!a.done;a=s.next()){var c=a.value,u=c.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length===2){var l=_5e(u,2),d=l[0],p=l[1];if(d=d.trim(),p=p.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(d))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(p))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);i[d]=decodeURIComponent(p)}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},t.prototype._isBaggageOctetString=function(e){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0},t.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},t}(),aae=new x5e});var E5e,Vbt,cae=T(()=>{U7();E5e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(aae.detect(e))},t}(),Vbt=new E5e});var B7,S5e,sae,uae=T(()=>{vu();DP();tr();B7=function(){return B7=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},B7.apply(this,arguments)},S5e=function(){function t(){}return t.prototype.detect=function(e){var r,n=typeof navigator<"u";if(!n)return Ds.empty();var i=(r={},r[$t.PROCESS_RUNTIME_NAME]="browser",r[$t.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",r[$t.PROCESS_RUNTIME_VERSION]=navigator.userAgent,r);return this._getResourceAttributes(i,e)},t.prototype._getResourceAttributes=function(e,r){return e[$t.PROCESS_RUNTIME_VERSION]===""?(ot.debug("BrowserDetector failed: Unable to find required browser resources. "),Ds.empty()):new Ds(B7({},e))},t}(),sae=new S5e});var lae=T(()=>{oae();cae();uae();U7()});var dae=T(()=>{});var DP=T(()=>{Hb();rae();F7();nae();iae();lae();dae()});var NP,pae,fae=T(()=>{ks();NP=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pae=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=NP(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.forceFlush())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(c){sa(c||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var o=NP(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onStart(e,r)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=NP(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onEnd(e)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=NP(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.shutdown())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a,c){Promise.all(n).then(function(){a()},c)})},t}()});var q7,H7=T(()=>{q7=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}()});var em,T5e,mae=T(()=>{tr();ks();DP();j7();R7();fae();H7();wP();A7();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(em||(em={}));T5e=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=x7({},CP(),vse(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Ds.empty(),this.resource=Ds.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new P7(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new q7}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(i)||this._tracers.set(i,new D7({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return ot.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new pae(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),Wi.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Ps.setGlobalContextManager(e.contextManager),e.propagator&&ip.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),o=em.timeout},e);n.forceFlush().then(function(){clearTimeout(s),o!==em.timeout&&(o=em.resolved,i(o))}).catch(function(a){clearTimeout(s),o=em.error,i(a)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var s=o.filter(function(a){return a!==em.resolved});s.length>0?i(s):n()}).catch(function(o){return i([o])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(Yi().OTEL_PROPAGATORS)),n=r.map(function(o){var s=e._getPropagator(o);return s||ot.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=n.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return r.length===1?i[0]:new l7({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=Yi().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||ot.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new m7}],["baggage",function(){return new XF}]]),t._registeredExporters=new Map,t}()});var C5e,I5e,hae=T(()=>{ks();C5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I5e=function(){function t(){}return t.prototype.export=function(e,r){return this._sendSpans(e,r)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var r;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:mP(e.startTime),duration:mP(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,r){var n,i;try{for(var o=C5e(e),s=o.next();!s.done;s=o.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(r)return r({code:mc.SUCCESS})},t}()});var w5e,R5e,A5e,gae=T(()=>{ks();w5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},R5e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},A5e=function(){function t(){this._finishedSpans=[],this._stopped=!1}return t.prototype.export=function(e,r){var n;if(this._stopped)return r({code:mc.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,R5e([],w5e(e),!1)),setTimeout(function(){return r({code:mc.SUCCESS})},0)},t.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this._finishedSpans=[]},t.prototype.getFinishedSpans=function(){return this._finishedSpans},t}()});var vae=T(()=>{});var P5e,k5e,D5e,yae=T(()=>{tr();ks();P5e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},k5e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},D5e=function(){function t(e){this._exporter=e,this._shutdownOnce=new TT(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return P5e(this,void 0,void 0,function(){return k5e(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){var r=this,n,i;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&li.SAMPLED){var o=function(){return E7._export(r._exporter,[e]).then(function(a){var c;a.code!==mc.SUCCESS&&sa((c=a.error)!==null&&c!==void 0?c:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){sa(a)})};if(e.resource.asyncAttributesPending){var s=(i=(n=e.resource).waitForAsyncAttributes)===null||i===void 0?void 0:i.call(n).then(function(){return s!=null&&r._unresolvedExports.delete(s),o()},function(a){return sa(a)});s!=null&&this._unresolvedExports.add(s)}else o()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}()});var bae=T(()=>{});var _ae=T(()=>{});var xae=T(()=>{});var Eae=T(()=>{});var Sae=T(()=>{});var Tae={};$r(Tae,{AlwaysOffSampler:()=>v0,AlwaysOnSampler:()=>ap,BasicTracerProvider:()=>T5e,BatchSpanProcessor:()=>P7,ConsoleSpanExporter:()=>I5e,ForceFlushState:()=>em,InMemorySpanExporter:()=>A5e,NoopSpanProcessor:()=>q7,ParentBasedSampler:()=>IT,RandomIdGenerator:()=>k7,SamplingDecision:()=>gl,SimpleSpanProcessor:()=>D5e,Span:()=>S7,TraceIdRatioBasedSampler:()=>TP,Tracer:()=>D7});var j7=T(()=>{Cse();mae();wP();hae();gae();vae();yae();bae();H7();EP();SP();C7();I7();CT();T7();_ae();xae();Eae();Sae()});var Iae=k(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.enable=hc.azureCoreTracing=hc.AzureMonitorSymbol=void 0;var G7=Jn();hc.AzureMonitorSymbol="Azure_Monitor_Tracer";var V7="azure-coretracing",Cae=!1,N5e=function(t){if(Cae)return t;try{var e=(j7(),Ti(Tae)),r=(tr(),Ti(Lb)),n=new e.BasicTracerProvider,i=n.getTracer("applicationinsights tracer");if(t.setTracer){var o=t.setTracer;t.setTracer=function(u){var l=u.startSpan;u.startSpan=function(d,p,f){var m=l.call(this,d,p,f),h=m.end;return m.end=function(){var g=h.apply(this,arguments);return G7.channel.publish(V7,m),g},m},u[hc.AzureMonitorSymbol]=!0,o.call(this,u)},r.trace.getSpan(r.context.active()),t.setTracer(i)}else{var s=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(u){var l=u.getTracer;return u.getTracer=function(d,p){var f=l.call(this,d,p);if(!f[hc.AzureMonitorSymbol]){var m=f.startSpan;f.startSpan=function(h,g,v){var b=m.call(this,h,g,v),y=b.end;return b.end=function(){var E=y.apply(this,arguments);return G7.channel.publish(V7,b),E},b},f[hc.AzureMonitorSymbol]=!0}return f},s.call(this,u)},n.register(),r.trace.getSpan(r.context.active());var a=require("@opentelemetry/instrumentation"),c=require("@azure/opentelemetry-instrumentation-azure-sdk");a.registerInstrumentations({instrumentations:[c.createAzureSdkInstrumentation()]})}Cae=!0}catch{}return t};hc.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:N5e,publisherName:V7};function L5e(){G7.channel.registerMonkeyPatch("@azure/core-tracing",hc.azureCoreTracing)}hc.enable=L5e});var Rae=k(b0=>{"use strict";Object.defineProperty(b0,"__esModule",{value:!0});b0.enable=b0.bunyan=void 0;var wae=Jn(),O5e=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,r,!0)),wae.channel.publish("bunyan",{level:r.level,result:o})}return i},t};b0.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:O5e};function M5e(){wae.channel.registerMonkeyPatch("bunyan",b0.bunyan)}b0.enable=M5e});var Pae=k(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});_0.enable=_0.console=void 0;var z7=Jn(),Aae=require("stream"),F5e=function(t){var e=new Aae.Writable,r=new Aae.Writable;e.write=function(u){if(!u)return!0;var l=u.toString();return z7.channel.publish("console",{message:l}),!0},r.write=function(u){if(!u)return!0;var l=u.toString();return z7.channel.publish("console",{message:l,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(u){var l=t[u];l&&(t[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch{}return l.apply(t,arguments)})},s=0,a=i;s<a.length;s++){var c=a[s];o(c)}return t};_0.console={versionSpecifier:">= 4.0.0",patch:F5e};function U5e(){z7.channel.registerMonkeyPatch("console",_0.console),require("console")}_0.enable=U5e});var kae=k(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});x0.enable=x0.mongoCore=void 0;var $7=Jn(),B5e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=$7.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=$7.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t};x0.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:B5e};function q5e(){$7.channel.registerMonkeyPatch("mongodb-core",x0.mongoCore)}x0.enable=q5e});var Dae=k(Ns=>{"use strict";var jb=Ns&&Ns.__assign||function(){return jb=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jb.apply(this,arguments)};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.enable=Ns.mongo330=Ns.mongo3=Ns.mongo2=void 0;var as=Jn(),H5e=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return as.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=jb(jb({},n),{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return as.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):as.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return as.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):as.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},j5e=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=as.channel.bindToContext(function(o){return o()}),r[i.requestId]=jb(jb({},i),{time:new Date}))}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return as.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return as.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t},G5e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=as.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=as.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t},V5e=function(t){G5e(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=as.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return as.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return as.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t};Ns.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:H5e};Ns.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:j5e};Ns.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:V5e};function z5e(){as.channel.registerMonkeyPatch("mongodb",Ns.mongo2),as.channel.registerMonkeyPatch("mongodb",Ns.mongo3),as.channel.registerMonkeyPatch("mongodb",Ns.mongo330)}Ns.enable=z5e});var Lae=k(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.enable=E0.mysql=void 0;var LP=Jn(),Nae=require("path"),$5e=function(t,e){var r=function(c,u){return function(l,d){var p=c[l];p&&(c[l]=function(){for(var m=arguments.length-1,h=arguments.length-1;h>=0;--h)if(typeof arguments[h]=="function"){m=h;break}else if(typeof arguments[h]<"u")break;var g=arguments[m],v={result:null,startTime:null,startDate:null};typeof g=="function"&&(d?(v.startTime=process.hrtime(),v.startDate=new Date,arguments[m]=LP.channel.bindToContext(d(v,g))):arguments[m]=LP.channel.bindToContext(g));var b=p.apply(this,arguments);return v.result=b,b})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(Nae.dirname(e)+"/lib/Connection");i.forEach(function(c){return n(o,"Connection")(c)}),r(o,"Connection")("createQuery",function(c,u){return function(l){var d=process.hrtime(c.startTime),p=d[0]*1e3+d[1]/1e6|0;LP.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:l,duration:p,time:c.startDate}),u.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(Nae.dirname(e)+"/lib/Pool");return s.forEach(function(c){return n(a,"Pool")(c)}),t};E0.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:$5e};function W5e(){LP.channel.registerMonkeyPatch("mysql",E0.mysql)}E0.enable=W5e});var Mae=k(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});S0.enable=S0.postgresPool1=void 0;var Oae=Jn();function Y5e(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=Oae.channel.bindToContext(n)),e.apply(this,arguments)},t}S0.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:Y5e};function K5e(){Oae.channel.registerMonkeyPatch("pg-pool",S0.postgresPool1)}S0.enable=K5e});var Uae=k(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.enable=vl.postgres=vl.postgres6=void 0;var Gb=Jn(),Fae=require("events"),W7="postgres";function Q5e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),l;function d(p){p&&p[n]&&(p=p[n]);var f=Gb.channel.bindToContext(function(m,h){var g=process.hrtime(u);if(c.result=h&&{rowCount:h.rowCount,command:h.command},c.error=m,c.duration=Math.ceil(g[0]*1e3+g[1]/1e6),Gb.channel.publish(W7,c),m){if(p)return p.apply(this,arguments);l&&l instanceof Fae.EventEmitter&&l.emit("error",m)}else p&&p.apply(this,arguments)});try{return Object.defineProperty(f,n,{value:p}),f}catch{return p}}try{typeof o=="string"?s instanceof Array?(c.query.preparable={text:o,args:s},a=d(a)):(c.query.text=o,a?a=d(a):s=d(s)):(typeof o.name=="string"?c.query.plan=o.name:o.values instanceof Array?c.query.preparable={text:o.text,args:o.values}:c.query.text=o.text,a?a=d(a):s?s=d(s):o.callback=d(o.callback))}catch{return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,l=r.apply(this,arguments),l},t}function X5e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c=this,u,l,d=!!a,p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f,m=process.hrtime();function h(b){b&&b[n]&&(b=b[n]);var y=Gb.channel.bindToContext(function(E,x){var R=process.hrtime(m);if(p.result=x&&{rowCount:x.rowCount,command:x.command},p.error=E,p.duration=Math.ceil(R[0]*1e3+R[1]/1e6),Gb.channel.publish(W7,p),E){if(b)return b.apply(this,arguments);f&&f instanceof Fae.EventEmitter&&f.emit("error",E)}else b&&b.apply(this,arguments)});try{return Object.defineProperty(y,n,{value:b}),y}catch{return b}}try{typeof o=="string"?s instanceof Array?(p.query.preparable={text:o,args:s},d=typeof a=="function",a=d?h(a):a):(p.query.text=o,a?(d=typeof a=="function",a=d?h(a):a):(d=typeof s=="function",s=d?h(s):s)):(typeof o.name=="string"?p.query.plan=o.name:o.values instanceof Array?p.query.preparable={text:o.text,args:o.values}:o.cursor?p.query.text=(u=o.cursor)===null||u===void 0?void 0:u.text:p.query.text=o.text,a?(d=typeof a=="function",a=h(a)):s?(d=typeof s=="function",s=d?h(s):s):(d=typeof o.callback=="function",o.callback=d?h(o.callback):o.callback))}catch{return r.apply(this,arguments)}arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3;try{f=r.apply(this,arguments)}catch(b){throw h()(b,void 0),b}if(!d){if(f instanceof Promise)return f.then(function(b){return h()(void 0,b),new c._Promise(function(y,E){y(b)})}).catch(function(b){return h()(b,void 0),new c._Promise(function(y,E){E(b)})});var g=f.text?f.text:"";if(f.cursor&&(g=(l=f.cursor)===null||l===void 0?void 0:l.text),g){var v={command:g,rowCount:0};h()(void 0,v)}}return f},t}vl.postgres6={versionSpecifier:"6.*",patch:Q5e};vl.postgres={versionSpecifier:">=7.* <=8.*",patch:X5e,publisherName:W7};function J5e(){Gb.channel.registerMonkeyPatch("pg",vl.postgres6),Gb.channel.registerMonkeyPatch("pg",vl.postgres)}vl.enable=J5e});var Bae=k(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});T0.enable=T0.redis=void 0;var Y7=Jn(),Z5e=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=Y7.channel.bindToContext(function(a,c){var u=process.hrtime(o),l=u[0]*1e3+u[1]/1e6|0;Y7.channel.publish("redis",{duration:l,address:i,commandObj:r,err:a,result:c,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};T0.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:Z5e};function e6e(){Y7.channel.registerMonkeyPatch("redis",T0.redis)}T0.enable=e6e});var qae=k(cp=>{"use strict";var OP=cp&&cp.__assign||function(){return OP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},OP.apply(this,arguments)};Object.defineProperty(cp,"__esModule",{value:!0});cp.enable=cp.tedious=void 0;var K7=Jn(),t6e=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return K7.channel.bindToContext(function(c,u,l){var d=process.hrtime(s);a=OP(OP({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:l},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(d[0]*1e3+d[1]/1e6)}),K7.channel.publish("tedious",a),o.call(this,c,u,l)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};cp.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:t6e};function r6e(){K7.channel.registerMonkeyPatch("tedious",cp.tedious)}cp.enable=r6e});var Hae=k(aa=>{"use strict";var n6e=aa&&aa.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i6e=aa&&aa.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(aa,"__esModule",{value:!0});aa.enable=aa.winston2=aa.winston3=void 0;var MP=Jn(),o6e=function(t){var e=t.Logger.prototype.log,r,n=function(i,o,s){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",MP.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},t},s6e=function(t){var e=function(s,a){var c;return s.config.npm.levels[a]!=null?c="npm":s.config.syslog.levels[a]!=null?c="syslog":c="unknown",c},r=function(s){n6e(a,s);function a(c,u){var l=s.call(this,u)||this;return l.winston=c,l}return a.prototype.log=function(c,u){var l=c.message,d=c.level,p=c.meta,f=i6e(c,["message","level","meta"]);d=typeof Symbol.for=="function"?c[Symbol.for("level")]:d,l=c instanceof Error?c:l;var m=e(this.winston,d);p=p||{};for(var h in f)f.hasOwnProperty(h)&&(p[h]=f[h]);MP.channel.publish("winston",{message:l,level:d,levelKind:m,meta:p}),u()},a}(t.Transport);function n(){var s=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(s=arguments[0].levels);var a;for(var c in s)s.hasOwnProperty(c)&&(a=a===void 0||s[c]>s[a]?c:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(a=arguments[0].levels);var c;for(var u in a)a.hasOwnProperty(u)&&(c=c===void 0||a[u]>a[c]?u:c);var l=i.apply(this,arguments);l.add(new r(t,{level:c}));var d=l.configure;return l.configure=function(){d.apply(this,arguments),n.apply(this,arguments)},l};var o=t.configure;return t.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};aa.winston3={versionSpecifier:"3.x",patch:s6e};aa.winston2={versionSpecifier:"2.x",patch:o6e};function a6e(){MP.channel.registerMonkeyPatch("winston",aa.winston2),MP.channel.registerMonkeyPatch("winston",aa.winston3)}aa.enable=a6e});var Zae=k(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.enable=rn.tedious=rn.pgPool=rn.pg=rn.winston=rn.redis=rn.mysql=rn.mongodb=rn.mongodbCore=rn.console=rn.bunyan=rn.azuresdk=void 0;var jae=Iae();rn.azuresdk=jae;var Gae=Rae();rn.bunyan=Gae;var Vae=Pae();rn.console=Vae;var zae=kae();rn.mongodbCore=zae;var $ae=Dae();rn.mongodb=$ae;var Wae=Lae();rn.mysql=Wae;var Yae=Mae();rn.pgPool=Yae;var Kae=Uae();rn.pg=Kae;var Qae=Bae();rn.redis=Qae;var Xae=qae();rn.tedious=Xae;var Jae=Hae();rn.winston=Jae;function c6e(){Gae.enable(),Vae.enable(),zae.enable(),$ae.enable(),Wae.enable(),Kae.enable(),Yae.enable(),Qae.enable(),Jae.enable(),jae.enable(),Xae.enable()}rn.enable=c6e});var BP=k(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.registerContextPreservation=tm.IsInitialized=void 0;var Q7=gn(),tce=NA();tm.IsInitialized=!tce.JsonConfig.getInstance().noDiagnosticChannel;var X7="DiagnosticChannel";if(tm.IsInitialized){yu=Zae(),ece=tce.JsonConfig.getInstance().noPatchModules,FP=ece.split(","),J7={bunyan:yu.bunyan,console:yu.console,mongodb:yu.mongodb,mongodbCore:yu.mongodbCore,mysql:yu.mysql,redis:yu.redis,pg:yu.pg,pgPool:yu.pgPool,winston:yu.winston,azuresdk:yu.azuresdk};for(UP in J7)FP.indexOf(UP)===-1&&(J7[UP].enable(),Q7.info(X7,"Subscribed to "+UP+" events"));FP.length>0&&Q7.info(X7,"Some modules will not be patched",FP)}else Q7.info(X7,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var yu,ece,FP,J7,UP;function u6e(t){if(tm.IsInitialized){var e=Jn();e.channel.addContextPreservation(t)}}tm.registerContextPreservation=u6e});var Vb=k((cxt,rce)=>{"use strict";rce.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var No=k((tU,nce)=>{"use strict";var nm=tU&&tU.__assign||function(){return nm=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nm.apply(this,arguments)},l6e=require("http"),Z7=require("https"),eU=require("url"),rm=require("constants"),C0=gn(),zb=Vb(),d6e=NA(),p6e=function(){function t(){t._addCloseHandler()}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,c){return String.fromCharCode(a>>c&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return Object.prototype.toString.call(e)==="[object Error]"},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){C0.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",o=e[n],s=typeof o;if(t.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){C0.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(o)?o:t.extractObject(o);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(c){i=o.constructor.name.toString()+" (Error: "+c.message+")",C0.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(o.test(new eU.URL(r).hostname))return!1}catch{}}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[zb.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},t.makeRequest=function(e,r,n,i,o,s){o===void 0&&(o=!0),s===void 0&&(s=!0),r&&r.indexOf("//")===0&&(r="https:"+r);var a=new eU.URL(r),c=nm(nm({},n),{host:a.hostname,port:a.port,path:a.pathname}),u=void 0;if(o&&(a.protocol==="https:"&&(u=e.proxyHttpsUrl||void 0),a.protocol==="http:"&&(u=e.proxyHttpUrl||void 0),u)){u.indexOf("//")===0&&(u="http:"+u);try{var l=new eU.URL(u);l.protocol==="https:"?(C0.info("Proxies that use HTTPS are not supported"),u=void 0):c=nm(nm({},c),{host:l.hostname,port:l.port||"80",path:r,headers:nm(nm({},c.headers),{Host:a.hostname})})}catch{C0.warn("Wrong proxy URL provided")}}var d=a.protocol==="https:"&&!u;return s&&(d&&e.httpsAgent!==void 0?c.agent=e.httpsAgent:!d&&e.httpAgent!==void 0?c.agent=e.httpAgent:d&&(c.agent=t._useKeepAlive?t.keepAliveAgent:t.tlsRestrictedAgent)),d?Z7.request(c,i):l6e.request(c,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){C0.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(zb.requestContextHeader,zb.requestContextSourceKey+"="+e.config.correlationId)},t.dumpObj=function(e){if(e)try{var r=Object.prototype.toString.call(e),n="";return r==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":n=this.stringify(e),r+n}catch{return e.toString()}},t.stringify=function(e){try{return JSON.stringify(e)}catch(r){C0.warn("Failed to serialize payload",r,e)}},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),o=zb.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(zb.requestContextHeader,n+","+zb.requestContextSourceKey+"="+e.config.correlationId)},t._addCloseHandler=function(){t._listenerAttached||(process.on("exit",function(){t.isNodeExit=!0,t._useKeepAlive=!1}),t._listenerAttached=!0)},t._useKeepAlive=!d6e.JsonConfig.getInstance().noHttpAgentKeepAlive,t._listenerAttached=!1,t.MAX_PROPERTY_LENGTH=8192,t.keepAliveAgent=new Z7.Agent({keepAlive:!0,maxSockets:25,secureOptions:rm.SSL_OP_NO_SSLv2|rm.SSL_OP_NO_SSLv3|rm.SSL_OP_NO_TLSv1|rm.SSL_OP_NO_TLSv1_1}),t.tlsRestrictedAgent=new Z7.Agent({secureOptions:rm.SSL_OP_NO_SSLv2|rm.SSL_OP_NO_SSLv3|rm.SSL_OP_NO_TLSv1|rm.SSL_OP_NO_TLSv1_1}),t.isNodeExit=!1,t}();nce.exports=p6e});var I0=k((uxt,ice)=>{"use strict";var rU=No(),f6e=function(){function t(){}return t.queryCorrelationId=function(e,r){},t.cancelCorrelationIdQuery=function(e,r){},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+rU.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return t.generateRootId();for(r=rU.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.HTTP_TIMEOUT=2500,t.requestIdMaxLength=1024,t.currentRootId=rU.randomu32(),t}();ice.exports=f6e});var qP=k((lxt,oce)=>{"use strict";var Lo=No(),m6e=I0(),h6e=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=Lo.w3cTraceId(),this.spanId=Lo.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Lo.w3cTraceId(),this.spanId=Lo.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=Lo.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Lo.w3cTraceId(),this.spanId=Lo.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=Lo.w3cTraceId(),this.spanId=Lo.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=Lo.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=Lo.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=Lo.w3cTraceId().substr(0,16),this.traceId=Lo.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=m6e.getRootId(r);t.isValidTraceId(o)||(this.legacyRootId=o,o=Lo.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=Lo.w3cTraceId(),this.spanId=Lo.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.formatOpenTelemetryTraceFlags=function(e){var r="0"+e.toString(16);return r.substring(r.length-2)},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=Lo.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();oce.exports=h6e});var nU=k((dxt,sce)=>{"use strict";var g6e=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=!!n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),s=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return o&&s}else if(r.length==1)return!!e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],c=a.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!t.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},t.strict=!0,t}();sce.exports=g6e});var up=k((pxt,ace)=>{"use strict";var v6e=function(){function t(){}return t}();ace.exports=v6e});var uce=k((iU,cce)=>{"use strict";var y6e=iU&&iU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b6e=up(),_6e=function(t){y6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(b6e);cce.exports=_6e});var oU=k((fxt,lce)=>{"use strict";var x6e=function(){function t(){}return t}();lce.exports=x6e});var pce=k((mxt,dce)=>{"use strict";var E6e=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();dce.exports=E6e});var mce=k((sU,fce)=>{"use strict";var S6e=sU&&sU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T6e=oU(),C6e=function(t){S6e(e,t);function e(){return t.call(this)||this}return e}(T6e);fce.exports=C6e});var cU=k((hxt,hce)=>{"use strict";var aU;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(aU||(aU={}));hce.exports=aU});var vce=k((gxt,gce)=>{"use strict";var I6e=cU(),w6e=function(){function t(){this.kind=I6e.Measurement}return t}();gce.exports=w6e});var bce=k((vxt,yce)=>{"use strict";var R6e=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();yce.exports=R6e});var lU=k((uU,_ce)=>{"use strict";var A6e=uU&&uU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P6e=up(),k6e=function(t){A6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(P6e);_ce.exports=k6e});var Ece=k((dU,xce)=>{"use strict";var D6e=dU&&dU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),N6e=up(),L6e=function(t){D6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(N6e);xce.exports=L6e});var Tce=k((yxt,Sce)=>{"use strict";var O6e=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();Sce.exports=O6e});var Ice=k((pU,Cce)=>{"use strict";var M6e=pU&&pU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F6e=up(),U6e=function(t){M6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(F6e);Cce.exports=U6e});var Rce=k((fU,wce)=>{"use strict";var B6e=fU&&fU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q6e=up(),H6e=function(t){B6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(q6e);wce.exports=H6e});var Pce=k((mU,Ace)=>{"use strict";var j6e=mU&&mU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G6e=lU(),V6e=function(t){j6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(G6e);Ace.exports=V6e});var Dce=k((hU,kce)=>{"use strict";var z6e=hU&&hU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$6e=up(),W6e=function(t){z6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}($6e);kce.exports=W6e});var Lce=k((gU,Nce)=>{"use strict";var Y6e=gU&&gU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K6e=up(),Q6e=function(t){Y6e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(K6e);Nce.exports=Q6e});var Mce=k((bxt,Oce)=>{"use strict";var vU;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(vU||(vU={}));Oce.exports=vU});var Uce=k((_xt,Fce)=>{"use strict";var X6e=function(){function t(){}return t}();Fce.exports=X6e});var yU=k(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.AvailabilityData=uce();Ii.Base=oU();Ii.ContextTagKeys=pce();Ii.Data=mce();Ii.DataPoint=vce();Ii.DataPointType=cU();Ii.Domain=up();Ii.Envelope=bce();Ii.EventData=lU();Ii.ExceptionData=Ece();Ii.ExceptionDetails=Tce();Ii.MessageData=Ice();Ii.MetricData=Rce();Ii.PageViewData=Pce();Ii.RemoteDependencyData=Dce();Ii.RequestData=Lce();Ii.SeverityLevel=Mce();Ii.StackFrame=Uce()});var Bce=k($b=>{"use strict";Object.defineProperty($b,"__esModule",{value:!0});$b.domainSupportsProperties=$b.RemoteDependencyDataConstants=void 0;var w0=yU(),J6e=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();$b.RemoteDependencyDataConstants=J6e;function Z6e(t){return"properties"in t||t instanceof w0.EventData||t instanceof w0.ExceptionData||t instanceof w0.MessageData||t instanceof w0.MetricData||t instanceof w0.PageViewData||t instanceof w0.RemoteDependencyData||t instanceof w0.RequestData}$b.domainSupportsProperties=Z6e});var Hce=k(qce=>{"use strict";Object.defineProperty(qce,"__esModule",{value:!0})});var Gce=k(jce=>{"use strict";Object.defineProperty(jce,"__esModule",{value:!0})});var zce=k(Vce=>{"use strict";Object.defineProperty(Vce,"__esModule",{value:!0})});var Wce=k($ce=>{"use strict";Object.defineProperty($ce,"__esModule",{value:!0})});var Kce=k(Yce=>{"use strict";Object.defineProperty(Yce,"__esModule",{value:!0})});var Xce=k(Qce=>{"use strict";Object.defineProperty(Qce,"__esModule",{value:!0})});var Zce=k(Jce=>{"use strict";Object.defineProperty(Jce,"__esModule",{value:!0})});var tue=k(eue=>{"use strict";Object.defineProperty(eue,"__esModule",{value:!0})});var nue=k(rue=>{"use strict";Object.defineProperty(rue,"__esModule",{value:!0})});var oue=k(iue=>{"use strict";Object.defineProperty(iue,"__esModule",{value:!0})});var aue=k(sue=>{"use strict";Object.defineProperty(sue,"__esModule",{value:!0})});var uue=k(cue=>{"use strict";Object.defineProperty(cue,"__esModule",{value:!0})});var lue=k(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.TelemetryType=bu.TelemetryTypeString=bu.baseTypeToTelemetryType=bu.telemetryTypeToBaseType=void 0;function e8e(t){switch(t){case Oo.Event:return"EventData";case Oo.Exception:return"ExceptionData";case Oo.Trace:return"MessageData";case Oo.Metric:return"MetricData";case Oo.Request:return"RequestData";case Oo.Dependency:return"RemoteDependencyData";case Oo.Availability:return"AvailabilityData";case Oo.PageView:return"PageViewData"}}bu.telemetryTypeToBaseType=e8e;function t8e(t){switch(t){case"EventData":return Oo.Event;case"ExceptionData":return Oo.Exception;case"MessageData":return Oo.Trace;case"MetricData":return Oo.Metric;case"RequestData":return Oo.Request;case"RemoteDependencyData":return Oo.Dependency;case"AvailabilityData":return Oo.Availability;case"PageViewData":return Oo.PageView}}bu.baseTypeToTelemetryType=t8e;bu.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var Oo;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(Oo=bu.TelemetryType||(bu.TelemetryType={}))});var due=k(Ki=>{"use strict";var r8e=Ki&&Ki.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ba=Ki&&Ki.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&r8e(e,t,r)};Object.defineProperty(Ki,"__esModule",{value:!0});Ba(Hce(),Ki);Ba(Gce(),Ki);Ba(zce(),Ki);Ba(Wce(),Ki);Ba(Kce(),Ki);Ba(Xce(),Ki);Ba(Zce(),Ki);Ba(tue(),Ki);Ba(nue(),Ki);Ba(oue(),Ki);Ba(aue(),Ki);Ba(uue(),Ki);Ba(lue(),Ki)});var fue=k(pue=>{"use strict";Object.defineProperty(pue,"__esModule",{value:!0})});var hue=k(mue=>{"use strict";Object.defineProperty(mue,"__esModule",{value:!0})});var vue=k(gue=>{"use strict";Object.defineProperty(gue,"__esModule",{value:!0})});var bue=k(yue=>{"use strict";Object.defineProperty(yue,"__esModule",{value:!0})});var xue=k(_ue=>{"use strict";Object.defineProperty(_ue,"__esModule",{value:!0})});var Sue=k(Eue=>{"use strict";Object.defineProperty(Eue,"__esModule",{value:!0})});var Cue=k(Tue=>{"use strict";Object.defineProperty(Tue,"__esModule",{value:!0})});var wue=k(Iue=>{"use strict";Object.defineProperty(Iue,"__esModule",{value:!0})});var Rue=k(ca=>{"use strict";var n8e=ca&&ca.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),im=ca&&ca.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&n8e(e,t,r)};Object.defineProperty(ca,"__esModule",{value:!0});im(fue(),ca);im(hue(),ca);im(vue(),ca);im(bue(),ca);im(xue(),ca);im(Sue(),ca);im(Cue(),ca);im(wue(),ca)});var cs=k(yl=>{"use strict";var i8e=yl&&yl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HP=yl&&yl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&i8e(e,t,r)};Object.defineProperty(yl,"__esModule",{value:!0});HP(Bce(),yl);HP(yU(),yl);HP(due(),yl);HP(Rue(),yl)});var bU=k((Wxt,Aue)=>{"use strict";var o8e=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();Aue.exports=o8e});var Mn=k(De=>{"use strict";var _u;Object.defineProperty(De,"__esModule",{value:!0});De.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=De.WEB_INSTRUMENTATION_DEFAULT_SOURCE=De.TIME_SINCE_ENQUEUED=De.ENQUEUED_TIME=De.MessageBusDestination=De.MicrosoftEventHub=De.AzNamespace=De.HttpRequestCookieNames=De.StatsbeatNetworkCategory=De.StatsbeatFeatureType=De.StatsbeatInstrumentation=De.StatsbeatFeature=De.StatsbeatCounter=De.StatsbeatAttach=De.StatsbeatResourceProvider=De.StatsbeatTelemetryName=De.HeartBeatMetricName=De.DependencyTypeName=De.TelemetryTypeStringToQuickPulseDocumentType=De.TelemetryTypeStringToQuickPulseType=De.QuickPulseType=De.QuickPulseDocumentType=De.PerformanceToQuickPulseCounter=De.MetricId=De.PerformanceCounter=De.QuickPulseCounter=De.DEFAULT_LIVEMETRICS_HOST=De.DEFAULT_LIVEMETRICS_ENDPOINT=De.DEFAULT_BREEZE_ENDPOINT=De.APPLICATION_INSIGHTS_SDK_VERSION=void 0;De.APPLICATION_INSIGHTS_SDK_VERSION="2.9.1";De.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";De.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";De.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var us;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(us=De.QuickPulseCounter||(De.QuickPulseCounter={}));var jP;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(jP=De.PerformanceCounter||(De.PerformanceCounter={}));var s8e;(function(t){t.REQUESTS_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count"})(s8e=De.MetricId||(De.MetricId={}));De.PerformanceToQuickPulseCounter=(_u={},_u[jP.PROCESSOR_TIME]=us.PROCESSOR_TIME,_u[jP.REQUEST_RATE]=us.REQUEST_RATE,_u[jP.REQUEST_DURATION]=us.REQUEST_DURATION,_u[us.COMMITTED_BYTES]=us.COMMITTED_BYTES,_u[us.REQUEST_FAILURE_RATE]=us.REQUEST_FAILURE_RATE,_u[us.DEPENDENCY_RATE]=us.DEPENDENCY_RATE,_u[us.DEPENDENCY_FAILURE_RATE]=us.DEPENDENCY_FAILURE_RATE,_u[us.DEPENDENCY_DURATION]=us.DEPENDENCY_DURATION,_u[us.EXCEPTION_RATE]=us.EXCEPTION_RATE,_u);De.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};De.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};De.TelemetryTypeStringToQuickPulseType={EventData:De.QuickPulseType.Event,ExceptionData:De.QuickPulseType.Exception,MessageData:De.QuickPulseType.Trace,MetricData:De.QuickPulseType.Metric,RequestData:De.QuickPulseType.Request,RemoteDependencyData:De.QuickPulseType.Dependency,AvailabilityData:De.QuickPulseType.Availability,PageViewData:De.QuickPulseType.PageView};De.TelemetryTypeStringToQuickPulseDocumentType={EventData:De.QuickPulseDocumentType.Event,ExceptionData:De.QuickPulseDocumentType.Exception,MessageData:De.QuickPulseDocumentType.Trace,MetricData:De.QuickPulseDocumentType.Metric,RequestData:De.QuickPulseDocumentType.Request,RemoteDependencyData:De.QuickPulseDocumentType.Dependency,AvailabilityData:De.QuickPulseDocumentType.Availability,PageViewData:De.QuickPulseDocumentType.PageView};De.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};De.HeartBeatMetricName="HeartbeatState";De.StatsbeatTelemetryName="Statsbeat";De.StatsbeatResourceProvider={appsvc:"appsvc",aks:"aks",functions:"functions",vm:"vm",unknown:"unknown"};De.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};De.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var a8e;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.WEB_SNIPPET=4]="WEB_SNIPPET"})(a8e=De.StatsbeatFeature||(De.StatsbeatFeature={}));var c8e;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CONSOLE=128]="CONSOLE"})(c8e=De.StatsbeatInstrumentation||(De.StatsbeatInstrumentation={}));var u8e;(function(t){t[t.Feature=0]="Feature",t[t.Instrumentation=1]="Instrumentation"})(u8e=De.StatsbeatFeatureType||(De.StatsbeatFeatureType={}));var l8e;(function(t){t[t.Breeze=0]="Breeze",t[t.Quickpulse=1]="Quickpulse"})(l8e=De.StatsbeatNetworkCategory||(De.StatsbeatNetworkCategory={}));var d8e;(function(t){t.SESSION="ai_session",t.USER="ai_user",t.AUTH_USER="ai_authUser"})(d8e=De.HttpRequestCookieNames||(De.HttpRequestCookieNames={}));De.AzNamespace="az.namespace";De.MicrosoftEventHub="Microsoft.EventHub";De.MessageBusDestination="message_bus.destination";De.ENQUEUED_TIME="enqueuedTime";De.TIME_SINCE_ENQUEUED="timeSinceEnqueued";De.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";De.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var SU=k((EU,Pue)=>{"use strict";var p8e=EU&&EU.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GP=require("url"),f8e=cs(),_U=No(),qa=Vb(),m8e=bU(),om=I0(),h8e=nU(),xU=qP(),g8e=gn(),VP=Mn(),v8e=function(t){p8e(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n=this.method;try{n+=" "+new GP.URL(this.url).pathname}catch{}var i={id:this.requestId,name:n,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?i.time=r.time:this.startTime&&(i.time=new Date(this.startTime)),r){for(var o in r)i[o]||(i[o]=r[o]);if(r.properties)for(var o in r.properties)i.properties[o]=r.properties[o]}return i},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId(VP.HttpRequestCookieNames.SESSION),n[e.keys.userId]=r[e.keys.userId]||this._getId(VP.HttpRequestCookieNames.USER),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId(VP.HttpRequestCookieNames.AUTH_USER),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){if(r[e.keys.operationName])return r[e.keys.operationName];var n="";try{n=new GP.URL(this.url).pathname}catch{}var i=this.method;return n&&(i+=" "+n),i},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+r.headers.host+"/",s="",a="";try{var c=new GP.URL(r.url,o);s=c.pathname,a=c.search}catch{}var u=GP.format({protocol:i,host:r.headers.host,pathname:s,search:a});return u},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"";if(r===VP.HttpRequestCookieNames.AUTH_USER)try{n=decodeURI(n)}catch(o){n="",g8e.warn("Could not decode the auth cookie with error: ",_U.dumpObj(o))}var i=e.parseId(_U.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=_U.getCorrelationContextTarget(r,qa.requestContextSourceKey),r.headers){var i=r.headers[qa.traceStateHeader]?r.headers[qa.traceStateHeader].toString():null,o=r.headers[qa.traceparentHeader]?r.headers[qa.traceparentHeader].toString():null,s=r.headers[qa.requestIdHeader]?r.headers[qa.requestIdHeader].toString():null,a=r.headers[qa.parentIdHeader]?r.headers[qa.parentIdHeader].toString():null,c=r.headers[qa.rootIdHeader]?r.headers[qa.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[qa.correlationContextHeader]?r.headers[qa.correlationContextHeader].toString():null,om.w3cEnabled&&(o||i)?(this.traceparent=new xU(o?o.toString():null),this.tracestate=o&&i&&new h8e(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?om.w3cEnabled?(this.traceparent=new xU(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=om.generateRequestId(this.parentId),this.operationId=om.getRootId(this.requestId)):om.w3cEnabled?(this.traceparent=new xU,this.traceparent.parentId=a,this.traceparent.legacyRootId=c||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=om.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=om.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=om.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new f8e.ContextTagKeys,e}(m8e);Pue.exports=v8e});var Wue=k((wt,$ue)=>{wt=$ue.exports=ar;var Br;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Br=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Br=function(){};wt.SEMVER_SPEC_VERSION="2.0.0";var wT=256,zP=Number.MAX_SAFE_INTEGER||9007199254740991,TU=16,y8e=wT-6,RT=wt.re=[],nn=wt.safeRe=[],Ee=wt.src=[],rr=0,AU="[a-zA-Z0-9-]",CU=[["\\s",1],["\\d",wT],[AU,y8e]];function XP(t){for(var e=0;e<CU.length;e++){var r=CU[e][0],n=CU[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Wb=rr++;Ee[Wb]="0|[1-9]\\d*";var Yb=rr++;Ee[Yb]="\\d+";var PU=rr++;Ee[PU]="\\d*[a-zA-Z-]"+AU+"*";var Due=rr++;Ee[Due]="("+Ee[Wb]+")\\.("+Ee[Wb]+")\\.("+Ee[Wb]+")";var Nue=rr++;Ee[Nue]="("+Ee[Yb]+")\\.("+Ee[Yb]+")\\.("+Ee[Yb]+")";var IU=rr++;Ee[IU]="(?:"+Ee[Wb]+"|"+Ee[PU]+")";var wU=rr++;Ee[wU]="(?:"+Ee[Yb]+"|"+Ee[PU]+")";var kU=rr++;Ee[kU]="(?:-("+Ee[IU]+"(?:\\."+Ee[IU]+")*))";var DU=rr++;Ee[DU]="(?:-?("+Ee[wU]+"(?:\\."+Ee[wU]+")*))";var RU=rr++;Ee[RU]=AU+"+";var PT=rr++;Ee[PT]="(?:\\+("+Ee[RU]+"(?:\\."+Ee[RU]+")*))";var NU=rr++,Lue="v?"+Ee[Due]+Ee[kU]+"?"+Ee[PT]+"?";Ee[NU]="^"+Lue+"$";var LU="[v=\\s]*"+Ee[Nue]+Ee[DU]+"?"+Ee[PT]+"?",OU=rr++;Ee[OU]="^"+LU+"$";var Zb=rr++;Ee[Zb]="((?:<|>)?=?)";var $P=rr++;Ee[$P]=Ee[Yb]+"|x|X|\\*";var WP=rr++;Ee[WP]=Ee[Wb]+"|x|X|\\*";var R0=rr++;Ee[R0]="[v=\\s]*("+Ee[WP]+")(?:\\.("+Ee[WP]+")(?:\\.("+Ee[WP]+")(?:"+Ee[kU]+")?"+Ee[PT]+"?)?)?";var Qb=rr++;Ee[Qb]="[v=\\s]*("+Ee[$P]+")(?:\\.("+Ee[$P]+")(?:\\.("+Ee[$P]+")(?:"+Ee[DU]+")?"+Ee[PT]+"?)?)?";var Oue=rr++;Ee[Oue]="^"+Ee[Zb]+"\\s*"+Ee[R0]+"$";var Mue=rr++;Ee[Mue]="^"+Ee[Zb]+"\\s*"+Ee[Qb]+"$";var Fue=rr++;Ee[Fue]="(?:^|[^\\d])(\\d{1,"+TU+"})(?:\\.(\\d{1,"+TU+"}))?(?:\\.(\\d{1,"+TU+"}))?(?:$|[^\\d])";var JP=rr++;Ee[JP]="(?:~>?)";var Xb=rr++;Ee[Xb]="(\\s*)"+Ee[JP]+"\\s+";RT[Xb]=new RegExp(Ee[Xb],"g");nn[Xb]=new RegExp(XP(Ee[Xb]),"g");var b8e="$1~",Uue=rr++;Ee[Uue]="^"+Ee[JP]+Ee[R0]+"$";var Bue=rr++;Ee[Bue]="^"+Ee[JP]+Ee[Qb]+"$";var ZP=rr++;Ee[ZP]="(?:\\^)";var Jb=rr++;Ee[Jb]="(\\s*)"+Ee[ZP]+"\\s+";RT[Jb]=new RegExp(Ee[Jb],"g");nn[Jb]=new RegExp(XP(Ee[Jb]),"g");var _8e="$1^",que=rr++;Ee[que]="^"+Ee[ZP]+Ee[R0]+"$";var Hue=rr++;Ee[Hue]="^"+Ee[ZP]+Ee[Qb]+"$";var MU=rr++;Ee[MU]="^"+Ee[Zb]+"\\s*("+LU+")$|^$";var FU=rr++;Ee[FU]="^"+Ee[Zb]+"\\s*("+Lue+")$|^$";var A0=rr++;Ee[A0]="(\\s*)"+Ee[Zb]+"\\s*("+LU+"|"+Ee[R0]+")";RT[A0]=new RegExp(Ee[A0],"g");nn[A0]=new RegExp(XP(Ee[A0]),"g");var x8e="$1$2$3",jue=rr++;Ee[jue]="^\\s*("+Ee[R0]+")\\s+-\\s+("+Ee[R0]+")\\s*$";var Gue=rr++;Ee[Gue]="^\\s*("+Ee[Qb]+")\\s+-\\s+("+Ee[Qb]+")\\s*$";var Vue=rr++;Ee[Vue]="(<|>)?=?\\s*\\*";for(bl=0;bl<rr;bl++)Br(bl,Ee[bl]),RT[bl]||(RT[bl]=new RegExp(Ee[bl]),nn[bl]=new RegExp(XP(Ee[bl])));var bl;wt.parse=P0;function P0(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ar)return t;if(typeof t!="string"||t.length>wT)return null;var r=e.loose?nn[OU]:nn[NU];if(!r.test(t))return null;try{return new ar(t,e)}catch{return null}}wt.valid=E8e;function E8e(t,e){var r=P0(t,e);return r?r.version:null}wt.clean=S8e;function S8e(t,e){var r=P0(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}wt.SemVer=ar;function ar(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ar){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>wT)throw new TypeError("version is longer than "+wT+" characters");if(!(this instanceof ar))return new ar(t,e);Br("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?nn[OU]:nn[NU]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>zP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>zP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>zP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<zP)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}ar.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};ar.prototype.toString=function(){return this.version};ar.prototype.compare=function(t){return Br("SemVer.compare",this.version,this.options,t),t instanceof ar||(t=new ar(t,this.options)),this.compareMain(t)||this.comparePre(t)};ar.prototype.compareMain=function(t){return t instanceof ar||(t=new ar(t,this.options)),Kb(this.major,t.major)||Kb(this.minor,t.minor)||Kb(this.patch,t.patch)};ar.prototype.comparePre=function(t){if(t instanceof ar||(t=new ar(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Br("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Kb(r,n)}while(++e)};ar.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};wt.inc=T8e;function T8e(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new ar(t,r).inc(e,n).version}catch{return null}}wt.diff=C8e;function C8e(t,e){if(UU(t,e))return null;var r=P0(t),n=P0(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}wt.compareIdentifiers=Kb;var kue=/^[0-9]+$/;function Kb(t,e){var r=kue.test(t),n=kue.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}wt.rcompareIdentifiers=I8e;function I8e(t,e){return Kb(e,t)}wt.major=w8e;function w8e(t,e){return new ar(t,e).major}wt.minor=R8e;function R8e(t,e){return new ar(t,e).minor}wt.patch=A8e;function A8e(t,e){return new ar(t,e).patch}wt.compare=lp;function lp(t,e,r){return new ar(t,r).compare(new ar(e,r))}wt.compareLoose=P8e;function P8e(t,e){return lp(t,e,!0)}wt.rcompare=k8e;function k8e(t,e,r){return lp(e,t,r)}wt.sort=D8e;function D8e(t,e){return t.sort(function(r,n){return wt.compare(r,n,e)})}wt.rsort=N8e;function N8e(t,e){return t.sort(function(r,n){return wt.rcompare(r,n,e)})}wt.gt=AT;function AT(t,e,r){return lp(t,e,r)>0}wt.lt=YP;function YP(t,e,r){return lp(t,e,r)<0}wt.eq=UU;function UU(t,e,r){return lp(t,e,r)===0}wt.neq=zue;function zue(t,e,r){return lp(t,e,r)!==0}wt.gte=BU;function BU(t,e,r){return lp(t,e,r)>=0}wt.lte=qU;function qU(t,e,r){return lp(t,e,r)<=0}wt.cmp=KP;function KP(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return UU(t,r,n);case"!=":return zue(t,r,n);case">":return AT(t,r,n);case">=":return BU(t,r,n);case"<":return YP(t,r,n);case"<=":return qU(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}wt.Comparator=gc;function gc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof gc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof gc))return new gc(t,e);t=t.trim().split(/\s+/).join(" "),Br("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===kT?this.value="":this.value=this.operator+this.semver.version,Br("comp",this)}var kT={};gc.prototype.parse=function(t){var e=this.options.loose?nn[MU]:nn[FU],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new ar(r[2],this.options.loose):this.semver=kT};gc.prototype.toString=function(){return this.value};gc.prototype.test=function(t){return Br("Comparator.test",t,this.options.loose),this.semver===kT?!0:(typeof t=="string"&&(t=new ar(t,this.options)),KP(t,this.operator,this.semver,this.options))};gc.prototype.intersects=function(t,e){if(!(t instanceof gc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Fn(t.value,e),QP(this.value,r,e);if(t.operator==="")return r=new Fn(this.value,e),QP(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=KP(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=KP(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};wt.Range=Fn;function Fn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Fn)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Fn(t.raw,e);if(t instanceof gc)return new Fn(t.value,e);if(!(this instanceof Fn))return new Fn(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Fn.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Fn.prototype.toString=function(){return this.range};Fn.prototype.parseRange=function(t){var e=this.options.loose,r=e?nn[Gue]:nn[jue];t=t.replace(r,G8e),Br("hyphen replace",t),t=t.replace(nn[A0],x8e),Br("comparator trim",t,nn[A0]),t=t.replace(nn[Xb],b8e),t=t.replace(nn[Jb],_8e);var n=e?nn[MU]:nn[FU],i=t.split(" ").map(function(o){return O8e(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new gc(o,this.options)},this),i};Fn.prototype.intersects=function(t,e){if(!(t instanceof Fn))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};wt.toComparators=L8e;function L8e(t,e){return new Fn(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function O8e(t,e){return Br("comp",t,e),t=U8e(t,e),Br("caret",t),t=M8e(t,e),Br("tildes",t),t=q8e(t,e),Br("xrange",t),t=j8e(t,e),Br("stars",t),t}function Ls(t){return!t||t.toLowerCase()==="x"||t==="*"}function M8e(t,e){return t.trim().split(/\s+/).map(function(r){return F8e(r,e)}).join(" ")}function F8e(t,e){var r=e.loose?nn[Bue]:nn[Uue];return t.replace(r,function(n,i,o,s,a){Br("tilde",t,n,i,o,s,a);var c;return Ls(i)?c="":Ls(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Ls(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Br("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Br("tilde return",c),c})}function U8e(t,e){return t.trim().split(/\s+/).map(function(r){return B8e(r,e)}).join(" ")}function B8e(t,e){Br("caret",t,e);var r=e.loose?nn[Hue]:nn[que];return t.replace(r,function(n,i,o,s,a){Br("caret",t,n,i,o,s,a);var c;return Ls(i)?c="":Ls(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Ls(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Br("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Br("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Br("caret return",c),c})}function q8e(t,e){return Br("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return H8e(r,e)}).join(" ")}function H8e(t,e){t=t.trim();var r=e.loose?nn[Mue]:nn[Oue];return t.replace(r,function(n,i,o,s,a,c){Br("xRange",t,n,i,o,s,a,c);var u=Ls(o),l=u||Ls(s),d=l||Ls(a),p=d;return i==="="&&p&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Br("xRange return",n),n})}function j8e(t,e){return Br("replaceStars",t,e),t.trim().replace(nn[Vue],"")}function G8e(t,e,r,n,i,o,s,a,c,u,l,d,p){return Ls(r)?e="":Ls(n)?e=">="+r+".0.0":Ls(i)?e=">="+r+"."+n+".0":e=">="+e,Ls(c)?a="":Ls(u)?a="<"+(+c+1)+".0.0":Ls(l)?a="<"+c+"."+(+u+1)+".0":d?a="<="+c+"."+u+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}Fn.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new ar(t,this.options));for(var e=0;e<this.set.length;e++)if(V8e(this.set[e],t,this.options))return!0;return!1};function V8e(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Br(t[n].semver),t[n].semver!==kT&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}wt.satisfies=QP;function QP(t,e,r){try{e=new Fn(e,r)}catch{return!1}return e.test(t)}wt.maxSatisfying=z8e;function z8e(t,e,r){var n=null,i=null;try{var o=new Fn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new ar(n,r))}),n}wt.minSatisfying=$8e;function $8e(t,e,r){var n=null,i=null;try{var o=new Fn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new ar(n,r))}),n}wt.minVersion=W8e;function W8e(t,e){t=new Fn(t,e);var r=new ar("0.0.0");if(t.test(r)||(r=new ar("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new ar(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||AT(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}wt.validRange=Y8e;function Y8e(t,e){try{return new Fn(t,e).range||"*"}catch{return null}}wt.ltr=K8e;function K8e(t,e,r){return HU(t,e,"<",r)}wt.gtr=Q8e;function Q8e(t,e,r){return HU(t,e,">",r)}wt.outside=HU;function HU(t,e,r,n){t=new ar(t,n),e=new Fn(e,n);var i,o,s,a,c;switch(r){case">":i=AT,o=qU,s=YP,a=">",c=">=";break;case"<":i=YP,o=BU,s=AT,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(QP(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],d=null,p=null;if(l.forEach(function(f){f.semver===kT&&(f=new gc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0}wt.prerelease=X8e;function X8e(t,e){var r=P0(t,e);return r&&r.prerelease.length?r.prerelease:null}wt.intersects=J8e;function J8e(t,e,r){return t=new Fn(t,r),e=new Fn(e,r),t.intersects(e)}wt.coerce=Z8e;function Z8e(t){if(t instanceof ar)return t;if(typeof t!="string")return null;var e=t.match(nn[Fue]);return e==null?null:P0(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var ek=k((Kxt,Que)=>{"use strict";function jU(t){return typeof t=="function"}var Os=console.error.bind(console);function DT(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function NT(t){t&&t.logger&&(jU(t.logger)?Os=t.logger:Os("new logger isn't a function, not replacing"))}function Yue(t,e,r){if(!t||!t[e]){Os("no original function "+e+" to wrap");return}if(!r){Os("no wrapper function"),Os(new Error().stack);return}if(!jU(t[e])||!jU(r)){Os("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return DT(i,"__original",n),DT(i,"__unwrap",function(){t[e]===i&&DT(t,e,n)}),DT(i,"__wrapped",!0),DT(t,e,i),i}function eMe(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Os("must provide one or more modules to patch"),Os(new Error().stack);return}if(!(e&&Array.isArray(e))){Os("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){Yue(n,i,r)})})}function Kue(t,e){if(!t||!t[e]){Os("no function to unwrap."),Os(new Error().stack);return}if(!t[e].__unwrap)Os("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function tMe(t,e){if(t)Array.isArray(t)||(t=[t]);else{Os("must provide one or more modules to patch"),Os(new Error().stack);return}if(!(e&&Array.isArray(e))){Os("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){Kue(r,n)})})}NT.wrap=Yue;NT.massWrap=eMe;NT.unwrap=Kue;NT.massUnwrap=tMe;Que.exports=NT});var nk=k((Qxt,ele)=>{"use strict";var Jue=ek(),e_=Jue.wrap,tk=Jue.unwrap,dp="wrap@before";function rk(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function rMe(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],o=t[dp];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Zue(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function nMe(t,e,r){var n=Zue(t,e),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&rMe(t,i)}function Xue(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}ele.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(c,u){var l=Zue(this,c).slice();try{var d=s.call(this,c,u);return nMe(this,c,l),d}finally{this.on.__wrapped||e_(this,"on",i),this.addListener.__wrapped||e_(this,"addListener",i)}}}function o(s){return function(c){if(!this._events||!this._events[c])return s.apply(this,arguments);var u=this._events[c];function l(d){return function(){this._events[c]=u;try{return d.apply(this,arguments)}finally{u=this._events[c],this._events[c]=Xue(u,n)}}}e_(this,"removeListener",l);try{return this._events[c]=Xue(u,n),s.apply(this,arguments)}finally{tk(this,"removeListener"),this._events[c]=u}}}e[dp]?typeof e[dp]=="function"?rk(e,dp,[e[dp],r]):Array.isArray(e[dp])&&e[dp].push(r):rk(e,dp,r),e.__wrapped||(e_(e,"addListener",i),e_(e,"on",i),e_(e,"emit",o),rk(e,"__unwrap",function(){tk(e,"addListener"),tk(e,"on"),tk(e,"emit"),delete e[dp],delete e.__wrapped}),rk(e,"__wrapped",!0))}});var ile=k((Xxt,nle)=>{"use strict";var wr=require("util"),pp=require("assert"),iMe=nk(),yn=require("async_hooks"),LT="cls@contexts",OT="error@context",Un=process.env.DEBUG_CLS_HOOKED,Ir=-1;nle.exports={getNamespace:tle,createNamespace:oMe,destroyNamespace:rle,reset:sMe,ERROR_SYMBOL:OT};function vc(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}vc.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Un){let n=" ".repeat(this._indent<0?0:this._indent);In(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+Ir+" active:"+wr.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};vc.prototype.get=function(e){if(!this.active){if(Un){let r=yn.currentId(),n=yn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);In(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${Ir} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Un){let r=yn.executionAsyncId(),n=yn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);In(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+Ir+" active:"+wr.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),In(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${Ir} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${wr.inspect(this.active)}`)}return this.active[e]};vc.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=Ir,Un){let r=yn.executionAsyncId(),n=yn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);In(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Ir} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${wr.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};vc.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Un){let n=yn.triggerAsyncId(),i=yn.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);In(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Ir} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${wr.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[OT]=r),n}finally{if(Un){let n=yn.triggerAsyncId(),i=yn.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);In(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${Ir} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${wr.inspect(r)}`)}this.exit(r)}};vc.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};vc.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Un&&In("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Ir+" len:"+this._set.length+" "+wr.inspect(r)),n.then(i=>(Un&&In("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Ir+" len:"+this._set.length+" "+wr.inspect(r)),this.exit(r),i)).catch(i=>{throw i[OT]=r,Un&&In("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Ir+" len:"+this._set.length+" "+wr.inspect(r)),this.exit(r),i})};vc.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[OT]=r),o}finally{n.exit(r)}}};vc.prototype.enter=function(e){if(pp.ok(e,"context must be provided for entering"),Un){let r=yn.executionAsyncId(),n=yn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);In(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Ir} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${wr.inspect(e)}`)}this._set.push(this.active),this.active=e};vc.prototype.exit=function(e){if(pp.ok(e,"context must be provided for exiting"),Un){let n=yn.executionAsyncId(),i=yn.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);In(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${Ir} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${wr.inspect(e)}`)}if(this.active===e){pp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Un&&In("??ERROR?? context exiting but not entered - ignoring: "+wr.inspect(e)),pp.ok(r>=0,`context not currently entered; can't exit. 
`+wr.inspect(this)+`
`+wr.inspect(e))):(pp.ok(r,"can't remove top context"),this._set.splice(r,1))};vc.prototype.bindEmitter=function(e){pp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[LT]||(s[LT]=Object.create(null)),s[LT][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[LT]))return s;let a=s,c=s[LT];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}iMe(e,i,o)};vc.prototype.fromException=function(e){return e[OT]};function tle(t){return process.namespaces[t]}function oMe(t){pp.ok(t,"namespace must be given a name."),Un&&In(`NS-CREATING NAMESPACE (${t})`);let e=new vc(t);return e.id=Ir,yn.createHook({init(n,i,o,s){if(Ir=yn.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Un){let a=" ".repeat(e._indent<0?0:e._indent);In(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${Ir} triggerId:${o} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Ir===0){let a=yn.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),Un){let u=" ".repeat(e._indent<0?0:e._indent);In(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${Ir} triggerId:${a} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Un){let u=" ".repeat(e._indent<0?0:e._indent);In(`${u}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${Ir} triggerId:${a} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(Un&&i==="PROMISE"){In(wr.inspect(s,{showHidden:!0}));let a=s.parentId,c=" ".repeat(e._indent<0?0:e._indent);In(`${c}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${Ir} triggerId:${o} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){Ir=yn.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ir),i){if(Un){let o=yn.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);In(`${s}BEFORE (${t}) asyncId:${n} currentUid:${Ir} triggerId:${o} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${wr.inspect(i)}`),e._indent+=2}e.enter(i)}else if(Un){let o=yn.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);In(`${s}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ir} triggerId:${o} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${wr.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){Ir=yn.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ir),i){if(Un){let o=yn.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);In(`${s}AFTER (${t}) asyncId:${n} currentUid:${Ir} triggerId:${o} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${wr.inspect(i)}`)}e.exit(i)}else if(Un){let o=yn.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);In(`${s}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ir} triggerId:${o} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${wr.inspect(i)}`)}},destroy(n){if(Ir=yn.executionAsyncId(),Un){let i=yn.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);In(`${o}DESTROY (${t}) currentUid:${Ir} asyncId:${n} triggerId:${i} active:${wr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${wr.inspect(e._contexts.get(Ir))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function rle(t){let e=tle(t);pp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),pp.ok(e.id,"don't assign to process.namespaces directly! "+wr.inspect(e)),process.namespaces[t]=null}function sMe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){rle(t)}),process.namespaces=Object.create(null)}process.namespaces={};function In(...t){Un&&process._rawDebug(`${wr.format(...t)}`)}});var sle=k((Jxt,ole)=>{"use strict";function aMe(){}ole.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new aMe,a=--r.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let c=!0;try{o.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(s,a,!0),e.destroy.call(null,a)})}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var cle=k((Zxt,ale)=>{"use strict";function cMe(){}ale.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function o(u,l,d,p){return typeof u!="function"?p?s(d):a(d):function(){e.pre.call(l,d);try{return u.apply(this,arguments)}finally{e.post.call(l,d,!1),e.destroy.call(null,d)}}}function s(u){return function(d){return e.destroy.call(null,u),d}}function a(u){return function(d){throw e.destroy.call(null,u),d}}function c(u,l){if(!r.enabled)return i.call(this,u,l);let d=new cMe,p=--r.counter;return e.init.call(d,p,0,null,null),i.call(this,o(u,d,p,!0),o(l,d,p,!1))}}});var lle=k((e1t,ule)=>{"use strict";var Ha=require("timers");function uMe(){}function lMe(){}function dMe(){}var pMe=new Map,fMe=new Map,mMe=new Map,GU=null,VU=!1;ule.exports=function(){zU(this._hooks,this._state,"setTimeout","clearTimeout",uMe,pMe,!0),zU(this._hooks,this._state,"setInterval","clearInterval",lMe,fMe,!1),zU(this._hooks,this._state,"setImmediate","clearImmediate",dMe,mMe,!0),global.setTimeout=Ha.setTimeout,global.setInterval=Ha.setInterval,global.setImmediate=Ha.setImmediate,global.clearTimeout=Ha.clearTimeout,global.clearInterval=Ha.clearInterval,global.clearImmediate=Ha.clearImmediate};function zU(t,e,r,n,i,o,s){let a=Ha[r],c=Ha[n];Ha[r]=function(){if(!e.enabled)return a.apply(Ha,arguments);let u=new Array(arguments.length);for(let m=0;m<arguments.length;m++)u[m]=arguments[m];let l=u[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let d=new i,p=--e.counter,f;return t.init.call(d,p,0,null,null),u[0]=function(){GU=f,t.pre.call(d,p);let m=!0;try{l.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(d,p,!0),o.delete(f),t.destroy.call(null,p)})}t.post.call(d,p,!1),GU=null,(s||VU)&&(VU=!1,o.delete(f),t.destroy.call(null,p))},f=a.apply(Ha,u),o.set(f,p),f},Ha[n]=function(u){if(GU===u&&u!==null)VU=!0;else if(o.has(u)){let l=o.get(u);o.delete(u),t.destroy.call(null,l)}c.apply(Ha,arguments)}}});var $U=k((t1t,hMe)=>{hMe.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var fle=k((r1t,ple)=>{"use strict";var FT=process.binding("async_wrap"),gMe=FT.Providers.TIMERWRAP,dle={nextTick:sle(),promise:cle(),timers:lle()},MT=new Set;function vMe(){this.enabled=!1,this.counter=0}function WU(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===gMe){MT.add(i);return}for(let c of t)c(i,this,o,s,a)},this.pre=function(i){if(!MT.has(i))for(let o of e)o(i,this)},this.post=function(i,o){if(!MT.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(MT.has(i)){MT.delete(i);return}for(let o of n)o(i)}}WU.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function ik(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}WU.prototype.remove=function(t){t.init&&ik(this.initFns,t.init),t.pre&&ik(this.preFns,t.pre),t.post&&ik(this.postFns,t.post),t.destroy&&ik(this.destroyFns,t.destroy)};function UT(){this._state=new vMe,this._hooks=new WU,this.version=$U().version,this.providers=FT.Providers;for(let t of Object.keys(dle))dle[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),FT.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}ple.exports=UT;UT.prototype.addHooks=function(t){this._hooks.add(t)};UT.prototype.removeHooks=function(t){this._hooks.remove(t)};UT.prototype.enable=function(){this._state.enabled=!0,FT.enable()};UT.prototype.disable=function(){this._state.enabled=!1,FT.disable()}});var YU=k((n1t,yMe)=>{yMe.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var hle=k((i1t,mle)=>{function bMe(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}mle.exports=function(e,r){var n=[];n.push(bMe(e));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var ble=k((o1t,yle)=>{var ok=hle();function vle(){this.extend=new BT,this.filter=new BT,this.format=new qT,this.version=YU().version}var QU=!1;vle.prototype.callSite=function t(e){e||(e={}),QU=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return QU=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var sm=new vle;function BT(){this._modifiers=[]}BT.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};BT.prototype.attach=function(t){this._modifiers.push(t)};BT.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function qT(){this._formater=ok,this._previous=void 0}qT.prototype.replace=function(t){t?this._formater=t:this.restore()};qT.prototype.restore=function(){this._formater=ok,this._previous=void 0};qT.prototype._backup=function(){this._previous=this._formater};qT.prototype._roolback=function(){this._previous===ok?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&sm.format.replace(Error.prepareStackTrace);var KU=!1;function gle(t,e){if(QU)return e;if(KU)return ok(t,e);var r=e.concat();r=sm.extend._modify(t,r),r=sm.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),KU=!0;var n=sm.format._formater(t,r);return KU=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return gle},set:function(t){t===gle?sm.format._roolback():(sm.format._backup(),sm.format.replace(t))}});function _Me(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:_Me,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});yle.exports=sm});var JU=k((s1t,XU)=>{if(global._stackChain)if(global._stackChain.version===YU().version)XU.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else XU.exports=global._stackChain=ble()});var _le=k((a1t,ZU)=>{"use strict";var xMe=fle();if(global._asyncHook)if(global._asyncHook.version===$U().version)ZU.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else JU().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),ZU.exports=global._asyncHook=new xMe});var Ile=k((c1t,Cle)=>{"use strict";var pi=require("util"),fp=require("assert"),EMe=nk(),t_=_le(),HT="cls@contexts",jT="error@context",Ele=[];for(let t in t_.providers)Ele[t_.providers[t]]=t;var Zn=process.env.DEBUG_CLS_HOOKED,wi=-1;Cle.exports={getNamespace:Sle,createNamespace:SMe,destroyNamespace:Tle,reset:TMe,ERROR_SYMBOL:jT};function yc(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}yc.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return Zn&&di("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+wi+" active:"+pi.inspect(this.active,!0)),this.active[e]=r,r};yc.prototype.get=function(e){if(!this.active){Zn&&di("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+wi+" active:"+pi.inspect(this.active,!0));return}return Zn&&di("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+wi+" active:"+pi.inspect(this.active,!0)),this.active[e]};yc.prototype.createContext=function(){Zn&&di("   CREATING Context: "+this.name+" uid:"+wi+" len:"+this._set.length+"  active:"+pi.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=wi,Zn&&di("   CREATED Context: "+this.name+" uid:"+wi+" len:"+this._set.length+"  context:"+pi.inspect(e,!0,2,!0)),e};yc.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return Zn&&di(" BEFORE RUN: "+this.name+" uid:"+wi+" len:"+this._set.length+" "+pi.inspect(r)),e(r),r}catch(n){throw n&&(n[jT]=r),n}finally{Zn&&di(" AFTER RUN: "+this.name+" uid:"+wi+" len:"+this._set.length+" "+pi.inspect(r)),this.exit(r)}};yc.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};yc.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Zn&&di(" BEFORE runPromise: "+this.name+" uid:"+wi+" len:"+this._set.length+" "+pi.inspect(r)),n.then(i=>(Zn&&di(" AFTER runPromise: "+this.name+" uid:"+wi+" len:"+this._set.length+" "+pi.inspect(r)),this.exit(r),i)).catch(i=>{throw i[jT]=r,Zn&&di(" AFTER runPromise: "+this.name+" uid:"+wi+" len:"+this._set.length+" "+pi.inspect(r)),this.exit(r),i})};yc.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[jT]=r),o}finally{n.exit(r)}}};yc.prototype.enter=function(e){fp.ok(e,"context must be provided for entering"),Zn&&di("  ENTER "+this.name+" uid:"+wi+" len:"+this._set.length+" context: "+pi.inspect(e)),this._set.push(this.active),this.active=e};yc.prototype.exit=function(e){if(fp.ok(e,"context must be provided for exiting"),Zn&&di("  EXIT "+this.name+" uid:"+wi+" len:"+this._set.length+" context: "+pi.inspect(e)),this.active===e){fp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Zn&&di("??ERROR?? context exiting but not entered - ignoring: "+pi.inspect(e)),fp.ok(r>=0,`context not currently entered; can't exit. 
`+pi.inspect(this)+`
`+pi.inspect(e))):(fp.ok(r,"can't remove top context"),this._set.splice(r,1))};yc.prototype.bindEmitter=function(e){fp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[HT]||(s[HT]=Object.create(null)),s[HT][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[HT]))return s;let a=s,c=s[HT];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}EMe(e,i,o)};yc.prototype.fromException=function(e){return e[jT]};function Sle(t){return process.namespaces[t]}function SMe(t){fp.ok(t,"namespace must be given a name."),Zn&&di("CREATING NAMESPACE "+t);let e=new yc(t);return e.id=wi,t_.addHooks({init(r,n,i,o,s){wi=r,o?(e._contexts.set(r,e._contexts.get(o)),Zn&&di("PARENTID: "+t+" uid:"+r+" parent:"+o+" provider:"+i)):e._contexts.set(wi,e.active),Zn&&di("INIT "+t+" uid:"+r+" parent:"+o+" provider:"+Ele[i]+" active:"+pi.inspect(e.active,!0))},pre(r,n){wi=r;let i=e._contexts.get(r);i?(Zn&&di(" PRE "+t+" uid:"+r+" handle:"+sk(n)+" context:"+pi.inspect(i)),e.enter(i)):Zn&&di(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+sk(n))},post(r,n){wi=r;let i=e._contexts.get(r);i?(Zn&&di(" POST "+t+" uid:"+r+" handle:"+sk(n)+" context:"+pi.inspect(i)),e.exit(i)):Zn&&di(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+sk(n))},destroy(r){wi=r,Zn&&di("DESTROY "+t+" uid:"+r+" context:"+pi.inspect(e._contexts.get(wi))+" active:"+pi.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function Tle(t){let e=Sle(t);fp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),fp.ok(e.id,"don't assign to process.namespaces directly! "+pi.inspect(e)),process.namespaces[t]=null}function TMe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Tle(t)}),process.namespaces=Object.create(null)}process.namespaces={};t_._state&&!t_._state.enabled&&t_.enable();function di(t){process.env.DEBUG&&process._rawDebug(t)}function sk(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(Zn){eB=JU();for(xle in eB.filter._modifiers)eB.filter.deattach(xle)}var eB,xle});var wle=k((u1t,tB)=>{"use strict";var CMe=Wue();process&&CMe.gte(process.versions.node,"8.0.0")?tB.exports=ile():tB.exports=Ile()});var Vle=k((Rt,Gle)=>{Rt=Gle.exports=cr;var qr;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?qr=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:qr=function(){};Rt.SEMVER_SPEC_VERSION="2.0.0";var GT=256,ak=Number.MAX_SAFE_INTEGER||9007199254740991,rB=16,IMe=GT-6,VT=Rt.re=[],on=Rt.safeRe=[],Se=Rt.src=[],nr=0,aB="[a-zA-Z0-9-]",nB=[["\\s",1],["\\d",GT],[aB,IMe]];function fk(t){for(var e=0;e<nB.length;e++){var r=nB[e][0],n=nB[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var r_=nr++;Se[r_]="0|[1-9]\\d*";var n_=nr++;Se[n_]="\\d+";var cB=nr++;Se[cB]="\\d*[a-zA-Z-]"+aB+"*";var Ale=nr++;Se[Ale]="("+Se[r_]+")\\.("+Se[r_]+")\\.("+Se[r_]+")";var Ple=nr++;Se[Ple]="("+Se[n_]+")\\.("+Se[n_]+")\\.("+Se[n_]+")";var iB=nr++;Se[iB]="(?:"+Se[r_]+"|"+Se[cB]+")";var oB=nr++;Se[oB]="(?:"+Se[n_]+"|"+Se[cB]+")";var uB=nr++;Se[uB]="(?:-("+Se[iB]+"(?:\\."+Se[iB]+")*))";var lB=nr++;Se[lB]="(?:-?("+Se[oB]+"(?:\\."+Se[oB]+")*))";var sB=nr++;Se[sB]=aB+"+";var $T=nr++;Se[$T]="(?:\\+("+Se[sB]+"(?:\\."+Se[sB]+")*))";var dB=nr++,kle="v?"+Se[Ale]+Se[uB]+"?"+Se[$T]+"?";Se[dB]="^"+kle+"$";var pB="[v=\\s]*"+Se[Ple]+Se[lB]+"?"+Se[$T]+"?",fB=nr++;Se[fB]="^"+pB+"$";var c_=nr++;Se[c_]="((?:<|>)?=?)";var ck=nr++;Se[ck]=Se[n_]+"|x|X|\\*";var uk=nr++;Se[uk]=Se[r_]+"|x|X|\\*";var k0=nr++;Se[k0]="[v=\\s]*("+Se[uk]+")(?:\\.("+Se[uk]+")(?:\\.("+Se[uk]+")(?:"+Se[uB]+")?"+Se[$T]+"?)?)?";var o_=nr++;Se[o_]="[v=\\s]*("+Se[ck]+")(?:\\.("+Se[ck]+")(?:\\.("+Se[ck]+")(?:"+Se[lB]+")?"+Se[$T]+"?)?)?";var Dle=nr++;Se[Dle]="^"+Se[c_]+"\\s*"+Se[k0]+"$";var Nle=nr++;Se[Nle]="^"+Se[c_]+"\\s*"+Se[o_]+"$";var Lle=nr++;Se[Lle]="(?:^|[^\\d])(\\d{1,"+rB+"})(?:\\.(\\d{1,"+rB+"}))?(?:\\.(\\d{1,"+rB+"}))?(?:$|[^\\d])";var mk=nr++;Se[mk]="(?:~>?)";var s_=nr++;Se[s_]="(\\s*)"+Se[mk]+"\\s+";VT[s_]=new RegExp(Se[s_],"g");on[s_]=new RegExp(fk(Se[s_]),"g");var wMe="$1~",Ole=nr++;Se[Ole]="^"+Se[mk]+Se[k0]+"$";var Mle=nr++;Se[Mle]="^"+Se[mk]+Se[o_]+"$";var hk=nr++;Se[hk]="(?:\\^)";var a_=nr++;Se[a_]="(\\s*)"+Se[hk]+"\\s+";VT[a_]=new RegExp(Se[a_],"g");on[a_]=new RegExp(fk(Se[a_]),"g");var RMe="$1^",Fle=nr++;Se[Fle]="^"+Se[hk]+Se[k0]+"$";var Ule=nr++;Se[Ule]="^"+Se[hk]+Se[o_]+"$";var mB=nr++;Se[mB]="^"+Se[c_]+"\\s*("+pB+")$|^$";var hB=nr++;Se[hB]="^"+Se[c_]+"\\s*("+kle+")$|^$";var D0=nr++;Se[D0]="(\\s*)"+Se[c_]+"\\s*("+pB+"|"+Se[k0]+")";VT[D0]=new RegExp(Se[D0],"g");on[D0]=new RegExp(fk(Se[D0]),"g");var AMe="$1$2$3",Ble=nr++;Se[Ble]="^\\s*("+Se[k0]+")\\s+-\\s+("+Se[k0]+")\\s*$";var qle=nr++;Se[qle]="^\\s*("+Se[o_]+")\\s+-\\s+("+Se[o_]+")\\s*$";var Hle=nr++;Se[Hle]="(<|>)?=?\\s*\\*";for(_l=0;_l<nr;_l++)qr(_l,Se[_l]),VT[_l]||(VT[_l]=new RegExp(Se[_l]),on[_l]=new RegExp(fk(Se[_l])));var _l;Rt.parse=N0;function N0(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof cr)return t;if(typeof t!="string"||t.length>GT)return null;var r=e.loose?on[fB]:on[dB];if(!r.test(t))return null;try{return new cr(t,e)}catch{return null}}Rt.valid=PMe;function PMe(t,e){var r=N0(t,e);return r?r.version:null}Rt.clean=kMe;function kMe(t,e){var r=N0(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Rt.SemVer=cr;function cr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof cr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>GT)throw new TypeError("version is longer than "+GT+" characters");if(!(this instanceof cr))return new cr(t,e);qr("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?on[fB]:on[dB]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ak||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ak||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ak||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<ak)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}cr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};cr.prototype.toString=function(){return this.version};cr.prototype.compare=function(t){return qr("SemVer.compare",this.version,this.options,t),t instanceof cr||(t=new cr(t,this.options)),this.compareMain(t)||this.comparePre(t)};cr.prototype.compareMain=function(t){return t instanceof cr||(t=new cr(t,this.options)),i_(this.major,t.major)||i_(this.minor,t.minor)||i_(this.patch,t.patch)};cr.prototype.comparePre=function(t){if(t instanceof cr||(t=new cr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(qr("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return i_(r,n)}while(++e)};cr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Rt.inc=DMe;function DMe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new cr(t,r).inc(e,n).version}catch{return null}}Rt.diff=NMe;function NMe(t,e){if(gB(t,e))return null;var r=N0(t),n=N0(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Rt.compareIdentifiers=i_;var Rle=/^[0-9]+$/;function i_(t,e){var r=Rle.test(t),n=Rle.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Rt.rcompareIdentifiers=LMe;function LMe(t,e){return i_(e,t)}Rt.major=OMe;function OMe(t,e){return new cr(t,e).major}Rt.minor=MMe;function MMe(t,e){return new cr(t,e).minor}Rt.patch=FMe;function FMe(t,e){return new cr(t,e).patch}Rt.compare=mp;function mp(t,e,r){return new cr(t,r).compare(new cr(e,r))}Rt.compareLoose=UMe;function UMe(t,e){return mp(t,e,!0)}Rt.rcompare=BMe;function BMe(t,e,r){return mp(e,t,r)}Rt.sort=qMe;function qMe(t,e){return t.sort(function(r,n){return Rt.compare(r,n,e)})}Rt.rsort=HMe;function HMe(t,e){return t.sort(function(r,n){return Rt.rcompare(r,n,e)})}Rt.gt=zT;function zT(t,e,r){return mp(t,e,r)>0}Rt.lt=lk;function lk(t,e,r){return mp(t,e,r)<0}Rt.eq=gB;function gB(t,e,r){return mp(t,e,r)===0}Rt.neq=jle;function jle(t,e,r){return mp(t,e,r)!==0}Rt.gte=vB;function vB(t,e,r){return mp(t,e,r)>=0}Rt.lte=yB;function yB(t,e,r){return mp(t,e,r)<=0}Rt.cmp=dk;function dk(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return gB(t,r,n);case"!=":return jle(t,r,n);case">":return zT(t,r,n);case">=":return vB(t,r,n);case"<":return lk(t,r,n);case"<=":return yB(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Rt.Comparator=bc;function bc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof bc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof bc))return new bc(t,e);t=t.trim().split(/\s+/).join(" "),qr("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===WT?this.value="":this.value=this.operator+this.semver.version,qr("comp",this)}var WT={};bc.prototype.parse=function(t){var e=this.options.loose?on[mB]:on[hB],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new cr(r[2],this.options.loose):this.semver=WT};bc.prototype.toString=function(){return this.value};bc.prototype.test=function(t){return qr("Comparator.test",t,this.options.loose),this.semver===WT?!0:(typeof t=="string"&&(t=new cr(t,this.options)),dk(t,this.operator,this.semver,this.options))};bc.prototype.intersects=function(t,e){if(!(t instanceof bc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Bn(t.value,e),pk(this.value,r,e);if(t.operator==="")return r=new Bn(this.value,e),pk(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=dk(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=dk(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};Rt.Range=Bn;function Bn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Bn)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Bn(t.raw,e);if(t instanceof bc)return new Bn(t.value,e);if(!(this instanceof Bn))return new Bn(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Bn.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Bn.prototype.toString=function(){return this.range};Bn.prototype.parseRange=function(t){var e=this.options.loose,r=e?on[qle]:on[Ble];t=t.replace(r,XMe),qr("hyphen replace",t),t=t.replace(on[D0],AMe),qr("comparator trim",t,on[D0]),t=t.replace(on[s_],wMe),t=t.replace(on[a_],RMe);var n=e?on[mB]:on[hB],i=t.split(" ").map(function(o){return GMe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new bc(o,this.options)},this),i};Bn.prototype.intersects=function(t,e){if(!(t instanceof Bn))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Rt.toComparators=jMe;function jMe(t,e){return new Bn(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function GMe(t,e){return qr("comp",t,e),t=$Me(t,e),qr("caret",t),t=VMe(t,e),qr("tildes",t),t=YMe(t,e),qr("xrange",t),t=QMe(t,e),qr("stars",t),t}function Ms(t){return!t||t.toLowerCase()==="x"||t==="*"}function VMe(t,e){return t.trim().split(/\s+/).map(function(r){return zMe(r,e)}).join(" ")}function zMe(t,e){var r=e.loose?on[Mle]:on[Ole];return t.replace(r,function(n,i,o,s,a){qr("tilde",t,n,i,o,s,a);var c;return Ms(i)?c="":Ms(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Ms(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(qr("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",qr("tilde return",c),c})}function $Me(t,e){return t.trim().split(/\s+/).map(function(r){return WMe(r,e)}).join(" ")}function WMe(t,e){qr("caret",t,e);var r=e.loose?on[Ule]:on[Fle];return t.replace(r,function(n,i,o,s,a){qr("caret",t,n,i,o,s,a);var c;return Ms(i)?c="":Ms(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Ms(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(qr("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(qr("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),qr("caret return",c),c})}function YMe(t,e){return qr("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return KMe(r,e)}).join(" ")}function KMe(t,e){t=t.trim();var r=e.loose?on[Nle]:on[Dle];return t.replace(r,function(n,i,o,s,a,c){qr("xRange",t,n,i,o,s,a,c);var u=Ms(o),l=u||Ms(s),d=l||Ms(a),p=d;return i==="="&&p&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),qr("xRange return",n),n})}function QMe(t,e){return qr("replaceStars",t,e),t.trim().replace(on[Hle],"")}function XMe(t,e,r,n,i,o,s,a,c,u,l,d,p){return Ms(r)?e="":Ms(n)?e=">="+r+".0.0":Ms(i)?e=">="+r+"."+n+".0":e=">="+e,Ms(c)?a="":Ms(u)?a="<"+(+c+1)+".0.0":Ms(l)?a="<"+c+"."+(+u+1)+".0":d?a="<="+c+"."+u+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}Bn.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new cr(t,this.options));for(var e=0;e<this.set.length;e++)if(JMe(this.set[e],t,this.options))return!0;return!1};function JMe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(qr(t[n].semver),t[n].semver!==WT&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Rt.satisfies=pk;function pk(t,e,r){try{e=new Bn(e,r)}catch{return!1}return e.test(t)}Rt.maxSatisfying=ZMe;function ZMe(t,e,r){var n=null,i=null;try{var o=new Bn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new cr(n,r))}),n}Rt.minSatisfying=e9e;function e9e(t,e,r){var n=null,i=null;try{var o=new Bn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new cr(n,r))}),n}Rt.minVersion=t9e;function t9e(t,e){t=new Bn(t,e);var r=new cr("0.0.0");if(t.test(r)||(r=new cr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new cr(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||zT(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Rt.validRange=r9e;function r9e(t,e){try{return new Bn(t,e).range||"*"}catch{return null}}Rt.ltr=n9e;function n9e(t,e,r){return bB(t,e,"<",r)}Rt.gtr=i9e;function i9e(t,e,r){return bB(t,e,">",r)}Rt.outside=bB;function bB(t,e,r,n){t=new cr(t,n),e=new Bn(e,n);var i,o,s,a,c;switch(r){case">":i=zT,o=yB,s=lk,a=">",c=">=";break;case"<":i=lk,o=vB,s=zT,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pk(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],d=null,p=null;if(l.forEach(function(f){f.semver===WT&&(f=new bc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===c&&s(t,p.semver))return!1}return!0}Rt.prerelease=o9e;function o9e(t,e){var r=N0(t,e);return r&&r.prerelease.length?r.prerelease:null}Rt.intersects=s9e;function s9e(t,e,r){return t=new Bn(t,r),e=new Bn(e,r),t.intersects(e)}Rt.coerce=a9e;function a9e(t){if(t instanceof cr)return t;if(typeof t!="string")return null;var e=t.match(on[Lle]);return e==null?null:N0(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Wle=k((l1t,$le)=>{var c9e=ek().wrap,xB=1,EB=2,SB=4,vk=8,Yr=[],u9e=0,ls=!1,am=[],u_,TB;function CB(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=t[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(t[o].uid===e[s].uid){a=!1;break}a&&i.push(e[s])}return i}process._fatalException?(gk=!1,u_=function(e){var r=Yr.length;if(gk||r===0)return!1;var n=!1;gk=!0;for(var i=0;i<r;++i){var o=Yr[i];if(o.flags&vk){var s=l_&&l_[o.uid];n=o.error(s,e)||n}}return gk=!1,am.length>0&&(Yr=am.pop()),l_=void 0,n&&!ls},TB=function(e,r,n){var i=[];ls=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&xB)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return ls=!1,function(){l_=i,am.push(Yr),Yr=CB(r,Yr),ls=!0;for(var c=0;c<n;++c)(r[c].flags&EB)>0&&r[c].before(this,i[r[c].uid]);ls=!1;var u=e.apply(this,arguments);for(ls=!0,c=0;c<n;++c)(r[c].flags&SB)>0&&r[c].after(this,i[r[c].uid]);return ls=!1,Yr=am.pop(),l_=void 0,u}},c9e(process,"_fatalException",function(t){return function(r){return u_(r)||t(r)}})):(_B=!1,u_=function(e){if(_B)throw e;for(var r=!1,n=Yr.length,i=0;i<n;++i){var o=Yr[i];o.flags&vk&&(r=o.error(null,e)||r)}if(!r&&ls)throw e},TB=function(e,r,n){var i=[];ls=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&xB)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return ls=!1,function(){var c=!1,u=!1;am.push(Yr),Yr=CB(r,Yr),ls=!0;for(var l=0;l<n;++l)(r[l].flags&EB)>0&&r[l].before(this,i[r[l].uid]);ls=!1;var d;try{d=e.apply(this,arguments)}catch(p){c=!0;for(var l=0;l<n;++l)if(Yr[l].flags&vk)try{u=Yr[l].error(i[r[l].uid],p)||u}catch(m){throw _B=!0,m}if(!u)throw process.removeListener("uncaughtException",u_),process._originalNextTick(function(){process.addListener("uncaughtException",u_)}),p}finally{if(!c||u){for(ls=!0,l=0;l<n;++l)(r[l].flags&SB)>0&&r[l].after(this,i[r[l].uid]);ls=!1}Yr=am.pop()}return d}},process.addListener("uncaughtException",u_));var gk,l_,_B;function l9e(t,e,r){ls=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return ls=!1,function(){am.push(Yr),Yr=CB(e,Yr);var o=t.apply(this,arguments);return Yr=am.pop(),o}}function d9e(t){var e=Yr.length;if(e===0)return t;for(var r=Yr.slice(),n=0;n<e;++n)if(r[n].flags>0)return TB(t,r,e);return l9e(t,r,e)}function xl(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=xB),typeof t.before=="function"&&(this.before=t.before,this.flags|=EB),typeof t.after=="function"&&(this.after=t.after,this.flags|=SB),typeof t.error=="function"&&(this.error=t.error,this.flags|=vk),this.uid=++u9e,this.data=e===void 0?null:e}xl.prototype.create=void 0;xl.prototype.before=void 0;xl.prototype.after=void 0;xl.prototype.error=void 0;xl.prototype.data=void 0;xl.prototype.uid=0;xl.prototype.flags=0;function zle(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof xl?t:new xl(t,e)}function p9e(t,e){var r;t instanceof xl?r=t:r=zle(t,e);for(var n=!1,i=0;i<Yr.length;i++)if(r===Yr[i]){n=!0;break}return n||Yr.push(r),r}function f9e(t){for(var e=0;e<Yr.length;e++)if(t===Yr[e]){Yr.splice(e,1);break}}process.createAsyncListener=zle;process.addAsyncListener=p9e;process.removeAsyncListener=f9e;$le.exports=d9e});var Kle=k((p1t,Yle)=>{"use strict";Yle.exports=(t,e)=>class extends t{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(c){o[1](c)}return s;function a(c,u){i=this,o=[l,d];function l(p){return e(s,!1),c(p)}function d(p){return e(s,!1),u(p)}}}}});var rde=k(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var Zle=ek(),bk=Vle(),ua=Zle.wrap,cm=Zle.massWrap,qn=Wle(),m9e=require("util"),h9e=bk.gte(process.version,"6.0.0"),RB=bk.gte(process.version,"7.0.0"),g9e=bk.gte(process.version,"8.0.0"),v9e=bk.gte(process.version,"11.0.0"),El=require("net");RB&&!El._normalizeArgs?El._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:E9e(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!RB&&!El._normalizeConnectArgs&&(El._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in El.Server.prototype?ua(El.Server.prototype,"_setUpListenHandle",Qle):ua(El.Server.prototype,"_listen2",Qle);function Qle(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=qn(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=qn(this._handle.onconnection))}}}function ede(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=qn(e._originalOnread)}}ua(El.Socket.prototype,"connect",function(t){return function(){var e;g9e&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=RB?El._normalizeArgs(arguments):El._normalizeConnectArgs(arguments),e[1]&&(e[1]=qn(e[1]));var r=t.apply(this,e);return ede(this),r}});var y9e=require("http");ua(y9e.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=qn(function(n){return ede(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var IB=require("child_process");function Xle(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=qn(e._handle.onread),ua(e._handle,"close",_k))}),t._handle&&(t._handle.onexit=qn(t._handle.onexit))}IB.ChildProcess?ua(IB.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return Xle(this),e}}):cm(IB,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return Xle(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var kB=[];process._nextDomainTick&&kB.push("_nextDomainTick");process._tickDomainCallback&&kB.push("_tickDomainCallback");cm(process,kB,Sl);ua(process,"nextTick",_k);var DB=["setTimeout","setInterval"];global.setImmediate&&DB.push("setImmediate");var tde=require("timers"),b9e=global.setTimeout===tde.setTimeout;cm(tde,DB,_k);b9e&&cm(global,DB,_k);var AB=require("dns");cm(AB,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Sl);AB.resolveNaptr&&ua(AB,"resolveNaptr",Sl);var O0=require("fs");cm(O0,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Sl);O0.lchown&&ua(O0,"lchown",Sl);O0.lchmod&&ua(O0,"lchmod",Sl);O0.ftruncate&&ua(O0,"ftruncate",Sl);var YT;try{YT=require("zlib")}catch{}YT&&YT.Deflate&&YT.Deflate.prototype&&(L0=Object.getPrototypeOf(YT.Deflate.prototype),L0._transform?ua(L0,"_transform",Sl):L0.write&&L0.flush&&L0.end&&cm(L0,["write","flush","end"],Sl));var L0,PB;try{PB=require("crypto")}catch{}PB&&(wB=["pbkdf2","randomBytes"],v9e||wB.push("pseudoRandomBytes"),cm(PB,wB,Sl));var wB,yk=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";yk&&(Jle=process.addAsyncListener({create:function(){yk=!1}}),global.Promise.resolve(!0).then(function(){yk=!1}),process.removeAsyncListener(Jle));var Jle;yk&&_9e();function _9e(){var t=global.Promise;function e(s){if(!(this instanceof e))return t(s);if(typeof s!="function")return new t(s);var a,c,u=new t(l);u.__proto__=e.prototype;try{s.apply(a,c)}catch(d){c[1](d)}return u;function l(d,p){a=this,c=[f,m];function f(h){return n(u,!1),d(h)}function m(h){return n(u,!1),p(h)}}}if(m9e.inherits(e,t),ua(t.prototype,"then",o),t.prototype.chain&&ua(t.prototype,"chain",o),h9e)global.Promise=Kle()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof t[s]=="function"&&(e[s]=t[s])}),global.Promise=e}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=qn(i))}function i(s,a,c,u){var l;try{return l=a.call(s,c),{returnVal:l,error:!1}}catch(d){return{errorVal:d,error:!0}}finally{l instanceof t?u.__asl_wrapper=function(){var p=l.__asl_wrapper||i;return p.apply(this,arguments)}:n(u,!0)}}function o(s){return function(){var c=this,u=s.apply(c,Array.prototype.map.call(arguments,l));return u.__asl_wrapper=function(p,f,m,h){return c.__asl_wrapper?(c.__asl_wrapper(p,function(){},null,u),u.__asl_wrapper(p,f,m,h)):i(p,f,m,h)},u;function l(d){return typeof d!="function"?d:qn(function(p){var f=(c.__asl_wrapper||i)(this,d,p,u);if(f.error)throw f.errorVal;return f.returnVal})}}}}function Sl(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=qn(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=qn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=qn(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=qn(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof o=="function"&&(o=qn(o)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof s=="function"&&(s=qn(s)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=qn(a)),t.call(this,r,n,i,o,s,a))};default:return e}}function _k(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=qn(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=qn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=qn(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=qn(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=qn(r)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=qn(r)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=qn(r)),t.call(this,r,n,i,o,s,a))};default:return e}}function x9e(t){return(t=Number(t))>=0?t:!1}function E9e(t){return typeof t=="string"&&x9e(t)===!1}});var ade=k((h1t,sde)=>{"use strict";var hp=require("assert"),S9e=nk(),KT="cls@contexts",NB="error@context";process.addAsyncListener||rde();function xu(t){this.name=t,this.active=null,this._set=[],this.id=null}xu.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};xu.prototype.get=function(t){if(this.active)return this.active[t]};xu.prototype.createContext=function(){return Object.create(this.active)};xu.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[NB]=e),r}finally{this.exit(e)}};xu.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};xu.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[NB]=e),n}finally{r.exit(e)}}};xu.prototype.enter=function(t){hp.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};xu.prototype.exit=function(t){if(hp.ok(t,"context must be provided for exiting"),this.active===t){hp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);hp.ok(e>=0,"context not currently entered; can't exit"),hp.ok(e,"can't remove top context"),this._set.splice(e,1)};xu.prototype.bindEmitter=function(t){hp.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(o){o&&(o[KT]||(o[KT]=Object.create(null)),o[KT][r]={namespace:e,context:e.active})}function i(o){if(!(o&&o[KT]))return o;var s=o,a=o[KT];return Object.keys(a).forEach(function(c){var u=a[c];s=u.namespace.bind(s,u.context)}),s}S9e(t,n,i)};xu.prototype.fromException=function(t){return t[NB]};function nde(t){return process.namespaces[t]}function T9e(t){hp.ok(t,"namespace must be given a name!");var e=new xu(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function ide(t){var e=nde(t);hp.ok(e,"can't delete nonexistent namespace!"),hp.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function ode(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){ide(t)}),process.namespaces=Object.create(null)}process.namespaces||ode();sde.exports={getNamespace:nde,createNamespace:T9e,destroyNamespace:ide,reset:ode}});var um=k(Ek=>{"use strict";Object.defineProperty(Ek,"__esModule",{value:!0});Ek.CorrelationContextManager=void 0;var d_=gn(),C9e=BP(),M0=qP(),LB=nU(),cde=SU(),xk=No(),I9e=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,o,s){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:o,tracestate:s},customProperties:new w9e(i)}:null},t.spanToContextObject=function(e,r,n){var i=new M0;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=M0.formatOpenTelemetryTraceFlags(e.traceFlags)||M0.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){var n;if(t.enabled)try{return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))()}catch(i){d_.warn("Error binding to session context",xk.dumpObj(i))}return r()},t.wrapEmitter=function(e){if(t.enabled)try{t.session.bindEmitter(e)}catch(r){d_.warn("Error binding to session context",xk.dumpObj(r))}},t.wrapCallback=function(e,r){var n;if(t.enabled)try{return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0)}catch(i){d_.warn("Error binding to session context",xk.dumpObj(i))}return e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=wle():this.cls=ade()),t.session=this.cls.createNamespace("AI-CLS-Session"),C9e.registerContextPreservation(function(r){try{return t.session.bind(r)}catch(n){d_.warn("Error binding to session context",xk.dumpObj(n))}})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.spanContext?e:null,o=e&&e.traceId?e:null,s=e&&e.headers;if(i)return this.spanToContextObject(i.spanContext(),i.parentSpanId,i.name);if(o)return this.spanToContextObject(o,"|"+o.traceId+"."+o.spanId+".",typeof r=="string"?r:"");var a=typeof r=="string"?r:"";if(n){var c=null,u=null;if(a=n.attributes.OperationName||a,r){var l=r;l.headers&&(l.headers.traceparent?c=new M0(l.headers.traceparent):l.headers["request-id"]&&(c=new M0(null,l.headers["request-id"])),l.headers.tracestate&&(u=new LB(l.headers.tracestate)))}c||(c=new M0(n.traceParent||n.traceparent)),u||(u=new LB(n.traceState||n.tracestate));var d=void 0;if(typeof r=="object"){var p=new cde(r);d=p.getCorrelationContextHeader(),a=p.getOperationName({})}var f=t.generateContextObject(c.traceId,c.parentId,a,d,c,u);return f}if(s){var c=new M0(s.traceparent?s.traceparent.toString():null),u=new LB(s.tracestate?s.tracestate.toString():null),p=new cde(e),f=t.generateContextObject(c.traceId,c.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),c,u);return f}return d_.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();Ek.CorrelationContextManager=I9e;var w9e=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){d_.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var ude=k(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.dispose=p_.enable=void 0;var Sk=cs(),R9e=Mn(),Tk=Jn(),lm=[],OB=function(t){var e=t.data.message;lm.forEach(function(r){e instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:e}):e instanceof Error?r.trackTrace({message:e.toString(),severity:t.data.stderr?Sk.SeverityLevel.Error:Sk.SeverityLevel.Information}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?Sk.SeverityLevel.Warning:Sk.SeverityLevel.Information}))})};function A9e(t,e){if(t){var r=lm.find(function(n){return n==e});if(r)return;lm.length===0&&Tk.channel.subscribe("console",OB,Tk.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(R9e.StatsbeatInstrumentation.CONSOLE)}),lm.push(e)}else lm=lm.filter(function(n){return n!=e}),lm.length===0&&Tk.channel.unsubscribe("console",OB)}p_.enable=A9e;function P9e(){Tk.channel.unsubscribe("console",OB),lm=[]}p_.dispose=P9e});var lde=k(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});m_.dispose=m_.enable=void 0;var f_=cs(),k9e=Mn(),Ck=Jn(),dm=[],D9e={10:f_.SeverityLevel.Verbose,20:f_.SeverityLevel.Verbose,30:f_.SeverityLevel.Information,40:f_.SeverityLevel.Warning,50:f_.SeverityLevel.Error,60:f_.SeverityLevel.Critical},MB=function(t){var e=t.data.result,r=D9e[t.data.level];dm.forEach(function(n){try{var i=JSON.parse(e);if(i.err){var o=new Error(i.err.message);if(o.name=i.err.name,o.stack=i.err.stack,n.config.enableLoggerErrorToTrace){n.trackTrace({message:e,severity:r});return}n.trackException({exception:o});return}}catch{}n.trackTrace({message:e,severity:r})})};function N9e(t,e){if(t){var r=dm.find(function(n){return n==e});if(r)return;dm.length===0&&Ck.channel.subscribe("bunyan",MB,Ck.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(k9e.StatsbeatInstrumentation.BUNYAN)}),dm.push(e)}else dm=dm.filter(function(n){return n!=e}),dm.length===0&&Ck.channel.unsubscribe("bunyan",MB)}m_.enable=N9e;function L9e(){Ck.channel.unsubscribe("bunyan",MB),dm=[]}m_.dispose=L9e});var dde=k(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});h_.dispose=h_.enable=void 0;var O9e=Mn(),Mo=cs(),Ik=Jn(),pm=[],M9e={syslog:function(t){var e={emerg:Mo.SeverityLevel.Critical,alert:Mo.SeverityLevel.Critical,crit:Mo.SeverityLevel.Critical,error:Mo.SeverityLevel.Error,warning:Mo.SeverityLevel.Warning,notice:Mo.SeverityLevel.Information,info:Mo.SeverityLevel.Information,debug:Mo.SeverityLevel.Verbose};return e[t]===void 0?Mo.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Mo.SeverityLevel.Error,warn:Mo.SeverityLevel.Warning,info:Mo.SeverityLevel.Information,verbose:Mo.SeverityLevel.Verbose,debug:Mo.SeverityLevel.Verbose,silly:Mo.SeverityLevel.Verbose};return e[t]===void 0?Mo.SeverityLevel.Information:e[t]},unknown:function(t){return Mo.SeverityLevel.Information}},FB=function(t){var e=t.data.message,r=M9e[t.data.levelKind](t.data.level);pm.forEach(function(n){e instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:e,properties:t.data.meta}):e instanceof Error?n.trackTrace({message:e.toString(),severity:r,properties:t.data.meta}):n.trackTrace({message:e,severity:r,properties:t.data.meta})})};function F9e(t,e){if(t){var r=pm.find(function(n){return n==e});if(r)return;pm.length===0&&Ik.channel.subscribe("winston",FB,Ik.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(O9e.StatsbeatInstrumentation.WINSTON)}),pm.push(e)}else pm=pm.filter(function(n){return n!=e}),pm.length===0&&Ik.channel.unsubscribe("winston",FB)}h_.enable=F9e;function U9e(){Ik.channel.unsubscribe("winston",FB),pm=[]}h_.dispose=U9e});var fde=k((_1t,pde)=>{"use strict";var B9e=BP(),q9e=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){B9e.IsInitialized&&(ude().enable(e&&r,this._client),lde().enable(e,this._client),dde().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();pde.exports=q9e});var hde=k((x1t,mde)=>{"use strict";var H9e=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(i,o,s){s===void 0&&(s=new Error(t._FALLBACK_ERROR_MESSAGE));var a={exception:s};a.contextObjects={},a.contextObjects.Error=s,r._client.trackException(a),r._client.flush({isAppCrashing:!0}),i&&o&&process.listeners(o).length===1&&(console.error(s),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();mde.exports=H9e});var Rk=k((E1t,gde)=>{"use strict";var wk=require("os"),_c=Mn(),j9e=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=wk.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=wk.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],l="% cpu("+a+") ",d=c.model,p=c.speed,f=c.times,m=u.times,h=f.user-m.user||0;r+=h;var g=f.sys-m.sys||0;n+=g;var v=f.nice-m.nice||0;i+=v;var b=f.idle-m.idle||0;o+=b;var y=f.irq-m.irq||0;s+=y}var E=void 0;if(typeof process.cpuUsage=="function"){var x=process.cpuUsage(),R=process.hrtime(),L=x.user-this._lastAppCpuUsage.user+(x.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var O=(R[0]-this._lastHrtime[0])*1e6+(R[1]-this._lastHrtime[1])/1e3||0;E=100*L/(O*e.length)}this._lastAppCpuUsage=x,this._lastHrtime=R}var z=r+n+i+o+s||1;this._client.trackMetric({name:_c.PerformanceCounter.PROCESSOR_TIME,value:(z-o)/z*100}),this._client.trackMetric({name:_c.PerformanceCounter.PROCESS_TIME,value:E||r/z*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=wk.freemem(),r=process.memoryUsage().rss,n=wk.totalmem()-e;this._client.trackMetric({name:_c.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:_c.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:_c.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:_c.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:_c.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:_c.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:_c.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:_c.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:_c.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:_c.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();gde.exports=j9e});var vde=k(Ak=>{"use strict";Object.defineProperty(Ak,"__esModule",{value:!0});Ak.AggregatedMetricCounter=void 0;var G9e=function(){function t(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();Ak.AggregatedMetricCounter=G9e});var yde=k(Pk=>{"use strict";Object.defineProperty(Pk,"__esModule",{value:!0});Pk.PreaggregatedMetricPropertyNames=void 0;Pk.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var BB=k((UB,bde)=>{"use strict";var Dk=UB&&UB.__assign||function(){return Dk=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dk.apply(this,arguments)},kk=Mn(),V9e=vde(),z9e=yde(),$9e=function(){function t(e,r){r===void 0&&(r=6e4),t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,t._dependencyCountersCollection=[],t._requestCountersCollection=[],t._exceptionCountersCollection=[],t._traceCountersCollection=[],this._client=e,this._collectionInterval=r}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countException=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._exceptionCountersCollection);r.totalCount++}},t.countTrace=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._traceCountersCollection);r.totalCount++}},t.countRequest=function(e,r){if(t.isEnabled()){var n,i=t._getAggregatedCounter(r,this._requestCountersCollection);if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;i.intervalExecutionTime+=n,i.totalCount++}},t.countDependency=function(e,r){if(t.isEnabled()){var n=t._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof e=="string")i=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")i=e;else return;n.intervalExecutionTime+=i,n.totalCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},t._getAggregatedCounter=function(e,r){for(var n=!1,i=0;i<r.length;i++){if(e===r[i].dimensions)return r[i];if(Object.keys(e).length===Object.keys(r[i].dimensions).length){for(var o in e)if(e[o]!=r[i].dimensions[o]){n=!0;break}if(!n)return r[i];n=!1}}var s=new V9e.AggregatedMetricCounter(e);return r.push(s),s},t.prototype._trackRequestMetrics=function(){for(var e=0;e<t._requestCountersCollection.length;e++){var r=t._requestCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:kk.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackDependencyMetrics=function(){for(var e=0;e<t._dependencyCountersCollection.length;e++){var r=t._dependencyCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:kk.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackExceptionMetrics=function(){for(var e=0;e<t._exceptionCountersCollection.length;e++){var r=t._exceptionCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:kk.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackTraceMetrics=function(){for(var e=0;e<t._traceCountersCollection.length;e++){var r=t._traceCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:kk.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackPreAggregatedMetric=function(e){var r={};for(var n in e.dimensions)r[z9e.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];r=Dk(Dk({},r),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();bde.exports=$9e});var g_=k((C1t,_de)=>{"use strict";var gp=require("os"),W9e=require("fs"),Y9e=require("path"),K9e=cs(),Q9e=Mn(),X9e=gn(),J9e=function(){function t(e){this.keys=new K9e.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){try{if(e=e||Y9e.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";var r=JSON.parse(W9e.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}this.tags[this.keys.applicationVersion]=t.appVersion[e]}catch(n){X9e.info("Failed to read app version: ",n)}},t.prototype._loadDeviceContext=function(){var e=gp&&gp.hostname(),r=t.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(r=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=e,this.tags[this.keys.deviceOSVersion]=gp&&gp.type()+" "+gp.release(),this.tags[this.keys.cloudRole]=r,this.tags["ai.device.osArchitecture"]=gp&&gp.arch(),this.tags["ai.device.osPlatform"]=gp&&gp.platform()},t.prototype._loadInternalContext=function(){t.sdkVersion=Q9e.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();_de.exports=J9e});var Sde=k((I1t,Ede)=>{"use strict";var Z9e=require("crypto"),xde=require("os"),eFe=Mn(),tFe=g_(),rFe=function(){function t(e){this._collectionInterval=9e5,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return r.trackHeartBeat(r._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n={},i=tFe.sdkVersion;n.sdkVersion=i,n.osType=xde.type(),n.osVersion=xde.release(),this._uniqueProcessId||(this._uniqueProcessId=Z9e.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:eFe.HeartBeatMetricName,value:0,properties:n}),r()},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();Ede.exports=rFe});var Tde=k(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.isContentTypeHeaderHtml=At.insertSnippetByIndex=At.getContentEncodingFromHeaders=At.isSupportedContentEncoding=At.findBufferEncodingType=At.isBufferType=At.getBrotliDecompressSync=At.getBrotliDecompressAsync=At.getBrotliCompressSync=At.getBrotliCompressAsync=At.inflateAsync=At.deflateAsync=At.gunzipAsync=At.gzipAsync=At.isBrotliSupperted=At.bufferEncodingTypes=At.contentEncodingMethod=void 0;var Lk=require("zlib"),v_=require("util"),Nk;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br"})(Nk=At.contentEncodingMethod||(At.contentEncodingMethod={}));At.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var nFe=function(){var t=process.versions.node.split(".")[0];return parseInt(t)>=10};At.isBrotliSupperted=nFe;At.gzipAsync=v_.promisify(Lk.gzip);At.gunzipAsync=v_.promisify(Lk.gunzip);At.deflateAsync=v_.promisify(Lk.deflate);At.inflateAsync=v_.promisify(Lk.inflate);var iFe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliCompress=="function"?v_.promisify(t.brotliCompress):null};At.getBrotliCompressAsync=iFe;var oFe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null};At.getBrotliCompressSync=oFe;var sFe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliDecompress=="function"?v_.promisify(t.brotliDecompress):null};At.getBrotliDecompressAsync=sFe;var aFe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null};At.getBrotliDecompressSync=aFe;var cFe=function(t,e){var r=e||"utf8",n=!1;if(Buffer.isEncoding(r)){var i=Buffer.from(t.toString(r),r);n=i.toJSON().data.toString()===t.toJSON().data.toString()}return n};At.isBufferType=cFe;var uFe=function(t){var e=null;for(var r in At.bufferEncodingTypes){var n=At.bufferEncodingTypes[r];if(Buffer.isEncoding(n)&&At.isBufferType(t,n)){e=n;break}}return e};At.findBufferEncodingType=uFe;var lFe=function(t){var e=null;switch(t){case"gzip":e=Nk.GZIP;break;case"br":e=Nk.BR;break;case"deflate":e=Nk.DEFLATE;break;default:}return e};At.isSupportedContentEncoding=lFe;var dFe=function(t){var e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){var n=At.isSupportedContentEncoding(r);n&&e.push(n)}return e};At.getContentEncodingFromHeaders=dFe;var pFe=function(t,e,r){if(t<0)return null;var n=null,i=e.substring(0,t),o=e.substring(t);return n=i+'<script type="text/javascript">'+r+"</script>"+o,n};At.insertSnippetByIndex=pFe;var fFe=function(t){var e=!1,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};At.isContentTypeHeaderHtml=fFe});var Cde=k(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.getResourceProvider=co.getOsPrefix=co.isFunctionApp=co.isWebApp=co.isLinux=co.isWindows=void 0;var mFe=function(){return process.platform==="win32"};co.isWindows=mFe;var hFe=function(){return process.platform==="linux"};co.isLinux=hFe;var gFe=function(){return!!process.env.WEBSITE_SITE_NAME};co.isWebApp=gFe;var vFe=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};co.isFunctionApp=vFe;var yFe=function(){return co.isWindows()?"w":co.isLinux()?"l":"u"};co.getOsPrefix=yFe;var bFe=function(){return co.isWebApp()?"a":co.isFunctionApp()?"f":"u"};co.getResourceProvider=bFe});var qB=k((A1t,wde)=>{"use strict";var Ide=Mn(),_Fe=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];o[c]=u}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||Ide.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||Ide.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t.isIkeyValid=function(e){if(!e||e=="")return!1;var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();wde.exports=_Fe});var Rde={};$r(Rde,{webSnippet:()=>xFe});var xFe,Ade=T(()=>{xFe=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var Ode=k((P1t,Lde)=>{"use strict";var Pde=require("http"),kde=require("https"),y_=require("zlib"),Tl=gn(),xc=Tde(),Dde=Cde(),QT=Mn(),Nde=qB(),EFe=(Ade(),Ti(Rde)),SFe=function(){function t(e){var r;if(this._isIkeyValid=!0,t.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");t.INSTANCE=this,t._aiUrl=QT.WEB_INSTRUMENTATION_DEFAULT_SOURCE,t._aiDeprecatedUrl=QT.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var n=this._getWebSnippetIkey((r=e.config)===null||r===void 0?void 0:r.webInstrumentationConnectionString);this._webInstrumentationIkey=n||e.config.instrumentationKey,this._clientWebInstrumentationConfig=e.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=e.config.webInstrumentationSrc,this._statsbeat=e.getStatsbeat()}return t.prototype.enable=function(e,r){this._isEnabled=e,this._webInstrumentationIkey=this._getWebSnippetIkey(r)||this._webInstrumentationIkey,t._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(QT.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(QT.StatsbeatFeature.WEB_SNIPPET)},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._getWebSnippetIkey=function(e){var r=null;try{var n=Nde.parse(e),i=n.instrumentationkey||"";Nde.isIkeyValid(i)?(this._isIkeyValid=!0,r=i):(this._isIkeyValid=!1,Tl.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(o){Tl.info("get web snippet ikey error: "+o)}return r},t.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),r=Dde.getOsPrefix(),n=Dde.getResourceProvider(),i=this._webInstrumentationIkey+`",\r
`+e+` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`+n+r+"d_n_",o=EFe.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?o.replace(QT.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):o},t.prototype._getClientWebInstrumentationConfigStr=function(e){var r="";try{e!=null&&e.length>0&&e.forEach(function(n){var i=n.name;if(i!==void 0){var o=n.value,s="";switch(typeof o){case"function":break;case"object":break;case"string":s=" "+i+': "'+o+`",\r
`,r+=s;break;default:s=" "+i+": "+o+`,\r
`,r+=s;break}}})}catch{this._isEnabled=!1,Tl.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return r},t.prototype._initialize=function(){this._isInitialized=!0;var e=Pde.createServer,r=kde.createServer,n=this._isEnabled;Pde.createServer=function(i){var o=i;return o&&(i=function(s,a){var c=a.write,u=s.method=="GET";a.write=function(p,f,m){try{if(n&&u){var h=xc.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(b){Tl.warn("Inject snippet error: "+b)}return c.apply(a,arguments)};var l=a.end;return a.end=function(p,f,m){if(n&&u)try{if(n&&u){var h=xc.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(b){Tl.warn("Inject snipet error: "+b)}return l.apply(a,arguments)},o(s,a)}),e(i)},kde.createServer=function(i,o){var s=o;if(s)return o=function(a,c){var u=a.method=="GET",l=c.write,d=c.end;return c.write=function(f,m,h){try{if(n&&u){var g=xc.getContentEncodingFromHeaders(c),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(c,f)&&(arguments[0]=this.InjectWebSnippet(c,f,void 0,v));else if(g.length){var b=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,b)}}}catch(y){Tl.warn("Inject snippet error: "+y)}return l.apply(c,arguments)},c.end=function(f,m,h){try{if(n&&u){var g=xc.getContentEncodingFromHeaders(c),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(c,f)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,void 0,v));else if(g.length){var b=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,f,b)}}}catch(y){Tl.warn("Inject snippet error: "+y)}return d.apply(c,arguments)},s(a,c)},r(i,o)}},t.prototype.ValidateInjection=function(e,r){try{if(!e||!r||e.statusCode!=200)return!1;var n=xc.isContentTypeHeaderHtml(e);if(!n)return!1;var i=r.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(t._aiUrl)<0&&i.indexOf(t._aiDeprecatedUrl)<0)return!0}catch(o){Tl.info("validate injections error: "+o)}return!1},t.prototype.InjectWebSnippet=function(e,r,n,i){try{var o=!!n;if(o)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else{var s=r.toString(),a=s.indexOf("</head>");if(a<0)return r;var c=xc.insertSnippetByIndex(a,s,t._snippet);if(typeof r=="string")e.removeHeader("Content-Length"),r=c,e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){var u=i||"utf8",l=xc.isBufferType(r,u);if(l){e.removeHeader("Content-Length");var d=Buffer.from(c).toString(u);r=Buffer.from(d,u),e.setHeader("Content-Length",r.length)}}}}catch(p){Tl.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+p)}return r},t.prototype._getInjectedCompressBuffer=function(e,r,n){try{switch(n){case xc.contentEncodingMethod.GZIP:var i=y_.gunzipSync(r);if(this.ValidateInjection(e,i)){var o=this.InjectWebSnippet(e,i);r=y_.gzipSync(o)}break;case xc.contentEncodingMethod.DEFLATE:var s=y_.inflateSync(r);if(this.ValidateInjection(e,s)){var a=this.InjectWebSnippet(e,s);r=y_.deflateSync(a)}break;case xc.contentEncodingMethod.BR:var c=xc.getBrotliDecompressSync(y_),u=xc.getBrotliCompressSync(y_);if(c&&u){var l=c(r);if(this.ValidateInjection(e,l)){var d=this.InjectWebSnippet(e,l);r=u(d)}break}}}catch(p){Tl.info("get web injection compress buffer error: "+p)}return r},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();Lde.exports=SFe});var Fde=k((jB,Mde)=>{"use strict";var TFe=jB&&jB.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ec=require("url"),HB=cs(),CFe=No(),IFe=Vb(),wFe=bU(),RFe=I0(),AFe=function(t){TFe(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=CFe.getCorrelationContextTarget(r,IFe.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=this.method.toUpperCase(),o=HB.RemoteDependencyDataConstants.TYPE_HTTP,s="";try{var a=new Ec.URL(this.url);a.search=void 0,a.hash=void 0,i+=" "+a.pathname,s=a.hostname,a.port&&(s+=":"+a.port)}catch{}this.correlationId?(o=HB.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==RFe.correlationIdPrefix&&(s+=" | "+this.correlationId)):o=HB.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(r&&r.time?c.time=r.time:this.startTime&&(c.time=new Date(this.startTime)),r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)try{r=new Ec.URL(r)}catch{}else try{var i=new Ec.URL("http://"+r);i.port==="443"?r=new Ec.URL("https://"+r):r=new Ec.URL("http://"+r)}catch{}else{if(r&&typeof Ec.URL=="function"&&r instanceof Ec.URL)return Ec.format(r);var o=r;r={},o&&Object.keys(o).forEach(function(c){r[c]=o[c]})}if(r.path&&r.host)try{var s=new Ec.URL(r.path,"http://"+r.host+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.path&&r.hostname&&!r.host)try{var s=new Ec.URL(r.path,"http://"+r.hostname+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.host&&r.port)try{var a=new Ec.URL("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}catch{}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",Ec.format(r)},e}(wFe);Mde.exports=AFe});var Ude=k(b_=>{"use strict";var Ok=b_&&b_.__assign||function(){return Ok=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ok.apply(this,arguments)};Object.defineProperty(b_,"__esModule",{value:!0});b_.parseEventHubSpan=void 0;var GB=(tr(),Ti(Lb)),PFe=(ks(),Ti(pse)),kFe=(vu(),Ti(s7)),XT=Mn(),DFe=function(t){var e=0,r=0,n=PFe.hrTimeToMilliseconds(t.startTime);return t.links.forEach(function(i){var o=i.attributes,s=o?.[XT.ENQUEUED_TIME];s&&(e+=1,r+=n-(parseFloat(s.toString())||0))}),Math.max(r/(e||1),0)},NFe=function(t,e){var r,n=t.attributes[XT.AzNamespace],i=(t.attributes[kFe.SemanticAttributes.NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=t.attributes[XT.MessageBusDestination]||"unknown";switch(t.kind){case GB.SpanKind.CLIENT:e.dependencyTypeName=n,e.target=i+"/"+o;break;case GB.SpanKind.PRODUCER:e.dependencyTypeName=XT.DependencyTypeName.QueueMessage+" | "+n,e.target=i+"/"+o;break;case GB.SpanKind.CONSUMER:e.source=i+"/"+o,e.measurements=Ok(Ok({},e.measurements),(r={},r[XT.TIME_SINCE_ENQUEUED]=DFe(t),r));break;default:}};b_.parseEventHubSpan=NFe});var Hde=k(Mk=>{"use strict";Object.defineProperty(Mk,"__esModule",{value:!0});Mk.spanToTelemetryContract=void 0;var Bde=require("url"),Eu=(tr(),Ti(Lb)),Bt=(vu(),Ti(s7)),vp=Mn(),LFe=Ude(),OFe=No();function MFe(t){for(var e={},r=0,n=Object.keys(t.attributes);r<n.length;r++){var i=n[r];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(e[i]=t.attributes[i])}var o=t.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(e["_MS.links"]=OFe.stringify(o)),e}function FFe(t){return t===Bt.DbSystemValues.DB2||t===Bt.DbSystemValues.DERBY||t===Bt.DbSystemValues.MARIADB||t===Bt.DbSystemValues.MSSQL||t===Bt.DbSystemValues.ORACLE||t===Bt.DbSystemValues.SQLITE||t===Bt.DbSystemValues.OTHER_SQL||t===Bt.DbSystemValues.HSQLDB||t===Bt.DbSystemValues.H2}function qde(t){var e=t.attributes[Bt.SemanticAttributes.HTTP_METHOD];if(e){var r=t.attributes[Bt.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=t.attributes[Bt.SemanticAttributes.HTTP_SCHEME],i=t.attributes[Bt.SemanticAttributes.HTTP_TARGET];if(n&&i){var o=t.attributes[Bt.SemanticAttributes.HTTP_HOST];if(o)return n+"://"+o+i;var s=t.attributes[Bt.SemanticAttributes.NET_PEER_PORT];if(s){var a=t.attributes[Bt.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var c=t.attributes[Bt.SemanticAttributes.NET_PEER_IP];if(c)return n+"://"+c+":"+s+i}}}return""}function VB(t){var e=t.attributes[Bt.SemanticAttributes.PEER_SERVICE],r=t.attributes[Bt.SemanticAttributes.HTTP_HOST],n=t.attributes[Bt.SemanticAttributes.HTTP_URL],i=t.attributes[Bt.SemanticAttributes.NET_PEER_NAME],o=t.attributes[Bt.SemanticAttributes.NET_PEER_IP];return e?String(e):r?String(r):n?String(n):i?String(i):o?String(o):""}function UFe(t){var e={name:t.name,success:t.status.code!=Eu.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};t.kind===Eu.SpanKind.PRODUCER&&(e.dependencyTypeName=vp.DependencyTypeName.QueueMessage),t.kind===Eu.SpanKind.INTERNAL&&t.parentSpanId&&(e.dependencyTypeName=vp.DependencyTypeName.InProc);var r=t.attributes[Bt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Bt.SemanticAttributes.DB_SYSTEM],i=t.attributes[Bt.SemanticAttributes.RPC_SYSTEM];if(r){e.dependencyTypeName=vp.DependencyTypeName.Http;var o=t.attributes[Bt.SemanticAttributes.HTTP_URL];if(o){var s="";try{var a=new Bde.URL(String(o));s=a.pathname}catch{}e.name=r+" "+s}e.data=qde(t);var c=t.attributes[Bt.SemanticAttributes.HTTP_STATUS_CODE];c&&(e.resultCode=String(c));var u=VB(t);if(u){try{var l=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),d=l.exec(u);if(d!=null){var p=d[1],f=d[3];(p=="https"&&f==":443"||p=="http"&&f==":80")&&(u=d[1]+d[2]+d[4])}}catch{}e.target=""+u}}else if(n){String(n)===Bt.DbSystemValues.MYSQL?e.dependencyTypeName="mysql":String(n)===Bt.DbSystemValues.POSTGRESQL?e.dependencyTypeName="postgresql":String(n)===Bt.DbSystemValues.MONGODB?e.dependencyTypeName="mongodb":String(n)===Bt.DbSystemValues.REDIS?e.dependencyTypeName="redis":FFe(String(n))?e.dependencyTypeName="SQL":e.dependencyTypeName=String(n);var m=t.attributes[Bt.SemanticAttributes.DB_STATEMENT],h=t.attributes[Bt.SemanticAttributes.DB_OPERATION];m?e.data=String(m):h&&(e.data=String(h));var u=VB(t),g=t.attributes[Bt.SemanticAttributes.DB_NAME];u?e.target=g?u+"|"+g:""+u:e.target=g?""+g:""+n}else if(i){e.dependencyTypeName=vp.DependencyTypeName.Grpc;var v=t.attributes[Bt.SemanticAttributes.RPC_GRPC_STATUS_CODE];v&&(e.resultCode=String(v));var u=VB(t);u?e.target=""+u:i&&(e.target=String(i))}return e}function BFe(t){var e={name:t.name,success:t.status.code!=Eu.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=t.attributes[Bt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Bt.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){if(t.kind==Eu.SpanKind.SERVER){var i=t.attributes[Bt.SemanticAttributes.HTTP_ROUTE],o=t.attributes[Bt.SemanticAttributes.HTTP_URL];if(i)e.name=r+" "+i;else if(o)try{var s=new Bde.URL(String(o));e.name=r+" "+s.pathname}catch{}}e.url=qde(t);var a=t.attributes[Bt.SemanticAttributes.HTTP_STATUS_CODE];a&&(e.resultCode=String(a))}else n&&(e.resultCode=String(n));return e}function qFe(t){var e;switch(t.kind){case Eu.SpanKind.CLIENT:case Eu.SpanKind.PRODUCER:case Eu.SpanKind.INTERNAL:e=UFe(t);break;case Eu.SpanKind.SERVER:case Eu.SpanKind.CONSUMER:e=BFe(t);break}var r=t.spanContext?t.spanContext():t.context(),n=""+r.spanId,i=Math.round(t.duration[0]*1e3+t.duration[1]/1e6);return e.id=n,e.duration=i,e.properties=MFe(t),t.attributes[vp.AzNamespace]&&(t.kind===Eu.SpanKind.INTERNAL&&(e.dependencyTypeName=vp.DependencyTypeName.InProc+" | "+t.attributes[vp.AzNamespace]),t.attributes[vp.AzNamespace]===vp.MicrosoftEventHub&&LFe.parseEventHubSpan(t,e)),e}Mk.spanToTelemetryContract=qFe});var Gde=k(mm=>{"use strict";var __=mm&&mm.__assign||function(){return __=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},__.apply(this,arguments)};Object.defineProperty(mm,"__esModule",{value:!0});mm.AsyncScopeManager=mm.OpenTelemetryScopeManagerWrapper=void 0;var fm=um(),HFe=require("events"),jde=function(){function t(){}return t.prototype.active=function(){var e=this,r=fm.CorrelationContextManager.getCurrentContext();return __(__({},r),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,o=t._spanToContext(e,n,i);return fm.CorrelationContextManager.runWithContext(o,r)()},t.prototype.bind=function(e){return typeof e=="function"?fm.CorrelationContextManager.wrapCallback(e):(e instanceof HFe.EventEmitter&&fm.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return fm.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return fm.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=e.spanContext?e.spanContext():e.context(),o=__(__({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),s=r?"|"+i.traceId+"."+r+".":i.traceId,a=fm.CorrelationContextManager.getCurrentContext();a&&(o.traceId=a.operation.id,r||(s=a.operation.parentId));var c=fm.CorrelationContextManager.spanToContextObject(o,s,n);return c},t}();mm.OpenTelemetryScopeManagerWrapper=jde;mm.AsyncScopeManager=new jde});var Vde=k(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.enable=hm.subscriber=void 0;var JT=(tr(),Ti(Lb)),jFe=Mn(),zB=Jn(),GFe=Hde(),VFe=Gde(),F0=[],zFe=function(t){try{var e=t.data,r=GFe.spanToTelemetryContract(e);VFe.AsyncScopeManager.with(e,function(){F0.forEach(function(n){e.kind===JT.SpanKind.SERVER||e.kind===JT.SpanKind.CONSUMER?n.trackRequest(r):(e.kind===JT.SpanKind.CLIENT||e.kind===JT.SpanKind.INTERNAL||e.kind===JT.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch{}};hm.subscriber=zFe;function $Fe(t,e){if(t){var r=F0.find(function(n){return n==e});if(r)return;F0.length===0&&zB.channel.subscribe("azure-coretracing",hm.subscriber,zB.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(jFe.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),F0.push(e)}else F0=F0.filter(function(n){return n!=e}),F0.length===0&&zB.channel.unsubscribe("azure-coretracing",hm.subscriber)}hm.enable=$Fe});var zde=k(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0});gm.enable=gm.subscriber=void 0;var WFe=Mn(),$B=Jn(),U0=[],YFe=function(t){t.data.event.commandName!=="ismaster"&&U0.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};gm.subscriber=YFe;function KFe(t,e){if(t){var r=U0.find(function(n){return n==e});if(r)return;U0.length===0&&$B.channel.subscribe("mongodb",gm.subscriber,$B.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(WFe.StatsbeatInstrumentation.MONGODB)}),U0.push(e)}else U0=U0.filter(function(n){return n!=e}),U0.length===0&&$B.channel.unsubscribe("mongodb",gm.subscriber)}gm.enable=KFe});var $de=k(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.enable=vm.subscriber=void 0;var QFe=Mn(),WB=Jn(),B0=[],XFe=function(t){B0.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};vm.subscriber=XFe;function JFe(t,e){if(t){var r=B0.find(function(n){return n==e});if(r)return;B0.length===0&&WB.channel.subscribe("mysql",vm.subscriber,WB.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(QFe.StatsbeatInstrumentation.MYSQL)}),B0.push(e)}else B0=B0.filter(function(n){return n!=e}),B0.length===0&&WB.channel.unsubscribe("mysql",vm.subscriber)}vm.enable=JFe});var Wde=k(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.enable=ym.subscriber=void 0;var ZFe=Mn(),YB=Jn(),q0=[],e7e=function(t){q0.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};ym.subscriber=e7e;function t7e(t,e){if(t){var r=q0.find(function(n){return n==e});if(r)return;q0.length===0&&YB.channel.subscribe("redis",ym.subscriber,YB.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(ZFe.StatsbeatInstrumentation.REDIS)}),q0.push(e)}else q0=q0.filter(function(n){return n!=e}),q0.length===0&&YB.channel.unsubscribe("redis",ym.subscriber)}ym.enable=t7e});var Yde=k(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.enable=bm.subscriber=void 0;var r7e=Mn(),KB=Jn(),H0=[],n7e=function(t){H0.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,o=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};bm.subscriber=n7e;function i7e(t,e){if(t){var r=H0.find(function(n){return n==e});if(r)return;H0.length===0&&KB.channel.subscribe("postgres",bm.subscriber,KB.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(r7e.StatsbeatInstrumentation.POSTGRES)}),H0.push(e)}else H0=H0.filter(function(n){return n!=e}),H0.length===0&&KB.channel.unsubscribe("postgres",bm.subscriber)}bm.enable=i7e});var S_=k((XB,Kde)=>{"use strict";var Fk=XB&&XB.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},x_=require("http"),E_=require("https"),Uk=gn(),QB=No(),_m=Vb(),o7e=Fde(),ZT=um(),Bk=qP(),s7e=BP(),eC=I0(),a7e=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),s7e.IsInitialized&&(Vde().enable(e,this._client),zde().enable(e,this._client),$de().enable(e,this._client),Wde().enable(e,this._client),Yde().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=x_.request,n=E_.request,i=function(o,s){try{var a=!s[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag],c=null;if(s.headers&&(c=s.headers["User-Agent"]||s.headers["user-agent"],c&&c.toString().indexOf("azsdk-js")!==-1&&(a=!1)),o&&s&&a&&(ZT.CorrelationContextManager.wrapEmitter(o),e._isEnabled))if(o[t.alreadyAutoCollectedFlag]=!0,ZT.CorrelationContextManager.getCurrentContext())t.trackRequest(e._client,{options:s,request:o});else{var u=null;if(eC.w3cEnabled){var l=new Bk;u=l.traceId}else{var d=eC.generateRequestId(null);u=eC.getRootId(d)}var p=ZT.CorrelationContextManager.generateContextObject(u);ZT.CorrelationContextManager.runWithContext(p,function(){t.trackRequest(e._client,{options:s,request:o})})}}catch(f){Uk.warn("Failed to generate dependency telemetry.",QB.dumpObj(f))}};x_.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=r.call.apply(r,Fk([x_,o],s));return i(c,o),c},E_.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var c=n.call.apply(n,Fk([E_,o],s));return i(c,o),c},x_.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=x_.request).call.apply(s,Fk([x_,o],a));return u.end(),u},E_.get=function(o){for(var s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(s=E_.request).call.apply(s,Fk([E_,o],a));return u.end(),u}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){Uk.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new o7e(r.options,r.request),i=ZT.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&Bk.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(eC.w3cEnabled){var a=new Bk;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(QB.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var c=r.request.getHeader(_m.requestContextHeader);try{QB.safeIncludeCorrelationHeader(e,r.request,c)}catch(d){Uk.warn("Request-Context header could not be set. Correlation of requests may be lost",d)}if(i&&i.operation)try{if(r.request.setHeader(_m.requestIdHeader,o),e.config.ignoreLegacyHeaders||(r.request.setHeader(_m.parentIdHeader,i.operation.id),r.request.setHeader(_m.rootIdHeader,o)),s||i.operation.traceparent)r.request.setHeader(_m.traceparentHeader,s||i.operation.traceparent.toString());else if(eC.w3cEnabled){var a=new Bk().toString();r.request.setHeader(_m.traceparentHeader,a)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(_m.traceStateHeader,u)}var l=i.customProperties.serializeToHeader();l&&r.request.setHeader(_m.correlationContextHeader,l)}catch(d){Uk.warn("Correlation headers could not be set. Correlation of requests may be lost.",d)}}r.request.on&&(r.request.on("response",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onResponse(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects["http.ClientResponse"]=d,e.trackDependency(p)}}),r.request.on("error",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onError(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects.Error=d,e.trackDependency(p)}}),r.request.on("abort",function(){if(!r.isProcessed){r.isProcessed=!0,n.onError(new Error("The request has been aborted and the network socket has closed."));var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,e.trackDependency(d)}}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();Kde.exports=a7e});var ZB=k((B1t,epe)=>{"use strict";var Qde=require("http"),Xde=require("https"),Jde=gn(),Zde=No(),c7e=Vb(),JB=SU(),yp=um(),u7e=Rk(),l7e=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||u7e.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?yp.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&yp.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return yp.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._registerRequest=function(e,r,n){var i=this,o=new JB(e),s=this._generateCorrelationContext(o);yp.CorrelationContextManager.runWithContext(s,function(){i._isEnabled&&(e[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(i._client,{request:e,response:r},o)),typeof n=="function"&&n(e,r)})},t.prototype._initialize=function(){if(this._isInitialized=!0,!t.HANDLER_READY){t.HANDLER_READY=!0;var e=function(o){if(o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(s,a){yp.CorrelationContextManager.wrapEmitter(s),yp.CorrelationContextManager.wrapEmitter(a);var c=s&&!s[t.alreadyAutoCollectedFlag];s&&c&&t.INSTANCE?t.INSTANCE._registerRequest(s,a,o):o(s,a)}}},r=function(o){var s=o.addListener.bind(o);o.addListener=function(a,c){switch(a){case"request":case"checkContinue":return s(a,e(c));default:return s(a,c)}},o.on=o.addListener},n=Qde.createServer;Qde.createServer=function(o,s){if(s&&typeof s=="function"){var a=n(o,e(s));return r(a),a}else{var a=n(e(o));return r(a),a}};var i=Xde.createServer;Xde.createServer=function(o,s){var a=i(o,e(s));return r(a),a}}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){Jde.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1,t.addResponseCorrelationIdHeader(e,r.response);var n=yp.CorrelationContextManager.getCurrentContext(),i=new JB(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){Jde.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1;var i=yp.CorrelationContextManager.getCurrentContext(),o=n||new JB(r.request,i&&i.operation.parentId);Zde.canIncludeCorrelationHeader(e,o.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){t.endRequest(e,o,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";t.endRequest(e,o,r,null,s)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(c7e.requestContextHeader);Zde.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,o){if(!n.isProcessed){n.isProcessed=!0,o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var c=r.getLegacyRootId();c&&(s.properties.ai_legacyRootId=c),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,yp.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.HANDLER_READY=!1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();epe.exports=l7e});var npe=k((tq,rpe)=>{"use strict";var Sc=tq&&tq.__assign||function(){return Sc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sc.apply(this,arguments)},eq=require("os"),j0=cs(),tpe=Mn(),d7e=No(),p7e=gn(),f7e=d7e.w3cTraceId(),m7e=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var o=eq&&typeof eq.hostname=="function"&&eq.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,c={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:f7e,MachineName:o,Instance:s,RoleName:a};return c},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case j0.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case j0.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case j0.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case j0.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case j0.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=Sc(Sc({},r),{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=Sc(Sc({},r),{Message:e.data.baseData.message,SeverityLevel:j0.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=Sc(Sc({},r),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Sc(Sc({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Sc(Sc({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,o;e.data.baseType?(n=tpe.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=tpe.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):p7e.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],o=t.aggregateProperties(e);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},t.keys=new j0.ContextTagKeys,t}();rpe.exports=m7e});var ope=k((q1t,ipe)=>{"use strict";var h7e=function(){return(Date.now()+621355968e5)*1e4};ipe.exports={getTransmissionTime:h7e}});var upe=k((tC,cpe)=>{"use strict";var spe=tC&&tC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},ape=tC&&tC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},g7e=require("https"),v7e=S_(),rq=gn(),y7e=ope(),nq=No(),b7e=require("url"),Tc={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},_7e=function(){function t(e,r){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=r}return t.prototype.ping=function(e,r,n){var i=[{name:Tc.streamId,value:e.StreamId},{name:Tc.machineName,value:e.MachineName},{name:Tc.roleName,value:e.RoleName},{name:Tc.instanceName,value:e.Instance},{name:Tc.invariantVersion,value:e.InvariantVersion.toString()}];this._submitData(e,r,n,"ping",i)},t.prototype.post=function(e,r,n){return spe(this,void 0,void 0,function(){return ape(this,function(i){switch(i.label){case 0:return[4,this._submitData([e],r,n,"post")];case 1:return i.sent(),[2]}})})},t.prototype._submitData=function(e,r,n,i,o){return spe(this,void 0,void 0,function(){var s,a,c,u,l,d,p,f,m=this;return ape(this,function(h){switch(h.label){case 0:if(s=nq.stringify(e),a=(p={},p[v7e.disableCollectionRequestOption]=!0,p.host=r&&r.length>0?r:this._config.quickPulseHost,p.method=Tc.method,p.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,p.headers=(f={Expect:"100-continue"},f[Tc.time]=y7e.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),p),o&&o.length>0&&o.forEach(function(g){return a.headers[g.name]=g.value}),i!=="post")return[3,4];if(c=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!c)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,c.addAuthorizationHeader(a)];case 2:return h.sent(),[3,4];case 3:return u=h.sent(),l="Failed to get AAD bearer token for the Application. Error:",rq.info(t.TAG,l,u),[2];case 4:return this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=nq.tlsRestrictedAgent,d=g7e.request(a,function(g){if(g.statusCode==200){var v=g.headers[Tc.subscribed]==="true",b=null;try{b=g.headers[Tc.endpointRedirect]?new b7e.URL(g.headers[Tc.endpointRedirect].toString()).host:null}catch(E){m._onError("Failed to parse redirect header from QuickPulse: "+nq.dumpObj(E))}var y=g.headers[Tc.pollingIntervalHint]?parseInt(g.headers[Tc.pollingIntervalHint].toString()):null;m._consecutiveErrors=0,n(v,g,b,y)}else m._onError("StatusCode:"+g.statusCode+" StatusMessage:"+g.statusMessage),n()}),d.on("error",function(g){m._onError(g),n()}),d.write(s),d.end(),[2]}})})},t.prototype._onError=function(e){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",rq.warn(t.TAG,r,e)):rq.info(t.TAG,r,e)},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();cpe.exports=_7e});var mpe=k((rC,fpe)=>{"use strict";var lpe=rC&&rC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},dpe=rC&&rC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ppe=gn(),iq=npe(),x7e=upe(),E7e=Mn(),S7e=g_(),T7e=function(){function t(e,r,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=r||new S7e,this._sender=new x7e(this.config,n),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){if(this._isCollectingData){var r=iq.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)}},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=E7e.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=iq.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){return lpe(this,void 0,void 0,function(){var e,r,n,i,o=this;return dpe(this,function(s){switch(s.label){case 0:return e=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),r=iq.createQuickPulseEnvelope(e,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:t.PING_INTERVAL,i=this._isCollectingData?t.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},t.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},t.prototype._post=function(e){return lpe(this,void 0,void 0,function(){return dpe(this,function(r){switch(r.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},t.prototype._quickPulseDone=function(e,r,n,i){e!=null?(this._isCollectingData!==e&&(ppe.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,ppe.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();fpe.exports=T7e});var hpe=k(T_=>{"use strict";var qk=T_&&T_.__assign||function(){return qk=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qk.apply(this,arguments)};Object.defineProperty(T_,"__esModule",{value:!0});T_.AutoCollectNativePerformance=void 0;var nC=g_(),C7e=gn(),I7e=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),t._metricsAvailable==null&&e&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");t._emitter=new o,t._metricsAvailable=!0,C7e.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e,r){var n=r.disableAllExtendedMetrics,i=r.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++){var u=c[a];s[u]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:qk(qk({},e),s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){var e;if(!this._disabledMetrics.gc){var r=t._emitter.getGCData();for(var n in r){var i=r[n].metrics,o=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+nC.sdkVersion,e)})}}},t.prototype._trackEventLoop=function(){var e;if(!this._disabledMetrics.loop){var r=t._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:o,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+nC.sdkVersion,e)})}}},t.prototype._trackHeapUsage=function(){var e,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+nC.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+nC.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+nC.sdkVersion,n)})}},t}();T_.AutoCollectNativePerformance=I7e});var ype=k(xm=>{"use strict";var gpe=xm&&xm.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},vpe=xm&&xm.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(xm,"__esModule",{value:!0});xm.AzureFunctionsHook=void 0;var Hk=gn(),oq=um(),w7e=function(){function t(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core"),this._addPreInvocationHook(),this._addPostInvocationHook()}catch{Hk.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return t.prototype._getFuncModelHelper=function(){if(this._cachedModelHelper===void 0){var e=this._functionsCoreModule.getProgrammingModel();e.name==="@azure/functions"&&(e.version.startsWith("3.")?this._cachedModelHelper=new R7e:e.version.startsWith("4.")&&(this._cachedModelHelper=new A7e)),this._cachedModelHelper||(this._cachedModelHelper=null,Hk.warn('AzureFunctionsHook does not support model "'+e.name+'" version "'+e.version+'"'))}return this._cachedModelHelper},t.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},t.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},t.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(r){return gpe(e,void 0,void 0,function(){var n,i,o,s;return vpe(this,function(a){try{n=this._getFuncModelHelper(),n&&(i=r.invocationContext,o=oq.CorrelationContextManager.startOperation(i),o&&(o.customProperties.setProperty("InvocationId",i.invocationId),s=i.traceContext,s.attributes&&(o.customProperties.setProperty("ProcessId",s.attributes.ProcessId),o.customProperties.setProperty("LogLevel",s.attributes.LogLevel),o.customProperties.setProperty("Category",s.attributes.Category),o.customProperties.setProperty("HostInstanceId",s.attributes.HostInstanceId),o.customProperties.setProperty("AzFuncLiveLogsSessionId",s.attributes["#AzFuncLiveLogsSessionId"])),r.functionCallback=oq.CorrelationContextManager.wrapCallback(r.functionCallback,o),n.isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(r.hookData.appInsightsExtractedContext=o,r.hookData.appInsightsStartTime=Date.now())))}catch(c){return Hk.warn("Failed to propagate context in Azure Functions",c),[2]}return[2]})})}))},t.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(r){return gpe(e,void 0,void 0,function(){var n,i,o,s,a=this;return vpe(this,function(c){try{n=this._getFuncModelHelper(),n&&this._autoGenerateIncomingRequests&&n.isHttpTrigger(r)&&(i=r.inputs[0],i&&(o=r.hookData.appInsightsStartTime||Date.now(),s=r.hookData.appInsightsExtractedContext,s?oq.CorrelationContextManager.runWithContext(s,function(){a._createIncomingRequestTelemetry(i,r,o,s.operation.parentId)}):this._createIncomingRequestTelemetry(i,r,o,null)))}catch(u){Hk.warn("Error creating automatic incoming request in Azure Functions",u)}return[2]})})}))},t.prototype._createIncomingRequestTelemetry=function(e,r,n,i){var o=this._getFuncModelHelper().getStatusCodes(r),s=200;if(o)for(var a=0,c=o;a<c.length;a++){var u=c[a];if(typeof u=="number"&&Number.isInteger(u)){s=u;break}else if(typeof u=="string"){var l=parseInt(u);if(!isNaN(l)){s=l;break}}}else s=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:s,success:typeof s=="number"?0<s&&s<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:i}),this._client.flush()},t.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},t}();xm.AzureFunctionsHook=w7e;var R7e=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=this._getInvocationContext(e),n,i=r.bindingDefinitions.find(function(o){return o.direction==="out"&&o.type.toLowerCase()==="http"});return i?.name==="$return"?n=e.result:i&&r.bindings&&r.bindings[i.name]!==void 0?n=r.bindings[i.name]:n=r.res,n?[n.statusCode,n.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return!!r.bindingDefinitions.find(function(n){var i;return((i=n.type)===null||i===void 0?void 0:i.toLowerCase())==="httptrigger"})},t}(),A7e=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=e.result;return r?[r.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return r.options.trigger.type.toLowerCase()==="httptrigger"},t}()});var sq=k((G1t,xpe)=>{"use strict";var P7e=I0(),bpe=qB(),k7e=gn(),_pe=Mn(),D7e=require("url"),N7e=NA(),L7e=function(){function t(e){this._endpointBase=_pe.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var r=this._connectionString,n=bpe.parse(e),i=bpe.parse(r),o=!n.instrumentationkey&&Object.keys(n).length>0?null:e,s=this._instrumentationKey;this.instrumentationKey=n.instrumentationkey||o||i.instrumentationkey||s;var a=""+(this.endpointUrl||n.ingestionendpoint||i.ingestionendpoint||this._endpointBase);a.endsWith("/")&&(a=a.slice(0,-1)),this.endpointUrl=a+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=n.ingestionendpoint||i.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||n.liveendpoint||i.liveendpoint||process.env[t.ENV_quickPulseHost]||_pe.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new D7e.URL(this.quickPulseHost).host),this.aadAudience=n.aadaudience||i.aadaudience}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=P7e.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(e){t._validateInstrumentationKey(e)||k7e.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),t.prototype._mergeConfig=function(){var e=N7e.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t}();xpe.exports=L7e});function jk(){return aq.create()}var Epe,aq,cq=T(()=>{Epe=new Set(["Deserialize","Serialize","Retry","Sign"]),aq=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!Epe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!Epe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,s)=>a=>s.sendRequest(a,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),o=n("None"),s=n("Deserialize"),a=n("Retry"),c=n("Sign"),u=[i,o,s,a,c];function l(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?s:m==="Sign"?c:o}for(let m of this._policies){let h=m.policy,g=m.options,v=h.name;if(r.has(v))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:h,dependsOn:new Set,dependants:new Set};g.afterPhase&&(b.afterPhase=l(g.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(v,b),l(g.phase).policies.add(b)}for(let m of this._policies){let{policy:h,options:g}=m,v=h.name,b=r.get(v);if(!b)throw new Error(`Missing node for policy ${v}`);if(g.afterPolicies)for(let y of g.afterPolicies){let E=r.get(y);E&&(b.dependsOn.add(E),E.dependants.add(b))}if(g.beforePolicies)for(let y of g.beforePolicies){let E=r.get(y);E&&(E.dependsOn.add(b),b.dependants.add(E))}}function d(m){m.hasRun=!0;for(let h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){e.push(h.policy);for(let g of h.dependants)g.dependsOn.delete(h);r.delete(h.policy.name),m.policies.delete(h)}}function p(){for(let m of u){if(d(m),m.policies.size>0&&m!==o){o.hasRun||d(o);return}m.hasAfterPolicies&&d(o)}}let f=0;for(;r.size>0;){f++;let m=e.length;if(p(),e.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}});function Cpe(t,...e){process.stderr.write(`${Tpe.default.format(t,...e)}${Spe.EOL}`)}var Spe,Tpe,Ipe=T(()=>{Spe=require("os"),Tpe=fe(require("util"))});function dq(t){Rpe=t,uq=[],lq=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?lq.push(new RegExp(`^${n.substr(1)}$`)):uq.push(new RegExp(`^${n}$`));for(let n of Gk)n.enabled=pq(n.namespace)}function pq(t){if(t.endsWith("*"))return!0;for(let e of lq)if(e.test(t))return!1;for(let e of uq)if(e.test(t))return!0;return!1}function O7e(){let t=Rpe||"";return dq(""),t}function Ppe(t){let e=Object.assign(r,{enabled:pq(t),destroy:M7e,log:Ape.log,namespace:t,extend:F7e});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return Gk.push(e),e}function M7e(){let t=Gk.indexOf(this);return t>=0?(Gk.splice(t,1),!0):!1}function F7e(t){let e=Ppe(`${this.namespace}:${t}`);return e.log=this.log,e}var wpe,Rpe,uq,lq,Gk,Ape,C_,kpe=T(()=>{Ipe();wpe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,uq=[],lq=[],Gk=[];wpe&&dq(wpe);Ape=Object.assign(t=>Ppe(t),{enable:dq,enabled:pq,disable:O7e,log:Cpe});C_=Ape});function U7e(t){if(t&&!Mpe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${hq.join(",")}`);fq=t;let e=[];for(let r of Npe)Ope(r)&&e.push(r.namespace);C_.enable(e.join(","))}function $k(t){let e=mq.extend(t);return Lpe(mq,e),{error:zk(e,"error"),warning:zk(e,"warning"),info:zk(e,"info"),verbose:zk(e,"verbose")}}function Lpe(t,e){e.log=(...r)=>{t.log(...r)}}function zk(t,e){let r=Object.assign(t.extend(e),{level:e});if(Lpe(t,r),Ope(r)){let n=C_.disable();C_.enable(n+","+r.namespace)}return Npe.add(r),r}function Ope(t){return!!(fq&&Dpe[t.level]<=Dpe[fq])}function Mpe(t){return hq.includes(t)}var Npe,Vk,fq,mq,hq,Dpe,gq=T(()=>{kpe();Npe=new Set,Vk=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,mq=C_("azure");mq.log=(...t)=>{C_.log(...t)};hq=["verbose","info","warning","error"];Vk&&(Mpe(Vk)?U7e(Vk):console.error(`AZURE_LOG_LEVEL set to unknown log level '${Vk}'; logging is not enabled. Acceptable values: ${hq.join(", ")}.`));Dpe={verbose:400,info:300,warning:200,error:100}});var Fo,I_=T(()=>{gq();Fo=$k("core-rest-pipeline")});var vq,Wk,Fpe=T(()=>{Wk=typeof process<"u"&&!!process.version&&!!(!((vq=process.versions)===null||vq===void 0)&&vq.node)});function yq(t){if(t.aborted)return;t.onabort&&t.onabort.call(t);let e=w_.get(t);e&&e.slice().forEach(r=>{r.call(t,{type:"abort"})}),Yk.set(t,!0)}var w_,Yk,iC,Upe=T(()=>{w_=new WeakMap,Yk=new WeakMap,iC=class t{constructor(){this.onabort=null,w_.set(this,[]),Yk.set(this,!1)}get aborted(){if(!Yk.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return Yk.get(this)}static get none(){return new t}addEventListener(e,r){if(!w_.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");w_.get(this).push(r)}removeEventListener(e,r){if(!w_.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let n=w_.get(this),i=n.indexOf(r);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}});var Cl,oC,Bpe=T(()=>{Upe();Cl=class extends Error{constructor(e){super(e),this.name="AbortError"}},oC=class{constructor(e){if(this._signal=new iC,!!e){Array.isArray(e)||(e=arguments);for(let r of e)r.aborted?this.abort():r.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){yq(this._signal)}static timeout(e){let r=new iC,n=setTimeout(yq,e,r);return typeof n.unref=="function"&&n.unref(),r}}});var Kk=T(()=>{Bpe()});function bq(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var qpe=T(()=>{});function sC(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}var _q=T(()=>{});function R_(t){if(sC(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}function A_(t){if(R_(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}var Hpe=T(()=>{_q()});var P_=T(()=>{Fpe();qpe();_q();Hpe()});var xq,B7e,q7e,k_,Eq=T(()=>{P_();xq="REDACTED",B7e=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],q7e=["api-version"],k_=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=B7e.concat(e),r=q7e.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||sC(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=xq;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=xq;return r}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,xq);return r.toString()}}});function Qk(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:Fo.info,n=new k_({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Sq,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let s=await o(i);return r(`Response status code: ${s.status}`),r(`Headers: ${n.sanitize(s.headers)}`),s}}}var Sq,Tq=T(()=>{I_();Eq();Sq="logPolicy"});function Xk(t={}){let{maxRetries:e=20}=t;return{name:Cq,async sendRequest(r,n){let i=await n(r);return Gpe(n,i,e)}}}async function Gpe(t,e,r,n=0){let{request:i,status:o,headers:s}=e,a=s.get("location");if(a&&(o===300||o===301&&jpe.includes(i.method)||o===302&&jpe.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let c=new URL(a,i.url);i.url=c.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return Gpe(t,u,r,n+1)}return e}var Cq,jpe,Iq=T(()=>{Cq="redirectPolicy",jpe=["GET","HEAD"]});function Vpe(){return"User-Agent"}function zpe(t){t.set("Node",process.version),t.set("OS",`(${D_.arch()}-${D_.type()}-${D_.release()})`)}var D_,$pe=T(()=>{D_=fe(require("os"))});var Jk,wq=T(()=>{Jk="1.10.1"});function H7e(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}function Wpe(){return Vpe()}function Zk(t){let e=new Map;e.set("core-rest-pipeline",Jk),zpe(e);let r=H7e(e);return t?`${t} ${r}`:r}var Rq=T(()=>{$pe();wq()});function eD(t={}){let e=Zk(t.userAgentPrefix);return{name:Aq,async sendRequest(r,n){return r.headers.has(Ype)||r.headers.set(Ype,e),n(r)}}}var Ype,Aq,Pq=T(()=>{Rq();Ype=Wpe(),Aq="userAgentPolicy"});function tD(){return{name:kq,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}var kq,Dq=T(()=>{kq="decompressResponsePolicy"});function rD(t,e,r){return new Promise((n,i)=>{let o,s,a=()=>i(new Cl(r?.abortErrorMsg?r?.abortErrorMsg:j7e)),c=()=>{r?.abortSignal&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),c(),a()),r?.abortSignal&&r.abortSignal.aborted)return a();o=setTimeout(()=>{c(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",s)})}function Kpe(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}var j7e,nD=T(()=>{Kk();j7e="The operation was aborted."});function Qpe(t){if(t&&[429,503].includes(t.status))try{for(let i of G7e){let o=Kpe(t,i);if(o===0||o)return o*(i===Nq?1e3:1)}let e=t.headers.get(Nq);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function Xpe(t){return Number.isFinite(Qpe(t))}function iD(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=Qpe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var Nq,G7e,oD=T(()=>{nD();Nq="Retry-After",G7e=["retry-after-ms","x-ms-retry-after-ms",Nq]});function N_(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:V7e,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:z7e,o=n;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:a,responseError:c}){let u=W7e(c),l=u&&t.ignoreSystemErrors,d=$7e(a),p=d&&t.ignoreHttpStatusCodes;if(a&&(Xpe(a)||!d)||p||l)return{skipStrategy:!0};if(c&&!u&&!d)return{errorToThrow:c};let m=o*Math.pow(2,s),h=Math.min(i,m);return o=h/2+bq(0,h/2),{retryAfterInMs:o}}}}function $7e(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function W7e(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT":!1}var V7e,z7e,sD=T(()=>{P_();oD();V7e=1e3,z7e=1e3*64});function Il(t,e={maxRetries:3}){let r=e.logger||Jpe;return{name:Y7e,async sendRequest(n,i){var o,s;let a,c,u=-1;e:for(;;){u+=1,a=void 0,c=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),a=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(l){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),c=l,!l||c.name!=="RestError")throw l;a=c.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new Cl;if(u>=((s=e.maxRetries)!==null&&s!==void 0?s:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let l of t){let d=l.logger||Jpe;d.info(`Retry ${u}: Processing retry strategy ${l.name}.`);let p=l.retry({retryCount:u,response:a,responseError:c});if(p.skipStrategy){d.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:h}=p;if(f)throw d.error(`Retry ${u}: Retry strategy ${l.name} throws error:`,f),f;if(m||m===0){d.info(`Retry ${u}: Retry strategy ${l.name} retries after ${m}`),await rD(m,void 0,{abortSignal:n.abortSignal});continue e}if(h){d.info(`Retry ${u}: Retry strategy ${l.name} redirects to ${h}`),n.url=h;continue e}}if(c)throw r.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return r.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var Jpe,Y7e,L_=T(()=>{nD();gq();Kk();Jpe=$k("core-rest-pipeline retryPolicy"),Y7e="retryPolicy"});function aD(t={}){var e;return{name:K7e,sendRequest:Il([iD(),N_(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var K7e,Lq=T(()=>{sD();oD();L_();K7e="defaultRetryPolicy"});var tfe=k((jEt,efe)=>{var Zpe=require("stream").Stream,Q7e=require("util");efe.exports=Su;function Su(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}Q7e.inherits(Su,Zpe);Su.create=function(t,e){var r=new this;e=e||{};for(var n in e)r[n]=e[n];r.source=t;var i=t.emit;return t.emit=function(){return r._handleEmit(arguments),i.apply(t,arguments)},t.on("error",function(){}),r.pauseStream&&t.pause(),r};Object.defineProperty(Su.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});Su.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};Su.prototype.resume=function(){this._released||this.release(),this.source.resume()};Su.prototype.pause=function(){this.source.pause()};Su.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]};Su.prototype.pipe=function(){var t=Zpe.prototype.pipe.apply(this,arguments);return this.resume(),t};Su.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}t[0]==="data"&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(t)};Su.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}}});var ofe=k((GEt,ife)=>{var X7e=require("util"),nfe=require("stream").Stream,rfe=tfe();ife.exports=ei;function ei(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}X7e.inherits(ei,nfe);ei.create=function(t){var e=new this;t=t||{};for(var r in t)e[r]=t[r];return e};ei.isStreamLike=function(t){return typeof t!="function"&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"&&!Buffer.isBuffer(t)};ei.prototype.append=function(t){var e=ei.isStreamLike(t);if(e){if(!(t instanceof rfe)){var r=rfe.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=r}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this};ei.prototype.pipe=function(t,e){return nfe.prototype.pipe.call(this,t,e),this.resume(),t};ei.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};ei.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t>"u"){this.end();return}if(typeof t!="function"){this._pipeNext(t);return}var e=t;e(function(r){var n=ei.isStreamLike(r);n&&(r.on("data",this._checkDataSize.bind(this)),this._handleErrors(r)),this._pipeNext(r)}.bind(this))};ei.prototype._pipeNext=function(t){this._currentStream=t;var e=ei.isStreamLike(t);if(e){t.on("end",this._getNext.bind(this)),t.pipe(this,{end:!1});return}var r=t;this.write(r),this._getNext()};ei.prototype._handleErrors=function(t){var e=this;t.on("error",function(r){e._emitError(r)})};ei.prototype.write=function(t){this.emit("data",t)};ei.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};ei.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};ei.prototype.end=function(){this._reset(),this.emit("end")};ei.prototype.destroy=function(){this._reset(),this.emit("close")};ei.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};ei.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}};ei.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};ei.prototype._emitError=function(t){this._reset(),this.emit("error",t)}});var sfe=k((VEt,J7e)=>{J7e.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var cfe=k((zEt,afe)=>{afe.exports=sfe()});var dfe=k(la=>{"use strict";var cD=cfe(),Z7e=require("path").extname,ufe=/^\s*([^;\s]*)(?:;|\s|$)/,eUe=/^text\//i;la.charset=lfe;la.charsets={lookup:lfe};la.contentType=tUe;la.extension=rUe;la.extensions=Object.create(null);la.lookup=nUe;la.types=Object.create(null);iUe(la.extensions,la.types);function lfe(t){if(!t||typeof t!="string")return!1;var e=ufe.exec(t),r=e&&cD[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&eUe.test(e[1])?"UTF-8":!1}function tUe(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?la.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=la.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function rUe(t){if(!t||typeof t!="string")return!1;var e=ufe.exec(t),r=e&&la.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function nUe(t){if(!t||typeof t!="string")return!1;var e=Z7e("x."+t).toLowerCase().substr(1);return e&&la.types[e]||!1}function iUe(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(cD).forEach(function(i){var o=cD[i],s=o.extensions;if(!(!s||!s.length)){t[i]=s;for(var a=0;a<s.length;a++){var c=s[a];if(e[c]){var u=r.indexOf(cD[e[c]].source),l=r.indexOf(o.source);if(e[c]!=="application/octet-stream"&&(u>l||u===l&&e[c].substr(0,12)==="application/"))continue}e[c]=i}}})}});var ffe=k((WEt,pfe)=>{pfe.exports=oUe;function oUe(t){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(t):setTimeout(t,0)}});var Oq=k((YEt,hfe)=>{var mfe=ffe();hfe.exports=sUe;function sUe(t){var e=!1;return mfe(function(){e=!0}),function(n,i){e?t(n,i):mfe(function(){t(n,i)})}}});var Mq=k((KEt,gfe)=>{gfe.exports=aUe;function aUe(t){Object.keys(t.jobs).forEach(cUe.bind(t)),t.jobs={}}function cUe(t){typeof this.jobs[t]=="function"&&this.jobs[t]()}});var Fq=k((QEt,yfe)=>{var vfe=Oq(),uUe=Mq();yfe.exports=lUe;function lUe(t,e,r,n){var i=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[i]=dUe(e,i,t[i],function(o,s){i in r.jobs&&(delete r.jobs[i],o?uUe(r):r.results[i]=s,n(o,r.results))})}function dUe(t,e,r,n){var i;return t.length==2?i=t(r,vfe(n)):i=t(r,e,vfe(n)),i}});var Uq=k((XEt,bfe)=>{bfe.exports=pUe;function pUe(t,e){var r=!Array.isArray(t),n={index:0,keyedList:r||e?Object.keys(t):null,jobs:{},results:r?{}:[],size:r?Object.keys(t).length:t.length};return e&&n.keyedList.sort(r?e:function(i,o){return e(t[i],t[o])}),n}});var Bq=k((JEt,_fe)=>{var fUe=Mq(),mUe=Oq();_fe.exports=hUe;function hUe(t){Object.keys(this.jobs).length&&(this.index=this.size,fUe(this),mUe(t)(null,this.results))}});var Efe=k((ZEt,xfe)=>{var gUe=Fq(),vUe=Uq(),yUe=Bq();xfe.exports=bUe;function bUe(t,e,r){for(var n=vUe(t);n.index<(n.keyedList||t).length;)gUe(t,e,n,function(i,o){if(i){r(i,o);return}if(Object.keys(n.jobs).length===0){r(null,n.results);return}}),n.index++;return yUe.bind(n,r)}});var qq=k((eSt,uD)=>{var Sfe=Fq(),_Ue=Uq(),xUe=Bq();uD.exports=EUe;uD.exports.ascending=Tfe;uD.exports.descending=SUe;function EUe(t,e,r,n){var i=_Ue(t,r);return Sfe(t,e,i,function o(s,a){if(s){n(s,a);return}if(i.index++,i.index<(i.keyedList||t).length){Sfe(t,e,i,o);return}n(null,i.results)}),xUe.bind(i,n)}function Tfe(t,e){return t<e?-1:t>e?1:0}function SUe(t,e){return-1*Tfe(t,e)}});var Ife=k((tSt,Cfe)=>{var TUe=qq();Cfe.exports=CUe;function CUe(t,e,r){return TUe(t,e,null,r)}});var Rfe=k((rSt,wfe)=>{wfe.exports={parallel:Efe(),serial:Ife(),serialOrdered:qq()}});var Pfe=k((nSt,Afe)=>{Afe.exports=function(t,e){return Object.keys(e).forEach(function(r){t[r]=t[r]||e[r]}),t}});var Nfe=k((iSt,Dfe)=>{var Vq=ofe(),kfe=require("util"),Hq=require("path"),IUe=require("http"),wUe=require("https"),RUe=require("url").parse,AUe=require("fs"),PUe=require("stream").Stream,jq=dfe(),kUe=Rfe(),Gq=Pfe();Dfe.exports=vr;kfe.inherits(vr,Vq);function vr(t){if(!(this instanceof vr))return new vr(t);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],Vq.call(this),t=t||{};for(var e in t)this[e]=t[e]}vr.LINE_BREAK=`\r
`;vr.DEFAULT_CONTENT_TYPE="application/octet-stream";vr.prototype.append=function(t,e,r){r=r||{},typeof r=="string"&&(r={filename:r});var n=Vq.prototype.append.bind(this);if(typeof e=="number"&&(e=""+e),kfe.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(t,e,r),o=this._multiPartFooter();n(i),n(e),n(o),this._trackLength(i,e,r)};vr.prototype._trackLength=function(t,e,r){var n=0;r.knownLength!=null?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+vr.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&e.hasOwnProperty("httpVersion"))&&!(e instanceof PUe))&&(r.knownLength||this._valuesToMeasure.push(e))};vr.prototype._lengthRetriever=function(t,e){t.hasOwnProperty("fd")?t.end!=null&&t.end!=1/0&&t.start!=null?e(null,t.end+1-(t.start?t.start:0)):AUe.stat(t.path,function(r,n){var i;if(r){e(r);return}i=n.size-(t.start?t.start:0),e(null,i)}):t.hasOwnProperty("httpVersion")?e(null,+t.headers["content-length"]):t.hasOwnProperty("httpModule")?(t.on("response",function(r){t.pause(),e(null,+r.headers["content-length"])}),t.resume()):e("Unknown stream")};vr.prototype._multiPartHeader=function(t,e,r){if(typeof r.header=="string")return r.header;var n=this._getContentDisposition(e,r),i=this._getContentType(e,r),o="",s={"Content-Disposition":["form-data",'name="'+t+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof r.header=="object"&&Gq(s,r.header);var a;for(var c in s)s.hasOwnProperty(c)&&(a=s[c],a!=null&&(Array.isArray(a)||(a=[a]),a.length&&(o+=c+": "+a.join("; ")+vr.LINE_BREAK)));return"--"+this.getBoundary()+vr.LINE_BREAK+o+vr.LINE_BREAK};vr.prototype._getContentDisposition=function(t,e){var r,n;return typeof e.filepath=="string"?r=Hq.normalize(e.filepath).replace(/\\/g,"/"):e.filename||t.name||t.path?r=Hq.basename(e.filename||t.name||t.path):t.readable&&t.hasOwnProperty("httpVersion")&&(r=Hq.basename(t.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n};vr.prototype._getContentType=function(t,e){var r=e.contentType;return!r&&t.name&&(r=jq.lookup(t.name)),!r&&t.path&&(r=jq.lookup(t.path)),!r&&t.readable&&t.hasOwnProperty("httpVersion")&&(r=t.headers["content-type"]),!r&&(e.filepath||e.filename)&&(r=jq.lookup(e.filepath||e.filename)),!r&&typeof t=="object"&&(r=vr.DEFAULT_CONTENT_TYPE),r};vr.prototype._multiPartFooter=function(){return function(t){var e=vr.LINE_BREAK,r=this._streams.length===0;r&&(e+=this._lastBoundary()),t(e)}.bind(this)};vr.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+vr.LINE_BREAK};vr.prototype.getHeaders=function(t){var e,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in t)t.hasOwnProperty(e)&&(r[e.toLowerCase()]=t[e]);return r};vr.prototype.setBoundary=function(t){this._boundary=t};vr.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};vr.prototype.getBuffer=function(){for(var t=new Buffer.alloc(0),e=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)typeof this._streams[r]!="function"&&(Buffer.isBuffer(this._streams[r])?t=Buffer.concat([t,this._streams[r]]):t=Buffer.concat([t,Buffer.from(this._streams[r])]),(typeof this._streams[r]!="string"||this._streams[r].substring(2,e.length+2)!==e)&&(t=Buffer.concat([t,Buffer.from(vr.LINE_BREAK)])));return Buffer.concat([t,Buffer.from(this._lastBoundary())])};vr.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;e<24;e++)t+=Math.floor(Math.random()*10).toString(16);this._boundary=t};vr.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;return this._streams.length&&(t+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),t};vr.prototype.hasKnownLength=function(){var t=!0;return this._valuesToMeasure.length&&(t=!1),t};vr.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,e));return}kUe.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){if(r){t(r);return}n.forEach(function(i){e+=i}),t(null,e)})};vr.prototype.submit=function(t,e){var r,n,i={method:"post"};return typeof t=="string"?(t=RUe(t),n=Gq({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},i)):(n=Gq(t,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(t.headers),n.protocol=="https:"?r=wUe.request(n):r=IUe.request(n),this.getLength(function(o,s){if(o&&o!=="Unknown stream"){this._error(o);return}if(s&&r.setHeader("Content-Length",s),this.pipe(r),e){var a,c=function(u,l){return r.removeListener("error",c),r.removeListener("response",a),e.call(this,u,l)};a=c.bind(this,null),r.on("error",c),r.on("response",a)}}.bind(this)),r};vr.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};vr.prototype.toString=function(){return"[object FormData]"}});function lD(){return{name:zq,async sendRequest(t,e){if(t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?(t.body=DUe(t.formData),t.formData=void 0):await NUe(t.formData,t)}return e(t)}}}function DUe(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}async function NUe(t,e){let r=new Lfe.default;for(let i of Object.keys(t)){let o=t[i];if(Array.isArray(o))for(let s of o)r.append(i,s);else r.append(i,o)}e.body=r,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${r.getBoundary()}`);try{let i=await new Promise((o,s)=>{r.getLength((a,c)=>{a?s(a):o(c)})});e.headers.set("Content-Length",i)}catch{}}var Lfe,zq,$q=T(()=>{Lfe=fe(Nfe()),zq="formDataPolicy"});var Mfe=k((sSt,Ofe)=>{var O_=1e3,M_=O_*60,F_=M_*60,G0=F_*24,LUe=G0*7,OUe=G0*365.25;Ofe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return MUe(t);if(r==="number"&&isFinite(t))return e.long?UUe(t):FUe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function MUe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*OUe;case"weeks":case"week":case"w":return r*LUe;case"days":case"day":case"d":return r*G0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*F_;case"minutes":case"minute":case"mins":case"min":case"m":return r*M_;case"seconds":case"second":case"secs":case"sec":case"s":return r*O_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function FUe(t){var e=Math.abs(t);return e>=G0?Math.round(t/G0)+"d":e>=F_?Math.round(t/F_)+"h":e>=M_?Math.round(t/M_)+"m":e>=O_?Math.round(t/O_)+"s":t+"ms"}function UUe(t){var e=Math.abs(t);return e>=G0?dD(t,e,G0,"day"):e>=F_?dD(t,e,F_,"hour"):e>=M_?dD(t,e,M_,"minute"):e>=O_?dD(t,e,O_,"second"):t+" ms"}function dD(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Wq=k((aSt,Ffe)=>{function BUe(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=Mfe(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,m;function h(...g){if(!h.enabled)return;let v=h,b=Number(new Date),y=b-(d||b);v.diff=y,v.prev=d,v.curr=b,d=b,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(R,L)=>{if(R==="%%")return"%";E++;let O=r.formatters[L];if(typeof O=="function"){let z=g[E];R=O.call(v,z),g.splice(E,1),E--}return R}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return h.namespace=l,h.useColors=r.useColors(),h.color=r.selectColor(l),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,m=r.enabled(l)),m),set:g=>{p=g}}),typeof r.init=="function"&&r.init(h),h}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(l))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ffe.exports=BUe});var Ufe=k((ja,pD)=>{ja.formatArgs=HUe;ja.save=jUe;ja.load=GUe;ja.useColors=qUe;ja.storage=VUe();ja.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ja.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function qUe(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function HUe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+pD.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ja.log=console.debug||console.log||(()=>{});function jUe(t){try{t?ja.storage.setItem("debug",t):ja.storage.removeItem("debug")}catch{}}function GUe(){let t;try{t=ja.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function VUe(){try{return localStorage}catch{}}pD.exports=Wq()(ja);var{formatters:zUe}=pD.exports;zUe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var qfe=k((cSt,Bfe)=>{"use strict";Bfe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Gfe=k((uSt,jfe)=>{"use strict";var $Ue=require("os"),Hfe=require("tty"),Cc=qfe(),{env:uo}=process,Em;Cc("no-color")||Cc("no-colors")||Cc("color=false")||Cc("color=never")?Em=0:(Cc("color")||Cc("colors")||Cc("color=true")||Cc("color=always"))&&(Em=1);"FORCE_COLOR"in uo&&(uo.FORCE_COLOR==="true"?Em=1:uo.FORCE_COLOR==="false"?Em=0:Em=uo.FORCE_COLOR.length===0?1:Math.min(parseInt(uo.FORCE_COLOR,10),3));function Yq(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Kq(t,e){if(Em===0)return 0;if(Cc("color=16m")||Cc("color=full")||Cc("color=truecolor"))return 3;if(Cc("color=256"))return 2;if(t&&!e&&Em===void 0)return 0;let r=Em||0;if(uo.TERM==="dumb")return r;if(process.platform==="win32"){let n=$Ue.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in uo)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in uo)||uo.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in uo)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(uo.TEAMCITY_VERSION)?1:0;if(uo.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in uo){let n=parseInt((uo.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(uo.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(uo.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(uo.TERM)||"COLORTERM"in uo?1:r}function WUe(t){let e=Kq(t,t&&t.isTTY);return Yq(e)}jfe.exports={supportsColor:WUe,stdout:Yq(Kq(!0,Hfe.isatty(1))),stderr:Yq(Kq(!0,Hfe.isatty(2)))}});var zfe=k((Uo,mD)=>{var YUe=require("tty"),fD=require("util");Uo.init=tBe;Uo.log=JUe;Uo.formatArgs=QUe;Uo.save=ZUe;Uo.load=eBe;Uo.useColors=KUe;Uo.destroy=fD.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Uo.colors=[6,2,3,4,5,1];try{let t=Gfe();t&&(t.stderr||t).level>=2&&(Uo.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Uo.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function KUe(){return"colors"in Uo.inspectOpts?!!Uo.inspectOpts.colors:YUe.isatty(process.stderr.fd)}function QUe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+mD.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=XUe()+e+" "+t[0]}function XUe(){return Uo.inspectOpts.hideDate?"":new Date().toISOString()+" "}function JUe(...t){return process.stderr.write(fD.format(...t)+`
`)}function ZUe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function eBe(){return process.env.DEBUG}function tBe(t){t.inspectOpts={};let e=Object.keys(Uo.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Uo.inspectOpts[e[r]]}mD.exports=Wq()(Uo);var{formatters:Vfe}=mD.exports;Vfe.o=function(t){return this.inspectOpts.colors=this.useColors,fD.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Vfe.O=function(t){return this.inspectOpts.colors=this.useColors,fD.inspect(t,this.inspectOpts)}});var Tu=k((lSt,Qq)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Qq.exports=Ufe():Qq.exports=zfe()});var $fe=k(Xq=>{"use strict";Object.defineProperty(Xq,"__esModule",{value:!0});function rBe(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(o,s)=>{o?i(o):n(s)})})}}Xq.default=rBe});var eH=k((Zq,Yfe)=>{"use strict";var Wfe=Zq&&Zq.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},nBe=require("events"),iBe=Wfe(Tu()),oBe=Wfe($fe()),cC=iBe.default("agent-base");function sBe(t){return!!t&&typeof t.addRequest=="function"}function Jq(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function hD(t,e){return new hD.Agent(t,e)}(function(t){class e extends nBe.EventEmitter{constructor(n,i){super();let o=i;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:Jq()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:Jq()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=Jq()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,a=null,c=o.timeout||this.timeout,u=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${c}ms`);f.code="ETIMEOUT",u(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),u(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),sBe(f)){cC("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),n.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);u(m)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(cC("Converting legacy callback function to promise"),this.promisifiedCallback=oBe.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(l,c)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{cC("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){cC("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){cC("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(hD||(hD={}));Yfe.exports=hD});var Kfe=k(lC=>{"use strict";var aBe=lC&&lC.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lC,"__esModule",{value:!0});var cBe=aBe(Tu()),uC=cBe.default("https-proxy-agent:parse-proxy-response");function uBe(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let d=t.read();d?l(d):t.once("readable",o)}function s(){t.removeListener("end",c),t.removeListener("error",u),t.removeListener("close",a),t.removeListener("readable",o)}function a(d){uC("onclose had error %o",d)}function c(){uC("onend")}function u(d){s(),uC("onerror %o",d),r(d)}function l(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){uC("have not received end of HTTP headers yet..."),o();return}let m=p.toString("ascii",0,p.indexOf(`\r
`)),h=+m.split(" ")[1];uC("got proxy server response: %o",m),e({statusCode:h,buffered:p})}t.on("error",u),t.on("close",a),t.on("end",c),o()})}lC.default=uBe});var Jfe=k(V0=>{"use strict";var lBe=V0&&V0.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},U_=V0&&V0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(V0,"__esModule",{value:!0});var Qfe=U_(require("net")),Xfe=U_(require("tls")),dBe=U_(require("url")),pBe=U_(require("assert")),fBe=U_(Tu()),mBe=eH(),hBe=U_(Kfe()),dC=fBe.default("https-proxy-agent:agent"),tH=class extends mBe.Agent{constructor(e){let r;if(typeof e=="string"?r=dBe.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");dC("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||yBe(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return lBe(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o;i?(dC("Creating `tls.Socket`: %o",n),o=Xfe.default.connect(n)):(dC("Creating `net.Socket`: %o",n),o=Qfe.default.connect(n));let s=Object.assign({},n.headers),c=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:u,port:l,secureEndpoint:d}=r;vBe(l,d)||(u+=`:${l}`),s.Host=u,s.Connection="close";for(let g of Object.keys(s))c+=`${g}: ${s[g]}\r
`;let p=hBe.default(o);o.write(`${c}\r
`);let{statusCode:f,buffered:m}=yield p;if(f===200){if(e.once("socket",gBe),r.secureEndpoint){dC("Upgrading socket connection to TLS");let g=r.servername||r.host;return Xfe.default.connect(Object.assign(Object.assign({},bBe(r,"host","hostname","path","port")),{socket:o,servername:g}))}return o}o.destroy();let h=new Qfe.default.Socket({writable:!1});return h.readable=!0,e.once("socket",g=>{dC("replaying proxy buffer for failed request"),pBe.default(g.listenerCount("data")>0),g.push(m),g.push(null)}),h})}};V0.default=tH;function gBe(t){t.resume()}function vBe(t,e){return!!(!e&&t===80||e&&t===443)}function yBe(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function bBe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var eme=k((iH,Zfe)=>{"use strict";var _Be=iH&&iH.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},rH=_Be(Jfe());function nH(t){return new rH.default(t)}(function(t){t.HttpsProxyAgent=rH.default,t.prototype=rH.default.prototype})(nH||(nH={}));Zfe.exports=nH});var tme=k(oH=>{"use strict";Object.defineProperty(oH,"__esModule",{value:!0});function xBe(t,e,{signal:r}={}){return new Promise((n,i)=>{function o(){r?.removeEventListener("abort",o),t.removeListener(e,s),t.removeListener("error",a)}function s(...c){o(),n(c)}function a(c){o(),i(c)}r?.addEventListener("abort",o),t.on(e,s),t.on("error",a)})}oH.default=xBe});var rme=k(z0=>{"use strict";var EBe=z0&&z0.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},pC=z0&&z0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(z0,"__esModule",{value:!0});var SBe=pC(require("net")),TBe=pC(require("tls")),sH=pC(require("url")),CBe=pC(Tu()),IBe=pC(tme()),wBe=eH(),Sm=(0,CBe.default)("http-proxy-agent");function RBe(t){return typeof t=="string"?/^https:?$/i.test(t):!1}var aH=class extends wBe.Agent{constructor(e){let r;if(typeof e=="string"?r=sH.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Sm("Creating new HttpProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||RBe(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return EBe(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o=sH.default.parse(e.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=r.hostname||r.host||null),o.port==null&&typeof r.port&&(o.port=String(r.port)),o.port==="80"&&(o.port=""),e.path=sH.default.format(o),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let s;if(i?(Sm("Creating `tls.Socket`: %o",n),s=TBe.default.connect(n)):(Sm("Creating `net.Socket`: %o",n),s=SBe.default.connect(n)),e._header){let a,c;Sm("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(Sm("Patching connection write() output buffer with updated header"),a=e.output[0],c=a.indexOf(`\r
\r
`)+4,e.output[0]=e._header+a.substring(c),Sm("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(Sm("Patching connection write() output buffer with updated header"),a=e.outputData[0].data,c=a.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+a.substring(c),Sm("Output buffer: %o",e.outputData[0].data))}return yield(0,IBe.default)(s,"connect"),s})}};z0.default=aH});var ime=k((lH,nme)=>{"use strict";var ABe=lH&&lH.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},cH=ABe(rme());function uH(t){return new cH.default(t)}(function(t){t.HttpProxyAgent=cH.default,t.prototype=cH.default.prototype})(uH||(uH={}));nme.exports=uH});function gD(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function OBe(){if(!process)return;let t=gD(PBe),e=gD(DBe),r=gD(kBe);return t||e||r}function MBe(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}function FBe(){let t=gD(NBe);return ume=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function pH(t){if(!t&&(t=OBe(),!t))return;let e=new URL(t);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function sme(t,{headers:e,tlsSettings:r}){let n;try{n=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}r&&Fo.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:n.hostname,port:t.port,protocol:n.protocol,headers:e.toJSON()};return t.username&&t.password?i.auth=`${t.username}:${t.password}`:t.username&&(i.auth=`${t.username}`),i}function UBe(t,e){if(t.agent)return;let n=new URL(t.url).protocol!=="https:",i=t.proxySettings;if(i)if(n){if(!e.httpProxyAgent){let o=sme(i,t);e.httpProxyAgent=new cme.HttpProxyAgent(o)}t.agent=e.httpProxyAgent}else{if(!e.httpsProxyAgent){let o=sme(i,t);e.httpsProxyAgent=new ame.HttpsProxyAgent(o)}t.agent=e.httpsProxyAgent}}function vD(t=pH(),e){ume||ome.push(...FBe());let r={};return{name:dH,async sendRequest(n,i){var o;return!n.proxySettings&&!MBe(n.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:ome,e?.customNoProxyList?void 0:LBe)&&(n.proxySettings=t),n.proxySettings&&UBe(n,r),i(n)}}}var ame,cme,PBe,kBe,DBe,NBe,dH,ome,ume,LBe,fH=T(()=>{ame=fe(eme()),cme=fe(ime());I_();PBe="HTTPS_PROXY",kBe="HTTP_PROXY",DBe="ALL_PROXY",NBe="NO_PROXY",dH="proxyPolicy",ome=[],ume=!1,LBe=new Map});function yD(t="x-ms-client-request-id"){return{name:mH,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}var mH,hH=T(()=>{mH="setClientRequestIdPolicy"});function bD(t){return{name:gH,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}var gH,vH=T(()=>{gH="tlsPolicy"});function lme(t={}){let e=new yH(t.parentContext);return t.span&&(e=e.setValue(B_.span,t.span)),t.namespace&&(e=e.setValue(B_.namespace,t.namespace)),e}var B_,yH,bH=T(()=>{B_={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};yH=class t{constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}}});function BBe(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function qBe(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:BBe(),tracingContext:lme({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function fC(){return _H||(_H=qBe()),_H}var _H,dme=T(()=>{bH()});function xH(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,l,d){var p;let f=fC().startSpan(u,Object.assign(Object.assign({},d),{packageName:r,packageVersion:n,tracingContext:(p=l?.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),m=f.tracingContext,h=f.span;m.getValue(B_.namespace)||(m=m.setValue(B_.namespace,e)),h.setAttribute("az.namespace",m.getValue(B_.namespace));let g=Object.assign({},l,{tracingOptions:Object.assign(Object.assign({},l?.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:g}}async function o(u,l,d,p){let{span:f,updatedOptions:m}=i(u,l,p);try{let h=await s(m.tracingOptions.tracingContext,()=>Promise.resolve(d(m,f)));return f.setStatus({status:"success"}),h}catch(h){throw f.setStatus({status:"error",error:h}),h}finally{f.end()}}function s(u,l,...d){return fC().withContext(u,l,...d)}function a(u){return fC().parseTraceparentHeader(u)}function c(u){return fC().createRequestHeaders(u)}return{startSpan:i,withSpan:o,withContext:s,parseTraceparentHeader:a,createRequestHeaders:c}}var pme=T(()=>{dme();bH()});var fme=T(()=>{pme()});var mme,hme,gme=T(()=>{mme=require("util"),hme=mme.inspect.custom});function _D(t){return t instanceof Ga?!0:R_(t)&&t.name==="RestError"}var HBe,Ga,xD=T(()=>{P_();gme();Eq();HBe=new k_,Ga=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,this.request=r.request,this.response=r.response,Object.setPrototypeOf(this,t.prototype)}[hme](){return`RestError: ${this.message} 
 ${HBe.sanitize(this)}`}};Ga.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";Ga.PARSE_ERROR="PARSE_ERROR"});function ED(t={}){let e=Zk(t.userAgentPrefix),r=jBe();return{name:EH,async sendRequest(n,i){var o,s;if(!r||!(!((o=n.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(n);let{span:a,tracingContext:c}=(s=GBe(r,n,e))!==null&&s!==void 0?s:{};if(!a||!c)return i(n);try{let u=await r.withContext(c,i,n);return zBe(a,u),u}catch(u){throw VBe(a,u),u}}}}function jBe(){try{return xH({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:Jk})}catch(t){Fo.warning(`Error when creating the TracingClient: ${A_(t)}`);return}}function GBe(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!n.isRecording()){n.end();return}r&&n.setAttribute("http.user_agent",r);let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[s,a]of Object.entries(o))e.headers.set(s,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){Fo.warning(`Skipping creating a tracing span due to an error: ${A_(n)}`);return}}function VBe(t,e){try{t.setStatus({status:"error",error:R_(e)?e:void 0}),_D(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){Fo.warning(`Skipping tracing span processing due to an error: ${A_(r)}`)}}function zBe(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),t.setStatus({status:"success"}),t.end()}catch(r){Fo.warning(`Skipping tracing span processing due to an error: ${A_(r)}`)}}var EH,SH=T(()=>{fme();wq();Rq();I_();P_();xD();EH="tracingPolicy"});function vme(t){let e=jk();return Wk&&(t.tlsOptions&&e.addPolicy(bD(t.tlsOptions)),e.addPolicy(vD(t.proxyOptions)),e.addPolicy(tD())),e.addPolicy(lD()),e.addPolicy(eD(t.userAgentOptions)),e.addPolicy(yD()),e.addPolicy(aD(t.retryOptions),{phase:"Retry"}),e.addPolicy(ED(t.userAgentOptions),{afterPhase:"Retry"}),Wk&&e.addPolicy(Xk(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(Qk(t.loggingOptions),{afterPhase:"Sign"}),e}var yme=T(()=>{Tq();cq();Iq();Pq();Dq();Lq();$q();P_();fH();hH();vH();SH()});function SD(t){return t.toLowerCase()}function*$Be(t){for(let e of t.values())yield[e.name,e.value]}function q_(t){return new TH(t)}var TH,TD=T(()=>{TH=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(SD(e),{name:e,value:String(r)})}get(e){var r;return(r=this._headersMap.get(SD(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(SD(e))}delete(e){this._headersMap.delete(SD(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return $Be(this._headersMap)}}});function mC(t){return t&&typeof t.pipe=="function"}function bme(t){return new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}function xme(t){return t&&typeof t.byteLength=="number"}function YBe(t){let e=q_();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}function KBe(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=ID.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=ID.createInflate();return t.pipe(n),n}return t}function QBe(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new Ga(`Error reading response as text: ${i.message}`,{code:Ga.PARSE_ERROR}))})})}function XBe(t){return t?Buffer.isBuffer(t)?t.length:mC(t)?null:xme(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function Eme(){return new CH}var H_,j_,ID,_me,WBe,CD,CH,Sme=T(()=>{H_=fe(require("http")),j_=fe(require("https")),ID=fe(require("zlib")),_me=require("stream");Kk();TD();xD();I_();WBe={};CD=class extends _me.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},CH=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new oC,s;if(e.abortSignal){if(e.abortSignal.aborted)throw new Cl("The operation was aborted.");s=d=>{d.type==="abort"&&o.abort()},e.abortSignal.addEventListener("abort",s)}e.timeout>0&&setTimeout(()=>{o.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),c=a?.includes("gzip")||a?.includes("deflate"),u=typeof e.body=="function"?e.body():e.body;if(u&&!e.headers.has("Content-Length")){let d=XBe(u);d!==null&&e.headers.set("Content-Length",d)}let l;try{if(u&&e.onUploadProgress){let g=e.onUploadProgress,v=new CD(g);v.on("error",b=>{Fo.error("Error in upload progress",b)}),mC(u)?u.pipe(v):v.end(u),u=v}let d=await this.makeRequest(e,o,u),p=YBe(d),m={status:(r=d.statusCode)!==null&&r!==void 0?r:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),m;l=c?KBe(d,p):d;let h=e.onDownloadProgress;if(h){let g=new CD(h);g.on("error",v=>{Fo.error("Error in download progress",v)}),l.pipe(g),l=g}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(m.status)?m.readableStreamBody=l:m.bodyAsText=await QBe(l),m}finally{if(e.abortSignal&&s){let d=Promise.resolve();mC(u)&&(d=bme(u));let p=Promise.resolve();mC(l)&&(p=bme(l)),Promise.all([d,p]).then(()=>{var f;s&&((f=e.abortSignal)===null||f===void 0||f.removeEventListener("abort",s))}).catch(f=>{Fo.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),s=o.protocol!=="https:";if(s&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,s),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((u,l)=>{let d=s?H_.request(c,u):j_.request(c,u);d.once("error",p=>{var f;l(new Ga(p.message,{code:(f=p.code)!==null&&f!==void 0?f:Ga.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let p=new Cl("The operation was aborted.");d.destroy(p),l(p)}),n&&mC(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):xme(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Fo.error("Unrecognized body type",n),l(new Ga("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?H_.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new H_.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return j_.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:WBe,s=this.cachedHttpsAgents.get(o);return s&&s.options.keepAlive===!i||(Fo.info("No cached TLS Agent exist, creating a new Agent"),s=new j_.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,s)),s}}}});function Tme(){return Eme()}var Cme=T(()=>{Sme()});function IH(){return wD>RD.length-16&&(Ime.default.randomFillSync(RD),wD=0),RD.slice(wD,wD+=16)}var Ime,RD,wD,wme=T(()=>{Ime=fe(require("crypto")),RD=new Uint8Array(256),wD=RD.length});var Rme,Ame=T(()=>{Rme=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function JBe(t){return typeof t=="string"&&Rme.test(t)}var Pme,kme=T(()=>{Ame();Pme=JBe});function ZBe(t,e=0){let r=(Bo[t[e+0]]+Bo[t[e+1]]+Bo[t[e+2]]+Bo[t[e+3]]+"-"+Bo[t[e+4]]+Bo[t[e+5]]+"-"+Bo[t[e+6]]+Bo[t[e+7]]+"-"+Bo[t[e+8]]+Bo[t[e+9]]+"-"+Bo[t[e+10]]+Bo[t[e+11]]+Bo[t[e+12]]+Bo[t[e+13]]+Bo[t[e+14]]+Bo[t[e+15]]).toLowerCase();if(!Pme(r))throw TypeError("Stringified UUID is invalid");return r}var Bo,Dme,Nme=T(()=>{kme();Bo=[];for(let t=0;t<256;++t)Bo.push((t+256).toString(16).substr(1));Dme=ZBe});function eqe(t,e,r){t=t||{};let n=t.random||(t.rng||IH)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Dme(n)}var wH,Lme=T(()=>{wme();Nme();wH=eqe});var Ome=T(()=>{Lme()});function Mme(){return wH()}var Fme=T(()=>{Ome()});function Ume(t){return new RH(t)}var RH,Bme=T(()=>{TD();Fme();RH=class{constructor(e){var r,n,i,o,s,a,c;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:q_(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(s=e.withCredentials)!==null&&s!==void 0?s:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||Mme(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}}});function Hme(t={}){var e;return Il([N_(Object.assign(Object.assign({},t),{ignoreSystemErrors:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3})}var qme,jme=T(()=>{sD();L_();qme="exponentialRetryPolicy"});function Gme(t={}){var e;return{name:AH,sendRequest:Il([N_(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var AH,Vme=T(()=>{sD();L_();AH="systemErrorRetryPolicy"});function zme(t={}){var e;return{name:PH,sendRequest:Il([iD()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var PH,$me=T(()=>{oD();L_();PH="throttlingRetryPolicy"});async function rqe(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await n();for(;i===null;)await rD(e),i=await n();return i}function Wme(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},tqe),e),s={get isRefreshing(){return r!==null},get shouldRefresh(){var c;return!s.isRefreshing&&((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(c,u){var l;return s.isRefreshing||(r=rqe(()=>t.getToken(c,u),o.retryIntervalInMs,(l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(p=>(r=null,n=p,i=u.tenantId,n)).catch(p=>{throw r=null,n=null,i=void 0,p})),r}return async(c,u)=>i!==u.tenantId||!!u.claims||s.mustRefresh?a(c,u):(s.shouldRefresh&&a(c,u),n)}var tqe,Yme=T(()=>{nD();tqe={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2}});async function nqe(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}function iqe(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function Kme(t){var e;let{credential:r,scopes:n,challengeCallbacks:i}=t,o=t.logger||Fo,s=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:nqe,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=r?Wme(r):()=>Promise.resolve(null);return{name:kH,async sendRequest(c,u){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await s.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:a,logger:o});let l,d;try{l=await u(c)}catch(p){d=p,l=p.response}if(s.authorizeRequestOnChallenge&&l?.status===401&&iqe(l)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:l,getAccessToken:a,logger:o}))return u(c);if(d)throw d;return l}}}var kH,Qme=T(()=>{Yme();I_();kH="bearerTokenAuthenticationPolicy"});function Xme(){return{name:DH,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""))}return e(t)}}}var DH,Jme=T(()=>{DH="ndJsonPolicy"});var Zme={};$r(Zme,{RestError:()=>Ga,bearerTokenAuthenticationPolicy:()=>Kme,bearerTokenAuthenticationPolicyName:()=>kH,createDefaultHttpClient:()=>Tme,createEmptyPipeline:()=>jk,createHttpHeaders:()=>q_,createPipelineFromOptions:()=>vme,createPipelineRequest:()=>Ume,decompressResponsePolicy:()=>tD,decompressResponsePolicyName:()=>kq,defaultRetryPolicy:()=>aD,exponentialRetryPolicy:()=>Hme,exponentialRetryPolicyName:()=>qme,formDataPolicy:()=>lD,formDataPolicyName:()=>zq,getDefaultProxySettings:()=>pH,isRestError:()=>_D,logPolicy:()=>Qk,logPolicyName:()=>Sq,ndJsonPolicy:()=>Xme,ndJsonPolicyName:()=>DH,proxyPolicy:()=>vD,proxyPolicyName:()=>dH,redirectPolicy:()=>Xk,redirectPolicyName:()=>Cq,retryPolicy:()=>Il,setClientRequestIdPolicy:()=>yD,setClientRequestIdPolicyName:()=>mH,systemErrorRetryPolicy:()=>Gme,systemErrorRetryPolicyName:()=>AH,throttlingRetryPolicy:()=>zme,throttlingRetryPolicyName:()=>PH,tlsPolicy:()=>bD,tlsPolicyName:()=>gH,tracingPolicy:()=>ED,tracingPolicyName:()=>EH,userAgentPolicy:()=>eD,userAgentPolicyName:()=>Aq});var ehe=T(()=>{cq();yme();Cme();TD();Bme();xD();Dq();jme();hH();Tq();fH();Iq();Vme();$me();L_();SH();Lq();Pq();vH();$q();Qme();Jme()});var nhe=k((hC,rhe)=>{"use strict";var oqe=hC&&hC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},sqe=hC&&hC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},the=(ehe(),Ti(Zme)),aqe="https://monitor.azure.com//.default";function cqe(t){return null}var uqe=function(){function t(e,r){var n=r?[r]:[aqe];this._azureTokenPolicy=the.bearerTokenAuthenticationPolicy({credential:e,scopes:n})}return t.prototype.addAuthorizationHeader=function(e){return oqe(this,void 0,void 0,function(){var r,n;return sqe(this,function(i){switch(i.label){case 0:return r="authorization",n=the.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,cqe)];case 1:return i.sent(),e.headers[r]=n.headers.get(r),[2]}})})},t}();rhe.exports=uqe});var ohe=k((sCt,ihe)=>{"use strict";var lqe=gn(),dqe=No(),pqe=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){lqe.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(e),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;n||(e||dqe.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t}();ihe.exports=pqe});var she=k(AD=>{"use strict";Object.defineProperty(AD,"__esModule",{value:!0});AD.azureRoleEnvironmentTelemetryProcessor=void 0;function fqe(t,e){}AD.azureRoleEnvironmentTelemetryProcessor=fqe});var uhe=k(G_=>{"use strict";Object.defineProperty(G_,"__esModule",{value:!0});G_.getSamplingHashCode=G_.samplingTelemetryProcessor=void 0;var ahe=cs();function mqe(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&ahe.TelemetryType.Metric===ahe.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=che(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}G_.samplingTelemetryProcessor=mqe;function che(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}G_.getSamplingHashCode=che});var lhe=k(PD=>{"use strict";Object.defineProperty(PD,"__esModule",{value:!0});PD.performanceMetricsTelemetryProcessor=void 0;var NH=Rk(),LH=cs();function hqe(t,e){switch(e&&e.addDocument(t),t.data.baseType){case LH.TelemetryTypeString.Exception:NH.countException();break;case LH.TelemetryTypeString.Request:var r=t.data.baseData;NH.countRequest(r.duration,r.success);break;case LH.TelemetryTypeString.Dependency:var n=t.data.baseData;NH.countDependency(n.duration,n.success);break}return!0}PD.performanceMetricsTelemetryProcessor=hqe});var dhe=k(V_=>{"use strict";var wl=V_&&V_.__assign||function(){return wl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},wl.apply(this,arguments)};Object.defineProperty(V_,"__esModule",{value:!0});V_.preAggregatedMetricsTelemetryProcessor=void 0;var gqe=cs(),gC=BB(),kD=cs();function vqe(t,e){if(gC.isEnabled())switch(t.data.baseType){case kD.TelemetryTypeString.Exception:var r=t.data.baseData;r.properties=wl(wl({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole]};gC.countException(n);break;case kD.TelemetryTypeString.Trace:var i=t.data.baseData;i.properties=wl(wl({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],traceSeverityLevel:gqe.SeverityLevel[i.severity]};gC.countTrace(o);break;case kD.TelemetryTypeString.Request:var s=t.data.baseData;s.properties=wl(wl({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};gC.countRequest(s.duration,a);break;case kD.TelemetryTypeString.Dependency:var c=t.data.baseData;c.properties=wl(wl({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var u={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],dependencySuccess:c.success,dependencyType:c.type,dependencyTarget:c.target,dependencyResultCode:c.resultCode};gC.countDependency(c.duration,u);break}return!0}V_.preAggregatedMetricsTelemetryProcessor=vqe});var phe=k(Rl=>{"use strict";var yqe=Rl&&Rl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),DD=Rl&&Rl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yqe(e,t,r)};Object.defineProperty(Rl,"__esModule",{value:!0});DD(she(),Rl);DD(uhe(),Rl);DD(lhe(),Rl);DD(dhe(),Rl)});var OH=k((pCt,hhe)=>{"use strict";var Tt=cs(),da=No(),fhe=um(),bqe=gn(),_qe=function(){function t(){}return t.createEnvelope=function(e,r,n,i,o){var s=null;switch(r){case Tt.TelemetryType.Trace:s=t.createTraceData(e);break;case Tt.TelemetryType.Dependency:s=t.createDependencyData(e);break;case Tt.TelemetryType.Event:s=t.createEventData(e);break;case Tt.TelemetryType.Exception:s=t.createExceptionData(e);break;case Tt.TelemetryType.Request:s=t.createRequestData(e);break;case Tt.TelemetryType.Metric:s=t.createMetricData(e);break;case Tt.TelemetryType.Availability:s=t.createAvailabilityData(e);break;case Tt.TelemetryType.PageView:s=t.createPageViewData(e);break}if(s&&s.baseData&&Tt.domainSupportsProperties(s.baseData)){if(n)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);t.addAzureFunctionsCorrelationProperties(s.baseData.properties),s.baseData.properties&&(s.baseData.properties=da.validateStringMap(s.baseData.properties))}var c=o&&o.instrumentationKey||"",u=new Tt.Envelope;return u.data=s,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),u.tags=this.getTags(i,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=o?o.samplingPercentage:100,r===Tt.TelemetryType.Metric&&(u.sampleRate=100),u},t.addAzureFunctionsCorrelationProperties=function(e){var r=fhe.CorrelationContextManager.getCurrentContext();if(r&&r.customProperties&&r.customProperties.getProperty instanceof Function){e=e||{};var n=r.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),n=r.customProperties.getProperty("ProcessId"),n&&(e.ProcessId=n),n=r.customProperties.getProperty("LogLevel"),n&&(e.LogLevel=n),n=r.customProperties.getProperty("Category"),n&&(e.Category=n),n=r.customProperties.getProperty("HostInstanceId"),n&&(e.HostInstanceId=n),n=r.customProperties.getProperty("AzFuncLiveLogsSessionId"),n&&(e.AzFuncLiveLogsSessionId=n)}},t.truncateProperties=function(e){if(e.properties)try{for(var r={},n=Object.keys(e.properties),i=Object.values(e.properties),o=0;o<n.length;o++)n[o].length<=150&&(da.isDate(i[o])||(i[o]==null&&(i[o]=""),typeof i[o]=="object"&&(i[o]=da.stringify(i[o])),r[n[o]]=String(i[o]).substring(0,8192)),r[n[o]]=i[o]);return r}catch(s){bqe.warn("Failed to properly truncate telemetry properties: ",s)}},t.createTraceData=function(e){var r,n=new Tt.MessageData;n.message=(r=e.message)===null||r===void 0?void 0:r.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=Tt.SeverityLevel.Information:n.severityLevel=e.severity;var i=new Tt.Data;return i.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.Trace),i.baseData=n,i},t.createDependencyData=function(e){var r,n,i,o=new Tt.RemoteDependencyData;o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.data=(n=e.data)===null||n===void 0?void 0:n.substring(0,8192),o.target=(i=e.target)===null||i===void 0?void 0:i.substring(0,1024),o.duration=da.msToTimeSpan(e.duration),o.success=e.success,o.type=e.dependencyTypeName,o.properties=this.truncateProperties(e),o.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?o.id=e.id:o.id=da.w3cTraceId();var s=new Tt.Data;return s.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.Dependency),s.baseData=o,s},t.createEventData=function(e){var r,n=new Tt.EventData;n.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var i=new Tt.Data;return i.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.Event),i.baseData=n,i},t.createExceptionData=function(e){var r,n,i=new Tt.ExceptionData;i.properties=this.truncateProperties(e),isNaN(e.severity)?i.severityLevel=Tt.SeverityLevel.Error:i.severityLevel=e.severity,i.measurements=e.measurements,i.exceptions=[];var o=e.exception.stack,s=new Tt.ExceptionDetails;s.message=(r=e.exception.message)===null||r===void 0?void 0:r.substring(0,32768),s.typeName=(n=e.exception.name)===null||n===void 0?void 0:n.substring(0,1024),s.parsedStack=this.parseStack(o),s.hasFullStack=da.isArray(s.parsedStack)&&s.parsedStack.length>0,i.exceptions.push(s);var a=new Tt.Data;return a.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.Exception),a.baseData=i,a},t.createRequestData=function(e){var r,n,i,o,s=new Tt.RequestData;e.id?s.id=e.id:s.id=da.w3cTraceId(),s.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),s.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),s.source=(i=e.source)===null||i===void 0?void 0:i.substring(0,1024),s.duration=da.msToTimeSpan(e.duration),s.responseCode=(o=e.resultCode?e.resultCode.toString():"0")===null||o===void 0?void 0:o.substring(0,1024),s.success=e.success,s.properties=this.truncateProperties(e),s.measurements=e.measurements;var a=new Tt.Data;return a.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.Request),a.baseData=s,a},t.createMetricData=function(e){var r,n=new Tt.MetricData;n.metrics=[];var i=new Tt.DataPoint;i.count=isNaN(e.count)?1:e.count,i.kind=Tt.DataPointType.Aggregation,i.max=isNaN(e.max)?e.value:e.max,i.min=isNaN(e.min)?e.value:e.min,i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.stdDev=isNaN(e.stdDev)?0:e.stdDev,i.value=e.value,i.ns=e.namespace,n.metrics.push(i),n.properties=this.truncateProperties(e);var o=new Tt.Data;return o.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.Metric),o.baseData=n,o},t.createAvailabilityData=function(e){var r,n,i=new Tt.AvailabilityData;e.id?i.id=e.id:i.id=da.w3cTraceId(),i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=da.msToTimeSpan(e.duration),i.success=e.success,i.runLocation=e.runLocation,i.message=(n=e.message)===null||n===void 0?void 0:n.substring(0,8192),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new Tt.Data;return o.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.Availability),o.baseData=i,o},t.createPageViewData=function(e){var r,n,i=new Tt.PageViewData;i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=da.msToTimeSpan(e.duration),i.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new Tt.Data;return o.baseType=Tt.telemetryTypeToBaseType(Tt.TelemetryType.PageView),o.baseData=i,o},t.getTags=function(e,r){var n=fhe.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(mhe.regex.test(a)){var c=new mhe(n[s],i++);o+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(o>u)for(var l=0,d=r.length-1,p=0,f=l,m=d;l<d;){var h=r[l].sizeInBytes,g=r[d].sizeInBytes;if(p+=h+g,p>u){var v=m-f+1;r.splice(f,v);break}f=l,m=d,l++,d--}}return r},t}(),mhe=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=da.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=da.trim(n[2])||this.method,this.fileName=da.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();hhe.exports=_qe});var ghe=k(Tm=>{"use strict";var xqe=Tm&&Tm.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Eqe=Tm&&Tm.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.FileAccessControl=void 0;var Sqe=require("fs"),Tqe=require("os"),z_=require("child_process"),Cqe=gn(),Iqe=function(){function t(){}return t.checkFileProtection=function(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=!0,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=Sqe.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||Cqe.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0},t.applyACLRules=function(e){return xqe(this,void 0,void 0,function(){var r,n;return Eqe(this,function(i){switch(i.label){case 0:if(!t.USE_ICACLS)return[3,7];if(t.ACLED_DIRECTORIES[e]!==void 0)return[3,6];t.ACLED_DIRECTORIES[e]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return r=i.sent(),[4,this._runICACLS(this._getACLArguments(e,r))];case 3:return i.sent(),t.ACLED_DIRECTORIES[e]=!0,[3,5];case 4:throw n=i.sent(),t.ACLED_DIRECTORIES[e]=!1,n;case 5:return[3,7];case 6:if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}})})},t.applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t._runICACLS=function(e){return new Promise(function(r,n){var i=z_.spawn(t.ICACLS_PATH,e,{windowsHide:!0});i.on("error",function(o){return n(o)}),i.on("close",function(o,s){o===0?r():n(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+o+")"))})})},t._runICACLSSync=function(e){if(z_.spawnSync){var r=z_.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t._getACLIdentity=function(){return new Promise(function(e,r){t.ACL_IDENTITY&&e(t.ACL_IDENTITY);var n=z_.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";n.stdout.on("data",function(o){return i+=o}),n.on("error",function(o){return r(o)}),n.on("close",function(o,s){t.ACL_IDENTITY=i&&i.trim(),o===0?e(t.ACL_IDENTITY):r(new Error("Getting ACL identity did not succeed (PS returned code "+o+")"))})})},t._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(z_.spawnSync){var e=z_.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.TAG="FileAccessControl",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.OS_FILE_PROTECTION_CHECKED=!1,t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=Tqe.type()==="Windows_NT",t}();Tm.FileAccessControl=Iqe});var FH=k((yC,yhe)=>{"use strict";var ND=yC&&yC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},LD=yC&&yC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},MH=require("fs"),wqe=require("os"),$0=require("path"),Rqe=require("zlib"),Cm=Mn(),Aqe=S_(),bp=K9(),pa=No(),Pqe=require("url"),vhe=gn(),vC=ghe(),kqe=439,Dqe=402,Nqe=[200,206,402,408,429,439,500],Lqe=function(){function t(e,r,n,i,o,s,a){this._redirectedHost=null,this._config=e,this._onSuccess=n,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=r,this._fileCleanupTimer=null,this._tempDir=$0.join(wqe.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=s||!1,this._shutdownStatsbeat=a,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return t.prototype.setDiskRetryMode=function(e,r,n){var i=this;e&&vC.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=vC.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!vC.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(Cm.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},t.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(Cm.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},t.prototype.send=function(e,r){return ND(this,void 0,void 0,function(){var n,i,o,s,a,c,u,l,d=this;return LD(this,function(p){switch(p.label){case 0:if(!e)return[3,5];if(n=this._redirectedHost||this._config.endpointUrl,i=new Pqe.URL(n).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!s)return[3,4];this._statsbeat&&this._statsbeat.addFeature(Cm.StatsbeatFeature.AAD_HANDLING),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,s.addAuthorizationHeader(o)];case 2:return p.sent(),[3,4];case 3:return a=p.sent(),c="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(c+="This batch of telemetry items will be retried. ",this._storeToDisk(e)),c+="Error:"+a.toString(),this._logWarn(c),typeof r=="function"&&r(c),[2];case 4:u="",e.forEach(function(f){var m=pa.stringify(f);typeof m=="string"&&(u+=m+`
`)}),u.length>0&&(u=u.substring(0,u.length-1)),l=Buffer.from?Buffer.from(u):new Buffer(u),Rqe.gzip(l,function(f,m){var h=m;f?(d._logWarn(pa.dumpObj(f)),h=l,o.headers["Content-Length"]=l.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=m.length.toString()),d._logInfo(pa.dumpObj(o)),o[Aqe.disableCollectionRequestOption]=!0;var g=+new Date,v=function(y){y.setEncoding("utf-8");var E="";y.on("data",function(x){E+=x}),y.on("end",function(){var x=+new Date,R=x-g;if(d._numConsecutiveFailures=0,d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&(Nqe.includes(y.statusCode)?d._statsbeatHasReachedIngestionAtLeastOnce=!0:d._statsbeatFailedToIngest()),d._statsbeat&&(y.statusCode==Dqe||y.statusCode==kqe?d._statsbeat.countThrottle(Cm.StatsbeatNetworkCategory.Breeze,i,y.statusCode):d._statsbeat.countRequest(Cm.StatsbeatNetworkCategory.Breeze,i,R,y.statusCode===200,y.statusCode)),d._enableDiskRetryMode){if(y.statusCode===200)d._resendTimer||(d._resendTimer=setTimeout(function(){d._resendTimer=null,d._sendFirstFileOnDisk()},d._resendInterval),d._resendTimer.unref());else if(d._isRetriable(y.statusCode))try{d._statsbeat&&d._statsbeat.countRetry(Cm.StatsbeatNetworkCategory.Breeze,i,y.statusCode);var L=JSON.parse(E),O=[];L.errors&&(L.errors.forEach(function(ce){(ce.statusCode==429||ce.statusCode==500||ce.statusCode==503)&&O.push(e[ce.index])}),O.length>0&&d._storeToDisk(O))}catch{d._storeToDisk(e)}}if(y.statusCode===307||y.statusCode===308)if(d._numConsecutiveRedirects++,d._numConsecutiveRedirects<10){var z=y.headers.location?y.headers.location.toString():null;z&&(d._redirectedHost=z,d.send(e,r))}else{var N={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};d._statsbeat&&d._statsbeat.countException(Cm.StatsbeatNetworkCategory.Breeze,i,N),typeof r=="function"&&r("Error sending telemetry because of circular redirects.")}else d._numConsecutiveRedirects=0,typeof r=="function"&&r(E),d._logInfo(E),typeof d._onSuccess=="function"&&d._onSuccess(E)})},b=pa.makeRequest(d._config,n,o,v);b.setTimeout(t.HTTP_TIMEOUT,function(){d._requestTimedOut=!0,b.abort()}),b.on("error",function(y){if(d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&d._statsbeatFailedToIngest(),d._numConsecutiveFailures++,d._statsbeat&&d._statsbeat.countException(Cm.StatsbeatNetworkCategory.Breeze,i,y),!d._enableDiskRetryMode||d._numConsecutiveFailures>0&&d._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var E="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";d._enableDiskRetryMode&&(E="Ingestion endpoint could not be reached "+d._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),d._logWarn(E,pa.dumpObj(y))}else{var E="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";d._logInfo(E,pa.dumpObj(y))}d._onErrorHelper(y),typeof r=="function"&&(y?(d._requestTimedOut&&(y.name="telemetry timeout",y.message="telemetry request timed out"),r(pa.dumpObj(y))):r("Error sending telemetry")),d._enableDiskRetryMode&&d._storeToDisk(e)}),b.write(h),b.end()}),p.label=5;case 5:return[2]}})})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(pa.stringify(e))},t.prototype._isRetriable=function(e){return e===206||e===401||e===403||e===408||e===429||e===500||e===502||e===503||e===504},t.prototype._logInfo=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||vhe.info(t.TAG,e,r)},t.prototype._logWarn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||vhe.warn(t.TAG,e,r)},t.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},t.prototype._storeToDisk=function(e){return ND(this,void 0,void 0,function(){var r,n,i,o,s,a,c;return LD(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,bp.confirmDirExists(this._tempDir)];case 1:return u.sent(),[3,3];case 2:return r=u.sent(),this._logWarn("Failed to create folder to put telemetry: "+pa.dumpObj(r)),this._onErrorHelper(r),[2];case 3:return u.trys.push([3,5,,6]),[4,vC.FileAccessControl.applyACLRules(this._tempDir)];case 4:return u.sent(),[3,6];case 5:return n=u.sent(),this._logWarn("Failed to apply file access control to folder: "+pa.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return u.trys.push([6,8,,9]),[4,bp.getShallowDirectorySize(this._tempDir)];case 7:return i=u.sent(),i>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=u.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+pa.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return u.trys.push([9,11,,12]),s=new Date().getTime()+".ai.json",a=$0.join(this._tempDir,s),this._logInfo("saving data to disk at: "+a),[4,bp.writeFileAsync(a,pa.stringify(e),{mode:384})];case 10:return u.sent(),[3,12];case 11:return c=u.sent(),this._logWarn("Failed to persist telemetry to disk: "+pa.dumpObj(c)),this._onErrorHelper(c),[2];case 12:return[2]}})})},t.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),MH.existsSync(this._tempDir)||MH.mkdirSync(this._tempDir),vC.FileAccessControl.applyACLRulesSync(this._tempDir);var r=bp.getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=$0.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+i),MH.writeFileSync(i,e,{mode:384})}catch(o){this._logWarn("Error while saving data to disk: "+pa.dumpObj(o)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){return ND(this,void 0,void 0,function(){var e,r,n,i,o,s;return LD(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,bp.readdirAsync(this._tempDir)];case 1:return e=a.sent(),e=e.filter(function(c){return $0.basename(c).indexOf(".ai.json")>-1}),e.length>0?(r=e[0],n=$0.join(this._tempDir,r),[4,bp.readFileAsync(n)]):[3,5];case 2:return i=a.sent(),[4,bp.unlinkAsync(n)];case 3:return a.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return s=a.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.prototype._fileCleanupTask=function(){return ND(this,void 0,void 0,function(){var e,r,n,i,o,s,a=this;return LD(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,bp.readdirAsync(this._tempDir)];case 1:if(e=c.sent(),e=e.filter(function(u){return $0.basename(u).indexOf(".ai.json")>-1}),!(e.length>0))return[3,5];r=0,c.label=2;case 2:return r<e.length?(n=new Date(parseInt(e[r].split(".ai.json")[0])),i=new Date(+new Date-t.FILE_RETEMPTION_PERIOD)>n,i?(o=$0.join(this._tempDir,e[r]),[4,bp.unlinkAsync(o).catch(function(u){a._onErrorHelper(u)})]):[3,4]):[3,5];case 3:c.sent(),c.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return s=c.sent(),s.code!="ENOENT"&&this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.TAG="Sender",t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1024*1024,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.CLEANUP_TIMEOUT=60*60*1e3,t.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,t.TEMPDIR_PREFIX="appInsights-node",t.HTTP_TIMEOUT=2e4,t}();yhe.exports=Lqe});var _he=k(OD=>{"use strict";Object.defineProperty(OD,"__esModule",{value:!0});OD.AzureVirtualMachine=void 0;var bhe=gn(),Oqe=No(),Mqe=S_(),Fqe="http://169.254.169.254/metadata/instance/compute",Uqe="api-version=2017-12-01",Bqe="format=json",qqe="UNREACH",Hqe=function(){function t(){}return t.getAzureComputeMetadata=function(e,r){var n,i=this,o={},s=Fqe+"?"+Uqe+"&"+Bqe,a=(n={method:"GET"},n[Mqe.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),c=Oqe.makeRequest(e,s,a,function(u){if(u.statusCode===200){o.isVM=!0;var l="";u.on("data",function(d){l+=d}),u.on("end",function(){try{var d=JSON.parse(l);o.id=d.vmId||"",o.subscriptionId=d.subscriptionId||"",o.osType=d.osType||""}catch(p){bhe.info(t.TAG,p)}r(o)})}else r(o)},!1,!1);c&&(setTimeout(function(){i._requestTimedOut=!0,c.abort()},t.HTTP_TIMEOUT),c.on("error",function(u){i._requestTimedOut&&u&&(u.name="telemetry timeout",u.message="telemetry request timed out"),u&&u.message&&u.message.indexOf(qqe)>-1?o.isVM=!1:bhe.info(t.TAG,u),r(o)}),c.end())},t.HTTP_TIMEOUT=2500,t.TAG="AzureVirtualMachine",t}();OD.AzureVirtualMachine=Hqe});var xhe=k(MD=>{"use strict";Object.defineProperty(MD,"__esModule",{value:!0});MD.NetworkStatsbeat=void 0;var jqe=function(){function t(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return t}();MD.NetworkStatsbeat=jqe});var Ihe=k((W0,Che)=>{"use strict";var Al=W0&&W0.__assign||function(){return Al=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Al.apply(this,arguments)},UH=W0&&W0.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},BH=W0&&W0.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Gqe=require("os"),Vqe=OH(),Ehe=gn(),zqe=FH(),bn=Mn(),$qe=cs(),Wqe=_he(),Yqe=sq(),She=g_(),Kqe=xhe(),The=No(),Qqe="node",Xqe=function(){function t(e,r){this._attach=bn.StatsbeatAttach.sdk,this._feature=bn.StatsbeatFeature.NONE,this._instrumentation=bn.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=r||new She;var n=this._getConnectionString(e);this._statsbeatConfig=new Yqe(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new zqe(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),e?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats()},t.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setCodelessAttach=function(){this._attach=bn.StatsbeatAttach.codeless},t.prototype.addFeature=function(e){this._feature|=e},t.prototype.removeFeature=function(e){this._feature&=~e},t.prototype.addInstrumentation=function(e){this._instrumentation|=e},t.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},t.prototype.countRequest=function(e,r,n,i,o){if(this.isEnabled()){var s=this._getNetworkStatsbeatCounter(e,r);if(s.totalRequestCount++,s.intervalRequestExecutionTime+=n,i===!1){if(!o)return;var a=s.totalFailedRequestCount.find(function(c){return o===c.statusCode});a?a.count++:s.totalFailedRequestCount.push({statusCode:o,count:1})}else s.totalSuccesfulRequestCount++}},t.prototype.countException=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.exceptionCount.find(function(s){return n.name===s.exceptionType});o?o.count++:i.exceptionCount.push({exceptionType:n.name,count:1})}},t.prototype.countThrottle=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.throttleCount.find(function(s){return n===s.statusCode});o?o.count++:i.throttleCount.push({statusCode:n,count:1})}},t.prototype.countRetry=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.retryCount.find(function(s){return n===s.statusCode});o?o.count++:i.retryCount.push({statusCode:n,count:1})}},t.prototype.trackShortIntervalStatsbeats=function(){return UH(this,void 0,void 0,function(){var e,r;return BH(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return n.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(e),this._trackRequestsCount(e),[4,this._sendStatsbeats()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),Ehe.info(t.TAG,"Failed to send Statsbeat metrics: "+The.dumpObj(r)),[3,4];case 4:return[2]}})})},t.prototype.trackLongIntervalStatsbeats=function(){return UH(this,void 0,void 0,function(){var e,r,n,i,o;return BH(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return s.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},r=Object.assign({rpId:this._resourceIdentifier},e),this._statbeatMetrics.push({name:bn.StatsbeatCounter.ATTACH,value:1,properties:r}),this._instrumentation!=bn.StatsbeatInstrumentation.NONE&&(n=Object.assign({feature:this._instrumentation,type:bn.StatsbeatFeatureType.Instrumentation},e),this._statbeatMetrics.push({name:bn.StatsbeatCounter.FEATURE,value:1,properties:n})),this._feature!=bn.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:bn.StatsbeatFeatureType.Feature},e),this._statbeatMetrics.push({name:bn.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return s.sent(),[3,4];case 3:return o=s.sent(),Ehe.info(t.TAG,"Failed to send Statsbeat metrics: "+The.dumpObj(o)),[3,4];case 4:return[2]}})})},t.prototype._getNetworkStatsbeatCounter=function(e,r){for(var n=this._getShortHost(r),i=0;i<this._networkStatsbeatCollection.length;i++)if(e===this._networkStatsbeatCollection[i].endpoint&&n===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var o=new Kqe.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(o),o},t.prototype._trackRequestDuration=function(e){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,o=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,s=o>0&&o/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},e);this._statbeatMetrics.push({name:bn.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},t.prototype._getShortHost=function(e){var r=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),i=n.exec(e);i!=null&&i.length>1&&(r=i[1]),r=r.replace(".in.applicationinsights.azure.com","")}catch{}return r},t.prototype._trackRequestsCount=function(e){for(var r=this,n=function(a){o=i._networkStatsbeatCollection[a];var c=Object.assign({endpoint:o.endpoint,host:o.host},e);o.totalSuccesfulRequestCount>0&&(i._statbeatMetrics.push({name:bn.StatsbeatCounter.REQUEST_SUCCESS,value:o.totalSuccesfulRequestCount,properties:c}),o.totalSuccesfulRequestCount=0),o.totalFailedRequestCount.length>0&&(o.totalFailedRequestCount.forEach(function(u){c=Object.assign(Al(Al({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:bn.StatsbeatCounter.REQUEST_FAILURE,value:u.count,properties:c})}),o.totalFailedRequestCount=[]),o.retryCount.length>0&&(o.retryCount.forEach(function(u){c=Object.assign(Al(Al({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:bn.StatsbeatCounter.RETRY_COUNT,value:u.count,properties:c})}),o.retryCount=[]),o.throttleCount.length>0&&(o.throttleCount.forEach(function(u){c=Object.assign(Al(Al({},c),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:bn.StatsbeatCounter.THROTTLE_COUNT,value:u.count,properties:c})}),o.throttleCount=[]),o.exceptionCount.length>0&&(o.exceptionCount.forEach(function(u){c=Object.assign(Al(Al({},c),{exceptionType:u.exceptionType})),r._statbeatMetrics.push({name:bn.StatsbeatCounter.EXCEPTION_COUNT,value:u.count,properties:c})}),o.exceptionCount=[])},i=this,o,s=0;s<this._networkStatsbeatCollection.length;s++)n(s)},t.prototype._sendStatsbeats=function(){return UH(this,void 0,void 0,function(){var e,r,n,i;return BH(this,function(o){switch(o.label){case 0:for(e=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},i=Vqe.createEnvelope(n,$qe.TelemetryType.Metric,null,this._context,this._statsbeatConfig),i.name=bn.StatsbeatTelemetryName,e.push(i);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return o.sent(),[2]}})})},t.prototype._getCustomProperties=function(){this._language=Qqe,this._cikey=this._config.instrumentationKey,this._sdkVersion=She.sdkVersion,this._os=Gqe.type(),this._runtimeVersion=process.version},t.prototype._getResourceProvider=function(){var e=this;return new Promise(function(r,n){var i=!1;e._resourceProvider=bn.StatsbeatResourceProvider.unknown,e._resourceIdentifier=bn.StatsbeatResourceProvider.unknown,process.env.AKS_ARM_NAMESPACE_ID?(e._resourceProvider=bn.StatsbeatResourceProvider.aks,e._resourceIdentifier=process.env.AKS_ARM_NAMESPACE_ID):process.env.WEBSITE_SITE_NAME?(e._resourceProvider=bn.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=bn.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(e._isVM===void 0||e._isVM==!0?(i=!0,Wqe.AzureVirtualMachine.getAzureComputeMetadata(e._config,function(o){e._isVM=o.isVM,e._isVM&&(e._resourceProvider=bn.StatsbeatResourceProvider.vm,e._resourceIdentifier=o.id+"/"+o.subscriptionId,o.osType&&(e._os=o.osType)),r()})):e._resourceProvider=bn.StatsbeatResourceProvider.unknown),i||r()})},t.prototype._shutdownStatsbeat=function(){this.enable(!1)},t.prototype._getConnectionString=function(e){for(var r=e.endpointUrl,n=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<n.length;i++)if(r.indexOf(n[i])>-1)return t.EU_CONNECTION_STRING;return t.NON_EU_CONNECTION_STRING},t.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",t.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",t.STATS_COLLECTION_SHORT_INTERVAL=9e5,t.STATS_COLLECTION_LONG_INTERVAL=864e5,t.TAG="Statsbeat",t}();Che.exports=Xqe});var Ahe=k((gCt,Rhe)=>{"use strict";var Jqe=require("url"),Zqe=sq(),eHe=nhe(),tHe=g_(),_p=cs(),rHe=ohe(),qH=phe(),whe=um(),nHe=Ihe(),iHe=FH(),HH=No(),FD=gn(),oHe=OH(),sHe=function(){function t(e){this._telemetryProcessors=[];var r=new Zqe(e);if(this.config=r,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new tHe,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new nHe(this.config,this.context),this._statsbeat.enable(!0));var n=new iHe(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new rHe(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,_p.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,_p.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,_p.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,_p.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!HH.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,_p.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,_p.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,_p.TelemetryType.Request)},t.prototype.trackDependency=function(e){if(e&&!e.target&&e.data)try{e.target=new Jqe.URL(e.data).host}catch(r){e.target=null,FD.warn(t.TAG,"The URL object is failed to create.",r)}this.track(e,_p.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&_p.telemetryTypeToBaseType(r)){var n=oHe.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&qH.samplingTelemetryProcessor(n,{correlationContext:whe.CorrelationContextManager.getCurrentContext()}),qH.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(qH.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else FD.warn(t.TAG,"track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){},t.prototype.getAuthorizationHandler=function(e){return e&&e.aadTokenCredential?(this.authorizationHandler||(FD.info(t.TAG,"Adding authorization handler"),this.authorizationHandler=new eHe(e.aadTokenCredential,e.aadAudience)),this.authorizationHandler):null},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=whe.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,FD.warn(t.TAG,"One of telemetry processors failed, telemetry item will be sent.",a,e)}return n&&(e&&e.tags&&(e.tags=HH.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=HH.validateStringMap(e.data.baseData.properties))),n},t.prototype.getStatsbeat=function(){return this._statsbeat},t.TAG="TelemetryClient",t}();Rhe.exports=sHe});var Dhe=k((jH,khe)=>{"use strict";var aHe=jH&&jH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cHe=Ahe(),Phe=ZB(),uHe=S_(),UD=gn(),lHe=function(t){aHe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?Phe.trackRequestSync(this,r):UD.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&UD.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?Phe.trackRequest(this,r):UD.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?uHe.trackRequest(this,r):UD.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(cHe);khe.exports=lHe});var Lhe=k(Nhe=>{"use strict";Object.defineProperty(Nhe,"__esModule",{value:!0})});var Bhe=k(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.dispose=K.Configuration=K.wrapWithCorrelationContext=K.startOperation=K.getCorrelationContext=K.start=K.setup=K.liveMetricsClient=K.defaultClient=K.DistributedTracingModes=void 0;var GH=um(),dHe=fde(),pHe=hde(),VH=Rk(),fHe=BB(),mHe=Sde(),hHe=Ode(),gHe=S_(),vHe=ZB(),Ohe=I0(),bC=gn(),Mhe=mpe(),zH=hpe(),yHe=ype();K.TelemetryClient=Dhe();K.Contracts=cs();K.azureFunctionsTypes=Lhe();var Fhe;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(Fhe=K.DistributedTracingModes||(K.DistributedTracingModes={}));var _C,xC,EC,SC,TC,$_,W_,Y0,CC,IC,Va=!1,BD;function bHe(t){return K.defaultClient?bC.info("The default client is already setup"):(K.defaultClient=new K.TelemetryClient(t),_C=new dHe(K.defaultClient),xC=new pHe(K.defaultClient),EC=new VH(K.defaultClient),SC=new fHe(K.defaultClient),TC=new mHe(K.defaultClient),$_=new hHe(K.defaultClient),Y0=new vHe(K.defaultClient),CC=new gHe(K.defaultClient),W_||(W_=new zH.AutoCollectNativePerformance(K.defaultClient)),IC=new yHe.AzureFunctionsHook(K.defaultClient)),$H}K.setup=bHe;function _He(){K.defaultClient&&(K.defaultClient.config.enableAutoCollectExternalLoggers==null&&(K.defaultClient.config.enableAutoCollectExternalLoggers=!0),K.defaultClient.config.enableAutoCollectConsole==null&&(K.defaultClient.config.enableAutoCollectConsole=!1),K.defaultClient.config.enableAutoCollectExceptions==null&&(K.defaultClient.config.enableAutoCollectExceptions=!0),K.defaultClient.config.enableAutoCollectPerformance==null&&(K.defaultClient.config.enableAutoCollectPerformance=!0),K.defaultClient.config.enableAutoCollectPreAggregatedMetrics==null&&(K.defaultClient.config.enableAutoCollectPreAggregatedMetrics=!0),K.defaultClient.config.enableAutoCollectHeartbeat==null&&(K.defaultClient.config.enableAutoCollectHeartbeat=!0),K.defaultClient.config.enableAutoCollectRequests==null&&(K.defaultClient.config.enableAutoCollectRequests=!0),K.defaultClient.config.enableAutoCollectDependencies==null&&(K.defaultClient.config.enableAutoCollectDependencies=!0),K.defaultClient.config.enableUseDiskRetryCaching==null&&(K.defaultClient.config.enableUseDiskRetryCaching=!0),K.defaultClient.config.enableAutoDependencyCorrelation==null&&(K.defaultClient.config.enableAutoDependencyCorrelation=!0),K.defaultClient.config.enableSendLiveMetrics==null&&(K.defaultClient.config.enableSendLiveMetrics=!1),K.defaultClient.config.enableAutoCollectExtendedMetrics==null&&(K.defaultClient.config.enableAutoCollectExtendedMetrics=!0),K.defaultClient.config.enableWebInstrumentation==null&&(K.defaultClient.config.enableWebInstrumentation=!1),K.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions==null&&(K.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=!1))}function Uhe(){if(K.defaultClient){Va=!0,_He(),_C.enable(K.defaultClient.config.enableAutoCollectExternalLoggers,K.defaultClient.config.enableAutoCollectConsole),xC.enable(K.defaultClient.config.enableAutoCollectExceptions),EC.enable(K.defaultClient.config.enableAutoCollectPerformance),SC.enable(K.defaultClient.config.enableAutoCollectPreAggregatedMetrics),TC.enable(K.defaultClient.config.enableAutoCollectHeartbeat),Y0.useAutoCorrelation(K.defaultClient.config.enableAutoDependencyCorrelation,K.defaultClient.config.enableUseAsyncHooks),Y0.enable(K.defaultClient.config.enableAutoCollectRequests),CC.enable(K.defaultClient.config.enableAutoCollectDependencies),$_.enable(K.defaultClient.config.enableWebInstrumentation,K.defaultClient.config.webInstrumentationConnectionString),K.defaultClient.config.enableSendLiveMetrics&&(K.liveMetricsClient||(K.liveMetricsClient=new Mhe(K.defaultClient.config,K.defaultClient.context,K.defaultClient.getAuthorizationHandler),BD=new VH(K.liveMetricsClient,1e3,!0),K.liveMetricsClient.addCollector(BD),K.defaultClient.quickPulseClient=K.liveMetricsClient),K.liveMetricsClient.enable(K.defaultClient.config.enableSendLiveMetrics)),IC.enable(K.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions);var t=zH.AutoCollectNativePerformance.parseEnabled(K.defaultClient.config.enableAutoCollectExtendedMetrics,K.defaultClient.config);W_.enable(K.defaultClient.config.enableAutoCollectExtendedMetrics,t.disabledMetrics),K.defaultClient&&K.defaultClient.channel&&K.defaultClient.channel.setUseDiskRetryCaching(K.defaultClient.config.enableUseDiskRetryCaching,K.defaultClient.config.enableResendInterval,K.defaultClient.config.enableMaxBytesOnDisk)}else bC.warn("Start cannot be called before setup");return $H}K.start=Uhe;function xHe(){return GH.CorrelationContextManager.getCurrentContext()}K.getCorrelationContext=xHe;function EHe(t,e){return GH.CorrelationContextManager.startOperation(t,e)}K.startOperation=EHe;function SHe(t,e){return GH.CorrelationContextManager.wrapCallback(t,e)}K.wrapWithCorrelationContext=SHe;var $H=function(){function t(){}return t.setDistributedTracingMode=function(e){return Ohe.w3cEnabled=e===Fhe.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),K.defaultClient&&(K.defaultClient.config.enableAutoCollectExternalLoggers=e,K.defaultClient.config.enableAutoCollectConsole=r,Va&&_C.enable(e,r)),t},t.setAutoCollectExceptions=function(e){return K.defaultClient&&(K.defaultClient.config.enableAutoCollectExceptions=e,Va&&xC.enable(e)),t},t.setAutoCollectPerformance=function(e,r){if(r===void 0&&(r=!0),K.defaultClient){K.defaultClient.config.enableAutoCollectPerformance=e;var n=zH.AutoCollectNativePerformance.parseEnabled(r,K.defaultClient.config);K.defaultClient.config.enableAutoCollectExtendedMetrics=n.isEnabled,Va&&(EC.enable(e),W_.enable(K.defaultClient.config.enableAutoCollectExtendedMetrics,n.disabledMetrics))}return t},t.setAutoCollectPreAggregatedMetrics=function(e){return K.defaultClient&&(K.defaultClient.config.enableAutoCollectPreAggregatedMetrics=e,Va&&SC.enable(e)),t},t.setAutoCollectHeartbeat=function(e){return K.defaultClient&&(K.defaultClient.config.enableAutoCollectHeartbeat=e,Va&&TC.enable(e)),t},t.enableAutoWebSnippetInjection=function(e,r){return K.defaultClient&&(K.defaultClient.config.enableWebInstrumentation=e,K.defaultClient.config.webInstrumentationConnectionString=r,Va&&$_.enable(K.defaultClient.config.enableAutoWebSnippetInjection,K.defaultClient.config.webSnippetConnectionString)),t},t.enableWebInstrumentation=function(e,r){return K.defaultClient&&(K.defaultClient.config.enableWebInstrumentation=e,K.defaultClient.config.webInstrumentationConnectionString=r,Va&&$_.enable(K.defaultClient.config.enableWebInstrumentation,K.defaultClient.config.webInstrumentationConnectionString)),t},t.setAutoCollectRequests=function(e){return K.defaultClient&&(K.defaultClient.config.enableAutoCollectRequests=e,Va&&Y0.enable(e)),t},t.setAutoCollectDependencies=function(e){return K.defaultClient&&(K.defaultClient.config.enableAutoCollectDependencies=e,Va&&CC.enable(e)),t},t.setAutoDependencyCorrelation=function(e,r){return K.defaultClient&&(K.defaultClient.config.enableAutoDependencyCorrelation=e,K.defaultClient.config.enableUseAsyncHooks=r,Va&&Y0.useAutoCorrelation(e,r)),t},t.setUseDiskRetryCaching=function(e,r,n){return K.defaultClient&&(K.defaultClient.config.enableUseDiskRetryCaching=e,K.defaultClient.config.enableResendInterval=r,K.defaultClient.config.enableMaxBytesOnDisk=n,K.defaultClient.channel&&K.defaultClient.channel.setUseDiskRetryCaching(K.defaultClient.config.enableUseDiskRetryCaching,K.defaultClient.config.enableResendInterval,K.defaultClient.config.enableMaxBytesOnDisk)),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),bC.enableDebug=e,bC.disableWarnings=!r,t},t.setAutoCollectIncomingRequestAzureFunctions=function(e){return K.defaultClient&&(K.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=e,Va&&IC.enable(e)),t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),K.defaultClient?(!K.liveMetricsClient&&e?(K.liveMetricsClient=new Mhe(K.defaultClient.config,K.defaultClient.context,K.defaultClient.getAuthorizationHandler),BD=new VH(K.liveMetricsClient,1e3,!0),K.liveMetricsClient.addCollector(BD),K.defaultClient.quickPulseClient=K.liveMetricsClient):K.liveMetricsClient&&K.liveMetricsClient.enable(e),K.defaultClient.config.enableSendLiveMetrics=e,t):(bC.warn("Live metrics client cannot be setup without the default client"),t)},t.start=Uhe,t}();K.Configuration=$H;function THe(){Ohe.w3cEnabled=!0,K.defaultClient=null,Va=!1,_C&&_C.dispose(),xC&&xC.dispose(),EC&&EC.dispose(),SC&&SC.dispose(),TC&&TC.dispose(),$_&&$_.dispose(),W_&&W_.dispose(),Y0&&Y0.dispose(),CC&&CC.dispose(),K.liveMetricsClient&&(K.liveMetricsClient.enable(!1),K.liveMetricsClient=void 0),IC&&IC.dispose()}K.dispose=THe});var XH=k(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.TargetPopulation=wm.Filters=wm.VSCodeFilterProvider=void 0;var HD=require("vscode"),QH=class t{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Pl.ApplicationVersion:return t.trimVersionSuffix(HD.version);case Pl.Build:return HD.env.appName;case Pl.ClientId:return HD.env.machineId;case Pl.ExtensionName:return this.extensionName;case Pl.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case Pl.Language:return HD.env.language;case Pl.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Pl);for(let n of r)e.set(n,this.getFilterValue(n));return e}};wm.VSCodeFilterProvider=QH;var Pl;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Pl||(wm.Filters=Pl={}));var jhe;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(jhe||(wm.TargetPopulation=jhe={}))});var Ghe=k(jD=>{"use strict";Object.defineProperty(jD,"__esModule",{value:!0});jD.BaseFeatureProvider=void 0;var JH=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};jD.BaseFeatureProvider=JH});var Vhe=k(GD=>{"use strict";Object.defineProperty(GD,"__esModule",{value:!0});GD.FilteredFeatureProvider=void 0;var wHe=Ghe(),ZH=class extends wHe.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};GD.FilteredFeatureProvider=ZH});var zhe=k(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.TasApiFeatureProvider=Rm.TASAPI_FETCHERROR_EVENTNAME=void 0;var RHe=Vhe();Rm.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var ej="ErrorType",tj=class extends RHe.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let c=a,u=new Map;c.responseReceived&&!c.responseOk?u.set(ej,"ServerError"):c.responseReceived===!1?u.set(ej,"NoResponse"):u.set(ej,"GenericError"),this.telemetry.postEvent(Rm.TASAPI_FETCHERROR_EVENTNAME,u)}if(!n)throw Error(Rm.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let u=c+(a.Parameters[c]?"":"cf");s.includes(u)||s.push(u)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};Rm.TasApiFeatureProvider=tj});var $he=k(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:!0});K_.HttpClient=K_.FetchError=void 0;var Y_=class extends Error{constructor(e,r,n){super(e),this.responseReceived=r,this.responseOk=n}};K_.FetchError=Y_;var rj=class{constructor(e){this.endpoint=e}async get(e){let r=await fetch(this.endpoint,{method:"GET",headers:e?.headers});if(!r)throw new Y_("No response received",!1);if(!r.ok)throw new Y_("Response not ok",!0,!1);let n=await r.json();if(!n)throw new Y_("No data received",!1);return{data:n}}};K_.HttpClient=rj});var Whe=k(VD=>{"use strict";Object.defineProperty(VD,"__esModule",{value:!0});VD.MemoryKeyValueStorage=void 0;var nj=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};VD.MemoryKeyValueStorage=nj});var Yhe=k(zD=>{"use strict";Object.defineProperty(zD,"__esModule",{value:!0});zD.ExperimentationServiceBase=void 0;var AHe=Whe(),ij=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,r,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new AHe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`);let n=this.features.configs.find(i=>i.Id===e);return n?.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};zD.ExperimentationServiceBase=ij});var Khe=k($D=>{"use strict";Object.defineProperty($D,"__esModule",{value:!0});$D.PollingService=void 0;var oj=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};$D.PollingService=oj});var Qhe=k(WD=>{"use strict";Object.defineProperty(WD,"__esModule",{value:!0});WD.ExperimentationServiceAutoPolling=void 0;var PHe=Yhe(),kHe=Khe(),sj=class extends PHe.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new kHe.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};WD.ExperimentationServiceAutoPolling=sj});var Xhe=k(KD=>{"use strict";Object.defineProperty(KD,"__esModule",{value:!0});KD.ExperimentationService=void 0;var DHe=zhe(),NHe=$he(),LHe=Qhe(),YD=class extends LHe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new DHe.TasApiFeatureProvider(new NHe.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};KD.ExperimentationService=YD;YD.REFRESH_RATE_IN_MINUTES=30});var Jhe=k(QD=>{"use strict";Object.defineProperty(QD,"__esModule",{value:!0});QD.ExperimentationService=void 0;var OHe=Xhe();Object.defineProperty(QD,"ExperimentationService",{enumerable:!0,get:function(){return OHe.ExperimentationService}})});var Zhe=k(XD=>{"use strict";Object.defineProperty(XD,"__esModule",{value:!0});XD.MementoKeyValueStorage=void 0;var aj=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};XD.MementoKeyValueStorage=aj});var ege=k(uj=>{"use strict";Object.defineProperty(uj,"__esModule",{value:!0});var cj=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};uj.default=cj});var rge=k(Q_=>{"use strict";Object.defineProperty(Q_,"__esModule",{value:!0});Q_.getExperimentationServiceAsync=Q_.getExperimentationService=void 0;var MHe=XH(),FHe=Jhe(),lj=require("vscode"),UHe=Zhe(),BHe=ege(),qHe="https://default.exp-tas.com/vscode/ab",HHe="query-expfeature",jHe="abexp.assignmentcontext",GHe="VSCode.ABExp.FeatureData",VHe=1e3*60*30;function tge(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=lj.workspace.getConfiguration("telemetry");if(!(lj.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):lj.env.isTelemetryEnabled))return new BHe.default;let u=[new MHe.VSCodeFilterProvider(t,e,r),...o],l=new UHe.MementoKeyValueStorage(i);return new FHe.ExperimentationService({filterProviders:u,telemetry:n,storageKey:GHe,keyValueStorage:l,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:jHe,telemetryEventName:HHe,endpoint:qHe,refetchInterval:VHe})}Q_.getExperimentationService=tge;async function zHe(t,e,r,n,i,...o){let s=tge(t,e,r,n,i,...o);return await s.initializePromise,s}Q_.getExperimentationServiceAsync=zHe});var ige=k(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.TargetPopulation=Am.getExperimentationServiceAsync=Am.getExperimentationService=void 0;var nge=rge();Object.defineProperty(Am,"getExperimentationService",{enumerable:!0,get:function(){return nge.getExperimentationService}});Object.defineProperty(Am,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return nge.getExperimentationServiceAsync}});var $He=XH();Object.defineProperty(Am,"TargetPopulation",{enumerable:!0,get:function(){return $He.TargetPopulation}})});var sge=k(eN=>{"use strict";Object.defineProperty(eN,"__esModule",{value:!0});eN.BaseTelemetryReporter=void 0;var dj=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let o of Object.keys(i??{})){let s=i[o];typeof o=="string"&&s!==void 0&&(i[o]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};eN.BaseTelemetryReporter=dj});var age=k(tN=>{"use strict";Object.defineProperty(tN,"__esModule",{value:!0});tN.BaseTelemetrySender=void 0;var xp;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(xp||(xp={}));var pj=class{constructor(e,r){this._instantiationStatus=xp.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==xp.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==xp.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===xp.NOT_INSTANTIATED&&(this._instantiationStatus=xp.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=xp.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=xp.INSTANTIATED}))}};tN.BaseTelemetrySender=pj});var mj=k(rN=>{"use strict";Object.defineProperty(rN,"__esModule",{value:!0});rN.TelemetryUtil=void 0;var fj=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.4"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};rN.TelemetryUtil=fj});var X_,Ep,kl,Cu,J_,AC,hj=T(()=>{X_="function",Ep="object",kl="undefined",Cu="prototype",J_=Object,AC=J_[Cu]});var fi,ti,Z_,Pm,Sp,Ic,PC,Tp,kC,DC,cge,wc,NC,Hr,ex,ri,tx,gj,za,vj,yj,Cp,fa,jt=T(()=>{fi=void 0,ti=null,Z_="",Pm="function",Sp="object",Ic="prototype",PC="__proto__",Tp="undefined",kC="constructor",DC="Symbol",cge="_polyfill",wc="length",NC="name",Hr="call",ex="toString",ri=Object,tx=ri[Ic],gj=String,za=gj[Ic],vj=Math,yj=Array,Cp=yj[Ic],fa=Cp.slice});function ds(t,e){try{return{v:t.apply(this,e)}}catch(r){return{e:r}}}var rx=T(()=>{});function uge(t,e){var r=ds(t);return r.e?e:r.v}var lge=T(()=>{rx()});function nN(t){return function(e){return typeof e===t}}function dge(t){var e="[object "+t+"]";return function(r){return!!(r&&LC(r)===e)}}function LC(t){return tx.toString.call(t)}function iN(t,e){return typeof t===e}function _t(t){return typeof t===Tp||t===Tp}function _e(t){return t===ti||_t(t)}function _j(t){return t===ti||!oN(t)}function oN(t){return!!t||t!==fi}function xj(t){return!bj&&(bj=["string","number","boolean",Tp,"symbol","bigint"]),t!==Sp&&bj.indexOf(t)!==-1}function sn(t){return!t&&_e(t)?!1:!!t&&typeof t===Sp}function Dm(t){return!!(t&&t.then&&at(t.then))}function sN(t){return!t||!Rc(t)}function Rc(t){return!(!t||uge(function(){return!(t&&0+t)},!t))}var bj,Ct,at,We,nx,ps,Iu,km,$a=T(()=>{jt();lge();Ct=nN("string"),at=nN(Pm);We=yj.isArray,nx=dge("Date"),ps=nN("number"),Iu=nN("boolean"),km=dge("Error")});var K0,aN=T(()=>{jt();K0=ri.getOwnPropertyDescriptor});function mi(t,e){return!!t&&tx.hasOwnProperty[Hr](t,e)}var cN=T(()=>{jt()});function pge(t,e){return mi(t,e)||!!K0(t,e)}var ma,uN=T(()=>{jt();aN();cN();ma=ri.hasOwn||pge});function He(t,e,r){if(t&&sn(t)){for(var n in t)if(ma(t,n)&&e[Hr](r||t,n,t[n])===-1)break}}var Nm=T(()=>{$a();jt();uN()});function Ej(t,e,r,n){var i={};return He(t,function(o,s){i[o]=e?s:o,i[s]=r?s:o}),n(i)}var fge=T(()=>{Nm()});function Hn(t){throw new Error(t)}function wn(t){throw new TypeError(t)}var Lm=T(()=>{});function mge(t){var e=[];return He(t,function(r,n){e.push([r,n])}),e}function hge(t){var e=[];return He(t,function(r,n){e.push(n)}),e}var gge=T(()=>{Nm()});function vge(t){return t}function YHe(t){return t[PC]||ti}function Fs(t){return Sj&&He(t,function(e,r){(We(r)||sn(r))&&Sj(r)}),Dl(t)}var Sj,Q0,Qi,Dl,lN,ix,KHe,wIt,ox=T(()=>{jt();$a();Nm();gge();Sj=ri.freeze;Q0=ri.assign,Qi=ri.keys;Dl=Sj||vge,lN=ri.seal||vge,ix=ri.getPrototypeOf||YHe,KHe=ri.entries||mge,wIt=ri.values||hge});function Tj(t){return Ej(t,1,0,Fs)}function Cj(t){return Ej(t,0,0,Fs)}function yge(t){var e={};return He(t,function(r,n){e[r]=n[1],e[n[0]]=n[1]}),Fs(e)}function Ij(t){return yge(t)}var wj=T(()=>{fge();Nm();ox()});var dN,Rj=T(()=>{wj();dN=Cj({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12})});var _n,X0=T(()=>{jt();_n=gj});function Pj(){var t;return typeof globalThis!==Tp&&(t=globalThis),!t&&typeof self!==Tp&&(t=self),!t&&typeof window!==Tp&&(t=window),!t&&typeof global!==Tp&&(t=global),t}function pN(){if(!Aj){var t=ds(Pj).v||{};Aj=t[bge]=t[bge]||{}}return Aj}var bge,Aj,fN=T(()=>{rx();jt();bge="__tsUtils$gblCfg"});function Fe(t,e){var r=Z_,n=tx[ex][Hr](t);n===QHe&&(t={stack:_n(t.stack),message:_n(t.message),name:_n(t.name)});try{r=JSON.stringify(t,ti,e?typeof e=="number"?e:4:fi),r=r&&r.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||_n(t)}catch(i){r=" - "+Fe(i,e)}return n+": "+r}var QHe,Om=T(()=>{jt();X0();QHe="[object Error]"});function wu(t,e,r){var n=e&&e[t];return function(i){var o=i&&i[t]||n;if(o||r){var s=arguments;return(o||r).apply(i,o?fa[Hr](s,1):s)}wn('"'+_n(t)+'" not defined for '+Fe(i))}}function _ge(t){return function(e){return e[t]}}var Ac,Pc=T(()=>{Om();Lm();X0();jt();Ac=wu});var KIt,xge,Ege=T(()=>{jt();KIt=vj.min,xge=vj.max});var kj,Sge=T(()=>{jt();Pc();kj=Ac("slice",za)});function Tge(t,e,r){return _e(t)&&wn("'polyStrSubstr called with invalid "+Fe(t)),r<0?Z_:(e=e||0,e<0&&(e=xge(e+t[wc],0)),_t(r)?kj(t,e):kj(t,e,e+r))}function Mm(t,e){return ni(t,0,e)}var ni,Ru,mN=T(()=>{$a();Om();Lm();jt();Pc();Ege();Sge();ni=Ac("substring",za),Ru=wu("substr",za,Tge)});function XHe(){if(!Dj){var t=pN();Dj=t.gblSym=t.gblSym||{k:{},s:{}}}return Dj}function gN(t){var e={description:_n(t),toString:function(){return DC+"("+t+")"}};return e[cge]=!0,e}function Ige(t){var e=XHe();if(!ma(e.k,t)){var r=gN(t),n=Qi(e.s).length;r[Cge]=function(){return n+"_"+r[ex]()},e.k[t]=r,e.s[r[Cge]()]=_n(t)}return e.k[t]}function wge(t){!hN&&(hN={});var e,r=dN[t];return r&&(e=hN[r]=hN[r]||gN(DC+"."+r)),e}var Cge,Dj,hN,Rge=T(()=>{Rj();jt();uN();X0();fN();ox();Cge="_urid"});function Age(t){var e={};if(e[vN.c]=!0,e[vN.e]=!0,t.l){e.get=function(){return t.l.v};var r=K0(t.l,"v");r&&r.set&&(e.set=function(n){t.l.v=n})}return He(t,function(n,i){e[vN[n]]=_t(i)?e[vN[n]]:i}),e}function yN(t,e,r,n,i,o){var s={e:o,c:i};return r&&(s.g=r),n&&(s.s=n),ii(t,e,Age(s))}function Sr(t,e,r){return ii(t,e,Age(r))}var vN,ii,JHe,J0=T(()=>{jt();$a();Nm();aN();vN={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};ii=ri.defineProperty,JHe=ri.defineProperties});function Au(){oi=pN()}function Pu(t){var e={};return!oi&&Au(),e.b=oi.lzy,ii(e,"v",{configurable:!0,get:function(){var r=t();return oi.lzy||ii(e,"v",{value:r}),e.b=oi.lzy,r}}),e}var oi,Z0=T(()=>{fN();J0()});function sx(t,e){return Pu(function(){var r=ds(t);return r.e?e:r.v})}var Nj=T(()=>{Z0();rx()});function OC(t){return ii({toJSON:function(){return t}},"v",{value:t})}var Lj=T(()=>{J0()});function FC(t,e){var r;return function(){return!oi&&Au(),(!r||oi.lzy)&&(r=OC(ds(t,e).v)),r.v}}function Ip(t){return Pu(function(){return ds(Pr,[t]).v||fi})}function ms(t){return!oi&&Au(),(!MC||t===!1||oi.lzy)&&(MC=OC(ds(Pj).v||ti)),MC.v}function Pr(t,e){var r=!MC||e===!1?ms(e):MC.v;return r&&r[t]?r[t]:t===Pge?Gn():ti}function Fm(){return!!jn()}function Um(){return!!Gn()}function ax(){return!!Ri()}function bN(){return!!UC()}var Pge,MC,jn,Gn,Ri,UC,Oj,BC=T(()=>{jt();fN();Z0();Lj();rx();Pge="window";jn=FC(Pr,["document"]);Gn=FC(Pr,[Pge]);Ri=FC(Pr,["navigator"]);UC=FC(Pr,["history"]),Oj=FC(function(){return!!ds(function(){return process&&(process.versions||{}).node}).v})});function _N(){(!hs||!hs.b)&&(hs=Ip(DC),Mj=sx(function(){return hs.v?hs.v.for:fi},fi),ZHe=sx(function(){return hs.v?hs.v.keyFor:fi},fi))}function Fj(){return!!kge()}function kge(){return!oi&&Au(),(!hs||oi.lzy)&&_N(),hs.v}function ev(t,e){var r=dN[t];return!oi&&Au(),(!hs||oi.lzy)&&_N(),hs.v?hs.v[r||t]:e?fi:wge(t)}function tv(t,e){return!oi&&Au(),(!hs||oi.lzy)&&_N(),hs.v?hs.v(t):e?ti:gN(t)}function qC(t){return!oi&&Au(),(!Mj||!hs||oi.lzy)&&_N(),(Mj.v||Ige)(t)}var hs,Mj,ZHe,xN=T(()=>{jt();Rge();Rj();Z0();Nj();BC()});function HC(t){return!!t&&at(t.next)}function Dge(t){return!_j(t)&&at(t[ev(3)])}var Uj=T(()=>{xN();$a()});function Nge(t,e,r){if(t&&(HC(t)||(!EN&&(EN=OC(ev(3))),t=t[EN.v]?t[EN.v]():null),HC(t))){var n=void 0,i=void 0;try{for(var o=0;!(i=t.next()).done&&e[Hr](r||t,i.value,o,t)!==-1;)o++}catch(s){n={e:s},t.throw&&(i=null,t.throw(n))}finally{try{i&&!i.done&&t.return&&t.return(i)}finally{if(n)throw n.e}}}}var EN,Lge=T(()=>{Lj();jt();xN();Uj()});function wp(t,e,r){return t.apply(e,r)}var SN=T(()=>{});function kc(t,e){return!_t(e)&&t&&(We(e)?wp(t.push,t,e):HC(e)||Dge(e)?Nge(e,function(r){t.push(r)}):t.push(e)),t}var Oge=T(()=>{$a();Uj();Lge();SN()});function he(t,e,r){if(t)for(var n=t[wc]>>>0,i=0;i<n&&!(i in t&&e[Hr](r||t,t[i],i,t)===-1);i++);}var TN=T(()=>{jt()});var lr,Bj=T(()=>{jt();Pc();lr=Ac("indexOf",Cp)});var Nl,Mge=T(()=>{jt();Pc();Nl=Ac("map",Cp)});function Bm(t,e,r){return(t&&t.slice||fa).apply(t,fa[Hr](arguments,1))}var Fge=T(()=>{jt()});function Uge(t,e,r){return lr(t,e,r)!==-1}var Bge=T(()=>{Bj()});var CN,qge=T(()=>{jt();Pc();Bge();CN=wu("includes",Cp,Uge)});var cx,Hge=T(()=>{jt();Pc();cx=Ac("reduce",Cp)});function eje(t){if(!t)return{};var e=typeof t;e!==Sp&&e!==Pm&&wn("Prototype must be an Object or function: "+Fe(t));function r(){}return r[Ic]=t,new r}var Dc,qj=T(()=>{jt();Om();Lm();Dc=ri.create||eje});function jj(t,e){var r=ri.setPrototypeOf||function(n,i){!Hj&&(Hj=Pu(function(){var o;return o={},o[PC]=[],o instanceof Array})),Hj.v?n[PC]=i:He(i,function(o,s){return n[o]=s})};return r(t,e)}var Hj,jge=T(()=>{Z0();jt();Nm()});function tje(t,e,r){ds(Sr,[e,NC,{v:t,c:!0,e:!1}]),e=jj(e,r);function n(){this.constructor=e,ds(Sr,[this,NC,{v:t,c:!0,e:!1}])}return e[Ic]=r===ti?Dc(r):(n[Ic]=r[Ic],new n),e}function Gge(t,e){e&&(t[NC]=e)}function Gj(t,e,r){var n=r||Error,i=n[Ic][NC],o=Error.captureStackTrace;return tje(t,function(){var s=this,a=arguments;try{ds(Gge,[n,t]);var c=wp(n,s,fa[Hr](a))||s;if(c!==s){var u=ix(s);u!==ix(c)&&jj(c,u)}return o&&o(c,s[kC]),e&&e(c,a),c}finally{ds(Gge,[n,i])}},n)}var Vge=T(()=>{SN();jt();qj();J0();ox();jge();rx()});function Vn(){return(Date.now||zge)()}function zge(){return new Date().getTime()}var Vj=T(()=>{});function rje(t){return function(r){return _e(r)&&wn("strTrim called ["+Fe(r)+"]"),r&&r.replace&&(r=r.replace(t,Z_)),r}}var $ge,Wge=T(()=>{$a();Om();Lm();jt();$ge=rje(/^\s+|(?=\s)\s+$/g)});var yr,Yge=T(()=>{jt();Pc();Wge();yr=wu("trim",za,$ge)});function Xi(t){if(!t||typeof t!==Sp)return!1;Wj||(Wj=Um()?Gn():!0);var e=!1;if(t!==Wj){$j||(zj=Function[Ic][ex],$j=zj[Hr](ri));try{var r=ix(t);e=!r,e||(mi(r,kC)&&(r=r[kC]),e=r&&typeof r===Pm&&zj[Hr](r)===$j)}catch{}}return e}var zj,$j,Wj,Yj=T(()=>{BC();jt();cN();ox()});function nje(t){return t.value&&Zge(t),!0}function ije(t,e,r,n){var i;return he(t,function(o){if(o.k===e)return i=o,-1}),i||(i={k:e,v:e},t.push(i),n(i)),i.v}function Kj(t,e,r,n){var i=r.handler,o=r.path?n?r.path.concat(n):r.path:[],s={handler:r.handler,src:r.src,path:o},a=typeof e,c=!1,u=!1;e&&a===Sp?c=Xi(e):u=e===ti||xj(a);var l={type:a,isPrim:u,isPlain:c,value:e,result:e,path:o,origin:r.src,copy:function(d,p){return Kj(t,d,p?s:r,p)},copyTo:function(d,p){return Qge(t,d,p,s)}};return l.isPrim?i&&i[Hr](r,l)?l.result:e:ije(t,e,o,function(d){Sr(l,"result",{g:function(){return d.v},s:function(m){d.v=m}});for(var p=0,f=i;!(f||(p<Kge.length?Kge[p++]:nje))[Hr](r,l);)f=ti})}function Qge(t,e,r,n){if(!_e(r))for(var i in r)e[i]=Kj(t,r[i],n,i);return e}function Xge(t,e,r){var n={handler:r,src:e,path:[]};return Qge([],t,e,n)}function Jge(t,e){var r={handler:e,src:t};return Kj([],t,r)}function oje(t){var e=t.value;if(We(e)){var r=t.result=[];return r.length=e.length,t.copyTo(r,e),!0}return!1}function sje(t){var e=t.value;return nx(e)?(t.result=new Date(e.getTime()),!0):!1}function aje(t){return t.type===Pm}function Zge(t){var e=t.value;if(e&&t.isPlain){var r=t.result={};return t.copyTo(r,e),!0}return!1}var Kge,e0e=T(()=>{TN();$a();jt();J0();Yj();Kge=[oje,Zge,aje,sje]});function cje(t,e){return he(e,function(r){Xge(t,r)}),t}function IN(t,e,r,n,i,o,s){return cje(Jge(t)||{},fa[Hr](arguments))}var t0e=T(()=>{TN();jt();e0e()});var ux,r0e=T(()=>{jt();Pc();ux=_ge(wc)});function Rp(){return!oi&&Au(),(!wN||!wN.b&&oi.lzy)&&(wN=Ip("performance")),wN.v}function lx(){var t=Rp();return t&&t.now?t.now():Vn()}var wN,n0e=T(()=>{Vj();BC();Z0()});function uje(t,e,r){Ct(t)||wn("'"+Fe(t)+"' is not a string");var n=Ct(e)?e:_n(e),i=!_t(r)&&r<t[wc]?r:t[wc];return ni(t,i-n[wc],i)===n}var qm,i0e=T(()=>{$a();Om();Lm();jt();Pc();X0();mN();qm=wu("endsWith",za,uje)});var Us,o0e=T(()=>{jt();Pc();Us=Ac("indexOf",za)});function lje(t,e,r){Ct(t)||wn("'"+Fe(t)+"' is not a string");var n=Ct(e)?e:_n(e),i=r>0?r:0;return ni(t,i,i+n[wc])===n}var rv,s0e=T(()=>{$a();Om();Lm();jt();Pc();X0();mN();rv=wu("startsWith",za,lje)});function a0e(t,e,r){var n=!0,i=t?e(ti):ti,o;function s(){return n=!1,i&&i[Xj]&&i[Xj](),o}function a(){i&&r(i),i=ti}function c(){return i=e(i),n||s(),o}function u(l){!l&&i&&a(),l&&!i&&c()}return o={cancel:a,refresh:c},o[Jj]=function(){return i&&i[Jj]?i[Jj]():n},o[Qj]=function(){return n=!0,i&&i[Qj]&&i[Qj](),o},o[Xj]=s,o=ii(o,dje,{get:function(){return!!i},set:u}),{h:o,dn:function(){i=ti}}}var Qj,Xj,Jj,dje,c0e=T(()=>{jt();J0();Qj="ref",Xj="unref",Jj="hasRef",dje="enabled"});function Zj(t,e,r){var n=We(e),i=n?e.length:0,o=(i>0?e[0]:n?fi:e)||setTimeout,s=(i>1?e[1]:fi)||clearTimeout,a=r[0];r[0]=function(){c.dn(),wp(a,fi,fa[Hr](arguments))};var c=a0e(t,function(u){if(u){if(u.refresh)return u.refresh(),u;wp(s,fi,[u])}return wp(o,fi,r)},function(u){wp(s,fi,[u])});return c.h}function ha(t,e){return Zj(!0,fi,fa[Hr](arguments))}function eG(t,e,r){return Zj(!0,t,fa[Hr](arguments,1))}function tG(t,e){return Zj(!1,fi,fa[Hr](arguments))}var u0e=T(()=>{SN();$a();jt();c0e()});var lt=T(()=>{Oge();TN();qge();Bj();Mge();Hge();Fge();$a();Vge();Vj();Om();wj();BC();t0e();Z0();r0e();n0e();Nj();Lm();qj();J0();Nm();aN();uN();cN();Yj();ox();i0e();o0e();s0e();mN();X0();Yge();xN();u0e()});function ga(t,e){typeof e!==X_&&e!==null&&wn("Class extends value "+String(e)+" is not a constructor or null"),rG(t,e);function r(){this.constructor=t}t[Cu]=e===null?Dc(e):(r[Cu]=e[Cu],new r)}function RN(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}var nPt,iPt,l0e,mje,Nc,rG,d0e=T(()=>{lt();hj();nPt=(ms()||{}).Symbol,iPt=(ms()||{}).Reflect,l0e="hasOwnProperty",mje=function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)AC[l0e].call(e,i)&&(t[i]=e[i])}return t},Nc=Q0||mje,rG=function(t,e){return rG=J_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[l0e](i)&&(r[i]=n[i])},rG(t,e)}});var p0e=T(()=>{});var va=T(()=>{hj();d0e();p0e();lt()});function DN(t){return t&&(t===lG[Ap]||t===Array[Ap])}function dG(t){return DN(t)||t===Function[Ap]}function nv(t){var e;if(t){if(GC)return GC(t);var r=t[uG]||t[Ap]||(t[NN]?t[NN][Ap]:null);e=t[PN]||r,mi(t,PN)||(delete t[nG],e=t[PN]=t[nG]||t[PN],t[nG]=r)}return e}function MN(t,e){var r=[];if(h0e)r=h0e(t);else for(var n in t)typeof n=="string"&&mi(t,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)e(r[i])}function pG(t,e,r){return e!==NN&&typeof t[e]===LN&&(r||mi(t,e))&&e!==uG&&e!==Ap}function FN(t){wn("DynamicProto: "+t)}function gje(t){var e=Dc(null);return MN(t,function(r){!e[r]&&pG(t,r,!1)&&(e[r]=t[r])}),e}function fG(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}function vje(t,e,r,n){function i(c,u,l){var d=u[l];if(d[oG]&&n){var p=c[ON]||{};p[jC]!==!1&&(d=(p[u[dx]]||{})[l]||d)}return function(){return d.apply(c,arguments)}}var o=Dc(null);MN(r,function(c){o[c]=i(e,r,c)});for(var s=nv(t),a=[];s&&!dG(s)&&!fG(a,s);)MN(s,function(c){!o[c]&&pG(s,c,!GC)&&(o[c]=i(e,s,c))}),a.push(s),s=nv(s);return o}function yje(t,e,r,n){var i=null;if(t&&mi(r,dx)){var o=t[ON]||Dc(null);if(i=(o[r[dx]]||Dc(null))[e],i||FN("Missing ["+e+"] "+LN),!i[sG]&&o[jC]!==!1){for(var s=!mi(t,e),a=nv(t),c=[];s&&a&&!dG(a)&&!fG(c,a);){var u=a[e];if(u){s=u===n;break}c.push(a),a=nv(a)}try{s&&(t[e]=i),i[sG]=1}catch{o[jC]=!1}}}return i}function bje(t,e,r){var n=e[t];return n===r&&(n=nv(e)[t]),typeof n!==LN&&FN("["+t+"] is not a "+LN),n}function _je(t,e,r,n,i){function o(c,u){var l=function(){var d=yje(this,u,c,l)||bje(u,c,l);return d.apply(this,arguments)};return l[oG]=1,l}if(!DN(t)){var s=r[ON]=r[ON]||Dc(null);if(!DN(s)){var a=s[e]=s[e]||Dc(null);s[jC]!==!1&&(s[jC]=!!i),DN(a)||MN(r,function(c){pG(r,c,!1)&&r[c]!==n[c]&&(a[c]=r[c],delete r[c],(!mi(t,c)||t[c]&&!t[c][oG])&&(t[c]=o(t,c)))})}}}function xje(t,e){if(GC){for(var r=[],n=nv(e);n&&!dG(n)&&!fG(r,n);){if(n===t)return!0;r.push(n),n=nv(n)}return!1}return!0}function iG(t,e){return mi(t,Ap)?t.name||e||f0e:((t||{})[NN]||{}).name||e||f0e}function Gt(t,e,r,n){mi(t,Ap)||FN("theClass is an invalid class definition.");var i=t[Ap];xje(i,e)||FN("["+iG(t)+"] not in hierarchy of ["+iG(e)+"]");var o=null;mi(i,dx)?o=i[dx]:(o=hje+iG(t,"_")+"$"+cG.n,cG.n++,i[dx]=o);var s=Gt[v0e],a=!!s[kN];a&&n&&n[kN]!==void 0&&(a=!!n[kN]);var c=gje(e),u=vje(i,e,c,a);r(e,u);var l=!!GC&&!!s[aG];l&&n&&(l=!!n[aG]),_je(i,o,e,c,l!==!1)}var AN,NN,Ap,LN,ON,oG,dx,hje,sG,jC,v0e,f0e,uG,PN,m0e,nG,kN,aG,lG,GC,h0e,g0e,cG,lo=T(()=>{lt();NN="constructor",Ap="prototype",LN="function",ON="_dynInstFuncs",oG="_isDynProxy",dx="_dynClass",hje="_dynCls$",sG="_dynInstChk",jC=sG,v0e="_dfOpts",f0e="_unknown_",uG="__proto__",PN="_dyn"+uG,m0e="__dynProto$Gbl",nG="_dynInstProto",kN="useBaseInst",aG="setInstFuncs",lG=Object,GC=lG.getPrototypeOf,h0e=lG.getOwnPropertyNames,g0e=ms(),cG=g0e[m0e]||(g0e[m0e]={o:(AN={},AN[aG]=!0,AN[kN]=!0,AN),n:1e3});Gt[v0e]=cG.o});var mG,y0e=T(()=>{"use strict";mG=100});var Ai,hG,UN=T(()=>{lt();Ai=Tj,hG=Ij});var ku,Eje,b0e=T(()=>{UN();ku=Ai({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Eje=Ai({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var ya,Hm,tt,iv,ov,px,Pp,Du,Lc,Vr,jm,Wt,Ll,BN,sv,kp,Ol,ba,Gm,gG,gs,Vm,Ji,qN,fx,mx,hx,zm,vG,_a,VC,av,HN,Ml,Wa,gx,Fl,Nu,xa,$m,cv,Ya,Wm,jN,zC,Oc,GN,Lu,yG,Ea,$C,uv,bG,_G,xG,WC,Ym,lv,Ou,VN,vx,EG,zN,dv,SG,yx,bx,Km,Kr=T(()=>{ya="toLowerCase",Hm="blkVal",tt="length",iv="rdOnly",ov="notify",px="warnToConsole",Pp="throwInternal",Du="setDf",Lc="watch",Vr="logger",jm="apply",Wt="push",Ll="splice",BN="hdlr",sv="cancel",kp="initialize",Ol="identifier",ba="isInitialized",Gm="getPlugin",gG="pollInternalLogs",gs="name",Vm="time",Ji="processNext",qN="getProcessTelContext",fx="getNotifyMgr",mx="addNotificationListener",hx="removeNotificationListener",zm="enabled",vG="stopPollingInternalLogs",_a="unload",VC="onComplete",av="version",HN="loggingLevelConsole",Ml="createNew",Wa="teardown",gx="messageId",Fl="message",Nu="isAsync",xa="diagLog",$m="_doTeardown",cv="update",Ya="getNext",Wm="setNextPlugin",jN="protocol",zC="userAgent",Oc="split",GN="nodeType",Lu="replace",yG="logInternalMessage",Ea="type",$C="handler",uv="status",bG="itemsReceived",_G="getResponseHeader",xG="getAllResponseHeaders",WC="isChildEvt",Ym="data",lv="getCtx",Ou="setCtx",VN="complete",vx="urlString",EG="sendPOST",zN="headers",dv="timeout",SG="setRequestHeader",yx="traceId",bx="spanId",Km="traceFlags"});function _0e(t,e){TG||(TG=Gj("AggregationError",function(n,i){i[tt]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw he(e,function(n,i){r+=`
`.concat(i," > ").concat(Fe(n))}),new TG(r,e||[])}var TG,x0e=T(()=>{lt();Kr()});function Qm(t,e){return $N(t,function(r){return e?e({value:r,rejected:!1}):r},function(r){return e?e({rejected:!0,reason:r}):r})}function $N(t,e,r,n){var i=t;return Dm(t)?(e||r)&&(i=t.then(e,r)):e&&(i=e(t)),n&&E0e(i,n),i}function E0e(t,e){var r=t;return e&&(Dm(t)?t.finally?r=t.finally(e):r=t.then(function(n){return e(),n},function(n){throw e(),n}):e()),r}var CG=T(()=>{lt()});function S0e(t,e,r,n){IG=IG||{toString:function(){return"[[PromiseState]]"}},wG=wG||{toString:function(){return"[[PromiseResult]]"}},RG=RG||{toString:function(){return"[[PromiseIsHandled]]"}},ii(t,IG,{get:e}),ii(t,wG,{get:r}),ii(t,RG,{get:n})}var IG,wG,RG,AG,T0e=T(()=>{lt();AG=!1});var WN,PG=T(()=>{WN=["pending","resolving","resolved","rejected"]});function I0e(t,e,r,n){var i=jn();!YN&&(YN=sx(function(){var c;return i&&i.createEvent&&(c=i.createEvent("Event")),!!c&&c.initEvent},null));var o=YN.v?i.createEvent("Event"):n?new Event(e):{};if(r&&r(o),YN.v&&o.initEvent(e,!1,!0),o&&t[C0e])t[C0e](o);else{var s=t["on"+e];if(s)s(o);else{var a=Pr("console");a&&(a.error||a.log)(e,Fe(o))}}}var C0e,YN,w0e=T(()=>{lt();C0e="dispatchEvent"});var _x,kG=T(()=>{_x="Promise"});function R0e(t){return at(t)?t.toString():Fe(t)}function P0e(t,e,r){var n=Bm(arguments,3),i=0,o=!1,s,a=[],c=Tje++,u=YC.length>0?YC[YC.length-1]:void 0,l=!1,d=null,p;!DG&&(DG=Ip(_x+"RejectionEvent"));var f=function(x,R){try{YC.push(c),l=!0,d&&d.cancel(),d=null;var L=t(function(O,z){a.push(function(){try{var N=i===2?x:R,ce=_t(N)?s:at(N)?N(s):N;Dm(ce)?ce.then(O,z):N?O(ce):i===3?z(ce):O(ce)}catch(J){z(J)}}),o&&v()},n);return L}finally{YC.pop()}},m=function(x){return f(void 0,x)},h=function(x){var R=x,L=x;return at(x)&&(R=function(O){return x&&x(),O},L=function(O){throw x&&x(),O}),f(R,L)},g=function(){return WN[i]},v=function(){if(a.length>0){var x=a.slice();a=[],l=!0,e(x),d&&d.cancel(),d=null}},b=function(x,R){return function(L){if(i===R){if(x===2&&Dm(L)){i=1,L.then(b(2,1),b(3,1));return}i=x,o=!0,s=L,v(),!l&&x===3&&!d&&(d=ha(y,Cje))}}},y=function(){if(!l)if(Oj())process.emit(A0e,s,p);else{var x=Gn()||ms();I0e(x,Sje,function(R){return Sr(R,"promise",{g:function(){return p}}),R.reason=s,R},!!DG.v)}};p={then:f,catch:m,finally:h},ii(p,"state",{get:g}),AG&&S0e(p,g,function(){return LC(s)},function(){return l}),Fj()&&(p[ev(11)]="IPromise");var E=function(){return"IPromise"+(AG?"["+c+(_t(u)?"":":"+u)+"]":"")+" "+g()+(o?" - "+R0e(s):"")};return p.toString=E,function(){at(r)||wn(_x+": executor is not a function - "+R0e(r));var R=b(3,0);try{r.call(p,b(2,0),R)}catch(L){R(L)}}(),p}function xx(t){return function(e){var r=Bm(arguments,1);return t(function(n,i){try{var o=[],s=1;he(e,function(a,c){a&&(s++,$N(a,function(u){o[c]=u,--s===0&&n(o)},i))}),s--,s===0&&n(o)}catch(a){i(a)}},r)}}function Ex(t){return function(e){var r=Bm(arguments,1);return Dm(e)?e:t(function(n){n(e)},r)}}function Sx(t){return function(e){var r=Bm(arguments,1);return t(function(n,i){i(e)},r)}}var A0e,Sje,YC,Tje,Cje,DG,KN=T(()=>{lt();CG();T0e();PG();w0e();kG();A0e="unhandledRejection",Sje=A0e.toLowerCase(),YC=[],Tje=0,Cje=10});function k0e(t){var e=ps(t)?t:0;return function(r){ha(function(){Ije(r)},e)}}var Ije,D0e=T(()=>{lt();Ije=function(t){he(t,function(e){try{e()}catch{}})}});function Tx(t,e){return P0e(Tx,k0e(e),t,e)}var rkt,nkt,ikt,N0e=T(()=>{KN();D0e();rkt=xx(Tx),nkt=Ex(Tx),ikt=Sx(Tx)});function KC(t,e){!NG&&(NG=Ip(_x));var r=NG.v;if(!r)return Tx(t);at(t)||wn(_x+": executor is not a function - "+Fe(t));var n=0;function i(){return WN[n]}var o=new r(function(s,a){function c(l){n=2,s(l)}function u(l){n=3,a(l)}t(c,u)});return ii(o,"state",{get:i}),o}var NG,dkt,pkt,fkt,L0e=T(()=>{N0e();KN();PG();lt();kG();dkt=xx(KC),pkt=Ex(KC),fkt=Sx(KC)});function Bs(t,e){return!LG&&(LG=Pu(function(){return KC})),LG.v.call(this,t,e)}var LG,OG,wje,Rje,O0e=T(()=>{lt();KN();L0e();OG=xx(Bs),wje=Ex(Bs),Rje=Sx(Bs)});var Cx=T(()=>{CG();O0e()});var Ka,xt,Xm,zn,QN,QC,Dp,pv,Sa,fv,Ix,Jm,wx,Ul,XN,JN,ZN,Rx,e4,t4,M0e,Pi=T(()=>{Ka=void 0,xt="",Xm="channels",zn="core",QN="createPerfMgr",QC="disabled",Dp="extensionConfig",pv="extensions",Sa="processTelemetry",fv="priority",Ix="eventsSent",Jm="eventsDiscarded",wx="eventsSendRequest",Ul="perfEvent",XN="offlineEventsStored",JN="offlineBatchSent",ZN="offlineBatchDrop",Rx="getPerfMgr",e4="domain",t4="path",M0e="Not dynamic - "});function Aje(t,e){return function(){var r=arguments,n=FG(e);if(n){var i=n.listener;i&&i[t]&&i[t][jm](i,r)}}}function Pje(){var t=Pr("Microsoft");return t&&(n4=t.ApplicationInsights),n4}function FG(t){var e=n4;return!e&&t.disableDbgExt!==!0&&(e=n4||Pje()),e?e.ChromeDbgExt:null}function F0e(t){if(!r4){r4={};for(var e=0;e<MG[tt];e++)r4[MG[e]]=Aje(MG[e],t)}return r4}var MG,n4,r4,UG=T(()=>{lt();Kr();Pi();MG=[Ix,Jm,wx,Ul],n4=null});function H0e(t,e){var r=!1;if(t){try{if(r=e in t,!r){var n=t[Cu];n&&(r=e in n)}}catch{}if(!r)try{var i=new t;r=!_t(i[e])}catch{}}return r}function VG(t){q0e=t}function mv(t){if(t&&q0e){var e=Pr("__mockLocation");if(e)return e}return typeof location===Ep&&location?location:Pr(Dje)}function XC(){return typeof console!==kl?console:Pr(Nje)}function Bl(){return!!(typeof JSON===Ep&&JSON||Pr(U0e)!==null)}function qo(){return Bl()?JSON||Pr(U0e):null}function JC(){return Pr(Lje)}function ZC(){return Pr(Oje)}function Zm(){var t=Ri();return t&&t.product?t.product===Mje:!1}function eh(){var t=Ri();if(t&&(t[zC]!==qG||BG===null)){qG=t[zC];var e=(qG||xt)[ya]();BG=hi(e,jG)||hi(e,GG)}return BG}function eI(t){if(t===void 0&&(t=null),!t){var e=Ri()||{};t=e?(e.userAgent||xt)[ya]():xt}var r=(t||xt)[ya]();if(hi(r,jG)){var n=jn()||{};return Math.max(parseInt(r[Oc](jG)[1]),n[kje]||0)}else if(hi(r,GG)){var i=parseInt(r[Oc](GG)[1]);if(i)return i+4}return null}function Ta(t){return(HG===null||t===!1)&&(HG=ax()&&!!Ri().sendBeacon),HG}function Np(t){var e=!1;try{e=!!Pr("fetch");var r=Pr("Request");e&&t&&r&&(e=H0e(r,"keepalive"))}catch{}return e}function tI(){return Ax===null&&(Ax=typeof XDomainRequest!==kl,Ax&&Px()&&(Ax=Ax&&!H0e(Pr(B0e),"withCredentials"))),Ax}function Px(){var t=!1;try{var e=Pr(B0e);t=!!e}catch{}return t}function j0e(t,e){if(t)for(var r=0;r<t[tt];r++){var n=t[r];if(n[gs]&&n[gs]===e)return n}return{}}function zG(t){var e=jn();return e&&t?j0e(e.querySelectorAll("meta"),t).content:null}function $G(t){var e,r=Rp();if(r){var n=r.getEntriesByType("navigation")||[];e=j0e((n[tt]>0?n[0]:{}).serverTiming,t).description}return e}var kje,Dje,Nje,U0e,Lje,Oje,Mje,jG,GG,B0e,BG,qG,q0e,Ax,HG,th=T(()=>{"use strict";va();lt();Kr();ql();Pi();kje="documentMode",Dje="location",Nje="console",U0e="JSON",Lje="crypto",Oje="msCrypto",Mje="ReactNative",jG="msie",GG="trident/",B0e="XMLHttpRequest",BG=null,qG=null,q0e=!1,Ax=null,HG=null});function G0e(t){return t?'"'+t[Lu](/\"/g,xt)+'"':xt}function WG(t,e){var r=XC();if(r){var n="log";r[t]&&(n=t),at(r[n])&&r[n](e)}}function Mu(t,e){return(t||{})[Vr]||new rh(e)}function YG(t){return t||new rh}function Pe(t,e,r,n,i,o){o===void 0&&(o=!1),YG(t)[Pp](e,r,n,i,o)}function qs(t,e){YG(t)[px](e)}function KG(t,e,r){YG(t)[yG](e,r)}var kx,V0e,Fje,Uje,Bje,qje,Hje,hv,rh,Fu=T(()=>{"use strict";lo();lt();nh();Kr();UG();th();Pi();V0e="warnToConsole",Fje="AI (Internal): ",Uje="AI: ",Bje="AITR_",qje={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Hje=(kx={},kx[0]=null,kx[1]="errorToConsole",kx[2]=V0e,kx[3]="debugToConsole",kx);hv=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[gx]=e,o[Fl]=(n?Uje:Fje)+e;var s=xt;Bl()&&(s=qo().stringify(i));var a=(r?" message:"+G0e(r):xt)+(i?" props:"+G0e(s):xt);o[Fl]+=a}return t.dataType="MessageData",t}();rh=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,c;Gt(t,this,function(u){c=d(e||{}),u.consoleLoggingLevel=function(){return i},u[Pp]=function(m,h,g,v,b){b===void 0&&(b=!1);var y=new hv(h,g,b,v);if(a)throw Fe(y);var E=Hje[m]||V0e;if(_t(y[Fl]))f("throw"+(m===1?"Critical":"Warning"),y);else{if(b){var x=+y[gx];!n[x]&&i>=m&&(u[E](y[Fl]),n[x]=!0)}else i>=m&&u[E](y[Fl]);l(m,y)}},u.debugToConsole=function(m){WG("debug",m),f("warning",m)},u[px]=function(m){WG("warn",m),f("warning",m)},u.errorToConsole=function(m){WG("error",m),f("error",m)},u.resetInternalMessageCount=function(){r=0,n={}},u[yG]=l,u[_a]=function(m){c&&c.rm(),c=null};function l(m,h){if(!p()){var g=!0,v=Bje+h[gx];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(u.queue[Wt](h),r++,f(m===1?"error":"warn",h)),r===s)){var b="Internal events throttle limit per PageView reached for this app.",y=new hv(23,b,!1);u.queue[Wt](y),m===1?u.errorToConsole(b):u[px](b)}}}function d(m){return ki(Rn(m,qje,u).cfg,function(h){var g=h.cfg;i=g[HN],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function p(){return r>=s}function f(m,h){var g=FG(e||{});g&&g[xa]&&g[xa](m,h)}})}return t.__ieDyn=1,t}()});function Hl(t){return!_e(t)}function gv(t){var e=t;return e&&Ct(e)&&(e=e[Lu](Gje,function(r,n){return n.toUpperCase()}),e=e[Lu](Vje,"_"),e=e[Lu](zje,function(r,n){return"_"+n})),e}function hi(t,e){return t&&e?Us(t,e)!==-1:!1}function Qa(t){return t&&t.toISOString()||""}function an(t){return km(t)?t[gs]:xt}function Mc(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function rI(t,e,r){var n;return t?(n=t[e],!n&&_e(n)&&(n=_t(r)?{}:r,t[e]=n)):n=_t(r)?{}:r,n}function $0e(t,e){var r=null,n=null;return at(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][jm](n,i)}}function QG(t,e,r){if(t&&e&&sn(t)&&sn(e)){var n=function(o){if(Ct(o)){var s=e[o];at(s)?(!r||r(o,!0,e,t))&&(t[o]=$0e(e,o)):(!r||r(o,!1,e,t))&&(ma(t,o)&&delete t[o],Sr(t,o,{g:function(){return e[o]},s:function(a){e[o]=a}}))}};for(var i in e)n(i)}return t}function Lp(t,e,r,n,i){t&&e&&r&&(i!==!1||_t(t[e]))&&(t[e]=$0e(r,n))}function Xa(t,e,r,n){return t&&e&&sn(t)&&We(r)&&he(r,function(i){Ct(i)&&Lp(t,i,e,i,n)}),t}function XG(t){return function(){function e(){var r=this;t&&He(t,function(n,i){r[n]=i})}return e}()}function Fc(t){return t&&Q0&&(t=J_(Q0({},t))),t}function i4(t,e,r,n,i,o){var s=arguments,a=s[0]||{},c=s[tt],u=!1,l=1;for(c>0&&Iu(a)&&(u=a,a=s[l]||{},l++),sn(a)||(a={});l<c;l++){var d=s[l],p=We(d),f=sn(d);for(var m in d){var h=p&&m in d||f&&ma(d,m);if(h){var g=d[m],v=void 0;if(u&&g&&((v=We(g))||Xi(g))){var b=a[m];v?We(b)||(b=[]):Xi(b)||(b={}),g=i4(u,b,g)}g!==void 0&&(a[m]=g)}}}return a}function Uu(t){try{return t.responseText}catch{}return null}function vv(t,e){return t?"XDomainRequest,Response:"+Uu(t)||"":e}function Op(t,e){return t?"XMLHttpRequest,Status:"+t[uv]+",Response:"+Uu(t)||t.response||"":e}function Mp(t,e){return e&&(ps(e)?t=[e].concat(t):We(e)&&(t=e.concat(t))),t}function yv(t,e){try{if(t&&t!==""){var r=qo().parse(t);if(r&&r[bG]&&r[bG]>=r.itemsAccepted&&r.itemsReceived-r.itemsAccepted===r.errors[tt])return r}}catch(n){Pe(e,1,43,"Cannot parse the response. "+an(n),{response:t})}return null}function JG(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,$je,n),r&&s(a,z0e,r),a.open(t,e,!i),r&&s(a,z0e,r),!i&&o&&s(a,Wje,o),a}function o4(t){var e={};if(Ct(t)){var r=yr(t)[Oc](/[\r\n]+/);he(r,function(n){if(n){var i=n.indexOf(": ");if(i!==-1){var o=yr(n.substring(0,i))[ya](),s=yr(n.substring(i+1));e[o]=s}else e[yr(n)]=1}})}return e}function Dx(t,e,r){if(!t[r]&&e&&e[_G]){var n=e[_G](r);n&&(t[r]=yr(n))}return t}function Fp(t,e){var r={};return t[xG]?r=o4(t[xG]()):e&&(r=Dx(r,t,Qje),r=Dx(r,t,Yje),r=Dx(r,t,Kje)),r}var jje,Gje,Vje,zje,Ykt,$je,z0e,Wje,Yje,Kje,Qje,ql=T(()=>{va();lt();Kr();Fu();th();Pi();jje="getPrototypeOf",Gje=/-([a-z])/g,Vje=/([^\w\d_$])/g,zje=/^(\d+[\w\d_$])/,Ykt=Object[jje];$je="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",z0e="withCredentials",Wje="timeout";Yje="kill-duration",Kje="kill-duration-seconds",Qje="time-delta-millis"});function Xje(t){t<0&&(t>>>=0),nI=Y0e+t&ih,iI=K0e-t&ih,Q0e=!0}function Jje(){try{var t=Vn()&2147483647;Xje((Math.random()*W0e^t)+t)}catch{}}function oI(t){return t>0?Math.floor(Up()/ih*(t+1))>>>0:0}function Up(t){var e=0,r=JC()||ZC();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&ih),e===0&&eh()&&(Q0e||Jje(),e=X0e()&ih),e===0&&(e=Math.floor(W0e*Math.random()|0)),t||(e>>>=0),e}function X0e(t){iI=36969*(iI&65535)+(iI>>16)&ih,nI=18e3*(nI&65535)+(nI>>16)&ih;var e=(iI<<16)+(nI&65535)>>>0&ih|0;return t||(e>>>=0),e}function sI(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=Up()>>>0,n=0,i=xt;i[tt]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(Up()<<2&4294967295|r&3)>>>0,n=0);return i}var W0e,ih,Y0e,K0e,Q0e,nI,iI,s4=T(()=>{lt();Kr();th();Pi();W0e=4294967296,ih=4294967295,Y0e=123456789,K0e=987654321,Q0e=!1,nI=Y0e,iI=K0e});function Z0e(t){return t[GN]===1||t[GN]===9||!+t[GN]}function tGe(t,e){var r=e[t.id];if(!r){r={};try{Z0e(e)&&Sr(e,t.id,{e:!1,v:r})}catch{}}return r}function Ho(t,e){return e===void 0&&(e=!1),gv(t+eGe+++(e?"."+J0e:xt)+Zje)}function a4(t){var e={id:Ho("_aiData-"+(t||xt)+"."+J0e),accept:function(r){return Z0e(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[gv(n)]:(o&&(s=tGe(e,r),s[gv(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var J0e,Zje,eGe,Nx=T(()=>{lt();Kr();ql();Pi();s4();J0e="3.0.5",Zje="."+sI(6),eGe=0});function c4(t){return t&&sn(t)&&(t.isVal||t.fb||ma(t,"v")||ma(t,"mrg")||ma(t,"ref")||t.set)}function eve(t,e,r){var n,i=r.dfVal||oN;if(e&&r.fb){var o=r.fb;We(o)||(o=[o]);for(var s=0;s<o[tt];s++){var a=o[s],c=e[a];if(i(c)?n=c:t&&(c=t.cfg[a],i(c)&&(n=c),t.set(t.cfg,_n(a),c)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function ZG(t,e,r){var n=r;if(r&&c4(r)&&(n=eve(t,e,r)),n){c4(n)&&(n=ZG(t,e,n));var i;We(n)?(i=[],i[tt]=n[tt]):Xi(n)&&(i={}),i&&(He(n,function(o,s){s&&c4(s)&&(s=ZG(t,e,s)),i[o]=s}),n=i)}return n}function aI(t,e,r,n){var i,o,s,a=n,c,u,l,d;c4(a)?(i=a.isVal,o=a.set,l=a[iv],d=a[Hm],c=a.mrg,u=a.ref,!u&&_t(u)&&(u=!!c),s=eve(t,e,a)):s=n,d&&t[Hm](e,r);var p,f=!0,m=e[r];(m||!_e(m))&&(p=m,f=!1,i&&p!==s&&!i(p)&&(p=s,f=!0),o&&(p=o(p,s,e),f=p===s)),f?s?p=ZG(t,e,s):p=s:(Xi(p)||We(s))&&c&&s&&(Xi(s)||We(s))&&He(s,function(h,g){aI(t,p,h,g)}),t.set(e,r,p),u&&t.ref(e,r),l&&t[iv](e,r)}var eV=T(()=>{lt();Kr()});function tV(t){if(t){var e;if(We(t)?(e=[],e[tt]=t[tt]):Xi(t)&&(e={}),e)return He(t,function(r,n){e[r]=tV(n)}),e}return t}function cI(t){if(t){var e=t[jl]||t;if(e.cfg&&(e.cfg===t||e.cfg[jl]===e))return e}return null}function uI(t){if(t&&(Xi(t)||We(t)))try{t[tve]=!0}catch{}return t}function rV(t){if(t)try{t[rve]=!0}catch{}return t}function u4(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[rve],!n&&!r[tve]&&(n=Xi(r)||We(r))),n}function l4(t){wn("InvalidAccess:"+t)}var jl,tve,rve,d4=T(()=>{lt();Kr();jl=qC("[[ai_dynCfg_1]]"),tve=qC("[[ai_blkDynCfg_1]]"),rve=qC("[[ai_frcDynCfg_1]]")});function nGe(t,e,r){We(e)&&he(rGe,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[jm](this,o);return lI(t,e,r,"Patching"),a}})}function p4(t,e){var r=K0(t,e);return r&&r.get}function iGe(t,e,r,n){var i={n:r,h:[],trk:function(u){u&&u.fn&&(lr(i.h,u)===-1&&i.h[Wt](u),t.trk(u,i))},clr:function(u){var l=lr(i.h,u);l!==-1&&i.h[Ll](l,1)}},o=!0,s=!1;function a(){o&&(s=s||u4(a,t,n),n&&!n[jl]&&s&&(n=lI(t,n,r,"Converting")),o=!1);var u=t.act;return u&&i.trk(u),n}a[t.prop]={chng:function(){t.add(i)}};function c(u){if(n!==u){a[t.ro]&&!t.upd&&l4("["+r+"] is read-only:"+Fe(e)),o&&(s=s||u4(a,t,n),o=!1);var l=s&&a[t.rf];if(s)if(l){He(n,function(p){n[p]=u?u[p]:Ka});try{He(u,function(p,f){dI(t,n,p,f)}),u=n}catch(p){Lx((t.hdlr||{})[Vr],r,"Assigning",p),s=!1}}else n&&n[jl]&&He(n,function(p){var f=p4(n,p);if(f){var m=f[t.prop];m&&m.chng()}});if(u!==n){var d=u&&u4(a,t,u);!l&&d&&(u=lI(t,u,r,"Converting")),n=u,s=d}t.add(i)}}Sr(e,i.n,{g:a,s:c})}function dI(t,e,r,n){if(e){var i=p4(e,r),o=i&&!!i[t.prop];o?e[r]=n:iGe(t,e,r,n)}return e}function f4(t,e,r,n){if(e){var i=p4(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],c=n&&n[2];if(!o){if(c)try{uI(e)}catch(u){Lx((t.hdlr||{})[Vr],r,"Blocking",u)}try{dI(t,e,r,e[r]),i=p4(e,r)}catch(u){Lx((t.hdlr||{})[Vr],r,"State",u)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),c&&(i[t.blkVal]=!0)}return e}function lI(t,e,r,n){try{He(e,function(i,o){dI(t,e,i,o)}),e[jl]||(ii(e,jl,{get:function(){return t[BN]}}),nGe(t,e,r))}catch(i){Lx((t.hdlr||{})[Vr],r,n,i)}return e}var rGe,Lx,nve=T(()=>{lt();Pi();Kr();d4();rGe=["push","pop","shift","unshift","splice"],Lx=function(t,e,r,n){t&&t[Pp](3,108,"".concat(r," [").concat(e,"] failed - ")+Fe(n))}});function ive(t){var e,r=tv(pI+"get"+t.uid+fI),n=tv(pI+"ro"+t.uid+fI),i=tv(pI+"rf"+t.uid+fI),o=tv(pI+"blkVal"+t.uid+fI),s=tv(pI+"dtl"+t.uid+fI),a=null,c=null,u;function l(m,h){var g=u.act;try{u.act=m,m&&m[s]&&(he(m[s],function(b){b.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[Du].bind(t),ref:t.ref.bind(t),rdOnly:t[iv].bind(t)})}catch(b){var v=t[Vr];throw v&&v[Pp](1,107,Fe(b)),b}finally{u.act=g||null}}function d(){if(a){var m=a;a=null,c&&c[sv](),c=null;var h=[];if(he(m,function(g){if(g&&(g[s]&&(he(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{l(g,g.fn)}catch(v){h[Wt](v)}}),a)try{d()}catch(g){h[Wt](g)}h[tt]>0&&_0e("Watcher error(s): ",h)}}function p(m){if(m&&m.h[tt]>0){a||(a=[]),c||(c=ha(function(){c=null,d()},0));for(var h=0;h<m.h[tt];h++){var g=m.h[h];g&&lr(a,g)===-1&&a[Wt](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];lr(g,h)===-1&&g[Wt](h)}}return u=(e={prop:r,ro:n,rf:i},e[Hm]=o,e[BN]=t,e.add=p,e[ov]=d,e.use=l,e.trk=f,e),u}var pI,fI,ove=T(()=>{lt();x0e();Kr();pI="[[ai_",fI="]]"});function oGe(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function sGe(t,e,r){var n,i=cI(e);if(i)return i;var o=Ho("dyncfg",!0),s=e&&r!==!1?e:tV(e),a;function c(){a[ov]()}function u(v,b,y){try{v=dI(a,v,b,y)}catch(E){Lx(t,b,"Setting value",E)}return v[b]}function l(v){return oGe(a,v)}function d(v,b){a.use(null,function(y){var E=a.upd;try{_t(b)||(a.upd=b),v(y)}finally{a.upd=E}})}function p(v,b){var y;return f4(a,v,b,(y={},y[0]=!0,y))[b]}function f(v,b){var y;return f4(a,v,b,(y={},y[1]=!0,y))[b]}function m(v,b){var y;return f4(a,v,b,(y={},y[2]=!0,y))[b]}function h(v,b){return b&&He(b,function(y,E){aI(g,v,y,E)}),v}var g=(n={uid:null,cfg:s},n[Vr]=t,n[ov]=c,n.set=u,n[Du]=h,n[Lc]=l,n.ref=p,n[iv]=f,n[Hm]=m,n._block=d,n);return Sr(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=ive(g),lI(a,s,"config","Creating"),g}function aGe(t,e){t?(t[px](e),t[Pp](2,108,e)):l4(e)}function Rn(t,e,r,n){var i=sGe(r,t||{},n);return e&&i[Du](i.cfg,e),i}function ki(t,e,r){var n=t[jl]||t;return n.cfg&&(n.cfg===t||n.cfg[jl]===n)?n[Lc](e):(aGe(r,M0e+Fe(t)),Rn(t,null,r)[Lc](e))}var nh=T(()=>{lt();Nx();Pi();Kr();eV();nve();ove();d4()});function Bp(t,e){if(t&&t[_a])return t[_a](e)}function m4(t,e,r){var n;return r||(n=Bs(function(i){r=i})),t&&ux(t)>0?Qm(Bp(t[0],e),function(){m4(Bm(t,1),e,r)}):r(),n}var nV=T(()=>{Cx();lt();Kr()});var sve,iV,oV=T(()=>{sve=500,iV="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function cGe(t,e,r){return!t&&_e(t)?e:Iu(t)?t:_n(t)[ya]()==="true"}function sV(t){return{mrg:!0,v:t}}function Ox(t,e,r){return{fb:r,isVal:t,v:e}}function Uc(t,e){return{fb:e,set:cGe,v:!!t}}var aV=T(()=>{lt();Kr()});function fV(){!Gl&&(Gl=Pu(function(){return jn()}))}function lGe(t,e){var r=qp[oh]||v4[oh];return r||(r=qp[oh]=qp(t,e),v4[oh]=r),r}function g4(t){return t?t.isEnabled():!0}function gve(t,e){return e&&t&&We(t.ignoreCookies)?lr(t.ignoreCookies,e)!==-1:!1}function dGe(t,e){return e&&t&&We(t.blockedCookies)&&lr(t.blockedCookies,e)!==-1?!0:gve(t,e)}function pve(t,e){var r=e[zm];if(_e(r)){var n=void 0;_t(t[uve])||(n=!t[uve]),_t(t[dV])||(n=!t[dV]),r=n}return r}function mV(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e.cookieCfg;n&&n[oh]?r=n[oh]:r=qp(e)}return r||(r=lGe(e,(t||{})[Vr])),r}function qp(t,e){var r,n,i,o,s,a,c,u,l;t=Rn(t||v4,null,e).cfg,s=ki(t,function(p){p[Du](p.cfg,uGe),n=p.ref(p.cfg,"cookieCfg"),i=n[t4]||"/",o=n[e4],a=pve(t,n)!==!1,c=n.getCookie||pGe,u=n.setCookie||hve,l=n.delCookie||hve},e);var d=(r={isEnabled:function(){var p=pve(t,n)!==!1&&a&&Mx(e),f=v4[oh];return p&&f&&d!==f&&(p=g4(f)),p},setEnabled:function(p){a=p!==!1,n[zm]=p},set:function(p,f,m,h,g){var v=!1;if(g4(d)&&!dGe(n,p)){var b={},y=yr(f||xt),E=Us(y,";");if(E!==-1&&(y=yr(Mm(f,E)),b=vve(ni(f,E+1))),Mc(b,e4,h||o,Rc,_t),!_e(m)){var x=eh();if(_t(b[uV])){var R=Vn(),L=R+m*1e3;if(L>0){var O=new Date;O.setTime(L),Mc(b,uV,fve(O,x?ave:cve)||fve(O,x?ave:cve)||xt,Rc)}}x||Mc(b,"max-age",xt+m,null,_t)}var z=mv();z&&z[jN]==="https:"&&(Mc(b,"secure",null,null,_t),lV===null&&(lV=!y4((Ri()||{})[zC])),lV&&Mc(b,"SameSite","None",null,_t)),Mc(b,t4,g||i,null,_t),u(p,mve(y,b)),v=!0}return v},get:function(p){var f=xt;return g4(d)&&!gve(n,p)&&(f=c(p)),f},del:function(p,f){var m=!1;return g4(d)&&(m=d.purge(p,f)),m},purge:function(p,f){var m,h=!1;if(Mx(e)){var g=(m={},m[t4]=f||"/",m[uV]="Thu, 01 Jan 1970 00:00:01 GMT",m);eh()||(g["max-age"]="0"),l(p,mve(xt,g)),h=!0}return h}},r[_a]=function(p){s&&s.rm(),s=null},r);return d[oh]=d,d}function Mx(t){if(h4===null){h4=!1,!Gl&&fV();try{var e=Gl.v||{};h4=e[pV]!==void 0}catch(r){Pe(t,2,68,"Cannot access document.cookie - "+an(r),{exception:Fe(r)})}}return h4}function vve(t){var e={};if(t&&t[tt]){var r=yr(t)[Oc](";");he(r,function(n){if(n=yr(n||xt),n){var i=Us(n,"=");i===-1?e[n]=null:e[yr(Mm(n,i))]=yr(ni(n,i+1))}})}return e}function fve(t,e){return at(t[e])?t[e]():null}function mve(t,e){var r=t||xt;return He(e,function(n,i){r+="; "+n+(_e(i)?xt:"="+i)}),r}function pGe(t){var e=xt;if(!Gl&&fV(),Gl.v){var r=Gl.v[pV]||xt;lve!==r&&(dve=vve(r),lve=r),e=yr(dve[t]||xt)}return e}function hve(t,e){!Gl&&fV(),Gl.v&&(Gl.v[pV]=t+"="+e)}function y4(t){return Ct(t)?!!(hi(t,"CPU iPhone OS 12")||hi(t,"iPad; CPU OS 12")||hi(t,"Macintosh; Intel Mac OS X 10_14")&&hi(t,"Version/")&&hi(t,"Safari")||hi(t,"Macintosh; Intel Mac OS X 10_14")&&qm(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||hi(t,"Chrome/5")||hi(t,"Chrome/6")||hi(t,"UnrealEngine")&&!hi(t,"Chrome")||hi(t,"UCBrowser/12")||hi(t,"UCBrowser/11")):!1}var cV,bv,ave,cve,pV,uV,uve,dV,oh,h4,lV,lve,Gl,dve,v4,uGe,hV=T(()=>{lt();aV();nh();Kr();Fu();th();ql();Pi();ave="toGMTString",cve="toUTCString",pV="cookie",uV="expires",uve="isCookieUseDisabled",dV="disableCookiesUsage",oh="_ckMgr",h4=null,lV=null,lve=null,dve={},v4={},uGe=(cV={cookieCfg:sV((bv={},bv[e4]={fb:"cookieDomain",dfVal:Hl},bv.path={fb:"cookiePath",dfVal:Hl},bv.enabled=Ka,bv.ignoreCookies=Ka,bv.blockedCookies=Ka,bv)),cookieDomain:Ka,cookiePath:Ka},cV[dV]=Ka,cV)});function sh(t,e,r,n){he(t,function(i){if(i&&i[e])if(r)ha(function(){return n(i)},0);else try{n(i)}catch{}})}var fGe,mI,gV=T(()=>{lo();Cx();lt();nh();Kr();Pi();fGe={perfEvtsSendAll:!1};mI=function(){function t(e){this.listeners=[];var r,n,i=[],o=Rn(e,fGe);n=o[Lc](function(s){r=!!s.cfg.perfEvtsSendAll}),Gt(t,this,function(s){Sr(s,"listeners",{g:function(){return i}}),s[mx]=function(a){i[Wt](a)},s[hx]=function(a){for(var c=lr(i,a);c>-1;)i[Ll](c,1),c=lr(i,a)},s[Ix]=function(a){sh(i,Ix,!0,function(c){c[Ix](a)})},s[Jm]=function(a,c){sh(i,Jm,!0,function(u){u[Jm](a,c)})},s[wx]=function(a,c){sh(i,wx,c,function(u){u[wx](a,c)})},s[Ul]=function(a){a&&(r||!a[WC]())&&sh(i,Ul,!1,function(c){a[Nu]?ha(function(){return c[Ul](a)},0):c[Ul](a)})},s[XN]=function(a){a&&a[tt]&&sh(i,XN,!0,function(c){c[XN](a)})},s[JN]=function(a){a&&a[Ym]&&sh(i,JN,!0,function(c){c[JN](a)})},s[ZN]=function(a,c){if(a>0){var u=c||0;sh(i,ZN,!0,function(l){l[ZN](a,u)})}},s[_a]=function(a){var c=function(){n&&n.rm(),n=null,i=[]},u;if(sh(i,"unload",!1,function(l){var d=l[_a](a);d&&(u||(u=[]),u[Wt](d))}),u)return Bs(function(l){return Qm(OG(u),function(){c(),l()})});c()}})}return t.__ieDyn=1,t}()});function si(t,e,r,n,i){if(t){var o=t;if(o[Rx]&&(o=o[Rx]()),o){var s=void 0,a=o[lv](vV);try{if(s=o.create(e(),n,i),s){if(a&&s[Ou]&&(s[Ou](_v[yV],a),a[lv]&&a[Ou])){var c=a[lv](_v[hI]);c||(c=[],a[Ou](_v[hI],c)),c[Wt](s)}return o[Ou](vV,s),r(s)}}catch(u){s&&s[Ou]&&s[Ou]("exception",u)}finally{s&&o.fire(s),o[Ou](vV,a)}}}return r()}function bV(){return mGe}var Fx,yV,hI,mGe,_v,gI,vV,b4=T(()=>{lo();lt();Kr();Pi();Fx="ctx",yV="ParentContextKey",hI="ChildrenContextKey",mGe=null,_v=function(){function t(e,r,n){var i=this;if(i.start=Vn(),i[gs]=e,i[Nu]=n,i[WC]=function(){return!1},at(r)){var o;Sr(i,"payload",{g:function(){return!o&&at(r)&&(o=r(),r=null),o}})}i[lv]=function(s){return s?s===t[yV]||s===t[hI]?i[s]:(i[Fx]||{})[s]:null},i[Ou]=function(s,a){if(s)if(s===t[yV])i[s]||(i[WC]=function(){return!0}),i[s]=a;else if(s===t[hI])i[s]=a;else{var c=i[Fx]=i[Fx]||{};c[s]=a}},i[VN]=function(){var s=0,a=i[lv](t[hI]);if(We(a))for(var c=0;c<a[tt];c++){var u=a[c];u&&(s+=u[Vm])}i[Vm]=Vn()-i.start,i.exTime=i[Vm]-s,i[VN]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),gI=function(){function t(e){this.ctx={},Gt(t,this,function(r){r.create=function(n,i,o){return new _v(n,i,o)},r.fire=function(n){n&&(n[VN](),e&&at(e[Ul])&&e[Ul](n))},r[Ou]=function(n,i){if(n){var o=r[Fx]=r[Fx]||{};o[n]=i}},r[lv]=function(n){return(r[Fx]||{})[n]}})}return t.__ieDyn=1,t}(),vV="CoreUtils.doPerf"});function vI(){var t=xv();return ni(t,0,8)+"-"+ni(t,8,12)+"-"+ni(t,12,16)+"-"+ni(t,16,20)+"-"+ni(t,20)}function xv(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=xt,r,n=0;n<4;n++)r=Up(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(Up()&3)|0];return Ru(e,0,8)+Ru(e,9,4)+"4"+Ru(e,13,3)+i+Ru(e,16,3)+Ru(e,19,12)}var _V=T(()=>{"use strict";lt();Pi();s4()});function Hp(t,e,r){return t&&t[tt]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function bve(t,e,r){return Hp(t,e)?t:r}function _ve(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[tt]<2;)e="0"+e;return e}function yI(t,e,r,n){var i;return i={},i[av]=Hp(n,2,EV)?n:xV,i[yx]=Vl(t)?t:xv(),i[bx]=zl(e)?e:Mm(xv(),16),i.traceFlags=r>=0&&r<=255?r:1,i}function Ev(t,e){var r;if(!t||(We(t)&&(t=t[0]||""),!t||!Ct(t)||t[tt]>8192))return null;if(t.indexOf(",")!==-1){var n=t[Oc](",");t=n[e>0&&n[tt]>e?e:0]}var i=hGe.exec(yr(t));return!i||i[1]===EV||i[2]===_4||i[3]===x4?null:(r={version:(i[1]||xt)[ya](),traceId:(i[2]||xt)[ya](),spanId:(i[3]||xt)[ya]()},r[Km]=parseInt(i[4],16),r)}function Vl(t){return Hp(t,32,_4)}function zl(t){return Hp(t,16,x4)}function Ux(t){return!(!t||!Hp(t[av],2,EV)||!Hp(t[yx],32,_4)||!Hp(t[bx],16,x4)||!Hp(_ve(t[Km]),2))}function bI(t){return Ux(t)?(t[Km]&yve)===yve:!1}function _I(t){if(t){var e=_ve(t[Km]);Hp(e,2)||(e="01");var r=t[av]||xV;return r!=="00"&&r!=="ff"&&(r=xV),"".concat(r.toLowerCase(),"-").concat(bve(t.traceId,32,_4).toLowerCase(),"-").concat(bve(t.spanId,16,x4).toLowerCase(),"-").concat(e.toLowerCase())}return""}function xI(t){var e="traceparent",r=Ev(zG(e),t);return r||(r=Ev($G(e),t)),r}var hGe,xV,EV,_4,x4,yve,SV=T(()=>{lt();Kr();_V();th();Pi();hGe=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,xV="00",EV="ff",_4="00000000000000000000000000000000",x4="0000000000000000",yve=1});function jp(t){return gGe.get(t,"state",{},!0)}function TV(t,e){for(var r=[],n=null,i=t[Ya](),o;i;){var s=i[Gm]();if(s){n&&n[Wm]&&s[Sa]&&n[Wm](s),o=jp(s);var a=!!o[ba];s[ba]&&(a=s[ba]()),a||r[Wt](s),n=s,i=i[Ya]()}}he(r,function(c){var u=t[zn]();c[kp](t.getCfg(),u,e,t[Ya]()),o=jp(c),!c[zn]&&!o[zn]&&(o[zn]=u),o[ba]=!0,delete o[Wa]})}function E4(t){return t.sort(function(e,r){var n=0;if(r){var i=r[Sa];e[Sa]?n=i?e[fv]-r[fv]:1:i&&(n=-1)}else n=e?1:-1;return n})}function xve(t){var e={};return{getName:function(){return e[gs]},setName:function(r){t&&t.setName(r),e[gs]=r},getTraceId:function(){return e[yx]},setTraceId:function(r){t&&t.setTraceId(r),Vl(r)&&(e[yx]=r)},getSpanId:function(){return e[bx]},setSpanId:function(r){t&&t.setSpanId(r),zl(r)&&(e[bx]=r)},getTraceFlags:function(){return e[Km]},setTraceFlags:function(r){t&&t.setTraceFlags(r),e[Km]=r}}}var gGe,CV=T(()=>{"use strict";lt();Kr();Nx();Pi();SV();gGe=a4("plugin")});function yGe(t,e,r){for(;t;){if(t[Gm]()===r)return t;t=t[Ya]()}return ah([r],e.config||{},e)}function IV(t,e,r,n){var i=null,o=[];e||(e=Rn({},null,r[Vr])),n!==null&&(i=n?yGe(t,r,n):t);var s={_next:c,ctx:{core:function(){return r},diagLog:function(){return Mu(r,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:l,getConfig:d,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(f){i=f},iterate:p,onComplete:a}};function a(f,m){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];f&&o[Wt]({func:f,self:_t(m)?s.ctx:m,args:h})}function c(){var f=i;if(i=f?f[Ya]():null,!f){var m=o;m&&m[tt]>0&&(he(m,function(h){try{h.func.call(h.self,h.args)}catch(g){Pe(r[Vr],2,73,"Unexpected Exception during onComplete - "+Fe(g))}}),o=[])}return f}function u(f,m){var h=null,g=e.cfg;if(g&&f){var v=g[Dp];!v&&m&&(v={}),g[Dp]=v,v=e.ref(g,Dp),v&&(h=v[f],!h&&m&&(h={}),v[f]=h,h=e.ref(v,f))}return h}function l(f,m){var h=u(f,!0);return m&&He(m,function(g,v){if(_e(h[g])){var b=e.cfg[g];(b||!_e(b))&&(h[g]=b)}aI(e,h,g,v)}),e[Du](h,m)}function d(f,m,h){h===void 0&&(h=!1);var g,v=u(f,!1),b=e.cfg;return v&&(v[m]||!_e(v[m]))?g=v[m]:(b[m]||!_e(b[m]))&&(g=b[m]),g||!_e(g)?g:h}function p(f){for(var m;m=s._next();){var h=m[Gm]();h&&f(h)}}return s}function Hs(t,e,r,n){var i=Rn(e),o=IV(t,i,r,n),s=o.ctx;function a(u){var l=o._next();return l&&l[Sa](u,s),!l}function c(u,l){return u===void 0&&(u=null),We(u)&&(u=ah(u,i.cfg,r,l)),Hs(u||s[Ya](),i.cfg,r,l)}return s[Ji]=a,s[Ml]=c,s}function Bx(t,e,r){var n=Rn(e.config),i=IV(t,n,e,r),o=i.ctx;function s(c){var u=i._next();return u&&u[_a](o,c),!u}function a(c,u){return c===void 0&&(c=null),We(c)&&(c=ah(c,n.cfg,e,u)),Bx(c||o[Ya](),e,u)}return o[Ji]=s,o[Ml]=a,o}function EI(t,e,r){var n=Rn(e.config),i=IV(t,n,e,r),o=i.ctx;function s(c){return o.iterate(function(u){at(u[cv])&&u[cv](o,c)})}function a(c,u){return c===void 0&&(c=null),We(c)&&(c=ah(c,n.cfg,e,u)),EI(c||o[Ya](),e,u)}return o[Ji]=s,o[Ml]=a,o}function ah(t,e,r,n){var i=null,o=!n;if(We(t)&&t[tt]>0){var s=null;he(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&at(a[Sa])){var c=bGe(a,e,r);i||(i=c),s&&s._setNext(c),s=c}})}return n&&!i?ah([n],e,r):i}function bGe(t,e,r){var n=null,i=at(t[Sa]),o=at(t[Wm]),s;t?s=t[Ol]+"-"+t[fv]+"-"+Tve++:s="Unknown-0-"+Tve++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:l,unload:d,update:p,_id:s,_setNext:function(f){n=f}};function c(){var f;return t&&at(t[Sve])&&(f=t[Sve]()),f||(f=Hs(a,e,r)),f}function u(f,m,h,g,v){var b=!1,y=t?t[Ol]:vGe,E=f[Eve];return E||(E=f[Eve]={}),f.setNext(n),t&&si(f[zn](),function(){return y+":"+h},function(){E[s]=!0;try{var x=n?n._id:xt;x&&(E[x]=!1),b=m(f)}catch(L){var R=n?E[n._id]:!0;R&&(b=!0),(!n||!R)&&Pe(f[xa](),1,73,"Plugin ["+y+"] failed during "+h+" - "+Fe(L)+", run flags: "+Fe(E))}},g,v),b}function l(f,m){m=m||c();function h(g){if(!t||!i)return!1;var v=jp(t);return v[Wa]||v[QC]?!1:(o&&t[Wm](n),t[Sa](f,g),!0)}u(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[Ji](f)}function d(f,m){function h(){var g=!1;if(t){var v=jp(t),b=t[zn]||v[zn];t&&(!b||b===f.core())&&!v[Wa]&&(v[zn]=null,v[Wa]=!0,v[ba]=!1,t[Wa]&&t[Wa](f,m)===!0&&(g=!0))}return g}u(f,h,"unload",function(){},m[Nu])||f[Ji](m)}function p(f,m){function h(){var g=!1;if(t){var v=jp(t),b=t[zn]||v[zn];t&&(!b||b===f.core())&&!v[Wa]&&t[cv]&&t[cv](f,m)===!0&&(g=!0)}return g}u(f,h,"update",function(){},!1)||f[Ji](m)}return Dl(a)}var vGe,Eve,Sve,Tve,wV,S4=T(()=>{"use strict";lt();eV();nh();Kr();Fu();ql();Pi();b4();CV();vGe="TelemetryPluginChain",Eve="_hasRun",Sve="_getTelCtx",Tve=0;wV=function(){function t(e,r,n,i){var o=this,s=Hs(e,r,n,i);Xa(o,s,Qi(s))}return t}()});function Sv(){var t=[];function e(n){n&&t[Wt](n)}function r(n,i){he(t,function(o){try{o(n,i)}catch(s){Pe(n[xa](),2,73,"Unexpected error calling unload handler - "+Fe(s))}}),t=[]}return{add:e,run:r}}var T4=T(()=>{lt();Kr();Fu()});function C4(){var t=[];function e(n){var i=t;t=[],he(i,function(o){try{(o.rm||o.remove).call(o)}catch(s){Pe(n,2,73,"Unloading:"+Fe(s))}})}function r(n){n&&kc(t,n)}return{run:e,add:r}}var RV=T(()=>{lt();Fu()});var AV,ch,_Ge,Gp,PV=T(()=>{"use strict";lo();lt();nh();Kr();Fu();ql();Pi();S4();T4();RV();ch="getPlugin",_Ge=(AV={},AV[Dp]={isVal:Hl,v:{}},AV),Gp=function(){function t(){var e=this,r,n,i,o,s;u(),Gt(t,e,function(l){l[kp]=function(d,p,f,m){c(d,p,m),r=!0},l[Wa]=function(d,p){var f,m=l[zn];if(!m||d&&m!==d[zn]())return;var h,g=!1,v=d||Bx(null,m,i&&i[ch]?i[ch]():i),b=p||(f={reason:0},f[Nu]=!1,f);function y(){g||(g=!0,o.run(v,p),s.run(v[xa]()),h===!0&&v[Ji](b),u())}return!l[$m]||l[$m](v,b,y)!==!0?y():h=!0,h},l[cv]=function(d,p){var f=l[zn];if(!f||d&&f!==d[zn]())return;var m,h=!1,g=d||EI(null,f,i&&i[ch]?i[ch]():i),v=p||{reason:0};function b(){h||(h=!0,c(g.getCfg(),g.core(),g[Ya]()))}return!l._doUpdate||l._doUpdate(g,v,b)!==!0?b():m=!0,m},Lp(l,"_addUnloadCb",function(){return o},"add"),Lp(l,"_addHook",function(){return s},"add"),Sr(l,"_unloadHooks",{g:function(){return s}})}),e[xa]=function(l){return a(l)[xa]()},e[ba]=function(){return r},e.setInitialized=function(l){r=l},e[Wm]=function(l){i=l},e[Ji]=function(l,d){d?d[Ji](l):i&&at(i[Sa])&&i[Sa](l,null)},e._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var p=n||Hs(null,{},e[zn]);i&&i[ch]?d=p[Ml](null,i[ch]):d=p[Ml](null,i)}return d}function c(l,d,p){Rn(l,_Ge,Mu(d)),!p&&d&&(p=d[qN]()[Ya]());var f=i;i&&i[ch]&&(f=i[ch]()),e[zn]=d,n=Hs(p,l,d,f)}function u(){r=!1,e[zn]=null,n=null,i=null,s=C4(),o=Sv()}}return t.__ieDyn=1,t}()});function xGe(t,e,r){var n={id:e,fn:r};kc(t,n);var i={remove:function(){he(t,function(o,s){if(o.id===n.id)return t[Ll](s,1),-1})}};return i}function EGe(t,e,r){for(var n=!1,i=t[tt],o=0;o<i;++o){var s=t[o];if(s)try{if(s.fn[jm](null,[e])===!1){n=!0;break}}catch(a){Pe(r,2,64,"Telemetry initializer failed: "+an(a),{exception:Fe(a)},!0)}}return!n}var Cve,Ive=T(()=>{va();lo();lt();Kr();PV();Fu();ql();Pi();Cve=function(t){ga(e,t);function e(){var r=t.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,i;o(),Gt(e,r,function(s,a){s.addTelemetryInitializer=function(c){return xGe(i,n++,c)},s[Sa]=function(c,u){EGe(i,c,u?u[xa]():s[xa]())&&s[Ji](c,u)},s[$m]=function(){o()}});function o(){n=0,i=[]}return r}return e.__ieDyn=1,e}(Gp)});function CGe(t,e){return new gI(e)}function IGe(t,e,r){var n,i=[],o=[],s={};return he(r,function(a){(_e(a)||_e(a[kp]))&&Hn(Pve);var c=a[fv],u=a[Ol];a&&c&&(_e(s[c])?s[c]=u:qs(t,"Two extensions have same priority #"+c+" - "+s[c]+", "+u)),!c||c<e?i[Wt](a):o[Wt](a)}),n={},n[zn]=i,n[Xm]=o,n}function Rve(t,e){var r=!1;return he(e,function(n){if(n===t)return r=!0,-1}),r}function DV(t,e,r,n){r&&He(r,function(i,o){n&&Xi(o)&&Xi(e[i])&&DV(t,e[i],o,n),n&&Xi(o)&&Xi(e[i])?DV(t,e[i],o,n):t.set(e,i,o)})}function Ave(t,e){var r=null,n=-1;return he(t,function(i,o){if(i.w===e)return r=i,n=o,-1}),{i:n,l:r}}function wGe(t,e){var r=Ave(t,e).l;return r||(r={w:e,rm:function(){var n=Ave(t,e);n.i!==-1&&t[Ll](n.i,1)}},t[Wt](r)),r}function RGe(t,e,r){he(e,function(n){var i=ki(t,n.w,r);delete n.w,n.rm=function(){i.rm()}})}var uh,Pve,SGe,wve,TGe,kV,Vp,kve=T(()=>{"use strict";va();lo();Cx();lt();nh();Kr();nV();oV();hV();Nx();UG();Fu();ql();Pi();gV();b4();S4();CV();Ive();T4();RV();Pve="Plugins must provide initialize method",SGe="_notificationManager",wve="SDK is still unloading...",TGe="SDK is not initialized",kV=Fs((uh={cookieCfg:{}},uh[pv]={rdOnly:!0,ref:!0,v:[]},uh[Xm]={rdOnly:!0,ref:!0,v:[]},uh[Dp]={ref:!0,v:{}},uh[QN]=Ka,uh.loggingLevelConsole=0,uh.diagnosticLogInterval=Ka,uh));Vp=function(){function t(){var e,r,n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,b,y,E,x,R,L,O,z,N,ce,J;Gt(t,this,function(D){F(),D._getDbgPlgTargets=function(){return[L]},D[ba]=function(){return r},D[kp]=function(U,ne,se,Te){f&&Hn(wve),D[ba]()&&Hn("Core cannot be initialized more than once"),e=Rn(U,kV,se||D[Vr],!1),U=e.cfg,Qe(e[Lc](function(ht){x=ht.cfg.instrumentationKey;var Or=ht.ref(ht.cfg,Dp);He(Or,function(pn){ht.ref(Or,pn)}),_e(x)&&Hn("Please provide instrumentation key")})),o=Te,ct(),Be(),D[Vr]=se;var ye=U[pv];if(l=[],l[Wt].apply(l,RN(RN([],ne,!1),ye,!1)),d=U[Xm],V(null),(!p||p[tt]===0)&&Hn("No "+Xm+" available"),d&&d[tt]>1){var Xe=D[Gm]("TeeChannelController");(!Xe||!Xe.plugin)&&Pe(n,1,28,"TeeChannel required")}RGe(U,R,n),R=null,r=!0,D.releaseQueue(),D[gG]()},D.getChannels=function(){var U=[];return p&&he(p,function(ne){U[Wt](ne)}),Dl(U)},D.track=function(U){si(D[Rx](),function(){return"AppInsightsCore:track"},function(){U===null&&(me(U),Hn("Invalid telemetry item")),!U[gs]&&_e(U[gs])&&(me(U),Hn("telemetry name required")),U.iKey=U.iKey||x,U[Vm]=U[Vm]||Qa(new Date),U.ver=U.ver||"4.0",!f&&D[ba]()?M()[Ji](U):i[Wt](U)},function(){return{item:U}},!U.sync)},D[qN]=M,D[fx]=function(){return o||(o=new mI(e.cfg),D[SGe]=o),o},D[mx]=function(U){D[fx]()[mx](U)},D[hx]=function(U){o&&o[hx](U)},D.getCookieMgr=function(){return c||(c=qp(e.cfg,D[Vr])),c},D.setCookieMgr=function(U){c!==U&&(Bp(c,!1),c=U)},D[Rx]=function(){return!s&&!a&&Qe(e[Lc](function(U){if(U.cfg.enablePerfMgr){var ne=U.cfg[QN];at(ne)&&(a=ne(D,D[fx]()))}})),s||a||bV()},D.setPerfMgr=function(U){s=U},D.eventCnt=function(){return i[tt]},D.releaseQueue=function(){if(r&&i[tt]>0){var U=i;i=[],he(U,function(ne){M()[Ji](ne)})}},D[gG]=function(U){return h=U||null,J=!1,N&&N[sv](),S(!0)};function S(U){if((!N||!N[zm])&&!J){var ne=U||n&&n.queue[tt]>0;ne&&(ce||(ce=!0,Qe(e[Lc](function(se){var Te=se.cfg.diagnosticLogInterval;(!Te||!(Te>0))&&(Te=1e4);var ye=!1;N&&(ye=N[zm],N[sv]()),N=tG(je,Te),N.unref(),N[zm]=ye}))),N[zm]=!0)}return N}D[vG]=function(){J=!0,N&&N[sv](),je()},Xa(D,function(){return m},["addTelemetryInitializer"]),D[_a]=function(U,ne,se){var Te;U===void 0&&(U=!0),r||Hn(TGe),f&&Hn(wve);var ye=(Te={reason:50},Te[Nu]=U,Te.flushComplete=!1,Te),Xe;U&&!ne&&(Xe=Bs(function(pn){ne=pn}));var ht=Bx(te(),D);ht[VC](function(){b.run(D[Vr]),m4([c,o,n],U,function(){F(),ne&&ne(ye)})},D);function Or(pn){ye.flushComplete=pn,f=!0,v.run(ht,ye),D[vG](),ht[Ji](ye)}return je(),Q(U,Or,6,se)||Or(!1),Xe},D[Gm]=de,D.addPlugin=function(U,ne,se,Te){if(!U){Te&&Te(!1),or(Pve);return}var ye=de(U[Ol]);if(ye&&!ne){Te&&Te(!1),or("Plugin ["+U[Ol]+"] is already loaded!");return}var Xe={reason:16};function ht(Yn){l[Wt](U),Xe.added=[U],V(Xe),Te&&Te(!0)}if(ye){var Or=[ye.plugin],pn={reason:2,isAsync:!!se};oe(Or,pn,function(Yn){Yn?(Xe.removed=Or,Xe.reason|=32,ht(!0)):Te&&Te(!1)})}else ht(!1)},D.updateCfg=function(U,ne){ne===void 0&&(ne=!0);var se;if(D[ba]()){se={reason:1,cfg:e.cfg,oldCfg:IN({},e.cfg),newConfig:IN({},U),merge:ne},U=se.newConfig;var Te=e.cfg;U[pv]=Te[pv],U[Xm]=Te[Xm]}e._block(function(ye){var Xe=ye.cfg;DV(ye,Xe,U,ne),ne||He(Xe,function(ht){ma(U,ht)||ye.set(Xe,ht,Ka)}),ye[Du](Xe,kV)},!0),e[ov](),se&&yt(se)},D.evtNamespace=function(){return g},D.flush=Q,D.getTraceCtx=function(U){return E||(E=xve()),E},D.setTraceCtx=function(U){E=U||null},D.addUnloadHook=Qe,Lp(D,"addUnloadCb",function(){return v},"add"),D.onCfgChange=function(U){var ne;return r?ne=ki(e.cfg,U,D[Vr]):ne=wGe(R,U),{rm:function(){ne.rm()}}},D.getWParam=function(){return Fm()||e.cfg.enableWParam?0:-1};function P(){var U={};O=[];var ne=function(se){se&&he(se,function(Te){if(Te[Ol]&&Te[av]&&!U[Te.identifier]){var ye=Te[Ol]+"="+Te[av];O[Wt](ye),U[Te.identifier]=Te}})};ne(p),d&&he(d,function(se){ne(se)}),ne(l)}function F(){r=!1,e=Rn({},kV,D[Vr]),e.cfg[HN]=1,Sr(D,"config",{g:function(){return e.cfg},s:function(ne){D.updateCfg(ne,!1)}}),Sr(D,"pluginVersionStringArr",{g:function(){return O||P(),O}}),Sr(D,"pluginVersionString",{g:function(){return z||(O||P(),z=O.join(";")),z||xt}}),Sr(D,"logger",{g:function(){return n||(n=new rh(e.cfg),e[Vr]=n),n},s:function(ne){e[Vr]=ne,n!==ne&&(Bp(n,!1),n=ne)}}),D[Vr]=new rh(e.cfg),L=[];var U=D.config[pv]||[];U.splice(0,U[tt]),kc(U,L),m=new Cve,i=[],Bp(o,!1),o=null,s=null,a=null,Bp(c,!1),c=null,u=null,l=[],d=null,p=null,f=!1,h=null,g=Ho("AIBaseCore",!0),v=Sv(),E=null,x=null,b=C4(),R=[],z=null,O=null,J=!1}function M(){var U=Hs(te(),e.cfg,D);return U[VC](S),U}function V(U){var ne=IGe(D[Vr],sve,l);u=null,z=null,O=null,p=(d||[])[0]||[],p=E4(kc(p,ne[Xm]));var se=kc(E4(ne[zn]),p);L=Dl(se);var Te=D.config[pv]||[];Te.splice(0,Te[tt]),kc(Te,L);var ye=M();p&&p[tt]>0&&TV(ye[Ml](p),se),TV(ye,se),U&&yt(U)}function de(U){var ne=null,se=null,Te=[];return he(L,function(ye){if(ye[Ol]===U&&ye!==m)return se=ye,-1;ye.getChannel&&Te[Wt](ye)}),!se&&Te[tt]>0&&he(Te,function(ye){if(se=ye.getChannel(U),!se)return-1}),se&&(ne={plugin:se,setEnabled:function(ye){jp(se)[QC]=!ye},isEnabled:function(){var ye=jp(se);return!ye[Wa]&&!ye[QC]},remove:function(ye,Xe){var ht;ye===void 0&&(ye=!0);var Or=[se],pn=(ht={reason:1},ht[Nu]=ye,ht);oe(Or,pn,function(Yn){Yn&&V({reason:32,removed:Or}),Xe&&Xe(Yn)})}}),ne}function te(){if(!u){var U=(L||[]).slice();lr(U,m)===-1&&U[Wt](m),u=ah(E4(U),e.cfg,D)}return u}function oe(U,ne,se){if(U&&U[tt]>0){var Te=ah(U,e.cfg,D),ye=Bx(Te,D);ye[VC](function(){var Xe=!1,ht=[];he(l,function(pn,Yn){Rve(pn,U)?Xe=!0:ht[Wt](pn)}),l=ht,z=null,O=null;var Or=[];d&&(he(d,function(pn,Yn){var Ts=[];he(pn,function(Ud){Rve(Ud,U)?Xe=!0:Ts[Wt](Ud)}),Or[Wt](Ts)}),d=Or),se&&se(Xe),S()}),ye[Ji](ne)}else se(!1)}function je(){if(n&&n.queue){var U=n.queue.slice(0);n.queue[tt]=0,he(U,function(ne){var se,Te=(se={},se[gs]=h||"InternalMessageId: "+ne[gx],se.iKey=x,se[Vm]=Qa(new Date),se.baseType=hv.dataType,se.baseData={message:ne[Fl]},se);D.track(Te)})}}function Q(U,ne,se,Te){var ye=1,Xe=!1,ht=null;Te=Te||5e3;function Or(){ye--,Xe&&ye===0&&(ht&&ht[sv](),ht=null,ne&&ne(Xe),ne=null)}if(p&&p[tt]>0){var pn=M()[Ml](p);pn.iterate(function(Yn){if(Yn.flush){ye++;var Ts=!1;Yn.flush(U,function(){Ts=!0,Or()},se)||Ts||(U&&ht==null?ht=ha(function(){ht=null,Or()},Te):Or())}})}return Xe=!0,Or(),!0}function ct(){!o&&D[fx](),Qe(e[Lc](function(U){var ne=U.cfg.disableDbgExt;ne===!0&&y&&(o[hx](y),y=null),o&&!y&&ne!==!0&&(y=F0e(U.cfg),o[mx](y))}))}function Be(){Qe(e[Lc](function(U){var ne=U.cfg.enablePerfMgr;!ne&&a&&(a=null),ne&&rI(U.cfg,QN,CGe)}))}function yt(U){var ne=EI(te(),D);ne[VC](S),(!D._updateHook||D._updateHook(ne,U)!==!0)&&ne[Ji](U)}function or(U){var ne=D[Vr];ne?(Pe(ne,2,73,U),S()):Hn(U)}function me(U){var ne=D[fx]();ne&&ne[Jm]([U],2)}function Qe(U){b.add(U)}})}return t.__ieDyn=1,t}()});var $l,AGe,Dve,NV,Tv,Nve=T(()=>{lo();Cx();lt();Kr();oV();Fu();th();ql();$l="",AGe="NoResponseBody",Dve="&"+AGe+"=true",NV="POST",Tv=function(){function t(){var e=0,r,n,i,o,s,a,c,u,l,d,p,f,m;Gt(t,this,function(h,g){var v=!0;J(),h[kp]=function(D,S){i=S,n&&Pe(i,1,28,"Sender is already initialized"),h.SetConfig(D),n=!0},h._getDbgPlgTargets=function(){return[n,o,a,r]},h.SetConfig=function(D){try{if(s=D.senderOnCompleteCallBack||{},a=!!D.disableCredentials,o=!!D.isOneDs,r=!!D.enableSendPromise,u=!!D.disableXhr,l=!!D.disableBeacon,d=!!D.disableBeaconSync,m=D.timeWrapper,f=!!D.addNoResponse,p=!!D.disableFetchKeepAlive,c={sendPOST:z},o||(v=!1),a){var S=mv();S&&S.protocol&&S.protocol[ya]()==="file:"&&(v=!1)}return!0}catch{}return!1},h.getSyncFetchPayload=function(){return e},h.getSenderInst=function(D,S){return D&&D[tt]?x(D,S):null},h.getFallbackInst=function(){return c},h[$m]=function(D,S){J()};function b(D,S){R(S,200,{},D)}function y(D,S){Pe(i,2,26,"Failed to send telemetry.",{message:D}),R(S,400,{})}function E(D){y("No endpoint url is provided for the batch",D)}function x(D,S){for(var P,F=0,M=null,V=0;M==null&&V<D[tt];)F=D[V],!u&&F===1?tI()?M=ce:Px()&&(M=z):F===2&&Np(S)&&(!S||!p)?M=N:F===3&&Ta()&&(S?!d:!l)&&(M=O),V++;return M?(P={_transport:F,_isSync:S},P[EG]=M,P):null}function R(D,S,P,F){try{D&&D(S,P,F)}catch{}}function L(D,S){var P=Ri(),F=D[vx];if(!F)return E(S),!0;F=D[vx]+(f?Dve:$l);var M=D[Ym],V=o?M:new Blob([M],{type:"text/plain;charset=UTF-8"}),de=P.sendBeacon(F,V);return de}function O(D,S,P){var F=D[Ym];try{if(F)if(L(D,S))b($l,S);else{var M=s&&s.beaconOnRetry;M&&at(M)?M(D,S,L):(c&&c[EG](D,S,!0),Pe(i,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(V){o&&qs(i,"Failed to send telemetry using sendBeacon API. Ex:"+Fe(V)),R(S,o?0:400,{},$l)}}function z(D,S,P){var F,M,V,de=D[zN]||{};!P&&r&&(F=Bs(function(Q,ct){M=Q,V=ct})),o&&P&&D.disableXhrSync&&(P=!1);var te=D[vx];if(!te){E(S),M&&M(!1);return}var oe=JG(NV,te,v,!0,P,D[dv]);oe[SG]("Content-type","application/json"),he(Qi(de),function(Q){oe[SG](Q,de[Q])}),oe.onreadystatechange=function(){o||(je(oe),oe.readyState===4&&M&&M(!0))},oe.onload=function(){o&&je(oe)};function je(Q){var ct=s&&s.xhrOnComplete,Be=ct&&at(ct);if(Be)ct(Q,S,D);else{var yt=Uu(Q);R(S,Q[uv],Fp(Q,o),yt)}}return oe.onerror=function(Q){R(S,o?oe[uv]:400,Fp(oe,o),o?$l:Op(oe)),V&&V(Q)},oe.ontimeout=function(){R(S,o?oe[uv]:500,Fp(oe,o),o?$l:Op(oe)),M&&M(!1)},oe.send(D[Ym]),F}function N(D,S,P){var F,M=D[vx],V=D[Ym],de=o?V:new Blob([V],{type:"application/json"}),te,oe,je,Q=new Headers,ct=V[tt],Be=!1,yt=!1,or=D[zN]||{},me=(F={method:NV,body:de},F[iV]=!0,F);D.headers&&Qi(D.headers)[tt]>0&&(he(Qi(or),function(se){Q.append(se,or[se])}),me[zN]=Q),v&&o&&(me.credentials="include"),P&&(me.keepalive=!0,e+=ct,o?D._sendReason===2&&(Be=!0,f&&(M+=Dve)):Be=!0);var Qe=new Request(M,me);try{Qe[iV]=!0}catch{}if(!P&&r&&(te=Bs(function(se,Te){oe=se,je=Te})),!M){E(S),oe&&oe(!1);return}function U(se){R(S,o?0:400,{},o?$l:se)}function ne(se,Te,ye){var Xe=se[uv],ht=s.fetchOnComplete;ht&&at(ht)?ht(se,S,ye||$l,Te):R(S,Xe,{},ye||$l)}try{Qm(fetch(o?M:Qe,o?me:null),function(se){if(P&&(e-=ct,ct=0),!yt)if(yt=!0,se.rejected)U(se.reason&&se.reason[Fl]),je&&je(se.reason);else{var Te=se.value;try{!o&&!Te.ok?(U(Te.statusText),oe&&oe(!1)):o&&!Te.body?(ne(Te,null,$l),oe&&oe(!0)):Qm(Te.text(),function(ye){ne(Te,D,ye.value),oe&&oe(!0)})}catch(ye){U(Fe(ye)),je&&je(ye)}}})}catch(se){yt||(U(Fe(se)),je&&je(se))}return Be&&!yt&&(yt=!0,R(S,200,{}),oe&&oe(!0)),o&&!yt&&D[dv]>0&&m&&m.set(function(){yt||(yt=!0,R(S,500,{}),oe&&oe(!0))},D[dv]),te}function ce(D,S,P){var F=Gn(),M=new XDomainRequest,V=D[Ym];M.onload=function(){var Q=Uu(M),ct=s&&s.xdrOnComplete;ct&&at(ct)?ct(M,S,D):R(S,200,{},Q)},M.onerror=function(){R(S,400,{},o?$l:vv(M))},M.ontimeout=function(){R(S,500,{})},M.onprogress=function(){};var de=F&&F.location&&F.location[jN]||"",te=D[vx];if(!te){E(S);return}if(!o&&te.lastIndexOf(de,0)!==0){var oe="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Pe(i,2,40,". "+oe),y(oe,S);return}var je=o?te:te[Lu](/^(https?:)/,"");M.open(NV,je),D[dv]&&(M[dv]=D[dv]),M.send(V),o&&P?m&&m.set(function(){M.send(V)},0):M.send(V)}function J(){e=0,n=!1,r=!1,i=null,o=null,s=null,a=null,c=null,u=!1,l=!1,d=!1,p=!1,f=!1,m=null}})}return t.__ieDyn=1,t}()});function Uve(t){return t&&t[Lu]?t[Lu](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,xt):t}function R4(t,e){var r;if(e){var n=xt;We(e)?(n=xt,he(e,function(o){o=Uve(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=Uve(e),n&&(n[0]!=="."&&(n="."+n),t=(t||xt)+n)}var i=NGe.exec(t||xt)||[];return r={},r[Ea]=i[1],r.ns=(i[2]||xt).replace(PGe,".").replace(kGe,xt)[Oc](".").sort().join("."),r}function LV(t,e,r){var n=[],i=TI.get(t,I4,{},!1),o=R4(e,r);return He(i,function(s,a){he(a,function(c){var u;(!o[Ea]||o[Ea]===c.evtName[Ea])&&(!o.ns||o.ns===o.ns)&&n[Wt]((u={},u[gs]=c.evtName[Ea]+(c.evtName.ns?"."+c.evtName.ns:xt),u.handler=c[$C],u))})}),n}function $ve(t,e,r){r===void 0&&(r=!0);var n=TI.get(t,I4,{},r),i=n[e];return i||(i=n[e]=[]),i}function Wve(t,e,r,n){t&&e&&e[Ea]&&(t[Fve]?t[Fve](e[Ea],r,n):t[Mve]&&t[Mve](qve+e[Ea],r))}function LGe(t,e,r,n){var i=!1;return t&&e&&e[Ea]&&r&&(t[Ove]?(t[Ove](e[Ea],r,n),i=!0):t[Lve]&&(t[Lve](qve+e[Ea],r),i=!0)),i}function Bve(t,e,r,n){for(var i=e[tt];i--;){var o=e[i];o&&(!r.ns||r.ns===o.evtName.ns)&&(!n||n(o))&&(Wve(t,o.evtName,o[$C],o.capture),e[Ll](i,1))}}function OGe(t,e,r){if(e[Ea])Bve(t,$ve(t,e[Ea]),e,r);else{var n=TI.get(t,I4,{});He(n,function(i,o){Bve(t,o,e,r)}),Qi(n)[tt]===0&&TI.kill(t,I4)}}function Ja(t,e){var r;return e?(We(e)?r=[t].concat(e):r=[t,e],r=R4("xx",r).ns[Oc](".")):r=t,r}function Wl(t,e,r,n,i){var o;i===void 0&&(i=!1);var s=!1;if(t)try{var a=R4(e,n);if(s=LGe(t,a,r,i),s&&TI.accept(t)){var c=(o={guid:DGe++,evtName:a},o[$C]=r,o.capture=i,o);$ve(t,a.type)[Wt](c)}}catch{}return s}function zp(t,e,r,n,i){if(i===void 0&&(i=!1),t)try{var o=R4(e,n),s=!1;OGe(t,o,function(a){return o.ns&&!r||a[$C]===r?(s=!0,!0):!1}),s||Wve(t,o,r,i)}catch{}}function OV(t,e,r,n){return n===void 0&&(n=!1),Wl(t,e,r,null,n)}function MV(t,e,r,n){n===void 0&&(n=!1),zp(t,e,r,null,n)}function A4(t,e,r){var n=!1,i=Gn();i&&(n=Wl(i,t,e,r),n=Wl(i.body,t,e,r)||n);var o=jn();return o&&(n=Wl(o,t,e,r)||n),n}function P4(t,e,r){var n=Gn();n&&(zp(n,t,e,r),zp(n.body,t,e,r));var i=jn();i&&zp(i,t,e,r)}function qx(t,e,r,n){var i=!1;return e&&t&&t[tt]>0&&he(t,function(o){o&&(!r||lr(r,o)===-1)&&(i=A4(o,e,n)||i)}),i}function k4(t,e,r,n){var i=!1;return e&&t&&We(t)&&(i=qx(t,e,r,n),!i&&r&&r[tt]>0&&(i=qx(t,e,null,n))),i}function lh(t,e,r){t&&We(t)&&he(t,function(n){n&&P4(n,e,r)})}function CI(t,e,r){return k4([Gve,jve,w4],t,e,r)}function II(t,e){lh([Gve,jve,w4],t,e)}function Hx(t,e,r){function n(s){var a=jn();t&&a&&a.visibilityState==="hidden"&&t(s)}var i=Ja(Vve,r),o=qx([w4],t,e,i);return(!e||lr(e,SI)===-1)&&(o=qx([SI],n,e,i)||o),!o&&e&&(o=Hx(t,null,r)),o}function wI(t,e){var r=Ja(Vve,e);lh([w4],t,r),lh([SI],null,r)}function jx(t,e,r){function n(s){var a=jn();t&&a&&a.visibilityState==="visible"&&t(s)}var i=Ja(zve,r),o=qx([Hve],t,e,i);return o=qx([SI],n,e,i)||o,!o&&e&&(o=jx(t,null,r)),o}function RI(t,e){var r=Ja(zve,e);lh([Hve],t,r),lh([SI],null,r)}var qve,Lve,Ove,Mve,Fve,I4,SI,w4,Hve,jve,Gve,Vve,zve,PGe,kGe,DGe,TI,NGe,Yve=T(()=>{lt();Kr();Nx();Pi();qve="on",Lve="attachEvent",Ove="addEventListener",Mve="detachEvent",Fve="removeEventListener",I4="events",SI="visibilitychange",w4="pagehide",Hve="pageshow",jve="unload",Gve="beforeunload",Vve=Ho("aiEvtPageHide"),zve=Ho("aiEvtPageShow"),PGe=/\.[\.]+/g,kGe=/[\.]+$/,DGe=1,TI=a4("events"),NGe=/^([^.]*)(?:\.(.+)|)/});var FV,Kve=T(()=>{UN();FV=Ai({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var Rr=T(()=>{y0e();b0e();kve();PV();s4();_V();nV();ql();Nve();lt();UN();Yve();th();va();gV();b4();Fu();S4();Kve();hV();Nx();T4();SV();nh();d4();aV()});var Yl,Qve,UV,D4,N4=T(()=>{Yl="",Qve="https://browser.events.data.microsoft.com/OneCollector/1.0/",UV="version",D4="properties"});var BV,qV,Gx,Kl,HV,An,Cv,$p,L4,O4,M4,F4,AI,U4=T(()=>{BV="initialize",qV="logger",Gx="indexOf",Kl="timings",HV="pollInternalLogs",An="value",Cv="kind",$p="length",L4="processTelemetryStart",O4="handleField",M4="rmSanitizer",F4="rmFieldSanitizer",AI="canHandle"});function po(t){return!(t===Yl||_e(t))}function B4(t){if(t){var e=Us(t,"-");if(e>-1)return Mm(t,e)}return Yl}function tye(){return jV===null&&(jV=!_t(Uint8Array)&&!qGe()&&!Zm()),jV}function q4(t){return!!(t&&ps(t)&&t>=1&&t<=4)}function H4(t,e,r){if(!e&&!po(e)||typeof t!="string")return null;var n=typeof e;if(n==="string"||n==="number"||n==="boolean"||We(e))e={value:e};else if(n==="object"&&!Jve.call(e,"value"))e={value:r?JSON.stringify(e):e};else if(_e(e[An])||e[An]===Yl||!Ct(e[An])&&!ps(e[An])&&!Iu(e[An])&&!We(e[An]))return null;if(We(e[An])&&!VV(e[An]))return null;if(!_e(e[Cv])){if(We(e[An])||!PI(e[Cv]))return null;e[An]=e[An].toString()}return e}function zx(t,e,r){var n=-1;if(!_t(t))if(e>0&&(e===32?n=8192:e<=13&&(n=e<<5)),BGe(r))n===-1&&(n=0),n|=r;else{var i=UGe[Ql(t)]||-1;n!==-1&&i!==-1?n|=i:i===6&&(n=i)}return n}function rye(t,e,r){r===void 0&&(r=!0);var n;return t&&(n=t.get(e),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||Yl}function nye(t){t===void 0&&(t="D");var e=vI();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,Yl)),e}function Iv(t,e,r,n,i){var o={},s=!1,a=0,c=arguments[$p],u=arguments;for(Iu(u[0])&&(s=u[0],a++);a<c;a++){var t=u[a];He(t,function(d,p){s&&p&&sn(p)?We(p)?(o[d]=o[d]||[],he(p,function(f,m){f&&sn(f)?o[d][m]=Iv(!0,o[d][m],f):o[d][m]=f})):o[d]=Iv(!0,o[d],p):o[d]=p})}return o}function PI(t){return t===0||t>0&&t<=13||t===32}function BGe(t){return t>=0&&t<=9}function qGe(){var t=Ri();if(!_t(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[Gx]("safari")>=0||e[Gx]("firefox")>=0)&&e[Gx]("chrome")<0)return!0}return!1}function VV(t){return t[$p]>0}function kI(t,e){var r=t;r[Kl]=r[Kl]||{},r[Kl][L4]=r[Kl][L4]||{},r[Kl][L4][e]=Ca()}function Ql(t){var e=0;if(t!=null){var r=typeof t;r==="string"?e=1:r==="number"?e=2:r==="boolean"?e=3:r===Ep&&(e=4,We(t)?(e=4096,t[$p]>0&&(e|=Ql(t[0]))):Jve.call(t,"value")&&(e=8192|Ql(t[An])))}return e}function j4(){return!!Pr("chrome")}function iye(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,MGe,n),r&&s(a,Xve,r),a.open(t,e,!i),r&&s(a,Xve,r),!i&&o&&s(a,FGe,o),a}function dh(t){return t>0}var Wp,GV,Vx,Jve,MGe,Xve,FGe,UGe,jV,Zve,eye,Ca,G4=T(()=>{Rr();va();lt();N4();U4();GV="4.1.1",Vx="1DS-Web-JS-"+GV,Jve=AC.hasOwnProperty,MGe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Xve="withCredentials",FGe="timeout",UGe=(Wp={},Wp[0]=0,Wp[2]=6,Wp[1]=1,Wp[3]=7,Wp[4098]=6,Wp[4097]=1,Wp[4099]=7,Wp),jV=null,Zve=Fm(),eye=Um();Ca=lx});function jGe(t){return t&&(!t.getProperty||!t.setProperty)&&Hn("Invalid property storage override passed."),!0}var HGe,oye,sye=T(()=>{va();lo();Rr();lt();N4();G4();U4();HGe=Fs({endpointUrl:Qve,propertyStorageOverride:{isVal:jGe}});oye=function(t){ga(e,t);function e(){var r=t.call(this)||this;return Gt(e,r,function(n,i){n[BV]=function(o,s,a,c){si(n,function(){return"AppInsightsCore.initialize"},function(){try{i[BV](Rn(o,HGe,a||n[qV],!1).cfg,s,a,c)}catch(d){var u=n[qV],l=Fe(d);l[Gx]("channels")!==-1&&(l+=`
 - Channels must be provided through config.channels only!`),Pe(u,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}},function(){return{config:o,extensions:s,logger:a,notificationManager:c}})},n.track=function(o){si(n,function(){return"AppInsightsCore.track"},function(){var s=o;if(s){s[Kl]=s[Kl]||{},s[Kl].trackStart=Ca(),q4(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=Vx;var c=s.baseData=s.baseData||{};c[D4]=c[D4]||{};var u=c[D4];u[UV]=u[UV]||n.pluginVersionString||Yl}i.track(s)},function(){return{item:o}},!o.sync)},n[HV]=function(o){return i[HV](o||"InternalLog")}}),r}return e.__ieDyn=1,e}(Vp)});var aye,cye,uye,lye,dye,pye=T(()=>{Rr();aye=Ai({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),cye=Ai({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),uye=Ai({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),lye=Ai({Normal:1,Critical:2}),dye=Ai({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});var fye,mye=T(()=>{Rr();lt();N4();G4();U4();fye=function(){function t(e){var r=this,n={},i=[],o=[];e&&o.push(e);function s(l,d){var p,f=n[l];if(f&&(p=f[d]),!p&&p!==null){if(Ct(l)&&Ct(d))if(o[$p]>0){for(var m=0;m<o[$p];m++)if(o[m][O4](l,d)){p={canHandle:!0,fieldHandler:o[m]};break}}else i[$p]===0&&(p={canHandle:!0});if(!p&&p!==null){p=null;for(var m=0;m<i[$p];m++)if(i[m][O4](l,d)){p={canHandle:!0,handler:i[m],fieldHandler:null};break}}f||(f=n[l]={}),f[d]=p}return p}r.clearCache=function(){n={}},r.addSanitizer=function(l){l&&(CN(i,l)||i.push(l),n={})},r.addFieldSanitizer=function(l){l&&(CN(o,l)||o.push(l),n={})},r[M4]=function(l){if(l){var d=lr(i,l);d!==-1&&(i.splice(d,1),n={}),he(i,function(p){p&&p[M4]&&p[M4](l)})}},r[F4]=function(l){if(l){var d=lr(o,l);d!==-1&&(o.splice(d,1),n={}),he(i,function(p){p&&p[F4]&&p[F4](l)})}},r.isEmpty=function(){return ux(i)+ux(o)===0},r[O4]=function(l,d){var p=s(l,d);return p?p[AI]:!1},r[An]=function(l,d,p,f){var m=s(l,d);if(m&&m[AI]){if(!m||!m[AI])return null;if(m.handler)return m.handler[An](l,d,p,f);if(!Ct(d)||_e(p)||p===Yl)return null;var h=null,g=Ql(p);if((g&8192)===8192){var v=g&-8193;if(h=p,!po(h[An])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=c(l,d,p):g===4&&(h=c(l,d,f?JSON.stringify(p):p));if(h)return a(m,l,d,g,h,f)}return null},r.property=function(l,d,p,f){var m=s(l,d);if(!m||!m[AI]||!Ct(d)||_e(p)||!po(p[An]))return null;var h=Ql(p[An]);return h===0?null:a(m,l,d,h,p,f)};function a(l,d,p,f,m,h){if(l.handler)return l.handler.property(d,p,m,h);if(!_e(m[Cv])){if((f&4096)===4096||!PI(m[Cv]))return null;m[An]=m[An].toString()}return u(l.fieldHandler,d,p,f,m)}function c(l,d,p){return po(p)?{value:p}:null}function u(l,d,p,f,m){if(m&&l){var h=l.getSanitizer(d,p,f,m[Cv],m.propertyType);if(h)if(f===4){var g={},v=m[An];He(v,function(y,E){var x=d+"."+p;if(po(E)){var R=c(x,y,E);R=u(l,x,y,Ql(E),R),R&&(g[y]=R[An])}}),m[An]=g}else{var b={path:d,name:p,type:f,prop:m,sanitizer:r};m=h.call(r,b)}}return m}}return t.getFieldType=Ql,t}()});var hye={};$r(hye,{AppInsightsCore:()=>oye,BaseTelemetryPlugin:()=>Gp,DiagnosticLogger:()=>rh,EventLatency:()=>cye,EventPersistence:()=>lye,EventPropertyType:()=>uye,EventsDiscardedReason:()=>ku,FullVersionString:()=>Vx,InternalAppInsightsCore:()=>Vp,LoggingSeverity:()=>FV,MinChannelPriorty:()=>mG,NotificationManager:()=>mI,PerfEvent:()=>_v,PerfManager:()=>gI,ProcessTelemetryContext:()=>wV,SenderPostManager:()=>Tv,TraceLevel:()=>dye,Undefined:()=>kl,ValueKind:()=>aye,ValueSanitizer:()=>fye,Version:()=>GV,_InternalLogMessage:()=>hv,__getRegisteredEvents:()=>LV,_appendHeader:()=>Dx,_getAllResponseHeaders:()=>Fp,_logInternalMessage:()=>KG,_throwInternal:()=>Pe,_warnToConsole:()=>qs,addEventHandler:()=>A4,addEventListeners:()=>k4,addPageHideEventListener:()=>Hx,addPageShowEventListener:()=>jx,addPageUnloadEventListener:()=>CI,areCookiesSupported:()=>Mx,arrForEach:()=>he,arrIndexOf:()=>lr,arrMap:()=>Nl,arrReduce:()=>cx,attachEvent:()=>OV,blockDynamicConversion:()=>uI,convertAllHeadersToMap:()=>o4,cookieAvailable:()=>Mx,createCookieMgr:()=>qp,createDynamicConfig:()=>Rn,createEnumStyle:()=>Ai,createGuid:()=>nye,createProcessTelemetryContext:()=>Hs,createTraceParent:()=>yI,createUniqueNamespace:()=>Ho,createUnloadHandlerContainer:()=>Sv,dateNow:()=>Vn,detachEvent:()=>MV,disallowsSameSiteNone:()=>y4,doPerf:()=>si,dumpObj:()=>Fe,eventOff:()=>zp,eventOn:()=>Wl,extend:()=>Iv,findW3cTraceParent:()=>xI,forceDynamicConversion:()=>rV,formatErrorMessageXdr:()=>vv,formatErrorMessageXhr:()=>Op,formatTraceParent:()=>_I,generateW3CId:()=>xv,getCommonSchemaMetaData:()=>zx,getConsole:()=>XC,getCookieValue:()=>rye,getCrypto:()=>JC,getDocument:()=>jn,getDynamicConfigHandler:()=>cI,getExceptionName:()=>an,getFieldValueType:()=>Ql,getGlobal:()=>ms,getGlobalInst:()=>Pr,getHistory:()=>UC,getIEVersion:()=>eI,getISOString:()=>Qa,getJSON:()=>qo,getLocation:()=>mv,getMsCrypto:()=>ZC,getNavigator:()=>Ri,getPerformance:()=>Rp,getResponseText:()=>Uu,getSetValue:()=>rI,getTenantId:()=>B4,getTime:()=>Ca,getWindow:()=>Gn,hasDocument:()=>Fm,hasHistory:()=>bN,hasJSON:()=>Bl,hasNavigator:()=>ax,hasOwnProperty:()=>mi,hasWindow:()=>Um,isArray:()=>We,isArrayValid:()=>VV,isBeaconsSupported:()=>Ta,isBoolean:()=>Iu,isChromium:()=>j4,isDate:()=>nx,isDocumentObjectAvailable:()=>Zve,isError:()=>km,isFetchSupported:()=>Np,isFunction:()=>at,isGreaterThanZero:()=>dh,isIE:()=>eh,isLatency:()=>q4,isNotTruthy:()=>sN,isNullOrUndefined:()=>_e,isNumber:()=>ps,isObject:()=>sn,isReactNative:()=>Zm,isSampledFlag:()=>bI,isString:()=>Ct,isTruthy:()=>Rc,isTypeof:()=>iN,isUint8ArrayAvailable:()=>tye,isUndefined:()=>_t,isValidSpanId:()=>zl,isValidTraceId:()=>Vl,isValidTraceParent:()=>Ux,isValueAssigned:()=>po,isValueKind:()=>PI,isWindowObjectAvailable:()=>eye,isXhrSupported:()=>Px,mergeEvtNamespace:()=>Ja,newGuid:()=>vI,newId:()=>sI,normalizeJsName:()=>gv,objDefineAccessors:()=>yN,objForEachKey:()=>He,objFreeze:()=>Dl,objKeys:()=>Qi,objSeal:()=>lN,onConfigChange:()=>ki,openXhr:()=>iye,optimizeObject:()=>Fc,parseResponse:()=>yv,parseTraceParent:()=>Ev,perfNow:()=>lx,prependTransports:()=>Mp,proxyAssign:()=>QG,proxyFunctionAs:()=>Lp,proxyFunctions:()=>Xa,random32:()=>Up,randomValue:()=>oI,removeEventHandler:()=>P4,removeEventListeners:()=>lh,removePageHideEventListener:()=>wI,removePageShowEventListener:()=>RI,removePageUnloadEventListener:()=>II,safeGetCookieMgr:()=>mV,safeGetLogger:()=>Mu,sanitizeProperty:()=>H4,setEnableEnvMocks:()=>VG,setProcessTelemetryTimings:()=>kI,setValue:()=>Mc,strContains:()=>hi,strEndsWith:()=>qm,strFunction:()=>X_,strObject:()=>Ep,strPrototype:()=>Cu,strStartsWith:()=>rv,strTrim:()=>yr,strUndefined:()=>kl,throwError:()=>Hn,toISOString:()=>Qa,useXDomainRequest:()=>tI});var wv=T(()=>{sye();pye();mye();Rr();G4()});var Rv,V4,z4,zV=T(()=>{Rv="REAL_TIME",V4="NEAR_REAL_TIME",z4="BEST_EFFORT"});var Bu,$4,gye,$V,vye,yye,bye,WV,YV,W4,_ye,xye,Eye,Y4,KV,K4,Q4,X4,DI,QV,XV,Sye,$x,JV,J4,NI=T(()=>{Bu="",$4="drop",gye="send",$V="requeue",vye="rspFail",yye="oth",bye="no-cache, no-store",WV="application/x-json-stream",YV="cache-control",W4="content-type",_ye="kill-tokens",xye="kill-duration",Eye="time-delta-millis",Y4="client-version",KV="client-id",K4="time-delta-to-apply-millis",Q4="upload-time",X4="apikey",DI="AuthMsaDeviceTicket",QV="WebAuthToken",XV="AuthXToken",Sye="NoResponseBody",$x="msfpc",JV="trace",J4="user"});var LI,Z4,eL,tL,OI,Mt,Xl,Bc,gi,Jl,fo,Zl,Av,rL,ph,nL,Pv,iL,oL,Tye,ZV,ez,Cye,Iye,sL,tz,rz,wye,Rye,nz,iz,Aye,aL,cL,oz,kv,Wx,sz,vs,Ia,MI,FI,Yx,uL,UI,Pye,lL,dL,Kx,az,BI,pL,fL,Qx,mL,hL,gL,qI,kye,Dye,cz,uz,Nye,Lye,Oye,vL,HI,fh,Dv,Xx=T(()=>{LI="allowRequestSending",Z4="firstRequestSent",eL="shouldAddClockSkewHeaders",tL="getClockSkewHeaderValue",OI="setClockSkew",Mt="length",Xl="concat",Bc="iKey",gi="count",Jl="events",fo="push",Zl="split",Av="splice",rL="toLowerCase",ph="hdrs",nL="useHdrs",Pv="initialize",iL="setTimeoutOverride",oL="clearTimeoutOverride",Tye="payloadPreprocessor",ZV="overrideEndpointUrl",ez="avoidOptions",Cye="disableEventTimings",Iye="stringifyObjects",sL="enableCompoundKey",tz="disableXhrSync",rz="disableFetchKeepAlive",wye="addNoResponse",Rye="excludeCsMetaData",nz="useSendBeacon",iz="alwaysUseXhrOverride",Aye="unloadTransports",aL="serializeOfflineEvt",cL="getOfflineRequestDetails",oz="createPayload",kv="headers",Wx="_thePayload",sz="urlString",vs="batches",Ia="sendType",MI="addHeader",FI="canSendRequest",Yx="sendQueuedRequests",uL="isCompletelyIdle",UI="setUnloading",Pye="isTenantKilled",lL="sendSynchronousBatch",dL="_transport",Kx="getWParam",az="isBeacon",BI="timings",pL="isTeardown",fL="isSync",Qx="data",mL="_sendReason",hL="setKillSwitchTenants",gL="_backOffTransmission",qI="identifier",kye="disableOptimizeObj",Dye="ignoreMc1Ms0CookieProcessing",cz="eventsLimitInMem",uz="autoFlushEventsLimit",Nye="disableAutoBatchFlushLimit",Lye="overrideInstrumentationKey",Oye="disableTelemetry",vL="baseData",HI="sendAttempt",fh="latency",Dv="sync"});function Fye(t){var e=(t.ext||{}).intweb;return e&&po(e[$x])?e[$x]:null}function Mye(t){for(var e=null,r=0;e===null&&r<t[Mt];r++)e=Fye(t[r]);return e}var Jx,lz=T(()=>{wv();NI();Xx();Jx=function(){function t(e,r){var n=r?[][Xl](r):[],i=this,o=Mye(n);i[Bc]=function(){return e},i.Msfpc=function(){return o||Bu},i[gi]=function(){return n[Mt]},i[Jl]=function(){return n},i.addEvent=function(s){return s?(n[fo](s),o||(o=Fye(s)),!0):!1},i[Zl]=function(s,a){var c;if(s<n[Mt]){var u=n[Mt]-s;_e(a)||(u=a<u?a:u),c=n[Av](s,u),o=Mye(n)}return new t(e,c)}}return t.create=function(e,r){return new t(e,r)},t}()});var Uye,Bye=T(()=>{lo();Xx();Uye=function(){function t(){var e=!0,r=!0,n=!0,i="use-collector-delta",o=!1;Gt(t,this,function(s){s[LI]=function(){return e},s[Z4]=function(){n&&(n=!1,o||(e=!1))},s[eL]=function(){return r},s[tL]=function(){return i},s[OI]=function(a){o||(a?(i=a,r=!0,o=!0):r=!1,e=!0)}})}return t.__ieDyn=1,t}()});var GGe,qye,Hye=T(()=>{lo();wv();Xx();GGe=1e3,qye=function(){function t(){var e={};function r(n){var i=[];return n&&he(n,function(o){i[fo](yr(o))}),i}Gt(t,this,function(n){n[hL]=function(i,o){if(i&&o)try{var s=r(i[Zl](","));if(o==="this-request-only")return s;for(var a=parseInt(o,10)*GGe,c=0;c<s[Mt];++c)e[s[c]]=Vn()+a}catch{return[]}return[]},n[Pye]=function(i){var o=e,s=yr(i);return o[s]!==void 0&&o[s]>Vn()?!0:(delete o[s],!1)}})}return t.__ieDyn=1,t}()});function Gye(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function yL(t){var e=0,r=jye*VGe,n=jye*zGe,i=Math.floor(Math.random()*(n-r))+r;return e=Math.pow(2,t)*i,Math.min(e,$Ge)}var VGe,zGe,jye,$Ge,dz=T(()=>{VGe=.8,zGe=1.2,jye=3e3,$Ge=6e5});function XGe(t,e,r,n,i){if(i&&e){var o=t(i.value,i.kind,i.propertyType);if(o>-1){var s=e[Vye];s||(s=e[Vye]={f:{}});var a=s[bL];if(a||(a=s[bL]={}),r)for(var c=0;c<r.length;c++){var u=r[c];a[u]||(a[u]={f:{}});var l=a[u][bL];l||(l=a[u][bL]={}),a=l}a=a[n]={},We(i.value)?a.a={t:o}:a.t=o}}}var WGe,YGe,zye,$ye,KGe,Vye,bL,QGe,Wye,Yye=T(()=>{lo();wv();lz();NI();lt();WGe=20,YGe=3984588,zye=65e3,$ye=2e6,KGe=Math.min($ye,zye),Vye="metadata",bL="f",QGe=/\./,Wye=function(){function t(e,r,n,i,o,s){var a="data",c="baseData",u="ext",l=!!i,d=!0,p=r,f={},m=!!s,h=o||zx;Gt(t,this,function(g){g.createPayload=function(y,E,x,R,L,O){return{apiKeys:[],payloadBlob:Bu,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:y,isTeardown:E,isSync:x,isBeacon:R,sendType:O,sendReason:L}},g.appendPayload=function(y,E,x){var R=y&&E&&!y.overflow;return R&&si(e,function(){return"Serializer:appendPayload"},function(){for(var L=E.events(),O=y.payloadBlob,z=y.numEvents,N=!1,ce=[],J=[],D=y.isBeacon,S=D?zye:YGe,P=D?KGe:$ye,F=0,M=0;F<L.length;){var V=L[F];if(V){if(z>=x){y.overflow=E.split(F);break}var de=g.getEventBlob(V);if(de&&de.length<=P){var te=de.length,oe=O.length;if(oe+te>S){y.overflow=E.split(F);break}O&&(O+=`
`),O+=de,M++,M>WGe&&(Ru(O,0,1),M=0),N=!0,z++}else de?ce.push(V):J.push(V),L.splice(F,1),F--}F++}if(ce.length>0&&y.sizeExceed.push(Jx.create(E.iKey(),ce)),J.length>0&&y.failedEvts.push(Jx.create(E.iKey(),J)),N){y.batches.push(E),y.payloadBlob=O,y.numEvents=z;var je=E.iKey();lr(y.apiKeys,je)===-1&&y.apiKeys.push(je)}},function(){return{payload:y,theBatch:{iKey:E.iKey(),evts:E.events()},max:x}}),R},g.getEventBlob=function(y){try{return si(e,function(){return"Serializer.getEventBlob"},function(){var E={};E.name=y.name,E.time=y.time,E.ver=y.ver,E.iKey="o:"+B4(y.iKey);var x={},R;m||(R=function(N,ce,J){XGe(h,x,N,ce,J)});var L=y[u];L&&(E[u]=x,He(L,function(N,ce){var J=x[N]={};b(ce,J,"ext."+N,!0,null,null,!0)}));var O=E[a]={};O.baseType=y.baseType;var z=O[c]={};return b(y.baseData,z,c,!1,[c],R,d),b(y.data,O,a,!1,[],R,d),JSON.stringify(E)},function(){return{item:y}})}catch{return null}};function v(y,E){var x=f[y];return x===void 0&&(y.length>=7&&(x=rv(y,"ext.metadata")||rv(y,"ext.web")),f[y]=x),x}function b(y,E,x,R,L,O,z){He(y,function(N,ce){var J=null;if(ce||po(ce)){var D=x,S=N,P=L,F=E;if(l&&!R&&QGe.test(N)){var M=N.split("."),V=M.length;if(V>1){P&&(P=P.slice());for(var de=0;de<V-1;de++){var te=M[de];F=F[te]=F[te]||{},D+="."+te,P&&P.push(te)}S=M[V-1]}}var oe=R&&v(D,S);if(!oe&&p&&p.handleField(D,S)?J=p.value(D,S,ce,n):J=H4(S,ce,n),J){var je=J.value;if(F[S]=je,O&&O(P,S,J),z&&typeof je=="object"&&!We(je)){var Q=P;Q&&(Q=Q.slice(),Q.push(S)),b(ce,je,D+"."+S,R,Q,O,z)}}}})}})}return t.__ieDyn=1,t}()});function Zx(t,e){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return eG([t,e],r,n,i)}}}var pz=T(()=>{lt()});function Lv(t,e,r){mz[t]=e,r!==!1&&(hz[e]=t)}function Kye(t,e){var r=!1;if(t&&e){var n=Qi(t);if(n&&n[Mt]>0)for(var i=e[rL](),o=0;o<n[Mt];o++){var s=n[o];if(s&&mi(e,s)&&s[rL]()===i){r=!0;break}}}return r}function e1(t,e,r,n){e&&r&&r[Mt]>0&&(n&&mz[e]?(t[ph][mz[e]]=r,t[nL]=!0):t.url+="&"+e+"="+r)}function tVe(t,e,r){for(var n=0;n<t[Mt];n++)if(t[n].name===e){t[n].value=r;return}t[fo]({name:e,value:r})}function rVe(t,e){for(var r=0;r<t[Mt];r++)if(t[r].name===e){t[Av](r,1);return}}var Nv,fz,JGe,ZGe,eVe,mz,hz,Qye,Xye=T(()=>{lo();wv();lt();Bye();NI();Hye();dz();Yye();pz();Xx();fz="sendAttempt",JGe="&"+Sye+"=true",ZGe="?cors=true&"+W4[rL]()+"="+WV,eVe=(Nv={},Nv[1]=$V,Nv[100]=$V,Nv[200]="sent",Nv[8004]=$4,Nv[8003]=$4,Nv),mz={},hz={};Lv(DI,DI,!1);Lv(Y4,Y4);Lv(KV,"Client-Id");Lv(X4,X4);Lv(K4,K4);Lv(Q4,Q4);Lv(XV,XV);Qye=function(){function t(e,r,n,i){var o,s,a,c,u=!1,l,d,p,f,m,h,g,v,b,y,E,x,R,L,O,z,N,ce,J,D,S,P,F,M,V,de,te;Gt(t,this,function(oe){yt();var je=!0;oe[Pv]=function($,Ce,Oe){M||(m=Ce,x=Ce.getCookieMgr(),d=Oe,p=d.diagLog(),kc(D,ki($,function(nt){var H,Z=nt.cfg,ue=nt.cfg.extensionConfig[Oe.identifier];V=Zx(ue[iL],ue[oL]),po(Z.anonCookieName)?tVe(g,"anoncknm",Z.anonCookieName):rVe(g,"anoncknm"),S=ue[Tye],P=ue.payloadListener;var be=ue.httpXHROverride,q=ue[ZV]?ue[ZV]:Z.endpointUrl;o=q+ZGe,L=_t(ue[ez])?!0:!ue[ez],E=!ue[Cye];var W=ue.valueSanitizer,ie=ue[Iye],xe=!!Z[sL];_t(ue[sL])||(xe=!!ue[sL]),O=ue.xhrTimeout,z=!!ue[tz],N=!!ue[rz],J=ue[wye]!==!1,de=!!ue[Rye],Ce.getPlugin("LocalStorage")&&(N=!0),u=!Zm(),y=new Wye(m,W,ie,xe,zx,de),_e(ue[nz])||(u=!!ue[nz]);var Ve=ct();te?te.SetConfig(Ve):(te=new Tv,te[Pv](Ve,p));var Ae=be,er=ue[iz]?be:null,ur=ue[iz]?be:null,Si=[3,2];if(!be){h=!1;var Da=[];Zm()?(Da=[2,1],Si=[2,1,3]):Da=[1,2,3],Da=Mp(Da,ue.transports),be=Q(Da,!1),be||qs(p,"No available transport to send events"),Ae=Q(Da,!0)}er||(Si=Mp(Si,ue[Aye]),er=Q(Si,!0)),ce=!h&&(u&&Ta()||!N&&Np(!0)),f=(H={},H[0]=be,H[1]=Ae||Q([1,2,3],!0),H[2]=er||Ae||Q([1],!0),H[3]=ur||Q([2,3],!0)||Ae||Q([1],!0),H)})),M=!0)},oe.addResponseHandler=function($){return F[fo]($),{rm:function(){var Ce=F.indexOf($);Ce>=0&&F[Av](Ce,1)}}},oe[aL]=function($){try{if(y)return y.getEventBlob($)}catch{}return Bu},oe[cL]=function(){try{var $=y&&y[oz](0,!1,!1,!1,1,0);return pn($,L)}catch{}return null};function Q($,Ce){try{return te&&te.getSenderInst($,Ce)}catch{}return null}oe._getDbgPlgTargets=function(){return[f[0],s,y,f]};function ct(){try{var $={xdrOnComplete:Be,fetchOnComplete:or,xhrOnComplete:me,beaconOnRetry:U},Ce={enableSendPromise:!1,isOneDs:!0,disableCredentials:!je,disableXhr:!1,disableBeacon:!u,disableBeaconSync:!u,disableFetchKeepAlive:N,timeWrapper:V,addNoResponse:J,senderOnCompleteCallBack:$};return Ce}catch{}return null}function Be($,Ce,Oe){var nt=Uu($);Qe(Ce,200,{},nt),Zu(nt)}function yt(){var $;o=null,s=new qye,a=!1,c=new Uye,u=!1,l=0,d=null,p=null,f=null,m=null,h=!0,g=[],v={},b=[],y=null,E=!1,x=null,R=!1,L=!1,O=$,z=$,N=$,ce=$,J=$,D=[],S=$,P=$,F=[],M=!1,V=Zx(),de=!1,te=null}function or($,Ce,Oe,nt){var H=function(be,q,W){Qe(Ce,be,q,W),Zu(W)},Z={},ue=$[kv];ue&&ue.forEach(function(be,q){Z[q]=be}),H($.status,Z,Oe||Bu)}function me($,Ce,Oe){var nt=Uu($);Qe(Ce,$.status,Fp($,!0),nt),Zu(nt)}function Qe($,Ce,Oe,nt){try{$(Ce,Oe,nt)}catch(H){Pe(p,2,518,Fe(H))}}function U($,Ce,Oe){var nt=$,H=200,Z=nt[Wx],ue=$[sz]+(J?JGe:Bu);try{var be=Ri();if(Z){var q=!!m.getPlugin("LocalStorage"),W=[],ie=[];he(Z[vs],function(xe){if(W&&xe&&xe[gi]()>0)for(var Ve=xe[Jl](),Ae=0;Ae<Ve[Mt];Ae++)if(be.sendBeacon(ue,y.getEventBlob(Ve[Ae])))ie[fo](xe[Ae]);else{W[fo](xe[Zl](Ae));break}else W[fo](xe[Zl](0))}),ie[Mt]>0&&(Z.sentEvts=ie),q||Js(W,8003,Z[Ia],!0)}else H=0}catch(xe){qs(p,"Failed to send telemetry using sendBeacon API. Ex:"+Fe(xe)),H=0}finally{Qe(Ce,H,{},Bu)}}function ne($){return $===2||$===3}function se($){return R&&ne($)&&($=2),$}oe[MI]=function($,Ce){v[$]=Ce},oe.removeHeader=function($){delete v[$]},oe[FI]=function(){return Te()&&c[LI]()},oe[Yx]=function($,Ce){_t($)&&($=0),R&&($=se($),Ce=2),Xe(b,$,0)&&Or(ye(),0,!1,$,Ce||0)},oe[uL]=function(){return!a&&l===0&&b[Mt]===0},oe[UI]=function($){R=$},oe.addBatch=function($){if($&&$[gi]()>0){if(s.isTenantKilled($[Bc]()))return!1;b[fo]($)}return!0},oe.teardown=function(){b[Mt]>0&&Or(ye(),0,!0,2,2),he(D,function($){$&&$.rm&&$.rm()}),D=[]},oe.pause=function(){a=!0},oe.resume=function(){a=!1,oe[Yx](0,4)},oe[lL]=function($,Ce,Oe){$&&$[gi]()>0&&(_e(Ce)&&(Ce=1),R&&(Ce=se(Ce),Oe=2),Or([$],0,!1,Ce,Oe||0))};function Te(){return!a&&l<r}function ye(){var $=b;return b=[],$}function Xe($,Ce,Oe){var nt=!1;return $&&$[Mt]>0&&!a&&f[Ce]&&y&&(nt=Ce!==0||Te()&&(Oe>0||c[LI]())),nt}function ht($){var Ce={};return $&&he($,function(Oe,nt){Ce[nt]={iKey:Oe[Bc](),evts:Oe[Jl]()}}),Ce}function Or($,Ce,Oe,nt,H){if(!(!$||$[Mt]===0)){if(a){Js($,1,nt);return}nt=se(nt);try{var Z=$,ue=nt!==0;si(m,function(){return"HttpManager:_sendBatches"},function(be){be&&($=$.slice(0));for(var q=[],W=null,ie=Ca(),xe=f[nt]||(ue?f[1]:f[0]),Ve=xe&&xe[dL],Ae=ce&&(R||ne(nt)||Ve===3||xe._isSync&&Ve===2);Xe($,nt,Ce);){var er=$.shift();er&&er[gi]()>0&&(s.isTenantKilled(er[Bc]())?q[fo](er):(W=W||y[oz](Ce,Oe,ue,Ae,H,nt),y.appendPayload(W,er,e)?W.overflow!==null&&($=[W.overflow][Xl]($),W.overflow=null,Ts(W,ie,Ca(),H),ie=Ca(),W=null):(Ts(W,ie,Ca(),H),ie=Ca(),$=[er][Xl]($),W=null)))}W&&Ts(W,ie,Ca(),H),$[Mt]>0&&(b=$[Xl](b)),Js(q,8004,nt)},function(){return{batches:ht(Z),retryCount:Ce,isTeardown:Oe,isSynchronous:ue,sendReason:H,useSendBeacon:ne(nt),sendType:nt}},!ue)}catch(be){Pe(p,2,48,"Unexpected Exception sending batch: "+Fe(be))}}}function pn($,Ce){var Oe={url:o,hdrs:{},useHdrs:!1};Ce?(Oe[ph]=Iv(Oe[ph],v),Oe.useHdrs=Qi(Oe.hdrs)[Mt]>0):He(v,function(be,q){hz[be]?e1(Oe,hz[be],q,!1):(Oe[ph][be]=q,Oe[nL]=!0)}),e1(Oe,KV,"NO_AUTH",Ce),e1(Oe,Y4,Vx,Ce);var nt=Bu;he($.apiKeys,function(be){nt[Mt]>0&&(nt+=","),nt+=be}),e1(Oe,X4,nt,Ce),e1(Oe,Q4,Vn().toString(),Ce);var H=mS($);if(po(H)&&(Oe.url+="&ext.intweb.msfpc="+H),c[eL]()&&e1(Oe,K4,c[tL](),Ce),m[Kx]){var Z=m[Kx]();Z>=0&&(Oe.url+="&w="+Z)}for(var ue=0;ue<g[Mt];ue++)Oe.url+="&"+g[ue].name+"="+g[ue].value;return Oe}function Yn($,Ce,Oe){$[Ce]=$[Ce]||{},$[Ce][d.identifier]=Oe}function Ts($,Ce,Oe,nt){if($&&$.payloadBlob&&$.payloadBlob[Mt]>0){var H=!!S,Z=f[$.sendType];!ne($[Ia])&&$[az]&&$.sendReason===2&&(Z=f[2]||f[3]||Z);var ue=L;($.isBeacon||Z[dL]===3)&&(ue=!1);var be=pn($,ue);ue=ue||be[nL];var q=Ca();si(m,function(){return"HttpManager:_doPayloadSend"},function(){for(var W=0;W<$.batches[Mt];W++)for(var ie=$[vs][W],xe=ie[Jl](),Ve=0;Ve<xe[Mt];Ve++){var Ae=xe[Ve];if(E){var er=Ae[BI]=Ae[BI]||{};Yn(er,"sendEventStart",q),Yn(er,"serializationStart",Ce),Yn(er,"serializationCompleted",Oe)}Ae[fz]>0?Ae[fz]++:Ae[fz]=1}Js($[vs],1e3+(nt||0),$[Ia],!0);var ur={data:$.payloadBlob,urlString:be.url,headers:be[ph],_thePayload:$,_sendReason:nt,timeout:O,disableXhrSync:z,disableFetchKeepAlive:N};ue&&(Kye(ur[kv],YV)||(ur[kv][YV]=bye),Kye(ur[kv],W4)||(ur[kv][W4]=WV));var Si=null;Z&&(Si=function(Da){c[Z4]();var Rf=function(Af,Gg){Fy(Af,Gg,$,nt)},Cs=$[pL]||$[fL];try{Z.sendPOST(Da,Rf,Cs),P&&P(ur,Da,Cs,$[az])}catch(Af){qs(p,"Unexpected exception sending payload. Ex:"+Fe(Af)),Qe(Rf,0,{})}}),si(m,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Si)if($[Ia]===0&&l++,H&&!$.isBeacon&&Z[dL]!==3){var Da={data:ur[Qx],urlString:ur[sz],headers:Iv({},ur[kv]),timeout:ur.timeout,disableXhrSync:ur[tz],disableFetchKeepAlive:ur[rz]},Rf=!1;si(m,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{S(Da,function(Cs){Rf=!0,!h&&!Cs[Wx]&&(Cs[Wx]=Cs[Wx]||ur[Wx],Cs[mL]=Cs[mL]||ur[mL]),Si(Cs)},$.isSync||$[pL])}catch{Rf||Si(ur)}})}else Si(ur)})},function(){return{thePayload:$,serializationStart:Ce,serializationCompleted:Oe,sendReason:nt}},$[fL])}$.sizeExceed&&$.sizeExceed[Mt]>0&&Js($.sizeExceed,8003,$[Ia]),$.failedEvts&&$.failedEvts[Mt]>0&&Js($.failedEvts,8002,$[Ia])}function Ud($,Ce){E&&he($,function(Oe){var nt=Oe[BI]=Oe[BI]||{};Yn(nt,"sendEventCompleted",Ce)})}function Fy($,Ce,Oe,nt){var H=9e3,Z=null,ue=!1,be=!1;try{var q=!0;if(typeof $!==kl){if(Ce){c[OI](Ce[Eye]);var W=Ce[xye]||Ce["kill-duration-seconds"];he(s[hL](Ce[_ye],W),function(xe){he(Oe[vs],function(Ve){if(Ve[Bc]()===xe){Z=Z||[];var Ae=Ve[Zl](0);Oe.numEvents-=Ae[gi](),Z[fo](Ae)}})})}if($==200||$==204){H=200;return}(!Gye($)||Oe.numEvents<=0)&&(q=!1),H=9e3+$%1e3}if(q){H=100;var ie=Oe.retryCnt;Oe[Ia]===0&&(ie<n?(ue=!0,Bd(function(){Oe[Ia]===0&&l--,Or(Oe[vs],ie+1,Oe[pL],R?2:Oe[Ia],5)},R,yL(ie))):(be=!0,R&&(H=8001)))}}finally{ue||(c[OI](),jg(Oe,H,nt,be)),Js(Z,8004,Oe[Ia])}}function jg($,Ce,Oe,nt){try{nt&&d[gL]();var H=$[vs];Ce===200&&(H=$.sentEvts||$[vs],!nt&&!$[fL]&&d._clearBackOff(),Uy(H)),Js(H,Ce,$[Ia],!0)}finally{$[Ia]===0&&(l--,Oe!==5&&oe.sendQueuedRequests($[Ia],Oe))}}function Uy($){if(E){var Ce=Ca();he($,function(Oe){Oe&&Oe[gi]()>0&&Ud(Oe[Jl](),Ce)})}}function Bd($,Ce,Oe){Ce?$():V.set($,Oe)}function mS($){for(var Ce=0;Ce<$.batches[Mt];Ce++){var Oe=$[vs][Ce].Msfpc();if(Oe)return encodeURIComponent(Oe)}return Bu}function Zu($){var Ce=F;try{for(var Oe=0;Oe<Ce[Mt];Oe++)try{Ce[Oe]($)}catch(H){Pe(p,1,519,"Response handler failed: "+H)}if($){var nt=JSON.parse($);po(nt.webResult)&&po(nt.webResult[$x])&&x.set("MSFPC",nt.webResult[$x],365*86400)}}catch{}}function Js($,Ce,Oe,nt){if($&&$[Mt]>0&&i){var H=i[wf(Ce)];if(H){var Z=Oe!==0;si(m,function(){return"HttpManager:_sendBatchesNotification"},function(){Bd(function(){try{H.call(i,$,Ce,Z,Oe)}catch(ue){Pe(p,1,74,"send request notification failed: "+ue)}},nt||Z,0)},function(){return{batches:ht($),reason:Ce,isSync:Z,sendSync:nt,sendType:Oe}},!Z)}}}function wf($){var Ce=eVe[$];return po(Ce)||(Ce=yye,$>=9e3&&$<=9999?Ce=vye:$>=8e3&&$<=8999?Ce=$4:$>=1e3&&$<=1999&&(Ce=gye)),Ce}})}return t.__ieDyn=1,t}()});function cVe(t){return t&&t.sendPOST}var nVe,Jye,iVe,tbe,rbe,oVe,Zye,sVe,gz,Ov,ebe,Zi,aVe,nbe,ibe=T(()=>{va();lo();wv();Cx();lt();zV();lz();Xye();NI();dz();pz();Xx();nVe=.25,Jye=500,iVe=20,tbe=6,rbe=2,oVe=4,Zye=2,sVe=1,gz=1e4,Ov="eventsDiscarded",ebe="",Zi=void 0,aVe=Fs({eventsLimitInMem:{isVal:dh,v:gz},immediateEventLimit:{isVal:dh,v:500},autoFlushEventsLimit:{isVal:dh,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:cVe,v:Zi},overrideInstrumentationKey:Zi,overrideEndpointUrl:Zi,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Zi,clearTimeoutOverride:Zi,payloadPreprocessor:Zi,payloadListener:Zi,disableEventTimings:Zi,valueSanitizer:Zi,stringifyObjects:Zi,enableCompoundKey:Zi,disableOptimizeObj:!1,transports:Zi,unloadTransports:Zi,useSendBeacon:Zi,disableFetchKeepAlive:Zi,avoidOptions:!1,xhrTimeout:Zi,disableXhrSync:Zi,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:ps,v:tbe},maxUnloadEventRetryAttempts:{isVal:ps,v:rbe},addNoResponse:Zi,excludeCsMetaData:Zi});nbe=function(t){ga(e,t);function e(){var r=t.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="4.1.1";var n,i=!1,o=[],s,a=!1,c=0,u,l=0,d,p={},f=Rv,m,h,g,v,b,y,E,x,R,L,O,z,N,ce,J,D,S,P,F,M,V,de;return Gt(e,r,function(te,oe){Te(),te._getDbgPlgTargets=function(){return[b,n]},te[Pv]=function(q,W,ie){si(W,function(){return"PostChannel:initialize"},function(){oe[Pv](q,W,ie),F=W.getNotifyMgr();try{J=Ja(Ho(te[qI]),W.evtNamespace&&W.evtNamespace()),te._addHook(ki(q,function(xe){var Ve=xe.cfg,Ae=Hs(null,Ve,W);n=Ae.getExtCfg(te[qI],aVe),D=Zx(n[iL],n[oL]),O=!n[kye]&&j4(),S=n[Dye],Q(W),d=n[cz],u=n.immediateEventLimit,E=n[uz],N=n.maxEventRetryAttempts,ce=n.maxUnloadEventRetryAttempts,P=n[Nye],be(),V=n[Lye],de=!!n[Oye],M&&je();var er=Ve.disablePageUnloadEvents||[];M=CI(yt,er,J),M=Hx(yt,er,J)||M,M=jx(or,Ve.disablePageShowEvents,J)||M})),b[Pv](q,te.core,te)}catch(xe){throw te.setInitialized(!1),xe}},function(){return{theConfig:q,core:W,extensions:ie}})},te.processTelemetry=function(q,W){kI(q,te[qI]),W=W||te._getTelCtx(W);var ie=q;!de&&!i&&(V&&(ie[Bc]=V),Qe(ie,!0),z?ht(2,2):se()),te.processNext(ie,W)},te.getOfflineSupport=function(){try{var q=b&&b[cL]();if(q)return{getUrl:function(){return q.url},serialize:Be,batch:ct,shouldProcess:function(W){return!de},createPayload:function(W){return{urlString:q.url,headers:q[ph],data:W}}}}catch{}return null},te._doTeardown=function(q,W){ht(2,2),i=!0,b.teardown(),je(),Te()};function je(){II(null,J),wI(null,J),RI(null,J)}function Q(q){var W=q[Kx];q[Kx]=function(){var ie=0;return S&&(ie=ie|2),ie|W.call(q)}}function ct(q){var W=ebe;return q&&q[Mt]&&he(q,function(ie){W&&(W+=`
`),W+=ie}),W}function Be(q){var W=ebe;try{me(q),W=b[aL](q)}catch{}return W}function yt(q){var W=q||Gn().event;W.type!=="beforeunload"&&(z=!0,b[UI](z)),ht(2,2)}function or(q){z=!1,b[UI](z)}function me(q){q.ext&&q.ext[JV]&&delete q.ext[JV],q.ext&&q.ext[J4]&&q.ext[J4].id&&delete q.ext[J4].id,O&&(q.ext=Fc(q.ext),q[vL]&&(q[vL]=Fc(q[vL])),q[Qx]&&(q[Qx]=Fc(q[Qx])))}function Qe(q,W){if(q[HI]||(q[HI]=0),q[fh]||(q[fh]=1),me(q),q[Dv]){if(g||a)q[fh]=3,q[Dv]=!1;else if(b){O&&(q=Fc(q)),b[lL](Jx.create(q[Bc],[q]),q[Dv]===!0?1:q[Dv],3);return}}var ie=q[fh],xe=l,Ve=d;ie===4&&(xe=c,Ve=u);var Ae=!1;if(xe<Ve)Ae=!Ts(q,W);else{var er=1,ur=iVe;ie===4&&(er=4,ur=1),Ae=!0,Ud(q[Bc],q[fh],er,ur)&&(Ae=!Ts(q,W))}Ae&&$(Ov,[q],ku.QueueFull)}te.setEventQueueLimits=function(q,W){n[cz]=d=dh(q)?q:gz,n[uz]=E=dh(W)?W:0,be();var ie=l>q;if(!ie&&x>0)for(var xe=1;!ie&&xe<=3;xe++){var Ve=y[xe];Ve&&Ve[vs]&&he(Ve[vs],function(Ae){Ae&&Ae[gi]()>=x&&(ie=!0)})}Yn(!0,ie)},te.pause=function(){Xe(),a=!0,b.pause()},te.resume=function(){a=!1,b.resume(),se()},te._loadTransmitProfiles=function(q){mS(),He(q,function(W,ie){var xe=ie[Mt];if(xe>=2){var Ve=xe>2?ie[2]:0;if(ie[Av](0,xe-2),ie[1]<0&&(ie[0]=-1),ie[1]>0&&ie[0]>0){var Ae=ie[0]/ie[1];ie[0]=Math.ceil(Ae)*ie[1]}Ve>=0&&ie[1]>=0&&Ve>ie[1]&&(Ve=ie[1]),ie[fo](Ve),p[W]=ie}})},te.flush=function(q,W,ie){q===void 0&&(q=!0);var xe;if(!a)if(ie=ie||1,q)W||(xe=Bs(function(Ae){W=Ae})),s==null?(Xe(),jg(1,0,ie),s=ye(function(){s=null,Uy(W,ie)},0)):o[fo](W);else{var Ve=Xe();U(1,1,ie),W&&W(),Ve&&se()}return xe},te.setMsaAuthTicket=function(q){b[MI](DI,q)},te.setAuthPluginHeader=function(q){b[MI](QV,q)},te.removeAuthPluginHeader=function(){b.removeHeader(QV)},te.hasEvents=ne,te._setTransmitProfile=function(q){f!==q&&p[q]!==void 0&&(Xe(),f=q,se())},Xa(te,function(){return b},["addResponseHandler"]);function U(q,W,ie){var xe=jg(q,W,ie);return b[Yx](W,ie),xe}function ne(){return l>0}function se(){if(R>=0&&jg(R,0,L)&&b[Yx](0,L),c>0&&!h&&!a){var q=p[f][2];q>=0&&(h=ye(function(){h=null,U(4,0,1),se()},q))}var W=p[f][1];!m&&!s&&W>=0&&!a&&(ne()?m=ye(function(){m=null,U(v===0?3:1,0,1),v++,v%=2,se()},W):v=0)}te[gL]=function(){g<oVe&&(g++,Xe(),se())},te._clearBackOff=function(){g&&(g=0,Xe(),se())};function Te(){n=null,i=!1,o=[],s=null,a=!1,c=0,u=500,l=0,d=gz,p={},f=Rv,m=null,h=null,g=0,v=0,y={},E=0,M=!1,x=0,R=-1,L=null,O=!0,z=!1,N=tbe,ce=rbe,J=null,V=null,de=!1,D=Zx(),b=new Qye(Jye,Zye,sVe,{requeue:Js,send:Oe,sent:nt,drop:H,rspFail:Z,oth:ue}),Zu(),Or(),be()}function ye(q,W){W===0&&g&&(W=1);var ie=1e3;return g&&(ie=yL(g-1)),D.set(q,W*ie)}function Xe(){return m!==null?(m.cancel(),m=null,v=0,!0):!1}function ht(q,W){Xe(),s&&(s.cancel(),s=null),a||U(1,q,W)}function Or(){y[4]={batches:[],iKeyMap:{}},y[3]={batches:[],iKeyMap:{}},y[2]={batches:[],iKeyMap:{}},y[1]={batches:[],iKeyMap:{}}}function pn(q,W,ie){var xe=y[W];xe||(W=1,xe=y[W]);var Ve=xe.iKeyMap[q];return!Ve&&ie&&(Ve=Jx.create(q),xe.batches[fo](Ve),xe.iKeyMap[q]=Ve),Ve}function Yn(q,W){b[FI]()&&!g&&(E>0&&l>E&&(W=!0),W&&s==null&&te.flush(q,function(){},20))}function Ts(q,W){O&&(q=Fc(q));var ie=q[fh],xe=pn(q[Bc],ie,!0);return xe.addEvent(q)?(ie!==4?(l++,W&&q[HI]===0&&Yn(!q.sync,x>0&&xe[gi]()>=x)):c++,!0):!1}function Ud(q,W,ie,xe){for(;ie<=W;){var Ve=pn(q,W,!0);if(Ve&&Ve[gi]()>0){var Ae=Ve[Zl](0,xe),er=Ae[gi]();if(er>0)return ie===4?c-=er:l-=er,Ce(Ov,[Ae],ku.QueueFull),!0}ie++}return Fy(),!1}function Fy(){for(var q=0,W=0,ie=function(Ve){var Ae=y[Ve];Ae&&Ae[vs]&&he(Ae[vs],function(er){Ve===4?q+=er[gi]():W+=er[gi]()})},xe=1;xe<=4;xe++)ie(xe);l=W,c=q}function jg(q,W,ie){var xe=!1,Ve=W===0;return!Ve||b[FI]()?si(te.core,function(){return"PostChannel._queueBatches"},function(){for(var Ae=[],er=4;er>=q;){var ur=y[er];ur&&ur.batches&&ur.batches[Mt]>0&&(he(ur[vs],function(Si){b.addBatch(Si)?xe=xe||Si&&Si[gi]()>0:Ae=Ae[Xl](Si[Jl]()),er===4?c-=Si[gi]():l-=Si[gi]()}),ur[vs]=[],ur.iKeyMap={}),er--}Ae[Mt]>0&&$(Ov,Ae,ku.KillSwitch),xe&&R>=q&&(R=-1,L=0)},function(){return{latency:q,sendType:W,sendReason:ie}},!Ve):(R=R>=0?Math.min(R,q):q,L=Math.max(L,ie)),xe}function Uy(q,W){U(1,0,W),Fy(),Bd(function(){q&&q(),o[Mt]>0?s=ye(function(){s=null,Uy(o.shift(),W)},0):(s=null,se())})}function Bd(q){b[uL]()?q():s=ye(function(){s=null,Bd(q)},nVe)}function mS(){Xe(),Zu(),f=Rv,se()}function Zu(){p={},p[Rv]=[2,1,0],p[V4]=[6,3,0],p[z4]=[18,9,0]}function Js(q,W){var ie=[],xe=N;z&&(xe=ce),he(q,function(Ve){Ve&&Ve[gi]()>0&&he(Ve[Jl](),function(Ae){Ae&&(Ae[Dv]&&(Ae[fh]=4,Ae[Dv]=!1),Ae[HI]<xe?(kI(Ae,te[qI]),Qe(Ae,!1)):ie[fo](Ae))})}),ie[Mt]>0&&$(Ov,ie,ku.NonRetryableStatus),z&&ht(2,2)}function wf(q,W){var ie=F||{},xe=ie[q];if(xe)try{xe.apply(ie,W)}catch(Ve){Pe(te.diagLog(),1,74,q+" notification failed: "+Ve)}}function $(q,W){for(var ie=[],xe=2;xe<arguments.length;xe++)ie[xe-2]=arguments[xe];W&&W[Mt]>0&&wf(q,[W][Xl](ie))}function Ce(q,W){for(var ie=[],xe=2;xe<arguments.length;xe++)ie[xe-2]=arguments[xe];W&&W[Mt]>0&&he(W,function(Ve){Ve&&Ve[gi]()>0&&wf(q,[Ve.events()][Xl](ie))})}function Oe(q,W,ie){q&&q[Mt]>0&&wf("eventsSendRequest",[W>=1e3&&W<=1999?W-1e3:0,ie!==!0])}function nt(q,W){Ce("eventsSent",q,W),se()}function H(q,W){Ce(Ov,q,W>=8e3&&W<=8999?W-8e3:ku.Unknown)}function Z(q){Ce(Ov,q,ku.NonRetryableStatus),se()}function ue(q,W){Ce(Ov,q,ku.Unknown),se()}function be(){P?x=0:x=Math.max(Jye*(Zye+1),d/6)}}),r}return e.__ieDyn=1,e}(Gp)});var obe={};$r(obe,{BE_PROFILE:()=>z4,NRT_PROFILE:()=>V4,PostChannel:()=>nbe,RT_PROFILE:()=>Rv});var sbe=T(()=>{zV();ibe()});var cbe=k(ed=>{"use strict";var uVe=ed&&ed.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lVe=ed&&ed.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),abe=ed&&ed.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uVe(e,t,r);return lVe(e,t),e};Object.defineProperty(ed,"__esModule",{value:!0});ed.oneDataSystemClientFactory=void 0;var dVe=async(t,e,r)=>{let n=await Promise.resolve().then(()=>abe((wv(),Ti(hye)))),i=await Promise.resolve().then(()=>abe((sbe(),Ti(obe)))),o=new n.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=l}let u=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer(l=>{l.ext=l.ext??{},l.ext.web=l.ext.web??{},l.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',u&&(l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),o},pVe=async(t,e,r)=>{let n=await dVe(t,e,r);return{logEvent:(s,a)=>{try{n?.track({name:s,baseData:{name:s,properties:a?.properties,measurements:a?.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!n){a();return}n.flush(!0,u=>{if(!u){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!n){a();return}n.unload(!1,()=>{a(),n=void 0},1e3)})}};ed.oneDataSystemClientFactory=pVe});var ube,t1,r1,jI,mh,td,eo,_L,qc=T(()=>{ube="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",t1="sampleRate",r1="ProcessLegacy",jI="http.method",mh="https://dc.services.visualstudio.com",td="/v2/track",eo="not_specified",_L="iKey"});var Mv,vz=T(()=>{Rr();Mv=hG({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Yp,Et,rd,hh,Kp,Qp,xL,Di,qu,gh,EL,SL,TL,yz,CL,IL,Fv,n1,bz,GI,Uv,Hc,jo,ys,Bv,nd,qv,wL,RL,_z,Hv,vh,VI,zI,jv,i1,Gv,xz,to=T(()=>{Yp="split",Et="length",rd="toLowerCase",hh="ingestionendpoint",Kp="toString",Qp="push",xL="removeItem",Di="name",qu="message",gh="count",EL="preTriggerDate",SL="disabled",TL="interval",yz="daysOfMonth",CL="date",IL="getUTCDate",Fv="stringify",n1="pathname",bz="correlationHeaderExcludePatterns",GI="extensionConfig",Uv="exceptions",Hc="parsedStack",jo="properties",ys="measurements",Bv="sizeInBytes",nd="typeName",qv="severityLevel",wL="problemGroup",RL="isManual",_z="CreateFromInterface",Hv="assembly",vh="fileName",VI="hasFullStack",zI="level",jv="method",i1="line",Gv="duration",xz="receivedResponse"});function AL(t,e,r){var n=e[Et],i=Ez(t,e);if(i[Et]!==n){for(var o=0,s=i;r[s]!==void 0;)o++,s=ni(i,0,147)+Sz(o);i=s}return i}function Ez(t,e){var r;return e&&(e=yr(_n(e)),e[Et]>150&&(r=ni(e,0,150),Pe(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),r||e}function jr(t,e,r){r===void 0&&(r=1024);var n;return e&&(r=r||1024,e=yr(_n(e)),e[Et]>r&&(n=ni(e,0,r),Pe(t,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:e},!0))),n||e}function yh(t,e){return DL(t,e,2048,66)}function o1(t,e){var r;return e&&e[Et]>32768&&(r=ni(e,0,32768),Pe(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),r||e}function PL(t,e){var r;if(e){var n=""+e;n[Et]>32768&&(r=ni(n,0,32768),Pe(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return r||e}function bs(t,e){if(e){var r={};He(e,function(n,i){if(sn(i)&&Bl())try{i=qo()[Fv](i)}catch(o){Pe(t,2,49,"custom property is not valid",{exception:o},!0)}i=jr(t,i,8192),n=AL(t,n,r),r[n]=i}),e=r}return e}function _s(t,e){if(e){var r={};He(e,function(n,i){n=AL(t,n,r),r[n]=i}),e=r}return e}function kL(t,e){return e&&DL(t,e,128,69)[Kp]()}function DL(t,e,r,n){var i;return e&&(e=yr(_n(e)),e[Et]>r&&(i=ni(e,0,r),Pe(t,2,n,"input is too long, it has been truncated to "+r+" characters.",{data:e},!0))),i||e}function Sz(t){var e="00"+t;return Ru(e,e[Et]-3)}var jc=T(()=>{Rr();lt();to()});function Vv(t){var e=dbe,r=fVe,n=r[e];return lbe.createElement?r[e]||(n=r[e]=lbe.createElement("a")):n={host:Tz(t,!0)},n.href=t,e++,e>=r[Et]&&(e=0),dbe=e,n}function pbe(t){var e,r=Vv(t);return r&&(e=r.href),e}function fbe(t){var e,r=Vv(t);return r&&(e=r[n1]),e}function mbe(t,e){return t?t.toUpperCase()+" "+e:e}function Tz(t,e){var r=$I(t,e)||"";if(r){var n=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[Et]>3&&Ct(n[2])&&n[2][Et]>0)return n[2]+(n[3]||"")}return r}function $I(t,e){var r=null;if(t){var n=t.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[Et]>2&&Ct(n[2])&&n[2][Et]>0&&(r=n[2]||"",e&&n[Et]>2)){var i=(n[1]||"")[rd](),o=n[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),r+=o}}return r}var lbe,dbe,fVe,Cz=T(()=>{Rr();to();lbe=jn()||{},dbe=0,fVe=[null,null,null,null,null]});function WI(t){return lr(mVe,t[rd]())!==-1}function hbe(t){Iz=t}function gbe(){return Iz}function vbe(t,e,r){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t[bz]){for(var n=0;n<t.correlationHeaderExcludePatterns[Et];n++)if(t[bz][n].test(e))return!1}var i=Vv(e).host[rd]();if(i&&(Us(i,":443")!==-1||Us(i,":80")!==-1)&&(i=($I(e,!0)||"")[rd]()),(!t||!t.enableCorsCorrelation)&&i&&i!==r)return!1;var o=t&&t.correlationHeaderDomains;if(o){var s;if(he(o,function(u){var l=new RegExp(u.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||l.test(i)}),!s)return!1}var a=t&&t.correlationHeaderExcludedDomains;if(!a||a[Et]===0)return!0;for(var n=0;n<a[Et];n++){var c=new RegExp(a[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(c.test(i))return!1}return i&&i[Et]>0}function ybe(t){if(t){var e=wz(t,Mv[1]);if(e&&e!==Iz)return e}}function wz(t,e){if(t)for(var r=t[Yp](","),n=0;n<r[Et];++n){var i=r[n][Yp]("=");if(i[Et]===2&&i[0]===e)return i[1]}}function bbe(t,e,r,n){var i,o=n,s=n;if(e&&e[Et]>0){var a=Vv(e);if(i=a.host,!o)if(a[n1]!=null){var c=a.pathname[Et]===0?"/":a[n1];c.charAt(0)!=="/"&&(c="/"+c),s=a[n1],o=jr(t,r?r+" "+c:c)}else o=jr(t,e)}else i=n,o=n;return{target:i,name:o,data:s}}function _be(){var t=Rp();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return Vn()}function xbe(t,e){var r=null;return t!==0&&e!==0&&!_e(t)&&!_e(e)&&(r=e-t),r}function Ebe(t,e){var r=t||{};return{getName:function(){return r[Di]},setName:function(n){e&&e.setName(n),r[Di]=n},getTraceId:function(){return r.traceID},setTraceId:function(n){e&&e.setTraceId(n),Vl(n)&&(r.traceID=n)},getSpanId:function(){return r.parentID},setSpanId:function(n){e&&e.setSpanId(n),zl(n)&&(r.parentID=n)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(n){e&&e.setTraceFlags(n),r.traceFlags=n}}}var mVe,Iz,Rz=T(()=>{Rr();lt();qc();vz();jc();Cz();to();mVe=[mh+td,"https://breeze.aimon.applicationinsights.io"+td,"https://dc-int.services.visualstudio.com"+td],Iz="cid-v1:"});var s1,Sbe,Tbe,Az=T(()=>{Rr();s1=Ai({LocalStorage:0,SessionStorage:1}),Sbe=Ai({AI:0,AI_AND_W3C:1,W3C:2}),Tbe=Ai({Normal:1,Critical:2})});function Pz(){return a1()?NL(s1.LocalStorage):null}function NL(t){try{if(_e(ms()))return null;var e=new Date()[Kp](),r=Pr(t===s1.LocalStorage?"localStorage":"sessionStorage"),n=Cbe+e;r.setItem(n,e);var i=r.getItem(n)!==e;if(r[xL](n),!i)return r}catch{}return null}function kz(){return zv()?NL(s1.SessionStorage):null}function Ibe(){bh=!1,_h=!1}function LL(t){Cbe=t||""}function wbe(){bh=a1(!0),_h=zv(!0)}function a1(t){return(t||bh===void 0)&&(bh=!!NL(s1.LocalStorage)),bh}function OL(t,e){var r=Pz();if(r!==null)try{return r.getItem(e)}catch(n){bh=!1,Pe(t,2,1,"Browser failed read of local storage. "+an(n),{exception:Fe(n)})}return null}function ML(t,e,r){var n=Pz();if(n!==null)try{return n.setItem(e,r),!0}catch(i){bh=!1,Pe(t,2,3,"Browser failed write to local storage. "+an(i),{exception:Fe(i)})}return!1}function Rbe(t,e){var r=Pz();if(r!==null)try{return r[xL](e),!0}catch(n){bh=!1,Pe(t,2,5,"Browser failed removal of local storage item. "+an(n),{exception:Fe(n)})}return!1}function zv(t){return(t||_h===void 0)&&(_h=!!NL(s1.SessionStorage)),_h}function Abe(){var t=[];return zv()&&He(Pr("sessionStorage"),function(e){t[Qp](e)}),t}function FL(t,e){var r=kz();if(r!==null)try{return r.getItem(e)}catch(n){_h=!1,Pe(t,2,2,"Browser failed read of session storage. "+an(n),{exception:Fe(n)})}return null}function UL(t,e,r){var n=kz();if(n!==null)try{return n.setItem(e,r),!0}catch(i){_h=!1,Pe(t,2,4,"Browser failed write to session storage. "+an(i),{exception:Fe(i)})}return!1}function Pbe(t,e){var r=kz();if(r!==null)try{return r[xL](e),!0}catch(n){_h=!1,Pe(t,2,6,"Browser failed removal of session storage item. "+an(n),{exception:Fe(n)})}return!1}var bh,_h,Cbe,Dz=T(()=>{Rr();Az();to();bh=void 0,_h=void 0,Cbe=""});var hVe,kbe,Dbe=T(()=>{Rr();lt();Dz();to();hVe="appInsightsThrottle",kbe=function(){function t(e,r){var n=this,i,o,s,a,c,u,l,d=!1,p=!1;m(),n._getDbgPlgTargets=function(){return[l]},n.getConfig=function(){return s},n.canThrottle=function(S){var P=ce(S),F=h(S);return b(F,i,P)},n.isTriggered=function(S){return J(S)},n.isReady=function(){return d},n.flush=function(S){try{var P=D(S);if(P&&P[Et]>0){var F=P.slice(0);return l[S]=[],he(F,function(M){f(M.msgID,M[qu],M.severity,!1)}),!0}}catch{}return!1},n.flushAll=function(){try{if(l){var S=!0;return He(l,function(P){var F=n.flush(parseInt(P));S=S&&F}),S}}catch{}return!1},n.onReadyState=function(S,P){return P===void 0&&(P=!0),d=_e(S)?!0:S,d&&P?n.flushAll():null},n.sendMessage=function(S,P,F){return f(S,P,F,!0)};function f(S,P,F,M){if(d){var V=N(S);if(!V)return;var de=h(S),te=ce(S),oe=b(de,i,te),je=!1,Q=0,ct=J(S);try{oe&&!ct?(Q=Math.min(de.limit.maxSendNumber,te[gh]+1),te[gh]=0,je=!0,c[S]=!0,te[EL]=new Date):(c[S]=oe,te[gh]+=1);var Be=y(S);L(o,Be,te);for(var yt=0;yt<Q;yt++)z(S,o,P,F)}catch{}return{isThrottled:je,throttleNum:Q}}else if(M){var or=D(S);or[Qp]({msgID:S,message:P,severity:F})}return null}function m(){o=Mu(e),c={},a={},l={},s={},g(109),u=Hl(r)?r:"",e.addUnloadHook(ki(e.config,function(S){var P=S.cfg;i=a1();var F=P.throttleMgrCfg||{};He(F,function(M,V){g(parseInt(M),V)})}))}function h(S){return s[S]||s[109]}function g(S,P){var F,M;try{var V=P||{},de={};de[SL]=!!V[SL];var te=V[TL]||{};p=te?.daysOfMonth&&te?.daysOfMonth[Et]>0,de[TL]=v(te);var oe={samplingRate:((F=V.limit)===null||F===void 0?void 0:F.samplingRate)||100,maxSendNumber:((M=V.limit)===null||M===void 0?void 0:M.maxSendNumber)||1};de.limit=oe,s[S]=de}catch{}}function v(S){S=S||{};var P=S?.monthInterval,F=S?.dayInterval;return _e(P)&&_e(F)&&(S.monthInterval=3,p||(S[yz]=[28],p=!0)),S={monthInterval:S?.monthInterval,dayInterval:S?.dayInterval,daysOfMonth:S?.daysOfMonth},S}function b(S,P,F){if(S&&!S[SL]&&P&&Hl(F)){var M=R(),V=F[CL],de=S[TL],te=1;if(de?.monthInterval){var oe=(M.getUTCFullYear()-V.getUTCFullYear())*12+M.getUTCMonth()-V.getUTCMonth();te=O(de.monthInterval,0,oe)}var je=1;if(p)je=lr(de[yz],M[IL]());else if(de?.dayInterval){var Q=Math.floor((M.getTime()-V.getTime())/864e5);je=O(de.dayInterval,0,Q)}return te>=0&&je>=0}return!1}function y(S,P){var F=Hl(P)?P:"";return S?hVe+F+"-"+S:null}function E(S){try{if(S){var P=new Date;return S.getUTCFullYear()===P.getUTCFullYear()&&S.getUTCMonth()===P.getUTCMonth()&&S[IL]()===P[IL]()}}catch{}return!1}function x(S,P,F){try{var M={date:R(),count:0};if(S){var V=JSON.parse(S),de={date:R(V[CL])||M[CL],count:V[gh]||M[gh],preTriggerDate:V.preTriggerDate?R(V[EL]):void 0};return de}else return L(P,F,M),M}catch{}return null}function R(S){try{if(S){var P=new Date(S);if(!isNaN(P.getDate()))return P}else return new Date}catch{}return null}function L(S,P,F){try{return ML(S,P,yr(JSON[Fv](F)))}catch{}return!1}function O(S,P,F){return S<=0?1:F>=P&&(F-P)%S==0?Math.floor((F-P)/S)+1:-1}function z(S,P,F,M){Pe(P,M||1,S,F)}function N(S){try{var P=h(S);return oI(1e6)<=P.limit.samplingRate}catch{}return!1}function ce(S){try{var P=a[S];if(!P){var F=y(S,u);P=x(OL(o,F),o,F),a[S]=P}return a[S]}catch{}return null}function J(S){var P=c[S];if(_e(P)){P=!1;var F=ce(S);F&&(P=E(F[EL])),c[S]=P}return c[S]}function D(S){return l=l||{},_e(l[S])&&(l[S]=[]),l[S]}}return t}()});function YI(t){if(!t)return{};var e=t[Yp](gVe),r=cx(e,function(i,o){var s=o[Yp](vVe);if(s[Et]===2){var a=s[0][rd](),c=s[1];i[a]=c}return i},{});if(Qi(r)[Et]>0){if(r.endpointsuffix){var n=r.location?r.location+".":"";r[hh]=r[hh]||"https://"+n+"dc."+r.endpointsuffix}r[hh]=r[hh]||mh,qm(r[hh],"/")&&(r[hh]=r[hh].slice(0,-1))}return r}var gVe,vVe,Nbe,Lbe=T(()=>{Rr();qc();to();gVe=";",vVe="=";Nbe={parse:YI}});var BL,Obe=T(()=>{Rr();qc();to();jc();BL=function(){function t(e,r,n){var i=this,o=this;o.ver=1,o.sampleRate=100,o.tags={},o[Di]=jr(e,n)||eo,o.data=r,o.time=Qa(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return i.sampleRate===100?4:1},tags:1,data:1}}return t}()});var id,Mbe=T(()=>{qc();to();jc();id=function(){function t(e,r,n,i){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var o=this;o.ver=2,o[Di]=jr(e,r)||eo,o[jo]=bs(e,n),o[ys]=_s(e,i)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function Mz(t,e){var r=t;return r&&!Ct(r)&&(JSON&&JSON[Fv]?(r=JSON[Fv](t),e&&(!r||r==="{}")&&(at(t[Kp])?r=t[Kp]():r=""+t)):r=""+t+" - (Missing JSON.stringify)"),r||""}function Hbe(t,e){var r=t;return t&&(r&&!Ct(r)&&(r=t[Oz]||t[qbe]||r),r&&!Ct(r)&&(r=Mz(r,!0)),t.filename&&(r=r+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&Us(r||"",e)===-1&&(r=e+": "+r),r||""}function bVe(t){try{if(sn(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function _Ve(t){try{if(sn(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function Ube(t){return t&&t.src&&Ct(t.src)&&t.obj&&We(t.obj)}function $v(t){var e=t||"";Ct(e)||(Ct(e[wa])?e=e[wa]:e=""+e);var r=e[Yp](`
`);return{src:e,obj:r}}function xVe(t){for(var e=[],r=t[Yp](`
`),n=0;n<r[Et];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),e[Qp](i)}return{src:t,obj:e}}function jbe(t){var e=null;if(t)try{if(t[wa])e=$v(t[wa]);else if(t[c1]&&t[c1][wa])e=$v(t[c1][wa]);else if(t.exception&&t.exception[wa])e=$v(t.exception[wa]);else if(Ube(t))e=t;else if(Ube(t[Lz]))e=t[Lz];else if(Gn()&&Gn().opera&&t[Oz])e=xVe(t[qu]);else if(t.reason&&t.reason[wa])e=$v(t.reason[wa]);else if(Ct(t))e=$v(t);else{var r=t[Oz]||t[qbe]||"";Ct(t[Fbe])&&(r&&(r+=`
`),r+=" from "+t[Fbe]),r&&(e=$v(r))}}catch(n){e=$v(n)}return e||{src:"",obj:null}}function EVe(t){var e="";return t&&(t.obj?he(t.obj,function(r){e+=r+`
`}):e=t.src||""),e}function SVe(t){var e,r=t.obj;if(r&&r[Et]>0){e=[];var n=0,i=0;he(r,function(m){var h=m[Kp]();if(Fz.regex.test(h)){var g=new Fz(h,n++);i+=g[Bv],e[Qp](g)}});var o=32*1024;if(i>o)for(var s=0,a=e[Et]-1,c=0,u=s,l=a;s<a;){var d=e[s][Bv],p=e[a][Bv];if(c+=d+p,c>o){var f=l-u+1;e.splice(u,f);break}u=s,l=a,s++,a--}}return e}function qL(t){var e="";if(t&&(e=t.typeName||t[Di]||"",!e))try{var r=/function (.{1,200})\(/,n=r.exec(t.constructor[Kp]());e=n&&n[Et]>1?n[1]:""}catch{}return e}function Nz(t){if(t)try{if(!Ct(t)){var e=qL(t),r=Mz(t,!1);return(!r||r==="{}")&&(t[c1]&&(t=t[c1],e=qL(t)),r=Mz(t,!0)),Us(r,e)!==0&&e!=="String"?e+":"+r:r}}catch{}return""+(t||"")}var yVe,c1,wa,Lz,Fbe,Oz,qbe,xh,Bbe,Fz,Gbe=T(()=>{va();Rr();lt();qc();to();jc();yVe="<no_method>",c1="error",wa="stack",Lz="stackDetails",Fbe="errorSrc",Oz="message",qbe="description";xh=function(){function t(e,r,n,i,o,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,_Ve(r)?(a[Uv]=r[Uv]||[],a[jo]=r[jo],a[ys]=r[ys],r[qv]&&(a[qv]=r[qv]),r.id&&(a.id=r.id,r[jo].id=r.id),r[wL]&&(a[wL]=r[wL]),_e(r[RL])||(a[RL]=r[RL])):(n||(n={}),s&&(n.id=s),a[Uv]=[new Bbe(e,r,n)],a[jo]=bs(e,n),a[ys]=_s(e,i),o&&(a[qv]=o),s&&(a.id=s))}return t.CreateAutoException=function(e,r,n,i,o,s,a,c){var u,l=qL(o||s||e);return u={},u[qu]=Hbe(e,l),u.url=r,u.lineNumber=n,u.columnNumber=i,u.error=Nz(o||s||e),u.evt=Nz(s||e),u[nd]=l,u.stackDetails=jbe(a||o||s),u.errorSrc=c,u},t.CreateFromInterface=function(e,r,n,i){var o=r[Uv]&&Nl(r[Uv],function(a){return Bbe[_z](e,a)}),s=new t(e,Nc(Nc({},r),{exceptions:o}),n,i);return s},t.prototype.toInterface=function(){var e,r=this,n=r.exceptions,i=r.properties,o=r.measurements,s=r.severityLevel,a=r.problemGroup,c=r.id,u=r.isManual,l=n instanceof Array&&Nl(n,function(d){return d.toInterface()})||void 0;return e={ver:"4.0"},e[Uv]=l,e.severityLevel=s,e.properties=i,e.measurements=o,e.problemGroup=a,e.id=c,e.isManual=u,e},t.CreateSimpleException=function(e,r,n,i,o,s){var a;return{exceptions:[(a={},a[VI]=!0,a.message=e,a.stack=o,a.typeName=r,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=Nz,t}(),Bbe=function(){function t(e,r,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var i=this;if(bVe(r))i[nd]=r[nd],i[qu]=r[qu],i[wa]=r[wa],i[Hc]=r[Hc]||[],i[VI]=r[VI];else{var o=r,s=o&&o.evt;km(o)||(o=o[c1]||s||o),i[nd]=jr(e,qL(o))||eo,i[qu]=o1(e,Hbe(r||o,i[nd]))||eo;var a=r[Lz]||jbe(r);i[Hc]=SVe(a),We(i[Hc])&&Nl(i[Hc],function(c){c[Hv]=jr(e,c[Hv]),c[vh]=jr(e,c[vh])}),i[wa]=PL(e,EVe(a)),i.hasFullStack=We(i.parsedStack)&&i.parsedStack[Et]>0,n&&(n[nd]=n[nd]||i[nd])}}return t.prototype.toInterface=function(){var e,r=this,n=r[Hc]instanceof Array&&Nl(r[Hc],function(o){return o.toInterface()}),i=(e={id:r.id,outerId:r.outerId,typeName:r[nd],message:r[qu],hasFullStack:r[VI],stack:r[wa]},e[Hc]=n||void 0,e);return i},t.CreateFromInterface=function(e,r){var n=r[Hc]instanceof Array&&Nl(r[Hc],function(o){return Fz[_z](o)})||r[Hc],i=new t(e,Nc(Nc({},r),{parsedStack:n}));return i},t}(),Fz=function(){function t(e,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[Bv]=0,typeof e=="string"){var i=e;n[zI]=r,n[jv]=yVe,n[Hv]=yr(i),n[vh]="",n[i1]=0;var o=i.match(t.regex);o&&o[Et]>=5&&(n[jv]=yr(o[2])||n[jv],n[vh]=yr(o[4]),n[i1]=parseInt(o[5])||0)}else n[zI]=e[zI],n[jv]=e[jv],n[Hv]=e[Hv],n[vh]=e[vh],n[i1]=e[i1],n[Bv]=0;n.sizeInBytes+=n.method[Et],n.sizeInBytes+=n.fileName[Et],n.sizeInBytes+=n.assembly[Et],n[Bv]+=t.baseSize,n.sizeInBytes+=n.level.toString()[Et],n.sizeInBytes+=n.line.toString()[Et]}return t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){var e=this;return{level:e[zI],method:e[jv],assembly:e[Hv],fileName:e[vh],line:e[i1]}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}()});var Vbe,zbe=T(()=>{Vbe=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var od,$be=T(()=>{qc();to();zbe();jc();od=function(){function t(e,r,n,i,o,s,a,c,u){this.aiDataContract={ver:1,metrics:1,properties:0};var l=this;l.ver=2;var d=new Vbe;d[gh]=i>0?i:void 0,d.max=isNaN(s)||s===null?void 0:s,d.min=isNaN(o)||o===null?void 0:o,d[Di]=jr(e,r)||eo,d.value=n,d.stdDev=isNaN(a)||a===null?void 0:a,l.metrics=[d],l[jo]=bs(e,c),l[ys]=_s(e,u)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function Wbe(t,e){return e===void 0&&(e=!1),t==null?e:t.toString()[rd]()==="true"}function u1(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=KI+t%1e3,r=KI+Math.floor(t/1e3)%60,n=KI+Math.floor(t/(1e3*60))%60,i=KI+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e[Et]===1?"00"+e:e[Et]===2?"0"+e:e,r=r[Et]<2?"0"+r:r,n=n[Et]<2?"0"+n:n,i=i[Et]<2?"0"+i:i,(o>0?o+".":KI)+i+":"+n+":"+r+"."+e}function Ybe(t,e){var r=null;return he(t,function(n){if(n.identifier===e)return r=n,-1}),r}function Kbe(t,e,r,n,i){return!i&&Ct(t)&&(t==="Script error."||t==="Script error")}var KI,HL=T(()=>{Rr();to();KI=""});var Eh,Qbe=T(()=>{qc();HL();to();jc();Eh=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=kL(e,a),c.url=yh(e,n),c[Di]=jr(e,r)||eo,isNaN(i)||(c[Gv]=u1(i)),c[jo]=bs(e,o),c[ys]=_s(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var Sh,Xbe=T(()=>{HL();Rz();to();jc();Sh=function(){function t(e,r,n,i,o,s,a,c,u,l,d,p){u===void 0&&(u="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var f=this;f.ver=2,f.id=r,f[Gv]=u1(o),f.success=s,f.resultCode=a+"",f.type=jr(e,u);var m=bbe(e,n,c,i);f.data=yh(e,i)||m.data,f.target=jr(e,m.target),l&&(f.target="".concat(f.target," | ").concat(l)),f[Di]=jr(e,m[Di]),f[jo]=bs(e,d),f[ys]=_s(e,p)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var Th,Jbe=T(()=>{qc();to();jc();Th=function(){function t(e,r,n,i,o){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,r=r||eo,s[qu]=o1(e,r),s[jo]=bs(e,i),s[ys]=_s(e,o),n&&(s[qv]=n)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var Ch,Zbe=T(()=>{qc();to();jc();Ch=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=yh(e,n),c[Di]=jr(e,r)||eo,c[jo]=bs(e,o),c[ys]=_s(e,s),a&&(c.domProcessing=a.domProcessing,c[Gv]=a[Gv],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c[xz]=a[xz],c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var sd,e_e=T(()=>{sd=function(){function t(e,r){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=r}return t}()});var jL,t_e=T(()=>{Rr();jL=Ai({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});var r_e,n_e=T(()=>{Rr();to();r_e=function(){function t(){}return t.getConfig=function(e,r,n,i){i===void 0&&(i=!1);var o;return n&&e[GI]&&e[GI][n]&&!_e(e[GI][n][r])?o=e[GI][n][r]:o=e[r],_e(o)?i:o},t}()});function wh(t){var e="ai."+t+".";return function(r){return e+r}}var QI,ro,GL,l1,Uz,Ih,Wv,XI,d1,Bz=T(()=>{va();Rr();QI=wh("application"),ro=wh("device"),GL=wh("location"),l1=wh("operation"),Uz=wh("session"),Ih=wh("user"),Wv=wh("cloud"),XI=wh("internal"),d1=function(t){ga(e,t);function e(){return t.call(this)||this}return e}(XG({applicationVersion:QI("ver"),applicationBuild:QI("build"),applicationTypeId:QI("typeId"),applicationId:QI("applicationId"),applicationLayer:QI("layer"),deviceId:ro("id"),deviceIp:ro("ip"),deviceLanguage:ro("language"),deviceLocale:ro("locale"),deviceModel:ro("model"),deviceFriendlyName:ro("friendlyName"),deviceNetwork:ro("network"),deviceNetworkName:ro("networkName"),deviceOEMName:ro("oemName"),deviceOS:ro("os"),deviceOSVersion:ro("osVersion"),deviceRoleInstance:ro("roleInstance"),deviceRoleName:ro("roleName"),deviceScreenResolution:ro("screenResolution"),deviceType:ro("type"),deviceMachineName:ro("machineName"),deviceVMName:ro("vmName"),deviceBrowser:ro("browser"),deviceBrowserVersion:ro("browserVersion"),locationIp:GL("ip"),locationCountry:GL("country"),locationProvince:GL("province"),locationCity:GL("city"),operationId:l1("id"),operationName:l1("name"),operationParentId:l1("parentId"),operationRootId:l1("rootId"),operationSyntheticSource:l1("syntheticSource"),operationCorrelationVector:l1("correlationVector"),sessionId:Uz("id"),sessionIsFirst:Uz("isFirst"),sessionIsNew:Uz("isNew"),userAccountAcquisitionDate:Ih("accountAcquisitionDate"),userAccountId:Ih("accountId"),userAgent:Ih("userAgent"),userId:Ih("id"),userStoreRegion:Ih("storeRegion"),userAuthUserId:Ih("authUserId"),userAnonymousUserAcquisitionDate:Ih("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Ih("authUserAcquisitionDate"),cloudName:Wv("name"),cloudRole:Wv("role"),cloudRoleVer:Wv("roleVer"),cloudRoleInstance:Wv("roleInstance"),cloudEnvironment:Wv("environment"),cloudLocation:Wv("location"),cloudDeploymentUnit:Wv("deploymentUnit"),internalNodeName:XI("nodeName"),internalSdkVersion:XI("sdkVersion"),internalAgentVersion:XI("agentVersion"),internalSnippet:XI("snippet"),internalSdkSrc:XI("sdkSrc")}))});function qz(t,e,r,n,i,o){var s;r=jr(n,r)||eo,(_e(t)||_e(e)||_e(r))&&Hn("Input doesn't contain all required fields");var a="";t[_L]&&(a=t[_L],delete t[_L]);var c=(s={},s[Di]=r,s.time=Qa(new Date),s.iKey=a,s.ext=o||{},s.tags=[],s.data={},s.baseType=e,s.baseData=t,s);return _e(i)||He(i,function(u,l){c.data[u]=l}),c}var i_e,o_e=T(()=>{Rr();qc();jc();to();i_e=function(){function t(){}return t.create=qz,t}()});var s_e,Ni,a_e=T(()=>{Bz();s_e={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Ni=new d1});function c_e(t){var e=null;if(at(Event))e=new Event(t);else{var r=jn();r&&r.createEvent&&(e=r.createEvent("Event"),e.initEvent(t,!0,!0))}return e}var u_e=T(()=>{Rr()});function l_e(t,e){zp(t,null,null,e)}function VL(t){var e=jn(),r=Ri(),n=!1,i=[],o=1;r&&!_e(r.onLine)&&!r.onLine&&(o=2);var s=0,a=p(),c=Ja(Ho("OfflineListener"),t);try{if(l(Gn())&&(n=!0),e){var u=e.body||e;u.ononline&&l(u)&&(n=!0)}}catch{n=!1}function l(y){var E=!1;return y&&(E=Wl(y,"online",h,c),E&&Wl(y,"offline",g,c)),E}function d(){return a}function p(){return!(s===2||o===2)}function f(){var y=p();a!==y&&(a=y,he(i,function(E){var x={isOnline:a,rState:o,uState:s};try{E(x)}catch{}}))}function m(y){s=y,f()}function h(){o=1,f()}function g(){o=2,f()}function v(){var y=Gn();if(y&&n){if(l_e(y,c),e){var E=e.body||e;_t(E.ononline)||l_e(E,c)}n=!1}}function b(y){return i[Qp](y),{rm:function(){var E=i.indexOf(y);if(E>-1)return i.splice(E,1)}}}return{isOnline:d,isListening:function(){return n},unload:v,addListener:b,setOnlineState:m}}var d_e=T(()=>{Rr();to()});var p_e={};$r(p_e,{AnalyticsPluginIdentifier:()=>CVe,BreezeChannelIdentifier:()=>Hz,ConfigurationManager:()=>r_e,ConnectionStringParser:()=>Nbe,ContextTagKeys:()=>d1,CtxTagKeys:()=>Ni,DEFAULT_BREEZE_ENDPOINT:()=>mh,DEFAULT_BREEZE_PATH:()=>td,Data:()=>sd,DisabledPropertyName:()=>ube,DistributedTracingModes:()=>Sbe,Envelope:()=>BL,Event:()=>id,EventPersistence:()=>Tbe,Exception:()=>xh,Extensions:()=>s_e,HttpMethod:()=>jI,Metric:()=>od,PageView:()=>Eh,PageViewPerformance:()=>Ch,ProcessLegacy:()=>r1,PropertiesPluginIdentifier:()=>TVe,RemoteDependencyData:()=>Sh,RequestHeaders:()=>Mv,SampleRate:()=>t1,SeverityLevel:()=>jL,TelemetryItemCreator:()=>i_e,ThrottleMgr:()=>kbe,Trace:()=>Th,correlationIdCanIncludeCorrelationHeader:()=>vbe,correlationIdGetCorrelationContext:()=>ybe,correlationIdGetCorrelationContextValue:()=>wz,correlationIdGetPrefix:()=>gbe,correlationIdSetPrefix:()=>hbe,createDistributedTraceContextFromTrace:()=>Ebe,createDomEvent:()=>c_e,createOfflineListener:()=>VL,createTelemetryItem:()=>qz,createTraceParent:()=>yI,dataSanitizeException:()=>PL,dataSanitizeId:()=>kL,dataSanitizeInput:()=>DL,dataSanitizeKey:()=>Ez,dataSanitizeKeyAndAddUniqueness:()=>AL,dataSanitizeMeasurements:()=>_s,dataSanitizeMessage:()=>o1,dataSanitizeProperties:()=>bs,dataSanitizeString:()=>jr,dataSanitizeUrl:()=>yh,dateTimeUtilsDuration:()=>xbe,dateTimeUtilsNow:()=>_be,dsPadNumber:()=>Sz,findW3cTraceParent:()=>xI,formatTraceParent:()=>_I,getExtensionByName:()=>Ybe,isBeaconApiSupported:()=>Ta,isCrossOriginError:()=>Kbe,isInternalApplicationInsightsEndpoint:()=>WI,isSampledFlag:()=>bI,isValidSpanId:()=>zl,isValidTraceId:()=>Vl,isValidTraceParent:()=>Ux,msToTimeSpan:()=>u1,parseConnectionString:()=>YI,parseTraceParent:()=>Ev,strNotSpecified:()=>eo,stringToBoolOrDefault:()=>Wbe,urlGetAbsoluteUrl:()=>pbe,urlGetCompleteUrl:()=>mbe,urlGetPathName:()=>fbe,urlParseFullHost:()=>$I,urlParseHost:()=>Tz,urlParseUrl:()=>Vv,utlCanUseLocalStorage:()=>a1,utlCanUseSessionStorage:()=>zv,utlDisableStorage:()=>Ibe,utlEnableStorage:()=>wbe,utlGetLocalStorage:()=>OL,utlGetSessionStorage:()=>FL,utlGetSessionStorageKeys:()=>Abe,utlRemoveSessionStorage:()=>Pbe,utlRemoveStorage:()=>Rbe,utlSetLocalStorage:()=>ML,utlSetSessionStorage:()=>UL,utlSetStoragePrefix:()=>LL});var TVe,Hz,CVe,Xp=T(()=>{Rz();Dbe();Lbe();vz();qc();Obe();Mbe();Gbe();$be();Qbe();Xbe();Jbe();Zbe();e_e();t_e();n_e();Bz();jc();o_e();a_e();Az();HL();Rr();u_e();Dz();Cz();d_e();TVe="AppInsightsPropertiesPlugin",Hz="AppInsightsChannelPlugin",CVe="ApplicationInsightsAnalytics"});var Rh,f_e=T(()=>{Rh="duration"});var Li,zL,Go,ad,Yv,Lt,Ah,Ph,Gc,kh,Jp,p1,Zp,ef,$L,tf,JI,Dh,ZI,f1,Kv,ew,WL,rf,m1,h1,Vo,YL,g1,KL,jz,QL,XL,Gz,JL,Vz,nf,zz,$z,Wz,Yz,tw,Kz,Qz,Xz,v1,Nh,ZL,rw,e3,m_e,t3,r3,y1,Jz,n3,h_e,Lh=T(()=>{Li="tags",zL="deviceType",Go="data",ad="name",Yv="traceID",Lt="length",Ah="stringify",Ph="measurements",Gc="dataType",kh="envelopeType",Jp="toString",p1="_get",Zp="enqueue",ef="count",$L="eventsLimitInMem",tf="push",JI="emitLineDelimitedJson",Dh="clear",ZI="createNew",f1="markAsSent",Kv="clearSent",ew="bufferOverride",WL="BUFFER_KEY",rf="SENT_BUFFER_KEY",m1="MAX_BUFFER_SIZE",h1="triggerSend",Vo="diagLog",YL="initialize",g1="_sender",KL="customHeaders",jz="maxBatchSizeInBytes",QL="onunloadDisableBeacon",XL="isBeaconApiDisabled",Gz="alwaysUseXhrOverride",JL="disableXhr",Vz="enableSessionStorageBuffer",nf="_buffer",zz="onunloadDisableFetch",$z="disableSendBeaconSplit",Wz="instrumentationKey",Yz="enableSendPromise",tw="getSenderInst",Kz="unloadTransports",Qz="convertUndefined",Xz="maxBatchInterval",v1="serialize",Nh="_onError",ZL="_onPartialSuccess",rw="_onSuccess",e3="itemsAccepted",m_e="itemsReceived",t3="oriPayload",r3="baseType",y1="sampleRate",Jz="eventsSendRequest",n3="getSamplingScore",h_e="getHashCodeScore"});function Oi(t,e,r){return Mc(t,e,r,Rc)}function IVe(t,e,r){var n=r[Li]=r[Li]||{},i=e.ext=e.ext||{},o=e[Li]=e[Li]||[],s=i.user;s&&(Oi(n,Ni.userAuthUserId,s.authId),Oi(n,Ni.userId,s.id||s.localId));var a=i.app;a&&Oi(n,Ni.sessionId,a.sesId);var c=i.device;c&&(Oi(n,Ni.deviceId,c.id||c.localId),Oi(n,Ni[zL],c.deviceClass),Oi(n,Ni.deviceIp,c.ip),Oi(n,Ni.deviceModel,c.model),Oi(n,Ni[zL],c[zL]));var u=e.ext.web;if(u){Oi(n,Ni.deviceLanguage,u.browserLang),Oi(n,Ni.deviceBrowserVersion,u.browserVer),Oi(n,Ni.deviceBrowser,u.browser);var l=r[Go]=r[Go]||{},d=l[Pn]=l[Pn]||{},p=d[mo]=d[mo]||{};Oi(p,"domain",u.domain),Oi(p,"isManual",u.isManual?g_e:null),Oi(p,"screenRes",u.screenRes),Oi(p,"userConsent",u.userConsent?g_e:null)}var f=i.os;f&&Oi(n,Ni.deviceOS,f[ad]);var m=i.trace;m&&(Oi(n,Ni.operationParentId,m.parentID),Oi(n,Ni.operationName,jr(t,m[ad])),Oi(n,Ni.operationId,m[Yv]));for(var h={},g=o[Lt]-1;g>=0;g--){var v=o[g];He(v,function(y,E){h[y]=E}),o.splice(g,1)}He(o,function(y,E){h[y]=E});var b=Nc(Nc({},n),h);b[Ni.internalSdkVersion]||(b[Ni.internalSdkVersion]=jr(t,"javascript:".concat(wVe.Version),64)),r[Li]=Fc(b)}function Oh(t,e,r){_e(t)||He(t,function(n,i){ps(i)?r[n]=i:Ct(i)?e[n]=i:Bl()&&(e[n]=qo()[Ah](i))})}function Qv(t,e){_e(t)||He(t,function(r,n){t[r]=n||e})}function Xv(t,e,r,n){var i=new BL(t,n,e);Oi(i,"sampleRate",r[t1]),(r[Pn]||{}).startTime&&(i.time=Qa(r[Pn].startTime)),i.iKey=r.iKey;var o=r.iKey.replace(/-/g,"");return i[ad]=i[ad].replace("{0}",o),IVe(t,r,i),r[Li]=r[Li]||[],Fc(i)}function Jv(t,e){_e(e[Pn])&&Pe(t,1,46,"telemetryItem.baseData cannot be null.")}function v_e(t,e,r){Jv(t,e);var n=e[Pn][Ph]||{},i=e[Pn][mo]||{};Oh(e[Go],i,n),_e(r)||Qv(i,r);var o=e[Pn];if(_e(o))return qs(t,"Invalid input for dependency data"),null;var s=o[mo]&&o[mo][jI]?o[mo][jI]:"GET",a=new Sh(t,o.id,o.target,o[ad],o[Rh],o.success,o.responseCode,s,o.type,o.correlationContext,i,n),c=new sd(Sh[Gc],a);return Xv(t,Sh[kh],e,c)}function e$(t,e,r){Jv(t,e);var n={},i={};e[Zz]!==id[Gc]&&(n.baseTypeSource=e[Zz]),e[Zz]===id[Gc]?(n=e[Pn][mo]||{},i=e[Pn][Ph]||{}):e[Pn]&&Oh(e[Pn],n,i),Oh(e[Go],n,i),_e(r)||Qv(n,r);var o=e[Pn][ad],s=new id(t,o,n,i),a=new sd(id[Gc],s);return Xv(t,id[kh],e,a)}function y_e(t,e,r){Jv(t,e);var n=e[Pn][Ph]||{},i=e[Pn][mo]||{};Oh(e[Go],i,n),_e(r)||Qv(i,r);var o=e[Pn],s=xh.CreateFromInterface(t,o,i,n),a=new sd(xh[Gc],s);return Xv(t,xh[kh],e,a)}function b_e(t,e,r){Jv(t,e);var n=e[Pn],i=n[mo]||{},o=n[Ph]||{};Oh(e[Go],i,o),_e(r)||Qv(i,r);var s=new od(t,n[ad],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),a=new sd(od[Gc],s);return Xv(t,od[kh],e,a)}function __e(t,e,r){Jv(t,e);var n,i=e[Pn];!_e(i)&&!_e(i[mo])&&!_e(i[mo][Rh])?(n=i[mo][Rh],delete i[mo][Rh]):!_e(e[Go])&&!_e(e[Go][Rh])&&(n=e[Go][Rh],delete e[Go][Rh]);var o=e[Pn],s;((e.ext||{}).trace||{})[Yv]&&(s=e.ext.trace[Yv]);var a=o.id||s,c=o[ad],u=o.uri,l=o[mo]||{},d=o[Ph]||{};if(_e(o.refUri)||(l.refUri=o.refUri),_e(o.pageType)||(l.pageType=o.pageType),_e(o.isLoggedIn)||(l.isLoggedIn=o.isLoggedIn[Jp]()),!_e(o[mo])){var p=o[mo];He(p,function(h,g){l[h]=g})}Oh(e[Go],l,d),_e(r)||Qv(l,r);var f=new Eh(t,c,u,n,l,d,a),m=new sd(Eh[Gc],f);return Xv(t,Eh[kh],e,m)}function x_e(t,e,r){Jv(t,e);var n=e[Pn],i=n[ad],o=n.uri||n.url,s=n[mo]||{},a=n[Ph]||{};Oh(e[Go],s,a),_e(r)||Qv(s,r);var c=new Ch(t,i,o,void 0,s,a,n),u=new sd(Ch[Gc],c);return Xv(t,Ch[kh],e,u)}function E_e(t,e,r){Jv(t,e);var n=e[Pn].message,i=e[Pn].severityLevel,o=e[Pn][mo]||{},s=e[Pn][Ph]||{};Oh(e[Go],o,s),_e(r)||Qv(o,r);var a=new Th(t,n,i,o,s),c=new sd(Th[Gc],a);return Xv(t,Th[kh],e,c)}var Zz,Pn,mo,g_e,wVe,S_e=T(()=>{va();Xp();Rr();f_e();Lh();Zz="baseType",Pn="baseData",mo="properties",g_e="true";wVe={Version:"3.1.1"}});var T_e,i3,t$,C_e=T(()=>{va();lo();Xp();Rr();Lh();T_e=function(){function t(e,r){var n=[],i=!1;this[p1]=function(){return n},this._set=function(o){return n=o,n},Gt(t,this,function(o){o[Zp]=function(s){if(o[ef]()>=r[$L]){i||(Pe(e,2,105,"Maximum in-memory buffer size reached: "+o[ef](),!0),i=!0);return}n[tf](s)},o[ef]=function(){return n[Lt]},o.size=function(){for(var s=n[Lt],a=0;a<n[Lt];a++)s+=n[a][Lt];return r[JI]||(s+=2),s},o[Dh]=function(){n=[],i=!1},o.getItems=function(){return n.slice(0)},o.batchPayloads=function(s){if(s&&s[Lt]>0){var a=r[JI]?s.join(`
`):"["+s.join(",")+"]";return a}return null},o[ZI]=function(s,a,c){var u=n.slice(0);s=s||e,a=a||{};var l=c?new t$(s,a):new i3(s,a);return he(u,function(d){l[Zp](d)}),l}})}return t.__ieDyn=1,t}(),i3=function(t){ga(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Gt(e,i,function(o,s){o[f1]=function(a){s[Dh]()},o[Kv]=function(a){}}),i}return e.__ieDyn=1,e}(T_e),t$=function(t){ga(e,t);function e(r,n){var i=t.call(this,r,n)||this,o=!1,s=n?.namePrefix,a=n[ew]||{getItem:FL,setItem:UL},c=a.getItem,u=a.setItem;return Gt(e,i,function(l,d){var p=g(e[WL]),f=g(e[rf]),m=l._set(p.concat(f));m[Lt]>e[m1]&&(m[Lt]=e[m1]),v(e[rf],[]),v(e[WL],m),l[Zp]=function(b){if(l[ef]()>=e[m1]){o||(Pe(r,2,67,"Maximum buffer size reached: "+l[ef](),!0),o=!0);return}d[Zp](b),v(e.BUFFER_KEY,l[p1]())},l[Dh]=function(){d[Dh](),v(e.BUFFER_KEY,l[p1]()),v(e[rf],[]),o=!1},l[f1]=function(b){v(e[WL],l._set(h(b,l[p1]())));var y=g(e[rf]);y instanceof Array&&b instanceof Array&&(y=y.concat(b),y[Lt]>e[m1]&&(Pe(r,1,67,"Sent buffer reached its maximum size: "+y[Lt],!0),y[Lt]=e[m1]),v(e[rf],y))},l[Kv]=function(b){var y=g(e[rf]);y=h(b,y),v(e[rf],y)},l[ZI]=function(b,y,E){E=!!E;var x=l[p1]().slice(0),R=g(e[rf]).slice(0);b=b||r,y=y||{},l[Dh]();var L=E?new e(b,y):new i3(b,y);return he(x,function(O){L[Zp](O)}),E&&L[f1](R),L};function h(b,y){var E=[];return he(y,function(x){!at(x)&&lr(b,x)===-1&&E[tf](x)}),E}function g(b){var y=b;try{y=s?s+"_"+y:y;var E=c(r,y);if(E){var x=qo().parse(E);if(Ct(x)&&(x=qo().parse(x)),x&&We(x))return x}}catch(R){Pe(r,1,42," storage key: "+y+", "+an(R),{exception:Fe(R)})}return[]}function v(b,y){var E=b;try{E=s?s+"_"+E:E;var x=JSON[Ah](y);u(r,E,x)}catch(R){u(r,E,JSON[Ah]([])),Pe(r,2,41," storage key: "+E+", "+an(R)+". Buffer cleared",{exception:Fe(R)})}}}),i}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(T_e)});var I_e,w_e=T(()=>{lo();Rr();Lh();I_e=function(){function t(e){Gt(t,this,function(r){r[v1]=function(s){var a=n(s,"root");try{return qo()[Ah](a)}catch(c){Pe(e,1,48,c&&at(c[Jp])?c[Jp]():"Error serializing object",null,!0)}};function n(s,a){var c="__aiCircularRefCheck",u={};if(!s)return Pe(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),u;if(s[c])return Pe(e,2,50,"Circular reference detected while serializing object",{name:a},!0),u;if(!s.aiDataContract){if(a==="measurements")u=o(s,"number",a);else if(a==="properties")u=o(s,"string",a);else if(a==="tags")u=o(s,"string",a);else if(We(s))u=i(s,a);else{Pe(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{qo()[Ah](s),u=s}catch(l){Pe(e,1,48,l&&at(l[Jp])?l[Jp]():"Error serializing object",null,!0)}}return u}return s[c]=!0,He(s.aiDataContract,function(l,d){var p=at(d)?d()&1:d&1,f=at(d)?d()&4:d&4,m=d&2,h=s[l]!==void 0,g=sn(s[l])&&s[l]!==null;if(p&&!h&&!m)Pe(e,1,24,"Missing required field specification. The field is required but not present on source",{field:l,name:a});else if(!f){var v=void 0;g?m?v=i(s[l],l):v=n(s[l],l):v=s[l],v!==void 0&&(u[l]=v)}}),delete s[c],u}function i(s,a){var c;if(s)if(!We(s))Pe(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var u=0;u<s[Lt];u++){var l=s[u],d=n(l,a+"["+u+"]");c[tf](d)}}return c}function o(s,a,c){var u;return s&&(u={},He(s,function(l,d){if(a==="string")d===void 0?u[l]="undefined":d===null?u[l]="null":d[Jp]?u[l]=d[Jp]():u[l]="invalid field: toString() is not defined.";else if(a==="number")if(d===void 0)u[l]="undefined";else if(d===null)u[l]="null";else{var p=parseFloat(d);u[l]=p}else u[l]="invalid field: "+c+" is of unknown type.",Pe(e,1,u[l],null,!0)})),u}})}return t.__ieDyn=1,t}()});var RVe,R_e,A_e=T(()=>{Lh();RVe=8,R_e=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var r=this.getHashCode(e)/t.INT_MAX_VALUE;return r*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[Lt]<RVe;)e=e.concat(e);for(var r=5381,n=0;n<e[Lt];++n)r=(r<<5)+r+e.charCodeAt(n),r=r&r;return Math.abs(r)},t.INT_MAX_VALUE=2147483647,t}()});var P_e,k_e=T(()=>{Xp();Lh();A_e();P_e=function(){function t(){var e=this,r=new R_e,n=new d1;e[n3]=function(i){var o=0;return i[Li]&&i[Li][n.userId]?o=r.getHashCodeScore(i[Li][n.userId]):i.ext&&i.ext.user&&i.ext.user.id?o=r[h_e](i.ext.user.id):i[Li]&&i[Li][n.operationId]?o=r.getHashCodeScore(i[Li][n.operationId]):i.ext&&i.ext.telemetryTrace&&i.ext.telemetryTrace[Yv]?o=r.getHashCodeScore(i.ext.telemetryTrace[Yv]):o=Math.random()*100,o}}return t}()});var D_e,N_e=T(()=>{Xp();Rr();Lh();k_e();D_e=function(){function t(e,r){this.INT_MAX_VALUE=2147483647;var n=r||Mu(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[y1]=e,this.samplingScoreGenerator=new P_e}return t.prototype.isSampledIn=function(e){var r=this[y1],n=!1;return r==null||r>=100||e.baseType===od[Gc]?!0:(n=this.samplingScoreGenerator[n3](e)<r,n)},t}()});function O_e(t){try{return t.responseText}catch{}return null}function PVe(t){return t&&t.sendPOST}function kVe(t){return!isNaN(t)&&t>0&&t<=100}var kn,of,cd,L_e,AVe,M_e,DVe,nw,F_e=T(()=>{va();lo();Xp();Rr();lt();S_e();C_e();w_e();N_e();Lh();cd=void 0,L_e="",AVe=65e3;M_e=Fs((kn={endpointUrl:Ox(Rc,mh+td)},kn[JI]=Uc(),kn[Xz]=15e3,kn[jz]=102400,kn.disableTelemetry=Uc(),kn[Vz]=Uc(!0),kn.isRetryDisabled=Uc(),kn[XL]=Uc(!0),kn[$z]=Uc(!0),kn[JL]=Uc(),kn[zz]=Uc(),kn[QL]=Uc(),kn[Wz]=cd,kn.namePrefix=cd,kn.samplingPercentage=Ox(kVe,100),kn[KL]=cd,kn[Qz]=cd,kn[$L]=1e4,kn[ew]=!1,kn.httpXHROverride={isVal:PVe,v:cd},kn[Gz]=Uc(),kn.transports=cd,kn.retryCodes=cd,kn));DVe=(of={},of[id.dataType]=e$,of[Th.dataType]=E_e,of[Eh.dataType]=__e,of[Ch.dataType]=x_e,of[xh.dataType]=y_e,of[od.dataType]=b_e,of[Sh.dataType]=v_e,of),nw=function(t){ga(e,t);function e(){var r=t.call(this)||this;r.priority=1001,r.identifier=Hz;var n,i,o,s,a,c,u,l,d=0,p,f,m,h,g,v,b,y,E,x,R,L,O,z,N,ce,J,D,S,P,F,M,V,de,te,oe,je;return Gt(e,r,function(Q,ct){nt(),Q.pause=function(){Js(),s=!0},Q.resume=function(){s&&(s=!1,i=null,Yn(),Zu())},Q.flush=function(H,Z,ue){if(H===void 0&&(H=!0),!s){Js();try{return Q[h1](H,null,ue||1)}catch(be){Pe(Q[Vo](),1,22,"flush failed, telemetry will not be collected: "+an(be),{exception:Fe(be)})}}},Q.onunloadFlush=function(){if(!s)if(b||P)try{return Q[h1](!0,Fy,2)}catch(H){Pe(Q[Vo](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+an(H),{exception:Fe(H)})}else Q.flush(!1)},Q.addHeader=function(H,Z){l[H]=Z},Q[YL]=function(H,Z,ue,be){Q.isInitialized()&&Pe(Q[Vo](),1,28,"Sender is already initialized"),ct[YL](H,Z,ue,be);var q=Q.identifier;c=new I_e(Z.logger),n=0,i=null,o=0,Q[g1]=null,u=0;var W=Q[Vo]();m=Ja(Ho("Sender"),Z.evtNamespace&&Z.evtNamespace()),f=VL(m),Q._addHook(ki(H,function(ie){var xe=ie.cfg;xe.storagePrefix&&LL(xe.storagePrefix);var Ve=Hs(null,xe,Z),Ae=Ve.getExtCfg(q,M_e);Sr(Q,"_senderConfig",{g:function(){return Ae}}),g!==Ae.endpointUrl&&(h=g=Ae.endpointUrl),x&&x!==Ae[KL]&&he(x,function(Io){delete l[Io.header]}),v=Ae[jz],b=(Ae[QL]===!1||Ae[XL]===!1)&&Ta(),y=Ae[QL]===!1&&Ta(),E=Ae[XL]===!1&&Ta(),P=Ae[Gz],F=!!Ae[JL],je=Ae.retryCodes;var er=Ae[ew],ur=!!Ae[Vz]&&(!!er||zv()),Si=Ae.namePrefix,Da=ur!==ce||ur&&D!==Si||ur&&J!==er;if(Q[nf]){if(Da)try{Q._buffer=Q._buffer[ZI](W,Ae,ur)}catch(Io){Pe(Q[Vo](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+an(Io),{exception:Fe(Io)})}Yn()}else Q[nf]=ur?new t$(W,Ae):new i3(W,Ae);D=Si,ce=ur,J=er,M=!Ae[zz]&&Np(!0),te=!!Ae[$z],Q._sample=new D_e(Ae.samplingPercentage,W),L=Ae[Wz],Oe(L,xe)||Pe(W,1,100,"Invalid Instrumentation key "+L),x=Ae[KL],!WI(h)&&x&&x[Lt]>0?he(x,function(Io){r.addHeader(Io.header,Io.value)}):x=null,S=Ae[Yz];var Rf=yt();oe?oe.SetConfig(Rf):(oe=new Tv,oe[YL](Rf,W));var Cs=Ae.httpXHROverride,Af=null,Gg=null,hRe=Mp([3,1,2],Ae.transports);Af=oe&&oe[tw](hRe,!1);var lM=oe&&oe.getFallbackInst();V=function(Io,Vg){return ht(lM,Io,Vg)},de=function(Io,Vg){return ht(lM,Io,Vg,!1)},Af=P?Cs:Af||Cs||lM,Q[g1]=function(Io,Vg){return ht(Af,Io,Vg)},M&&(p=Uy);var dM=Mp([3,1],Ae[Kz]);M||(dM=dM.filter(function(Io){return Io!==2})),Gg=oe&&oe[tw](dM,!0),Gg=P?Cs:Gg||Cs,(P||Ae[Kz]||!p)&&Gg&&(p=function(Io,Vg){return ht(Gg,Io,Vg)}),p||(p=V),R=Ae.disableTelemetry,O=Ae[Qz]||cd,z=Ae.isRetryDisabled,N=Ae[Xz]}))},Q.processTelemetry=function(H,Z){Z=Q._getTelCtx(Z);var ue=Z[Vo]();try{var be=Qe(H,ue);if(!be)return;var q=U(H,ue);if(!q)return;var W=c[v1](q),ie=Q[nf];Yn(W),ie[Zp](W),Zu()}catch(xe){Pe(ue,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+an(xe),{exception:Fe(xe)})}Q.processNext(H,Z)},Q.isCompletelyIdle=function(){return!s&&d===0&&Q._buffer[ef]()===0},Q._xhrReadyStateChange=function(H,Z,ue){return or(H,Z,ue)},Q[h1]=function(H,Z,ue){H===void 0&&(H=!0);var be;if(!s)try{var q=Q[nf];if(R)q[Dh]();else{if(q[ef]()>0){var W=q.getItems();Ce(ue||0,H),Z?be=Z.call(Q,W,H):be=Q[g1](W,H)}o=+new Date}Js()}catch(xe){var ie=eI();(!ie||ie>9)&&Pe(Q[Vo](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+an(xe),{exception:Fe(xe)})}return be},Q.getOfflineSupport=function(){var H;return H={getUrl:function(){return h},createPayload:Te},H[v1]=ne,H.batch=se,H.shouldProcess=function(Z){return!!Qe(Z)},H},Q._doTeardown=function(H,Z){Q.onunloadFlush(),Bp(f,!1),nt()},Q[Nh]=function(H,Z,ue){Pe(Q[Vo](),2,26,"Failed to send telemetry.",{message:Z}),Q._buffer&&Q._buffer[Kv](H)},Q[ZL]=function(H,Z){for(var ue=[],be=[],q=Z.errors.reverse(),W=0,ie=q;W<ie.length;W++){var xe=ie[W],Ve=H.splice(xe.index,1)[0];wf(xe.statusCode)?be[tf](Ve):ue[tf](Ve)}H[Lt]>0&&Q[rw](H,Z[e3]),ue[Lt]>0&&Q[Nh](ue,Op(null,["partial success",Z[e3],"of",Z.itemsReceived].join(" "))),be[Lt]>0&&(Bd(be),Pe(Q[Vo](),2,40,"Partial success. Delivered: "+H[Lt]+", Failed: "+ue[Lt]+". Will retry to send "+be[Lt]+" our of "+Z[m_e]+" items"))},Q[rw]=function(H,Z){Q._buffer&&Q._buffer[Kv](H)},Q._xdrOnLoad=function(H,Z){return Be(H,Z)};function Be(H,Z){var ue=O_e(H);if(H&&(ue+""=="200"||ue===""))n=0,Q[rw](Z,0);else{var be=yv(ue);be&&be.itemsReceived&&be.itemsReceived>be[e3]&&!z?Q[ZL](Z,be):Q[Nh](Z,vv(H))}}function yt(){var H;try{var Z={xdrOnComplete:function(be,q,W){var ie=me(W);if(ie)return Be(be,ie)},fetchOnComplete:function(be,q,W,ie){var xe=me(ie);if(xe)return Ts(be.status,xe,be.url,xe[Lt],be.statusText,W||"")},xhrOnComplete:function(be,q,W){var ie=me(W);if(ie)return or(be,ie,ie[Lt])},beaconOnRetry:function(be,q,W){return jg(be,q,W)}},ue=(H={},H[Yz]=S,H.isOneDs=!1,H.disableCredentials=!1,H[JL]=F,H.disableBeacon=!E,H.disableBeaconSync=!y,H.senderOnCompleteCallBack=Z,H);return ue}catch{}return null}function or(H,Z,ue){H.readyState===4&&Ts(H.status,Z,H.responseURL,ue,Op(H),O_e(H)||H.response)}function me(H){try{if(H){var Z=H,ue=Z[t3];return ue&&ue[Lt]?ue:null}}catch{}return null}function Qe(H,Z){if(R)return!1;if(!H)return Z&&Pe(Z,1,7,"Cannot send empty telemetry"),!1;if(H.baseData&&!H[r3])return Z&&Pe(Z,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(H[r3]||(H[r3]="EventData"),!Q[g1])return Z&&Pe(Z,1,28,"Sender was not initialized"),!1;if(ye(H))H[t1]=Q._sample[y1];else return Z&&Pe(Z,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Q._sample[y1]}),!1;return!0}function U(H,Z){var ue=H.iKey||L,be=e.constructEnvelope(H,ue,Z,O);if(!be){Pe(Z,1,47,"Unable to create an AppInsights envelope");return}var q=!1;if(H[Li]&&H[Li][r1]&&(he(H[Li][r1],function(W){try{W&&W(be)===!1&&(q=!0,qs(Z,"Telemetry processor check returns false"))}catch(ie){Pe(Z,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+an(ie),{exception:Fe(ie)},!0)}}),delete H[Li][r1]),!q)return be}function ne(H){var Z=L_e,ue=Q[Vo]();try{var be=Qe(H,ue),q=null;be&&(q=U(H,ue)),q&&(Z=c[v1](q))}catch{}return Z}function se(H){var Z=L_e;return H&&H[Lt]&&(Z="["+H.join(",")+"]"),Z}function Te(H){var Z,ue=pn();return Z={urlString:h},Z[Go]=H,Z.headers=ue,Z}function ye(H){return Q._sample.isSampledIn(H)}function Xe(H,Z,ue,be){Z===200&&H?Q._onSuccess(H,H[Lt]):be&&Q[Nh](H,be)}function ht(H,Z,ue,be){be===void 0&&(be=!0);var q=function(xe,Ve,Ae){return Xe(Z,xe,Ve,Ae)},W=Or(Z),ie=H&&H.sendPOST;return ie&&W?(be&&Q._buffer[f1](Z),ie(W,q,!ue)):null}function Or(H){var Z;if(We(H)&&H[Lt]>0){var ue=Q[nf].batchPayloads(H),be=pn(),q=(Z={},Z[Go]=ue,Z.urlString=h,Z.headers=be,Z.disableXhrSync=F,Z.disableFetchKeepAlive=!M,Z[t3]=H,Z);return q}return null}function pn(){try{var H=l||{};return WI(h)&&(H[Mv[6]]=Mv[7]),H}catch{}return null}function Yn(H){var Z=H?H[Lt]:0;return Q[nf].size()+Z>v?((!f||f.isOnline())&&Q[h1](!0,null,10),!0):!1}function Ts(H,Z,ue,be,q,W){var ie=null;if(Q._appId||(ie=yv(W),ie&&ie.appId&&(Q._appId=ie.appId)),(H<200||H>=300)&&H!==0){if((H===301||H===307||H===308)&&!Ud(ue)){Q[Nh](Z,q);return}!z&&wf(H)?(Bd(Z),Pe(Q[Vo](),2,40,". Response code "+H+". Will retry to send "+Z[Lt]+" items.")):Q[Nh](Z,q)}else if(f&&!f.isOnline()){if(!z){var xe=10;Bd(Z,xe),Pe(Q[Vo](),2,40,". Offline - Response Code: ".concat(H,". Offline status: ").concat(!f.isOnline(),". Will retry to send ").concat(Z.length," items."))}}else Ud(ue),H===206?(ie||(ie=yv(W)),ie&&!z?Q[ZL](Z,ie):Q[Nh](Z,q)):(n=0,Q[rw](Z,be))}function Ud(H){return u>=10?!1:!_e(H)&&H!==""&&H!==h?(h=H,++u,!0):!1}function Fy(H,Z){if(p)p(H,!1);else{var ue=oe&&oe[tw]([3],!0);return ht(ue,H,Z)}}function jg(H,Z,ue){var be=H,q=be&&be[t3];if(te)de&&de(q,!0),Pe(Q[Vo](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var W=[],ie=0;ie<q[Lt];ie++){var xe=q[ie],Ve=[xe],Ae=Or(Ve);ue(Ae,Z)?Q._onSuccess(Ve,Ve[Lt]):W[tf](xe)}W[Lt]>0&&(de&&de(W,!0),Pe(Q[Vo](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Uy(H,Z){var ue=null;if(We(H)){for(var be=H[Lt],q=0;q<H[Lt];q++)be+=H[q][Lt];var W=oe.getSyncFetchPayload();W+be<=AVe?ue=2:Ta()?ue=3:(ue=1,Pe(Q[Vo](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ie=oe&&oe[tw]([ue],!0);return ht(ie,H,Z)}return null}function Bd(H,Z){if(Z===void 0&&(Z=1),!(!H||H[Lt]===0)){var ue=Q[nf];ue[Kv](H),n++;for(var be=0,q=H;be<q.length;be++){var W=q[be];ue[Zp](W)}mS(Z),Zu()}}function mS(H){var Z=10,ue;if(n<=1)ue=Z;else{var be=(Math.pow(2,n)-1)/2,q=Math.floor(Math.random()*be*Z)+1;q=H*q,ue=Math.max(Math.min(q,3600),Z)}var W=Vn()+ue*1e3;i=W}function Zu(){if(!a&&!s){var H=i?Math.max(0,i-Vn()):0,Z=Math.max(N,H);a=ha(function(){a=null,Q[h1](!0,null,1)},Z)}}function Js(){a&&a.cancel(),a=null,i=null}function wf(H){return _e(je)?H===401||H===408||H===429||H===500||H===502||H===503||H===504:je[Lt]&&je.indexOf(H)>-1}function $(){var H="getNotifyMgr";return Q.core[H]?Q.core[H]():Q.core._notificationManager}function Ce(H,Z){var ue=$();if(ue&&ue[Jz])try{ue[Jz](H,Z)}catch(be){Pe(Q[Vo](),1,74,"send request notification failed: "+an(be),{exception:Fe(be)})}}function Oe(H,Z){var ue=Z.disableInstrumentationKeyValidation,be=_e(ue)?!1:ue;if(be)return!0;var q="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",W=new RegExp(q);return W.test(H)}function nt(){Q[g1]=null,Q[nf]=null,Q._appId=null,Q._sample=null,l={},f=null,n=0,i=null,o=null,s=!1,a=null,c=null,u=0,d=0,p=null,m=null,h=null,g=null,v=0,b=!1,x=null,R=!1,L=null,O=cd,z=!1,ce=null,D=cd,F=!1,M=!1,te=!1,V=null,de=null,oe=null,Sr(Q,"_senderConfig",{g:function(){return i4({},M_e)}})}}),r}return e.constructEnvelope=function(r,n,i,o){var s;n!==r.iKey&&!_e(n)?s=Nc(Nc({},r),{iKey:n}):s=r;var a=DVe[s.baseType]||e$;return a(i,s,o)},e}(Gp)});var r$=T(()=>{F_e()});var o3,s3,a3,iw,U_e=T(()=>{o3="instrumentationKey",s3="connectionString",a3="endpointUrl",iw="userOverrideEndpointUrl"});var B_e={};$r(B_e,{AppInsightsCore:()=>Vp,ApplicationInsights:()=>OVe,Sender:()=>nw,SeverityLevel:()=>jL,arrForEach:()=>he,isNullOrUndefined:()=>_e,proxyFunctions:()=>Xa,throwError:()=>Hn});function LVe(t){return t&&t>0}var NVe,OVe,q_e=T(()=>{lo();r$();Xp();Rr();lt();U_e();Rr();Xp();r$();NVe={diagnosticLogInterval:Ox(LVe,1e4)};OVe=function(){function t(e){var r=new Vp,n;(_e(e)||_e(e[o3])&&_e(e[s3]))&&Hn("Invalid input configuration"),Gt(t,this,function(o){Sr(o,"config",{g:function(){return n}}),s(),o.initialize=s,o.track=i,Xa(o,r,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"]);function s(){var a=Rn(e||{},NVe);n=a.cfg,r.addUnloadHook(ki(a,function(){if(n[s3]){var c=YI(n[s3]),u=c.ingestionendpoint;n[a3]=n[iw]?n[iw]:u+td,n[o3]=c.instrumentationkey||n[o3]}n[a3]=n[iw]?n[iw]:n[a3]})),r.initialize(n,[new nw])}});function i(o){o&&(o.baseData=o.baseData||{},o.baseType=o.baseType||"EventData"),r.track(o)}}return t.__ieDyn=1,t}()});var H_e=k(ud=>{"use strict";var MVe=ud&&ud.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FVe=ud&&ud.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UVe=ud&&ud.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&MVe(e,t,r);return FVe(e,t),e};Object.defineProperty(ud,"__esModule",{value:!0});ud.appInsightsClientFactory=void 0;var BVe=(Xp(),Ti(p_e)),qVe=mj(),HVe=async(t,e,r)=>{let n;try{let o=await Promise.resolve().then(()=>UVe((q_e(),Ti(B_e)))),s={};if(e){let a={alwaysUseXhrOverride:!0,httpXHROverride:e};s[BVe.BreezeChannelIdentifier]=a}n=new o.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:s})}catch(o){return Promise.reject(o)}return{logEvent:(o,s)=>{let a={...s?.properties,...s?.measurements};r?.length&&qVe.TelemetryUtil.applyReplacements(a,r),n?.track({name:o,data:a,baseType:"EventData",baseData:{name:o,properties:s?.properties,measurements:s?.measurements}})},flush:async()=>{n?.flush(!1)},dispose:async()=>new Promise(s=>{n?.unload(!0,()=>{s(),n=void 0},1e3)})}};ud.appInsightsClientFactory=HVe});var z_e=k(sf=>{"use strict";var jVe=sf&&sf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GVe=sf&&sf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o$=sf&&sf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jVe(e,t,r);return GVe(e,t),e};Object.defineProperty(sf,"__esModule",{value:!0});var n$=o$(require("os")),j_e=o$(require("vscode")),VVe=o$(require("https")),zVe=sge(),$Ve=age(),G_e=mj(),WVe=cbe(),YVe=H_e();function V_e(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=VVe.request(e.urlString,n,o=>{o.on("data",function(s){r(o.statusCode??200,o.headers,s.toString())}),o.on("error",function(){r(0,{})})});i.write(e.data,o=>{o&&r(0,{})}),i.end()}catch{r(0,{})}}}}var i$=class extends zVe.BaseTelemetryReporter{constructor(e,r){let n=s=>(0,YVe.appInsightsClientFactory)(s,V_e(),r);G_e.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=s=>(0,WVe.oneDataSystemClientFactory)(s,j_e,V_e()));let i={release:n$.release(),platform:n$.platform(),architecture:n$.arch()},o=new $Ve.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,j_e,{additionalCommonProperties:G_e.TelemetryUtil.getAdditionalCommonProperties(i)})}};sf.default=i$});var f1e=k(Wh=>{"use strict";var Z$e=Wh&&Wh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(d){s(d)}}function c(l){try{u(n.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(Wh,"__esModule",{value:!0});Wh.isBinaryFileSync=Wh.isBinaryFile=void 0;var $h=require("fs"),yW=require("util"),eWe=yW.promisify($h.stat),tWe=yW.promisify($h.open),rWe=yW.promisify($h.close),pw=512,vW=class{constructor(e,r){this.fileBuffer=e,this.size=r,this.offset=0,this.error=!1}hasError(){return this.error}nextByte(){return this.offset===this.size||this.hasError()?(this.error=!0,255):this.fileBuffer[this.offset++]}next(e){let r=new Array;for(let n=0;n<e;n++)r[n]=this.nextByte();return r}};function gW(t){let e=0,r=0;for(;!t.hasError();){let n=t.nextByte();if(r=r|(n&127)<<7*e,!(n&128))break;e++}return r}function nWe(t){switch(gW(t)&7){case 0:return gW(t),!0;case 1:return t.next(8),!0;case 2:let n=gW(t);return t.next(n),!0;case 5:return t.next(4),!0}return!1}function iWe(t,e){let r=new vW(t,e),n=0;for(;;){if(!nWe(r)&&!r.hasError())return!1;if(r.hasError())break;n++}return n>0}function oWe(t,e){return Z$e(this,void 0,void 0,function*(){if(d1e(t)){let r=yield eWe(t);p1e(r);let n=yield tWe(t,"r"),i=Buffer.alloc(pw);return new Promise((o,s)=>{$h.read(n,i,0,pw,0,(a,c,u)=>{rWe(n),a?s(a):o(O3(i,c))})})}else return e===void 0&&(e=t.length),O3(t,e)})}Wh.isBinaryFile=oWe;function sWe(t,e){if(d1e(t)){let r=$h.statSync(t);p1e(r);let n=$h.openSync(t,"r"),i=Buffer.alloc(pw),o=$h.readSync(n,i,0,pw,0);return $h.closeSync(n),O3(i,o)}else return e===void 0&&(e=t.length),O3(t,e)}Wh.isBinaryFileSync=sWe;function O3(t,e){if(e===0)return!1;let r=0,n=Math.min(e,pw);if(e>=3&&t[0]===239&&t[1]===187&&t[2]===191||e>=4&&t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255||e>=4&&t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0||e>=4&&t[0]===132&&t[1]===49&&t[2]===149&&t[3]===51)return!1;if(n>=5&&t.slice(0,5).toString()==="%PDF-")return!0;if(e>=2&&t[0]===254&&t[1]===255||e>=2&&t[0]===255&&t[1]===254)return!1;for(let i=0;i<n;i++){if(t[i]===0)return!0;if((t[i]<7||t[i]>14)&&(t[i]<32||t[i]>127)){if(t[i]>193&&t[i]<224&&i+1<n){if(i++,t[i]>127&&t[i]<192)continue}else if(t[i]>223&&t[i]<240&&i+2<n&&(i++,t[i]>127&&t[i]<192&&t[i+1]>127&&t[i+1]<192)){i++;continue}if(r++,i>=32&&r*100/n>10)return!0}}return!!(r*100/n>10||r>1&&iWe(t,n))}function d1e(t){return typeof t=="string"}function p1e(t){if(!t.isFile())throw new Error("Path provided was not a file!")}});var y1e=k(F3=>{"use strict";Object.defineProperty(F3,"__esModule",{value:!0});F3.LRUCache=void 0;var fw=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,h1e=new Set,bW=typeof process=="object"&&process?process:{},g1e=(t,e,r,n)=>{typeof bW.emitWarning=="function"?bW.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},M3=globalThis.AbortController,m1e=globalThis.AbortSignal;if(typeof M3>"u"){m1e=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},M3=class{constructor(){e()}signal=new m1e;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=bW.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,g1e("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var aWe=t=>!h1e.has(t),q7t=Symbol("type"),Yh=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),v1e=t=>Yh(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?I1:null:null,I1=class extends Array{constructor(e){super(e),this.fill(0)}},_W=class t{heap;length;static#t=!1;static create(e){let r=v1e(e);if(!r)return[];t.#t=!0;let n=new t(e,r);return t.#t=!1,n}constructor(e,r){if(!t.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},xW=class t{#t;#i;#p;#r;#c;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#m;#a;#n;#e;#d;#h;#l;#u;#v;#f;#S;#T;#b;#_;#I;#g;static unsafeExposeInternals(e){return{starts:e.#T,ttls:e.#b,sizes:e.#S,keyMap:e.#a,keyList:e.#n,valList:e.#e,next:e.#d,prev:e.#h,get head(){return e.#l},get tail(){return e.#u},free:e.#v,isBackgroundFetch:r=>e.#o(r),backgroundFetch:(r,n,i,o)=>e.#D(r,n,i,o),moveToTail:r=>e.#A(r),indexes:r=>e.#x(r),rindexes:r=>e.#E(r),isStale:r=>e.#y(r)}}get max(){return this.#t}get maxSize(){return this.#i}get calculatedSize(){return this.#m}get size(){return this.#s}get fetchMethod(){return this.#c}get dispose(){return this.#p}get disposeAfter(){return this.#r}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:u,disposeAfter:l,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,maxEntrySize:m=0,sizeCalculation:h,fetchMethod:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:x}=e;if(r!==0&&!Yh(r))throw new TypeError("max option must be a nonnegative integer");let R=r?v1e(r):Array;if(!R)throw new Error("invalid max value: "+r);if(this.#t=r,this.#i=f,this.maxEntrySize=m||this.#i,this.sizeCalculation=h,this.sizeCalculation){if(!this.#i&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#c=g,this.#I=!!g,this.#a=new Map,this.#n=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#d=new R(r),this.#h=new R(r),this.#l=0,this.#u=0,this.#v=_W.create(r),this.#s=0,this.#m=0,typeof u=="function"&&(this.#p=u),typeof l=="function"?(this.#r=l,this.#f=[]):(this.#r=void 0,this.#f=void 0),this.#_=!!this.#p,this.#g=!!this.#r,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!y,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!x,this.maxEntrySize!==0){if(this.#i!==0&&!Yh(this.#i))throw new TypeError("maxSize must be a positive integer if specified");if(!Yh(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Yh(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Yh(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#N()}if(this.#t===0&&this.ttl===0&&this.#i===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#i){let L="LRU_CACHE_UNBOUNDED";aWe(L)&&(h1e.add(L),g1e("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#N(){let e=new I1(this.#t),r=new I1(this.#t);this.#b=e,this.#T=r,this.#L=(o,s,a=fw.now())=>{if(r[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#y(o)&&this.delete(this.#n[o])},s+1);c.unref&&c.unref()}},this.#w=o=>{r[o]=e[o]!==0?fw.now():0},this.#C=(o,s)=>{if(e[s]){let a=e[s],c=r[s];o.ttl=a,o.start=c,o.now=n||i();let u=o.now-c;o.remainingTTL=a-u}};let n=0,i=()=>{let o=fw.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#a.get(o);if(s===void 0)return 0;let a=e[s],c=r[s];if(a===0||c===0)return 1/0;let u=(n||i())-c;return a-u},this.#y=o=>e[o]!==0&&r[o]!==0&&(n||i())-r[o]>e[o]}#w=()=>{};#C=()=>{};#L=()=>{};#y=()=>!1;#U(){let e=new I1(this.#t);this.#m=0,this.#S=e,this.#R=r=>{this.#m-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#o(n))return 0;if(!Yh(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Yh(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#P=(r,n,i)=>{if(e[r]=n,this.#i){let o=this.#i-e[r];for(;this.#m>o;)this.#k(!0)}this.#m+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#m)}}#R=e=>{};#P=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#s)for(let r=this.#u;!(!this.#M(r)||((e||!this.#y(r))&&(yield r),r===this.#l));)r=this.#h[r]}*#E({allowStale:e=this.allowStale}={}){if(this.#s)for(let r=this.#l;!(!this.#M(r)||((e||!this.#y(r))&&(yield r),r===this.#u));)r=this.#d[r]}#M(e){return e!==void 0&&this.#a.get(this.#n[e])===e}*entries(){for(let e of this.#x())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#o(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#o(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#x()){let r=this.#n[e];r!==void 0&&!this.#o(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#E()){let r=this.#n[e];r!==void 0&&!this.#o(this.#e[e])&&(yield r)}}*values(){for(let e of this.#x())this.#e[e]!==void 0&&!this.#o(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#o(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.#x()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#n[n],this))return this.get(this.#n[n],r)}}forEach(e,r=this){for(let n of this.#x()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#n[n],this)}}rforEach(e,r=this){for(let n of this.#E()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#n[n],this)}}purgeStale(){let e=!1;for(let r of this.#E({allowStale:!0}))this.#y(r)&&(this.delete(this.#n[r]),e=!0);return e}dump(){let e=[];for(let r of this.#x({allowStale:!0})){let n=this.#n[r],i=this.#e[r],o=this.#o(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#b&&this.#T){s.ttl=this.#b[r];let a=fw.now()-this.#T[r];s.start=Math.floor(Date.now()-a)}this.#S&&(s.size=this.#S[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=fw.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,l=this.#O(e,r,n.size||0,a);if(this.maxEntrySize&&l>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let d=this.#s===0?void 0:this.#a.get(e);if(d===void 0)d=this.#s===0?this.#u:this.#v.length!==0?this.#v.pop():this.#s===this.#t?this.#k(!1):this.#s,this.#n[d]=e,this.#e[d]=r,this.#a.set(e,d),this.#d[this.#u]=d,this.#h[d]=this.#u,this.#u=d,this.#s++,this.#P(d,l,c),c&&(c.set="add"),u=!1;else{this.#A(d);let p=this.#e[d];if(r!==p){if(this.#I&&this.#o(p)?p.__abortController.abort(new Error("replaced")):s||(this.#_&&this.#p?.(p,e,"set"),this.#g&&this.#f?.push([p,e,"set"])),this.#R(d),this.#P(d,l,c),this.#e[d]=r,c){c.set="replace";let f=p&&this.#o(p)?p.__staleWhileFetching:p;f!==void 0&&(c.oldValue=f)}}else c&&(c.set="update")}if(i!==0&&!this.#b&&this.#N(),this.#b&&(u||this.#L(d,i,o),c&&this.#C(c,d)),!s&&this.#g&&this.#f){let p=this.#f,f;for(;f=p?.shift();)this.#r?.(...f)}return this}pop(){try{for(;this.#s;){let e=this.#e[this.#l];if(this.#k(!0),this.#o(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#g&&this.#f){let e=this.#f,r;for(;r=e?.shift();)this.#r?.(...r)}}}#k(e){let r=this.#l,n=this.#n[r],i=this.#e[r];return this.#I&&this.#o(i)?i.__abortController.abort(new Error("evicted")):(this.#_||this.#g)&&(this.#_&&this.#p?.(i,n,"evict"),this.#g&&this.#f?.push([i,n,"evict"])),this.#R(r),e&&(this.#n[r]=void 0,this.#e[r]=void 0,this.#v.push(r)),this.#s===1?(this.#l=this.#u=0,this.#v.length=0):this.#l=this.#d[r],this.#a.delete(n),this.#s--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let s=this.#e[o];if(this.#o(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#y(o))i&&(i.has="stale",this.#C(i,o));else return n&&this.#w(o),i&&(i.has="hit",this.#C(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i!==void 0&&(n||!this.#y(i))){let o=this.#e[i];return this.#o(o)?o.__staleWhileFetching:o}}#D(e,r,n,i){let o=r===void 0?void 0:this.#e[r];if(this.#o(o))return o;let s=new M3,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let c={signal:s.signal,options:n,context:i},u=(h,g=!1)=>{let{aborted:v}=s.signal,b=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(v&&!g?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,b&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),v&&!b&&!g)return d(s.signal.reason);let y=f;return this.#e[r]===f&&(h===void 0?y.__staleWhileFetching?this.#e[r]=y.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,c.options))),h},l=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),d(h)),d=h=>{let{aborted:g}=s.signal,v=g&&n.allowStaleOnFetchAbort,b=v||n.allowStaleOnFetchRejection,y=b||n.noDeleteOnFetchRejection,E=f;if(this.#e[r]===f&&(!y||E.__staleWhileFetching===void 0?this.delete(e):v||(this.#e[r]=E.__staleWhileFetching)),b)return n.status&&E.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw h},p=(h,g)=>{let v=this.#c?.(e,o,c);v&&v instanceof Promise&&v.then(b=>h(b),g),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(),n.allowStaleOnFetchAbort&&(h=b=>u(b,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(u,l),m=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,m,{...c.options,status:void 0}),r=this.#a.get(e)):this.#e[r]=m,m}#o(e){if(!this.#I)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof M3}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:h,forceRefresh:g=!1,status:v,signal:b}=r;if(!this.#I)return v&&(v.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:v});let y={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:u,noUpdateTTL:l,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:m,ignoreFetchAbort:f,status:v,signal:b},E=this.#a.get(e);if(E===void 0){v&&(v.fetch="miss");let x=this.#D(e,E,y,h);return x.__returned=x}else{let x=this.#e[E];if(this.#o(x)){let N=n&&x.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",N&&(v.returnedStale=!0)),N?x.__staleWhileFetching:x.__returned=x}let R=this.#y(E);if(!g&&!R)return v&&(v.fetch="hit"),this.#A(E),i&&this.#w(E),v&&this.#C(v,E),x;let L=this.#D(e,E,y,h),z=L.__staleWhileFetching!==void 0&&n;return v&&(v.fetch=R?"stale":"refresh",z&&R&&(v.returnedStale=!0)),z?L.__staleWhileFetching:L.__returned=L}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=this.#a.get(e);if(a!==void 0){let c=this.#e[a],u=this.#o(c);return s&&this.#C(s,a),this.#y(a)?(s&&(s.get="stale"),u?(s&&n&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?c.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?c:void 0)):(s&&(s.get="hit"),u?c.__staleWhileFetching:(this.#A(a),i&&this.#w(a),c))}else s&&(s.get="miss")}#F(e,r){this.#h[r]=e,this.#d[e]=r}#A(e){e!==this.#u&&(e===this.#l?this.#l=this.#d[e]:this.#F(this.#h[e],this.#d[e]),this.#F(this.#u,e),this.#u=e)}delete(e){let r=!1;if(this.#s!==0){let n=this.#a.get(e);if(n!==void 0)if(r=!0,this.#s===1)this.clear();else{this.#R(n);let i=this.#e[n];this.#o(i)?i.__abortController.abort(new Error("deleted")):(this.#_||this.#g)&&(this.#_&&this.#p?.(i,e,"delete"),this.#g&&this.#f?.push([i,e,"delete"])),this.#a.delete(e),this.#n[n]=void 0,this.#e[n]=void 0,n===this.#u?this.#u=this.#h[n]:n===this.#l?this.#l=this.#d[n]:(this.#d[this.#h[n]]=this.#d[n],this.#h[this.#d[n]]=this.#h[n]),this.#s--,this.#v.push(n)}}if(this.#g&&this.#f?.length){let n=this.#f,i;for(;i=n?.shift();)this.#r?.(...i)}return r}clear(){for(let e of this.#E({allowStale:!0})){let r=this.#e[e];if(this.#o(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#n[e];this.#_&&this.#p?.(r,n,"delete"),this.#g&&this.#f?.push([r,n,"delete"])}}if(this.#a.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#b&&this.#T&&(this.#b.fill(0),this.#T.fill(0)),this.#S&&this.#S.fill(0),this.#l=0,this.#u=0,this.#v.length=0,this.#m=0,this.#s=0,this.#g&&this.#f){let e=this.#f,r;for(;r=e?.shift();)this.#r?.(...r)}}};F3.LRUCache=xW});var b1e=k(w1=>{"use strict";Object.defineProperty(w1,"__esModule",{value:!0});w1.bytePairEncode=w1.uint8ArrayToString=void 0;function EW(t){return Array.from(t).map(e=>e.toString()).join("_")}w1.uint8ArrayToString=EW;function cWe(t,e){if(t.length===1)return[e.get(t[0].toString())];let r=[];for(let o=0;o<t.length+1;o++)r.push([o,Number.MAX_SAFE_INTEGER]);function n(o,s=0){if(o+s+2<r.length){let a=t.slice(r[o][0],r[o+s+2][0]),c=e.get(EW(a));if(c!==void 0)return c}return Number.MAX_SAFE_INTEGER}for(let o=0;o<r.length-2;o++){let s=n(o);s!==Number.MAX_SAFE_INTEGER&&(r[o][1]=s)}for(;r.length>1;){let o=[0,Number.MAX_SAFE_INTEGER];for(let s=0;s<r.length-1;s++)r[s][1]<o[1]&&(o=[s,r[s][1]]);if(o[1]!==Number.MAX_SAFE_INTEGER){let s=o[0];r[s][1]=n(s,1),s>0&&(r[s-1][1]=n(s-1,1)),r.splice(s+1,1)}else break}let i=[];for(let o=0;o<r.length-1;o++)i.push(e.get(EW(t.slice(r[o][0],r[o+1][0]))));return i}w1.bytePairEncode=cWe});var CW=k(U3=>{"use strict";Object.defineProperty(U3,"__esModule",{value:!0});U3.TikTokenizer=void 0;var uWe=require("fs"),lWe=y1e(),SW=require("util"),oy=b1e();function dWe(t){let e=new Map;try{let n=uWe.readFileSync(t,"utf-8");return r(n),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let s=new Uint8Array(Buffer.from(o[0],"base64")),a=parseInt(o[1]);if(!isNaN(a))e.set(s,a);else throw new Error(`Can't parse ${o[1]} to integer`)}}}function pWe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var TW=class{constructor(e,r,n,i=8192){this.textEncoder=new SW.TextEncoder,this.textDecoder=new SW.TextDecoder("utf-8");let o={max:i};this.cache=new lWe.LRUCache(o);let s=dWe(e);this.init(s,r,n)}init(e,r,n){this.encoder=new Map;for(let[i,o]of e)this.encoder.set((0,oy.uint8ArrayToString)(i),o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>pWe(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(this.encoder.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let s=o?i+o.index:e.length;return[o,s]}encode(e,r){let n=[],i=0;for(;;){let o,s;if([o,s]=this.findNextSpecialToken(e,i,r),s>i&&this.encodeByIndex(e,n,i,s),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,s=Array.from(e.substring(n,i).matchAll(this.regex));for(var a=0;a<s.length&&(o=s[a],o!==void 0);a++)if(this.cache.has(o[0]))r.push(...this.cache.get(o[0]));else{let c=this.textEncoder.encode(o[0]),u=this.encoder?.get((0,oy.uint8ArrayToString)(c));if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let l=(0,oy.bytePairEncode)(c,this.encoder);r.push(...l),this.cache.set(o[0],l)}}}encodeTrimSuffixByIndex(e,r,n,i,o,s,a){let c,u=Array.from(e.substring(n,i).matchAll(this.regex));for(var l=0;l<u.length;l++){c=u[l];let d=c[0];if(this.cache.has(d)){let p=this.cache.get(d);if(s+=p.length,s<=o)a+=d.length,r.push(...p);else break}else{let p=this.textEncoder.encode(d),f=this.encoder.get((0,oy.uint8ArrayToString)(p));if(f!==void 0)if(this.cache.set(d,[f]),s++,s<=o)a+=d.length,r.push(f);else break;else{let m=(0,oy.bytePairEncode)(p,this.encoder);if(this.cache.set(d,m),s+=m.length,s<=o)a+=d.length,r.push(...m);else break}}if(s>=o)break}return{tokenCount:s,encodeLength:a}}encodeTrimSuffix(e,r,n){let i=[],o=0,s=0,a=0;for(;;){let u,l;if([u,l]=this.findNextSpecialToken(e,o,n),l>o){let{tokenCount:d,encodeLength:p}=this.encodeTrimSuffixByIndex(e,i,o,l,r,s,a);if(s=d,a=p,s>=r)break}if(u!==null){if(s++,s<=r&&(o=o+this.encodeSpecialToken(i,u),a+=u[0].length,o>=e.length)||s>=r)break}else break}let c=a===e.length?e:e.slice(0,a);return{tokenIds:i,text:c}}encodeTrimPrefix(e,r,n){let i=[],o=0,s=0,a=0,c=new Map;for(c.set(s,a);;){let f,m;if([f,m]=this.findNextSpecialToken(e,o,n),m>o){let h,g=Array.from(e.substring(o,m).matchAll(this.regex));for(var u=0;u<g.length;u++){h=g[u];let v=h[0];if(this.cache.has(v)){let b=this.cache.get(v);s+=b.length,a+=v.length,i.push(...b),c.set(s,a)}else{let b=new SW.TextEncoder().encode(v),y=this.encoder.get((0,oy.uint8ArrayToString)(b));if(y!==void 0)this.cache.set(v,[y]),s++,a+=v.length,i.push(y),c.set(s,a);else{let E=(0,oy.bytePairEncode)(b,this.encoder);this.cache.set(v,E),s+=E.length,a+=v.length,i.push(...E),c.set(s,a)}}}}if(f!==null){if(o=o+this.encodeSpecialToken(i,f),s++,a+=f[0].length,c.set(s,a),o>=e.length)break}else break}if(s<=r)return{tokenIds:i,text:e};let l=s-r,d=0,p=0;for(let[f,m]of c)if(f>=l){d=f,p=m;break}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let s=this.specialTokensDecoder?.get(n);s!==void 0&&(i=Array.from(this.textEncoder.encode(s)))}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};U3.TikTokenizer=TW});var w1e=k(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.createTokenizer=Mi.createByEncoderName=Mi.createByModelName=Mi.getRegexByModel=Mi.getRegexByEncoder=Mi.getSpecialTokensByModel=Mi.getSpecialTokensByEncoder=Mi.MODEL_TO_ENCODING=void 0;var B3=require("fs"),IW=require("path"),fWe=CW(),mWe=new Map([["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"]]);Mi.MODEL_TO_ENCODING=new Map([["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var wW="<|endoftext|>",_1e="<|fim_prefix|>",x1e="<|fim_middle|>",E1e="<|fim_suffix|>",hWe="<|endofprompt|>",mw="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",S1e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+";function RW(t){let e="";if(Mi.MODEL_TO_ENCODING.has(t))e=Mi.MODEL_TO_ENCODING.get(t);else for(let[r,n]of mWe)if(t.startsWith(r)){e=n;break}return e}async function gWe(t,e){let r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let n=await r.text();B3.writeFileSync(e,n)}function AW(t){let e=new Map([[wW,50256]]);switch(t){case"cl100k_base":e=new Map([[wW,100257],[_1e,100258],[x1e,100259],[E1e,100260],[hWe,100276]]);break;case"p50k_edit":e=new Map([[wW,50256],[_1e,50281],[x1e,50282],[E1e,50283]]);break;default:break}return e}Mi.getSpecialTokensByEncoder=AW;function vWe(t){let e=RW(t);return AW(e)}Mi.getSpecialTokensByModel=vWe;function T1e(t){switch(t){case"cl100k_base":return S1e;default:break}return mw}Mi.getRegexByEncoder=T1e;function yWe(t){let e=RW(t);return T1e(e)}Mi.getRegexByModel=yWe;async function bWe(t,e=null){return C1e(RW(t),e)}Mi.createByModelName=bWe;async function C1e(t,e=null){let r,n,i=AW(t);switch(t){case"cl100k_base":r=S1e,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=mw,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=mw,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=mw,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=mw,n="https://pythia.blob.core.windows.net/public/encoding/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=IW.basename(n),s=IW.resolve(__dirname,"..","model");B3.existsSync(s)||B3.mkdirSync(s,{recursive:!0});let a=IW.resolve(s,o);return B3.existsSync(a)||(console.log(`Downloading file from ${n}`),await gWe(n,a),console.log(`Saved file to ${a}`)),I1e(a,i,r)}Mi.createByEncoderName=C1e;function I1e(t,e,r,n=8192){return new fWe.TikTokenizer(t,e,r,n)}Mi.createTokenizer=I1e});var R1e=k(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.createTokenizer=Fi.createByEncoderName=Fi.createByModelName=Fi.getSpecialTokensByModel=Fi.getSpecialTokensByEncoder=Fi.getRegexByModel=Fi.getRegexByEncoder=Fi.MODEL_TO_ENCODING=Fi.TikTokenizer=void 0;var _We=CW();Object.defineProperty(Fi,"TikTokenizer",{enumerable:!0,get:function(){return _We.TikTokenizer}});var Kh=w1e();Object.defineProperty(Fi,"MODEL_TO_ENCODING",{enumerable:!0,get:function(){return Kh.MODEL_TO_ENCODING}});Object.defineProperty(Fi,"getRegexByEncoder",{enumerable:!0,get:function(){return Kh.getRegexByEncoder}});Object.defineProperty(Fi,"getRegexByModel",{enumerable:!0,get:function(){return Kh.getRegexByModel}});Object.defineProperty(Fi,"getSpecialTokensByEncoder",{enumerable:!0,get:function(){return Kh.getSpecialTokensByEncoder}});Object.defineProperty(Fi,"getSpecialTokensByModel",{enumerable:!0,get:function(){return Kh.getSpecialTokensByModel}});Object.defineProperty(Fi,"createByModelName",{enumerable:!0,get:function(){return Kh.createByModelName}});Object.defineProperty(Fi,"createByEncoderName",{enumerable:!0,get:function(){return Kh.createByEncoderName}});Object.defineProperty(Fi,"createTokenizer",{enumerable:!0,get:function(){return Kh.createTokenizer}})});var GEe=k((EXt,jEe)=>{function LEe(t){return Array.isArray(t)?t:[t]}var UEe="",OEe=" ",MY="\\",HYe=/^\s+$/,jYe=/(?:[^\\]|^)\\$/,GYe=/^\\!/,VYe=/^\\#/,zYe=/\r?\n/g,$Ye=/^\.*\/|^\.+$/,FY="/",BEe="node-ignore";typeof Symbol<"u"&&(BEe=Symbol.for("node-ignore"));var MEe=BEe,WYe=(t,e,r)=>Object.defineProperty(t,e,{value:r}),YYe=/([0-z])-([0-z])/g,qEe=()=>!1,KYe=t=>t.replace(YYe,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:UEe),QYe=t=>{let{length:e}=t;return t.slice(0,e-e%2)},XYe=[[/\\?\s+$/,t=>t.indexOf("\\")===0?OEe:UEe],[/\\\s/g,()=>OEe],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>MY],[/\\\\/g,()=>MY],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===MY?`\\[${r}${QYe(n)}${i}`:i==="]"&&n.length%2===0?`[${KYe(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],FEe=Object.create(null),JYe=(t,e)=>{let r=FEe[t];return r||(r=XYe.reduce((n,i)=>n.replace(i[0],i[1].bind(t)),t),FEe[t]=r),e?new RegExp(r,"i"):new RegExp(r)},qY=t=>typeof t=="string",ZYe=t=>t&&qY(t)&&!HYe.test(t)&&!jYe.test(t)&&t.indexOf("#")!==0,eKe=t=>t.split(zYe),UY=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},tKe=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(GYe,"!").replace(VYe,"#");let i=JYe(t,e);return new UY(r,t,n,i)},rKe=(t,e)=>{throw new e(t)},ff=(t,e,r)=>qY(t)?t?ff.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),HEe=t=>$Ye.test(t);ff.isNotRelative=HEe;ff.convert=t=>t;var BY=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){WYe(this,MEe,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[MEe]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(ZYe(e)){let r=tKe(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,LEe(qY(e)?eKe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!r)return;o.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let o=e&&ff.convert(e);return ff(o,e,this._allowRelativePaths?qEe:rKe),this._t(o,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(FY)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let o=this._t(i.join(FY)+FY,r,n,i);return r[e]=o.ignored?o:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return LEe(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},GO=t=>new BY(t),nKe=t=>ff(t&&ff.convert(t),t,qEe);GO.isPathValid=nKe;GO.default=GO;jEe.exports=GO;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");ff.convert=t;let e=/^[a-z]:\//i;ff.isNotRelative=r=>e.test(r)||HEe(r)}});var QEe=k((wXt,KEe)=>{"use strict";KEe.exports=WEe;function WEe(t,e,r){t instanceof RegExp&&(t=$Ee(t,r)),e instanceof RegExp&&(e=$Ee(e,r));var n=YEe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function $Ee(t,e){var r=e.match(t);return r?r[0]:null}WEe.range=YEe;function YEe(t,e,r){var n,i,o,s,a,c=r.indexOf(t),u=r.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],o=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,s=u),u=r.indexOf(e,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}});var iSe=k((RXt,nSe)=>{var XEe=QEe();nSe.exports=sKe;var JEe="\0SLASH"+Math.random()+"\0",ZEe="\0OPEN"+Math.random()+"\0",jY="\0CLOSE"+Math.random()+"\0",eSe="\0COMMA"+Math.random()+"\0",tSe="\0PERIOD"+Math.random()+"\0";function HY(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function iKe(t){return t.split("\\\\").join(JEe).split("\\{").join(ZEe).split("\\}").join(jY).split("\\,").join(eSe).split("\\.").join(tSe)}function oKe(t){return t.split(JEe).join("\\").split(ZEe).join("{").split(jY).join("}").split(eSe).join(",").split(tSe).join(".")}function rSe(t){if(!t)return[""];var e=[],r=XEe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=rSe(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function sKe(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Ow(iKe(t),!0).map(oKe)):[]}function aKe(t){return"{"+t+"}"}function cKe(t){return/^-?0\d/.test(t)}function uKe(t,e){return t<=e}function lKe(t,e){return t>=e}function Ow(t,e){var r=[],n=XEe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?Ow(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var a=i+"{"+n.body+"}"+o[s];r.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=c||u,d=n.body.indexOf(",")>=0;if(!l&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+jY+n.post,Ow(t)):[t];var p;if(l)p=n.body.split(/\.\./);else if(p=rSe(n.body),p.length===1&&(p=Ow(p[0],!1).map(aKe),p.length===1))return o.map(function(N){return n.pre+p[0]+N});var f;if(l){var m=HY(p[0]),h=HY(p[1]),g=Math.max(p[0].length,p[1].length),v=p.length==3?Math.abs(HY(p[2])):1,b=uKe,y=h<m;y&&(v*=-1,b=lKe);var E=p.some(cKe);f=[];for(var x=m;b(x,h);x+=v){var R;if(u)R=String.fromCharCode(x),R==="\\"&&(R="");else if(R=String(x),E){var L=g-R.length;if(L>0){var O=new Array(L+1).join("0");x<0?R="-"+O+R.slice(1):R=O+R}}f.push(R)}}else{f=[];for(var z=0;z<p.length;z++)f.push.apply(f,Ow(p[z],!1))}for(var z=0;z<f.length;z++)for(var s=0;s<o.length;s++){var a=i+f[z]+o[s];(!e||l||a)&&r.push(a)}}return r}});var i2=k((l0r,qTe)=>{"use strict";var Id="\\\\/",MTe=`[^${Id}]`,hf="\\.",xXe="\\+",EXe="\\?",g6="\\/",SXe="(?=.)",FTe="[^/]",zK=`(?:${g6}|$)`,UTe=`(?:^|${g6})`,$K=`${hf}{1,2}${zK}`,TXe=`(?!${hf})`,CXe=`(?!${UTe}${$K})`,IXe=`(?!${hf}{0,1}${zK})`,wXe=`(?!${$K})`,RXe=`[^.${g6}]`,AXe=`${FTe}*?`,PXe="/",BTe={DOT_LITERAL:hf,PLUS_LITERAL:xXe,QMARK_LITERAL:EXe,SLASH_LITERAL:g6,ONE_CHAR:SXe,QMARK:FTe,END_ANCHOR:zK,DOTS_SLASH:$K,NO_DOT:TXe,NO_DOTS:CXe,NO_DOT_SLASH:IXe,NO_DOTS_SLASH:wXe,QMARK_NO_DOT:RXe,STAR:AXe,START_ANCHOR:UTe,SEP:PXe},kXe={...BTe,SLASH_LITERAL:`[${Id}]`,QMARK:MTe,STAR:`${MTe}*?`,DOTS_SLASH:`${hf}{1,2}(?:[${Id}]|$)`,NO_DOT:`(?!${hf})`,NO_DOTS:`(?!(?:^|[${Id}])${hf}{1,2}(?:[${Id}]|$))`,NO_DOT_SLASH:`(?!${hf}{0,1}(?:[${Id}]|$))`,NO_DOTS_SLASH:`(?!${hf}{1,2}(?:[${Id}]|$))`,QMARK_NO_DOT:`[^.${Id}]`,START_ANCHOR:`(?:^|[${Id}])`,END_ANCHOR:`(?:[${Id}]|$)`,SEP:"\\"},DXe={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};qTe.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:DXe,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?kXe:BTe}}});var v6=k(Aa=>{"use strict";var{REGEX_BACKSLASH:NXe,REGEX_REMOVE_BACKSLASH:LXe,REGEX_SPECIAL_CHARS:OXe,REGEX_SPECIAL_CHARS_GLOBAL:MXe}=i2();Aa.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Aa.hasRegexChars=t=>OXe.test(t);Aa.isRegexChar=t=>t.length===1&&Aa.hasRegexChars(t);Aa.escapeRegex=t=>t.replace(MXe,"\\$1");Aa.toPosixSlashes=t=>t.replace(NXe,"/");Aa.removeBackslashes=t=>t.replace(LXe,e=>e==="\\"?"":e);Aa.supportsLookbehinds=()=>{if(typeof process<"u"){let t=process.version.slice(1).split(".").map(Number);if(t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10)return!0}return!1};Aa.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?Aa.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};Aa.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Aa.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o};Aa.basename=(t,{windows:e}={})=>{let r=t.split(e?/[\\/]/:"/"),n=r[r.length-1];return n===""?r[r.length-2]:n}});var YTe=k((p0r,WTe)=>{"use strict";var HTe=v6(),{CHAR_ASTERISK:WK,CHAR_AT:FXe,CHAR_BACKWARD_SLASH:o2,CHAR_COMMA:UXe,CHAR_DOT:YK,CHAR_EXCLAMATION_MARK:KK,CHAR_FORWARD_SLASH:$Te,CHAR_LEFT_CURLY_BRACE:QK,CHAR_LEFT_PARENTHESES:XK,CHAR_LEFT_SQUARE_BRACKET:BXe,CHAR_PLUS:qXe,CHAR_QUESTION_MARK:jTe,CHAR_RIGHT_CURLY_BRACE:HXe,CHAR_RIGHT_PARENTHESES:GTe,CHAR_RIGHT_SQUARE_BRACKET:jXe}=i2(),VTe=t=>t===$Te||t===o2,zTe=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},GXe=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],c=t,u=-1,l=0,d=0,p=!1,f=!1,m=!1,h=!1,g=!1,v=!1,b=!1,y=!1,E=!1,x=!1,R=0,L,O,z={value:"",depth:0,isGlob:!1},N=()=>u>=n,ce=()=>c.charCodeAt(u+1),J=()=>(L=O,c.charCodeAt(++u));for(;u<n;){O=J();let M;if(O===o2){b=z.backslashes=!0,O=J(),O===QK&&(v=!0);continue}if(v===!0||O===QK){for(R++;N()!==!0&&(O=J());){if(O===o2){b=z.backslashes=!0,J();continue}if(O===QK){R++;continue}if(v!==!0&&O===YK&&(O=J())===YK){if(p=z.isBrace=!0,m=z.isGlob=!0,x=!0,i===!0)continue;break}if(v!==!0&&O===UXe){if(p=z.isBrace=!0,m=z.isGlob=!0,x=!0,i===!0)continue;break}if(O===HXe&&(R--,R===0)){v=!1,p=z.isBrace=!0,x=!0;break}}if(i===!0)continue;break}if(O===$Te){if(o.push(u),s.push(z),z={value:"",depth:0,isGlob:!1},x===!0)continue;if(L===YK&&u===l+1){l+=2;continue}d=u+1;continue}if(r.noext!==!0&&(O===qXe||O===FXe||O===WK||O===jTe||O===KK)===!0&&ce()===XK){if(m=z.isGlob=!0,h=z.isExtglob=!0,x=!0,O===KK&&u===l&&(E=!0),i===!0){for(;N()!==!0&&(O=J());){if(O===o2){b=z.backslashes=!0,O=J();continue}if(O===GTe){m=z.isGlob=!0,x=!0;break}}continue}break}if(O===WK){if(L===WK&&(g=z.isGlobstar=!0),m=z.isGlob=!0,x=!0,i===!0)continue;break}if(O===jTe){if(m=z.isGlob=!0,x=!0,i===!0)continue;break}if(O===BXe){for(;N()!==!0&&(M=J());){if(M===o2){b=z.backslashes=!0,J();continue}if(M===jXe){f=z.isBracket=!0,m=z.isGlob=!0,x=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&O===KK&&u===l){y=z.negated=!0,l++;continue}if(r.noparen!==!0&&O===XK){if(m=z.isGlob=!0,i===!0){for(;N()!==!0&&(O=J());){if(O===XK){b=z.backslashes=!0,O=J();continue}if(O===GTe){x=!0;break}}continue}break}if(m===!0){if(x=!0,i===!0)continue;break}}r.noext===!0&&(h=!1,m=!1);let D=c,S="",P="";l>0&&(S=c.slice(0,l),c=c.slice(l),d-=l),D&&m===!0&&d>0?(D=c.slice(0,d),P=c.slice(d)):m===!0?(D="",P=c):D=c,D&&D!==""&&D!=="/"&&D!==c&&VTe(D.charCodeAt(D.length-1))&&(D=D.slice(0,-1)),r.unescape===!0&&(P&&(P=HTe.removeBackslashes(P)),D&&b===!0&&(D=HTe.removeBackslashes(D)));let F={prefix:S,input:t,start:l,base:D,glob:P,isBrace:p,isBracket:f,isGlob:m,isExtglob:h,isGlobstar:g,negated:y,negatedExtglob:E};if(r.tokens===!0&&(F.maxDepth=0,VTe(O)||s.push(z),F.tokens=s),r.parts===!0||r.tokens===!0){let M;for(let V=0;V<o.length;V++){let de=M?M+1:l,te=o[V],oe=t.slice(de,te);r.tokens&&(V===0&&l!==0?(s[V].isPrefix=!0,s[V].value=S):s[V].value=oe,zTe(s[V]),F.maxDepth+=s[V].depth),(V!==0||oe!=="")&&a.push(oe),M=te}if(M&&M+1<t.length){let V=t.slice(M+1);a.push(V),r.tokens&&(s[s.length-1].value=V,zTe(s[s.length-1]),F.maxDepth+=s[s.length-1].depth)}F.slashes=o,F.parts=a}return F};WTe.exports=GXe});var XTe=k((f0r,QTe)=>{"use strict";var y6=i2(),Vu=v6(),{MAX_LENGTH:b6,POSIX_REGEX_SOURCE:VXe,REGEX_NON_SPECIAL_CHARS:zXe,REGEX_SPECIAL_CHARS_BACKREF:$Xe,REPLACEMENTS:KTe}=y6,WXe=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>Vu.escapeRegex(i)).join("..")}return r},LE=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,JK=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=KTe[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(b6,r.maxLength):b6,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",c=y6.globChars(r.windows),u=y6.extglobChars(c),{DOT_LITERAL:l,PLUS_LITERAL:d,SLASH_LITERAL:p,ONE_CHAR:f,DOTS_SLASH:m,NO_DOT:h,NO_DOT_SLASH:g,NO_DOTS_SLASH:v,QMARK:b,QMARK_NO_DOT:y,STAR:E,START_ANCHOR:x}=c,R=me=>`(${a}(?:(?!${x}${me.dot?m:l}).)*?)`,L=r.dot?"":h,O=r.dot?b:y,z=r.bash===!0?R(r):E;r.capture&&(z=`(${z})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let N={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=Vu.removePrefix(t,N),i=t.length;let ce=[],J=[],D=[],S=o,P,F=()=>N.index===i-1,M=N.peek=(me=1)=>t[N.index+me],V=N.advance=()=>t[++N.index]||"",de=()=>t.slice(N.index+1),te=(me="",Qe=0)=>{N.consumed+=me,N.index+=Qe},oe=me=>{N.output+=me.output!=null?me.output:me.value,te(me.value)},je=()=>{let me=1;for(;M()==="!"&&(M(2)!=="("||M(3)==="?");)V(),N.start++,me++;return me%2===0?!1:(N.negated=!0,N.start++,!0)},Q=me=>{N[me]++,D.push(me)},ct=me=>{N[me]--,D.pop()},Be=me=>{if(S.type==="globstar"){let Qe=N.braces>0&&(me.type==="comma"||me.type==="brace"),U=me.extglob===!0||ce.length&&(me.type==="pipe"||me.type==="paren");me.type!=="slash"&&me.type!=="paren"&&!Qe&&!U&&(N.output=N.output.slice(0,-S.output.length),S.type="star",S.value="*",S.output=z,N.output+=S.output)}if(ce.length&&me.type!=="paren"&&(ce[ce.length-1].inner+=me.value),(me.value||me.output)&&oe(me),S&&S.type==="text"&&me.type==="text"){S.value+=me.value,S.output=(S.output||"")+me.value;return}me.prev=S,s.push(me),S=me},yt=(me,Qe)=>{let U={...u[Qe],conditions:1,inner:""};U.prev=S,U.parens=N.parens,U.output=N.output;let ne=(r.capture?"(":"")+U.open;Q("parens"),Be({type:me,value:Qe,output:N.output?"":f}),Be({type:"paren",extglob:!0,value:V(),output:ne}),ce.push(U)},or=me=>{let Qe=me.close+(r.capture?")":""),U;if(me.type==="negate"){let ne=z;if(me.inner&&me.inner.length>1&&me.inner.includes("/")&&(ne=R(r)),(ne!==z||F()||/^\)+$/.test(de()))&&(Qe=me.close=`)$))${ne}`),me.inner.includes("*")&&(U=de())&&/^\.[^\\/.]+$/.test(U)){let se=JK(U,{...e,fastpaths:!1}).output;Qe=me.close=`)${se})${ne})`}me.prev.type==="bos"&&(N.negatedExtglob=!0)}Be({type:"paren",extglob:!0,value:P,output:Qe}),ct("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let me=!1,Qe=t.replace($Xe,(U,ne,se,Te,ye,Xe)=>Te==="\\"?(me=!0,U):Te==="?"?ne?ne+Te+(ye?b.repeat(ye.length):""):Xe===0?O+(ye?b.repeat(ye.length):""):b.repeat(se.length):Te==="."?l.repeat(se.length):Te==="*"?ne?ne+Te+(ye?z:""):z:ne?U:`\\${U}`);return me===!0&&(r.unescape===!0?Qe=Qe.replace(/\\/g,""):Qe=Qe.replace(/\\+/g,U=>U.length%2===0?"\\\\":U?"\\":"")),Qe===t&&r.contains===!0?(N.output=t,N):(N.output=Vu.wrapOutput(Qe,N,e),N)}for(;!F();){if(P=V(),P==="\0")continue;if(P==="\\"){let U=M();if(U==="/"&&r.bash!==!0||U==="."||U===";")continue;if(!U){P+="\\",Be({type:"text",value:P});continue}let ne=/^\\+/.exec(de()),se=0;if(ne&&ne[0].length>2&&(se=ne[0].length,N.index+=se,se%2!==0&&(P+="\\")),r.unescape===!0?P=V():P+=V(),N.brackets===0){Be({type:"text",value:P});continue}}if(N.brackets>0&&(P!=="]"||S.value==="["||S.value==="[^")){if(r.posix!==!1&&P===":"){let U=S.value.slice(1);if(U.includes("[")&&(S.posix=!0,U.includes(":"))){let ne=S.value.lastIndexOf("["),se=S.value.slice(0,ne),Te=S.value.slice(ne+2),ye=VXe[Te];if(ye){S.value=se+ye,N.backtrack=!0,V(),!o.output&&s.indexOf(S)===1&&(o.output=f);continue}}}(P==="["&&M()!==":"||P==="-"&&M()==="]")&&(P=`\\${P}`),P==="]"&&(S.value==="["||S.value==="[^")&&(P=`\\${P}`),r.posix===!0&&P==="!"&&S.value==="["&&(P="^"),S.value+=P,oe({value:P});continue}if(N.quotes===1&&P!=='"'){P=Vu.escapeRegex(P),S.value+=P,oe({value:P});continue}if(P==='"'){N.quotes=N.quotes===1?0:1,r.keepQuotes===!0&&Be({type:"text",value:P});continue}if(P==="("){Q("parens"),Be({type:"paren",value:P});continue}if(P===")"){if(N.parens===0&&r.strictBrackets===!0)throw new SyntaxError(LE("opening","("));let U=ce[ce.length-1];if(U&&N.parens===U.parens+1){or(ce.pop());continue}Be({type:"paren",value:P,output:N.parens?")":"\\)"}),ct("parens");continue}if(P==="["){if(r.nobracket===!0||!de().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(LE("closing","]"));P=`\\${P}`}else Q("brackets");Be({type:"bracket",value:P});continue}if(P==="]"){if(r.nobracket===!0||S&&S.type==="bracket"&&S.value.length===1){Be({type:"text",value:P,output:`\\${P}`});continue}if(N.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(LE("opening","["));Be({type:"text",value:P,output:`\\${P}`});continue}ct("brackets");let U=S.value.slice(1);if(S.posix!==!0&&U[0]==="^"&&!U.includes("/")&&(P=`/${P}`),S.value+=P,oe({value:P}),r.literalBrackets===!1||Vu.hasRegexChars(U))continue;let ne=Vu.escapeRegex(S.value);if(N.output=N.output.slice(0,-S.value.length),r.literalBrackets===!0){N.output+=ne,S.value=ne;continue}S.value=`(${a}${ne}|${S.value})`,N.output+=S.value;continue}if(P==="{"&&r.nobrace!==!0){Q("braces");let U={type:"brace",value:P,output:"(",outputIndex:N.output.length,tokensIndex:N.tokens.length};J.push(U),Be(U);continue}if(P==="}"){let U=J[J.length-1];if(r.nobrace===!0||!U){Be({type:"text",value:P,output:P});continue}let ne=")";if(U.dots===!0){let se=s.slice(),Te=[];for(let ye=se.length-1;ye>=0&&(s.pop(),se[ye].type!=="brace");ye--)se[ye].type!=="dots"&&Te.unshift(se[ye].value);ne=WXe(Te,r),N.backtrack=!0}if(U.comma!==!0&&U.dots!==!0){let se=N.output.slice(0,U.outputIndex),Te=N.tokens.slice(U.tokensIndex);U.value=U.output="\\{",P=ne="\\}",N.output=se;for(let ye of Te)N.output+=ye.output||ye.value}Be({type:"brace",value:P,output:ne}),ct("braces"),J.pop();continue}if(P==="|"){ce.length>0&&ce[ce.length-1].conditions++,Be({type:"text",value:P});continue}if(P===","){let U=P,ne=J[J.length-1];ne&&D[D.length-1]==="braces"&&(ne.comma=!0,U="|"),Be({type:"comma",value:P,output:U});continue}if(P==="/"){if(S.type==="dot"&&N.index===N.start+1){N.start=N.index+1,N.consumed="",N.output="",s.pop(),S=o;continue}Be({type:"slash",value:P,output:p});continue}if(P==="."){if(N.braces>0&&S.type==="dot"){S.value==="."&&(S.output=l);let U=J[J.length-1];S.type="dots",S.output+=P,S.value+=P,U.dots=!0;continue}if(N.braces+N.parens===0&&S.type!=="bos"&&S.type!=="slash"){Be({type:"text",value:P,output:l});continue}Be({type:"dot",value:P,output:l});continue}if(P==="?"){if(!(S&&S.value==="(")&&r.noextglob!==!0&&M()==="("&&M(2)!=="?"){yt("qmark",P);continue}if(S&&S.type==="paren"){let ne=M(),se=P;if(ne==="<"&&!Vu.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(S.value==="("&&!/[!=<:]/.test(ne)||ne==="<"&&!/<([!=]|\w+>)/.test(de()))&&(se=`\\${P}`),Be({type:"text",value:P,output:se});continue}if(r.dot!==!0&&(S.type==="slash"||S.type==="bos")){Be({type:"qmark",value:P,output:y});continue}Be({type:"qmark",value:P,output:b});continue}if(P==="!"){if(r.noextglob!==!0&&M()==="("&&(M(2)!=="?"||!/[!=<:]/.test(M(3)))){yt("negate",P);continue}if(r.nonegate!==!0&&N.index===0){je();continue}}if(P==="+"){if(r.noextglob!==!0&&M()==="("&&M(2)!=="?"){yt("plus",P);continue}if(S&&S.value==="("||r.regex===!1){Be({type:"plus",value:P,output:d});continue}if(S&&(S.type==="bracket"||S.type==="paren"||S.type==="brace")||N.parens>0){Be({type:"plus",value:P});continue}Be({type:"plus",value:d});continue}if(P==="@"){if(r.noextglob!==!0&&M()==="("&&M(2)!=="?"){Be({type:"at",extglob:!0,value:P,output:""});continue}Be({type:"text",value:P});continue}if(P!=="*"){(P==="$"||P==="^")&&(P=`\\${P}`);let U=zXe.exec(de());U&&(P+=U[0],N.index+=U[0].length),Be({type:"text",value:P});continue}if(S&&(S.type==="globstar"||S.star===!0)){S.type="star",S.star=!0,S.value+=P,S.output=z,N.backtrack=!0,N.globstar=!0,te(P);continue}let me=de();if(r.noextglob!==!0&&/^\([^?]/.test(me)){yt("star",P);continue}if(S.type==="star"){if(r.noglobstar===!0){te(P);continue}let U=S.prev,ne=U.prev,se=U.type==="slash"||U.type==="bos",Te=ne&&(ne.type==="star"||ne.type==="globstar");if(r.bash===!0&&(!se||me[0]&&me[0]!=="/")){Be({type:"star",value:P,output:""});continue}let ye=N.braces>0&&(U.type==="comma"||U.type==="brace"),Xe=ce.length&&(U.type==="pipe"||U.type==="paren");if(!se&&U.type!=="paren"&&!ye&&!Xe){Be({type:"star",value:P,output:""});continue}for(;me.slice(0,3)==="/**";){let ht=t[N.index+4];if(ht&&ht!=="/")break;me=me.slice(3),te("/**",3)}if(U.type==="bos"&&F()){S.type="globstar",S.value+=P,S.output=R(r),N.output=S.output,N.globstar=!0,te(P);continue}if(U.type==="slash"&&U.prev.type!=="bos"&&!Te&&F()){N.output=N.output.slice(0,-(U.output+S.output).length),U.output=`(?:${U.output}`,S.type="globstar",S.output=R(r)+(r.strictSlashes?")":"|$)"),S.value+=P,N.globstar=!0,N.output+=U.output+S.output,te(P);continue}if(U.type==="slash"&&U.prev.type!=="bos"&&me[0]==="/"){let ht=me[1]!==void 0?"|$":"";N.output=N.output.slice(0,-(U.output+S.output).length),U.output=`(?:${U.output}`,S.type="globstar",S.output=`${R(r)}${p}|${p}${ht})`,S.value+=P,N.output+=U.output+S.output,N.globstar=!0,te(P+V()),Be({type:"slash",value:"/",output:""});continue}if(U.type==="bos"&&me[0]==="/"){S.type="globstar",S.value+=P,S.output=`(?:^|${p}|${R(r)}${p})`,N.output=S.output,N.globstar=!0,te(P+V()),Be({type:"slash",value:"/",output:""});continue}N.output=N.output.slice(0,-S.output.length),S.type="globstar",S.output=R(r),S.value+=P,N.output+=S.output,N.globstar=!0,te(P);continue}let Qe={type:"star",value:P,output:z};if(r.bash===!0){Qe.output=".*?",(S.type==="bos"||S.type==="slash")&&(Qe.output=L+Qe.output),Be(Qe);continue}if(S&&(S.type==="bracket"||S.type==="paren")&&r.regex===!0){Qe.output=P,Be(Qe);continue}(N.index===N.start||S.type==="slash"||S.type==="dot")&&(S.type==="dot"?(N.output+=g,S.output+=g):r.dot===!0?(N.output+=v,S.output+=v):(N.output+=L,S.output+=L),M()!=="*"&&(N.output+=f,S.output+=f)),Be(Qe)}for(;N.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(LE("closing","]"));N.output=Vu.escapeLast(N.output,"["),ct("brackets")}for(;N.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(LE("closing",")"));N.output=Vu.escapeLast(N.output,"("),ct("parens")}for(;N.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(LE("closing","}"));N.output=Vu.escapeLast(N.output,"{"),ct("braces")}if(r.strictSlashes!==!0&&(S.type==="star"||S.type==="bracket")&&Be({type:"maybe_slash",value:"",output:`${p}?`}),N.backtrack===!0){N.output="";for(let me of N.tokens)N.output+=me.output!=null?me.output:me.value,me.suffix&&(N.output+=me.suffix)}return N};JK.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(b6,r.maxLength):b6,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=KTe[t]||t;let{DOT_LITERAL:o,SLASH_LITERAL:s,ONE_CHAR:a,DOTS_SLASH:c,NO_DOT:u,NO_DOTS:l,NO_DOTS_SLASH:d,STAR:p,START_ANCHOR:f}=y6.globChars(r.windows),m=r.dot?l:u,h=r.dot?d:u,g=r.capture?"":"?:",v={negated:!1,prefix:""},b=r.bash===!0?".*?":p;r.capture&&(b=`(${b})`);let y=L=>L.noglobstar===!0?b:`(${g}(?:(?!${f}${L.dot?c:o}).)*?)`,E=L=>{switch(L){case"*":return`${m}${a}${b}`;case".*":return`${o}${a}${b}`;case"*.*":return`${m}${b}${o}${a}${b}`;case"*/*":return`${m}${b}${s}${a}${h}${b}`;case"**":return m+y(r);case"**/*":return`(?:${m}${y(r)}${s})?${h}${a}${b}`;case"**/*.*":return`(?:${m}${y(r)}${s})?${h}${b}${o}${a}${b}`;case"**/.*":return`(?:${m}${y(r)}${s})?${o}${a}${b}`;default:{let O=/^(.*?)\.(\w+)$/.exec(L);if(!O)return;let z=E(O[1]);return z?z+o+O[2]:void 0}}},x=Vu.removePrefix(t,v),R=E(x);return R&&r.strictSlashes!==!0&&(R+=`${s}?`),R};QTe.exports=JK});var eCe=k((m0r,ZTe)=>{"use strict";var YXe=YTe(),ZK=XTe(),JTe=v6(),KXe=i2(),QXe=t=>t&&typeof t=="object"&&!Array.isArray(t),Ei=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(p=>Ei(p,e,r));return p=>{for(let f of l){let m=f(p);if(m)return m}return!1}}let n=QXe(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=i.windows,s=n?Ei.compileRe(t,e):Ei.makeRe(t,e,!1,!0),a=s.state;delete s.state;let c=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};c=Ei(i.ignore,l,r)}let u=(l,d=!1)=>{let{isMatch:p,match:f,output:m}=Ei.test(l,s,e,{glob:t,posix:o}),h={glob:t,state:a,regex:s,posix:o,input:l,output:m,match:f,isMatch:p};return typeof i.onResult=="function"&&i.onResult(h),p===!1?(h.isMatch=!1,d?h:!1):c(l)?(typeof i.onIgnore=="function"&&i.onIgnore(h),h.isMatch=!1,d?h:!1):(typeof i.onMatch=="function"&&i.onMatch(h),d?h:!0)};return r&&(u.state=a),u};Ei.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?JTe.toPosixSlashes:null),a=t===n,c=a&&s?s(t):t;return a===!1&&(c=s?s(t):t,a=c===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Ei.matchBase(t,e,r,i):a=e.exec(c)),{isMatch:!!a,match:a,output:c}};Ei.matchBase=(t,e,r)=>(e instanceof RegExp?e:Ei.makeRe(e,r)).test(JTe.basename(t));Ei.isMatch=(t,e,r)=>Ei(e,r)(t);Ei.parse=(t,e)=>Array.isArray(t)?t.map(r=>Ei.parse(r,e)):ZK(t,{...e,fastpaths:!1});Ei.scan=(t,e)=>YXe(t,e);Ei.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let c=Ei.toRegex(a,e);return n===!0&&(c.state=t),c};Ei.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=ZK.fastpaths(t,e)),i.output||(i=ZK(t,e)),Ei.compileRe(i,e,r,n)};Ei.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};Ei.constants=KXe;ZTe.exports=Ei});var tCe=k((h0r,wd)=>{"use strict";var XXe=require("os"),gf=eCe(),JXe=XXe.platform()==="win32";function ZXe(t,e,r=!1){return e&&(e.windows===null||e.windows===void 0)&&(e={...e,windows:JXe}),gf(t,e,r)}wd.exports=ZXe;wd.exports.test=gf.test;wd.exports.matchBase=gf.matchBase;wd.exports.isMatch=gf.isMatch;wd.exports.parse=gf.parse;wd.exports.scan=gf.scan;wd.exports.compileRe=gf.compileRe;wd.exports.toRegex=gf.toRegex;wd.exports.makeRe=gf.makeRe});var qt=k((qSr,CCe)=>{CCe.exports={options:{usePureJavaScript:!1}}});var RCe=k((HSr,wCe)=>{var OQ={};wCe.exports=OQ;var ICe={};OQ.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=AJe(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join(`\r
`)}return n};OQ.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=ICe[e];if(!r){r=ICe[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var l=0;t[l]===o&&l<t.length-1;++l)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function AJe(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}});var br=k((jSr,DCe)=>{var ACe=qt(),PCe=RCe(),G=DCe.exports=ACe.util=ACe.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){G.nextTick=process.nextTick,typeof setImmediate=="function"?G.setImmediate=setImmediate:G.setImmediate=G.nextTick;return}if(typeof setImmediate=="function"){G.setImmediate=function(){return setImmediate.apply(void 0,arguments)},G.nextTick=function(a){return setImmediate(a)};return}if(G.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(l){l()})}};var s=a,t="forge.setImmediate",e=[];G.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=G.setImmediate;G.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}G.nextTick=G.setImmediate})();G.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;G.globalScope=function(){return G.isNodejs?global:typeof self>"u"?window:self}();G.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};G.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};G.isArrayBufferView=function(t){return t&&G.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function l2(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}G.ByteBuffer=MQ;function MQ(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(G.isArrayBuffer(t)||G.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof MQ||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}G.ByteStringBuffer=MQ;var PJe=4096;G.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>PJe&&(this.data.substr(0,1),this._constructedStringLength=0)};G.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};G.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};G.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};G.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};G.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};G.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(G.encodeUtf8(t))};G.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};G.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};G.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};G.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};G.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};G.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};G.ByteStringBuffer.prototype.putInt=function(t,e){l2(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};G.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};G.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};G.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};G.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};G.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};G.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};G.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};G.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};G.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};G.ByteStringBuffer.prototype.getInt=function(t){l2(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};G.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};G.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};G.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};G.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};G.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};G.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};G.ByteStringBuffer.prototype.copy=function(){var t=G.createBuffer(this.data);return t.read=this.read,t};G.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};G.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};G.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};G.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};G.ByteStringBuffer.prototype.toString=function(){return G.decodeUtf8(this.bytes())};function kJe(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=G.isArrayBuffer(t),n=G.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}G.DataBuffer=kJe;G.DataBuffer.prototype.length=function(){return this.write-this.read};G.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};G.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};G.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};G.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};G.DataBuffer.prototype.putBytes=function(t,e){if(G.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(G.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof G.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&G.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof G.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=G.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=G.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=G.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=G.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=G.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};G.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};G.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};G.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};G.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};G.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};G.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};G.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};G.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};G.DataBuffer.prototype.putInt=function(t,e){l2(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};G.DataBuffer.prototype.putSignedInt=function(t,e){return l2(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};G.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};G.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};G.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};G.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};G.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};G.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};G.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};G.DataBuffer.prototype.getInt=function(t){l2(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};G.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};G.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};G.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};G.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};G.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};G.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};G.DataBuffer.prototype.copy=function(){return new G.DataBuffer(this)};G.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};G.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};G.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};G.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};G.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return G.binary.raw.encode(e);if(t==="hex")return G.binary.hex.encode(e);if(t==="base64")return G.binary.base64.encode(e);if(t==="utf8")return G.text.utf8.decode(e);if(t==="utf16")return G.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};G.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=G.encodeUtf8(t)),new G.ByteBuffer(t)};G.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};G.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};G.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};G.bytesToHex=function(t){return G.createBuffer(t).toHex()};G.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Ag="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Pg=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],kCe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";G.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=Ag.charAt(i>>2),r+=Ag.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Ag.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":Ag.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};G.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=Pg[t.charCodeAt(s++)-43],n=Pg[t.charCodeAt(s++)-43],i=Pg[t.charCodeAt(s++)-43],o=Pg[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};G.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};G.decodeUtf8=function(t){return decodeURIComponent(escape(t))};G.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:PCe.encode,decode:PCe.decode}};G.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};G.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};G.binary.hex.encode=G.bytesToHex;G.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};G.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=Ag.charAt(i>>2),r+=Ag.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Ag.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":Ag.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};G.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,c=0,u=r;c<t.length;)i=Pg[t.charCodeAt(c++)-43],o=Pg[t.charCodeAt(c++)-43],s=Pg[t.charCodeAt(c++)-43],a=Pg[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,s!==64&&(n[u++]=(o&15)<<4|s>>2,a!==64&&(n[u++]=(s&3)<<6|a));return e?u-r:n.subarray(0,u)};G.binary.base58.encode=function(t,e){return G.binary.baseN.encode(t,kCe,e)};G.binary.base58.decode=function(t,e){return G.binary.baseN.decode(t,kCe,e)};G.text={utf8:{},utf16:{}};G.text.utf8.encode=function(t,e,r){t=G.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};G.text.utf8.decode=function(t){return G.decodeUtf8(String.fromCharCode.apply(null,t))};G.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};G.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};G.deflate=function(t,e,r){if(e=G.decode64(t.deflate(G.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};G.inflate=function(t,e,r){var n=t.inflate(G.encode64(e)).rval;return n===null?null:G.decode64(n)};var FQ=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=G.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},UQ=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(G.decode64(r))),r},DJe=function(t,e,r,n){var i=UQ(t,e);i===null&&(i={}),i[r]=n,FQ(t,e,i)},NJe=function(t,e,r){var n=UQ(t,e);return n!==null&&(n=r in n?n[r]:null),n},LJe=function(t,e,r){var n=UQ(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),FQ(t,e,n)}},OJe=function(t,e){FQ(t,e,null)},K6=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};G.setItem=function(t,e,r,n,i){K6(DJe,arguments,i)};G.getItem=function(t,e,r,n){return K6(NJe,arguments,n)};G.removeItem=function(t,e,r,n){K6(LJe,arguments,n)};G.clearItems=function(t,e,r){K6(OJe,arguments,r)};G.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};G.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};G.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")};G.formatSize=function(t){return t>=1073741824?t=G.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=G.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=G.formatNumber(t/1024,0)+" KiB":t=G.formatNumber(t,0)+" bytes",t};G.bytesFromIP=function(t){return t.indexOf(".")!==-1?G.bytesFromIPv4(t):t.indexOf(":")!==-1?G.bytesFromIPv6(t):null};G.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=G.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};G.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=G.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=G.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};G.bytesToIP=function(t){return t.length===4?G.bytesToIPv4(t):t.length===16?G.bytesToIPv6(t):null};G.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};G.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=G.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};G.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in G&&!t.update)return e(null,G.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return G.cores=navigator.hardwareConcurrency,e(null,G.cores);if(typeof Worker>"u")return G.cores=1,e(null,G.cores);if(typeof Blob>"u")return G.cores=2,e(null,G.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var u=Math.floor(s.reduce(function(l,d){return l+d},0)/s.length);return G.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,G.cores)}i(c,function(l,d){s.push(o(c,d)),n(s,a-1,c)})}function i(s,a){for(var c=[],u=[],l=0;l<s;++l){var d=new Worker(r);d.addEventListener("message",function(p){if(u.push(p.data),u.length===s){for(var f=0;f<s;++f)c[f].terminate();a(null,u)}}),c.push(d)}for(var l=0;l<s;++l)c[l].postMessage(l)}function o(s,a){for(var c=[],u=0;u<s;++u)for(var l=a[u],d=c[u]=[],p=0;p<s;++p)if(u!==p){var f=a[p];(l.st>f.st&&l.st<f.et||f.st>l.st&&f.st<l.et)&&d.push(p)}return c.reduce(function(m,h){return Math.max(m,h.length)},0)}}});var Q6=k((GSr,NCe)=>{var Eo=qt();br();NCe.exports=Eo.cipher=Eo.cipher||{};Eo.cipher.algorithms=Eo.cipher.algorithms||{};Eo.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Eo.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Eo.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Eo.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Eo.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Eo.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Eo.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Eo.cipher.algorithms[t]=e};Eo.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Eo.cipher.algorithms?Eo.cipher.algorithms[t]:null};var BQ=Eo.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};BQ.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Eo.util.createBuffer(),this.output=t.output||Eo.util.createBuffer(),this.mode.start(e)};BQ.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BQ.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var HQ=k((VSr,LCe)=>{var So=qt();br();So.cipher=So.cipher||{};var Xt=LCe.exports=So.cipher.modes=So.cipher.modes||{};Xt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Xt.ecb.prototype.start=function(t){};Xt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Xt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Xt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Xt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Xt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Xt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=X6(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Xt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Xt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Xt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Xt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Xt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=So.util.createBuffer(),this._partialBytes=0};Xt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=X6(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Xt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Xt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Xt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=So.util.createBuffer(),this._partialBytes=0};Xt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=X6(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Xt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Xt.ofb.prototype.decrypt=Xt.ofb.prototype.encrypt;Xt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=So.util.createBuffer(),this._partialBytes=0};Xt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=X6(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Xt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}J6(this._inBlock)};Xt.ctr.prototype.decrypt=Xt.ctr.prototype.encrypt;Xt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=So.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Xt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=So.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=So.util.createBuffer(t.additionalData):r=So.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=So.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(qQ(n*8)))}this._inBlock=this._j0.slice(0),J6(this._inBlock),this._partialBytes=0,r=So.util.createBuffer(r),this._aDataLength=qQ(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Xt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),J6(this._inBlock)};Xt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),J6(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Xt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=So.util.createBuffer();var n=this._aDataLength.concat(qQ(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Xt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Xt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Xt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Xt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Xt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,u=(n-1-s%n)*e;a[c]=1<<e-1<<u,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};Xt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function X6(t,e){if(typeof t=="string"&&(t=So.util.createBuffer(t)),So.util.isArray(t)&&t.length>4){var r=t;t=So.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!So.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function J6(t){t[t.length-1]=t[t.length-1]+1&4294967295}function qQ(t){return[t/4294967296|0,t&4294967295]}});var kg=k((zSr,UCe)=>{var ln=qt();Q6();HQ();br();UCe.exports=ln.aes=ln.aes||{};ln.aes.startEncrypting=function(t,e,r,n){var i=Z6({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ln.aes.createEncryptionCipher=function(t,e){return Z6({key:t,output:null,decrypt:!1,mode:e})};ln.aes.startDecrypting=function(t,e,r,n){var i=Z6({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ln.aes.createDecryptionCipher=function(t,e){return Z6({key:t,output:null,decrypt:!0,mode:e})};ln.aes.Algorithm=function(t,e){VQ||MCe();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return GQ(r._w,n,i,!1)},decrypt:function(n,i){return GQ(r._w,n,i,!0)}}}),r._init=!1};ln.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ln.util.createBuffer(e);else if(ln.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ln.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ln.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ln.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=FCe(e,t.decrypt&&!s),this._init=!0}};ln.aes._expandKey=function(t,e){return VQ||MCe(),FCe(t,e)};ln.aes._updateBlock=GQ;WE("AES-ECB",ln.cipher.modes.ecb);WE("AES-CBC",ln.cipher.modes.cbc);WE("AES-CFB",ln.cipher.modes.cfb);WE("AES-OFB",ln.cipher.modes.ofb);WE("AES-CTR",ln.cipher.modes.ctr);WE("AES-GCM",ln.cipher.modes.gcm);function WE(t,e){var r=function(){return new ln.aes.Algorithm(t,e)};ln.cipher.registerAlgorithm(t,r)}var VQ=!1,$E=4,Ys,jQ,OCe,Ty,Yu;function MCe(){VQ=!0,OCe=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Ys=new Array(256),jQ=new Array(256),Ty=new Array(4),Yu=new Array(4);for(var e=0;e<4;++e)Ty[e]=new Array(256),Yu[e]=new Array(256);for(var r=0,n=0,i,o,s,a,c,u,l,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Ys[r]=a,jQ[a]=r,c=t[a],i=t[r],o=t[i],s=t[o],u=c<<24^a<<16^a<<8^(a^c),l=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var d=0;d<4;++d)Ty[d][r]=u,Yu[d][a]=l,u=u<<24|u>>>8,l=l<<24|l>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function FCe(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=$E*s,c=o;c<a;++c)n=r[c-1],c%o===0?(n=Ys[n>>>16&255]<<24^Ys[n>>>8&255]<<16^Ys[n&255]<<8^Ys[n>>>24]^OCe[i]<<24,i++):o>6&&c%o===4&&(n=Ys[n>>>24]<<24^Ys[n>>>16&255]<<16^Ys[n>>>8&255]<<8^Ys[n&255]),r[c]=r[c-o]^n;if(e){var u,l=Yu[0],d=Yu[1],p=Yu[2],f=Yu[3],m=r.slice(0);a=r.length;for(var c=0,h=a-$E;c<a;c+=$E,h-=$E)if(c===0||c===a-$E)m[c]=r[h],m[c+1]=r[h+3],m[c+2]=r[h+2],m[c+3]=r[h+1];else for(var g=0;g<$E;++g)u=r[h+g],m[c+(3&-g)]=l[Ys[u>>>24]]^d[Ys[u>>>16&255]]^p[Ys[u>>>8&255]]^f[Ys[u&255]];r=m}return r}function GQ(t,e,r,n){var i=t.length/4-1,o,s,a,c,u;n?(o=Yu[0],s=Yu[1],a=Yu[2],c=Yu[3],u=jQ):(o=Ty[0],s=Ty[1],a=Ty[2],c=Ty[3],u=Ys);var l,d,p,f,m,h,g;l=e[0]^t[0],d=e[n?3:1]^t[1],p=e[2]^t[2],f=e[n?1:3]^t[3];for(var v=3,b=1;b<i;++b)m=o[l>>>24]^s[d>>>16&255]^a[p>>>8&255]^c[f&255]^t[++v],h=o[d>>>24]^s[p>>>16&255]^a[f>>>8&255]^c[l&255]^t[++v],g=o[p>>>24]^s[f>>>16&255]^a[l>>>8&255]^c[d&255]^t[++v],f=o[f>>>24]^s[l>>>16&255]^a[d>>>8&255]^c[p&255]^t[++v],l=m,d=h,p=g;r[0]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[f&255]^t[++v],r[n?3:1]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^t[++v],r[2]=u[p>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[n?1:3]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++v]}function Z6(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ln.cipher.createDecipher(r,t.key):n=ln.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof ln.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Dg=k(($Sr,BCe)=>{var d2=qt();d2.pki=d2.pki||{};var zQ=BCe.exports=d2.pki.oids=d2.oids=d2.oids||{};function Ie(t,e){zQ[t]=e,zQ[e]=t}function Nr(t,e){zQ[t]=e}Ie("1.2.840.113549.1.1.1","rsaEncryption");Ie("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ie("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ie("1.2.840.113549.1.1.7","RSAES-OAEP");Ie("1.2.840.113549.1.1.8","mgf1");Ie("1.2.840.113549.1.1.9","pSpecified");Ie("1.2.840.113549.1.1.10","RSASSA-PSS");Ie("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ie("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ie("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ie("1.3.101.112","EdDSA25519");Ie("1.2.840.10040.4.3","dsa-with-sha1");Ie("1.3.14.3.2.7","desCBC");Ie("1.3.14.3.2.26","sha1");Ie("1.3.14.3.2.29","sha1WithRSASignature");Ie("2.16.840.1.101.3.4.2.1","sha256");Ie("2.16.840.1.101.3.4.2.2","sha384");Ie("2.16.840.1.101.3.4.2.3","sha512");Ie("2.16.840.1.101.3.4.2.4","sha224");Ie("2.16.840.1.101.3.4.2.5","sha512-224");Ie("2.16.840.1.101.3.4.2.6","sha512-256");Ie("1.2.840.113549.2.2","md2");Ie("1.2.840.113549.2.5","md5");Ie("1.2.840.113549.1.7.1","data");Ie("1.2.840.113549.1.7.2","signedData");Ie("1.2.840.113549.1.7.3","envelopedData");Ie("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ie("1.2.840.113549.1.7.5","digestedData");Ie("1.2.840.113549.1.7.6","encryptedData");Ie("1.2.840.113549.1.9.1","emailAddress");Ie("1.2.840.113549.1.9.2","unstructuredName");Ie("1.2.840.113549.1.9.3","contentType");Ie("1.2.840.113549.1.9.4","messageDigest");Ie("1.2.840.113549.1.9.5","signingTime");Ie("1.2.840.113549.1.9.6","counterSignature");Ie("1.2.840.113549.1.9.7","challengePassword");Ie("1.2.840.113549.1.9.8","unstructuredAddress");Ie("1.2.840.113549.1.9.14","extensionRequest");Ie("1.2.840.113549.1.9.20","friendlyName");Ie("1.2.840.113549.1.9.21","localKeyId");Ie("1.2.840.113549.1.9.22.1","x509Certificate");Ie("1.2.840.113549.1.12.10.1.1","keyBag");Ie("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ie("1.2.840.113549.1.12.10.1.3","certBag");Ie("1.2.840.113549.1.12.10.1.4","crlBag");Ie("1.2.840.113549.1.12.10.1.5","secretBag");Ie("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ie("1.2.840.113549.1.5.13","pkcs5PBES2");Ie("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ie("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ie("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ie("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ie("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ie("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ie("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ie("1.2.840.113549.2.7","hmacWithSHA1");Ie("1.2.840.113549.2.8","hmacWithSHA224");Ie("1.2.840.113549.2.9","hmacWithSHA256");Ie("1.2.840.113549.2.10","hmacWithSHA384");Ie("1.2.840.113549.2.11","hmacWithSHA512");Ie("1.2.840.113549.3.7","des-EDE3-CBC");Ie("2.16.840.1.101.3.4.1.2","aes128-CBC");Ie("2.16.840.1.101.3.4.1.22","aes192-CBC");Ie("2.16.840.1.101.3.4.1.42","aes256-CBC");Ie("2.5.4.3","commonName");Ie("2.5.4.4","surname");Ie("2.5.4.5","serialNumber");Ie("2.5.4.6","countryName");Ie("2.5.4.7","localityName");Ie("2.5.4.8","stateOrProvinceName");Ie("2.5.4.9","streetAddress");Ie("2.5.4.10","organizationName");Ie("2.5.4.11","organizationalUnitName");Ie("2.5.4.12","title");Ie("2.5.4.13","description");Ie("2.5.4.15","businessCategory");Ie("2.5.4.17","postalCode");Ie("2.5.4.42","givenName");Ie("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ie("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ie("2.16.840.1.113730.1.1","nsCertType");Ie("2.16.840.1.113730.1.13","nsComment");Nr("2.5.29.1","authorityKeyIdentifier");Nr("2.5.29.2","keyAttributes");Nr("2.5.29.3","certificatePolicies");Nr("2.5.29.4","keyUsageRestriction");Nr("2.5.29.5","policyMapping");Nr("2.5.29.6","subtreesConstraint");Nr("2.5.29.7","subjectAltName");Nr("2.5.29.8","issuerAltName");Nr("2.5.29.9","subjectDirectoryAttributes");Nr("2.5.29.10","basicConstraints");Nr("2.5.29.11","nameConstraints");Nr("2.5.29.12","policyConstraints");Nr("2.5.29.13","basicConstraints");Ie("2.5.29.14","subjectKeyIdentifier");Ie("2.5.29.15","keyUsage");Nr("2.5.29.16","privateKeyUsagePeriod");Ie("2.5.29.17","subjectAltName");Ie("2.5.29.18","issuerAltName");Ie("2.5.29.19","basicConstraints");Nr("2.5.29.20","cRLNumber");Nr("2.5.29.21","cRLReason");Nr("2.5.29.22","expirationDate");Nr("2.5.29.23","instructionCode");Nr("2.5.29.24","invalidityDate");Nr("2.5.29.25","cRLDistributionPoints");Nr("2.5.29.26","issuingDistributionPoint");Nr("2.5.29.27","deltaCRLIndicator");Nr("2.5.29.28","issuingDistributionPoint");Nr("2.5.29.29","certificateIssuer");Nr("2.5.29.30","nameConstraints");Ie("2.5.29.31","cRLDistributionPoints");Ie("2.5.29.32","certificatePolicies");Nr("2.5.29.33","policyMappings");Nr("2.5.29.34","policyConstraints");Ie("2.5.29.35","authorityKeyIdentifier");Nr("2.5.29.36","policyConstraints");Ie("2.5.29.37","extKeyUsage");Nr("2.5.29.46","freshestCRL");Nr("2.5.29.54","inhibitAnyPolicy");Ie("1.3.6.1.4.1.11129.2.4.2","timestampList");Ie("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ie("1.3.6.1.5.5.7.3.1","serverAuth");Ie("1.3.6.1.5.5.7.3.2","clientAuth");Ie("1.3.6.1.5.5.7.3.3","codeSigning");Ie("1.3.6.1.5.5.7.3.4","emailProtection");Ie("1.3.6.1.5.5.7.3.8","timeStamping")});var Ku=k((WSr,HCe)=>{var En=qt();br();Dg();var Ue=HCe.exports=En.asn1=En.asn1||{};Ue.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Ue.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Ue.create=function(t,e,r,n,i){if(En.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||En.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=Ue.copy(a)),a};Ue.copy=function(t,e){var r;if(En.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(Ue.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Ue.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Ue.equals=function(t,e,r){if(En.util.isArray(t)){if(!En.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Ue.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Ue.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};Ue.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function p2(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var MJe=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;p2(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Ue.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=En.util.createBuffer(t));var r=t.length(),n=e8(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function e8(t,e,r,n){var i;p2(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var c=MJe(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var l,d,p=(o&32)===32;if(p)if(l=[],c===void 0)for(;;){if(p2(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),l.push(e8(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),l.push(e8(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(l===void 0&&s===Ue.Class.UNIVERSAL&&a===Ue.Type.BITSTRING&&(d=t.bytes(c)),l===void 0&&n.decodeBitStrings&&s===Ue.Class.UNIVERSAL&&a===Ue.Type.BITSTRING&&c>1){var f=t.read,m=e,h=0;if(a===Ue.Type.BITSTRING&&(p2(t,e,1),h=t.getByte(),e--),h===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},v=e8(t,e,r+1,g),b=i-t.length();e-=b,a==Ue.Type.BITSTRING&&b++;var y=v.tagClass;b===c&&(y===Ue.Class.UNIVERSAL||y===Ue.Class.CONTEXT_SPECIFIC)&&(l=[v])}catch{}l===void 0&&(t.read=f,e=m)}if(l===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===Ue.Type.BMPSTRING)for(l="";c>0;c-=2)p2(t,e,2),l+=String.fromCharCode(t.getInt16()),e-=2;else l=t.getBytes(c),e-=c}var E=d===void 0?null:{bitStringContents:d};return Ue.create(s,a,p,l,E)}Ue.toDer=function(t){var e=En.util.createBuffer(),r=t.tagClass|t.type,n=En.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=Ue.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(Ue.toDer(t.value[o]))}else if(t.type===Ue.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===Ue.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};Ue.oidToDer=function(t){var e=t.split("."),r=En.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};Ue.derToOid=function(t){var e;typeof t=="string"&&(t=En.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};Ue.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var l=parseInt(t.substr(u+1,2),10),d=parseInt(t.substr(u+4,2),10),p=l*60+d;p*=6e4,c==="+"?e.setTime(+e-p):e.setTime(+e+p)}return e};Ue.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,l=!1;t.charAt(t.length-1)==="Z"&&(l=!0);var d=t.length-5,p=t.charAt(d);if(p==="+"||p==="-"){var f=parseInt(t.substr(d+1,2),10),m=parseInt(t.substr(d+4,2),10);u=f*60+m,u*=6e4,p==="+"&&(u*=-1),l=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,s,a,c)),e};Ue.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ue.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ue.integerToDer=function(t){var e=En.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Ue.derToInteger=function(t){typeof t=="string"&&(t=En.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Ue.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&En.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=Ue.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var qCe=/[^\\u0000-\\u00ff]/;Ue.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case Ue.Class.UNIVERSAL:n+="Universal:";break;case Ue.Class.APPLICATION:n+="Application:";break;case Ue.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Ue.Class.PRIVATE:n+="Private:";break}if(t.tagClass===Ue.Class.UNIVERSAL)switch(n+=t.type,t.type){case Ue.Type.NONE:n+=" (None)";break;case Ue.Type.BOOLEAN:n+=" (Boolean)";break;case Ue.Type.INTEGER:n+=" (Integer)";break;case Ue.Type.BITSTRING:n+=" (Bit string)";break;case Ue.Type.OCTETSTRING:n+=" (Octet string)";break;case Ue.Type.NULL:n+=" (Null)";break;case Ue.Type.OID:n+=" (Object Identifier)";break;case Ue.Type.ODESC:n+=" (Object Descriptor)";break;case Ue.Type.EXTERNAL:n+=" (External or Instance of)";break;case Ue.Type.REAL:n+=" (Real)";break;case Ue.Type.ENUMERATED:n+=" (Enumerated)";break;case Ue.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Ue.Type.UTF8:n+=" (UTF8)";break;case Ue.Type.ROID:n+=" (Relative Object Identifier)";break;case Ue.Type.SEQUENCE:n+=" (Sequence)";break;case Ue.Type.SET:n+=" (Set)";break;case Ue.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Ue.Type.IA5String:n+=" (IA5String (ASCII))";break;case Ue.Type.UTCTIME:n+=" (UTC time)";break;case Ue.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Ue.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=Ue.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===Ue.Type.OID){var c=Ue.derToOid(t.value);n+=c,En.pki&&En.pki.oids&&c in En.pki.oids&&(n+=" ("+En.pki.oids[c]+") ")}if(t.type===Ue.Type.INTEGER)try{n+=Ue.derToInteger(t.value)}catch{n+="0x"+En.util.bytesToHex(t.value)}else if(t.type===Ue.Type.BITSTRING){if(t.value.length>1?n+="0x"+En.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===Ue.Type.OCTETSTRING)qCe.test(t.value)||(n+="("+t.value+") "),n+="0x"+En.util.bytesToHex(t.value);else if(t.type===Ue.Type.UTF8)try{n+=En.util.decodeUtf8(t.value)}catch(l){if(l.message==="URI malformed")n+="0x"+En.util.bytesToHex(t.value)+" (malformed UTF8)";else throw l}else t.type===Ue.Type.PRINTABLESTRING||t.type===Ue.Type.IA5String?n+=t.value:qCe.test(t.value)?n+="0x"+En.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Rd=k((YSr,jCe)=>{var t8=qt();jCe.exports=t8.md=t8.md||{};t8.md.algorithms=t8.md.algorithms||{}});var YE=k((KSr,GCe)=>{var yf=qt();Rd();br();var FJe=GCe.exports=yf.hmac=yf.hmac||{};FJe.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in yf.md.algorithms)e=yf.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=yf.util.createBuffer(s);else if(yf.util.isArray(s)){var a=s;s=yf.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=yf.util.createBuffer(),n=yf.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var a=s.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var n8=k((QSr,WCe)=>{var Ad=qt();Rd();br();var zCe=WCe.exports=Ad.md5=Ad.md5||{};Ad.md.md5=Ad.md.algorithms.md5=zCe;zCe.create=function(){$Ce||UJe();var t=null,e=Ad.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Ad.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Ad.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),VCe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ad.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes($Q.substr(0,n.blockLength-s));for(var a,c=0,u=n.fullMessageLength.length-1;u>=0;--u)a=n.fullMessageLength[u]*8+c,c=a/4294967296>>>0,i.putInt32Le(a>>>0);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};VCe(l,r,i);var d=Ad.util.createBuffer();return d.putInt32Le(l.h0),d.putInt32Le(l.h1),d.putInt32Le(l.h2),d.putInt32Le(l.h3),d},n};var $Q=null,r8=null,f2=null,KE=null,$Ce=!1;function UJe(){$Q="\x80",$Q+=Ad.util.fillString("\0",64),r8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],f2=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],KE=new Array(64);for(var t=0;t<64;++t)KE[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);$Ce=!0}function VCe(t,e,r){for(var n,i,o,s,a,c,u,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,l=0;l<16;++l)e[l]=r.getInt32Le(),c=a^o&(s^a),n=i+c+KE[l]+e[l],u=f2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<32;++l)c=s^a&(o^s),n=i+c+KE[l]+e[r8[l]],u=f2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<48;++l)c=o^s^a,n=i+c+KE[l]+e[r8[l]],u=f2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;for(;l<64;++l)c=s^(o|~a),n=i+c+KE[l]+e[r8[l]],u=f2[l],i=a,a=s,s=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,d-=64}}});var Cy=k((XSr,KCe)=>{var o8=qt();br();var YCe=KCe.exports=o8.pem=o8.pem||{};YCe.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=i8(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=i8(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=i8(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=i8(t.headers[i]);return t.procType&&(r+=`\r
`),r+=o8.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};YCe.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:o8.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var l=c[u].replace(/\s+$/,""),d=u+1;d<c.length;++d){var p=c[d];if(!/\s/.test(p[0]))break;l+=p,u=d}if(o=l.match(n),o){for(var f={name:o[1],values:[]},m=o[2].split(","),h=0;h<m.length;++h)f.values.push(BJe(m[h]));if(a.procType)if(!a.contentDomain&&f.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function i8(t){for(var e=t.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function BJe(t){return t.replace(/^\s+/,"")}});var m2=k((JSr,XCe)=>{var Nn=qt();Q6();HQ();br();XCe.exports=Nn.des=Nn.des||{};Nn.des.startEncrypting=function(t,e,r,n){var i=s8({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Nn.des.createEncryptionCipher=function(t,e){return s8({key:t,output:null,decrypt:!1,mode:e})};Nn.des.startDecrypting=function(t,e,r,n){var i=s8({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Nn.des.createDecryptionCipher=function(t,e){return s8({key:t,output:null,decrypt:!0,mode:e})};Nn.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return QCe(r._keys,n,i,!1)},decrypt:function(n,i){return QCe(r._keys,n,i,!0)}}}),r._init=!1};Nn.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Nn.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=YJe(e),this._init=!0}};Pd("DES-ECB",Nn.cipher.modes.ecb);Pd("DES-CBC",Nn.cipher.modes.cbc);Pd("DES-CFB",Nn.cipher.modes.cfb);Pd("DES-OFB",Nn.cipher.modes.ofb);Pd("DES-CTR",Nn.cipher.modes.ctr);Pd("3DES-ECB",Nn.cipher.modes.ecb);Pd("3DES-CBC",Nn.cipher.modes.cbc);Pd("3DES-CFB",Nn.cipher.modes.cfb);Pd("3DES-OFB",Nn.cipher.modes.ofb);Pd("3DES-CTR",Nn.cipher.modes.ctr);function Pd(t,e){var r=function(){return new Nn.des.Algorithm(t,e)};Nn.cipher.registerAlgorithm(t,r)}var qJe=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],HJe=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],jJe=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],GJe=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],VJe=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],zJe=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],$Je=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],WJe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function YJe(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],h=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,y,E=0;E<h;E++){var x=t.getInt32(),R=t.getInt32();y=(x>>>4^R)&252645135,R^=y,x^=y<<4,y=(R>>>-16^x)&65535,x^=y,R^=y<<-16,y=(x>>>2^R)&858993459,R^=y,x^=y<<2,y=(R>>>-16^x)&65535,x^=y,R^=y<<-16,y=(x>>>1^R)&1431655765,R^=y,x^=y<<1,y=(R>>>8^x)&16711935,x^=y,R^=y<<8,y=(x>>>1^R)&1431655765,R^=y,x^=y<<1,y=x<<8|R>>>20&240,x=R<<24|R<<8&16711680|R>>>8&65280|R>>>24&240,R=y;for(var L=0;L<v.length;++L){v[L]?(x=x<<2|x>>>26,R=R<<2|R>>>26):(x=x<<1|x>>>27,R=R<<1|R>>>27),x&=-15,R&=-15;var O=e[x>>>28]|r[x>>>24&15]|n[x>>>20&15]|i[x>>>16&15]|o[x>>>12&15]|s[x>>>8&15]|a[x>>>4&15],z=c[R>>>28]|u[R>>>24&15]|l[R>>>20&15]|d[R>>>16&15]|p[R>>>12&15]|f[R>>>8&15]|m[R>>>4&15];y=(z>>>16^O)&65535,g[b++]=O^y,g[b++]=z^y<<16}}return g}function QCe(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],c=e[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var l=o[u+1],d=o[u+2],p=o[u];p!=l;p+=d){var f=c^t[p],m=(c>>>4|c<<28)^t[p+1];s=a,a=c,c=s^(HJe[f>>>24&63]|GJe[f>>>16&63]|zJe[f>>>8&63]|WJe[f&63]|qJe[m>>>24&63]|jJe[m>>>16&63]|VJe[m>>>8&63]|$Je[m&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,r[0]=a,r[1]=c}function s8(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Nn.cipher.createDecipher(r,t.key):n=Nn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Nn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var a8=k((ZSr,JCe)=>{var Ks=qt();YE();Rd();br();var KJe=Ks.pkcs5=Ks.pkcs5||{},bf;Ks.util.isNodejs&&!Ks.options.usePureJavaScript&&(bf=require("crypto"));JCe.exports=Ks.pbkdf2=KJe.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Ks.util.isNodejs&&!Ks.options.usePureJavaScript&&bf.pbkdf2&&(i===null||typeof i!="object")&&(bf.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?bf.pbkdf2Sync.length===4?bf.pbkdf2(t,e,r,n,function(y,E){if(y)return o(y);o(null,E.toString("binary"))}):bf.pbkdf2(t,e,r,n,i,function(y,E){if(y)return o(y);o(null,E.toString("binary"))}):bf.pbkdf2Sync.length===4?bf.pbkdf2Sync(t,e,r,n).toString("binary"):bf.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Ks.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ks.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),u=n-(c-1)*s,l=Ks.hmac.create();l.start(i,t);var d="",p,f,m;if(!o){for(var h=1;h<=c;++h){l.start(null,null),l.update(e),l.update(Ks.util.int32ToBytes(h)),p=m=l.digest().getBytes();for(var g=2;g<=r;++g)l.start(null,null),l.update(m),f=l.digest().getBytes(),p=Ks.util.xorBytes(p,f,s),m=f;d+=h<c?p:p.substr(0,u)}return d}var h=1,g;function v(){if(h>c)return o(null,d);l.start(null,null),l.update(e),l.update(Ks.util.int32ToBytes(h)),p=m=l.digest().getBytes(),g=2,b()}function b(){if(g<=r)return l.start(null,null),l.update(m),f=l.digest().getBytes(),p=Ks.util.xorBytes(p,f,s),m=f,++g,Ks.util.setImmediate(b);d+=h<c?p:p.substr(0,u),++h,v()}v()}});var YQ=k((eTr,nIe)=>{var kd=qt();Rd();br();var eIe=nIe.exports=kd.sha256=kd.sha256||{};kd.md.sha256=kd.md.algorithms.sha256=eIe;eIe.create=function(){tIe||QJe();var t=null,e=kd.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=kd.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=kd.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),ZCe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=kd.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(WQ.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};ZCe(d,r,i);var p=kd.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p.putInt32(d.h5),p.putInt32(d.h6),p.putInt32(d.h7),p},n};var WQ=null,tIe=!1,rIe=null;function QJe(){WQ="\x80",WQ+=kd.util.fillString("\0",64),rIe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],tIe=!0}function ZCe(t,e,r){for(var n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(l=t.h0,d=t.h1,p=t.h2,f=t.h3,m=t.h4,h=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=g^m&(h^g),o=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&d|p&(l^d),n=v+s+a+rIe[u]+e[u],i=o+c,v=g,g=h,h=m,m=f+n>>>0,f=p,p=d,d=l,l=n+i>>>0;t.h0=t.h0+l|0,t.h1=t.h1+d|0,t.h2=t.h2+p|0,t.h3=t.h3+f|0,t.h4=t.h4+m|0,t.h5=t.h5+h|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,b-=64}}});var KQ=k((tTr,iIe)=>{var Dd=qt();br();var c8=null;Dd.util.isNodejs&&!Dd.options.usePureJavaScript&&!process.versions["node-webkit"]&&(c8=require("crypto"));var XJe=iIe.exports=Dd.prng=Dd.prng||{};XJe.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,l){if(!l)return e.generateSync(u);var d=e.plugin.cipher,p=e.plugin.increment,f=e.plugin.formatKey,m=e.plugin.formatSeed,h=Dd.util.createBuffer();e.key=null,g();function g(v){if(v)return l(v);if(h.length()>=u)return l(null,h.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Dd.util.nextTick(function(){o(g)});var b=d(e.key,e.seed);e.generated+=b.length,h.putBytes(b),e.key=f(d(e.key,p(e.seed))),e.seed=m(d(e.key,e.seed)),Dd.util.setImmediate(g)}},e.generateSync=function(u){var l=e.plugin.cipher,d=e.plugin.increment,p=e.plugin.formatKey,f=e.plugin.formatSeed;e.key=null;for(var m=Dd.util.createBuffer();m.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var h=l(e.key,e.seed);e.generated+=h.length,m.putBytes(h),e.key=p(l(e.key,d(e.seed))),e.seed=f(l(e.key,e.seed))}return m.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return a(),u();var l=32-e.pools[0].messageLength<<5;e.seedFile(l,function(d,p){if(d)return u(d);e.collect(p),a(),u()})}function s(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var l=1,d=0;d<32;++d)e.reseeds%l===0&&(u.update(e.pools[d].digest().getBytes()),e.pools[d].start()),l=l<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var p=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(p),e.generated=0}function c(u){var l=null,d=Dd.util.globalScope,p=d.crypto||d.msCrypto;p&&p.getRandomValues&&(l=function(x){return p.getRandomValues(x)});var f=Dd.util.createBuffer();if(l)for(;f.length()<u;){var m=Math.max(1,Math.min(u-f.length(),65536)/4),h=new Uint32Array(Math.floor(m));try{l(h);for(var g=0;g<h.length;++g)f.putInt32(h[g])}catch(x){if(!(typeof QuotaExceededError<"u"&&x instanceof QuotaExceededError))throw x}}if(f.length()<u)for(var v,b,y,E=Math.floor(Math.random()*65536);f.length()<u;){b=16807*(E&65535),v=16807*(E>>16),b+=(v&32767)<<16,b+=v>>15,b=(b&2147483647)+(b>>31),E=b&4294967295;for(var g=0;g<3;++g)y=E>>>(g<<3),y^=Math.floor(Math.random()*256),f.putByte(y&255)}return f.getBytes(u)}return c8?(e.seedFile=function(u,l){c8.randomBytes(u,function(d,p){if(d)return l(d);l(null,p.toString())})},e.seedFileSync=function(u){return c8.randomBytes(u).toString()}):(e.seedFile=function(u,l){try{l(null,c(u))}catch(d){l(d)}},e.seedFileSync=c),e.collect=function(u){for(var l=u.length,d=0;d<l;++d)e.pools[e.pool].update(u.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,l){for(var d="",p=0;p<l;p+=8)d+=String.fromCharCode(u>>p&255);e.collect(d)},e.registerWorker=function(u){if(u===self)e.seedFile=function(d,p){function f(m){var h=m.data;h.forge&&h.forge.prng&&(self.removeEventListener("message",f),p(h.forge.prng.err,h.forge.prng.bytes))}self.addEventListener("message",f),self.postMessage({forge:{prng:{needed:d}}})};else{var l=function(d){var p=d.data;p.forge&&p.forge.prng&&e.seedFile(p.forge.prng.needed,function(f,m){u.postMessage({forge:{prng:{err:f,bytes:m}}})})};u.addEventListener("message",l)}},e}});var Jc=k((rTr,QQ)=>{var To=qt();kg();YQ();KQ();br();(function(){if(To.random&&To.random.getBytes){QQ.exports=To.random;return}(function(t){var e={},r=new Array(4),n=To.util.createBuffer();e.formatKey=function(d){var p=To.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),To.aes._expandKey(d,!1)},e.formatSeed=function(d){var p=To.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),d},e.cipher=function(d,p){return To.aes._updateBlock(d,p,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(d){return++d[3],d},e.md=To.md.sha256;function i(){var d=To.prng.create(e);return d.getBytes=function(p,f){return d.generate(p,f)},d.getBytesSync=function(p){return d.generate(p)},d}var o=i(),s=null,a=To.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(d){return c.getRandomValues(d)}),To.options.usePureJavaScript||!To.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var l in navigator)try{typeof navigator[l]=="string"&&(u+=navigator[l])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(d){o.collectInt(d.clientX,16),o.collectInt(d.clientY,16)}),t().keypress(function(d){o.collectInt(d.charCode,8)}))}if(!To.random)To.random=o;else for(var l in o)To.random[l]=o[l];To.random.createInstance=i,QQ.exports=To.random})(typeof jQuery<"u"?jQuery:null)})()});var JQ=k((nTr,aIe)=>{var Pa=qt();br();var XQ=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],oIe=[1,2,3,5],JJe=function(t,e){return t<<e&65535|(t&65535)>>16-e},ZJe=function(t,e){return(t&65535)>>e|t<<16-e&65535};aIe.exports=Pa.rc2=Pa.rc2||{};Pa.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Pa.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(XQ[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,XQ[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,XQ[r.at(a+1)^r.at(a+o)]);return r};var sIe=function(t,e,r){var n=!1,i=null,o=null,s=null,a,c,u,l,d=[];for(t=Pa.rc2.expandKey(t,e),u=0;u<64;u++)d.push(t.getInt16Le());r?(a=function(m){for(u=0;u<4;u++)m[u]+=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),m[u]=JJe(m[u],oIe[u]),l++},c=function(m){for(u=0;u<4;u++)m[u]+=d[m[(u+3)%4]&63]}):(a=function(m){for(u=3;u>=0;u--)m[u]=ZJe(m[u],oIe[u]),m[u]-=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),l--},c=function(m){for(u=3;u>=0;u--)m[u]-=d[m[(u+3)%4]&63]});var p=function(m){var h=[];for(u=0;u<4;u++){var g=i.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),h.push(g&65535)}l=r?0:63;for(var v=0;v<m.length;v++)for(var b=0;b<m[v][0];b++)m[v][1](h);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(h[u]):h[u]^=s.getInt16Le()),o.putInt16Le(h[u])},f=null;return f={start:function(m,h){m&&typeof m=="string"&&(m=Pa.util.createBuffer(m)),n=!1,i=Pa.util.createBuffer(),o=h||new Pa.util.createBuffer,s=m,f.output=o},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)p([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(m){var h=!0;if(r)if(m)h=m(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(h&&(n=!0,f.update()),!r&&(h=i.length()===0,h))if(m)h=m(8,o,!r);else{var v=o.length(),b=o.at(v-1);b>v?h=!1:o.truncate(b)}return h}},f};Pa.rc2.startEncrypting=function(t,e,r){var n=Pa.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Pa.rc2.createEncryptionCipher=function(t,e){return sIe(t,e,!0)};Pa.rc2.startDecrypting=function(t,e,r){var n=Pa.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Pa.rc2.createDecryptionCipher=function(t,e){return sIe(t,e,!1)}});var g2=k((iTr,hIe)=>{var ZQ=qt();hIe.exports=ZQ.jsbn=ZQ.jsbn||{};var _f,eZe=0xdeadbeefcafe,cIe=(eZe&16777215)==15715070;function ge(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}ZQ.jsbn.BigInteger=ge;function _r(){return new ge(null)}function tZe(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function rZe(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,l=a*c+u*s;c=s*c+((l&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(l>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function uIe(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,l=a*c+u*s;c=s*c+((l&16383)<<14)+r.data[n]+i,i=(c>>28)+(l>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(ge.prototype.am=uIe,_f=28):cIe&&navigator.appName=="Microsoft Internet Explorer"?(ge.prototype.am=rZe,_f=30):cIe&&navigator.appName!="Netscape"?(ge.prototype.am=tZe,_f=26):(ge.prototype.am=uIe,_f=28);ge.prototype.DB=_f;ge.prototype.DM=(1<<_f)-1;ge.prototype.DV=1<<_f;var eX=52;ge.prototype.FV=Math.pow(2,eX);ge.prototype.F1=eX-_f;ge.prototype.F2=2*_f-eX;var nZe="0123456789abcdefghijklmnopqrstuvwxyz",u8=new Array,QE,Zc;QE=48;for(Zc=0;Zc<=9;++Zc)u8[QE++]=Zc;QE=97;for(Zc=10;Zc<36;++Zc)u8[QE++]=Zc;QE=65;for(Zc=10;Zc<36;++Zc)u8[QE++]=Zc;function lIe(t){return nZe.charAt(t)}function dIe(t,e){var r=u8[t.charCodeAt(e)];return r??-1}function iZe(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function oZe(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Ng(t){var e=_r();return e.fromInt(t),e}function sZe(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:dIe(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&ge.ZERO.subTo(this,this)}function aZe(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function cZe(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=lIe(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=lIe(n));return i?o:"0"}function uZe(){var t=_r();return ge.ZERO.subTo(this,t),t}function lZe(){return this.s<0?this.negate():this}function dZe(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function l8(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function pZe(){return this.t<=0?0:this.DB*(this.t-1)+l8(this.data[this.t-1]^this.s&this.DM)}function fZe(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function mZe(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function hZe(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function gZe(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function vZe(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function yZe(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ge.ZERO.subTo(e,e)}function bZe(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function _Ze(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=_r());var o=_r(),s=this.s,a=t.s,c=this.DB-l8(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,l=o.data[u-1];if(l!=0){var d=l*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),p=this.FV/d,f=(1<<this.F1)/d,m=1<<this.F2,h=r.t,g=h-u,v=e??_r();for(o.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),ge.ONE.dlShiftTo(u,v),v.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--g>=0;){var b=r.data[--h]==l?this.DM:Math.floor(r.data[h]*p+(r.data[h-1]+m)*f);if((r.data[h]+=o.am(0,b,r,g,0,u))<b)for(o.dlShiftTo(g,v),r.subTo(v,r);r.data[h]<--b;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),s!=a&&ge.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&ge.ZERO.subTo(r,r)}}}function xZe(t){var e=_r();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ge.ZERO)>0&&t.subTo(e,e),e}function Iy(t){this.m=t}function EZe(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function SZe(t){return t}function TZe(t){t.divRemTo(this.m,null,t)}function CZe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function IZe(t,e){t.squareTo(e),this.reduce(e)}Iy.prototype.convert=EZe;Iy.prototype.revert=SZe;Iy.prototype.reduce=TZe;Iy.prototype.mulTo=CZe;Iy.prototype.sqrTo=IZe;function wZe(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function wy(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function RZe(t){var e=_r();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ge.ZERO)>0&&this.m.subTo(e,e),e}function AZe(t){var e=_r();return t.copyTo(e),this.reduce(e),e}function PZe(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function kZe(t,e){t.squareTo(e),this.reduce(e)}function DZe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}wy.prototype.convert=RZe;wy.prototype.revert=AZe;wy.prototype.reduce=PZe;wy.prototype.mulTo=DZe;wy.prototype.sqrTo=kZe;function NZe(){return(this.t>0?this.data[0]&1:this.s)==0}function LZe(t,e){if(t>4294967295||t<1)return ge.ONE;var r=_r(),n=_r(),i=e.convert(this),o=l8(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function OZe(t,e){var r;return t<256||e.isEven()?r=new Iy(e):r=new wy(e),this.exp(t,r)}ge.prototype.copyTo=iZe;ge.prototype.fromInt=oZe;ge.prototype.fromString=sZe;ge.prototype.clamp=aZe;ge.prototype.dlShiftTo=fZe;ge.prototype.drShiftTo=mZe;ge.prototype.lShiftTo=hZe;ge.prototype.rShiftTo=gZe;ge.prototype.subTo=vZe;ge.prototype.multiplyTo=yZe;ge.prototype.squareTo=bZe;ge.prototype.divRemTo=_Ze;ge.prototype.invDigit=wZe;ge.prototype.isEven=NZe;ge.prototype.exp=LZe;ge.prototype.toString=cZe;ge.prototype.negate=uZe;ge.prototype.abs=lZe;ge.prototype.compareTo=dZe;ge.prototype.bitLength=pZe;ge.prototype.mod=xZe;ge.prototype.modPowInt=OZe;ge.ZERO=Ng(0);ge.ONE=Ng(1);function MZe(){var t=_r();return this.copyTo(t),t}function FZe(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function UZe(){return this.t==0?this.s:this.data[0]<<24>>24}function BZe(){return this.t==0?this.s:this.data[0]<<16>>16}function qZe(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function HZe(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function jZe(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Ng(r),i=_r(),o=_r(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function GZe(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var c=dIe(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&ge.ZERO.subTo(this,this)}function VZe(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ge.ONE.shiftLeft(t-1),tX,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ge.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function zZe(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function $Ze(t){return this.compareTo(t)==0}function WZe(t){return this.compareTo(t)<0?this:t}function YZe(t){return this.compareTo(t)>0?this:t}function KZe(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function QZe(t,e){return t&e}function XZe(t){var e=_r();return this.bitwiseTo(t,QZe,e),e}function tX(t,e){return t|e}function JZe(t){var e=_r();return this.bitwiseTo(t,tX,e),e}function pIe(t,e){return t^e}function ZZe(t){var e=_r();return this.bitwiseTo(t,pIe,e),e}function fIe(t,e){return t&~e}function eet(t){var e=_r();return this.bitwiseTo(t,fIe,e),e}function tet(){for(var t=_r(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function ret(t){var e=_r();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function net(t){var e=_r();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function iet(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function oet(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+iet(this.data[t]);return this.s<0?this.t*this.DB:-1}function set(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function aet(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=set(this.data[r]^e);return t}function cet(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function uet(t,e){var r=ge.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function det(t){return this.changeBit(t,tX)}function pet(t){return this.changeBit(t,fIe)}function fet(t){return this.changeBit(t,pIe)}function met(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function het(t){var e=_r();return this.addTo(t,e),e}function get(t){var e=_r();return this.subTo(t,e),e}function vet(t){var e=_r();return this.multiplyTo(t,e),e}function yet(t){var e=_r();return this.divRemTo(t,e,null),e}function bet(t){var e=_r();return this.divRemTo(t,null,e),e}function _et(t){var e=_r(),r=_r();return this.divRemTo(t,e,r),new Array(e,r)}function xet(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Eet(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function h2(){}function mIe(t){return t}function Tet(t,e,r){t.multiplyTo(e,r)}function Cet(t,e){t.squareTo(e)}h2.prototype.convert=mIe;h2.prototype.revert=mIe;h2.prototype.mulTo=Tet;h2.prototype.sqrTo=Cet;function Iet(t){return this.exp(t,new h2)}function wet(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function Ret(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function XE(t){this.r2=_r(),this.q3=_r(),ge.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Aet(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=_r();return t.copyTo(e),this.reduce(e),e}function Pet(t){return t}function ket(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Det(t,e){t.squareTo(e),this.reduce(e)}function Net(t,e,r){t.multiplyTo(e,r),this.reduce(r)}XE.prototype.convert=Aet;XE.prototype.revert=Pet;XE.prototype.reduce=ket;XE.prototype.mulTo=Net;XE.prototype.sqrTo=Det;function Let(t,e){var r=t.bitLength(),n,i=Ng(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new Iy(e):e.isEven()?o=new XE(e):o=new wy(e);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=o.convert(this),n>1){var l=_r();for(o.sqrTo(s[1],l);a<=u;)s[a]=_r(),o.mulTo(l,s[a-2],s[a]),a+=2}var d=t.t-1,p,f=!0,m=_r(),h;for(r=l8(t.data[d])-1;d>=0;){for(r>=c?p=t.data[d]>>r-c&u:(p=(t.data[d]&(1<<r+1)-1)<<c-r,d>0&&(p|=t.data[d-1]>>this.DB+r-c)),a=n;!(p&1);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),f)s[p].copyTo(i),f=!1;else{for(;a>1;)o.sqrTo(i,m),o.sqrTo(m,i),a-=2;a>0?o.sqrTo(i,m):(h=i,i=m,m=h),o.mulTo(m,s[p],i)}for(;d>=0&&!(t.data[d]&1<<r);)o.sqrTo(i,m),h=i,i=m,m=h,--r<0&&(r=this.DB-1,--d)}return o.revert(i)}function Oet(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Met(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function Fet(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ge.ZERO;for(var r=t.clone(),n=this.clone(),i=Ng(1),o=Ng(0),s=Ng(0),a=Ng(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(ge.ONE)!=0)return ge.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Qu=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Uet=(1<<26)/Qu[Qu.length-1];function Bet(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Qu[Qu.length-1]){for(e=0;e<Qu.length;++e)if(r.data[0]==Qu[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Qu.length;){for(var n=Qu[e],i=e+1;i<Qu.length&&n<Uet;)n*=Qu[i++];for(n=r.modInt(n);e<i;)if(n%Qu[e++]==0)return!1}return r.millerRabin(t)}function qet(t){var e=this.subtract(ge.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=Het(),o,s=0;s<t;++s){do o=new ge(this.bitLength(),i);while(o.compareTo(ge.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(ge.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(ge.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function Het(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ge.prototype.chunkSize=qZe;ge.prototype.toRadix=jZe;ge.prototype.fromRadix=GZe;ge.prototype.fromNumber=VZe;ge.prototype.bitwiseTo=KZe;ge.prototype.changeBit=uet;ge.prototype.addTo=met;ge.prototype.dMultiply=xet;ge.prototype.dAddOffset=Eet;ge.prototype.multiplyLowerTo=wet;ge.prototype.multiplyUpperTo=Ret;ge.prototype.modInt=Met;ge.prototype.millerRabin=qet;ge.prototype.clone=MZe;ge.prototype.intValue=FZe;ge.prototype.byteValue=UZe;ge.prototype.shortValue=BZe;ge.prototype.signum=HZe;ge.prototype.toByteArray=zZe;ge.prototype.equals=$Ze;ge.prototype.min=WZe;ge.prototype.max=YZe;ge.prototype.and=XZe;ge.prototype.or=JZe;ge.prototype.xor=ZZe;ge.prototype.andNot=eet;ge.prototype.not=tet;ge.prototype.shiftLeft=ret;ge.prototype.shiftRight=net;ge.prototype.getLowestSetBit=oet;ge.prototype.bitCount=aet;ge.prototype.testBit=cet;ge.prototype.setBit=det;ge.prototype.clearBit=pet;ge.prototype.flipBit=fet;ge.prototype.add=het;ge.prototype.subtract=get;ge.prototype.multiply=vet;ge.prototype.divide=yet;ge.prototype.remainder=bet;ge.prototype.divideAndRemainder=_et;ge.prototype.modPow=Let;ge.prototype.modInverse=Fet;ge.prototype.pow=Iet;ge.prototype.gcd=Oet;ge.prototype.isProbablePrime=Bet});var JE=k((oTr,bIe)=>{var Nd=qt();Rd();br();var vIe=bIe.exports=Nd.sha1=Nd.sha1||{};Nd.md.sha1=Nd.md.algorithms.sha1=vIe;vIe.create=function(){yIe||jet();var t=null,e=Nd.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Nd.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Nd.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),gIe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Nd.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(rX.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};gIe(d,r,i);var p=Nd.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p},n};var rX=null,yIe=!1;function jet(){rX="\x80",rX+=Nd.util.fillString("\0",64),yIe=!0}function gIe(t,e,r){for(var n,i,o,s,a,c,u,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,c=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o&s|a&(o^s),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,d-=64}}});var nX=k((sTr,xIe)=>{var Ld=qt();br();Jc();JE();var _Ie=xIe.exports=Ld.pkcs1=Ld.pkcs1||{};_Ie.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=Ld.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),c=a-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var l=o.digest(),d="",p=c-e.length,f=0;f<p;f++)d+="\0";var m=l.getBytes()+d+""+e;if(!i)i=Ld.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var h=d8(i,a-o.digestLength-1,s),g=Ld.util.xorBytes(m,h,m.length),v=d8(g,o.digestLength,s),b=Ld.util.xorBytes(i,v,i.length);return"\0"+b+g};_Ie.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(i===void 0?i=Ld.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),l=e.substring(1+i.digestLength),d=d8(l,i.digestLength,o),p=Ld.util.xorBytes(u,d,u.length),f=d8(p,s-i.digestLength-1,o),m=Ld.util.xorBytes(l,f,l.length),h=m.substring(0,i.digestLength),g=c!=="\0",v=0;v<i.digestLength;++v)g|=a.charAt(v)!==h.charAt(v);for(var b=1,y=i.digestLength,E=i.digestLength;E<m.length;E++){var x=m.charCodeAt(E),R=x&1^1,L=b?65534:0;g|=x&L,b=b&R,y+=b}if(g||m.charCodeAt(y)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(y+1)};function d8(t,e,r){r||(r=Ld.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var oX=k((aTr,iX)=>{var Lg=qt();br();g2();Jc();(function(){if(Lg.prime){iX.exports=Lg.prime;return}var t=iX.exports=Lg.prime=Lg.prime||{},e=Lg.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(d,p){return d|p};t.generateProbablePrime=function(d,p,f){typeof p=="function"&&(f=p,p={}),p=p||{};var m=p.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var h=p.prng||Lg.random,g={nextBytes:function(v){for(var b=h.getBytesSync(v.length),y=0;y<v.length;++y)v[y]=b.charCodeAt(y)}};if(m.name==="PRIMEINC")return o(d,g,m.options,f);throw new Error("Invalid prime generation algorithm: "+m.name)};function o(d,p,f,m){return"workers"in f?c(d,p,f,m):s(d,p,f,m)}function s(d,p,f,m){var h=u(d,p),g=0,v=l(h.bitLength());"millerRabinTests"in f&&(v=f.millerRabinTests);var b=10;"maxBlockTime"in f&&(b=f.maxBlockTime),a(h,d,p,g,v,b,m)}function a(d,p,f,m,h,g,v){var b=+new Date;do{if(d.bitLength()>p&&(d=u(p,f)),d.isProbablePrime(h))return v(null,d);d.dAddOffset(r[m++%8],0)}while(g<0||+new Date-b<g);Lg.util.setImmediate(function(){a(d,p,f,m,h,g,v)})}function c(d,p,f,m){if(typeof Worker>"u")return s(d,p,f,m);var h=u(d,p),g=f.workers,v=f.workLoad||100,b=v*30/8,y=f.workerScript||"forge/prime.worker.js";if(g===-1)return Lg.util.estimateCores(function(x,R){x&&(R=2),g=R-1,E()});E();function E(){g=Math.max(1,g);for(var x=[],R=0;R<g;++R)x[R]=new Worker(y);for(var L=g,R=0;R<g;++R)x[R].addEventListener("message",z);var O=!1;function z(N){if(!O){--L;var ce=N.data;if(ce.found){for(var J=0;J<x.length;++J)x[J].terminate();return O=!0,m(null,new e(ce.prime,16))}h.bitLength()>d&&(h=u(d,p));var D=h.toString(16);N.target.postMessage({hex:D,workLoad:v}),h.dAddOffset(b,0)}}}}function u(d,p){var f=new e(d,p),m=d-1;return f.testBit(m)||f.bitwiseTo(e.ONE.shiftLeft(m),i,f),f.dAddOffset(31-f.mod(n).byteValue(),0),f}function l(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var v2=k((cTr,RIe)=>{var dt=qt();Ku();g2();Dg();nX();oX();Jc();br();typeof dr>"u"&&(dr=dt.jsbn.BigInteger);var dr,sX=dt.util.isNodejs?require("crypto"):null,Y=dt.asn1,eu=dt.util;dt.pki=dt.pki||{};RIe.exports=dt.pki.rsa=dt.rsa=dt.rsa||{};var Dt=dt.pki,Get=[6,4,2,4,2,4,6,2],Vet={name:"PrivateKeyInfo",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Y.Class.UNIVERSAL,type:Y.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Y.Class.UNIVERSAL,type:Y.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},zet={name:"RSAPrivateKey",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},$et={name:"RSAPublicKey",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Y.Class.UNIVERSAL,type:Y.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Wet=dt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Y.Class.UNIVERSAL,type:Y.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Y.Class.UNIVERSAL,type:Y.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Yet={name:"DigestInfo",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Y.Class.UNIVERSAL,type:Y.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Y.Class.UNIVERSAL,type:Y.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Y.Class.UNIVERSAL,type:Y.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Y.Class.UNIVERSAL,type:Y.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Ket=function(t){var e;if(t.algorithm in Dt.oids)e=Dt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=Y.oidToDer(e).getBytes(),i=Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[]),o=Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[]);o.value.push(Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,n)),o.value.push(Y.create(Y.Class.UNIVERSAL,Y.Type.NULL,!1,""));var s=Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),Y.toDer(i).getBytes()},IIe=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(dr.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(dr.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new dr(dt.util.bytesToHex(dt.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(dr.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};Dt.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=wIe(t,e,r)):(i=dt.util.createBuffer(),i.putBytes(t));for(var s=new dr(i.toHex(),16),a=IIe(s,e,n),c=a.toString(16),u=dt.util.createBuffer(),l=o-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(dt.util.hexToBytes(c)),u.getBytes()};Dt.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new dr(dt.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=IIe(s,e,r),c=a.toString(16),u=dt.util.createBuffer(),l=i-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(dt.util.hexToBytes(c)),n!==!1?p8(u.getBytes(),e,r):u.getBytes()};Dt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||dt.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new dr(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};Dt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new dr(null);r.fromInt(30);for(var n=0,i=function(d,p){return d|p},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new dr(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(dr.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(Xet(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Get[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(dr.ONE).gcd(t.e).compareTo(dr.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(dr.ONE),t.q1=t.q.subtract(dr.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(dr.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var l=t.e.modInverse(t.phi);t.keys={privateKey:Dt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Dt.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};Dt.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!dt.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(EIe("generateKeyPair"))return sX.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:Dt.privateKeyFromPem(u),publicKey:Dt.publicKeyFromPem(c)})});if(SIe("generateKey")&&SIe("exportKey"))return eu.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:CIe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return eu.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=Dt.privateKeyFromAsn1(Y.fromDer(dt.util.createBuffer(a)));n(null,{privateKey:c,publicKey:Dt.setRsaPublicKey(c.n,c.e)})}});if(TIe("generateKey")&&TIe("exportKey")){var i=eu.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:CIe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=eu.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(l){var d=l.target.result,p=Dt.privateKeyFromAsn1(Y.fromDer(dt.util.createBuffer(d)));n(null,{privateKey:p,publicKey:Dt.setRsaPublicKey(p.n,p.e)})},u.onerror=function(l){n(l)}},i.onerror=function(a){n(a)};return}}else if(EIe("generateKeyPairSync")){var o=sX.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Dt.privateKeyFromPem(o.privateKey),publicKey:Dt.publicKeyFromPem(o.publicKey)}}}var s=Dt.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Dt.rsa.stepKeyPairGenerationState(s,0),s.keys;Qet(s,r,n)};Dt.setRsaPublicKey=Dt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return wIe(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return dt.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return Dt.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,u){u=p8(u,r,!0);var l=Y.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),d={},p=[];if(!Y.validate(l,Yet,d,p)){var f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw f.errors=p,f}var m=Y.derToOid(d.algorithmIdentifier);if(!(m===dt.oids.md2||m===dt.oids.md5||m===dt.oids.sha1||m===dt.oids.sha224||m===dt.oids.sha256||m===dt.oids.sha384||m===dt.oids.sha512||m===dt.oids["sha512-224"]||m===dt.oids["sha512-256"])){var f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw f.oid=m,f}if((m===dt.oids.md2||m===dt.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===d.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,u){return u=p8(u,r,!0),c===u}});var a=Dt.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};Dt.setRsaPrivateKey=Dt.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(u,l,d){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var p=Dt.rsa.decrypt(u,c,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:p8};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(f,m){return dt.pkcs1.decode_rsa_oaep(m,f,d)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(f){return f}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(p,c,!1)},c.sign=function(u,l){var d=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:Ket},d=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return u}},d=1);var p=l.encode(u,c.n.bitLength());return Dt.rsa.encrypt(p,c,d)},c};Dt.wrapRsaPrivateKey=function(t){return Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Y.integerToDer(0).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(Dt.oids.rsaEncryption).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.NULL,!1,"")]),Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,Y.toDer(t).getBytes())])};Dt.privateKeyFromAsn1=function(t){var e={},r=[];if(Y.validate(t,Vet,e,r)&&(t=Y.fromDer(dt.util.createBuffer(e.privateKey))),e={},r=[],!Y.validate(t,zet,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,c,u,l,d;return i=dt.util.createBuffer(e.privateKeyModulus).toHex(),o=dt.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=dt.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=dt.util.createBuffer(e.privateKeyPrime1).toHex(),c=dt.util.createBuffer(e.privateKeyPrime2).toHex(),u=dt.util.createBuffer(e.privateKeyExponent1).toHex(),l=dt.util.createBuffer(e.privateKeyExponent2).toHex(),d=dt.util.createBuffer(e.privateKeyCoefficient).toHex(),Dt.setRsaPrivateKey(new dr(i,16),new dr(o,16),new dr(s,16),new dr(a,16),new dr(c,16),new dr(u,16),new dr(l,16),new dr(d,16))};Dt.privateKeyToAsn1=Dt.privateKeyToRSAPrivateKey=function(t){return Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Y.integerToDer(0).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.n)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.e)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.d)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.p)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.q)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.dP)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.dQ)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.qInv))])};Dt.publicKeyFromAsn1=function(t){var e={},r=[];if(Y.validate(t,Wet,e,r)){var n=Y.derToOid(e.publicKeyOid);if(n!==Dt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!Y.validate(t,$et,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=dt.util.createBuffer(e.publicKeyModulus).toHex(),s=dt.util.createBuffer(e.publicKeyExponent).toHex();return Dt.setRsaPublicKey(new dr(o,16),new dr(s,16))};Dt.publicKeyToAsn1=Dt.publicKeyToSubjectPublicKeyInfo=function(t){return Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(Dt.oids.rsaEncryption).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.NULL,!1,"")]),Y.create(Y.Class.UNIVERSAL,Y.Type.BITSTRING,!1,[Dt.publicKeyToRSAPublicKey(t)])])};Dt.publicKeyToRSAPublicKey=function(t){return Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.n)),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Od(t.e))])};function wIe(t,e,r){var n=dt.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var u=0,l=dt.random.getBytes(s),c=0;c<s;++c)a=l.charCodeAt(c),a===0?++u:n.putByte(a);s=u}return n.putByte(0),n.putBytes(t),n}function p8(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=dt.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var l=o.getByte();if(l!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function Qet(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,c){dt.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(dr.ONE).gcd(t.e).compareTo(dr.ONE)!==0){t.p=null,i();return}if(t.q.subtract(dr.ONE).gcd(t.e).compareTo(dr.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(dr.ONE),t.q1=t.q.subtract(dr.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(dr.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var l=t.e.modInverse(t.phi);t.keys={privateKey:Dt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Dt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Od(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=dt.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function Xet(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function EIe(t){return dt.util.isNodejs&&typeof sX[t]=="function"}function SIe(t){return typeof eu.globalScope<"u"&&typeof eu.globalScope.crypto=="object"&&typeof eu.globalScope.crypto.subtle=="object"&&typeof eu.globalScope.crypto.subtle[t]=="function"}function TIe(t){return typeof eu.globalScope<"u"&&typeof eu.globalScope.msCrypto=="object"&&typeof eu.globalScope.msCrypto.subtle=="object"&&typeof eu.globalScope.msCrypto.subtle[t]=="function"}function CIe(t){for(var e=dt.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var aX=k((uTr,NIe)=>{var $e=qt();kg();Ku();m2();Rd();Dg();a8();Cy();Jc();JQ();v2();br();typeof AIe>"u"&&(AIe=$e.jsbn.BigInteger);var AIe,ae=$e.asn1,Ft=$e.pki=$e.pki||{};NIe.exports=Ft.pbe=$e.pbe=$e.pbe||{};var Ry=Ft.oids,Jet={name:"EncryptedPrivateKeyInfo",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Zet={name:"PBES2Algorithms",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},ett={name:"pkcs-12PbeParams",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ft.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=$e.random.getBytesSync(r.saltSize),i=r.count,o=ae.integerToDer(i),s,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,l,d;switch(r.algorithm){case"aes128":s=16,u=16,l=Ry["aes128-CBC"],d=$e.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,l=Ry["aes192-CBC"],d=$e.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,l=Ry["aes256-CBC"],d=$e.aes.createEncryptionCipher;break;case"des":s=8,u=8,l=Ry.desCBC,d=$e.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var f="hmacWith"+r.prfAlgorithm.toUpperCase(),m=DIe(f),h=$e.pkcs5.pbkdf2(e,n,i,s,m),g=$e.random.getBytesSync(u),v=d(h);v.start(g),v.update(ae.toDer(t)),v.finish(),c=v.output.getBytes();var b=ttt(n,o,s,f);a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Ry.pkcs5PBES2).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Ry.pkcs5PBKDF2).getBytes()),b]),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(l).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var y=new $e.util.ByteBuffer(n),h=Ft.pbe.generatePkcs12Key(e,y,1,i,s),g=Ft.pbe.generatePkcs12Key(e,y,2,i,s),v=$e.des.createEncryptionCipher(h);v.start(g),v.update(ae.toDer(t)),v.finish(),c=v.output.getBytes(),a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Ry["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,n),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,o.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var E=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[a,ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,c)]);return E};Ft.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ae.validate(t,Jet,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=ae.derToOid(n.encryptionOid),a=Ft.pbe.getCipher(s,n.encryptionParams,e),c=$e.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=ae.fromDer(a.output)),r};Ft.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ae.toDer(t).getBytes()};return $e.pem.encode(r,{maxline:e})};Ft.encryptedPrivateKeyFromPem=function(t){var e=$e.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ae.fromDer(e.body)};Ft.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Ft.wrapRsaPrivateKey(Ft.privateKeyToAsn1(t));return n=Ft.encryptPrivateKeyInfo(n,e,r),Ft.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=$e.random.getBytesSync(16),a=$e.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=$e.random.getBytesSync(16),a=$e.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=$e.random.getBytesSync(16),a=$e.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=$e.random.getBytesSync(8),a=$e.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=$e.random.getBytesSync(8),a=$e.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=$e.pbe.opensslDeriveBytes(e,o.substr(0,8),s),l=a(u);l.start(o),l.update(ae.toDer(Ft.privateKeyToAsn1(t))),l.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:$e.util.bytesToHex(o).toUpperCase()},body:l.output.getBytes()};return $e.pem.encode(d)};Ft.decryptRsaPrivateKey=function(t,e){var r=null,n=$e.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=$e.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=$e.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=$e.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=$e.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=$e.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(d){return $e.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":o=8,s=function(d){return $e.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":o=16,s=function(d){return $e.rc2.createDecryptionCipher(d,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=$e.util.hexToBytes(n.dekInfo.parameters),c=$e.pbe.opensslDeriveBytes(e,a.substr(0,8),o),u=s(c);if(u.start(a),u.update($e.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ft.decryptPrivateKeyInfo(ae.fromDer(r),e):r=ae.fromDer(r),r!==null&&(r=Ft.privateKeyFromAsn1(r)),r};Ft.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in $e.md))throw new Error('"sha1" hash algorithm unavailable.');o=$e.md.sha1.create()}var c=o.digestLength,u=o.blockLength,l=new $e.util.ByteBuffer,d=new $e.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)d.putInt16(t.charCodeAt(a));d.putInt16(0)}var p=d.length(),f=e.length(),m=new $e.util.ByteBuffer;m.fillWithByte(r,u);var h=u*Math.ceil(f/u),g=new $e.util.ByteBuffer;for(a=0;a<h;a++)g.putByte(e.at(a%f));var v=u*Math.ceil(p/u),b=new $e.util.ByteBuffer;for(a=0;a<v;a++)b.putByte(d.at(a%p));var y=g;y.putBuffer(b);for(var E=Math.ceil(i/c),x=1;x<=E;x++){var R=new $e.util.ByteBuffer;R.putBytes(m.bytes()),R.putBytes(y.bytes());for(var L=0;L<n;L++)o.start(),o.update(R.getBytes()),R=o.digest();var O=new $e.util.ByteBuffer;for(a=0;a<u;a++)O.putByte(R.at(a%c));var z=Math.ceil(f/u)+Math.ceil(p/u),N=new $e.util.ByteBuffer;for(s=0;s<z;s++){var ce=new $e.util.ByteBuffer(y.getBytes(u)),J=511;for(a=O.length()-1;a>=0;a--)J=J>>8,J+=O.at(a)+ce.at(a),ce.setAt(a,J&255);N.putBuffer(ce)}y=N,l.putBuffer(R)}return l.truncate(l.length()-i),l};Ft.pbe.getCipher=function(t,e,r){switch(t){case Ft.oids.pkcs5PBES2:return Ft.pbe.getCipherForPBES2(t,e,r);case Ft.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ft.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ft.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ft.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ae.validate(e,Zet,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=ae.derToOid(n.kdfOid),t!==Ft.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=ae.derToOid(n.encOid),t!==Ft.oids["aes128-CBC"]&&t!==Ft.oids["aes192-CBC"]&&t!==Ft.oids["aes256-CBC"]&&t!==Ft.oids["des-EDE3-CBC"]&&t!==Ft.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=$e.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(Ft.oids[t]){case"aes128-CBC":c=16,u=$e.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=$e.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=$e.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=$e.des.createDecryptionCipher;break;case"desCBC":c=8,u=$e.des.createDecryptionCipher;break}var l=kIe(n.prfOid),d=$e.pkcs5.pbkdf2(r,s,a,c,l),p=n.encIv,f=u(d);return f.start(p),f};Ft.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ae.validate(e,ett,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=$e.util.createBuffer(n.salt),a=$e.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,l;switch(t){case Ft.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=$e.des.startDecrypting;break;case Ft.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(h,g){var v=$e.rc2.createDecryptionCipher(h,40);return v.start(g,null),v};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var d=kIe(n.prfOid),p=Ft.pbe.generatePkcs12Key(r,s,1,a,c,d);d.start();var f=Ft.pbe.generatePkcs12Key(r,s,2,a,u,d);return l(p,f)};Ft.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in $e.md))throw new Error('"md5" hash algorithm unavailable.');n=$e.md.md5.create()}e===null&&(e="");for(var i=[PIe(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(PIe(n,i[s-1]+t+e));return i.join("").substr(0,r)};function PIe(t,e){return t.start().update(e).digest().getBytes()}function kIe(t){var e;if(!t)e="hmacWithSHA1";else if(e=Ft.oids[ae.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return DIe(e)}function DIe(t){var e=$e.md;switch(t){case"hmacWithSHA224":e=$e.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function ttt(t,e,r,n){var i=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,t),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,$e.util.hexToBytes(r.toString(16))),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Ft.oids[n]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.NULL,!1,"")])),i}});var cX=k((lTr,MIe)=>{var ZE=qt();Ku();br();var qe=ZE.asn1,eS=MIe.exports=ZE.pkcs7asn1=ZE.pkcs7asn1||{};ZE.pkcs7=ZE.pkcs7||{};ZE.pkcs7.asn1=eS;var LIe={name:"ContentInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:qe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};eS.contentInfoValidator=LIe;var OIe={name:"EncryptedContentInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:qe.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:qe.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};eS.envelopedDataValidator={name:"EnvelopedData",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(OIe)};eS.encryptedDataValidator={name:"EncryptedData",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"version"}].concat(OIe)};var rtt={name:"SignerInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:qe.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:qe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:qe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};eS.signedDataValidator={name:"SignedData",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},LIe,{name:"SignedData.Certificates",tagClass:qe.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:qe.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SET,capture:"signerInfos",optional:!0,value:[rtt]}]};eS.recipientInfoValidator={name:"RecipientInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:qe.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var uX=k((dTr,FIe)=>{var Ay=qt();br();Ay.mgf=Ay.mgf||{};var ntt=FIe.exports=Ay.mgf.mgf1=Ay.mgf1=Ay.mgf1||{};ntt.create=function(t){var e={generate:function(r,n){for(var i=new Ay.util.ByteBuffer,o=Math.ceil(n/t.digestLength),s=0;s<o;s++){var a=new Ay.util.ByteBuffer;a.putInt32(s),t.start(),t.update(r+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var BIe=k((pTr,UIe)=>{var f8=qt();uX();UIe.exports=f8.mgf=f8.mgf||{};f8.mgf.mgf1=f8.mgf1});var m8=k((fTr,qIe)=>{var Py=qt();Jc();br();var itt=qIe.exports=Py.pss=Py.pss||{};itt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Py.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||Py.random,a={};return a.encode=function(c,u){var l,d=u-1,p=Math.ceil(d/8),f=c.digest().getBytes();if(p<n+o+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(o):m=i.bytes();var h=new Py.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(f),h.putBytes(m),e.start(),e.update(h.getBytes());var g=e.digest().getBytes(),v=new Py.util.ByteBuffer;v.fillWithByte(0,p-o-n-2),v.putByte(1),v.putBytes(m);var b=v.getBytes(),y=p-n-1,E=r.generate(g,y),x="";for(l=0;l<y;l++)x+=String.fromCharCode(b.charCodeAt(l)^E.charCodeAt(l));var R=65280>>8*p-d&255;return x=String.fromCharCode(x.charCodeAt(0)&~R)+x.substr(1),x+g+"\xBC"},a.verify=function(c,u,l){var d,p=l-1,f=Math.ceil(p/8);if(u=u.substr(-f),f<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=f-n-1,h=u.substr(0,m),g=u.substr(m,n),v=65280>>8*f-p&255;if(h.charCodeAt(0)&v)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(g,m),y="";for(d=0;d<m;d++)y+=String.fromCharCode(h.charCodeAt(d)^b.charCodeAt(d));y=String.fromCharCode(y.charCodeAt(0)&~v)+y.substr(1);var E=f-n-o-2;for(d=0;d<E;d++)if(y.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(y.charCodeAt(E)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var x=y.substr(-o),R=new Py.util.ByteBuffer;R.fillWithByte(0,8),R.putBytes(c),R.putBytes(x),e.start(),e.update(R.getBytes());var L=e.digest().getBytes();return g===L},a}});var v8=k((mTr,zIe)=>{var pt=qt();kg();Ku();m2();Rd();BIe();Dg();Cy();m8();v2();br();var I=pt.asn1,Le=zIe.exports=pt.pki=pt.pki||{},pr=Le.oids,ai={};ai.CN=pr.commonName;ai.commonName="CN";ai.C=pr.countryName;ai.countryName="C";ai.L=pr.localityName;ai.localityName="L";ai.ST=pr.stateOrProvinceName;ai.stateOrProvinceName="ST";ai.O=pr.organizationName;ai.organizationName="O";ai.OU=pr.organizationalUnitName;ai.organizationalUnitName="OU";ai.E=pr.emailAddress;ai.emailAddress="E";var jIe=pt.pki.rsa.publicKeyValidator,ott={name:"Certificate",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:I.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:I.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:I.Class.UNIVERSAL,type:I.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:I.Class.UNIVERSAL,type:I.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:I.Class.UNIVERSAL,type:I.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:I.Class.UNIVERSAL,type:I.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},jIe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:I.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:I.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:I.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:I.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},stt={name:"rsapss",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:I.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:I.Class.UNIVERSAL,type:I.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:I.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:I.Class.UNIVERSAL,type:I.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:I.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:I.Class.UNIVERSAL,type:I.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:I.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:I.Class.UNIVERSAL,type:I.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},att={name:"CertificationRequestInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},jIe,{name:"CertificationRequestInfo.attributes",tagClass:I.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:I.Class.UNIVERSAL,type:I.Type.SET,constructed:!0}]}]}]},ctt={name:"CertificationRequest",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[att,{name:"CertificationRequest.signatureAlgorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:I.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Le.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,s=0;s<t.value.length;++s){n=t.value[s];for(var a=0;a<n.value.length;++a)o={},i=n.value[a],o.type=I.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in pr&&(o.name=pr[o.type],o.name in ai&&(o.shortName=ai[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Le.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=I.derToOid(n.value[0].value),o=n.value[1].value,s=0;s<o.length;++s){var a={};if(a.type=i,a.value=o[s].value,a.valueTagClass=o[s].type,a.type in pr&&(a.name=pr[a.type],a.name in ai&&(a.shortName=ai[a.name])),a.type===pr.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(Le.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function Og(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var h8=function(t,e,r){var n={};if(t!==pr["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:pr.sha1},mgf:{algorithmOid:pr.mgf1,hash:{algorithmOid:pr.sha1}},saltLength:20});var i={},o=[];if(!I.validate(e,stt,i,o)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=o,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=I.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=I.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=I.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},g8=function(t){switch(pr[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return pt.md.sha1.create();case"md5WithRSAEncryption":return pt.md.md5.create();case"sha256WithRSAEncryption":return pt.md.sha256.create();case"sha384WithRSAEncryption":return pt.md.sha384.create();case"sha512WithRSAEncryption":return pt.md.sha512.create();case"RSASSA-PSS":return pt.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},GIe=function(t){var e=t.certificate,r;switch(e.signatureOid){case pr.sha1WithRSAEncryption:case pr.sha1WithRSASignature:break;case pr["RSASSA-PSS"]:var n,i;if(n=pr[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||pt.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=pr[e.signatureParameters.mgf.algorithmOid],i===void 0||pt.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=pt.mgf[i].create(pt.md[n].create()),n=pr[e.signatureParameters.hash.algorithmOid],n===void 0||pt.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=pt.pss.create(pt.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Le.certificateFromPem=function(t,e,r){var n=pt.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=I.fromDer(n.body,r);return Le.certificateFromAsn1(o,e)};Le.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:I.toDer(Le.certificateToAsn1(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};Le.publicKeyFromPem=function(t){var e=pt.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=I.fromDer(e.body);return Le.publicKeyFromAsn1(n)};Le.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:I.toDer(Le.publicKeyToAsn1(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};Le.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:I.toDer(Le.publicKeyToRSAPublicKey(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};Le.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||pt.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=I.toDer(Le.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=I.toDer(Le.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Le.certificationRequestFromPem=function(t,e,r){var n=pt.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=I.fromDer(n.body,r);return Le.certificationRequestFromAsn1(o,e)};Le.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:I.toDer(Le.certificationRequestToAsn1(t)).getBytes()};return pt.pem.encode(r,{maxline:e})};Le.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Og(t.issuer,e)},t.issuer.addField=function(e){tu([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Og(t.subject,e)},t.subject.addField=function(e){tu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){tu(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){tu(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)VIe(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||pt.md.sha1.create();var n=pr[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Le.getTBSCertificate(t);var o=I.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var s=e.md;if(s===null){s=g8({signatureOid:e.signatureOid,type:"certificate"});var a=e.tbsCertificate||Le.getTBSCertificate(e),c=I.toDer(a);s.update(c.getBytes())}return s!==null&&(r=GIe({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,s,a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],(o.type!==s.type||o.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Le.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=pr.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return pt.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Le.certificateFromAsn1=function(t,e){var r={},n=[];if(!I.validate(t,ott,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=I.derToOid(r.publicKeyOid);if(o!==Le.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Le.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=pt.util.createBuffer(r.certSerialNumber);s.serialNumber=a.toHex(),s.signatureOid=pt.asn1.derToOid(r.certSignatureOid),s.signatureParameters=h8(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=pt.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=h8(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(I.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(I.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(I.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(I.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=r.tbsCertificate,e){s.md=g8({signatureOid:s.signatureOid,type:"certificate"});var u=I.toDer(s.tbsCertificate);s.md.update(u.getBytes())}var l=pt.md.sha1.create(),d=I.toDer(r.certIssuer);l.update(d.getBytes()),s.issuer.getField=function(m){return Og(s.issuer,m)},s.issuer.addField=function(m){tu([m]),s.issuer.attributes.push(m)},s.issuer.attributes=Le.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var p=pt.md.sha1.create(),f=I.toDer(r.certSubject);return p.update(f.getBytes()),s.subject.getField=function(m){return Og(s.subject,m)},s.subject.addField=function(m){tu([m]),s.subject.attributes.push(m)},s.subject.attributes=Le.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=p.digest().toHex(),r.certExtensions?s.extensions=Le.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Le.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Le.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Le.certificateExtensionFromAsn1(n.value[i]));return e};Le.certificateExtensionFromAsn1=function(t){var e={};if(e.id=I.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===I.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in pr){if(e.name=pr[e.id],e.name==="keyUsage"){var r=I.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=I.fromDer(e.value);r.value.length>0&&r.value[0].type===I.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===I.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=I.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=I.fromDer(e.value),s=0;s<r.value.length;++s){var a=I.derToOid(r.value[s].value);a in pr?e[pr[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=I.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=I.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var l={type:c.type,value:c.value};switch(e.altNames.push(l),c.type){case 1:case 2:case 6:break;case 7:l.ip=pt.util.bytesToIP(c.value);break;case 8:l.oid=I.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=I.fromDer(e.value);e.subjectKeyIdentifier=pt.util.bytesToHex(r.value)}}return e};Le.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!I.validate(t,ctt,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=I.derToOid(r.publicKeyOid);if(o!==Le.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Le.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=pt.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=h8(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=pt.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=h8(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=g8({signatureOid:s.signatureOid,type:"certification request"});var a=I.toDer(s.certificationRequestInfo);s.md.update(a.getBytes())}var c=pt.md.sha1.create();return s.subject.getField=function(u){return Og(s.subject,u)},s.subject.addField=function(u){tu([u]),s.subject.attributes.push(u)},s.subject.attributes=Le.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=Le.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(u){return Og(s,u)},s.addAttribute=function(u){tu([u]),s.attributes.push(u)},s.attributes=Le.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Le.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Og(t.subject,e)},t.subject.addField=function(e){tu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Og(t,e)},t.addAttribute=function(e){tu([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){tu(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){tu(e),t.attributes=e},t.sign=function(e,r){t.md=r||pt.md.sha1.create();var n=pr[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Le.getCertificationRequestInfo(t);var o=I.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=g8({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Le.getCertificationRequestInfo(t),i=I.toDer(n);r.update(i.getBytes())}return r!==null&&(e=GIe({certificate:t,md:r,signature:t.signature})),e},t};function tS(t){for(var e=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var s=r.value,a=I.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===I.Type.UTF8&&(s=pt.util.encodeUtf8(s))),n=I.create(I.Class.UNIVERSAL,I.Type.SET,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(r.type).getBytes()),I.create(I.Class.UNIVERSAL,a,!1,s)])]),e.value.push(n)}return e}function tu(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Le.oids?e.name=Le.oids[e.type]:e.shortName&&e.shortName in ai&&(e.name=Le.oids[ai[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Le.oids)e.type=Le.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in ai&&(e.shortName=ai[e.name]),e.type===pr.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=I.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Le.certificateExtensionToAsn1(VIe(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function VIe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Le.oids&&(t.name=Le.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Le.oids)t.id=Le.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);o!==0?s+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(s+=String.fromCharCode(i)),t.value=I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(I.create(I.Class.UNIVERSAL,I.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var c in t)t[c]===!0&&(c in pr?a.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(pr[c]).getBytes())):c.indexOf(".")!==-1&&a.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);for(var u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=pt.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?s=I.oidToDer(I.oidToDer(u.oid)):s=I.oidToDer(s));t.value.value.push(I.create(I.Class.CONTEXT_SPECIFIC,u.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=I.create(I.Class.UNIVERSAL,I.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,d.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var p=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(I.create(I.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var f=[I.create(I.Class.CONTEXT_SPECIFIC,4,!0,[tS(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(I.create(I.Class.CONTEXT_SPECIFIC,1,!0,f))}if(t.serialNumber){var m=pt.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(I.create(I.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);for(var a=t.value.value,h=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),g=I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[]),u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=pt.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?s=I.oidToDer(I.oidToDer(u.oid)):s=I.oidToDer(s));g.value.push(I.create(I.Class.CONTEXT_SPECIFIC,u.type,!1,s))}h.value.push(I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[g])),a.push(h)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function lX(t,e){switch(t){case pr["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(e.hash.algorithmOid).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(I.create(I.Class.CONTEXT_SPECIFIC,1,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(e.mgf.algorithmOid).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(e.mgf.hash.algorithmOid).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(I.create(I.Class.CONTEXT_SPECIFIC,2,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(e.saltLength).getBytes())])),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,r);default:return I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")}}function utt(t){var e=I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,s=I.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===I.Type.UTF8&&(o=pt.util.encodeUtf8(o));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var c=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(i.type).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SET,!0,[I.create(I.Class.UNIVERSAL,s,a,o)])]);e.value.push(c)}return e}var ltt=new Date("1950-01-01T00:00:00Z"),dtt=new Date("2050-01-01T00:00:00Z");function HIe(t){return t>=ltt&&t<dtt?I.create(I.Class.UNIVERSAL,I.Type.UTCTIME,!1,I.dateToUtcTime(t)):I.create(I.Class.UNIVERSAL,I.Type.GENERALIZEDTIME,!1,I.dateToGeneralizedTime(t))}Le.getTBSCertificate=function(t){var e=HIe(t.validity.notBefore),r=HIe(t.validity.notAfter),n=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(t.version).getBytes())]),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,pt.util.hexToBytes(t.serialNumber)),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.siginfo.algorithmOid).getBytes()),lX(t.siginfo.algorithmOid,t.siginfo.parameters)]),tS(t.issuer),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[e,r]),tS(t.subject),Le.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(I.create(I.Class.CONTEXT_SPECIFIC,1,!0,[I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(I.create(I.Class.CONTEXT_SPECIFIC,2,!0,[I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Le.certificateExtensionsToAsn1(t.extensions)),n};Le.getCertificationRequestInfo=function(t){var e=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(t.version).getBytes()),tS(t.subject),Le.publicKeyToAsn1(t.publicKey),utt(t)]);return e};Le.distinguishedNameToAsn1=function(t){return tS(t)};Le.certificateToAsn1=function(t){var e=t.tbsCertificate||Le.getTBSCertificate(t);return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[e,I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.signatureOid).getBytes()),lX(t.signatureOid,t.signatureParameters)]),I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.signature)])};Le.certificateExtensionsToAsn1=function(t){var e=I.create(I.Class.CONTEXT_SPECIFIC,3,!0,[]),r=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Le.certificateExtensionToAsn1(t[n]));return e};Le.certificateExtensionToAsn1=function(t){var e=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);e.value.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.id).getBytes())),t.critical&&e.value.push(I.create(I.Class.UNIVERSAL,I.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=I.toDer(r).getBytes()),e.value.push(I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,r)),e};Le.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Le.getCertificationRequestInfo(t);return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[e,I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.signatureOid).getBytes()),lX(t.signatureOid,t.signatureParameters)]),I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.signature)])};Le.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var a=r(s.issuer);return a},e.addCertificate=function(s){if(typeof s=="string"&&(s=pt.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var a=e.certs[s.subject.hash];pt.util.isArray(a)||(a=[a]),a.push(s),e.certs[s.subject.hash]=a}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=pt.pki.certificateFromPem(s));var a=r(s.subject);if(!a)return!1;pt.util.isArray(a)||(a=[a]);for(var c=I.toDer(Le.certificateToAsn1(s)).getBytes(),u=0;u<a.length;++u){var l=I.toDer(Le.certificateToAsn1(a[u])).getBytes();if(c===l)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!pt.util.isArray(c))s.push(c);else for(var u=0;u<c.length;++u)s.push(c[u])}return s},e.removeCertificate=function(s){var a;if(typeof s=="string"&&(s=pt.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var c=r(s.subject);if(!pt.util.isArray(c))return a=e.certs[s.subject.hash],delete e.certs[s.subject.hash],a;for(var u=I.toDer(Le.certificateToAsn1(s)).getBytes(),l=0;l<c.length;++l){var d=I.toDer(Le.certificateToAsn1(c[l])).getBytes();u===d&&(a=c[l],c.splice(l,1))}return c.length===0&&delete e.certs[s.subject.hash],a};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var a=pt.md.sha1.create();s.attributes=Le.RDNAttributesAsArray(tS(s),a),s.hash=a.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Le.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Le.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,s=null,a=0;do{var c=e.shift(),u=null,l=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Le.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(l=!0,u=c),u){var d=u;pt.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){u=d.shift();try{p=u.verify(c)}catch{}}p||(s={message:"Certificate signature is invalid.",error:Le.certificateError.bad_certificate})}s===null&&(!u||l)&&!t.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:Le.certificateError.unknown_ca})}if(s===null&&u&&!c.isIssuer(u)&&(s={message:"Certificate issuer is invalid.",error:Le.certificateError.bad_certificate}),s===null)for(var f={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<c.extensions.length;++m){var h=c.extensions[m];h.critical&&!(h.name in f)&&(s={message:"Certificate has an unsupported critical extension.",error:Le.certificateError.unsupported_certificate})}if(s===null&&(!o||e.length===0&&(!u||l))){var g=c.getExtension("basicConstraints"),v=c.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||g===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Le.certificateError.bad_certificate}),s===null&&g!==null&&!g.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Le.certificateError.bad_certificate}),s===null&&v!==null&&"pathLenConstraint"in g){var b=a-1;b>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Le.certificateError.bad_certificate})}}var y=s===null?!0:s.error,E=r.verify?r.verify(y,a,n):y;if(E===!0)s=null;else throw y===!0&&(s={message:"The application rejected the certificate.",error:Le.certificateError.bad_certificate}),(E||E===0)&&(typeof E=="object"&&!pt.util.isArray(E)?(E.message&&(s.message=E.message),E.error&&(s.error=E.error)):typeof E=="string"&&(s.error=E)),s;o=!1,++a}while(e.length>0);return!0}});var pX=k((hTr,WIe)=>{var dn=qt();Ku();YE();Dg();cX();aX();Jc();v2();JE();br();v8();var B=dn.asn1,Jt=dn.pki,b2=WIe.exports=dn.pkcs12=dn.pkcs12||{},$Ie={name:"ContentInfo",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},ptt={name:"PFX",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"version"},$Ie,{name:"PFX.macData",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:B.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},ftt={name:"SafeBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},mtt={name:"Attribute",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,capture:"values"}]},htt={name:"CertBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:B.Class.UNIVERSAL,type:B.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function y2(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var s=0;s<t[o].safeBags.length;s++){var a=t[o].safeBags[s];if(!(n!==void 0&&a.type!==n)){if(e===null){i.push(a);continue}a.attributes[e]!==void 0&&a.attributes[e].indexOf(r)>=0&&i.push(a)}}return i}b2.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!B.validate(t,ptt,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var v={},b;return"localKeyId"in g?b=g.localKeyId:"localKeyIdHex"in g&&(b=dn.util.hexToBytes(g.localKeyIdHex)),b===void 0&&!("friendlyName"in g)&&"bagType"in g&&(v[g.bagType]=y2(s.safeContents,null,null,g.bagType)),b!==void 0&&(v.localKeyId=y2(s.safeContents,"localKeyId",b,g.bagType)),"friendlyName"in g&&(v.friendlyName=y2(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),v},getBagsByFriendlyName:function(g,v){return y2(s.safeContents,"friendlyName",g,v)},getBagsByLocalKeyId:function(g,v){return y2(s.safeContents,"localKeyId",g,v)}};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(B.derToOid(n.contentType)!==Jt.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=B.derToOid(n.contentType),o}var a=n.content.value[0];if(a.tagClass!==B.Class.UNIVERSAL||a.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=dX(a),n.mac){var c=null,u=0,l=B.derToOid(n.macAlgorithm);switch(l){case Jt.oids.sha1:c=dn.md.sha1.create(),u=20;break;case Jt.oids.sha256:c=dn.md.sha256.create(),u=32;break;case Jt.oids.sha384:c=dn.md.sha384.create(),u=48;break;case Jt.oids.sha512:c=dn.md.sha512.create(),u=64;break;case Jt.oids.md5:c=dn.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var d=new dn.util.ByteBuffer(n.macSalt),p="macIterations"in n?parseInt(dn.util.bytesToHex(n.macIterations),16):1,f=b2.generateKey(r,d,3,p,u,c),m=dn.hmac.create();m.start(c,f),m.update(a.value);var h=m.getMac();if(h.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return gtt(s,a.value,e,r),s};function dX(t){if(t.composed||t.constructed){for(var e=dn.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function gtt(t,e,r,n){if(e=B.fromDer(e,r),e.tagClass!==B.Class.UNIVERSAL||e.type!==B.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],s={},a=[];if(!B.validate(o,$Ie,s,a)){var c=new Error("Cannot read ContentInfo.");throw c.errors=a,c}var u={encrypted:!1},l=null,d=s.content.value[0];switch(B.derToOid(s.contentType)){case Jt.oids.data:if(d.tagClass!==B.Class.UNIVERSAL||d.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=dX(d).value;break;case Jt.oids.encryptedData:l=vtt(d,n),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=B.derToOid(s.contentType),c}u.safeBags=ytt(l,r,n),t.safeContents.push(u)}}function vtt(t,e){var r={},n=[];if(!B.validate(t,dn.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=B.derToOid(r.contentType);if(o!==Jt.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=B.derToOid(r.encAlgorithm);var s=Jt.pbe.getCipher(o,r.encParameter,e),a=dX(r.encryptedContentAsn1),c=dn.util.createBuffer(a.value);if(s.update(c),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function ytt(t,e,r){if(!e&&t.length===0)return[];if(t=B.fromDer(t,e),t.tagClass!==B.Class.UNIVERSAL||t.type!==B.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],s={},a=[];if(!B.validate(o,ftt,s,a)){var c=new Error("Cannot read SafeBag.");throw c.errors=a,c}var u={type:B.derToOid(s.bagId),attributes:btt(s.bagAttributes)};n.push(u);var l,d,p=s.bagValue.value[0];switch(u.type){case Jt.oids.pkcs8ShroudedKeyBag:if(p=Jt.decryptPrivateKeyInfo(p,r),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Jt.oids.keyBag:try{u.key=Jt.privateKeyFromAsn1(p)}catch{u.key=null,u.asn1=p}continue;case Jt.oids.certBag:l=htt,d=function(){if(B.derToOid(s.certId)!==Jt.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=B.derToOid(s.certId),m}var h=B.fromDer(s.cert,e);try{u.cert=Jt.certificateFromAsn1(h,!0)}catch{u.cert=null,u.asn1=h}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(l!==void 0&&!B.validate(p,l,s,a)){var c=new Error("Cannot read PKCS#12 "+l.name);throw c.errors=a,c}d()}return n}function btt(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!B.validate(t[r],mtt,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var s=B.derToOid(n.oid);if(Jt.oids[s]!==void 0){e[Jt.oids[s]]=[];for(var a=0;a<n.values.length;++a)e[Jt.oids[s]].push(n.values[a].value)}}return e}b2.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=dn.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=dn.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=Jt.certificateFromPem(s));var a=dn.md.sha1.create();a.update(B.toDer(Jt.certificateToAsn1(s)).getBytes()),i=a.digest().getBytes()}else i=dn.random.getBytes(20);var c=[];i!==null&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.localKeyId).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.friendlyName).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(o=B.create(B.Class.UNIVERSAL,B.Type.SET,!0,c));var u=[],l=[];e!==null&&(dn.util.isArray(e)?l=e:l=[e]);for(var d=[],p=0;p<l.length;++p){e=l[p],typeof e=="string"&&(e=Jt.certificateFromPem(e));var f=p===0?o:void 0,m=Jt.certificateToAsn1(e),h=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.certBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.x509Certificate).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(m).getBytes())])])]),f]);d.push(h)}if(d.length>0){var g=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,d),v=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(g).getBytes())])]);u.push(v)}var b=null;if(t!==null){var y=Jt.wrapRsaPrivateKey(Jt.privateKeyToAsn1(t));r===null?b=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.keyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[y]),o]):b=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.pkcs8ShroudedKeyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[Jt.encryptPrivateKeyInfo(y,r,n)]),o]);var E=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[b]),x=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(E).getBytes())])]);u.push(x)}var R=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,u),L;if(n.useMac){var a=dn.md.sha1.create(),O=new dn.util.ByteBuffer(dn.random.getBytes(n.saltSize)),z=n.count,t=b2.generateKey(r,O,3,z,20),N=dn.hmac.create();N.start(a,t),N.update(B.toDer(R).getBytes());var ce=N.getMac();L=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.sha1).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,ce.getBytes())]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,O.getBytes()),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(z).getBytes())])}return B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(3).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Jt.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(R).getBytes())])]),L])};b2.generateKey=dn.pbe.generatePkcs12Key});var mX=k((gTr,YIe)=>{var Mg=qt();Ku();Dg();aX();Cy();a8();pX();m8();v2();br();v8();var fX=Mg.asn1,rS=YIe.exports=Mg.pki=Mg.pki||{};rS.pemToDer=function(t){var e=Mg.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Mg.util.createBuffer(e.body)};rS.privateKeyFromPem=function(t){var e=Mg.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=fX.fromDer(e.body);return rS.privateKeyFromAsn1(n)};rS.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:fX.toDer(rS.privateKeyToAsn1(t)).getBytes()};return Mg.pem.encode(r,{maxline:e})};rS.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:fX.toDer(t).getBytes()};return Mg.pem.encode(r,{maxline:e})}});var _X=k((vTr,rwe)=>{var ve=qt();Ku();YE();n8();Cy();mX();Jc();JE();br();var x8=function(t,e,r,n){var i=ve.util.createBuffer(),o=t.length>>1,s=o+(t.length&1),a=t.substr(0,s),c=t.substr(o,s),u=ve.util.createBuffer(),l=ve.hmac.create();r=e+r;var d=Math.ceil(n/16),p=Math.ceil(n/20);l.start("MD5",a);var f=ve.util.createBuffer();u.putBytes(r);for(var m=0;m<d;++m)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),f.putBuffer(l.digest());l.start("SHA1",c);var h=ve.util.createBuffer();u.clear(),u.putBytes(r);for(var m=0;m<p;++m)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),h.putBuffer(l.digest());return i.putBytes(ve.util.xorBytes(f.getBytes(),h.getBytes(),n)),i},_tt=function(t,e,r){var n=ve.hmac.create();n.start("SHA1",t);var i=ve.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},xtt=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=ve.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},Ett=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=ve.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},nc=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return ve.util.createBuffer(t.getBytes(r))},ru=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},A={};A.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};A.SupportedVersions=[A.Versions.TLS_1_1,A.Versions.TLS_1_0];A.Version=A.SupportedVersions[0];A.MaxFragment=15360;A.ConnectionEnd={server:0,client:1};A.PRFAlgorithm={tls_prf_sha256:0};A.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};A.CipherType={stream:0,block:1,aead:2};A.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};A.CompressionMethod={none:0,deflate:1};A.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};A.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};A.Alert={};A.Alert.Level={warning:1,fatal:2};A.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};A.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};A.CipherSuites={};A.getCipherSuite=function(t){var e=null;for(var r in A.CipherSuites){var n=A.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};A.handleUnexpected=function(t,e){var r=!t.open&&t.entity===A.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})};A.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(A.queue(t,A.createAlert(t,{level:A.Alert.Level.warning,description:A.Alert.Description.no_renegotiation})),A.flush(t)),t.process()};A.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===A.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});else{var o=e.fragment,s=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:ve.util.createBuffer(o.getBytes(32)),session_id:nc(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=nc(o,2),n.compression_methods=nc(o,1)),s=r-(s-o.length()),s>0){for(var a=nc(o,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:nc(a,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var u=n.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var l=nc(u.data,2);l.length()>0;){var d=l.getByte();if(d!==0)break;t.session.extensions.server_name.serverNameList.push(nc(l,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=A.getCipherSuite(n.cipher_suite);else for(var p=ve.util.createBuffer(n.cipher_suites.bytes());p.length()>0&&(t.session.cipherSuite=A.getCipherSuite(p.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure},cipherSuite:ve.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=A.CompressionMethod.none}return n};A.createSecurityParameters=function(t,e){var r=t.entity===A.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:A.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:A.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};A.handleServerHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=XIe,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Ttt,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.session.id=i,t.process()}};A.handleClientHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=ve.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var s,a=1;a<A.SupportedVersions.length&&(s=A.SupportedVersions[a],!(s.minor<=n.version.minor));++a);t.version={major:s.major,minor:s.minor},t.session.version=t.version}o!==null?(t.expect=yX,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?ktt:vX,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.open=!0,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHello(t)})),t.session.resuming?(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.pending=A.createConnectionState(t),t.state.current.write=t.state.pending.write,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))):(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)})),t.fail||(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerKeyExchange(t)})),t.verifyClient!==!1&&A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificateRequest(t)})),A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHelloDone(t)})))),A.flush(t),t.process()}};A.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:nc(n,3)},o,s,a=[];try{for(;i.certificate_list.length()>0;)o=nc(i.certificate_list,3),s=ve.asn1.fromDer(o),o=ve.pki.certificateFromAsn1(s,!0),a.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var c=t.entity===A.ConnectionEnd.client;(c||t.verifyClient===!0)&&a.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}}):a.length===0?t.expect=c?KIe:vX:(c?t.session.serverCertificate=a[0]:t.session.clientCertificate=a[0],A.verifyCertificateChain(t,a)&&(t.expect=c?KIe:vX)),t.process()};A.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});t.expect=Ctt,t.process()};A.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:nc(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=ve.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var a=t.session.clientHelloVersion;if(a.major!==s.pre_master_secret.charCodeAt(0)||a.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=ve.random.getBytes(48)}t.expect=yX,t.session.clientCertificate!==null&&(t.expect=Dtt),t.process()};A.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:nc(n,1),certificate_authorities:nc(n,2)};t.session.certificateRequest=i,t.expect=Itt,t.process()};A.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:nc(n,2).getBytes()},s=ve.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var a=t.session.clientCertificate;if(!a.publicKey.verify(s,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure}})}t.expect=yX,t.process()};A.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!ve.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)}),A.queue(t,e)),e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createClientKeyExchange(t)}),A.queue(t,e),t.expect=Att;var s=function(a,c){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&A.queue(a,A.createRecord(a,{type:A.ContentType.handshake,data:A.createCertificateVerify(a,c)})),A.queue(a,A.createRecord(a,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),a.state.pending=A.createConnectionState(a),a.state.current.write=a.state.pending.write,A.queue(a,A.createRecord(a,{type:A.ContentType.handshake,data:A.createFinished(a)})),a.expect=XIe,A.flush(a),a.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);A.getClientSignature(t,s)};A.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var r=t.entity===A.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=A.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?wtt:Ntt,t.process()};A.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=ve.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===A.ConnectionEnd.client,a=s?"server finished":"client finished",c=t.session.sp,u=12,l=x8;if(n=l(c.master_secret,a,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))),t.expect=s?Rtt:Ltt,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,A.flush(t),t.isConnected=!0,t.connected(t),t.process()};A.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case A.Alert.Description.close_notify:i="Connection closed.";break;case A.Alert.Description.unexpected_message:i="Unexpected message.";break;case A.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case A.Alert.Description.decryption_failed:i="Decryption failed.";break;case A.Alert.Description.record_overflow:i="Record overflow.";break;case A.Alert.Description.decompression_failure:i="Decompression failed.";break;case A.Alert.Description.handshake_failure:i="Handshake failure.";break;case A.Alert.Description.bad_certificate:i="Bad certificate.";break;case A.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case A.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case A.Alert.Description.certificate_expired:i="Certificate expired.";break;case A.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case A.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case A.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case A.Alert.Description.access_denied:i="Access denied.";break;case A.Alert.Description.decode_error:i="Decode error.";break;case A.Alert.Description.decrypt_error:i="Decrypt error.";break;case A.Alert.Description.export_restriction:i="Export restriction.";break;case A.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case A.Alert.Description.insufficient_security:i="Insufficient security.";break;case A.Alert.Description.internal_error:i="Internal error.";break;case A.Alert.Description.user_canceled:i="User canceled.";break;case A.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===A.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===A.ConnectionEnd.client?"server":"client",alert:n}),t.process()};A.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=ve.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in _8[t.entity][t.expect]?(t.entity===A.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ve.md.md5.create(),sha1:ve.md.sha1.create()}),n!==A.HandshakeType.hello_request&&n!==A.HandshakeType.certificate_verify&&n!==A.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),_8[t.entity][t.expect][n](t,e,i)):A.handleUnexpected(t,e)};A.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};A.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===A.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();A.queue(t,A.createRecord(t,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_response,o)})),A.flush(t)}else if(n===A.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,ve.util.createBuffer(o))}t.process()};var Stt=0,Ttt=1,KIe=2,Ctt=3,Itt=4,XIe=5,wtt=6,Rtt=7,Att=8,Ptt=0,ktt=1,vX=2,Dtt=3,yX=4,Ntt=5,Ltt=6,w=A.handleUnexpected,JIe=A.handleChangeCipherSpec,Xo=A.handleAlert,Qs=A.handleHandshake,ZIe=A.handleApplicationData,Jo=A.handleHeartbeat,bX=[];bX[A.ConnectionEnd.client]=[[w,Xo,Qs,w,Jo],[w,Xo,Qs,w,Jo],[w,Xo,Qs,w,Jo],[w,Xo,Qs,w,Jo],[w,Xo,Qs,w,Jo],[JIe,Xo,w,w,Jo],[w,Xo,Qs,w,Jo],[w,Xo,Qs,ZIe,Jo],[w,Xo,Qs,w,Jo]];bX[A.ConnectionEnd.server]=[[w,Xo,Qs,w,Jo],[w,Xo,Qs,w,Jo],[w,Xo,Qs,w,Jo],[w,Xo,Qs,w,Jo],[JIe,Xo,w,w,Jo],[w,Xo,Qs,w,Jo],[w,Xo,Qs,ZIe,Jo],[w,Xo,Qs,w,Jo]];var Fg=A.handleHelloRequest,Ott=A.handleServerHello,ewe=A.handleCertificate,QIe=A.handleServerKeyExchange,hX=A.handleCertificateRequest,y8=A.handleServerHelloDone,twe=A.handleFinished,_8=[];_8[A.ConnectionEnd.client]=[[w,w,Ott,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[Fg,w,w,w,w,w,w,w,w,w,w,ewe,QIe,hX,y8,w,w,w,w,w,w],[Fg,w,w,w,w,w,w,w,w,w,w,w,QIe,hX,y8,w,w,w,w,w,w],[Fg,w,w,w,w,w,w,w,w,w,w,w,w,hX,y8,w,w,w,w,w,w],[Fg,w,w,w,w,w,w,w,w,w,w,w,w,w,y8,w,w,w,w,w,w],[Fg,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[Fg,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,twe],[Fg,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[Fg,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]];var Mtt=A.handleClientHello,Ftt=A.handleClientKeyExchange,Utt=A.handleCertificateVerify;_8[A.ConnectionEnd.server]=[[w,Mtt,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,ewe,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,Ftt,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,Utt,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,twe],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]];A.generateKeys=function(t,e){var r=x8,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===A.Versions.TLS_1_0.major&&t.version.minor===A.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),a={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return o&&(a.client_write_IV=s.getBytes(e.fixed_iv_length),a.server_write_IV=s.getBytes(e.fixed_iv_length)),a};A.createConnectionState=function(t){var e=t.entity===A.ConnectionEnd.client,r=function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]}};return o},n={read:r(),write:r()};if(n.read.update=function(o,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(o,s,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,s){return n.write.compressFunction(o,s,n.write)?n.write.cipherFunction(s,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=A.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case A.CompressionMethod.none:break;case A.CompressionMethod.deflate:n.read.compressFunction=Ett,n.write.compressFunction=xtt;break;default:throw new Error("Unsupported compression algorithm.")}}return n};A.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=ve.util.createBuffer();return r.putInt32(e),r.putBytes(ve.random.getBytes(28)),r};A.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};A.createAlert=function(t,e){var r=ve.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),A.createRecord(t,{type:A.ContentType.alert,data:r})};A.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=ve.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=ve.util.createBuffer();o.putByte(A.CompressionMethod.none);var s=o.length(),a=ve.util.createBuffer();if(t.virtualHost){var c=ve.util.createBuffer();c.putByte(0),c.putByte(0);var u=ve.util.createBuffer();u.putByte(0),ru(u,2,ve.util.createBuffer(t.virtualHost));var l=ve.util.createBuffer();ru(l,2,u),ru(c,2,l),a.putBuffer(c)}var d=a.length();d>0&&(d+=2);var p=t.session.id,f=p.length+1+2+4+28+2+i+1+s+d,m=ve.util.createBuffer();return m.putByte(A.HandshakeType.client_hello),m.putInt24(f),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),ru(m,1,ve.util.createBuffer(p)),ru(m,2,e),ru(m,1,o),d>0&&ru(m,2,a),m};A.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=ve.util.createBuffer();return n.putByte(A.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),ru(n,1,ve.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};A.createCertificate=function(t){var e=t.entity===A.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=ve.util.createBuffer();if(r!==null)try{ve.util.isArray(r)||(r=[r]);for(var o=null,s=0;s<r.length;++s){var a=ve.pem.decode(r[s])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=a.type,c}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=ve.util.createBuffer(a.body);o===null&&(o=ve.asn1.fromDer(u.bytes(),!1));var l=ve.util.createBuffer();ru(l,3,u),i.putBuffer(l)}r=ve.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(f){return t.error(t,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var d=3+i.length(),p=ve.util.createBuffer();return p.putByte(A.HandshakeType.certificate),p.putInt24(d),ru(p,3,i),p};A.createClientKeyExchange=function(t){var e=ve.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(ve.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=ve.util.createBuffer();return o.putByte(A.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};A.createServerKeyExchange=function(t){var e=0,r=ve.util.createBuffer();return e>0&&(r.putByte(A.HandshakeType.server_key_exchange),r.putInt24(e)),r};A.getClientSignature=function(t,e){var r=ve.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=ve.pki.privateKeyFromPem(s)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):i=s.sign(i,null),o(n,i)},t.getSignature(t,r,e)};A.createCertificateVerify=function(t,e){var r=e.length+2,n=ve.util.createBuffer();return n.putByte(A.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};A.createCertificateRequest=function(t){var e=ve.util.createBuffer();e.putByte(1);var r=ve.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=ve.pki.distinguishedNameToAsn1(i.subject),s=ve.asn1.toDer(o);r.putInt16(s.length()),r.putBuffer(s)}var a=1+e.length()+2+r.length(),c=ve.util.createBuffer();return c.putByte(A.HandshakeType.certificate_request),c.putInt24(a),ru(c,1,e),ru(c,2,r),c};A.createServerHelloDone=function(t){var e=ve.util.createBuffer();return e.putByte(A.HandshakeType.server_hello_done),e.putInt24(0),e};A.createChangeCipherSpec=function(){var t=ve.util.createBuffer();return t.putByte(1),t};A.createFinished=function(t){var e=ve.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===A.ConnectionEnd.client,n=t.session.sp,i=12,o=x8,s=r?"client finished":"server finished";e=o(n.master_secret,s,e.getBytes(),i);var a=ve.util.createBuffer();return a.putByte(A.HandshakeType.finished),a.putInt24(e.length()),a.putBuffer(e),a};A.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=ve.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(ve.random.getBytes(o)),n};A.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===A.ContentType.handshake||e.type===A.ContentType.alert||e.type===A.ContentType.change_cipher_spec))){if(e.type===A.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=A.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>A.MaxFragment;)n.push(A.createRecord(t,{type:e.type,data:ve.util.createBuffer(i.slice(0,A.MaxFragment))})),i=i.slice(A.MaxFragment);i.length>0&&n.push(A.createRecord(t,{type:e.type,data:ve.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var s=n[o],a=t.state.current.write;a.update(t,s)&&t.records.push(s)}}};A.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var gX=function(t){switch(t){case!0:return!0;case ve.pki.certificateError.bad_certificate:return A.Alert.Description.bad_certificate;case ve.pki.certificateError.unsupported_certificate:return A.Alert.Description.unsupported_certificate;case ve.pki.certificateError.certificate_revoked:return A.Alert.Description.certificate_revoked;case ve.pki.certificateError.certificate_expired:return A.Alert.Description.certificate_expired;case ve.pki.certificateError.certificate_unknown:return A.Alert.Description.certificate_unknown;case ve.pki.certificateError.unknown_ca:return A.Alert.Description.unknown_ca;default:return A.Alert.Description.bad_certificate}},Btt=function(t){switch(t){case!0:return!0;case A.Alert.Description.bad_certificate:return ve.pki.certificateError.bad_certificate;case A.Alert.Description.unsupported_certificate:return ve.pki.certificateError.unsupported_certificate;case A.Alert.Description.certificate_revoked:return ve.pki.certificateError.certificate_revoked;case A.Alert.Description.certificate_expired:return ve.pki.certificateError.certificate_expired;case A.Alert.Description.certificate_unknown:return ve.pki.certificateError.certificate_unknown;case A.Alert.Description.unknown_ca:return ve.pki.certificateError.unknown_ca;default:return ve.pki.certificateError.bad_certificate}};A.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,s,a){var c=gX(o),u=t.verify(t,o,s,a);if(u!==!0){if(typeof u=="object"&&!ve.util.isArray(u)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate},u.message&&(l.message=u.message),u.alert&&(l.alert.description=u.alert),l}u!==o&&(u=Btt(u))}return u},ve.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||ve.util.isArray(i))&&(i={send:!0,alert:{level:A.Alert.Level.fatal,description:gX(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:A.Alert.Level.fatal,description:gX(i.error)}),t.error(t,i)}return!t.fail};A.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,s=null;if(i?s=ve.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){o=r.cache[s],delete r.cache[s];for(var a in r.order)if(r.order[a]===s){r.order.splice(a,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=ve.util.bytesToHex(i);r.order.push(s),r.cache[s]=o}}return r};A.createConnection=function(t){var e=null;t.caStore?ve.util.isArray(t.caStore)?e=ve.pki.createCaStore(t.caStore):e=t.caStore:e=ve.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in A.CipherSuites)r.push(A.CipherSuites[n])}var i=t.server?A.ConnectionEnd.server:A.ConnectionEnd.client,o=t.sessionCache?A.createSessionCache(t.sessionCache):null,s={version:{major:A.Version.major,minor:A.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(l,d,p,f){return d},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:ve.util.createBuffer(),tlsData:ve.util.createBuffer(),data:ve.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(l,d){d.origin=d.origin||(l.entity===A.ConnectionEnd.client?"client":"server"),d.send&&(A.queue(l,A.createAlert(l,d.alert)),A.flush(l));var p=d.fatal!==!1;p&&(l.fail=!0),t.error(l,d),p&&l.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(l){s.version={major:A.Version.major,minor:A.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===A.ConnectionEnd.client?Stt:Ptt,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=A.createConnectionState(s)},s.reset();var a=function(l,d){var p=d.type-A.ContentType.change_cipher_spec,f=bX[l.entity][l.expect];p in f?f[p](l,d):A.handleUnexpected(l,d)},c=function(l){var d=0,p=l.input,f=p.length();if(f<5)d=5-f;else{l.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:ve.util.createBuffer(),ready:!1};var m=l.record.version.major===l.version.major;m&&l.session&&l.session.version&&(m=l.record.version.minor===l.version.minor),m||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}})}return d},u=function(l){var d=0,p=l.input,f=p.length();if(f<l.record.length)d=l.record.length-f;else{l.record.fragment.putBytes(p.getBytes(l.record.length)),p.compact();var m=l.state.current.read;m.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})),l.record.ready=!0)}return d};return s.handshake=function(l){if(s.entity!==A.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var d=null;l.length>0&&(s.sessionCache&&(d=s.sessionCache.getSession(l)),d===null&&(l="")),l.length===0&&s.sessionCache&&(d=s.sessionCache.getSession(),d!==null&&(l=d.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ve.md.md5.create(),sha1:ve.md.sha1.create()},d&&(s.version=d.version,s.session.sp=d.sp),s.session.sp.client_random=A.createRandom().getBytes(),s.open=!0,A.queue(s,A.createRecord(s,{type:A.ContentType.handshake,data:A.createClientHello(s)})),A.flush(s)}},s.process=function(l){var d=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(d=c(s)),!s.fail&&s.record!==null&&!s.record.ready&&(d=u(s)),!s.fail&&s.record!==null&&s.record.ready&&a(s,s.record)),d},s.prepare=function(l){return A.queue(s,A.createRecord(s,{type:A.ContentType.application_data,data:ve.util.createBuffer(l)})),A.flush(s)},s.prepareHeartbeatRequest=function(l,d){return l instanceof ve.util.ByteBuffer&&(l=l.bytes()),typeof d>"u"&&(d=l.length),s.expectedHeartbeatPayload=l,A.queue(s,A.createRecord(s,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_request,l,d)})),A.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var d={id:s.session.id,version:s.session.version,sp:s.session.sp};d.sp.keys=null,s.sessionCache.setSession(d.id,d)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,A.queue(s,A.createAlert(s,{level:A.Alert.Level.warning,description:A.Alert.Description.close_notify})),A.flush(s)),s.closed(s)),s.reset(l)},s};rwe.exports=ve.tls=ve.tls||{};for(b8 in A)typeof A[b8]!="function"&&(ve.tls[b8]=A[b8]);var b8;ve.tls.prf_tls1=x8;ve.tls.hmac_sha1=_tt;ve.tls.createSessionCache=A.createSessionCache;ve.tls.createConnection=A.createConnection});var owe=k((yTr,iwe)=>{var Ug=qt();kg();_X();var nu=iwe.exports=Ug.tls;nu.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=nu.BulkCipherAlgorithm.aes,t.cipher_type=nu.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=nu.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:nwe};nu.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=nu.BulkCipherAlgorithm.aes,t.cipher_type=nu.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=nu.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:nwe};function nwe(t,e,r){var n=e.entity===Ug.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:Ug.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:Ug.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=Gtt,t.write.cipherFunction=qtt,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=nu.hmac_sha1}function qtt(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===nu.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=Ug.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=nu.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Htt)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}function Htt(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function jtt(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),s=i-1-o;s<i-1;++s)n=n&&e.at(s)==o;n&&e.truncate(o+1)}return n}function Gtt(t,e){var r=!1,n;t.version.minor===nu.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(jtt);var o=e.macLength,s=Ug.random.getBytesSync(o),a=i.output.length();a>=o?(t.fragment=i.output.getBytes(a-o),s=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=Ug.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Vtt(e.macKey,s,c)&&r,r}function Vtt(t,e,r){var n=Ug.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var SX=k((bTr,uwe)=>{var Sn=qt();Rd();br();var _2=uwe.exports=Sn.sha512=Sn.sha512||{};Sn.md.sha512=Sn.md.algorithms.sha512=_2;var awe=Sn.sha384=Sn.sha512.sha384=Sn.sha512.sha384||{};awe.create=function(){return _2.create("SHA-384")};Sn.md.sha384=Sn.md.algorithms.sha384=awe;Sn.sha512.sha256=Sn.sha512.sha256||{create:function(){return _2.create("SHA-512/256")}};Sn.md["sha512/256"]=Sn.md.algorithms["sha512/256"]=Sn.sha512.sha256;Sn.sha512.sha224=Sn.sha512.sha224||{create:function(){return _2.create("SHA-512/224")}};Sn.md["sha512/224"]=Sn.md.algorithms["sha512/224"]=Sn.sha512.sha224;_2.create=function(t){if(cwe||ztt(),typeof t>"u"&&(t="SHA-512"),!(t in ky))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=ky[t],r=null,n=Sn.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=Sn.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=Sn.util.encodeUtf8(c));var l=c.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=l[1],l[1]=l[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(c),swe(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Sn.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=u&a.blockLength-1;c.putBytes(xX.substr(0,a.blockLength-l));for(var d,p,f=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)d=a.fullMessageLength[m+1]*8,p=d/4294967296>>>0,f+=p,c.putInt32(f>>>0),f=d>>>0;c.putInt32(f);for(var h=new Array(r.length),m=0;m<r.length;++m)h[m]=r[m].slice(0);swe(h,i,c);var g=Sn.util.createBuffer(),v;t==="SHA-512"?v=h.length:t==="SHA-384"?v=h.length-2:v=h.length-4;for(var m=0;m<v;++m)g.putInt32(h[m][0]),(m!==v-1||t!=="SHA-512/224")&&g.putInt32(h[m][1]);return g},a};var xX=null,cwe=!1,EX=null,ky=null;function ztt(){xX="\x80",xX+=Sn.util.fillString("\0",128),EX=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],ky={},ky["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],ky["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],ky["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],ky["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],cwe=!0}function swe(t,e,r){for(var n,i,o,s,a,c,u,l,d,p,f,m,h,g,v,b,y,E,x,R,L,O,z,N,ce,J,D,S,P,F,M,V,de,te,oe,je=r.length();je>=128;){for(P=0;P<16;++P)e[P][0]=r.getInt32()>>>0,e[P][1]=r.getInt32()>>>0;for(;P<80;++P)V=e[P-2],F=V[0],M=V[1],n=((F>>>19|M<<13)^(M>>>29|F<<3)^F>>>6)>>>0,i=((F<<13|M>>>19)^(M<<3|F>>>29)^(F<<26|M>>>6))>>>0,te=e[P-15],F=te[0],M=te[1],o=((F>>>1|M<<31)^(F>>>8|M<<24)^F>>>7)>>>0,s=((F<<31|M>>>1)^(F<<24|M>>>8)^(F<<25|M>>>7))>>>0,de=e[P-7],oe=e[P-16],M=i+de[1]+s+oe[1],e[P][0]=n+de[0]+o+oe[0]+(M/4294967296>>>0)>>>0,e[P][1]=M>>>0;for(h=t[0][0],g=t[0][1],v=t[1][0],b=t[1][1],y=t[2][0],E=t[2][1],x=t[3][0],R=t[3][1],L=t[4][0],O=t[4][1],z=t[5][0],N=t[5][1],ce=t[6][0],J=t[6][1],D=t[7][0],S=t[7][1],P=0;P<80;++P)u=((L>>>14|O<<18)^(L>>>18|O<<14)^(O>>>9|L<<23))>>>0,l=((L<<18|O>>>14)^(L<<14|O>>>18)^(O<<23|L>>>9))>>>0,d=(ce^L&(z^ce))>>>0,p=(J^O&(N^J))>>>0,a=((h>>>28|g<<4)^(g>>>2|h<<30)^(g>>>7|h<<25))>>>0,c=((h<<4|g>>>28)^(g<<30|h>>>2)^(g<<25|h>>>7))>>>0,f=(h&v|y&(h^v))>>>0,m=(g&b|E&(g^b))>>>0,M=S+l+p+EX[P][1]+e[P][1],n=D+u+d+EX[P][0]+e[P][0]+(M/4294967296>>>0)>>>0,i=M>>>0,M=c+m,o=a+f+(M/4294967296>>>0)>>>0,s=M>>>0,D=ce,S=J,ce=z,J=N,z=L,N=O,M=R+i,L=x+n+(M/4294967296>>>0)>>>0,O=M>>>0,x=y,R=E,y=v,E=b,v=h,b=g,M=i+s,h=n+o+(M/4294967296>>>0)>>>0,g=M>>>0;M=t[0][1]+g,t[0][0]=t[0][0]+h+(M/4294967296>>>0)>>>0,t[0][1]=M>>>0,M=t[1][1]+b,t[1][0]=t[1][0]+v+(M/4294967296>>>0)>>>0,t[1][1]=M>>>0,M=t[2][1]+E,t[2][0]=t[2][0]+y+(M/4294967296>>>0)>>>0,t[2][1]=M>>>0,M=t[3][1]+R,t[3][0]=t[3][0]+x+(M/4294967296>>>0)>>>0,t[3][1]=M>>>0,M=t[4][1]+O,t[4][0]=t[4][0]+L+(M/4294967296>>>0)>>>0,t[4][1]=M>>>0,M=t[5][1]+N,t[5][0]=t[5][0]+z+(M/4294967296>>>0)>>>0,t[5][1]=M>>>0,M=t[6][1]+J,t[6][0]=t[6][0]+ce+(M/4294967296>>>0)>>>0,t[6][1]=M>>>0,M=t[7][1]+S,t[7][0]=t[7][0]+D+(M/4294967296>>>0)>>>0,t[7][1]=M>>>0,je-=128}}});var lwe=k(TX=>{var $tt=qt();Ku();var Co=$tt.asn1;TX.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Co.Class.UNIVERSAL,type:Co.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Co.Class.UNIVERSAL,type:Co.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Co.Class.UNIVERSAL,type:Co.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Co.Class.UNIVERSAL,type:Co.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Co.Class.UNIVERSAL,type:Co.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};TX.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Co.Class.UNIVERSAL,type:Co.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Co.Class.UNIVERSAL,type:Co.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Co.Class.UNIVERSAL,type:Co.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Co.Class.UNIVERSAL,type:Co.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Swe=k((xTr,Ewe)=>{var Zo=qt();g2();Jc();SX();br();var gwe=lwe(),Wtt=gwe.publicKeyValidator,Ytt=gwe.privateKeyValidator;typeof dwe>"u"&&(dwe=Zo.jsbn.BigInteger);var dwe,wX=Zo.util.ByteBuffer,ka=typeof Buffer>"u"?Uint8Array:Buffer;Zo.pki=Zo.pki||{};Ewe.exports=Zo.pki.ed25519=Zo.ed25519=Zo.ed25519||{};var Zt=Zo.ed25519;Zt.constants={};Zt.constants.PUBLIC_KEY_BYTE_LENGTH=32;Zt.constants.PRIVATE_KEY_BYTE_LENGTH=64;Zt.constants.SEED_BYTE_LENGTH=32;Zt.constants.SIGN_BYTE_LENGTH=64;Zt.constants.HASH_BYTE_LENGTH=64;Zt.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Zo.random.getBytesSync(Zt.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Zt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Zt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=xf({message:e,encoding:"binary"});for(var r=new ka(Zt.constants.PUBLIC_KEY_BYTE_LENGTH),n=new ka(Zt.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Jtt(r,n),{publicKey:r,privateKey:n}};Zt.privateKeyFromAsn1=function(t){var e={},r=[],n=Zo.asn1.validate(t,Ytt,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Zo.asn1.derToOid(e.privateKeyOid),s=Zo.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.privateKey,c=xf({message:Zo.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:c}};Zt.publicKeyFromAsn1=function(t){var e={},r=[],n=Zo.asn1.validate(t,Wtt,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Zo.asn1.derToOid(e.publicKeyOid),s=Zo.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.ed25519PublicKey;if(a.length!==Zt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return xf({message:a,encoding:"binary"})};Zt.publicKeyFromPrivateKey=function(t){t=t||{};var e=xf({message:t.privateKey,encoding:"binary"});if(e.length!==Zt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Zt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new ka(Zt.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Zt.sign=function(t){t=t||{};var e=xf(t),r=xf({message:t.privateKey,encoding:"binary"});if(r.length===Zt.constants.SEED_BYTE_LENGTH){var n=Zt.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Zt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Zt.constants.SEED_BYTE_LENGTH+" or "+Zt.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new ka(Zt.constants.SIGN_BYTE_LENGTH+e.length);Ztt(i,e,e.length,r);for(var o=new ka(Zt.constants.SIGN_BYTE_LENGTH),s=0;s<o.length;++s)o[s]=i[s];return o};Zt.verify=function(t){t=t||{};var e=xf(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=xf({message:t.signature,encoding:"binary"});if(r.length!==Zt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Zt.constants.SIGN_BYTE_LENGTH);var n=xf({message:t.publicKey,encoding:"binary"});if(n.length!==Zt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Zt.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new ka(Zt.constants.SIGN_BYTE_LENGTH+e.length),o=new ka(Zt.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<Zt.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+Zt.constants.SIGN_BYTE_LENGTH]=e[s];return ert(o,i,i.length,n)>=0};function xf(t){var e=t.message;if(e instanceof Uint8Array||e instanceof ka)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new wX(e,r)}else if(!(e instanceof wX))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new ka(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var RX=bt(),E8=bt([1]),Ktt=bt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Qtt=bt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),pwe=bt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),fwe=bt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),CX=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Xtt=bt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function x2(t,e){var r=Zo.md.sha512.create(),n=new wX(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new ka(Zt.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)o[s]=i.charCodeAt(s);return o}function Jtt(t,e){var r=[bt(),bt(),bt(),bt()],n,i=x2(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,DX(r,i),kX(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function Ztt(t,e,r,n){var i,o,s=new Float64Array(64),a=[bt(),bt(),bt(),bt()],c=x2(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var l=x2(t.subarray(32),r+32);for(AX(l),DX(a,l),kX(t,a),i=32;i<64;++i)t[i]=n[i];var d=x2(t,r+64);for(AX(d),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=l[i];for(i=0;i<32;++i)for(o=0;o<32;o++)s[i+o]+=d[i]*c[o];return vwe(t.subarray(32),s),u}function ert(t,e,r,n){var i,o,s=new ka(32),a=[bt(),bt(),bt(),bt()],c=[bt(),bt(),bt(),bt()];if(o=-1,r<64||trt(c,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=x2(t,r);if(AX(u),_we(a,c,u),DX(c,e.subarray(32)),PX(a,c),kX(s,a),r-=64,ywe(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}function vwe(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*CX[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*CX[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*CX[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function AX(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;vwe(t,e)}function PX(t,e){var r=bt(),n=bt(),i=bt(),o=bt(),s=bt(),a=bt(),c=bt(),u=bt(),l=bt();iS(r,t[1],t[0]),iS(l,e[1],e[0]),Xr(r,r,l),nS(n,t[0],t[1]),nS(l,e[0],e[1]),Xr(n,n,l),Xr(i,t[3],e[3]),Xr(i,i,Qtt),Xr(o,t[2],e[2]),nS(o,o,o),iS(s,n,r),iS(a,o,i),nS(c,o,i),nS(u,n,r),Xr(t[0],s,a),Xr(t[1],u,c),Xr(t[2],c,a),Xr(t[3],s,u)}function mwe(t,e,r){for(var n=0;n<4;++n)xwe(t[n],e[n],r)}function kX(t,e){var r=bt(),n=bt(),i=bt();ort(i,e[2]),Xr(r,e[0],i),Xr(n,e[1],i),S8(t,n),t[31]^=bwe(r)<<7}function S8(t,e){var r,n,i,o=bt(),s=bt();for(r=0;r<16;++r)s[r]=e[r];for(IX(s),IX(s),IX(s),n=0;n<2;++n){for(o[0]=s[0]-65517,r=1;r<15;++r)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,xwe(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function trt(t,e){var r=bt(),n=bt(),i=bt(),o=bt(),s=bt(),a=bt(),c=bt();return Bg(t[2],E8),rrt(t[1],e),Dy(i,t[1]),Xr(o,i,Ktt),iS(i,i,t[2]),nS(o,t[2],o),Dy(s,o),Dy(a,s),Xr(c,a,s),Xr(r,c,i),Xr(r,r,o),nrt(r,r),Xr(r,r,i),Xr(r,r,o),Xr(r,r,o),Xr(t[0],r,o),Dy(n,t[0]),Xr(n,n,o),hwe(n,i)&&Xr(t[0],t[0],Xtt),Dy(n,t[0]),Xr(n,n,o),hwe(n,i)?-1:(bwe(t[0])===e[31]>>7&&iS(t[0],RX,t[0]),Xr(t[3],t[0],t[1]),0)}function rrt(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function nrt(t,e){var r=bt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Dy(r,r),n!==1&&Xr(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function hwe(t,e){var r=new ka(32),n=new ka(32);return S8(r,t),S8(n,e),ywe(r,0,n,0)}function ywe(t,e,r,n){return irt(t,e,r,n,32)}function irt(t,e,r,n,i){var o,s=0;for(o=0;o<i;++o)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function bwe(t){var e=new ka(32);return S8(e,t),e[0]&1}function _we(t,e,r){var n,i;for(Bg(t[0],RX),Bg(t[1],E8),Bg(t[2],E8),Bg(t[3],RX),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,mwe(t,e,n),PX(e,t),PX(t,t),mwe(t,e,n)}function DX(t,e){var r=[bt(),bt(),bt(),bt()];Bg(r[0],pwe),Bg(r[1],fwe),Bg(r[2],E8),Xr(r[3],pwe,fwe),_we(t,r,e)}function Bg(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function ort(t,e){var r=bt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Dy(r,r),n!==2&&n!==4&&Xr(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function IX(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function xwe(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function bt(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function nS(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function iS(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function Dy(t,e){Xr(t,e,e)}function Xr(t,e,r){var n,i,o=0,s=0,a=0,c=0,u=0,l=0,d=0,p=0,f=0,m=0,h=0,g=0,v=0,b=0,y=0,E=0,x=0,R=0,L=0,O=0,z=0,N=0,ce=0,J=0,D=0,S=0,P=0,F=0,M=0,V=0,de=0,te=r[0],oe=r[1],je=r[2],Q=r[3],ct=r[4],Be=r[5],yt=r[6],or=r[7],me=r[8],Qe=r[9],U=r[10],ne=r[11],se=r[12],Te=r[13],ye=r[14],Xe=r[15];n=e[0],o+=n*te,s+=n*oe,a+=n*je,c+=n*Q,u+=n*ct,l+=n*Be,d+=n*yt,p+=n*or,f+=n*me,m+=n*Qe,h+=n*U,g+=n*ne,v+=n*se,b+=n*Te,y+=n*ye,E+=n*Xe,n=e[1],s+=n*te,a+=n*oe,c+=n*je,u+=n*Q,l+=n*ct,d+=n*Be,p+=n*yt,f+=n*or,m+=n*me,h+=n*Qe,g+=n*U,v+=n*ne,b+=n*se,y+=n*Te,E+=n*ye,x+=n*Xe,n=e[2],a+=n*te,c+=n*oe,u+=n*je,l+=n*Q,d+=n*ct,p+=n*Be,f+=n*yt,m+=n*or,h+=n*me,g+=n*Qe,v+=n*U,b+=n*ne,y+=n*se,E+=n*Te,x+=n*ye,R+=n*Xe,n=e[3],c+=n*te,u+=n*oe,l+=n*je,d+=n*Q,p+=n*ct,f+=n*Be,m+=n*yt,h+=n*or,g+=n*me,v+=n*Qe,b+=n*U,y+=n*ne,E+=n*se,x+=n*Te,R+=n*ye,L+=n*Xe,n=e[4],u+=n*te,l+=n*oe,d+=n*je,p+=n*Q,f+=n*ct,m+=n*Be,h+=n*yt,g+=n*or,v+=n*me,b+=n*Qe,y+=n*U,E+=n*ne,x+=n*se,R+=n*Te,L+=n*ye,O+=n*Xe,n=e[5],l+=n*te,d+=n*oe,p+=n*je,f+=n*Q,m+=n*ct,h+=n*Be,g+=n*yt,v+=n*or,b+=n*me,y+=n*Qe,E+=n*U,x+=n*ne,R+=n*se,L+=n*Te,O+=n*ye,z+=n*Xe,n=e[6],d+=n*te,p+=n*oe,f+=n*je,m+=n*Q,h+=n*ct,g+=n*Be,v+=n*yt,b+=n*or,y+=n*me,E+=n*Qe,x+=n*U,R+=n*ne,L+=n*se,O+=n*Te,z+=n*ye,N+=n*Xe,n=e[7],p+=n*te,f+=n*oe,m+=n*je,h+=n*Q,g+=n*ct,v+=n*Be,b+=n*yt,y+=n*or,E+=n*me,x+=n*Qe,R+=n*U,L+=n*ne,O+=n*se,z+=n*Te,N+=n*ye,ce+=n*Xe,n=e[8],f+=n*te,m+=n*oe,h+=n*je,g+=n*Q,v+=n*ct,b+=n*Be,y+=n*yt,E+=n*or,x+=n*me,R+=n*Qe,L+=n*U,O+=n*ne,z+=n*se,N+=n*Te,ce+=n*ye,J+=n*Xe,n=e[9],m+=n*te,h+=n*oe,g+=n*je,v+=n*Q,b+=n*ct,y+=n*Be,E+=n*yt,x+=n*or,R+=n*me,L+=n*Qe,O+=n*U,z+=n*ne,N+=n*se,ce+=n*Te,J+=n*ye,D+=n*Xe,n=e[10],h+=n*te,g+=n*oe,v+=n*je,b+=n*Q,y+=n*ct,E+=n*Be,x+=n*yt,R+=n*or,L+=n*me,O+=n*Qe,z+=n*U,N+=n*ne,ce+=n*se,J+=n*Te,D+=n*ye,S+=n*Xe,n=e[11],g+=n*te,v+=n*oe,b+=n*je,y+=n*Q,E+=n*ct,x+=n*Be,R+=n*yt,L+=n*or,O+=n*me,z+=n*Qe,N+=n*U,ce+=n*ne,J+=n*se,D+=n*Te,S+=n*ye,P+=n*Xe,n=e[12],v+=n*te,b+=n*oe,y+=n*je,E+=n*Q,x+=n*ct,R+=n*Be,L+=n*yt,O+=n*or,z+=n*me,N+=n*Qe,ce+=n*U,J+=n*ne,D+=n*se,S+=n*Te,P+=n*ye,F+=n*Xe,n=e[13],b+=n*te,y+=n*oe,E+=n*je,x+=n*Q,R+=n*ct,L+=n*Be,O+=n*yt,z+=n*or,N+=n*me,ce+=n*Qe,J+=n*U,D+=n*ne,S+=n*se,P+=n*Te,F+=n*ye,M+=n*Xe,n=e[14],y+=n*te,E+=n*oe,x+=n*je,R+=n*Q,L+=n*ct,O+=n*Be,z+=n*yt,N+=n*or,ce+=n*me,J+=n*Qe,D+=n*U,S+=n*ne,P+=n*se,F+=n*Te,M+=n*ye,V+=n*Xe,n=e[15],E+=n*te,x+=n*oe,R+=n*je,L+=n*Q,O+=n*ct,z+=n*Be,N+=n*yt,ce+=n*or,J+=n*me,D+=n*Qe,S+=n*U,P+=n*ne,F+=n*se,M+=n*Te,V+=n*ye,de+=n*Xe,o+=38*x,s+=38*R,a+=38*L,c+=38*O,u+=38*z,l+=38*N,d+=38*ce,p+=38*J,f+=38*D,m+=38*S,h+=38*P,g+=38*F,v+=38*M,b+=38*V,y+=38*de,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=d,t[7]=p,t[8]=f,t[9]=m,t[10]=h,t[11]=g,t[12]=v,t[13]=b,t[14]=y,t[15]=E}});var wwe=k((ETr,Iwe)=>{var ic=qt();br();Jc();g2();Iwe.exports=ic.kem=ic.kem||{};var Twe=ic.jsbn.BigInteger;ic.kem.rsa={};ic.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||ic.random,n={};return n.encrypt=function(i,o){var s=Math.ceil(i.n.bitLength()/8),a;do a=new Twe(ic.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(a.compareTo(Twe.ONE)<=0);a=ic.util.hexToBytes(a.toString(16));var c=s-a.length;c>0&&(a=ic.util.fillString("\0",c)+a);var u=i.encrypt(a,"NONE"),l=t.generate(a,o);return{encapsulation:u,key:l}},n.decrypt=function(i,o,s){var a=i.decrypt(o,"NONE");return t.generate(a,s)},n};ic.kem.kdf1=function(t,e){Cwe(this,t,0,e||t.digestLength)};ic.kem.kdf2=function(t,e){Cwe(this,t,1,e||t.digestLength)};function Cwe(t,e,r,n){t.generate=function(i,o){for(var s=new ic.util.ByteBuffer,a=Math.ceil(o/n)+r,c=new ic.util.ByteBuffer,u=r;u<a;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var l=e.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-o),s.getBytes()}}});var kwe=k((STr,Pwe)=>{var ir=qt();br();Pwe.exports=ir.log=ir.log||{};ir.log.levels=["none","error","warning","info","debug","verbose","max"];var T8={},OX=[],S2=null;ir.log.LEVEL_LOCKED=2;ir.log.NO_LEVEL_CHECK=4;ir.log.INTERPOLATE=8;for(Md=0;Md<ir.log.levels.length;++Md)NX=ir.log.levels[Md],T8[NX]={index:Md,name:NX.toUpperCase()};var NX,Md;ir.log.logMessage=function(t){for(var e=T8[t.level].index,r=0;r<OX.length;++r){var n=OX[r];if(n.flags&ir.log.NO_LEVEL_CHECK)n.f(t);else{var i=T8[n.level].index;e<=i&&n.f(n,t)}}};ir.log.prepareStandard=function(t){"standard"in t||(t.standard=T8[t.level].name+" ["+t.category+"] "+t.message)};ir.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=ir.util.format.apply(this,e)}};ir.log.prepareStandardFull=function(t){"standardFull"in t||(ir.log.prepareStandard(t),t.standardFull=t.standard)};for(LX=["error","warning","info","debug","verbose"],Md=0;Md<LX.length;++Md)(function(e){ir.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};ir.log.logMessage(o)}})(LX[Md]);var LX,Md;ir.log.makeLogger=function(t){var e={flags:0,f:t};return ir.log.setLevel(e,"none"),e};ir.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&ir.log.LEVEL_LOCKED))for(var n=0;n<ir.log.levels.length;++n){var i=ir.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};ir.log.lock=function(t,e){typeof e>"u"||e?t.flags|=ir.log.LEVEL_LOCKED:t.flags&=~ir.log.LEVEL_LOCKED};ir.log.addLogger=function(t){OX.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Rwe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},T2=function(t,e){ir.log.prepareStandard(e);var r=Rwe[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},oS=ir.log.makeLogger(T2)):(T2=function(e,r){ir.log.prepareStandardFull(r),console.log(r.standardFull)},oS=ir.log.makeLogger(T2)),ir.log.setLevel(oS,"debug"),ir.log.addLogger(oS),S2=oS):console={log:function(){}};var oS,Rwe,T2;S2!==null&&typeof window<"u"&&window.location&&(E2=new URL(window.location.href).searchParams,E2.has("console.level")&&ir.log.setLevel(S2,E2.get("console.level").slice(-1)[0]),E2.has("console.lock")&&(Awe=E2.get("console.lock").slice(-1)[0],Awe=="true"&&ir.log.lock(S2)));var E2,Awe;ir.log.consoleLogger=S2});var Nwe=k((TTr,Dwe)=>{Dwe.exports=Rd();n8();JE();YQ();SX()});var Mwe=k((CTr,Owe)=>{var Me=qt();kg();Ku();m2();Dg();Cy();cX();Jc();br();v8();var j=Me.asn1,Xs=Owe.exports=Me.pkcs7=Me.pkcs7||{};Xs.messageFromPem=function(t){var e=Me.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=j.fromDer(e.body);return Xs.messageFromAsn1(n)};Xs.messageToPem=function(t,e){var r={type:"PKCS7",body:j.toDer(t.toAsn1()).getBytes()};return Me.pem.encode(r,{maxline:e})};Xs.messageFromAsn1=function(t){var e={},r=[];if(!j.validate(t,Xs.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=j.derToOid(e.contentType),o;switch(i){case Me.pki.oids.envelopedData:o=Xs.createEnvelopedData();break;case Me.pki.oids.encryptedData:o=Xs.createEncryptedData();break;case Me.pki.oids.signedData:o=Xs.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Xs.createSignedData=function(){var t=null;return t={type:Me.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(FX(t,n,Xs.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Me.pki.certificateFromAsn1(i[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Me.pki.certificateToAsn1(t.certificates[i]));var o=[],s=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&s.value[0].value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(j.create(j.Class.UNIVERSAL,j.Type.SET,!0,t.signerInfos)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Me.pki.certificateFromPem(s)),i=s.issuer.attributes,o=s.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Me.pki.privateKeyFromPem(a));var c=n.digestAlgorithm||Me.pki.oids.sha1;switch(c){case Me.pki.oids.sha1:case Me.pki.oids.sha256:case Me.pki.oids.sha384:case Me.pki.oids.sha512:case Me.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var l=!1,d=!1,p=0;p<u.length;++p){var f=u[p];if(!l&&f.type===Me.pki.oids.contentType){if(l=!0,d)break;continue}if(!d&&f.type===Me.pki.oids.messageDigest){if(d=!0,l)break;continue}}if(!l||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Me.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(Me.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Me.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Me.util.encodeUtf8(t.content)),n.detached?t.detachedContent=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Me.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],s=o.digestAlgorithm;s in n||(n[s]=Me.md[Me.pki.oids[s]].create()),o.authenticatedAttributes.length===0?o.md=n[s]:o.md=Me.md[Me.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(s).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=j.derToOid(t.contentInfo.value[0].value),s=j.toDer(i);s.getByte(),j.getBerValueLength(s),s=s.getBytes();for(var a in n)n[a].start().update(s);for(var c=new Date,u=0;u<t.signers.length;++u){var l=t.signers[u];if(l.authenticatedAttributes.length===0){if(o!==Me.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[]),p=0;p<l.authenticatedAttributes.length;++p){var f=l.authenticatedAttributes[p];f.type===Me.pki.oids.messageDigest?f.value=n[l.digestAlgorithm].digest():f.type===Me.pki.oids.signingTime&&(f.value||(f.value=c)),d.value.push(MX(f)),l.authenticatedAttributesAsn1.value.push(MX(f))}s=j.toDer(d).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=drt(t.signers)}};Xs.createEncryptedData=function(){var t=null;return t={type:Me.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Me.pki.oids["aes256-CBC"]},fromAsn1:function(e){FX(t,e,Xs.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Lwe(t)}},t};Xs.createEnvelopedData=function(){var t=null;return t={type:Me.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Me.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=FX(t,e,Xs.asn1.envelopedDataValidator);t.recipients=crt(r.recipientInfos.value)},toAsn1:function(){return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.type).getBytes()),j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,urt(t.recipients)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,prt(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Me.pki.oids.rsaEncryption:case Me.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Me.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Lwe(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Me.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Me.pki.oids["aes128-CBC"]:n=16,i=16,o=Me.aes.createEncryptionCipher;break;case Me.pki.oids["aes192-CBC"]:n=24,i=16,o=Me.aes.createEncryptionCipher;break;case Me.pki.oids["aes256-CBC"]:n=32,i=16,o=Me.aes.createEncryptionCipher;break;case Me.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Me.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Me.util.createBuffer(Me.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Me.util.createBuffer(Me.random.getBytes(i));var s=o(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var a=0;a<t.recipients.length;++a){var c=t.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Me.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function srt(t){var e={},r=[];if(!j.validate(t,Xs.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Me.pki.RDNAttributesAsArray(e.issuer),serialNumber:Me.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:j.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function art(t){return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[Me.pki.distinguishedNameToAsn1({attributes:t.issuer}),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,Me.util.hexToBytes(t.serialNumber))]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.encryptedContent.algorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")]),j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function crt(t){for(var e=[],r=0;r<t.length;++r)e.push(srt(t[r]));return e}function urt(t){for(var e=[],r=0;r<t.length;++r)e.push(art(t[r]));return e}function lrt(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[Me.pki.distinguishedNameToAsn1({attributes:t.issuer}),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,Me.util.hexToBytes(t.serialNumber))]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.digestAlgorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureAlgorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(MX(i))}e.value.push(r)}return e}function drt(t){for(var e=[],r=0;r<t.length;++r)e.push(lrt(t[r]));return e}function MX(t){var e;if(t.type===Me.pki.oids.contentType)e=j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.value).getBytes());else if(t.type===Me.pki.oids.messageDigest)e=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Me.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=j.utcTimeToDate(i):i=j.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(i)):e=j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(i))}return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[e])])}function prt(t){return[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(Me.pki.oids.data).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.algorithm).getBytes()),t.parameter?j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.content.getBytes())])]}function FX(t,e,r){var n={},i=[];if(!j.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=j.derToOid(n.contentType);if(s!==Me.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Me.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==j.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[c].value}else a=n.encryptedContent;t.encryptedContent={algorithm:j.derToOid(n.encAlgorithm),parameter:Me.util.createBuffer(n.encParameter.value),content:Me.util.createBuffer(a)}}if(n.content){var a="";if(Me.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==j.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[c].value}else a=n.content;t.content=Me.util.createBuffer(a)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function Lwe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Me.pki.oids["aes128-CBC"]:case Me.pki.oids["aes192-CBC"]:case Me.pki.oids["aes256-CBC"]:e=Me.aes.createDecryptionCipher(t.encryptedContent.key);break;case Me.pki.oids.desCBC:case Me.pki.oids["des-EDE3-CBC"]:e=Me.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Uwe=k((ITr,Fwe)=>{var Gi=qt();kg();YE();n8();JE();br();var I8=Fwe.exports=Gi.ssh=Gi.ssh||{};I8.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var s=Gi.util.createBuffer();sS(s,n),Fd(s,t.e),Fd(s,t.n);var a=Gi.util.encode64(s.bytes(),64),c=Math.floor(a.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=a;var u=Gi.util.createBuffer();Fd(u,t.d),Fd(u,t.p),Fd(u,t.q),Fd(u,t.qInv);var l;if(!e)l=Gi.util.encode64(u.bytes(),64);else{var d=u.length()+16-1;d-=d%16;var p=C8(u.bytes());p.truncate(p.length()-d+u.length()),u.putBuffer(p);var f=Gi.util.createBuffer();f.putBuffer(C8("\0\0\0\0",e)),f.putBuffer(C8("\0\0\0",e));var m=Gi.aes.createEncryptionCipher(f.truncate(8),"CBC");m.start(Gi.util.createBuffer().fillWithByte(0,16)),m.update(u.copy()),m.finish();var h=m.output;h.truncate(16),l=Gi.util.encode64(h.bytes(),64)}c=Math.floor(l.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=l;var g=C8("putty-private-key-file-mac-key",e),v=Gi.util.createBuffer();sS(v,n),sS(v,i),sS(v,r),v.putInt32(s.length()),v.putBuffer(s),v.putInt32(u.length()),v.putBuffer(u);var b=Gi.hmac.create();return b.start("sha1",g),b.update(v.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};I8.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Gi.util.createBuffer();return sS(n,r),Fd(n,t.e),Fd(n,t.n),r+" "+Gi.util.encode64(n.bytes())+" "+e};I8.privateKeyToOpenSSH=function(t,e){return e?Gi.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Gi.pki.privateKeyToPem(t)};I8.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Gi.md.md5.create(),n="ssh-rsa",i=Gi.util.createBuffer();sS(i,n),Fd(i,t.e),Fd(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function Fd(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Gi.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function sS(t,e){t.putInt32(e.length),t.putString(e)}function C8(){for(var t=Gi.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var qwe=k((wTr,Bwe)=>{Bwe.exports=qt();kg();owe();Ku();Q6();m2();Swe();YE();wwe();kwe();Nwe();uX();a8();Cy();nX();pX();Mwe();mX();oX();KQ();m8();Jc();JQ();Uwe();_X();br()});var Hwe=k((RTr,frt)=>{frt.exports={name:"@roamhq/mac-ca",version:"1.0.7",description:"Get Mac OS Root certificates",main:"index.js",repository:{type:"git",url:"https://github.com/WonderInventions/mac-ca.git"},scripts:{test:'echo "Error: no test specified" && exit 1',lint:"eslint ."},license:"BSD-3-Clause",dependencies:{"node-forge":"^1.3.1"},devDependencies:{eslint:"^8.22.0"}}});var Vwe=k((ATr,UX)=>{var R8=qwe(),jwe=Hwe(),w8=UX.exports.validFormats={der:0,pem:1,txt:2,asn1:3};function Gwe(t){let e=R8.pki.pemToDer(t),r=R8.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,s=n.slice(o);return{serial:s[0],issuer:s[2],valid:s[3],subject:s[4]}}function mrt(t){let e=Gwe(t),r=new Date,n=e.subject.value.map(s=>s.value[0].value[1].value).join("/"),i=e.valid.value.map(s=>s.value).join(" - "),o=r.toTimeString().replace(/\s*\(.*\)\s*/,"");return[`Subject	${n}`,`Valid	${i}`,`Saved	${r.toLocaleDateString()} ${o} by ${jwe.name}@${jwe.version}`,String(t)].join(`
`)}UX.exports.transform=function(t){return function(e){try{switch(t){case w8.der:return R8.pki.pemToDer(e);case w8.pem:return e;case w8.txt:return mrt(e);case w8.asn1:return Gwe(e);default:return R8.pki.certificateFromPem(e)}}catch{return}}}});var zwe=k((PTr,aS)=>{var BX=require("https"),qX=Vwe();if(process.platform!=="darwin")aS.exports.all=()=>[],aS.exports.each=()=>{};else{let a=function(u,l,d){return d.indexOf(u)===l};hrt=a;let t=require("child_process"),e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r="/System/Library/Keychains/SystemRootCertificates.keychain",n=["find-certificate","-a","-p"],i=t.spawnSync("/usr/bin/security",n).stdout.toString().split(e),o=t.spawnSync("/usr/bin/security",n.concat(r)).stdout.toString().split(e);BX.globalAgent.options.ca=BX.globalAgent.options.ca||[];let s=BX.globalAgent.options.ca,c=i.concat(o);c.filter(a).forEach(u=>s.push(u)),aS.exports.der2=qX.validFormats,aS.exports.all=function(u){return c.map(qX.transform(u)).filter(l=>l)},aS.exports.each=function(u,l){return typeof u=="function"&&(l=u,u=void 0),c.map(qX.transform(u)).filter(d=>d).forEach(l)}}var hrt});var sJ=k((sCr,e2e)=>{var C2=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Trt=typeof AbortController=="function",N8=Trt?AbortController:class{constructor(){this.signal=new Xwe}abort(){this.signal.dispatchEvent("abort")}},Crt=typeof AbortSignal=="function",Irt=typeof N8.AbortSignal=="function",Xwe=Crt?AbortSignal:Irt?N8.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},iJ=new Set,tJ=(t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;L8(r)&&oJ(r,`${t} option`,`options.${e}`,uS)},rJ=(t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(L8(r)){let{prototype:n}=uS,{get:i}=Object.getOwnPropertyDescriptor(n,t);oJ(r,`${t} method`,`cache.${e}()`,i)}},wrt=(t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(L8(r)){let{prototype:n}=uS,{get:i}=Object.getOwnPropertyDescriptor(n,t);oJ(r,`${t} property`,`cache.${e}`,i)}},Jwe=(...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},L8=t=>!iJ.has(t),oJ=(t,e,r,n)=>{iJ.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;Jwe(i,"DeprecationWarning",t,n)},Ny=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Zwe=t=>Ny(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?cS:null:null,cS=class extends Array{constructor(e){super(e),this.fill(0)}},nJ=class{constructor(e){if(e===0)return[];let r=Zwe(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},uS=class t{constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:u,disposeAfter:l,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,sizeCalculation:m,fetchMethod:h,fetchContext:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:b}=e,{length:y,maxAge:E,stale:x}=e instanceof t?{}:e;if(r!==0&&!Ny(r))throw new TypeError("max option must be a nonnegative integer");let R=r?Zwe(r):Array;if(!R)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=f,this.sizeCalculation=m||y,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=h||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=g,!this.fetchMethod&&g!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new R(r),this.prev=new R(r),this.head=0,this.tail=0,this.free=new nJ(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof l=="function"?(this.disposeAfter=l,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.maxSize!==0){if(!Ny(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!x,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Ny(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||E||0,this.ttl){if(!Ny(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let L="LRU_CACHE_UNBOUNDED";L8(L)&&(iJ.add(L),Jwe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}x&&tJ("stale","allowStale"),E&&tJ("maxAge","ttl"),y&&tJ("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new cS(this.max),this.starts=new cS(this.max),this.setItemTTL=(n,i,o=C2.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let s=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);s.unref&&s.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?C2.now():0};let e=0,r=()=>{let n=C2.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n};this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new cS(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!Ny(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!Ny(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return rJ("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],s={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){s.ttl=this.ttls[r];let a=C2.now()-this.starts[r];s.start=Math.floor(Date.now()-a)}this.sizes&&(s.size=this.sizes[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=C2.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:s=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(s=this.requireSize(e,r,s,a),this.maxSize&&s>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,s),c=!1;else{let l=this.valList[u];r!==l&&(this.isBackgroundFetch(l)?l.__abortController.abort():o||(this.dispose(l,e,"set"),this.disposeAfter&&this.disposed.push([l,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,s)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let s=new N8,a={signal:s.signal,options:n,context:i},c=p=>(s.signal.aborted||this.set(e,p,a.options),p),u=p=>{if(this.valList[r]===d&&(!n.noDeleteOnFetchRejection||d.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=d.__staleWhileFetching),d.__returned===d)throw p},l=p=>p(this.fetchMethod(e,o,a)),d=new Promise(l).then(c,u);return d.__abortController=s,d.__staleWhileFetching=o,d.__returned=null,r===void 0?(this.set(e,d,a.options),r=this.keyMap.get(e)):this.valList[r]=d,d}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,fetchContext:d=this.fetchContext,forceRefresh:p=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let f={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:l},m=this.keyMap.get(e);if(m===void 0){let h=this.backgroundFetch(e,m,f,d);return h.__returned=h}else{let h=this.valList[m];if(this.isBackgroundFetch(h))return r&&h.__staleWhileFetching!==void 0?h.__staleWhileFetching:h.__returned=h;if(!p&&!this.isStale(m))return this.moveToTail(m),n&&this.updateItemAge(m),h;let g=this.backgroundFetch(e,m,f,d);return r&&g.__staleWhileFetching!==void 0?g.__staleWhileFetching:g.__returned=g}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let s=this.valList[o],a=this.isBackgroundFetch(s);return this.isStale(o)?a?r?s.__staleWhileFetching:void 0:(i||this.delete(e),r?s:void 0):a?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),s)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return rJ("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return rJ("reset","clear"),this.clear}get length(){return wrt("length","size"),this.size}static get AbortController(){return N8}static get AbortSignal(){return Xwe}};e2e.exports=uS});var uJ=k((aCr,t2e)=>{"use strict";var I2=class extends Error{constructor(e,r){super(e),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},aJ=class extends I2{constructor(e,r,n){super(e,r),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},cJ=class extends I2{constructor(e,r="aborted"){super(e,r)}};t2e.exports={FetchBaseError:I2,FetchError:aJ,AbortError:cJ}});var Sf=k((cCr,n2e)=>{"use strict";var{constants:{MAX_LENGTH:Rrt}}=require("buffer"),{pipeline:O8,PassThrough:Art}=require("stream"),{promisify:Prt}=require("util"),{createGunzip:krt,createInflate:Drt,createBrotliDecompress:Nrt,constants:{Z_SYNC_FLUSH:r2e}}=require("zlib"),Lrt=Tu()("helix-fetch:utils"),Ort=Prt(O8),Mrt=(t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),Frt=(t,e,r,n)=>{if(!Mrt(t,e))return r;let i=o=>{o&&(Lrt(`encountered error while decoding stream: ${o}`),n(o))};switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return O8(r,krt({flush:r2e,finishFlush:r2e}),i);case"deflate":case"x-deflate":return O8(r,Drt(),i);case"br":return O8(r,Nrt(),i);default:return r}},Urt=t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},M8=(t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?Brt(t,e):qrt(t,e);default:return 0}},Brt=(t,e)=>(e.add(t),t.map(r=>e.has(r)?0:M8(r,e)).reduce((r,n)=>r+n,0)),qrt=(t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=M8(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=M8(t[i],e)}),r},Hrt=t=>M8(t,new WeakSet),jrt=async t=>{let e=new Art,r=0,n=[];return e.on("data",i=>{if(r+i.length>Rrt)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await Ort(t,e),Buffer.concat(n,r)};n2e.exports={decodeStream:Frt,isPlainObject:Urt,sizeof:Hrt,streamToBuffer:jrt}});var U8=k((uCr,a2e)=>{"use strict";var{PassThrough:i2e,Readable:Tf}=require("stream"),{types:{isAnyArrayBuffer:s2e}}=require("util"),{FetchError:Grt,FetchBaseError:Vrt}=uJ(),{streamToBuffer:zrt}=Sf(),$rt=Buffer.alloc(0),iu=Symbol("Body internals"),Wrt=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),o2e=async t=>{if(t[iu].disturbed)throw new TypeError("Already read");if(t[iu].error)throw new TypeError(`Stream had error: ${t[iu].error.message}`);t[iu].disturbed=!0;let{stream:e}=t[iu];return e===null?$rt:zrt(e)},F8=class{constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=Tf.from(e.toString()):e instanceof Tf?r=e:Buffer.isBuffer(e)?r=Tf.from(e):s2e(e)?r=Tf.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=Tf.from(e):r=Tf.from(String(e)),this[iu]={stream:r,disturbed:!1,error:null},e instanceof Tf&&r.on("error",n=>{let i=n instanceof Vrt?n:new Grt(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[iu].error=i})}get body(){return this[iu].stream}get bodyUsed(){return this[iu].disturbed}async buffer(){return o2e(this)}async arrayBuffer(){return Wrt(await this.buffer())}async text(){return(await o2e(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(F8.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Yrt=t=>{if(t[iu].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[iu],r=e;if(e instanceof Tf){r=new i2e;let n=new i2e;e.pipe(r),e.pipe(n),t[iu].stream=n}return r},Krt=t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||s2e(t)||t instanceof Tf?null:"text/plain; charset=utf-8";a2e.exports={Body:F8,cloneStream:Yrt,guessContentType:Krt}});var lS=k((lCr,d2e)=>{"use strict";var{validateHeaderName:c2e,validateHeaderValue:u2e}=require("http"),{isPlainObject:Qrt}=Sf(),Cf=Symbol("Headers internals"),w2=t=>{let e=typeof t!="string"?String(t):t;if(typeof c2e=="function")c2e(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},l2e=(t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof u2e=="function")u2e(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},B8=class t{constructor(e={}){if(this[Cf]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(Qrt(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[Cf].map.set(w2(e),l2e(r,e))}has(e){return this[Cf].map.has(w2(e))}get(e){let r=this[Cf].map.get(w2(e));return r===void 0?null:r}append(e,r){let n=w2(e),i=l2e(r,e),o=this[Cf].map.get(n);this[Cf].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[Cf].map.delete(w2(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[Cf].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Cf].map)}};Object.defineProperties(B8.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));d2e.exports={Headers:B8}});var lJ=k((dCr,p2e)=>{"use strict";var{EventEmitter:Xrt}=require("events"),Xu=Symbol("AbortSignal internals"),dS=class{constructor(){this[Xu]={eventEmitter:new Xrt,onabort:null,aborted:!1}}get aborted(){return this[Xu].aborted}get onabort(){return this[Xu].onabort}set onabort(e){this[Xu].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[Xu].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[Xu].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[Xu][n]=="function"&&this[n](r),this[Xu].eventEmitter.emit(e,r)}fire(){this[Xu].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(dS.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var H8=class extends dS{constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[Xu].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[Xu].timerId)}};Object.defineProperties(H8.prototype,{clear:{enumerable:!0}});var q8=Symbol("AbortController internals"),j8=class{constructor(){this[q8]={signal:new dS}}get signal(){return this[q8].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[q8].signal.aborted||this[q8].signal.fire()}};Object.defineProperties(j8.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});p2e.exports={AbortController:j8,AbortSignal:dS,TimeoutSignal:H8}});var R2=k((pCr,h2e)=>{"use strict";var{randomBytes:Jrt}=require("crypto"),{Readable:Zrt}=require("stream"),pJ=t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),ent=t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData",f2e=t=>`--${t}--\r
\r
`,m2e=(t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,pJ(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`};async function*tnt(t,e){for(let[r,n]of t)yield m2e(e,r,n),pJ(n)?yield*n.stream():yield n,yield`\r
`;yield f2e(e)}var rnt=(t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(m2e(e,n,i)),r+=pJ(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(f2e(e)),r},dJ=class{constructor(e){this.fd=e,this.boundary=Jrt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=rnt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Zrt.from(tnt(this.fd,this.boundary))}};h2e.exports={isFormData:ent,FormDataSerializer:dJ}});var v2e=k((fCr,g2e)=>{"use strict";var{AbortSignal:nnt}=lJ(),{Body:int,cloneStream:ont,guessContentType:snt}=U8(),{Headers:ant}=lS(),{isPlainObject:cnt}=Sf(),{isFormData:unt,FormDataSerializer:lnt}=R2(),dnt=20,qg=Symbol("Request internals"),G8=class t extends int{constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body||(n&&n.body?ont(n):null),a=new ant(r.headers||n&&n.headers||{});if(unt(s)&&!a.has("content-type")){let d=new lnt(s);s=d.stream(),a.set("content-type",d.contentType()),!a.has("transfer-encoding")&&!a.has("content-length")&&a.set("content-length",d.length())}if(!a.has("content-type"))if(cnt(s))s=JSON.stringify(s),a.set("content-type","application/json");else{let d=snt(s);d&&a.set("content-type",d)}super(s);let c=n?n.signal:null;if("signal"in r&&(c=r.signal),c&&!(c instanceof nnt))throw new TypeError("signal needs to be an instance of AbortSignal");let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let l=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(l))throw new TypeError(`'${l}' is not a valid cache option`);this[qg]={init:{...r},method:o,redirect:u,cache:l,headers:a,parsedURL:i,signal:c},r.follow===void 0?!n||n.follow===void 0?this.follow=dnt:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[qg].method}get url(){return this[qg].parsedURL.toString()}get headers(){return this[qg].headers}get redirect(){return this[qg].redirect}get cache(){return this[qg].cache}get signal(){return this[qg].signal}clone(){return new t(this)}get init(){return this[qg].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(G8.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});g2e.exports={Request:G8}});var fJ=k((mCr,y2e)=>{"use strict";var{Body:pnt,cloneStream:fnt,guessContentType:mnt}=U8(),{Headers:hnt}=lS(),{isPlainObject:gnt}=Sf(),{isFormData:vnt,FormDataSerializer:ynt}=R2(),Ju=Symbol("Response internals"),V8=class t extends pnt{constructor(e=null,r={}){let n=new hnt(r.headers),i=e;if(vnt(i)&&!n.has("content-type")){let o=new ynt(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(gnt(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=mnt(i);o&&n.set("content-type",o)}super(i),this[Ju]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Ju].url||""}get status(){return this[Ju].status}get statusText(){return this[Ju].statusText}get ok(){return this[Ju].status>=200&&this[Ju].status<300}get redirected(){return this[Ju].counter>0}get headers(){return this[Ju].headers}get httpVersion(){return this[Ju].httpVersion}get decoded(){return this[Ju].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(fnt(this),{...this[Ju]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(V8.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});y2e.exports={Response:V8}});var _2e=k((gCr,b2e)=>{"use strict";var bnt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),_nt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),xnt=new Set([500,502,503,504]),Ent={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Snt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Ly(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Tnt(t){return t?xnt.has(t.status):!0}function mJ(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function Cnt(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}b2e.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=mJ(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=mJ(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Cnt(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&_nt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||bnt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=mJ(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Ent[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Ly(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Ly(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Ly(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Ly(this._rescc["stale-if-error"]),n=e+Ly(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Ly(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Ly(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Tnt(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!Snt[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var T2e=k((vCr,S2e)=>{"use strict";var Int=_2e(),{Headers:wnt}=lS(),x2e=t=>({url:t.url,method:t.method,headers:t.headers.plain()}),E2e=t=>({status:t.status,headers:t.headers.plain()}),hJ=class{constructor(e,r,n){this.policy=new Int(x2e(e),E2e(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(x2e(e))}responseHeaders(e){return new wnt(this.policy.responseHeaders(E2e(e)))}timeToLive(){return this.policy.timeToLive()}};S2e.exports=hJ});var w2e=k((yCr,I2e)=>{"use strict";var{Readable:Rnt}=require("stream"),{Headers:C2e}=lS(),{Response:Ant}=fJ(),Hg=Symbol("CacheableResponse internals"),Pnt=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),gJ=class t extends Ant{constructor(e,r){super(e,r);let n=new C2e(r.headers);this[Hg]={headers:n,bufferedBody:e}}get headers(){return this[Hg].headers}set headers(e){if(e instanceof C2e)this[Hg].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return Rnt.from(this[Hg].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Hg].bufferedBody}async arrayBuffer(){return Pnt(this[Hg].bufferedBody)}async text(){return this[Hg].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a}=this;return new t(this[Hg].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a})}get[Symbol.toStringTag](){return this.constructor.name}},knt=async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:c}=t;return new gJ(e,{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:c})};I2e.exports={cacheableResponse:knt}});var z8=k((bCr,R2e)=>{"use strict";var vJ=class extends Error{get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};R2e.exports={RequestAbortedError:vJ}});var N2e=k((_Cr,D2e)=>{"use strict";var P2e=require("http"),k2e=require("https"),{Readable:Dnt}=require("stream"),If=Tu()("helix-fetch:h1"),{RequestAbortedError:A2e}=z8(),{decodeStream:Nnt}=Sf(),Lnt=(t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new k2e.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new P2e.Agent(n),r.httpAgent):void 0},Ont=t=>{t.h1={}},Mnt=async({h1:t})=>{t.httpAgent&&(If("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(If("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},Fnt=(t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:c}=t,u=e?Nnt(n,c,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:c,readable:u,decoded:!!(e&&u!==t)}},Unt=async(t,e,r)=>{let{request:n}=e.protocol==="https:"?k2e:P2e,i=Lnt(t,e.protocol),o={...r,agent:i},{socket:s,body:a}=o;return s&&(delete o.socket,s.assigned||(s.assigned=!0,i?o.agent=new Proxy(i,{get:(c,u)=>u==="createConnection"&&!s.inUse?(l,d)=>{If(`agent reusing socket #${s.id} (${s.servername})`),s.inUse=!0,d(null,s)}:c[u]}):o.createConnection=(c,u)=>{If(`reusing socket #${s.id} (${s.servername})`),s.inUse=!0,u(null,s)})),new Promise((c,u)=>{If(`${o.method} ${e.href}`);let l,{signal:d}=o,p=()=>{d.removeEventListener("abort",p),s&&!s.inUse&&(If(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),u(new A2e),l&&l.abort()};if(d){if(d.aborted){u(new A2e);return}d.addEventListener("abort",p)}l=n(e,o),l.once("response",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(If(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),c(Fnt(f,o.decode,u))}),l.once("error",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(If(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),l.aborted||(If(`${o.method} ${e.href} failed with: ${f.message}`),l.abort(),u(f))}),a instanceof Dnt?a.pipe(l):(a&&l.write(a),l.end())})};D2e.exports={request:Unt,setupContext:Ont,resetContext:Mnt}});var F2e=k((xCr,M2e)=>{"use strict";var{connect:Bnt,constants:qnt}=require("http2"),{Readable:Hnt}=require("stream"),Tn=Tu()("helix-fetch:h2"),{RequestAbortedError:L2e}=z8(),{decodeStream:jnt}=Sf(),{NGHTTP2_CANCEL:A2}=qnt,Gnt=5*60*1e3,Vnt=5e3,znt=t=>{t.h2={sessionCache:{}}},$nt=async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),Tn(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),O2e=(t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let s=r?jnt(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:s,decoded:!!(r&&s!==e)}},Wnt=(t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:s,pushHandler:a,pushedStreamIdleTimeout:c=Vnt}}}=t,u=i[":path"],l=`${e}${u}`;Tn(`received PUSH_PROMISE: ${l}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),s&&s(l,i,()=>{n.close(A2)}),n.on("push",(d,p)=>{Tn(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(d)}, flags: ${p}`),n.setTimeout(c,()=>{Tn(`closing pushed stream #${n.id} after ${c} ms of inactivity`),n.close(A2)}),a&&a(l,i,O2e(d,n,r))}),n.on("aborted",()=>{Tn(`pushed stream #${n.id} aborted`)}),n.on("error",d=>{Tn(`pushed stream #${n.id} encountered error: ${d}`)}),n.on("frameError",(d,p,f)=>{Tn(`pushed stream #${n.id} encountered frameError: type: ${d}, code: ${p}, id: ${f}`)})},Ynt=async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:s}=e,a=`${i}${o}${s}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:l=Gnt,pushPromiseHandler:d,pushHandler:p}=c,f={...r},{method:m,headers:h,socket:g,body:v,decode:b}=f;return g&&delete f.socket,h.host&&(h[":authority"]=h.host,delete h.host),new Promise((y,E)=>{let x=u[n];if(!x||x.closed||x.destroyed){let N=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),ce={...c,rejectUnauthorized:N};g&&!g.inUse&&(ce.createConnection=()=>(Tn(`reusing socket #${g.id} (${g.servername})`),g.inUse=!0,g)),x=Bnt(n,{...ce,settings:{enablePush:!!(d||p)}}),x.setMaxListeners(1e3),x.setTimeout(l,()=>{Tn(`closing session ${n} after ${l} ms of inactivity`),x.close()}),x.once("connect",()=>{Tn(`session ${n} established`),Tn(`caching session ${n}`),u[n]=x}),x.on("localSettings",D=>{Tn(`session ${n} localSettings: ${JSON.stringify(D)}`)}),x.on("remoteSettings",D=>{Tn(`session ${n} remoteSettings: ${JSON.stringify(D)}`)}),x.once("close",()=>{Tn(`session ${n} closed`),u[n]===x&&(Tn(`discarding cached session ${n}`),delete u[n])}),x.once("error",D=>{Tn(`session ${n} encountered error: ${D}`),u[n]===x&&(Tn(`discarding cached session ${n}`),delete u[n])}),x.on("frameError",(D,S,P)=>{Tn(`session ${n} encountered frameError: type: ${D}, code: ${S}, id: ${P}`)}),x.once("goaway",(D,S,P)=>{Tn(`session ${n} received GOAWAY frame: errorCode: ${D}, lastStreamID: ${S}, opaqueData: ${P?P.toString():void 0}`)}),x.on("stream",(D,S,P)=>{Wnt(t,n,b,D,S,P)})}else g&&g.id!==x.socket.id&&!g.inUse&&(Tn(`discarding redundant socket used for ALPN: #${g.id} ${g.servername}`),g.destroy());Tn(`${m} ${e.host}${a}`);let R,{signal:L}=f,O=()=>{L.removeEventListener("abort",O),E(new L2e),R&&R.close(A2)};if(L){if(L.aborted){E(new L2e);return}L.addEventListener("abort",O)}let z=N=>{Tn(`session ${n} encountered error during ${f.method} ${e.href}: ${N}`),E(N)};x.once("error",z),R=x.request({":method":m,":path":a,...h}),R.once("response",N=>{x.off("error",z),L&&L.removeEventListener("abort",O),y(O2e(N,R,f.decode,E))}),R.once("error",N=>{x.off("error",z),L&&L.removeEventListener("abort",O),R.rstCode!==A2&&(Tn(`${f.method} ${e.href} failed with: ${N.message}`),R.close(A2),E(N))}),R.once("frameError",(N,ce,J)=>{x.off("error",z),Tn(`encountered frameError during ${f.method} ${e.href}: type: ${N}, code: ${ce}, id: ${J}`)}),R.on("push",(N,ce)=>{Tn(`received 'push' event: headers: ${JSON.stringify(N)}, flags: ${ce}`)}),v instanceof Hnt?v.pipe(R):(v&&R.write(v),R.end())})};M2e.exports={request:Ynt,setupContext:znt,resetContext:$nt}});var B2e=k((ECr,U2e)=>{"use strict";var{EventEmitter:Knt}=require("events"),Qnt=()=>{let t={},e=new Knt;return e.setMaxListeners(0),{acquire:r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))};e.on(r,i)}),release:(r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))}}};U2e.exports=Qnt});var q2e=k((SCr,Xnt)=>{Xnt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var z2e=k((TCr,V2e)=>{"use strict";var{Readable:Jnt}=require("stream"),Znt=require("tls"),{types:{isAnyArrayBuffer:eit}}=require("util"),tit=sJ(),yJ=Tu()("helix-fetch:core"),{RequestAbortedError:$8}=z8(),bJ=N2e(),W8=F2e(),rit=B2e(),{isPlainObject:nit}=Sf(),{isFormData:iit,FormDataSerializer:oit}=R2(),{version:sit}=q2e(),_J="h2",xJ="h2c",EJ="http/1.0",Oy="http/1.1",ait=100,cit=60*60*1e3,uit=[_J,Oy,EJ],lit=`helix-fetch/${sit}`,dit={method:"GET",compress:!0,decode:!0},H2e=0,j2e=rit(),G2e=(t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,s=()=>{i.removeEventListener("abort",s);let u=new $8;n(u),o&&o.destroy(u)};if(i){if(i.aborted){n(new $8);return}i.addEventListener("abort",s)}let a=+t.port||443,c=u=>{i&&i.removeEventListener("abort",s),u instanceof $8||(yJ(`connecting to ${t.hostname}:${a} failed with: ${u.message}`),n(u))};o=Znt.connect(a,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",s),o.off("error",c),H2e+=1,o.id=H2e,o.secureConnecting=!1,yJ(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",c)}),pit=async(t,e)=>{let r=await j2e.acquire(t.origin);try{return r||(r=await G2e(t,e)),r}finally{j2e.release(t.origin,r)}},fit=async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=Oy,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=xJ,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:s={},h2:a={}}}=t,c=!(o===!1||s.rejectUnauthorized===!1||a.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let l=await pit(e,u);return i=l.alpnProtocol,i||(i=Oy),t.alpnCache.set(n,i),{protocol:i,socket:l}},mit=t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},hit=async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let s={...r,host:e.host,hostname:e.hostname,port:o},a=await t(s);if(i){let u={...s,ALPNProtocols:n};u.socket=a,u.servername=s.host;let l=await G2e(e,u);return{protocol:l.alpnProtocol||Oy,socket:l}}return{protocol:a.alpnProtocol||Oy,socket:a}},git=async(t,e,r)=>{let n=new URL(e),i={...dit,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=mit(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(iit(i.body)){let u=new oit(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":nit(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):eit(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Jnt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:s}=i,{protocol:a,socket:c=null}=t.socketFactory?await hit(t.socketFactory,n,i,t.alpnProtocols):await fit(t,n,s);switch(yJ(`${n.host} -> ${a}`),a){case _J:try{return await W8.request(t,n,c?{...i,socket:c}:i)}catch(u){let{code:l,message:d}=u;throw l==="ERR_HTTP2_ERROR"&&d==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case xJ:return W8.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),c?{...i,socket:c}:i);case EJ:case Oy:return bJ.request(t,n,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${a}`)}},vit=async t=>(t.alpnCache.clear(),Promise.all([bJ.resetContext(t),W8.resetContext(t)])),yit=t=>{let{options:{alpnProtocols:e=uit,alpnCacheTTL:r=cit,alpnCacheSize:n=ait,userAgent:i=lit,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new tit({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,bJ.setupContext(t),W8.setupContext(t)};V2e.exports={request:git,setupContext:yit,resetContext:vit,RequestAbortedError:$8,ALPN_HTTP2:_J,ALPN_HTTP2C:xJ,ALPN_HTTP1_1:Oy,ALPN_HTTP1_0:EJ}});var W2e=k((CCr,$2e)=>{"use strict";var bit=Tu()("helix-fetch:core"),{request:_it,setupContext:xit,resetContext:Eit,RequestAbortedError:Sit,ALPN_HTTP2:Tit,ALPN_HTTP2C:Cit,ALPN_HTTP1_1:Iit,ALPN_HTTP1_0:wit}=z2e(),SJ=class t{constructor(e){this.options={...e||{}},xit(this)}api(){return{request:async(e,r)=>this.request(e,r),context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),reset:async()=>this.reset(),RequestAbortedError:Sit,ALPN_HTTP2:Tit,ALPN_HTTP2C:Cit,ALPN_HTTP1_1:Iit,ALPN_HTTP1_0:wit}}async request(e,r){return _it(this,e,r)}setCA(e){this.options.ca=e}async reset(){return bit("resetting context"),Eit(this)}};$2e.exports=new SJ().api()});var J2e=k((ICr,X2e)=>{"use strict";var{EventEmitter:Rit}=require("events"),{Readable:P2}=require("stream"),TJ=Tu()("helix-fetch"),Ait=sJ(),{Body:Pit}=U8(),{Headers:RJ}=lS(),{Request:My}=v2e(),{Response:IJ}=fJ(),{FetchBaseError:kit,FetchError:k2,AbortError:Y8}=uJ(),{AbortController:Dit,AbortSignal:Nit,TimeoutSignal:Lit}=lJ(),Oit=T2e(),{cacheableResponse:Mit}=w2e(),{sizeof:Fit}=Sf(),{isFormData:Uit}=R2(),{context:Bit,RequestAbortedError:qit}=W2e(),Y2e=["GET","HEAD"],Hit=500,jit=100*1024*1024,CJ="push",K2e=async(t,e,r)=>{let{request:n}=t.context,i=e instanceof My&&typeof r>"u"?e:new My(e,r),{method:o,body:s,signal:a,compress:c,decode:u,follow:l,redirect:d,init:{body:p}}=i,f;if(a&&a.aborted){let x=new Y8("The operation was aborted.");throw i.init.body instanceof P2&&i.init.body.destroy(x),x}try{f=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:p&&!(p instanceof P2)&&!Uit(p)?p:s,compress:c,decode:u,follow:l,redirect:d,signal:a})}catch(x){throw p instanceof P2&&p.destroy(x),x instanceof TypeError?x:x instanceof qit?new Y8("The operation was aborted."):new k2(x.message,"system",x)}let m=()=>{a.removeEventListener("abort",m);let x=new Y8("The operation was aborted.");i.init.body instanceof P2&&i.init.body.destroy(x),f.readable.emit("error",x)};a&&a.addEventListener("abort",m);let{statusCode:h,statusText:g,httpVersion:v,headers:b,readable:y,decoded:E}=f;if([301,302,303,307,308].includes(h)){let{location:x}=b,R=x==null?null:new URL(x,i.url);switch(i.redirect){case"manual":break;case"error":throw a&&a.removeEventListener("abort",m),new k2(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(R===null)break;if(i.counter>=i.follow)throw a&&a.removeEventListener("abort",m),new k2(`maximum redirect reached at: ${i.url}`,"max-redirect");let L={headers:new RJ(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(h!==303&&i.body&&i.init.body instanceof P2)throw a&&a.removeEventListener("abort",m),new k2("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(h===303||(h===301||h===302)&&i.method==="POST")&&(L.method="GET",L.body=void 0,L.headers.delete("content-length")),a&&a.removeEventListener("abort",m),K2e(t,new My(R,L))}default:}}return a&&(y.once("end",()=>{a.removeEventListener("abort",m)}),y.once("error",()=>{a.removeEventListener("abort",m)})),new IJ(y,{url:i.url,status:h,statusText:g,headers:b,httpVersion:v,decoded:E,counter:i.counter})},Q2e=async(t,e,r)=>{if(t.options.maxCacheSize===0||!Y2e.includes(e.method))return r;let n=new Oit(e,r,{shared:!1});if(n.storable()){let i=await Mit(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},Git=async(t,e,r)=>{let n=new My(e,r);if(t.options.maxCacheSize!==0&&Y2e.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:s,response:a}=t.cache.get(n.url)||{};if(s&&s.satisfiesWithoutRevalidation(n)){a.headers=new RJ(s.responseHeaders(a));let c=a.clone();return c.fromCache=!0,c}}let o=await K2e(t,n);return n.cache!=="no-store"?Q2e(t,n,o):o},Vit=(t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},zit=t=>new Lit(t),wJ=class t{constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:jit,i=Hit;n===0&&(n=1,i=1);let o=({response:a},c)=>Fit(a);this.cache=new Ait({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new Rit,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:s}=this.options.h2;s&&(this.options.h2.pushPromiseHandler=(a,c,u)=>{let l={...c};Object.keys(l).filter(d=>d.startsWith(":")).forEach(d=>delete l[d]),this.pushPromiseHandler(a,l,u)},this.options.h2.pushHandler=(a,c,u)=>{let l={...c};Object.keys(l).filter(v=>v.startsWith(":")).forEach(v=>delete l[v]);let{statusCode:d,statusText:p,httpVersion:f,headers:m,readable:h,decoded:g}=u;this.pushHandler(a,l,new IJ(h,{url:a,status:d,statusText:p,headers:m,httpVersion:f,decoded:g}))}),this.context=Bit(this.options)}api(){return{fetch:async(e,r)=>this.fetch(e,r),Body:Pit,Headers:RJ,Request:My,Response:IJ,AbortController:Dit,AbortSignal:Nit,FetchBaseError:kit,FetchError:k2,AbortError:Y8,context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),noCache:(e={})=>new t({...e,maxCacheSize:0}).api(),h1:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAlive:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),h1NoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAliveNoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),reset:async()=>this.context.reset(),onPush:e=>this.onPush(e),offPush:e=>this.offPush(e),createUrl:Vit,timeoutSignal:zit,clearCache:()=>this.clearCache(),cacheStats:()=>this.cacheStats(),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return Git(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(CJ,e)}offPush(e){return this.eventEmitter.off(CJ,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){TJ(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new My(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(TJ(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){TJ(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await Q2e(this,new My(e,{headers:r}),n);this.eventEmitter.emit(CJ,e,i)}};X2e.exports=new wJ().api()});var eRe=k((wCr,Z2e)=>{"use strict";Z2e.exports=J2e()});var rot={};$r(rot,{activate:()=>Jit,createExtensionContext:()=>fRe,onDeactivate:()=>mRe});module.exports=Ti(rot);var uM=fe(fr()),pRe=fe(gZ()),Lr=require("vscode");var l9=require("events"),MR=fe(require("fs"));var su;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(su||={});var Vy=re("instantiationService");function gAe(t,e,r){e[su.DI_TARGET]===e?e[su.DI_DEPENDENCIES].push({id:t,index:r}):(e[su.DI_DEPENDENCIES]=[{id:t,index:r}],e[su.DI_TARGET]=e)}function re(t){if(su.serviceIds.has(t))return su.serviceIds.get(t);let e=function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");gAe(e,r,i)};return e.toString=()=>t,su.serviceIds.set(t,e),e}var OM=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?j2.isErrorNoTelemetry(e)?new j2(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},vAe=new OM;function zy(t){Kg(t)||vAe.onUnexpectedError(t)}var MM="Canceled";function Kg(t){return t instanceof Zs?!0:t instanceof Error&&t.name===MM&&t.message===MM}var Zs=class extends Error{constructor(){super(MM),this.name=this.message}};function ci(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}function vZ(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}function G2(t){return t?t.message?t.message:t.stack?t.stack.split(`
`)[0]:String(t):"Error"}var j2=class t extends Error{constructor(r){super(r);this.name="CodeExpectedError"}static fromError(r){if(r instanceof t)return r;let n=new t;return n.message=r.message,n.stack=r.stack,n}static isErrorNoTelemetry(r){return r.name==="CodeExpectedError"}},Ro=class t extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function FM(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}function bZ(t,e,r){let n=UM(t,e);if(n!==-1)return t[n]}function UM(t,e,r=t.length-1){for(let n=r;n>=0;n--){let i=t[n];if(e(i))return n}return-1}function BM(t,e){let r=Qg(t,e);return r===-1?void 0:t[r]}function Qg(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?i=s+1:o=s}return i-1}function V2(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?o=s:i=s+1}return i}var yZ=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=Qg(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};function _Z(t,e){for(let r of t){let n=e(r);if(n!==void 0)return n}}function EZ(t,e){let r=0,n=t-1;for(;r<=n;){let i=(r+n)/2|0,o=e(i);if(o<0)r=i+1;else if(o>0)n=i-1;else return i}return-(r+1)}function xr(t){return t.filter(e=>!!e)}function z2(t,e){let r;if(typeof e=="number"){let n=e;r=()=>{let i=Math.sin(n++)*179426549;return i-Math.floor(i)}}else r=Math.random;for(let n=t.length-1;n>0;n-=1){let i=Math.floor(r()*(n+1)),o=t[n];t[n]=t[i],t[i]=o}}var SZ;(a=>{function t(c){return c<0}a.isLessThan=t;function e(c){return c<=0}a.isLessThanOrEqual=e;function r(c){return c>0}a.isGreaterThan=r;function n(c){return c===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(SZ||={});function $2(t,e){return(r,n)=>e(t(r),t(n))}var W2=(t,e)=>t-e;var xZ=class t{constructor(e){this.iterate=e}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||SZ.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function CZ(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}var qM=class{constructor(e,r){this.uri=e;this.value=r}};function bAe(t){return Array.isArray(t)}var _Ae,mn=class t{constructor(e,r){this[_Ae]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(bAe(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{this.defaultToKey=e=>e.toString()}set(e,r){return this.map.set(this.toKey(e),new qM(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(_Ae=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},xAe,Y2=class{constructor(e,r){this[xAe]="ResourceSet";!e||typeof e=="function"?this._map=new mn(e):(this._map=new mn(r),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(xAe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var EAe,HM=class{constructor(){this[EAe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(EAe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},Df=class extends HM{constructor(r,n=1){super();this._limit=r,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,n=2){return super.get(r,n)}peek(r){return super.get(r,0)}set(r,n){return super.set(r,n,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};var K2=class{constructor(){this.map=new Map}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var ES;(b=>{function t(y){return y&&typeof y=="object"&&typeof y[Symbol.iterator]=="function"}b.is=t;let e=Object.freeze([]);function r(){return e}b.empty=r;function*n(y){yield y}b.single=n;function i(y){return t(y)?y:n(y)}b.wrap=i;function o(y){return y||e}b.from=o;function*s(y){for(let E=y.length-1;E>=0;E--)yield y[E]}b.reverse=s;function a(y){return!y||y[Symbol.iterator]().next().done===!0}b.isEmpty=a;function c(y){return y[Symbol.iterator]().next().value}b.first=c;function u(y,E){for(let x of y)if(E(x))return!0;return!1}b.some=u;function l(y,E){for(let x of y)if(E(x))return x}b.find=l;function*d(y,E){for(let x of y)E(x)&&(yield x)}b.filter=d;function*p(y,E){let x=0;for(let R of y)yield E(R,x++)}b.map=p;function*f(...y){for(let E of y)yield*E}b.concat=f;function m(y,E,x){let R=x;for(let L of y)R=E(R,L);return R}b.reduce=m;function*h(y,E,x=y.length){for(E<0&&(E+=y.length),x<0?x+=y.length:x>y.length&&(x=y.length);E<x;E++)yield y[E]}b.slice=h;function g(y,E=Number.POSITIVE_INFINITY){let x=[];if(E===0)return[x,y];let R=y[Symbol.iterator]();for(let L=0;L<E;L++){let O=R.next();if(O.done)return[x,b.empty()];x.push(O.value)}return[x,{[Symbol.iterator](){return R}}]}b.consume=g;async function v(y){let E=[];for await(let x of y)E.push(x);return Promise.resolve(E)}b.asyncToArray=v})(ES||={});var SAe=!1,$y=null,IZ=class t{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let c=new Map,u=[...this.livingDisposables.values()].filter(d=>d.source!==null&&!this.getRootParent(d,c).isSingleton);if(u.length===0)return;let l=new Set(u.map(d=>d.value));if(n=u.filter(d=>!(d.parent&&l.has(d.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(c){function u(d,p){for(;d.length>0&&p.some(f=>typeof f=="string"?f===d[0]:d[0].match(f));)d.shift()}let l=c.source.split(`
`).map(d=>d.trim().replace("at ","")).filter(d=>d!=="");return u(l,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),l.reverse()}let o=new K2;for(let c of n){let u=i(c);for(let l=0;l<=u.length;l++)o.add(u.slice(0,l).join(`
`),c)}n.sort($2(c=>c.idx,W2));let s="",a=0;for(let c of n.slice(0,e)){a++;let u=i(c),l=[];for(let d=0;d<u.length;d++){let p=u[d];p=`(shared with ${o.get(u.slice(0,d+1).join(`
`)).size}/${n.length} leaks) at ${p}`;let m=o.get(u.slice(0,d).join(`
`)),h=CZ([...m].map(g=>i(g)[d]),g=>g);delete h[u[d]];for(let[g,v]of Object.entries(h))l.unshift(`    - stacktraces of ${v.length} other leaks continue with ${g}`);l.unshift(p)}s+=`


==================== Leaking disposable ${a}/${n.length}: ${c.value.constructor.name} ====================
${l.join(`
`)}
============================================================

`}return n.length>e&&(s+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:s}}};function TAe(t){$y=t}if(SAe){let t="__is_disposable_tracked__";TAe(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Jr.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Jr.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function Yy(t){return $y?.trackDisposable(t),t}function Ky(t){$y?.markAsDisposed(t)}function jM(t,e){$y?.setParent(t,e)}function CAe(t,e){if($y)for(let r of t)$y.setParent(r,e)}function wZ(t){return typeof t.dispose=="function"&&t.dispose.length===0}function GM(t){if(ES.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function RZ(...t){let e=tl(()=>GM(t));return CAe(t,e),e}function tl(t){let e=Yy({dispose:FM(()=>{Ky(e),t()})});return e}var Vt=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;Yy(this)}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(Ky(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{GM(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return jM(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),jM(e,null))}},Jr=class{constructor(){this._store=new Vt;Yy(this),jM(this._store,this)}static{this.None=Object.freeze({dispose(){}})}dispose(){Ky(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Wy=class{constructor(){this._store=new Map;this._isDisposed=!1;Yy(this)}dispose(){Ky(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{GM(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,r,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,r)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var hn=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},SS=class{constructor(){this._first=hn.Undefined;this._last=hn.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===hn.Undefined}clear(){let e=this._first;for(;e!==hn.Undefined;){let r=e.next;e.prev=hn.Undefined,e.next=hn.Undefined,e=r}this._first=hn.Undefined,this._last=hn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new hn(e);if(this._first===hn.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==hn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==hn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==hn.Undefined&&e.next!==hn.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===hn.Undefined&&e.next===hn.Undefined?(this._first=hn.Undefined,this._last=hn.Undefined):e.next===hn.Undefined?(this._last=this._last.prev,this._last.next=hn.Undefined):e.prev===hn.Undefined&&(this._first=this._first.next,this._first.prev=hn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==hn.Undefined;)yield e.element,e=e.next}};var IAe=globalThis.performance&&typeof globalThis.performance.now=="function",Nf=class t{static create(e){return new t(e)}constructor(e){this._now=IAe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var AZ=!1,wAe=!1,Xy;(J=>{J.None=()=>Jr.None;function e(D){if(wAe){let{onDidAddListener:S}=D,P=TS.create(),F=0;D.onDidAddListener=()=>{++F===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),P.print()),S?.()}}}function r(D,S){return p(D,()=>{},0,void 0,!0,void 0,S)}J.defer=r;function n(D){return(S,P=null,F)=>{let M=!1,V;return V=D(de=>{if(!M)return V?V.dispose():M=!0,S.call(P,de)},null,F),M&&V.dispose(),V}}J.once=n;function i(D,S,P){return l((F,M=null,V)=>D(de=>F.call(M,S(de)),null,V),P)}J.map=i;function o(D,S,P){return l((F,M=null,V)=>D(de=>{S(de),F.call(M,de)},null,V),P)}J.forEach=o;function s(D,S,P){return l((F,M=null,V)=>D(de=>S(de)&&F.call(M,de),null,V),P)}J.filter=s;function a(D){return D}J.signal=a;function c(...D){return(S,P=null,F)=>{let M=RZ(...D.map(V=>V(de=>S.call(P,de))));return d(M,F)}}J.any=c;function u(D,S,P,F){let M=P;return i(D,V=>(M=S(M,V),M),F)}J.reduce=u;function l(D,S){let P,F={onWillAddFirstListener(){P=D(M.fire,M)},onDidRemoveLastListener(){P?.dispose()}};S||e(F);let M=new Kn(F);return S?.add(M),M.event}function d(D,S){return S instanceof Array?S.push(D):S&&S.add(D),D}function p(D,S,P=100,F=!1,M=!1,V,de){let te,oe,je,Q=0,ct,Be={leakWarningThreshold:V,onWillAddFirstListener(){te=D(or=>{Q++,oe=S(oe,or),F&&!je&&(yt.fire(oe),oe=void 0),ct=()=>{let me=oe;oe=void 0,je=void 0,(!F||Q>1)&&yt.fire(me),Q=0},typeof P=="number"?(clearTimeout(je),je=setTimeout(ct,P)):je===void 0&&(je=0,queueMicrotask(ct))})},onWillRemoveListener(){M&&Q>0&&ct?.()},onDidRemoveLastListener(){ct=void 0,te.dispose()}};de||e(Be);let yt=new Kn(Be);return de?.add(yt),yt.event}J.debounce=p;function f(D,S=0,P){return J.debounce(D,(F,M)=>F?(F.push(M),F):[M],S,void 0,!0,void 0,P)}J.accumulate=f;function m(D,S=(F,M)=>F===M,P){let F=!0,M;return s(D,V=>{let de=F||!S(V,M);return F=!1,M=V,de},P)}J.latch=m;function h(D,S,P){return[J.filter(D,S,P),J.filter(D,F=>!S(F),P)]}J.split=h;function g(D,S=!1,P=[],F){let M=P.slice(),V=D(oe=>{M?M.push(oe):te.fire(oe)});F&&F.add(V);let de=()=>{M?.forEach(oe=>te.fire(oe)),M=null},te=new Kn({onWillAddFirstListener(){V||(V=D(oe=>te.fire(oe)),F&&F.add(V))},onDidAddFirstListener(){M&&(S?setTimeout(de):de())},onDidRemoveLastListener(){V&&V.dispose(),V=null}});return F&&F.add(te),te.event}J.buffer=g;function v(D,S){return(F,M,V)=>{let de=S(new y);return D(function(te){let oe=de.evaluate(te);oe!==b&&F.call(M,oe)},void 0,V)}}J.chain=v;let b=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(S){return this.steps.push(S),this}forEach(S){return this.steps.push(P=>(S(P),P)),this}filter(S){return this.steps.push(P=>S(P)?P:b),this}reduce(S,P){let F=P;return this.steps.push(M=>(F=S(F,M),F)),this}latch(S=(P,F)=>P===F){let P=!0,F;return this.steps.push(M=>{let V=P||!S(M,F);return P=!1,F=M,V?M:b}),this}evaluate(S){for(let P of this.steps)if(S=P(S),S===b)break;return S}}function E(D,S,P=F=>F){let F=(...te)=>de.fire(P(...te)),M=()=>D.on(S,F),V=()=>D.removeListener(S,F),de=new Kn({onWillAddFirstListener:M,onDidRemoveLastListener:V});return de.event}J.fromNodeEventEmitter=E;function x(D,S,P=F=>F){let F=(...te)=>de.fire(P(...te)),M=()=>D.addEventListener(S,F),V=()=>D.removeEventListener(S,F),de=new Kn({onWillAddFirstListener:M,onDidRemoveLastListener:V});return de.event}J.fromDOMEventEmitter=x;function R(D){return new Promise(S=>n(D)(S))}J.toPromise=R;function L(D){let S=new Kn;return D.then(P=>{S.fire(P)},()=>{S.fire(void 0)}).finally(()=>{S.dispose()}),S.event}J.fromPromise=L;function O(D,S,P){return S(P),D(F=>S(F))}J.runAndSubscribe=O;class z{constructor(S,P){this._observable=S;this._counter=0;this._hasChanged=!1;let F={onWillAddFirstListener:()=>{S.addObserver(this)},onDidRemoveLastListener:()=>{S.removeObserver(this)}};P||e(F),this.emitter=new Kn(F),P&&P.add(this.emitter)}beginUpdate(S){this._counter++}handlePossibleChange(S){}handleChange(S,P){this._hasChanged=!0}endUpdate(S){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function N(D,S){return new z(D,S).emitter.event}J.fromObservable=N;function ce(D){return(S,P,F)=>{let M=0,V=!1,de={beginUpdate(){M++},endUpdate(){M--,M===0&&(D.reportChanges(),V&&(V=!1,S.call(P)))},handlePossibleChange(){},handleChange(){V=!0}};D.addObserver(de),D.reportChanges();let te={dispose(){D.removeObserver(de)}};return F instanceof Vt?F.add(te):Array.isArray(F)&&F.push(te),te}}J.fromObservableLight=ce})(Xy||={});var VM=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new Nf,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},PZ=-1;var zM=class{constructor(e,r=Math.random().toString(18).slice(2,5)){this.threshold=e;this.name=r;this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let o,s=0;for(let[a,c]of this._stacks)(!o||s<c)&&(o=a,s=c);console.warn(`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${s}):`),console.warn(o)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}},TS=class t{constructor(e){this.value=e}static create(){return new t(new Error().stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},RAe=0,Qy=class{constructor(e){this.value=e;this.id=RAe++}},AAe=2,PAe=(t,e)=>{if(t instanceof Qy)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},Kn=class{constructor(e){this._size=0;this._options=e,this._leakageMon=PZ>0||this._options?.leakWarningThreshold?new zM(this._options?.leakWarningThreshold??PZ):void 0,this._perfMon=this._options?._profName?new VM(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(AZ){let e=this._listeners;queueMicrotask(()=>{PAe(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),Jr.None;if(this._disposed)return Jr.None;r&&(e=e.bind(r));let i=new Qy(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=TS.create(),o=this._leakageMon.check(i.stack,this._size+1)),AZ&&(i.stack=s??TS.create()),this._listeners?this._listeners instanceof Qy?(this._deliveryQueue??=new $M,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=tl(()=>{o?.(),this._removeListener(i)});return n instanceof Vt?n.add(a):Array.isArray(n)&&n.push(a),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*AAe<=r.length){let o=0;for(let s=0;s<r.length;s++)r[s]?r[o++]=r[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||zy;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Qy)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var $M=class{constructor(){this.i=-1;this.end=0}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var kZ=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Gr;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof Jy?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Xy.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:kZ})})(Gr||={});var Jy=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?kZ:(this._emitter||(this._emitter=new Kn),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Zy=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Jy),this._token}cancel(){this._token?this._token instanceof Jy&&this._token.cancel():this._token=Gr.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Jy&&this._token.dispose():this._token=Gr.None}};function kAe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}function DZ(t,e,...r){return kAe(e,r)}var eb="en",Z2=!1,eR=!1,CS=!1,NAe=!1,LZ=!1,WM=!1,LAe=!1,OAe=!1,MAe=!1,FAe=!1,Q2,X2=eb,NZ=eb,UAe,Hd,jd=globalThis,La;typeof jd.vscode<"u"&&typeof jd.vscode.process<"u"?La=jd.vscode.process:typeof process<"u"&&(La=process);var OZ=typeof La?.versions?.electron=="string",BAe=OZ&&La?.type==="renderer";if(typeof La=="object"){Z2=La.platform==="win32",eR=La.platform==="darwin",CS=La.platform==="linux",NAe=CS&&!!La.env.SNAP&&!!La.env.SNAP_REVISION,LAe=OZ,MAe=!!La.env.CI||!!La.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Q2=eb,X2=eb;let t=La.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];Q2=e.locale,NZ=e.osLocale,X2=r||eb,UAe=e._translationsConfigFile}catch{}LZ=!0}else typeof navigator=="object"&&!BAe?(Hd=navigator.userAgent,Z2=Hd.indexOf("Windows")>=0,eR=Hd.indexOf("Macintosh")>=0,OAe=(Hd.indexOf("Macintosh")>=0||Hd.indexOf("iPad")>=0||Hd.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,CS=Hd.indexOf("Linux")>=0,FAe=Hd?.indexOf("Mobi")>=0,WM=!0,Q2=(DZ({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),void 0)||eb,X2=Q2,NZ=navigator.language):console.error("Unable to resolve platform.");var J2=0;eR?J2=1:Z2?J2=3:CS&&(J2=2);var nl=Z2,MZ=eR,FZ=CS;var UZ=LZ;var BZ=WM,qAe=WM&&typeof jd.importScripts=="function",qZ=qAe?jd.origin:void 0;var HZ=J2,rl=Hd,Lf=X2,HAe;(n=>{function t(){return Lf}n.value=t;function e(){return Lf.length===2?Lf==="en":Lf.length>=3?Lf[0]==="e"&&Lf[1]==="n"&&Lf[2]==="-":!1}n.isDefaultVariant=e;function r(){return Lf==="en"}n.isDefault=r})(HAe||={});var jAe=typeof jd.postMessage=="function"&&!jd.importScripts,jZ=(()=>{if(jAe){let t=[];jd.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),jd.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var GAe=!!(rl&&rl.indexOf("Chrome")>=0),zot=!!(rl&&rl.indexOf("Firefox")>=0),$ot=!!(!GAe&&rl&&rl.indexOf("Safari")>=0),Wot=!!(rl&&rl.indexOf("Edg/")>=0),Yot=!!(rl&&rl.indexOf("Android")>=0);var Xg,YM=globalThis.vscode;if(typeof YM<"u"&&typeof YM.process<"u"){let t=YM.process;Xg={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?Xg={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Xg={get platform(){return nl?"win32":MZ?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var IS=Xg.cwd,GZ=Xg.env,VZ=Xg.platform,Xot=Xg.arch;var $Ae=65,WAe=97,YAe=90,KAe=122,Ff=46,io=47,ea=92,Of=58,QAe=63,tR=class extends Error{constructor(r,n,i){let o;typeof n=="string"&&n.indexOf("not ")===0?(o="must not be",n=n.replace(/^not /,"")):o="must be";let s=r.indexOf(".")!==-1?"property":"argument",a=`The "${r}" ${s} ${o} of type ${n}`;a+=`. Received type ${typeof i}`;super(a);this.code="ERR_INVALID_ARG_TYPE"}};function XAe(t,e){if(t===null||typeof t!="object")throw new tR(e,"Object",t)}function Qn(t,e){if(typeof t!="string")throw new tR(e,"string",t)}var ta=VZ==="win32";function Ot(t){return t===io||t===ea}function KM(t){return t===io}function Mf(t){return t>=$Ae&&t<=YAe||t>=WAe&&t<=KAe}function rR(t,e,r,n){let i="",o=0,s=-1,a=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=io}if(n(c)){if(!(s===u-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Ff||i.charCodeAt(i.length-2)!==Ff){if(i.length>2){let l=i.lastIndexOf(r);l===-1?(i="",o=0):(i=i.slice(0,l),o=i.length-1-i.lastIndexOf(r)),s=u,a=0;continue}else if(i.length!==0){i="",o=0,s=u,a=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(s+1,u)}`:i=t.slice(s+1,u),o=u-s-1;s=u,a=0}else c===Ff&&a!==-1?++a:a=-1}return i}function zZ(t,e){XAe(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}var Xn={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Qn(o,"path"),o.length===0)continue}else e.length===0?o=IS():(o=GZ[`=${e}`]||IS(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===ea)&&(o=`${e}\\`));let s=o.length,a=0,c="",u=!1,l=o.charCodeAt(0);if(s===1)Ot(l)&&(a=1,u=!0);else if(Ot(l))if(u=!0,Ot(o.charCodeAt(1))){let d=2,p=d;for(;d<s&&!Ot(o.charCodeAt(d));)d++;if(d<s&&d!==p){let f=o.slice(p,d);for(p=d;d<s&&Ot(o.charCodeAt(d));)d++;if(d<s&&d!==p){for(p=d;d<s&&!Ot(o.charCodeAt(d));)d++;(d===s||d!==p)&&(c=`\\\\${f}\\${o.slice(p,d)}`,a=d)}}}else a=1;else Mf(l)&&o.charCodeAt(1)===Of&&(c=o.slice(0,2),a=2,s>2&&Ot(o.charCodeAt(2))&&(u=!0,a=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(a)}\\${r}`,n=u,u&&e.length>0)break}return r=rR(r,!n,"\\",Ot),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Qn(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return KM(o)?"\\":t;if(Ot(o))if(i=!0,Ot(t.charCodeAt(1))){let a=2,c=a;for(;a<e&&!Ot(t.charCodeAt(a));)a++;if(a<e&&a!==c){let u=t.slice(c,a);for(c=a;a<e&&Ot(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!Ot(t.charCodeAt(a));)a++;if(a===e)return`\\\\${u}\\${t.slice(c)}\\`;a!==c&&(n=`\\\\${u}\\${t.slice(c,a)}`,r=a)}}}else r=1;else Mf(o)&&t.charCodeAt(1)===Of&&(n=t.slice(0,2),r=2,e>2&&Ot(t.charCodeAt(2))&&(i=!0,r=3));let s=r<e?rR(t.slice(r),!i,"\\",Ot):"";return s.length===0&&!i&&(s="."),s.length>0&&Ot(t.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(t){Qn(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ot(r)||e>2&&Mf(r)&&t.charCodeAt(1)===Of&&Ot(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let s=t[o];Qn(s,"path"),s.length>0&&(e===void 0?e=r=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ot(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ot(r.charCodeAt(1))&&(++i,o>2&&(Ot(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ot(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Xn.normalize(e)},relative(t,e){if(Qn(t,"from"),Qn(e,"to"),t===e)return"";let r=Xn.resolve(t),n=Xn.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===ea;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===ea;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===ea;)a++;let c=e.length;for(;c-1>a&&e.charCodeAt(c-1)===ea;)c--;let u=c-a,l=s<u?s:u,d=-1,p=0;for(;p<l;p++){let m=t.charCodeAt(i+p);if(m!==e.charCodeAt(a+p))break;m===ea&&(d=p)}if(p!==l){if(d===-1)return n}else{if(u>l){if(e.charCodeAt(a+p)===ea)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}s>l&&(t.charCodeAt(i+p)===ea?d=p:p===2&&(d=3)),d===-1&&(d=0)}let f="";for(p=i+d+1;p<=o;++p)(p===o||t.charCodeAt(p)===ea)&&(f+=f.length===0?"..":"\\..");return a+=d,f.length>0?`${f}${n.slice(a,c)}`:(n.charCodeAt(a)===ea&&++a,n.slice(a,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Xn.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===ea){if(e.charCodeAt(1)===ea){let r=e.charCodeAt(2);if(r!==QAe&&r!==Ff)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Mf(e.charCodeAt(0))&&e.charCodeAt(1)===Of&&e.charCodeAt(2)===ea)return`\\\\?\\${e}`;return t},dirname(t){Qn(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ot(i)?t:".";if(Ot(i)){if(r=n=1,Ot(t.charCodeAt(1))){let a=2,c=a;for(;a<e&&!Ot(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&Ot(t.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!Ot(t.charCodeAt(a));)a++;if(a===e)return t;a!==c&&(r=n=a+1)}}}}else Mf(i)&&t.charCodeAt(1)===Of&&(r=e>2&&Ot(t.charCodeAt(2))?3:2,n=r);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(Ot(t.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Qn(e,"ext"),Qn(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Mf(t.charCodeAt(0))&&t.charCodeAt(1)===Of&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(Ot(c)){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ot(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Qn(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,s=0;t.length>=2&&t.charCodeAt(1)===Of&&Mf(t.charCodeAt(0))&&(e=n=2);for(let a=t.length-1;a>=e;--a){let c=t.charCodeAt(a);if(Ot(c)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),c===Ff?r===-1?r=a:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||i===-1||s===0||s===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:zZ.bind(null,"\\"),parse(t){Qn(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ot(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ot(i)){if(n=1,Ot(t.charCodeAt(1))){let d=2,p=d;for(;d<r&&!Ot(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&Ot(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&!Ot(t.charCodeAt(d));)d++;d===r?n=d:d!==p&&(n=d+1)}}}}else if(Mf(i)&&t.charCodeAt(1)===Of){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ot(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,s=n,a=-1,c=!0,u=t.length-1,l=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ot(i)){if(!c){s=u+1;break}continue}a===-1&&(c=!1,a=u+1),i===Ff?o===-1?o=u:l!==1&&(l=1):o!==-1&&(l=-1)}return a!==-1&&(o===-1||l===0||l===1&&o===a-1&&o===s+1?e.base=e.name=t.slice(s,a):(e.name=t.slice(s,o),e.base=t.slice(s,a),e.ext=t.slice(o,a))),s>0&&s!==n?e.dir=t.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},JAe=(()=>{if(ta){let t=/\\/g;return()=>{let e=IS().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>IS()})(),mr={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:JAe();Qn(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===io)}return e=rR(e,!r,"/",KM),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Qn(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===io,r=t.charCodeAt(t.length-1)===io;return t=rR(t,!e,"/",KM),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Qn(t,"path"),t.length>0&&t.charCodeAt(0)===io},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Qn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":mr.normalize(e)},relative(t,e){if(Qn(t,"from"),Qn(e,"to"),t===e||(t=mr.resolve(t),e=mr.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,s=e.length-o,a=i<s?i:s,c=-1,u=0;for(;u<a;u++){let d=t.charCodeAt(r+u);if(d!==e.charCodeAt(o+u))break;d===io&&(c=u)}if(u===a)if(s>a){if(e.charCodeAt(o+u)===io)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>a&&(t.charCodeAt(r+u)===io?c=u:u===0&&(c=0));let l="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===io)&&(l+=l.length===0?"..":"/..");return`${l}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(Qn(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===io,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===io){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Qn(e,"ext"),Qn(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===io){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===io){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Qn(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let s=t.length-1;s>=0;--s){let a=t.charCodeAt(s);if(a===io){if(!i){r=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===Ff?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:zZ.bind(null,"/"),parse(t){Qn(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===io,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,c=t.length-1,u=0;for(;c>=n;--c){let l=t.charCodeAt(c);if(l===io){if(!a){o=c+1;break}continue}s===-1&&(a=!1,s=c+1),l===Ff?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(s!==-1){let l=o===0&&r?1:o;i===-1||u===0||u===1&&i===s-1&&i===o+1?e.base=e.name=t.slice(l,s):(e.name=t.slice(l,i),e.base=t.slice(l,s),e.ext=t.slice(i,s))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};mr.win32=Xn.win32=Xn;mr.posix=Xn.posix=mr;var QM=ta?Xn.normalize:mr.normalize,ZAe=ta?Xn.isAbsolute:mr.isAbsolute,ePe=ta?Xn.join:mr.join,$Z=ta?Xn.resolve:mr.resolve,WZ=ta?Xn.relative:mr.relative,YZ=ta?Xn.dirname:mr.dirname,nR=ta?Xn.basename:mr.basename,Jot=ta?Xn.extname:mr.extname,Zot=ta?Xn.format:mr.format,est=ta?Xn.parse:mr.parse,tst=ta?Xn.toNamespacedPath:mr.toNamespacedPath,tb=ta?Xn.sep:mr.sep,rst=ta?Xn.delimiter:mr.delimiter;var iR=class{constructor(e){this.fn=e;this.lastCache=void 0;this.lastArgKey=void 0}get(e){let r=JSON.stringify(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this.fn(e)),this.lastCache}};var Ao=class{constructor(e){this.executor=e;this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function wS(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function rb(t){return t.split(/\r\n|\r|\n/)}function ZZ(t){for(let e=0,r=t.length;e<r;e++){let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function oR(t,e,r){let n=[],i=0;for(let o of t.matchAll(e)){if(n.push(t.slice(i,o.index)),o.index===void 0)throw new Error("match.index should be defined");i=o.index+o[0].length,n.push(r(o[0],...o.slice(1),o.index,t,o.groups))}return n.push(t.slice(i)),Promise.all(n).then(o=>o.join(""))}function eee(t,e){return t<e?-1:t>e?1:0}function tPe(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let c=t.charCodeAt(r),u=e.charCodeAt(i);if(c<u)return-1;if(c>u)return 1}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function tee(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let c=t.charCodeAt(r),u=e.charCodeAt(i);if(c===u)continue;if(c>=128||u>=128)return tPe(t.toLowerCase(),e.toLowerCase(),r,n,i,o);KZ(c)&&(c-=32),KZ(u)&&(u-=32);let l=c-u;if(l!==0)return l}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function KZ(t){return t>=97&&t<=122}function sR(t,e){return t.length===e.length&&tee(t,e)===0}function RS(t,e){let r=e.length;return e.length>t.length?!1:tee(t,e,0,r)===0}function ree(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}function nee(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}var fst=String.fromCharCode(65279);var QZ=class t{static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=rPe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function rPe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var XZ=class t{constructor(e){this.confusableDictionary=e}static{this.ambiguousCharacterData=new Ao(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new iR(e=>{function r(l){let d=new Map;for(let p=0;p<l.length;p+=2)d.set(l[p],l[p+1]);return d}function n(l,d){let p=new Map(l);for(let[f,m]of d)p.set(f,m);return p}function i(l,d){if(!l)return d;let p=new Map;for(let[f,m]of l)d.has(f)&&p.set(f,m);return p}let o=this.ambiguousCharacterData.value,s=e.filter(l=>!l.startsWith("_")&&l in o);s.length===0&&(s=["_default"]);let a;for(let l of s){let d=r(o[l]);a=i(a,d)}let c=r(o._common),u=n(c,a);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Ao(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},JZ=class t{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static get codePoints(){return t.getData()}};function AS(t){return typeof t=="string"}function aR(t){return Array.isArray(t)&&t.every(e=>AS(e))}function JM(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}function nb(t){return typeof t=="number"&&!isNaN(t)}function nPe(t){return typeof t>"u"}function PS(t){return!iPe(t)}function iPe(t){return nPe(t)||t===null}function Jg(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Bf(t){return t===47||t===92}function ZM(t){return t.replace(/[\\/]/g,mr.sep)}function oee(t){return t.indexOf("/")===-1&&(t=ZM(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}function e9(t,e=mr.sep){if(!t)return"";let r=t.length,n=t.charCodeAt(0);if(Bf(n)){if(Bf(t.charCodeAt(1))&&!Bf(t.charCodeAt(2))){let o=3,s=o;for(;o<r&&!Bf(t.charCodeAt(o));o++);if(s!==o&&!Bf(t.charCodeAt(o+1))){for(o+=1;o<r;o++)if(Bf(t.charCodeAt(o)))return t.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(sPe(n)&&t.charCodeAt(1)===58)return Bf(t.charCodeAt(2))?t.slice(0,2)+e:t.slice(0,2);let i=t.indexOf("://");if(i!==-1){for(i+=3;i<r;i++)if(Bf(t.charCodeAt(i)))return t.slice(0,i+1)}return""}function t9(t,e,r,n=tb){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!RS(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}function sPe(t){return t>=65&&t<=90||t>=97&&t<=122}var cPe=/^\w[\w\d+.-]*$/,uPe=/^\//,lPe=/^\/\//;function dPe(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!cPe.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!uPe.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(lPe.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function pPe(t,e){return!t&&!e?"file":t}function fPe(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==au&&(e=au+e):e=au;break}return e}var Wr="",au="/",mPe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,gt=class t{static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Wr,this.authority=e.authority||Wr,this.path=e.path||Wr,this.query=e.query||Wr,this.fragment=e.fragment||Wr):(this.scheme=pPe(e,s),this.authority=r||Wr,this.path=fPe(this.scheme,n||Wr),this.query=i||Wr,this.fragment=o||Wr,dPe(this,s))}get fsPath(){return kS(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:s}=e;return r===void 0?r=this.scheme:r===null&&(r=Wr),n===void 0?n=this.authority:n===null&&(n=Wr),i===void 0?i=this.path:i===null&&(i=Wr),o===void 0?o=this.query:o===null&&(o=Wr),s===void 0?s=this.fragment:s===null&&(s=Wr),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new qf(r,n,i,o,s)}static parse(e,r=!1){let n=mPe.exec(e);return n?new qf(n[2]||Wr,cR(n[4]||Wr),cR(n[5]||Wr),cR(n[7]||Wr),cR(n[9]||Wr),r):new qf(Wr,Wr,Wr,Wr,Wr)}static file(e){let r=Wr;if(nl&&(e=e.replace(/\\/g,au)),e[0]===au&&e[1]===au){let n=e.indexOf(au,2);n===-1?(r=e.substring(2),e=au):(r=e.substring(2,n),e=e.substring(n)||au)}return new qf("file",r,e,Wr,Wr)}static from(e,r){return new qf(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return nl&&e.scheme==="file"?n=t.file(Xn.join(kS(e,!0),...r)).path:n=mr.join(e.path,...r),e.with({path:n})}toString(e=!1){return r9(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new qf(e);return r._formatted=e.external??null,r._fsPath=e._sep===cee?e.fsPath??null:null,r}}else return e}};function n9(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}var cee=nl?1:void 0,qf=class extends gt{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=kS(this,!1)),this._fsPath}toString(r=!1){return r?r9(this,!0):(this._formatted||(this._formatted=r9(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=cee),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},uee={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function see(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||r&&s===91||r&&s===93||r&&s===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let a=uee[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}function hPe(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=uee[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}function kS(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,nl&&(r=r.replace(/\//g,"\\")),r}function r9(t,e){let r=e?hPe:see,n="",{scheme:i,authority:o,path:s,query:a,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=au,n+=au),o){let u=o.indexOf("@");if(u!==-1){let l=o.substr(0,u);o=o.substr(u+1),u=l.lastIndexOf(":"),u===-1?n+=r(l,!1,!1):(n+=r(l.substr(0,u),!1,!1),n+=":",n+=r(l.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let u=s.charCodeAt(1);u>=65&&u<=90&&(s=`/${String.fromCharCode(u+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let u=s.charCodeAt(0);u>=65&&u<=90&&(s=`${String.fromCharCode(u+32)}:${s.substr(2)}`)}n+=r(s,!0,!1)}return a&&(n+="?",n+=r(a,!1,!1)),c&&(n+="#",n+=e?c:see(c,!1,!1)),n}function lee(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+lee(t.substr(3)):t}}var aee=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function cR(t){return t.match(aee)?t.replace(aee,e=>lee(e)):t}var Ln;(F=>(F.inMemory="inmemory",F.vscode="vscode",F.internal="private",F.walkThrough="walkThrough",F.walkThroughSnippet="walkThroughSnippet",F.http="http",F.https="https",F.file="file",F.mailto="mailto",F.untitled="untitled",F.data="data",F.command="command",F.vscodeRemote="vscode-remote",F.vscodeRemoteResource="vscode-remote-resource",F.vscodeManagedRemoteResource="vscode-managed-remote-resource",F.vscodeUserData="vscode-userdata",F.vscodeCustomEditor="vscode-custom-editor",F.vscodeNotebookCell="vscode-notebook-cell",F.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",F.vscodeNotebookCellOutput="vscode-notebook-cell-output",F.vscodeInteractiveInput="vscode-interactive-input",F.vscodeSettings="vscode-settings",F.vscodeWorkspaceTrust="vscode-workspace-trust",F.vscodeTerminal="vscode-terminal",F.vscodeChatSesssion="vscode-chat-editor",F.webviewPanel="webview-panel",F.vscodeWebview="vscode-webview",F.extension="extension",F.vscodeFileResource="vscode-file",F.tmp="tmp",F.vsls="vsls",F.vscodeSourceControl="vscode-scm"))(Ln||={});var gPe="tkn",i9=class{constructor(){this._hosts=Object.create(null);this._ports=Object.create(null);this._connectionTokens=Object.create(null);this._preferredWebSchema="http";this._delegate=null;this._remoteResourcesPath=`/${Ln.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e){this._remoteResourcesPath=`${e}/${Ln.vscodeRemoteResource}`}set(e,r,n){this._hosts[e]=r,this._ports[e]=n}setConnectionToken(e,r){this._connectionTokens[e]=r}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return zy(a),e}let r=e.authority,n=this._hosts[r];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[r],o=this._connectionTokens[r],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${gPe}=${encodeURIComponent(o)}`),gt.from({scheme:BZ?this._preferredWebSchema:Ln.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},vPe=new i9;var yPe="vscode-app",o9=class t{static{this.FALLBACK_AUTHORITY=yPe}asBrowserUri(e){let r=this.toUri(e,require);return this.uriToBrowserUri(r)}uriToBrowserUri(e){return e.scheme===Ln.vscodeRemote?vPe.rewrite(e):e.scheme===Ln.file&&(UZ||qZ===`${Ln.vscodeFileResource}://${t.FALLBACK_AUTHORITY}`)?e.with({scheme:Ln.vscodeFileResource,authority:e.authority||t.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let r=this.toUri(e,require);return this.uriToFileUri(r)}uriToFileUri(e){return e.scheme===Ln.vscodeFileResource?e.with({scheme:Ln.file,authority:e.authority!==t.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,r){return gt.isUri(e)?e:gt.parse(r.toUrl(e))}},Rst=new o9,bPe;(o=>{let t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(t.get("3"));let r="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:gt.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let c=a?.get(r);if(c)return t.get(c)}o.getHeadersFromQuery=n;function i(s,a,c){if(!globalThis.crossOriginIsolated)return;let u=a&&c?"3":c?"2":"1";s instanceof URLSearchParams?s.set(r,u):s[r]=u}o.addSearchParam=i})(bPe||={});function Gd(t){return kS(t,!0)}var DS=class{constructor(e){this._ignorePathCasing=e}compare(e,r,n=!1){return e===r?0:eee(this.getComparisonKey(e,n),this.getComparisonKey(r,n))}isEqual(e,r,n=!1){return e===r?!0:!e||!r?!1:this.getComparisonKey(e,n)===this.getComparisonKey(r,n)}getComparisonKey(e,r=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,r,n=!1){if(e.scheme===r.scheme){if(e.scheme===Ln.file)return t9(Gd(e),Gd(r),this._ignorePathCasing(e))&&e.query===r.query&&(n||e.fragment===r.fragment);if(dee(e.authority,r.authority))return t9(e.path,r.path,this._ignorePathCasing(e),"/")&&e.query===r.query&&(n||e.fragment===r.fragment)}return!1}joinPath(e,...r){return gt.joinPath(e,...r)}basenameOrAuthority(e){return sc(e)||e.authority}basename(e){return mr.basename(e.path)}extname(e){return mr.extname(e.path)}dirname(e){if(e.path.length===0)return e;let r;return e.scheme===Ln.file?r=gt.file(YZ(Gd(e))).path:(r=mr.dirname(e.path),e.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),r="/")),e.with({path:r})}normalizePath(e){if(!e.path.length)return e;let r;return e.scheme===Ln.file?r=gt.file(QM(Gd(e))).path:r=mr.normalize(e.path),e.with({path:r})}relativePath(e,r){if(e.scheme!==r.scheme||!dee(e.authority,r.authority))return;if(e.scheme===Ln.file){let o=WZ(Gd(e),Gd(r));return nl?ZM(o):o}let n=e.path||"/",i=r.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return mr.relative(n,i)}resolvePath(e,r){if(e.scheme===Ln.file){let n=gt.file($Z(Gd(e),r));return e.with({authority:n.authority,path:n.path})}return r=oee(r),e.with({path:mr.resolve(e.path,r)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,r){return e===r||e!==void 0&&r!==void 0&&sR(e,r)}hasTrailingPathSeparator(e,r=tb){if(e.scheme===Ln.file){let n=Gd(e);return n.length>e9(n).length&&n[n.length-1]===r}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,r=tb){return pee(e,r)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,r=tb){let n=!1;if(e.scheme===Ln.file){let i=Gd(e);n=i!==void 0&&i.length===e9(i).length&&i[i.length-1]===r}else{r="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!pee(e,r)?e.with({path:e.path+"/"}):e}},hr=new DS(()=>!1),Ost=new DS(t=>t.scheme===Ln.file?!FZ:!0),Mst=new DS(t=>!0),ib=hr.isEqual.bind(hr),Fst=hr.isEqualOrParent.bind(hr),Ust=hr.getComparisonKey.bind(hr),Bst=hr.basenameOrAuthority.bind(hr),sc=hr.basename.bind(hr),Oa=hr.extname.bind(hr),qst=hr.dirname.bind(hr),Hst=hr.joinPath.bind(hr),jst=hr.normalizePath.bind(hr),fee=hr.relativePath.bind(hr),Gst=hr.resolvePath.bind(hr),Vst=hr.isAbsolutePath.bind(hr),dee=hr.isEqualAuthority.bind(hr),pee=hr.hasTrailingPathSeparator.bind(hr),zst=hr.removeTrailingPathSeparator.bind(hr),$st=hr.addTrailingPathSeparator.bind(hr);var _Pe;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(l=>{let[d,p]=l.split(":");d&&p&&a.set(d,p)});let u=s.path.substring(0,s.path.indexOf(";"));return u&&a.set(o.META_DATA_MIME,u),a}o.parseMetaData=i})(_Pe||={});var xPe=Symbol("MicrotaskDelay");function ob(t,e,r){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(r)});t.then(n,i).finally(()=>o.dispose())})}function Vd(t,e,r){let n,i=setTimeout(()=>{n?.(void 0),r?.()},e);return Promise.race([t.finally(()=>clearTimeout(i)),new Promise(o=>n=o)])}var lR=class{constructor(e){this._size=0;this._isDisposed=!1;this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new Kn}whenIdle(){return this.size>0?Xy.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((r,n)=>{this.outstandingPromises.push({factory:e,c:r,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}};var dR=class{constructor(e,r){this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}},pR=class{constructor(){this.disposable=void 0}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,r,n=globalThis){this.cancel();let i=n.setInterval(()=>{e()},r);this.disposable=tl(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel()}};var EPe,uR;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?uR=(t,e)=>{jZ(()=>{if(r)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:uR=(t,e,r)=>{let n=t.requestIdleCallback(e,typeof r=="number"?{timeout:r}:void 0),i=!1;return{dispose(){i||(i=!0,t.cancelIdleCallback(n))}}},EPe=t=>uR(globalThis,t)})();var s9=class{constructor(e,r){this._didRun=!1;this._executor=()=>{try{this._value=r()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=uR(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},fR=class extends s9{constructor(e){super(globalThis,e)}};var Zg=class{get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new Zs)}},SPe;(r=>{async function t(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}r.settled=t;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}r.withAsyncBody=e})(SPe||={});var cu=class t{static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromises(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Kn,queueMicrotask(async()=>{let r={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{await Promise.resolve(e(r)),this.resolve()}catch(n){this.reject(n)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Xy.toPromise(this._onStateChanged.event)}while(!0)}}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var e0=class{constructor(){this._deferred=new Zg;this._asyncIterable=new cu(n=>{if(e){n.reject(e);return}return r&&n.emitMany(r),this._errorFn=i=>n.reject(i),this._emitFn=i=>n.emitOne(i),this._deferred.p});let e,r;this._emitFn=n=>{r||(r=[]),r.push(n)},this._errorFn=n=>{e||(e=n)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var zt=class{constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};var a9=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}},NS=class{constructor(e){this._hashFn=e;this._nodes=new Map}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new a9(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};var t0=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var TPe=!1,mR=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},hR=class t{constructor(e=new t0,r=!1,n,i=TPe){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._activeInstantiations=new Set;this._services.set(Vy,this),this._globalGraph=i?n?._globalGraph??new NS(o=>o):void 0}createChild(e){return new t(e,this._strict,this,this._enableTracing)}invokeFunction(e,...r){let n=LS.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s=>{if(i)throw vZ("service accessor is only valid during the invocation of its target method");let a=this._getOrCreateServiceInstance(s,n);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){let n,i;return e instanceof zt?(n=LS.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=LS.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=su.getServiceDependencies(e).sort((a,c)=>a.index-c.index),o=[];for(let a of i){let c=this._getOrCreateServiceInstance(a.id,n);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(c)}let s=i.length>0?i[0].index:r.length;if(r.length!==s){console.trace(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${r.length} static arguments`);let a=s-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,s)}return Reflect.construct(e,r.concat(o))}_setServiceInstance(e,r){if(this._services.get(e)instanceof zt)this._services.set(e,r);else if(this._parent)this._parent._setServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof zt?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new NS(a=>a.id.toString()),o=0,s=[{id:e,desc:r,_trace:n}];for(;s.length;){let a=s.pop();if(i.lookupOrInsertNode(a),o++>1e3)throw new mR(i);for(let c of su.getServiceDependencies(a.desc.ctor)){let u=this._getServiceInstanceOrDescriptor(c.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(a.id),String(c.id)),u instanceof zt){let l={id:c.id,desc:u,_trace:a._trace.branch(c.id,!0)};i.insertEdge(a,l),s.push(l)}}}for(;;){let a=i.roots();if(a.length===0){if(!i.isEmpty())throw new mR(i);break}for(let{data:c}of a){if(this._getServiceInstanceOrDescriptor(c.id)instanceof zt){let l=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setServiceInstance(c.id,l)}i.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof zt)return this._createServiceInstance(e,r,n,i,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o){if(i){let s=new t(void 0,this._strict,this,this._enableTracing);s._globalGraphImplicitDependency=String(e);let a=new Map,c=new fR(()=>{let u=s._createInstance(r,n,o);for(let[l,d]of a){let p=u[l];if(typeof p=="function")for(let f of d)f.disposable=p.apply(u,f.listener)}return a.clear(),u});return new Proxy(Object.create(null),{get(u,l){if(!c.isInitialized&&typeof l=="string"&&(l.startsWith("onDid")||l.startsWith("onWill"))){let f=a.get(l);return f||(f=new SS,a.set(l,f)),(h,g,v)=>{if(c.isInitialized)return c.value[l](h,g,v);{let b={listener:[h,g,v],disposable:void 0},y=f.push(b);return tl(()=>{y(),b.disposable?.dispose()})}}}if(l in u)return u[l];let d=c.value,p=d[l];return typeof p!="function"||(p=p.bind(d),u[l]=p),p},set(u,l,d){return c.value[l]=d,!0},getPrototypeOf(u){return r.prototype}})}else return this._createInstance(r,n,o)}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var LS=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,s){let a=[],c=new Array(o+1).join("	");for(let[u,l,d]of s._dep)if(l&&d){r=!0,a.push(`${c}CREATES -> ${u}`);let p=n(o+1,d);p&&a.push(p)}else a.push(`${c}uses -> ${u}`);return a.join(`
`)}let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var Yt=re("IServicesAccessor"),gR=class{constructor(e,r){this._isSealed=!1;let n=Array.isArray(e)?new t0(...e):e??new t0;n.set(Yt,this);let i=r?r._pair.insta.createChild(n):new hR(n,!0);this._pair={services:n,insta:i}}get(e){return this._pair.insta.invokeFunction(r=>r.get(e))}safeGet(e){try{return this.get(e)}catch{return}}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._pair.services.set(e,r)}defineIfNotDefined(e,r){this.safeGet(e)===void 0&&this.define(e,r())}seal(){this._isSealed=!0}toString(){return""}};var Ma=hee(),vR=Ma.buildType!=="dev",zd=Ma.isPreRelease||!vR;var OS=class{constructor(e,r){this.name=e;this.version=r}format(){return`${this.name}/${this.version}`}},ft=re("IEnvService");var vt=(n=>(n[n.InlineChat=1]="InlineChat",n[n.PanelChat=2]="PanelChat",n[n.Other=3]="Other",n))(vt||{});(e=>{function t(r){switch(r){case 1:return"conversationInline";case 2:return"conversationPanel";default:return"none"}}e.toString=t})(vt||={});var Hf="github.copilot",Re=re("IConfigurationService"),bR=class{getConfigMixedWithDefaults(e){if(this.isDefaultSettingOverwritten(e)){let r=this.getConfig(e);return JM(r)&&JM(e.defaultValue)?{...e.defaultValue,...r}:r}return e.defaultValue}},yR;function IPe(){if(!yR){yR=new Map;let t=Ma.contributes.configuration.properties;for(let e of Object.keys(t))typeof t[e].default<"u"&&yR.set(e,t[e].default)}return yR}function Nt(t,e){let r=IPe().get(`${Hf}.${t}`);if(typeof r<"u"&&e!==r)throw new Error(`The default value for setting ${t} is different in package.json and in code`);let n=t.indexOf("."),i=t.substring(0,n);if(i!=="editor"&&i!=="chat"&&i!=="advanced"&&i!=="notebook")throw new Error(`Unexpected setting section ${i} in setting ${t}`);let o=t.substring(n+1);return{id:t,firstPart:i,secondPart:o,defaultValue:e}}var ke={EnableCodeActions:Nt("editor.enableCodeActions",!0),LocaleOverride:Nt("chat.localeOverride","auto"),WelcomeMessage:Nt("chat.welcomeMessage","first"),TerminalChatLocation:Nt("chat.terminalChatLocation","chatView"),AuthProvider:Nt("advanced.authProvider","github"),NotebookIterativeImproving:Nt("notebook.iterativeImproving",!1),DebugOverrideProxyUrl:Nt("advanced.debug.overrideProxyUrl",""),DebugChatOverrideProxyUrl:Nt("advanced.debug.chatOverrideProxyUrl",""),DebugTestOverrideProxyUrl:Nt("advanced.debug.testOverrideProxyUrl",""),DebugOverrideEngine:Nt("advanced.debug.overrideEngine",""),DebugOverrideChatEngine:Nt("advanced.debug.overrideChatEngine","gpt-3.5-turbo"),DebugOverrideChatMaxTokenNum:Nt("advanced.debug.overrideChatMaxTokenNum",0),DebugOverrideChatOffTopicModel:Nt("advanced.debug.overrideChatOffTopicModel",""),DebugOverrideChatOffTopicModelTokenizer:Nt("advanced.debug.overrideChatOffTopicModelTokenizer",""),DebugOverrideChatOffTopicModelThreshold:Nt("advanced.debug.overrideChatOffTopicModelThreshold",0),DebugOverrideLogLevels:Nt("advanced.debug.overrideLogLevels",{}),DebugFilterLogCategories:Nt("advanced.debug.filterLogCategories",[]),DebugReportFeedback:Nt("advanced.debug.reportFeedback",!1),DebugUseNodeFetcher:Nt("advanced.debug.useNodeFetcher",!1),DebugUseElectronFetcher:Nt("advanced.debug.useElectronFetcher",!1),ConversationSlashCommandEnablements:Nt("advanced.slashCommands",{"*":!1}),ConversationVariablesEnablements:Nt("advanced.variables",{"*":zd}),ConversationAdditionalPromptContext:Nt("advanced.conversationAdditionalPromptContext","firstTurn"),ConversationLoggingEnabled:Nt("advanced.conversationLoggingEnabled",!1),ConversationIntentDetection:Nt("advanced.conversationIntentDetection",!1),KerberosServicePrincipal:Nt("advanced.kerberosServicePrincipal",""),AgentsEndpointUrl:Nt("advanced.agentsEndpointUrl","https://api.githubcopilot.com"),EnableRemoteAgents:Nt("advanced.enableRemoteAgents",!1),ExplainIntentRefer:Nt("advanced.explain.refer",!0),FixUseGPT4InInlineChat:Nt("advanced.fix.useGPT4InInlineChat",!1),FixUseWorkspaceChunksFromSelection:Nt("advanced.fix.useWorkspaceChunksFromSelection",!1),FixUseWorkspaceChunksFromDiagnostics:Nt("advanced.fix.useWorkspaceChunksFromDiagnostics",!1),RenameSuggestionsEnabled:Nt("advanced.renameSuggestionsEnabled",!1),WorkspaceNewFlowEnabled:Nt("advanced.workspace.useNewFlow",!0),WorkspaceCodeSearchEnabled:Nt("advanced.workspace.codeSearchEnabled",void 0),WorkspaceUseAdaEnabled:Nt("advanced.workspace.useAda",void 0),WorkspaceRerankStrategy:Nt("advanced.workspace.rerankStrategy",void 0),WorkspaceUseFilesVariable:Nt("advanced.workspace.useFilesVariable",!1),InlineChatStreaming:Nt("advanced.inlineChatStreaming","progressive"),UseProjectTemplates:Nt("chat.useProjectTemplates",!0),ExplainScopeSelection:Nt("chat.scopeSelection",!1),UseMessageNames:Nt("advanced.useMessageNames",!0)};var pe=re("ILogService"),$d=class{constructor(e,r){this.logTargets=e;this.configurationService=r;this.loggers=new Map;this.promptResponseLoggers=new Map;this.myLogTarget={logIt:(n,i,...o)=>{this.logTargets.forEach(s=>s.logIt(n,i,...o))}}}get defaultLogger(){return this.getLogger("extension")}getLogger(e){return $d._getLogger(e,this.loggers,r=>new ER(r,this.myLogTarget,this.configurationService))}getPromptResponseLogger(e){return $d._getLogger(e,this.promptResponseLoggers,r=>new c9(r,this.myLogTarget,this.configurationService))}registerAppender(e){return this.logTargets.push(e),tl(()=>{let r=this.logTargets.indexOf(e);r!==-1&&this.logTargets.splice(r,1)})}static _getLogger(e,r,n){let i=r.get(e);return typeof i>"u"&&(i=n(e),r.set(e,i)),i}};$d=ze([rt(1,Re)],$d);var MS=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(MS||{}),_R=class{logIt(e,r,...n){e===3?console.error(r,...n):e===2&&console.warn(r,...n)}},xR=class{constructor(e){this.output=e}logIt(e,r,...n){this.output.appendLine(`${r} ${n.map(wPe)}`)}},ER=class{constructor(e,r,n){this.category=e;this.target=r;this.configurationService=n}stringToLevel(e){return MS[e]}log(e,...r){if(!this.shouldLog(e,this.category))return;let n=`[${this.category}]`;this.target.logIt(e,n,...r)}shouldLog(e,r){let n=this.configurationService.getConfig(ke.DebugFilterLogCategories);if(n.length>0&&!n.includes(r))return!1;let i=this.configurationService.getConfig(ke.DebugOverrideLogLevels),o=this.stringToLevel(i[this.category])??this.stringToLevel(i["*"])??1;return e>=o}debug(...e){this.log(0,...e)}info(...e){this.log(1,...e)}warn(...e){this.log(2,...e)}error(...e){this.log(3,...e)}exception(e,r){let n=r?`${r}: `:"",i=e instanceof Error?e:new Error("Non-error thrown: "+e);this.log(3,`${n}${i.stack}`)}},c9=class extends ER{logPrompt(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;super.info(r+e.map(n=>`${n.role.toUpperCase()}:
${n.content}`).join(r)+r)}logResponse(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;if(typeof e!="string"){if(e.type!=="success"){super.info(`${r}RESPONSE FAILED DUE TO ${e.type}${r}`);return}Array.isArray(e.value)?e.value.length===1?e=e.value[0]:e=`${e.value.map(n=>`<<${n}>>`).join(", ")}`:e=e.value}super.info(`${r}ASSISTANT:
${e}${r}`)}debug(e,...r){this.conversationLoggingEnabled()&&super.debug(e,...r)}info(e,...r){this.conversationLoggingEnabled()&&super.info(e,...r)}warn(e,...r){this.conversationLoggingEnabled()&&super.warn(e,...r)}error(e,...r){this.conversationLoggingEnabled()&&super.error(e,...r)}conversationLoggingEnabled(){return this.configurationService.getConfig(ke.ConversationLoggingEnabled)}};function wPe(t){switch(typeof t){case"object":return JSON.stringify(t);default:return String(t)}}var Zr=re("IFetcherService"),SR=(n=>(n[n.Helix=0]="Helix",n[n.Node=1]="Node",n[n.Electron=2]="Electron",n))(SR||{}),jf=class{constructor(e,r,n,i,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getJson=o;this.getBody=s;this.ok=this.status>=200&&this.status<300}async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}};var gee="github.com",RPe=`https://${gee}`,sb=re("INetworkConfiguration"),TR=class{constructor(e=RPe){this.recalculateUrls(e)}isGitHubEnterprise(){return this.isEnterprise}getTokenUrl(e){return e.devOverride?.copilotTokenUrl??this.tokenUrl}getNotificationUrl(e){return e.devOverride?.notificationUrl??this.notificationUrl}updateBaseUrl(e,r){if(!r)return;let n=this.baseUri;this.recalculateUrls(r),n.toString()!==this.baseUri.toString()&&e.get(kt).resetCopilotToken(e)}recalculateUrls(e){this.baseUri=gt.parse(e);let r=gt.parse(`${this.baseUri.scheme}://api.${this.baseUri.authority}`);this.isEnterprise=this.baseUri.authority!==gee,this.tokenUrl=gt.joinPath(r,"/copilot_internal/v2/token").toString(),this.notificationUrl=gt.joinPath(r,"/copilot_internal/notification").toString()}};var ab=re("IUrlOpener"),CR=class{constructor(){this.openedUrls=[]}open(e){this.openedUrls.push(e)}};var IR=re("INotificationSender");var APe=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],RR=re("IUserErrorNotifier"),wR=class{constructor(e){this.accessor=e;this.notifiedErrorCodes=[]}async notifyUser(e){APe.includes(e.code)&&!this.didNotifyBefore(e.code)&&(this.displayCertificateErrorNotification(e),this.notifiedErrorCodes.push(e.code))}displayCertificateErrorNotification(e){let r="https://aka.ms/copilot-ssc",n="Your current Copilot license doesn't support proxy connections with self-signed certificates.";this.accessor.get(pe).getLogger("certificates").error(`${n} Please visit ${r} to learn more. Original cause: ${JSON.stringify(e)}`),this.showCertificateWarningMessage(n,r)}showCertificateWarningMessage(e,r){let n={title:"Learn more"};this.accessor.get(IR).showWarningMessage(e,n).then(i=>{i?.title===n.title&&this.accessor.get(ab).open(r)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};var rs=re("ICopilotTokenNotifier"),AR=class{constructor(){this._onCopilotToken=new Kn;this.onCopilotToken=this._onCopilotToken.event}dispose(){this._onCopilotToken.dispose()}emit(e,r){this._onCopilotToken.fire({token:e,envelope:r})}};var cb=re("ITelemetryUserConfig"),PR=class{constructor(e,r,n){this.trackingId=r,this.optedIn=n??!1,this.setupUpdateOnToken(e)}setupUpdateOnToken(e){e.get(rs).onCopilotToken(r=>{let n=r.token.getTokenValue("rt")==="1",i=r.token.getTokenValue("tid"),o=r.token.organization_list;i!==void 0&&(this.trackingId=i,this.organizationsList=o?.toString(),this.optedIn=n)})}},PPe="https://copilot-telemetry.githubusercontent.com/telemetry",DR=re("ITelemetryEndpointUrl"),kR=class{constructor(e=PPe){this.url=e}getUrl(){return this.url}},Ne=re("ITelemetryService"),Gf=re("IGHTelemetryService");var On=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let t;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?t=crypto.getRandomValues.bind(crypto):t=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),r=[];for(let n=0;n<256;n++)r.push(n.toString(16).padStart(2,"0"));return function(){t(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o}}();var gr=class t{static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Date.now())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o.filtersAndExp=this.filtersAndExp,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Date.now())}extendWithEditorAgnosticFields(e){let r=e.get(ft);this.properties.editor_version=r.getEditorInfo().format(),this.properties.editor_plugin_version=r.getEditorPluginInfo().format(),this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${r.getVersion()}`,this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=r.getEditorInfo().format()}extendWithConfigProperties(e){let r=e.get(ft),n=e.get(Re).dumpConfig();n["copilot.build"]=r.getBuild(),n["copilot.buildType"]=r.getBuildType();let i=e.get(cb);i.trackingId&&(n["copilot.trackingId"]=i.trackingId),i.organizationsList&&(n.organizations_list=i.organizationsList),this.properties={...this.properties,...n}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(e)return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}updateTimeSinceIssuedAndDisplayed(){let e=Date.now()-this.issuedTime;if(this.measurements.timeSinceIssuedMs=e,this.displayedTime!==void 0){let r=Date.now()-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}}makeReadyForSending(e){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.updateTimeSinceIssuedAndDisplayed();for(let r in this.properties)this.properties[r]===void 0&&delete this.properties[r];DPe(e,this.properties)}};function vee(t){if(!t)return;let e={};for(let r in t){let n=t[r];n&&(n.value?e[r]=n.value:e[r]=n)}return e}function DPe(t,e){e.unique_id=On();let r=t.get(ft);e.common_extname=r.getEditorPluginInfo().name,e.common_extversion=r.getEditorPluginInfo().version,e.common_vscodeversion=r.getEditorInfo().format()}var Wd=class{constructor(e,r,n){this.token=e;this.organization_list=r;this.public_suggestions=n;this.tokenMap=this.parseToken(e)}parseToken(e){let r=new Map,i=e?.split(":")[0]?.split(";");for(let o of i){let[s,a]=o.split("=");r.set(s,a)}return r}get isInternal(){let e=["4535c7beffc844b46bb1ed4aa04d759a","a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","1cb18ac6eedd49b43d74a1c5beb0b955"];if(!this.organization_list)return!1;for(let r of this.organization_list)if(e.includes(r))return!0;return!1}getTokenValue(e){return this.tokenMap.get(e)}};var kt=re("ICopilotTokenManager"),ub=class{constructor(){this.copilotTokenRefreshEventEmitter=new l9.EventEmitter;this.githubTokenChangedEventEmitter=new l9.EventEmitter}};function bee(t){return t.get(pe).getLogger("auth")}var NPe=60,LPe="token_refreshed",OPe="github_token_changed";function Vf(){return Math.floor(Date.now()/1e3)}async function NR(t,e){let r=bee(t),n=t.get(Ne);n.sendGHTelemetryEvent("auth.new_login");let i=await MPe(t,e);if(!i)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_failed"),{kind:"failure",reason:"FailedToGetToken"};let o=await i.json();if(!o)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_read_failed"),{kind:"failure",reason:"FailedToGetToken"};if(i.status===401)return r.info("Failed to get copilot token due to 401 status"),n.sendGHTelemetryErrorEvent("auth.unknown_401"),{kind:"failure",reason:"HTTP401"};if(!i.ok||!o.token){r.info(`Invalid copilot token: missing token: ${i.status} ${i.statusText}`);let p=gr.createAndMarkAsIssued({status:i.status.toString(),status_text:i.statusText});return n.sendGHTelemetryErrorEvent("auth.invalid_token",p.properties,p.measurements),{kind:"failure",reason:"NotAuthorized",...o.error_details}}let s=o.expires_at;o.expires_at=Vf()+o.refresh_in+NPe;let{token:a,organization_list:c,...u}=o,l=new Wd(a,c);t.get(rs).emit(l,u);let d=gr.createAndMarkAsIssued({},{adjusted_expires_at:o.expires_at,expires_at:s,current_time:Vf()});return n.sendGHTelemetryEvent("auth.new_token",d.properties,d.measurements),{kind:"success",...o}}async function MPe(t,e){let r=t.get(sb).getTokenUrl(e);try{return await t.get(Zr).fetch(r,{headers:{Authorization:`token ${e.token}`,...t.get(ft).getEditorVersionHeaders()}})}catch(n){throw t.get(RR).notifyUser(n),n}}var US=class extends ub{constructor(r,n){super();this.completionsToken=r;this.embeddingsToken=n;this.wasReset=!1}getAnyGitHubToken(){return Promise.resolve(this.completionsToken)}getPermissiveGitHubToken(){return Promise.resolve(this.completionsToken)}async getCopilotToken(r,n){return new Wd(this.completionsToken)}async getEmbeddingsToken(r,n){return new Wd(this.embeddingsToken??this.completionsToken)}resetCopilotToken(r,n){this.wasReset=!0}async checkCopilotToken(r){return{status:"OK"}}},LR=class extends ub{constructor(r){super();this.githubToken=r;this.copilotToken=void 0}getAnyGitHubToken(){return Promise.resolve(this.githubToken.token)}getPermissiveGitHubToken(){return Promise.resolve(this.githubToken.token)}async getCopilotToken(r,n){if(!this.copilotToken||this.copilotToken.expires_at<Vf()||n){let i=await NR(r,this.githubToken);if(i.kind==="failure")throw Error(`Failed to get copilot token: ${i.reason.toString()} ${i.message??""}`);this.copilotToken={...i},OR(r,this,i.refresh_in)}return new Wd(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions)}async checkCopilotToken(r){if(!this.copilotToken||this.copilotToken.expires_at<Vf()){let i=await NR(r,this.githubToken);if(i.kind==="failure")return i;this.copilotToken={...i},OR(r,this,i.refresh_in)}return{status:"OK"}}resetCopilotToken(r,n){n!==void 0&&r.get(Ne).sendGHTelemetryEvent("auth.reset_token_"+n),bee(r).debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}},yee=new WeakMap;function OR(t,e,r){let n=Vf(),i=yee.get(e)??yee.set(e,{value:0}).get(e);i.value>0||(i.value++,setTimeout(async()=>{let o,s="";try{i.value--,await e.getCopilotToken(t,!0),o="success",e.copilotTokenRefreshEventEmitter.emit(LPe)}catch(c){o="failure",s=c.toString()}let a=gr.createAndMarkAsIssued({result:o},{time_taken:Vf()-n,refresh_count:i.value});s&&(a.properties.reason=s),t.get(Ne).sendGHTelemetryEvent("auth.token_refresh",a.properties,a.measurements)},r*1e3))}function _ee(t,e){t.provider.id==="github"&&e.githubTokenChangedEventEmitter.emit(OPe,t)}var d9=`${process.env.HOME||process.env.USERPROFILE}/.copilot-testing-gh-token`,u9;function xee(){return u9||(u9=FPe()),u9}var FPe=()=>{if(process.env.GITHUB_PAT)return new US(process.env.GITHUB_PAT);if(process.env.GITHUB_OAUTH_TOKEN)return new LR({token:process.env.GITHUB_OAUTH_TOKEN});let t=UPe();if(t)return new LR({token:t.trim()});throw new Error(`Tests: either GITHUB_PAT must be set, or there must be a GitHub token from an app with access to Copilot in ${d9}. Run "npm run get_token" to get one.`)};function UPe(){if(MR.existsSync(d9))return MR.readFileSync(d9).toString()}var lb=require("vscode");var BS=require("vscode");var qPe=["user:email"],HPe=["read:user"],Eee=["read:user","user:email","repo","workflow"],p9="You are not signed in to GitHub. Please sign in to use Copilot.";function qS(t){return t.getConfig(ke.AuthProvider)==="github-enterprise"?"github-enterprise":"github"}async function ac(t,e){let r=qS(t),n=await BS.authentication.getSession(r,Eee,{silent:!0});return n??=await BS.authentication.getSession(r,HPe,{silent:!0}),n??=await BS.authentication.getSession(r,qPe,e?.prompt?{createIfNone:!0}:{silent:!0}),n}async function See(t,e){let r=qS(t);return await BS.authentication.getSession(r,Eee,e)}function r0(t,e){let r=t.provider,n=qS(e);return r.id===n}async function FR(t,e){if(r0(t,e.get(Re))){let{defaultLogger:r}=e.get(pe);if(await ac(e.get(Re)))return await e.get(kt).getCopilotToken(e,!0);e.get(kt).resetCopilotToken(e),r.warn(p9)}}var Tee=!1,HS=class extends Error{},jS=class extends Error{},GS=class extends Error{};async function jPe(t){let e=t.get(pe).getLogger("auth"),r=await ac(t.get(Re));if(!r)return e.info("GitHub login failed"),t.get(Ne).sendGHTelemetryErrorEvent("auth.github_login_failed"),{kind:"failure",reason:"GitHubLoginFailed"};e.info(`Logged in as ${r.account.label}`);let n=await NR(t,{token:r.accessToken});return n.kind==="success"&&e.info(`Got Copilot token for ${r.account.label}`),n}async function GPe(t){let e=await jPe(t);if(e.kind==="failure"&&e.reason==="NotAuthorized"){let r=e.message;if(r?.includes("No access to GitHub Copilot found"))throw new HS(r??"User not authorized");if(r?.includes("Your subscription has ended"))throw new jS(r)}if(e.kind==="failure"){let r=e.message;if(r?.includes("Please contact your enterprise admin to enable your managed account for Copilot for Business"))throw new GS(r)}if(e.kind==="failure"&&e.reason==="HTTP401"){let r="Your GitHub token is invalid. Please sign out from your GitHub account using the VS Code accounts menu and try again.";throw Tee||(Tee=!0,lb.window.showWarningMessage(r)),Error(r)}if(e.kind==="failure"&&e.reason==="GitHubLoginFailed")throw Error("GitHubLoginFailed");if(e.kind==="failure")throw Error("Failed to get copilot token");return e}var UR=class extends ub{constructor(r){super();this.configurationService=r;this.copilotToken=void 0,this._disposable=lb.Disposable.from(lb.authentication.onDidChangeSessions(n=>_ee(n,this)))}dispose(){this._disposable.dispose()}async getAnyGitHubToken(r){return(await ac(this.configurationService,r))?.accessToken}async getPermissiveGitHubToken(r){return(await See(this.configurationService,r))?.accessToken}async getCopilotToken(r,n){return(!this.copilotToken||this.copilotToken.expires_at<Vf()||n)&&(this.copilotToken=await GPe(r),OR(r,this,this.copilotToken.refresh_in)),new Wd(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions)}resetCopilotToken(r,n){n!==void 0&&r.get(Ne).sendGHTelemetryEvent("auth.reset_token_"+n),r.get(pe).getLogger("auth").debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}};var BR=re("IChatAgentService"),Cee="workspace",Iee="vscode",qR="terminal";function wee(t){return`github.copilot.${t}`}function Ree(t){return t.replace(/^github\.copilot\./,"")}var sr=re("IChatMLFetcher");var ns=re("ConversationOptions");var HR=fe(require("vscode"));function Aee(t){return typeof t=="string"?t:JSON.stringify(t)}var jR=class extends bR{constructor(){super();this.config=HR.workspace.getConfiguration(Hf),HR.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(Hf)&&(this.config=HR.workspace.getConfiguration(Hf))})}getConfig(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0?this.config[r.firstPart][r.secondPart]:r.defaultValue}isDefaultSettingOverwritten(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0}dumpConfig(){let r={};try{let n=Ma.contributes.configuration?.properties??{};for(let i in n){let s=i.replace(`${Hf}.`,"").split(".").reduce((a,c)=>a[c],this.config);typeof s=="object"&&s!==null?Object.keys(s).filter(a=>a!=="secret_key").forEach(a=>r[`${i}.${a}`]=Aee(s[a])):r[i]=Aee(s)}}catch(n){console.error(`Failed to retrieve configuration properties ${n}`)}return r}};var db=re("IDebugOutputService");var h9=require("vscode"),Pee=[];function kee(){return Pee.join(`
`)}function VPe(t,e){t.push(zPe(e)),t.length>40&&t.shift()}var f9=class{constructor(e){this.session=e}onWillStartSession(){}onWillReceiveMessage(e){}onDidSendMessage(e){if(h9.debug.activeDebugSession!==this.session)return;let r=this.extractOutput(e);r&&VPe(Pee,r)}extractOutput(e){if(e.event==="output"&&(e.body.category==="stdout"||e.body.category==="stderr"))return e.body.output}onWillStopSession(){}onError(e){}onExit(e,r){}};function zPe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function Dee(){return[h9.debug.registerDebugAdapterTrackerFactory("*",new m9)]}var m9=class{createDebugAdapterTracker(e){return new f9(e)}};var GR=class extends Jr{constructor(){super();for(let e of Dee())this._register(e)}get consoleOutput(){return kee()}};var VR=re("IDevContainerConfigurationService");var zR=re("IDialogService");var Nee=fe(require("vscode")),$R=class{showQuickPick(e,r,n){return Nee.window.showQuickPick(e,r,n)}};var Vi=re("IEmbeddingsComputer"),$Pe=.72;function Lee(t,e,r,n=$Pe){return e.flatMap(i=>{let o=0;for(let s of t){let a=i.embedding.reduce((c,u,l)=>c+u*s[l],0);o=Math.max(o,a)}return{score:o,item:i}}).filter(i=>i.score>n).sort((i,o)=>o.score-i.score).slice(0,r).map(i=>i.item)}function il(t,e){let r=t.reduce((o,s,a)=>o+s*e[a],0),n=Math.sqrt(t.reduce((o,s)=>o+s*s,0)),i=Math.sqrt(e.reduce((o,s)=>o+s*s,0));return r/(n*i)}var Mr=re("IVSCodeExtensionContext");var Cn=re("IFileSystemService");var pb=class{constructor(e,r,n,i){this.accessor=e;this.cacheType=r;this.cacheKey=n;this.cacheVersion=i;this.cacheVersionKey=`${n}-version`,this.fileSystem=e.get(Cn)}get cacheStorageUri(){return this.cacheType===2?this.accessor.get(Mr).storageUri:this.accessor.get(Mr).globalStorageUri}get cacheVersionMementoStorage(){return this.cacheType===2?this.accessor.get(Mr).workspaceState:this.accessor.get(Mr).globalState}async updateCache(e){if(!this.cacheStorageUri||!this.fileSystem.isWritableFileSystem(this.cacheStorageUri.scheme))return;try{await this.fileSystem.stat(this.cacheStorageUri)}catch{await this.fileSystem.createDirectory(this.cacheStorageUri)}await this.cacheVersionMementoStorage.update(this.cacheVersionKey,this.cacheVersion),this.cacheVersionMementoStorage.get(this.cacheKey)&&await this.cacheVersionMementoStorage.update(this.cacheKey,void 0);let n=gt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await(e===void 0?this.fileSystem.delete(n,{useTrash:!1}):this.fileSystem.writeFile(n,Buffer.from(JSON.stringify(e))))}catch{e!==void 0&&console.error(`Failed to write embeddings cache to ${n}`)}}async getCache(){if(!(!this.cacheStorageUri||this.cacheVersionMementoStorage.get(this.cacheVersionKey)!==this.cacheVersion))try{let r=await this.fileSystem.readFile(gt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`));return JSON.parse(r.toString())}catch{return}}async clearCache(){return this.updateCache(void 0)}},ol=class t extends pb{constructor(r,n,i,o,s){super(r,n,i,o);this.fetcher=r.get(Zr),this.remoteCacheVersionKey=`${i}-version-remote`,this.remoteCacheURL=t.calculateRemoteCDNURL(s,o),this.remoteCacheLatestUpdateURL=t.calculateRemoteCDNLatestURL(s,o)}async fetchRemoteCache(){if(this._remoteCache)return this._remoteCache;try{let r=await this.fetcher.fetch(this.remoteCacheURL,{method:"GET"});if(r.ok)return this._remoteCache=await r.json(),this._remoteCache;console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}}async fetchRemoteCacheLatest(){try{let r=await this.fetcher.fetch(this.remoteCacheLatestUpdateURL,{method:"GET"});if(r.ok)return r.text();console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}}async getCache(){let r=await this.fetchRemoteCacheLatest(),n=await super.getCache();if(n&&r===this.cacheVersionMementoStorage.get(this.remoteCacheVersionKey))return n;let i=await this.fetchRemoteCache();return await this.cacheVersionMementoStorage.update(this.remoteCacheVersionKey,r),await this.updateCache(i),i}async updateCache(r,n){if(r===void 0)return super.updateCache(r);if(!await super.getCache()||n)return super.updateCache(r)}static calculateRemoteCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/core.json`}static calculateRemoteCDNLatestURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/latest.txt`}},g9=class t extends ol{constructor(r,n,i,o,s){super(r,n,i,o,s);this._wasRemoteExtensionCacheUpdated=!1;this.baseExtensionCDNURL=t.calculateBaseRemoteExtensionCDNURL(s,o)}constructExposedCache(){if(!this._remoteExtensionCache)return;let r={...this._remoteExtensionCache.core};for(let n in this._remoteExtensionCache.extensions){let i=this._remoteExtensionCache.extensions[n];for(let o in i)r[o]=i[o]}return r}async fetchRemoteExtensionCache(r){let n=`${this.baseExtensionCDNURL}/${r}.json`;try{let i=await this.fetcher.fetch(n,{method:"GET"});if(i.ok)return await i.json();if(i.status===404)return{};console.error(`Failed to fetch remote embeddings cache from ${n}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${n}`);return}}async getCache(){let r=await super.getCache();if(r===void 0)return;let n={core:{},extensions:{}};r&&t.isEmbeddingsCacheEntriesWithExtensions(r)?n=r:n={core:r,extensions:{}};let i=t.getInstalledExtensionIds(this.accessor),o=!1;for(let a in n.extensions)i.includes(a)||(delete n.extensions[a],o=!0);let s=i.filter(a=>!(a in n.extensions)||n.extensions[a]===void 0);for(let a of s){let c=await this.fetchRemoteExtensionCache(a);c&&(n.extensions[a]=c)}return this._remoteExtensionCache=n,this._wasRemoteExtensionCacheUpdated=s.length>0||o,this.constructExposedCache()}async updateCache(r,n){let i=r?super.updateCache(this._remoteExtensionCache,n||this._wasRemoteExtensionCacheUpdated):super.updateCache(r,n||this._wasRemoteExtensionCacheUpdated);return this._wasRemoteExtensionCacheUpdated=!1,i}static isEmbeddingsCacheEntriesWithExtensions(r){return"core"in r&&"extensions"in r}static getInstalledExtensionIds(r){return r.get(ft).getAllExtensions().filter(n=>!n.id.startsWith("vscode")).map(n=>n.id)}static calculateBaseRemoteExtensionCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}`}},WR=class{constructor(e,r,n,i,o,s,a){this.cacheKey=i;this.embeddingsComputer=s;this._isIndexLoaded=!1;this._logger=r.get(pe).getPromptResponseLogger(e),this._items=new Map,a?.type&&!a.supportsExtensions?this._embeddingsCache=new ol(r,n,i,o,a.type):a?.type&&a.supportsExtensions?this._embeddingsCache=new g9(r,n,i,o,a.type):this._embeddingsCache=new pb(r,n,i,o)}get isIndexLoaded(){return this._isIndexLoaded}set isIndexLoaded(e){this._isIndexLoaded=e}async rebuildCache(){return await this._embeddingsCache.clearCache(),this._items.clear(),this.calculateEmbeddings()}nClosestValues(e,r){let n=Array.from(this._items.values()).map(i=>{if(!i.embedding)return{item:i,similarity:0};let o=il(e,i.embedding);return{item:i,similarity:o}});return n=n.filter(i=>i.similarity>0),n.sort((i,o)=>o.similarity-i.similarity),n.slice(0,r).map(i=>i.item)}hasItem(e){return this._items.has(e)}getItem(e){return this._items.get(e)}async calculateEmbeddings(){return this._calculationPromise?this._calculationPromise:(this._calculationPromise=this._calculateEmbeddings(),this._calculationPromise.then(()=>this._calculationPromise=void 0))}async _calculateEmbeddings(){let e=Date.now(),r=await this.getLatestItems(),n=await this._embeddingsCache.getCache(),i=new Map;for(let o of r){let s=o,a=this._items.get(o.key),c=o.key;a?.embedding?s=a:n&&n[c]&&(s={...o,...n[c]}),i.set(c,s)}this._items=i,await this._embeddingsCache.updateCache(n),this._logger.debug(`Embeddings for ${this.cacheKey} calculated in ${Date.now()-e}ms`),this.isIndexLoaded=!0}async fetchEmbeddingsForItems(e){return this.embeddingsComputer.computeEmbeddings(e.map(r=>this.getEmbeddingQueryString(r)),void 0)}};function Yd(t){let e=t.split(".");return`${e[0]}.${e[1]}`}var KR=re("IProjectTemplatesIndex"),fb=class{constructor(e){this._isIndexLoaded=!1;let r=Yd(e.get(ft).getEditorInfo().version);this.embeddingsCache=new ol(e,1,"projectTemplateEmbeddings",r,"project-templates")}async updateIndex(){this._isIndexLoaded||(this._isIndexLoaded=!0,this._embeddings=await this.embeddingsCache.getCache())}async nClosestValues(e,r,n=0){if(await this.updateIndex(),!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[0]}`,similarity:0};let s=il(e,o[1].embedding);return{key:`${o[0]} `,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}};fb=ze([rt(0,Yt)],fb);function WPe(t){let e=`Setting Id: ${t.key}
`;if(e+=`Type: ${t.type}
`,e+=`Description: ${t.description??t.markdownDescription??""}
`,t.enum){e+=`Possible values:
`;for(let r=0;r<t.enum.length;r++)e+=` - ${t.enum[r]} - ${t.enumDescriptions?.[r]??""}
`}return e+=`
`,e}var QR=class extends WR{constructor(r,n,i,o,s,a,c,u){super(r,n,i,o,s,a,u);this.relatedInformationConfig=c;this.isIndexLoaded=!1}async provideRelatedInformation(r,n){let i=Date.now();if(!this.isIndexLoaded)return this.calculateEmbeddings(),this._logger.debug(`Related Information: Index not loaded yet triggering background calculation, returning ${Date.now()-i}ms`),[];if(n.isCancellationRequested)return this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`),[];let o=Date.now(),s=await this.embeddingsComputer.computeEmbeddings([r],n);if(this._logger.debug(`Related Information: Remote similarly request took ${Date.now()-o}ms`),n.isCancellationRequested||!s||!s[0])return this._logger.debug(`Related Information: Request cancelled or no match found, returning ${Date.now()-i}ms`),[];let a=[];for(let u of this._items.values()){if(n.isCancellationRequested){this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`);break}if(u.embedding){let l=il(s[0],u.embedding);l>this.relatedInformationConfig.threshold&&a.push(this.toRelatedInformation(u,l))}}return this._logger.debug(`Related Information: Successfully Calculated, returning ${Date.now()-i}ms`),a.sort((u,l)=>l.weight-u.weight).slice(0,this.relatedInformationConfig.maxResults)}},v9=class extends QR{constructor(r,n){super("CommandIdIndex",r,1,"commandEmbeddings",Yd(r.get(ft).getEditorInfo().version),n,{type:2,threshold:.7,maxResults:100},{type:"commands",supportsExtensions:!0});this.accessor=r}async getLatestItems(){let r=await this.accessor.get(ft).getAllCommands();return r.push({label:"Extensions: Search the marketplace for extensions",command:"workbench.extensions.search",keybinding:"Not set"}),r.push({label:"Extensions: Install extension from marketplace",command:"workbench.extensions.installExtension",keybinding:"Not set"}),r.map(n=>({key:n.command,label:n.label.replace("View: Toggle","View: Toggle or Show or Hide"),originalLabel:n.label,keybinding:n.keybinding??"Not set"}))}getEmbeddingQueryString(r){return`${r.label} - ${r.key}`}toRelatedInformation(r,n){return{type:2,weight:n,command:r.key}}},y9=class extends QR{constructor(r,n){super("SettingsIndex",r,1,"settingEmbeddings",Yd(r.get(ft).getEditorInfo().version),n,{type:4,threshold:.7,maxResults:100},{type:"settings",supportsExtensions:!0});this.accessor=r;this.isIndexLoaded=!1}async getLatestItems(){let r=await this.accessor.get(ft).getAllSettings(),n=[];for(let i of Object.keys(r)){let o=r[i];o.deprecationMessage||o.markdownDeprecationMessage||n.push({...o,key:i})}return n}getEmbeddingQueryString(r){return WPe(r)}toRelatedInformation(r,n){return{type:4,weight:n,setting:r.key}}},Kd=re("ICombinedEmbeddingIndex"),mb=class{constructor(e){this.commandIdIndex=new v9(e,e.get(Vi)),this.settingsIndex=new y9(e,e.get(Vi))}async loadIndexes(){await Promise.all([this.commandIdIndex.isIndexLoaded?Promise.resolve():this.commandIdIndex.calculateEmbeddings(),this.settingsIndex.isIndexLoaded?Promise.resolve():this.settingsIndex.calculateEmbeddings()])}async nClosestValues(e,r){return await this.loadIndexes(),{commands:this.commandIdIndex.nClosestValues(e,r),settings:this.settingsIndex.nClosestValues(e,r)}}hasSetting(e){return this.settingsIndex.hasItem(e)}hasCommand(e){return this.commandIdIndex.hasItem(e)}getSetting(e){return this.settingsIndex.getItem(e)}getCommand(e){return this.commandIdIndex.getItem(e)}};mb=ze([rt(0,Yt)],mb);var Qd=class t{constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return e.get(Gf).sendExpProblemTelemetry({reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};var hb=re("IExpConfigMaker"),XR=class{async fetchExperiments(e,r){let n=e.get(Zr),i;try{i=await n.fetch("https://default.exp-tas.com/vscode/ab",{method:"GET",headers:r})}catch(c){return Qd.createFallbackConfig(e,`Error fetching ExP config: ${c}`)}if(!i.ok)return Qd.createFallbackConfig(e,`ExP responded with ${i.status}`);let o=await i.json(),s=o.Configs.find(c=>c.Id==="vscode")??{Id:"vscode",Parameters:{}},a=Object.entries(s.Parameters).map(([c,u])=>c+(u?"":"cf"));return new Qd(s.Parameters,o.AssignmentContext,a.join(";"))}},JR=class{async fetchExperiments(e,r){return Qd.createEmptyConfig()}};var YPe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},ZR=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=YPe[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};var eA=class{constructor(e){this.prefix=e}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},b9=class extends eA{getValue(e){return this.prefix}getUpcomingValues(e){return[]}},Oee=t=>new b9(t),tA=class extends eA{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let s of i)for(let a of o)n.push(this.prefix+s+a);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets===void 0?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs===void 0?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var Mee="X-Copilot-ClientTimeBucket",_9=class{now(){return new Date}},rA=class{constructor(e,r=new _9){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=Oee(e)}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new tA(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(Mee,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(Mee,o))}}};var x9=class{constructor(e){this.accessor=e;this.cache=new Df(200)}async fetchExpConfig(e){let r=this.cache.get(e.stringify());return r||(r=new E9(()=>this.accessor.get(hb).fetchExperiments(this.accessor,e.toHeaders()),1e3*60*60),this.cache.set(e.stringify(),r)),r.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},E9=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}},sl=re("IFeatures"),uu=class{constructor(e){this.accessor=e;this.staticFilters={};this.dynamicFilters={};this.upcomingDynamicFilters={};this.assignments=new x9(this.accessor)}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}getDynamicFilterValues(){let e={};for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}async getAssignment(e,r={},n){let i=this.getGranularityDirectory(),o=this.makeFilterSettings(r),s=i.extendFilters(o),a=await this.getExpConfig(s.newFilterSettings);i.update(o,+(a.variables.copilotbycallbuckets??NaN),+(a.variables.copilottimeperiodsizeinh??NaN));let c=i.extendFilters(o),u=c.newFilterSettings,l=await this.getExpConfig(u),d=new Promise(p=>setTimeout(p,uu.upcomingDynamicFilterCheckDelayMs));for(let p of c.otherFilterSettingsToPrefetch)d=d.then(async()=>{await new Promise(f=>setTimeout(f,uu.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(p)});return this.prepareForUpcomingFilters(u),n&&(n.filtersAndExp={exp:l,filters:u}),l.variables[e]}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.accessor.get(ft).machineId;this.granularityDirectory=new rA(e)}return this.granularityDirectory}makeFilterSettings(e){return new ZR({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e){try{return this.assignments.fetchExpConfig(e)}catch(r){return Qd.createFallbackConfig(this.accessor,`Error fetching ExP config: ${r}`)}}async prepareForUpcomingFilters(e){if(!(new Date().getMinutes()<60-uu.upcomingTimeBucketMinutes))for(let[r,n]of Object.entries(this.upcomingDynamicFilters))await new Promise(i=>setTimeout(i,uu.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,n()))}async fastCancellation(){return await this.getAssignment("copilotoverridefastcancellation")??!0}async chatExpModel(){return await this.getAssignment("copilotchatexpmodel")??""}async chatMaxNumTokens(){return await this.getAssignment("copilotchatmaxnumtokens")??0}async chatOffTopicModel(){return await this.getAssignment("copilotchatofftopicmodel")??""}async chatOffTopicModelTokenizer(){return await this.getAssignment("copilotchatofftopicmodeltokenizer")??""}async chatOffTopicModelThreshold(){return await this.getAssignment("copilotchatofftopicmodelthreshold")??0}async addExpAndFilterToTelemetry(e){let r=this.makeFilterSettings({});e.filtersAndExp={filters:r,exp:await this.getExpConfig(r)}}};uu=ze([rt(0,Yt)],uu);var S9=re("IEditorExperimentFilters");function Bee(t){let e=t.get(sl),r=t.get(Re);e.registerStaticFilters(KPe(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>r.getConfig(ke.DebugOverrideEngine))}function KPe(t){let e=QPe(t),r=t.get(S9).addEditorSpecificFilters();return{...e,...r}}function QPe(t){let e=t.get(ft),r=e.getEditorInfo();return{"X-VSCode-AppVersion":Uee(r.version),"X-MSEdge-ClientId":e.machineId,"X-VSCode-ExtensionName":e.getName(),"X-VSCode-ExtensionVersion":Uee(e.getVersion()),"X-VSCode-TargetPopulation":"public"}}function Uee(t){return t.split("-")[0]}var T9=fe(require("vscode"));var nA=class{addEditorSpecificFilters(){return{"X-VSCode-Build":T9.env.appName,"X-VSCode-Language":T9.env.language}}};var VS=re("IGitCommitMessageService");var zf=re("IGitExtensionService");var ui=re("IGitService");function iA(t){if(!t)return;if(t.remoteFetchUrls?.length===1)return C9(t.remoteFetchUrls[0]);let e=t.remotes.findIndex(n=>n===t.upstreamRemote);if(e!==-1){let n=t.remoteFetchUrls?.[e];if(n){let i=C9(n);if(i)return i}}let r=t.remotes.findIndex(n=>n==="origin");if(r!==-1){let n=t.remoteFetchUrls?.[r];if(n){let i=C9(n);if(i)return i}}}function C9(t){t=t.replace(/^git@/,""),t=t.replace(/\.git$/,"");try{let e=gt.parse(t);return e.authority!=="github.com"&&e.scheme!=="github.com"?void 0:e.path.replace(/^\//,"")}catch{return}}function qee(t){if(t.includes("@")&&t.includes(":")){let e="https://"+t.substring(t.indexOf("@")+1).replace(":","/"),r=new URL(e);return r.username="",r.password="",r.search="",r.toString()}else{let e=new URL(t);return e.protocol="https",e.username="",e.password="",e.search="",e.toString()}}var $f=fe(require("vscode"));var oA=class{constructor(e){this._onDidChange=new $f.EventEmitter;this.onDidChange=this._onDidChange.event;this._extensionEnablement=void 0;this._disposables=[];this._logger=e.get(pe).getLogger("gitExtensionService"),this._logger.info("Initializing Git extension service."),this._disposables.push(...this._initializeExtensionApi())}getExtensionApi(){return this._api}get extensionAvaiable(){return this._extensionEnablement===void 0?!!$f.extensions.getExtension("vscode.git"):this._extensionEnablement}_initializeExtensionApi(){let e=[],r=$f.extensions.getExtension("vscode.git"),n=async()=>{let i;try{i=await r.activate(),this._logger.info("Successfully activated the vscode.git extension.")}catch(s){this._logger.error("Failed to activate the vscode.git extension.",s);return}let o=s=>{this._logger.info(`Enablement state of the vscode.git extension: ${s}.`),this._extensionEnablement=s,s?(this._api=i.getAPI(1),this._onDidChange.fire({enabled:!0}),this._logger.info("Successfully registered Git commit message provider.")):(this._api=void 0,this._onDidChange.fire({enabled:!1}))};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{this._logger.info("vscode.git extension is not yet activated.");let i=$f.extensions.onDidChange(()=>{!r&&$f.extensions.getExtension("vscode.git")&&(r=$f.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}};var Hee=fe(require("vscode"));var lu=class extends Jr{constructor(r){super();this.gitExtensionService=r;this._onDidOpenRepository=new Kn;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new Kn;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidFinishInitialRepositoryDiscovery=new Kn;this.onDidFinishInitialization=this._onDidFinishInitialRepositoryDiscovery.event;this._isInitialized=!1;this._register(this._onDidOpenRepository),this._register(this._onDidCloseRepository),this._register(this._onDidFinishInitialRepositoryDiscovery);let n=this.gitExtensionService.getExtensionApi();n?this.registerGitAPIListeners(n):this._register(this.gitExtensionService.onDidChange(i=>{if(i.enabled){let o=this.gitExtensionService.getExtensionApi();o&&this.registerGitAPIListeners(o)}else this._onDidFinishInitialRepositoryDiscovery.fire()}))}registerGitAPIListeners(r){this._register(r.onDidOpenRepository(n=>{let i=lu.repoToRepoContext(n);i&&this._onDidOpenRepository.fire(i)})),this._register(r.onDidCloseRepository(n=>{let i=lu.repoToRepoContext(n);i&&this._onDidCloseRepository.fire(i)})),r.state==="initialized"&&(this._onDidFinishInitialRepositoryDiscovery.fire(),this._isInitialized=!0),this._register(r.onDidChangeState(n=>{n==="initialized"&&(this._onDidFinishInitialRepositoryDiscovery.fire(),this._isInitialized=!0)}))}get isInitialized(){return this._isInitialized}getRepository(r){let n=this.gitExtensionService.getExtensionApi();if(n)return lu.repoToRepoContext(n.getRepository(r))}static repoToRepoContext(r){if(r)return{rootUri:r.rootUri,headBranchName:r.state.HEAD?.name,upstreamBranchName:r.state.HEAD?.upstream?.name,upstreamRemote:r.state.HEAD?.upstream?.remote,isRebasing:r.state.rebaseCommit!==null,remotes:r.state.remotes.map(n=>n.name),remoteFetchUrls:r.state.remotes.map(n=>n.fetchUrl)}}get repositories(){if(!Hee.workspace.workspaceFolders)return[];let n=this.gitExtensionService.getExtensionApi();return n?xr(n.repositories.map(i=>lu.repoToRepoContext(i))):[]}};lu=ze([rt(0,zf)],lu);var al=re("IGithubRepositoryService");var gb=class{constructor(e){this.accessor=e;this.fetcherService=e.get(Zr)}async isAvailable(e,r){let n=await this.accessor.get(kt).getAnyGitHubToken();try{return(await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${n}`}})).ok}catch{return!1}}async getRepositoryItems(e,r,n){let i=[];try{let o=await this.accessor.get(kt).getPermissiveGitHubToken({silent:!0}),s=n.split("/").map(c=>encodeURIComponent(c)).join("/"),a=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${s}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${o}`}});if(a.ok){let c=await a.json();if(Array.isArray(c))for(let u of c)"name"in u&&"path"in u&&"type"in u&&"html_url"in u&&(i.push({name:u.name,path:u.path,type:u.type,html_url:u.html_url}),u.type==="dir"&&i.push(...await this.getRepositoryItems(e,r,u.path)))}else console.error(`Failed to contents from ${e}:${r}:${n}`)}catch{console.error(`Failed to contents from ${e}:${r}:${n}`)}return i}async getRepositoryItemContent(e,r,n){try{let i=await this.accessor.get(kt).getPermissiveGitHubToken({silent:!0}),o=n.split("/").map(a=>encodeURIComponent(a)).join("/"),s=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${o}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${i}`}});if(s.ok){let a=await s.json();if("content"in a){let c=Buffer.from(a.content,"base64");return new Uint8Array(c)}throw new Error("Unexpected data from GitHub")}}catch{console.error(`Failed to contents from ${e}:${r}:${n}`)}}};gb=ze([rt(0,Yt)],gb);var st=re("IIgnoreService"),jee=class t{static{this.Instance=new t}dispose(){}async init(){}async isCopilotIgnored(e){return!1}async asMinimatchPattern(){}async sessionInfo(){return""}};var ut=fe(require("vscode")),Ht=ut.Position,Ge=ut.Range,n0=ut.Selection;var Gee=ut.CancellationTokenSource;var zi=ut.TextEdit,I9=ut.WorkspaceEdit,Is=ut.Uri,Xd=ut.MarkdownString,ra=ut.InteractiveEditorResponseFeedbackKind;var zS=ut.DiagnosticSeverity,is=ut.ExtensionMode,Wf=ut.Location;var Vee=ut.ChatVariableLevel,cl=ut.ChatResponseMarkdownPart;var $S=ut.ChatResponseFileTreePart;var ws=ut.ChatResponseProgressPart,sA=ut.ChatResponseReferencePart,zee=ut.ChatResponseCommandButtonPart,$ee=ut.ChatRequestTurn;var Wee=ut.NewSymbolName,Yee=ut.NewSymbolNameTag;var w9={t:ut.l10n.t};var Po=re("ILanguageDiagnosticService"),vb=class{constructor(e){this._ignoreService=e}waitForNewDiagnostics(e,r,n=5e3){let i,o,s;return new Promise(a=>{i=r.onCancellationRequested(()=>a([])),s=setTimeout(()=>a(this.getDiagnostics(e)),n),o=this.onDidChangeDiagnostics(c=>{for(let u of c.uris)if(ib(u,e)){a(this.getDiagnostics(e));break}})}).finally(()=>{i.dispose(),o.dispose(),clearTimeout(s)})}};vb=ze([rt(0,st)],vb);function aA(t){return t.map(e=>e.range).reduce((e,r)=>e.union(r))}function Kee(t){return t.severity===zS.Error}var oo=re("ILanguageFeaturesService");function Jd(t){return typeof t=="object"&&t!==null&&"targetUri"in t}var R9=fe(require("vscode"));var cA=class extends vb{constructor(){super(...arguments);this.onDidChangeDiagnostics=R9.languages.onDidChangeDiagnostics}getDiagnostics(r){return R9.languages.getDiagnostics(r)}};var yb=fe(require("vscode")),uA=class{constructor(){}async getDefinitions(e,r){return await yb.commands.executeCommand("vscode.executeDefinitionProvider",e,r)}async getImplementations(e,r){return await yb.commands.executeCommand("vscode.executeImplementationProvider",e,r)}async getReferences(e,r){return await yb.commands.executeCommand("vscode.executeReferenceProvider",e,r)}async getWorkspaceSymbols(e){return await yb.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)}async getDocumentSymbols(e){return await yb.commands.executeCommand("vscode.executeDocumentSymbolProvider",e)}};var lA=re("IKerberosLoader");var dA=re("IWindowsCaCertsLoader");var A9=fe(require("vscode")),pA=class{async loadKerberos(){try{return require(`${A9.env.appRoot}/node_modules.asar/kerberos`)}catch{}try{return require(`${A9.env.appRoot}/node_modules/kerberos`)}catch{}}};var Jee=require("vscode");var Zee="github-enterprise",Qee="https://github.com";function Xee(t){return t.getConfig(ke.AuthProvider)==="github-enterprise"?Jee.workspace.getConfiguration(Zee).get("uri")??Qee:Qee}var bb=class extends TR{constructor(r){super(Xee(r));this.configurationService=r}updateBaseUrl(r,n){super.updateBaseUrl(r,Xee(this.configurationService))}};bb=ze([rt(0,Re)],bb);function ete(t,e){(t.affectsConfiguration(`${Hf}.advanced`)||t.affectsConfiguration(`${Zee}.uri`))&&e.get(sb).updateBaseUrl(e)}var tte=fe(require("os")),P9=fe(require("vscode")),fA=class{async loadCaCerts(){let e=await this.loadBuiltInWinCAModule(),r=new Set,n=new e.Crypt32;try{let i;for(;i=n.next();)r.add(XPe(i))}finally{n.done()}return Array.from(r)}async loadBuiltInWinCAModule(){try{return require(`${P9.env.appRoot}/node_modules.asar/@vscode/windows-ca-certs`)}catch{}try{return require(`${P9.env.appRoot}/node_modules/@vscode/windows-ca-certs`)}catch{}}};function XPe(t){let e=["-----BEGIN CERTIFICATE-----"],r=t.toString("base64");for(let n=0;n<r.length;n+=64)e.push(r.substr(n,64));return e.push("-----END CERTIFICATE-----",""),e.join(tte.EOL)}var WS=re("INotebookService");var _b=require("vscode"),mA=class{_hasJupyterExtension(){return _b.extensions.getExtension("ms-toolsai.jupyter")?.isActive}async getVariables(e){if(!this._hasJupyterExtension())try{let r=await _b.commands.executeCommand("vscode.executeNotebookVariableProvider",e);return r&&Array.isArray(r)?r.map(this._convertResult):[]}catch{return[]}try{let r=await _b.commands.executeCommand("jupyter.listVariables",e);return r&&Array.isArray(r)?r.map(this._convertResult):[]}catch{return[]}}_convertResult(e){return"variable"in e?e:{variable:e,hasNamedChildren:!1,indexedChildrenCount:0}}async getPipPackages(e){if(!this._hasJupyterExtension())return[];try{return await _b.commands.executeCommand("jupyter.listPipPackages",e)}catch{return[]}}};var rte=require("vscode"),hA=class{async showWarningMessage(e,...r){return{title:await rte.window.showWarningMessage(e,...r.map(i=>i.title))}}};var Fr=re("IParserService");function gA(t){return{startPosition:{row:t.start.line,column:t.start.character},endPosition:{row:t.end.line,column:t.end.character}}}function vA(t){return new Ge(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function na(t,e){return{startIndex:e.offsetAt(t.start),endIndex:e.offsetAt(t.end)}}function cc(t,e){return new Ge(t.positionAt(e.startIndex),t.positionAt(e.endIndex))}var Pte=fe(require("path"));var nte=require("worker_threads"),k9=class{constructor(e,r){this.logger=r;this.handlers=new Map;this.nextId=1;this.worker=new nte.Worker(e),this.worker.on("message",({id:n,err:i,res:o})=>{let s=this.handlers.get(n);s&&(this.handlers.delete(n),i?s.reject(i):s.resolve(o))}),this.worker.on("error",n=>this.handleError(n)),this.worker.on("exit",n=>{n!==0&&this.handleError(new Error(`Worker thread exited with code ${n}.`))})}terminate(){this.worker.removeAllListeners(),this.worker.terminate(),this.handlers.clear()}handleError(e){this.logger?.exception(e);for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}remoteCall(e,r){let n=this.nextId++,i,o,s=new Promise((a,c)=>{i=a,o=c});return this.handlers.set(n,{resolve:i,reject:o}),this.worker.postMessage({id:n,fn:e,args:r}),s}},Yf=class{constructor(e,r){this.worker=new k9(e,r);let n={get:(i,o)=>(typeof o=="string"&&!i[o]&&(i[o]=(...s)=>{if(!this.worker)throw new Error("Worker was terminated!");return this.worker.remoteCall(o,s)}),i[o])};this.proxy=new Proxy(Object.create(null),n)}terminate(){this.worker.terminate()}};var V9={};$r(V9,{_clean:()=>eke,_extractDoc:()=>Cke,_getCallExpressions:()=>cke,_getClassDeclarations:()=>lke,_getClassReferences:()=>fke,_getCoarseParentScope:()=>vke,_getDocumentableNodeIfOnIdentifier:()=>bke,_getFineScopes:()=>xke,_getFixSelectionOfInterest:()=>yke,_getFunctionBodies:()=>gke,_getFunctionDefinitions:()=>uke,_getFunctionPositions:()=>hke,_getNodeMatchingSelection:()=>SA,_getNodeToDocument:()=>Eke,_getNodeToExplain:()=>Ske,_getSemanticChunkTree:()=>mke,_getStructure:()=>wke,_getTestableNode:()=>_ke,_getTypeDeclarations:()=>dke,_getTypeReferences:()=>pke,_parse:()=>$i});var KS=fe(require("path")),EA=fe(ite());function ote(t,e,r){let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n}function ste(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let i=t[n];e(i,r)>0&&(r=i)}return r}var D9=class{constructor(e=10){this.values=new Map;this.lruKeys=[];if(e<1)throw new Error("Cache size must be at least 1");this.size=e}removeKeyFromLRU(e){let r=this.lruKeys.indexOf(e);r!==-1&&this.lruKeys.splice(r,1)}touchKeyInLRU(e){this.removeKeyFromLRU(e),this.lruKeys.push(e)}clear(){this.values.clear(),this.lruKeys=[]}deleteKey(e){this.removeKeyFromLRU(e);let r=this.values.get(e);return r!==void 0&&this.values.delete(e),r}get(e){if(this.values.has(e)){let r=this.values.get(e);return this.touchKeyInLRU(e),r}}keys(){return this.lruKeys.slice()}getValues(){return this.values.values()}put(e,r){let n;if(!this.values.has(e)&&this.lruKeys.length===this.size){let i=this.lruKeys.shift(),o=this.deleteKey(i);n=[i,o]}return this.values.set(e,r),this.touchKeyInLRU(e),n}},yA=class{constructor(e){this.actual=new D9(e)}dispose(){this.clear()}clear(){let e=this.actual.getValues();for(let r of e)r.dispose();this.actual.clear()}deleteKey(e){let r=this.actual.deleteKey(e);r&&r.dispose()}get(e){return this.actual.get(e)}keys(){return this.actual.keys()}getValues(){return this.actual.getValues()}put(e,r){let n=this.actual.put(e,r);n&&n[1].dispose()}};var ko={doesContain:(t,e)=>t.startIndex<=e.startIndex&&e.endIndex<=t.endIndex,ofSyntaxNode:t=>({startIndex:t.startIndex,endIndex:t.endIndex}),compare:(t,e)=>t.startIndex-e.startIndex||e.endIndex-t.endIndex,isEqual:(t,e)=>ko.compare(t,e)===0,doIntersect:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return r<n},len:t=>t.endIndex-t.startIndex,intersectionSize:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return Math.max(n-r,0)},isTreeSitterOffsetRange(t){return typeof t.startIndex=="number"&&typeof t.endIndex=="number"}},du={isEqual(t,e){return t.row===e.row&&t.column===e.column},isBefore(t,e){return t.row<e.row||t.row===e.row&&t.column<e.column},isAfter(t,e){return du.isBefore(e,t)},isBeforeOrEqual(t,e){let r=du.isBefore(t,e),n=du.isEqual(t,e);return!!(r||n)},equals(t,e){return t.column===e.column&&t.row===e.row},isAfterOrEqual(t,e){return du.isBeforeOrEqual(e,t)},ofPoint:t=>({row:t.row,column:t.column})},Qf={doesContain:(t,e)=>du.isBeforeOrEqual(t.startPosition,e.startPosition)&&du.isAfterOrEqual(t.endPosition,e.endPosition),equals:(t,e)=>du.equals(t.startPosition,e.startPosition)&&du.equals(t.endPosition,e.endPosition),ofSyntaxNode:t=>({startPosition:t.startPosition,endPosition:t.endPosition})},bA={ofSyntaxNode:t=>({type:t.type,startIndex:t.startIndex,endIndex:t.endIndex})},pu={ofSyntaxNode:t=>({range:Qf.ofSyntaxNode(t),startIndex:t.startIndex,text:t.text,endIndex:t.endIndex})},Kf=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new Ro("startIndex must be less than endIndex")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return r(this),e.join(`
`)}};var _A=class{constructor(e,r){this.syntaxTreeRoot=r;this.roots=[];this.formTree(e)}formTree(e){e.sort((o,s)=>o.mainBlock.startIndex-s.mainBlock.startIndex||o.mainBlock.endIndex-s.mainBlock.endIndex);let r=[],n=()=>r[r.length-1],i=(o,s)=>o.mainBlock.startIndex===s.mainBlock.startIndex&&o.mainBlock.endIndex===s.mainBlock.endIndex;for(let o of e){let s={info:o,children:[]},a=n();if(!a){this.roots.push(s),r.push(s);continue}if(!i(a.info,o)){for(;a&&!ko.doesContain(a.info.mainBlock,o.mainBlock);)r.pop(),a=n();a?a.children.push(s):this.roots.push(s),r.push(s)}}}};var xA=class extends Error{constructor(e){super(`Unrecognized language: ${e}`)}},ate={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",tsx:"tsx",go:"go",ruby:"ruby",csharp:"csharp",cpp:"cpp",java:"java",rust:"rust"};function xb(t){if(t in ate)return ate[t]}var en=(()=>{function t(e,...r){return e.length===1?e[0]:e.reduce((n,i,o)=>`${n}${i}${r[o]||""}`,"")}return{typescript:t,javascript:t,python:t,go:t,ruby:t,csharp:t,cpp:t,java:t,rust:t}})();function fu(t,e){return Object.fromEntries(t.map(r=>[r,e]))}var ute={...fu(["javascript","typescript","tsx"],[`[
			(call_expression
				function: (identifier) @identifier)
			(call_expression
				function: (member_expression
					(property_identifier) @identifier))
		] @call_expression`]),python:[`[
			(call
				function: (identifier) @identifier)
			(call
				function: (attribute
					attribute: (identifier) @identifier))
		] @call_expression`],csharp:[`[
			(invocation_expression
				function: (identifier) @identifier)
			(invocation_expression
				function: (member_access_expression
					name: (identifier) @identifier))
		] @call_expression`],go:[`[
			(call_expression
				((selector_expression
					(field_identifier) @identifier)))
			(call_expression
				(identifier) @identifier)
		] @call_expression`],java:[`[
			(method_invocation
				name: (identifier) @identifier)
		] @call_expression`],ruby:[`[
			(call (identifier) @identifier
				(#not-match? @identifier "new|send|public_send|method"))
			(call
				receiver: (identifier)
				method: (identifier) @method
				(#match? @method "^(send|public_send|method)")
				arguments: (argument_list
					(simple_symbol) @symbol))
		] @call_expression`],cpp:[`[
			(function_declarator
				(identifier) @identifier)
			(function_declarator
				(field_identifier) @identifier)
			(call_expression (identifier) @identifier)
			(call_expression
				(field_expression
					field: (field_identifier) @identifier))
			(call_expression
				(call_expression
					(primitive_type)
					(argument_list
						(pointer_expression
						(identifier) @identifier))))
		] @call_expression`],rust:[`[
			(call_expression (identifier) @identifier)
			(call_expression (field_expression (identifier) (field_identifier) @identifier))
			(call_expression (scoped_identifier (identifier) (identifier) @identifier (#not-match? @identifier "new")))
		] @call_expression`]},lte={...fu(["javascript","typescript","tsx"],["(class_declaration) @class_declaration"]),java:["(class_declaration) @class_declaration"],csharp:["(class_declaration) @class_declaration"],python:["(class_definition) @class_declaration"],cpp:["(class_specifier) @class_declaration"],ruby:["(class) @class_declaration"],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @class_declaration`],rust:["(impl_item (type_identifier) @type_identifier) @class_declaration"]},dte={typescript:[`[
			(interface_declaration)
			(type_alias_declaration)
		] @type_declaration`],csharp:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],cpp:[`[
			(struct_specifier
				(type_identifier) @type_identifier)
			(union_specifier
				(type_identifier) @type_identifier)
			(enum_specifier
				(type_identifier) @type_identifier)
		] @type_declaration`],java:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @type_declaration`],ruby:["((constant) @type_identifier) @type_declaration"],python:[`(class_definition
			(identifier) @type_identifier) @type_declaration`]},pte={typescript:["(type_identifier) @type_identifier"],go:["(type_identifier) @type_identifier"],ruby:["(constant) @type_identifier"],csharp:[`[
			(base_list
				(identifier) @type_identifier)
			(variable_declaration
				(identifier) @type_identifier)
		]`],cpp:["(type_identifier) @type_identifier"],java:["(type_identifier) @type_identifier"],python:[`[
			(type (identifier) @type_identifier)
			(argument_list
				(identifier) @type_identifier)
		]`]},fte={...fu(["javascript","typescript","tsx"],[`(new_expression
			constructor: (identifier) @new_expression)`]),python:[`(call
			function: (identifier) @new_expression)`],csharp:[`(object_creation_expression
			(identifier) @new_expression)`],java:[`(object_creation_expression
			(type_identifier) @new_expression)`],cpp:[`[
			(declaration
				(type_identifier) @new_expression)
			(class_specifier
				(type_identifier) @new_expression)
		]`],go:["(composite_literal (type_identifier) @new_expression)"],ruby:[`((call
			receiver: ((constant) @new_expression)
			method: (identifier) @method)
				(#eq? @method "new"))`],rust:[`(call_expression
			(scoped_identifier
				(identifier) @new_expression
				(identifier) @identifier
				(#eq? @identifier "new")))`]},mte={python:[`[
			(function_definition
				name: (identifier) @identifier
				body: (block
						(expression_statement (string))? @docstring) @body)
			(assignment
				left: (identifier) @identifier
				right: (lambda) @body)
		] @function`,'(ERROR ("def" (identifier) (parameters))) @function'],...fu(["javascript","typescript","tsx"],[`[
			(function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(method_definition
				name: (property_identifier)? @identifier
				body: (statement_block) @body)
			(arrow_function
				body: (statement_block) @body)
		] @function`]),go:[`[
			(function_declaration
				name: (identifier) @identifier
				body: (block) @body)
			(method_declaration
				name: (field_identifier) @identifier
				body: (block) @body)
		] @function`],ruby:[`[
			(method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
			(singleton_method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
		] @function`],csharp:[`[
			(constructor_declaration
				(identifier) @identifier
				(block) @body)
			(destructor_declaration
				(identifier) @identifier
				(block) @body)
			(operator_declaration
				(block) @body)
			(method_declaration
				(identifier) @identifier
				(block) @body)
			(local_function_statement
				(identifier) @identifier
				(block) @body)
		] @function`],cpp:[`[
			(function_definition
				(_
					(identifier) @identifier)
					(compound_statement) @body)
			(function_definition
				(function_declarator
					(qualified_identifier
						(identifier) @identifier))
					(compound_statement) @body)
		] @function`],java:[`[
			(constructor_declaration
				name: (identifier) @identifier
				body: (constructor_body) @body)
			(method_declaration
				name: (_) @identifier
				body: (block) @body)
			(lambda_expression
				body: (block) @body)
		] @function`],rust:[`[
			(function_item (identifier) @identifier)
			(let_declaration (identifier) @identifier)
		] @function`]},hte={javascript:[en.javascript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],...fu(["typescript","tsx"],[en.typescript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]),java:[en.java`((block_comment) @block_comment
			(#match? @block_comment "^\\\\/\\\\*\\\\*")) @docComment`],cpp:[en.cpp`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],csharp:[en.csharp`(
			((comment) @c
				(#match? @c "^\\\\/\\\\/\\\\/"))+
		) @docComment`],rust:[en.rust`((line_comment) @comment
			(#match? @comment "^\/\/\/|^\/\/!"))+ @docComment`],go:[en.go`((comment)+) @docComment`],ruby:[en.ruby`((comment)+) @docComment`],python:[`(expression_statement
			(string) @docComment)`]},gte={javascript:[en.javascript`[
			(function_declaration
				(identifier) @function.identifier
			) @function

			(generator_function_declaration
				name: (identifier) @generator_function.identifier
			) @generator_function

			(class_declaration
				name: (identifier) @class.identifier ;; note: (type_identifier) in typescript
				body: (class_body
							(method_definition
								name: (property_identifier) @method.identifier
							) @method
						)
			) @class
		]`],...fu(["typescript","tsx"],[en.typescript`[
				(function_declaration
					(identifier) @function.identifier
				) @function

				(generator_function_declaration
					name: (identifier) @generator_function.identifier
				) @generator_function

				(class_declaration
					name: (type_identifier) @class.identifier
					body: (class_body
								(method_definition
									name: (property_identifier) @method.identifier
								) @method
							)
				) @class
			]`]),python:[en.python`[
				(function_definition
					name: (identifier) @function.identifier
				) @function
			]`],go:[en.go`[
				(function_declaration
					name: (identifier) @function.identifier
				) @function

				(method_declaration
					name: (field_identifier) @method.identifier
				) @method
			]`],ruby:[en.ruby`[
				(method
					name: (identifier) @method.identifier
				) @method

				(singleton_method
					name: (_) @singleton_method.identifier
				) @singleton_method
			]`],csharp:[en.csharp`[
				(constructor_declaration
					(identifier) @constructor.identifier
				) @constructor

				(destructor_declaration
					(identifier) @destructor.identifier
				) @destructor

				(method_declaration
					(identifier) @method.identifier
				) @method

				(local_function_statement
					(identifier) @local_function.identifier
				) @local_function
			]`],cpp:[en.cpp`[
				(function_definition
					(_
						(identifier) @identifier)
				) @function
			]`],java:[en.java`(class_declaration
			body: (_
						[
							(constructor_declaration
								(modifiers)? @constructor.modifiers
								(#not-eq? @constructor.modifiers "private")
								name: (identifier) @constructor.identifier
							) @constructor

							(method_declaration
								(modifiers)? @method.modifiers
								(#not-eq? @method.modifiers "private")
								name: (identifier) @method.identifier
							) @method
						]
					)
		) @class`],rust:[en.rust`[
				(function_item
					(identifier) @function.identifier
				) @function
			]`]},vte={...fu(["typescript","tsx"],[en.typescript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related

				(public_field_definition) @public_field_definition
				(method_definition) @method_definition

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]
		`]),python:[en.python`
			[
				(comment) @comment

				;; simple statements
				(assert_statement) @assert_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(delete_statement) @delete_statement
				(exec_statement) @exec_statement
				(expression_statement) @expression_statement
				(future_import_statement) @future_import_statement
				(global_statement) @global_statement
				(import_from_statement) @import_from_statement
				(import_statement) @import_statement
				(nonlocal_statement) @nonlocal_statement
				(pass_statement) @pass_statement
				(print_statement) @print_statement
				(raise_statement) @raise_statement
				(return_statement) @return_statement
				(type_alias_statement) @type_alias_statement


				;; compound statements

				(class_definition) @class_definition
				(decorated_definition) @decorated_definition
				(for_statement) @for_statement
				(function_definition) @function_definition
				(if_statement) @if_statement
				(try_statement) @try_statement
				(while_statement) @while_statement
				(with_statement) @with_statement


				;; expressions

				(expression_list) @expression_list
				(expression_statement) @expression_statement
			]
		`],javascript:[en.javascript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related

				(field_definition) @field_definition
				(method_definition) @method_definition

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]`],go:[en.go`
		[
			(_statement) @statement
			(function_declaration) @function_declaration
			(import_declaration) @import_declaration
			(method_declaration) @method_declaration
			(package_clause) @package_clause

			(if_statement
				initializer: (_) @for_statement.exclude_captures) @for_statement

			(expression_case) @expression_case ;; e.g., case 0:
		]
		`],ruby:[en.ruby`
			[
				(comment) @comment

				(assignment) @assignment

				(if) @if

				(call) @call

				(case) @case

				(when) @when

				(while) @while

				(for) @for

				(method) @method

				(class) @class

				(module) @module

				(begin) @begin
			]
		`],csharp:[en.csharp`
			[
				(comment) @comment

				(class_declaration) @class_declaration
				(constructor_declaration) @constructor_declaration
				(method_declaration) @method_declaration
				(delegate_declaration) @delegate_declaration
				(enum_declaration) @enum_declaration
				(extern_alias_directive) @extern_alias_directive
				(file_scoped_namespace_declaration) @file_scoped_namespace_declaration
				(global_attribute_list) @global_attribute_list
				(global_statement) @global_statement
				(interface_declaration) @interface_declaration
				(namespace_declaration) @namespace_declaration
				(record_declaration) @record_declaration
				(record_struct_declaration) @record_struct_declaration
				(struct_declaration) @struct_declaration
				(using_directive) @using_directive

				(local_declaration_statement) @local_declaration_statement
				(expression_statement) @expression_statement
				(for_statement) @for_statement
				(for_each_statement) @for_each_statement
				(continue_statement) @continue_statement
				(break_statement) @break_statement
				(throw_statement) @throw_statement
				(return_statement) @return_statement
				(try_statement) @try_statement
			]
		`],cpp:[en.cpp`
			[
				(declaration) @declaration

				(expression_statement) @expression_statement

				(comment) @comment

				(preproc_include) @preproc_include

				(namespace_definition) @namespace_definition

				(enum_specifier) @enum_specifier

				(struct_specifier) @struct_specifier

				(template_declaration) @template_declaration

				(function_definition) @function_definition

				(return_statement) @return_statement

				(class_specifier) @class_specifier

				(try_statement) @try_statement

				(throw_statement) @throw_statement

				(for_statement) @for_statement
				(for_statement
					initializer:(_) @for_statement.exclude_captures) @for_statement

				(for_range_loop) @for_range_loop
			]
		`],java:[en.java`
		[
			(statement) @statement ;; @ulugbekna: this includes (declaration); but somehow it can't capture inner classes

			(line_comment) @line_comment
			(block_comment) @block_comment

			(for_statement
				init: (_) @for_statement.exclude_captures)

			(block) @block.exclude_captures

			(field_declaration) @field_declaration
		]
		`],rust:[en.rust`
		[
			(line_comment) @line_comment

			(let_declaration) @let_declaration
			(extern_crate_declaration) @extern_crate_declaration
			(use_declaration) @use_declaration

			(attribute_item) @attribute_item
			(const_item) @const_item
			(enum_item) @enum_item
			(foreign_mod_item) @foreign_mod_item
			(function_item) @function_item
			(function_signature_item) @function_signature_item
			(impl_item) @impl_item
			(inner_attribute_item) @inner_attribute_item
			(mod_item) @mod_item
			(static_item) @static_item
			(struct_item) @struct_item
			(trait_item) @trait_item
			(type_item) @type_item
			(union_item) @union_item

			(macro_definition) @macro_definition
			(macro_invocation) @macro_invocation

			(empty_statement) @empty_statement

			(compound_assignment_expr) @compound_assignment_expr
			(generic_function) @generic_function
			(metavariable) @metavariable

			(match_arm) @match_arm

			(async_block) @async_block
			(const_block) @const_block
			(unsafe_block) @unsafe_block

			(block) @block.exclude_captures
		]
		`]},yte={...fu(["typescript","tsx"],["program","interface_declaration","class_declaration","function_declaration","function","type_alias_declaration","method_definition"]),javascript:["program","class_declaration","function_declaration","function","method_definition"],java:["program","class_declaration","interface_declaration","method_declaration"],cpp:["translation_unit","class_declaration","function_definition"],csharp:["compilation_unit","class_declaration","interface_declaration","method_declaration"],python:["module","class_definition","function_definition"],go:["source_file","type_declaration","function_declaration","method_declaration"],ruby:["program","method","class","method"],rust:["source_file","function_item","impl_item","let_declaration"]},bte={typescript:[ul("typescript")],tsx:[ul("tsx")],javascript:[ul("javascript")],java:[ul("java")],cpp:[ul("cpp")],csharp:[ul("csharp")],python:[ul("python")],go:[ul("go")],ruby:[ul("ruby")],rust:[ul("rust")]},_te={...fu(["typescript","tsx","javascript"],["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"]),java:["for_statement","enhanced_for_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],cpp:["for_statement","for_range_loop","if_statement","while_statement","do_statement","try_statement","switch_statement"],csharp:["for_statement","for_each_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],python:["for_statement","if_statement","while_statement","try_statement"],go:["for_statement","if_statement","type_switch_statement"],ruby:["while","for","if","case"],rust:["for_statement","if_statement","while_statement","loop_statement","match_expression"]},JPe={...fu(["typescript","tsx"],["lexical_declaration","expression_statement","public_field_definition"]),javascript:["call_expression","expression_statement","variable_declaration","public_field_definition"],java:["expression_statement","local_variable_declaration","field_declaration"],cpp:["field_declaration","expression_statement","declaration"],csharp:["field_declaration","expression_statement"],python:["expression_statement"],go:["short_var_declaration","call_expression"],ruby:["call","assignment"],rust:["expression_statement","let_declaration","use_declaration","assignment_expression","macro_definition","extern_crate_declaration"]},ZPe={...fu(["typescript","tsx"],["class_declaration","function_declaration","generator_function_declaration","interface_declaration","internal_module","method_definition"]),javascript:["class_declaration","function_declaration","generator_function_declaration","method_definition"],java:["class_declaration","constructor_declaration","enum_declaration","interface_declaration","method_declaration","module_declaration"],cpp:["class_specifier","function_definition","namespace_definition","struct_specifier"],csharp:["class_declaration","constructor_declaration","destructor_declaration","enum_declaration","interface_declaration","method_declaration","namespace_declaration","struct_declaration"],python:["function_definition","class_definition"],go:["function_declaration","method_declaration"],ruby:["class","method","module"],rust:["function_item","impl_item","mod_item","struct_item","trait_item","union_item"]},xte={typescript:[ll("typescript")],tsx:[ll("tsx")],javascript:[ll("javascript")],java:[ll("java")],cpp:[ll("cpp")],csharp:[ll("csharp")],python:[ll("python")],go:[ll("go")],rust:[ll("rust")],ruby:[ll("ruby")]};function ul(t){return yte[t].map(e=>`(${e}) @scope`).join(`
`)}function ll(t){return`[
		${ZPe[t].map(r=>`(${r})`).join(`
`)}
	] @definition`}function YS(t,e){return yte[t].includes(e.type)||_te[t].includes(e.type)}function Ete(t,e){return _te[t].includes(e.type)}function N9(t,e){return JPe[t].includes(e.type)}var L9=class{constructor(){this.loadedLanguagesCache=new Map}loadLanguage(e){return this.loadedLanguagesCache.has(e)||this.loadedLanguagesCache.set(e,this._doLoadLanguage(e)),this.loadedLanguagesCache.get(e)}_doLoadLanguage(e){let n=`tree-sitter-${e==="csharp"?"c-sharp":e}.wasm`,i=KS.basename(__dirname)==="dist"?KS.resolve(__dirname,n):KS.resolve(__dirname,"../../../../dist",n);return EA.default.Language.load(i)}},O9=class t{static{this.CACHE_SIZE_PER_LANGUAGE=5}constructor(){this.caches=new Map,this.languageLoader=new L9,this._parser=null}get parser(){return this._parser||(this._parser=new EA.default),this._parser}async parse(e,r){await EA.default.init();let n=this.getParseTreeCache(e),i=n.get(r);if(i)return i.createReference();let o=await this.languageLoader.loadLanguage(e);this.parser.setLanguage(o);let s=this.parser.parse(r),a=new F9(s);return n.put(r,a),a.createReference()}delete(){this._parser&&(this.parser.delete(),this._parser=null);for(let e of this.caches.values())e.dispose()}getParseTreeCache(e){let r=this.caches.get(e);return r||(r=new yA(t.CACHE_SIZE_PER_LANGUAGE),this.caches.set(e,r)),r}},M9=class{constructor(e){this._tree=e;this._refCount=1}get tree(){if(this._refCount===0)throw new Error("Cannot access disposed RefCountedParseTree");return this._tree}ref(){if(this._refCount===0)throw new Error("Cannot ref disposed RefCountedParseTree");this._refCount++}deref(){if(this._refCount===0)throw new Error("Cannot deref disposed RefCountedParseTree");this._refCount--,this._refCount===0&&this._tree.delete()}},F9=class{constructor(e){this._tree=new M9(e)}dispose(){this._tree.deref()}createReference(){return new U9(this._tree)}},U9=class{constructor(e){this._parseTree=e;this._parseTree.ref()}get tree(){return this._parseTree.tree}dispose(){this._parseTree.deref()}},Cte=new O9;function eke(){Cte.delete()}function $i(t,e){return Cte.parse(t,e)}var B9=class{constructor(e){this.language=e;this.map=new Map}getQuery(e){return this.map.has(e)||this.map.set(e,this.language.query(e)),this.map.get(e)}},q9=class t{constructor(){this.map=new Map}static{this.INSTANCE=new t}getQuery(e,r){return this.map.has(e)||this.map.set(e,new B9(e)),this.map.get(e).getQuery(r)}};function mu(t,e){let r=[];for(let n of t){let i=q9.INSTANCE.getQuery(e.tree.getLanguage(),n);r.push(...i.matches(e))}return r}function tke(t,e){let r=bte[t];return mu(r,e)}function j9(t,e){let r=mte[t];return mu(r,e)}function rke(t,e){let r=ute[t];return r?mu(r,e):[]}function nke(t,e){let r=lte[t];return r?mu(r,e):[]}function ike(t,e){let r=dte[t];return r?mu(r,e):[]}function oke(t,e){let r=pte[t];return r?mu(r,e):[]}function ske(t,e){let r=fte[t];return r?mu(r,e):[]}function ake(t,e){let r=xte[t];return mu(r,e)}async function cke(t,e,r){let n=await $i(t,e);try{return rke(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="call_expression").node;if(ko.doIntersect(r,c)){let u,l;t==="ruby"&&(l=a.captures.find(d=>d.name==="symbol")?.node,u=l?.text?.slice(1)),l??=a.captures.find(d=>d.name==="identifier")?.node,u??=l?.text,s.push({identifier:u??"",text:c.text,startIndex:(l??c).startIndex,endIndex:(l??c).endIndex})}return s},[])}finally{n.dispose()}}async function uke(t,e){let r=await $i(t,e);try{return j9(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="function").node;return{identifier:o.captures.find(c=>c.name==="identifier")?.node.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function lke(t,e){let r=await $i(t,e);try{return nke(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="class_declaration").node;return{identifier:s?.children.find(c=>c.type==="type_identifier"||c.type==="identifier"||c.type==="constant")?.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function dke(t,e){let r=await $i(t,e);try{return ike(t,r.tree.rootNode).map(o=>{let s=o.captures.find(c=>c.name==="type_declaration").node,a=o.captures.find(c=>c.name==="type_identifier")?.node.text;return a||(a=s?.children.find(c=>c.type==="type_identifier")?.text),{identifier:a??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function pke(t,e,r){let n=await $i(t,e);try{return oke(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="type_identifier").node;return ko.doIntersect(r,c)&&s.push({identifier:c.text,text:c.text,startIndex:c.startIndex,endIndex:c.endIndex}),s},[])}finally{n.dispose()}}async function fke(t,e,r){let n=await $i(t,e);try{return ske(t,n.tree.rootNode).reduce((s,a)=>{let c=a.captures.find(u=>u.name==="new_expression").node;return ko.doIntersect(r,c)&&s.push({identifier:c.text,text:c.text,startIndex:c.startIndex,endIndex:c.endIndex}),s},[])}finally{n.dispose()}}async function mke(t,e){let r=await $i(t,e);try{let n=ake(t,r.tree.rootNode);return Rke(t,n,r.tree.rootNode)}finally{r.dispose()}}async function hke(t,e){let r=await $i(t,e);try{return j9(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="function").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function gke(t,e){let r=await $i(t,e);try{return j9(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="body").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function vke(t,e,r){let n=await $i(t,e);try{let i=tke(t,n.tree.rootNode),o;for(let s of i){let a=s.captures[0].node,c=Qf.ofSyntaxNode(a);if(Qf.doesContain(c,r)&&(o=a),du.isBefore(r.endPosition,c.startPosition))break}if(o)return Qf.ofSyntaxNode(o);throw new Error("No parent node found")}finally{n.dispose()}}async function yke(t,e,r,n){let i=await $i(t,e);try{let o=i.tree.rootNode.descendantForPosition(r.startPosition,r.endPosition),s={startPosition:o.startPosition,endPosition:o.endPosition},a=wte(t,o,n,r,!0);return Qf.equals(s,a)?Ite(t,o):a}finally{i.dispose()}}function Ite(t,e){let r=e.parent,n={startPosition:e.startPosition,endPosition:e.endPosition};if(YS(t,e)||!r)return n;let{filteredRanges:i,indexOfInterest:o}=Rte(t,r.children,n,!1);if(o-1>=0&&o+1<=i.length-1){let s=i[o-1],a=i[o+1];return{startPosition:s.startPosition,endPosition:a.endPosition}}return Ite(t,r)}function wte(t,e,r,n,i){let o=e.children;if(e.endPosition.row-e.startPosition.row+1<=r){let a=YS(t,e)?{startPosition:e.startPosition,endPosition:e.endPosition}:Tte(t,o,r,n,i),c=e.parent;return c?wte(t,c,r,a,!1):a}return Tte(t,o,r,n,i)}function Ste(t,e){return e.endPosition.row-t.startPosition.row+1}function Tte(t,e,r,n,i){if(e.length===0)return n;let{filteredRanges:o,indexOfInterest:s}=Rte(t,e,n,i),a=0,c=o.length-1,u=o[a],l=o[c];for(;Ste(u,l)>r&&a!==c;)s-a<c-s?(c--,l=o[c]):(a++,u=o[a]);return Ste(u,l)<=r?{startPosition:u.startPosition,endPosition:l.endPosition}:n}function Rte(t,e,r,n){let i,o;if(n?(i=e.filter(s=>YS(t,s)||N9(t,s)),o=ote(i,r,(s,a)=>du.isBefore(s.startPosition,a.startPosition)),i.splice(o,0,r)):(i=e.filter(s=>Qf.doesContain(s,r)||YS(t,s)||N9(t,s)),o=i.findIndex(s=>Qf.doesContain(s,r))),o===-1)throw new Error("Valid index not found");return{filteredRanges:i,indexOfInterest:o}}function SA(t,e,r,n=G9){let i=[t.rootNode],o=[];for(;;){let s=i.map(a=>[a,ko.intersectionSize(a,e)]).filter(([a,c])=>c>0).sort(([a,c],[u,l])=>l-c);if(s.length===0)return o.length===0?void 0:ste(o,([a,c],[u,l])=>c-l)[0];{let a=s.map(([c,u])=>{let l=ko.len(c),d=Math.abs(ko.len(e)-u),f=(u-d)/l;return[c,f]});o.push(...a.filter(([c,u])=>n(c,r))),i=[],i.push(...a.flatMap(([c,u])=>c.children))}}}async function bke(t,e,r){let n=await $i(t,e);try{let i=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex);if(i.type.match(/identifier/)&&(i.parent===null||G9(i.parent,t))){let o=i.parent,s=o===null?void 0:{startIndex:o.startIndex,endIndex:o.endIndex};return{identifier:i.text,nodeRange:s}}}finally{n.dispose()}}async function _ke(t,e,r){let n=await $i(t,e);try{let i=gte[t],a=mu(i,n.tree.rootNode).flatMap(({captures:c})=>c).filter(({name:c})=>c.endsWith("identifier")).find(({node:c})=>ko.doesContain(c,r));return a?{identifier:a.node.text}:void 0}catch{return}finally{n.dispose()}}async function xke(t,e,r){let n=[],s=(await $i(t,e)).tree.rootNode.descendantForIndex(r.startIndex,r.endIndex);for(;s!==null;)Ete(t,s)&&n.push({startIndex:s.startIndex,endIndex:s.endIndex}),s=s.parent;return n}async function Eke(t,e,r){let n=await $i(t,e);try{let o=r.startIndex===r.endIndex?void 0:SA(n.tree,r,t);if(o)return{nodeIdentifier:H9(o,t),nodeToDocument:bA.ofSyntaxNode(o),nodeSelectionBy:"matchingSelection"};let a=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex),c=0;for(;!G9(a,t)&&a.parent!==null;)a=a.parent,++c;return{nodeIdentifier:H9(a,t),nodeToDocument:bA.ofSyntaxNode(a),nodeSelectionBy:"expanding"}}finally{n.dispose()}}async function Ske(t,e,r){let n=await $i(t,e);try{let i=r.startIndex===r.endIndex;if(i)return;let o=i?void 0:SA(n.tree,r,t),s=i?void 0:SA(n.tree,r,t,Tke);if(s&&o)return{nodeIdentifier:H9(o,t),nodeToExplain:bA.ofSyntaxNode(s)}}finally{n.dispose()}}function H9(t,e){switch(e){case"python":case"csharp":return t.children.find(r=>r.type.match(/identifier/))?.text;case"go":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/spec/))?.children.find(i=>i.type.match(/identifier/))?.text}case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":case"cpp":case"java":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/declarator/))?.children.find(i=>i.type.match(/identifier/))?.text}case"ruby":return t.children.find(r=>r.type.match(/constant|identifier/))?.text;default:return t.children.find(r=>r.type.match(/identifier/))?.text}}function Tke(t,e){return t.type.match(/definition/)}function G9(t,e){switch(e){case"typescript":case"tsx":case"javascript":return t.type.match(/definition|declaration|declarator|export_statement/);case"go":return t.type.match(/definition|declaration|declarator|var_spec/);case"cpp":return t.type.match(/definition|declaration|declarator|class_specifier/);case"ruby":return t.type.match(/module|class|method|assignment/);default:return t.type.match(/definition|declaration|declarator/)}}async function Cke(t,e){if(!new Set(["javascript","typescript","java","cpp","csharp","go","ruby"]).has(t))return;let n=await $i(t,e);try{let i=hte[t],o=mu(i,n.tree.rootNode).flatMap(a=>a.captures.filter(c=>c.name==="docComment")),s=Ike(o);if(s.length>1&&(s=s.filter(a=>a.includes(`
`)||!a.match(/(implementation code|code implementation|implementation details|\.\.\.)/i))),s.length===1)return s[0]}finally{n.dispose()}}function Ike(t){let e=[];for(let r=0;r<t.length;++r){let n=[t[r].node.text];for(;r+1<t.length&&t[r].node.endPosition.row+1===t[r+1].node.startPosition.row;)++r,n.push(t[r].node.text);e.push(n.join(`
`))}return e}async function wke(t,e){let r=vte[t];if(r.length===0)return;let n=await $i(t,e);try{let i=mu(r,n.tree.rootNode).flatMap(c=>c.captures).sort((c,u)=>ko.compare(c.node,u.node)),o=[];for(let c of i)c.name.endsWith(".exclude_captures")&&o.push(ko.ofSyntaxNode(c.node));let s=new Kf(0,e.length,"root",[]),a=[s];for(let c=0;c<i.length;++c){let l=i[c].node;if(o.some(f=>ko.isEqual(f,l)))continue;let d;do d=a.pop();while(d&&!ko.doesContain(d,l));if(new Set(["export_statement","ambient_declaration"]).has(d.kind))d.kind=l.type,a.push(d);else{let f=new Kf(l.startIndex,l.endIndex,l.type,[]);d.children.push(f),a.push(d,f)}}return s}catch(i){console.error(i instanceof Error?i:new Error(i))}finally{n.dispose()}}function Rke(t,e,r){let n;switch(t){case"python":n=Dke(e);break;case"ruby":n=kke(e);break;default:{n=Ake(e,t);break}}return new _A(n,pu.ofSyntaxNode(r))}function Ake(t,e){let r=new Map;return t.forEach(n=>{let o=n.captures.find(a=>a.name==="definition")?.node,s=o?.childForFieldName("body");if(o&&s){let a;switch(e){case"typescript":case"javascript":a=Nke(o);break;case"java":case"rust":a=Lke(o);break;default:{a=QS(o);break}}r.get(o.id)||r.set(o.id,{mainBlock:pu.ofSyntaxNode(o),detailBlocks:{comments:a.map(u=>pu.ofSyntaxNode(u)),body:pu.ofSyntaxNode(s)}})}}),Array.from(r.values())}function Pke(t){if(!(t.length<2))for(let e=1;e<t.length;e++){let r=t[e];if(!r.type.includes("parameters"))return r}}function kke(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(o=>o.name==="definition")?.node;if(i){let o=i.namedChildren,s=Pke(o);if(s){let a=o[o.length-1],c=i.text.substring(s.startIndex-i.startIndex,a.endIndex-i.startIndex),u=QS(i);e.get(i.id)||e.set(i.id,{mainBlock:pu.ofSyntaxNode(i),detailBlocks:{comments:u.map(d=>pu.ofSyntaxNode(d)),body:{range:{startPosition:{row:s.startPosition.row,column:s.startPosition.column},endPosition:{row:a.endPosition.row,column:a.endPosition.column}},startIndex:s.startIndex,text:c,endIndex:a.endIndex}}})}}}),Array.from(e.values())}function Dke(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(s=>s.name==="definition")?.node,o=i?.childForFieldName("body");if(i&&o){let s=Mke(o),a=Oke(i);e.set(i.id,{mainBlock:pu.ofSyntaxNode(i),detailBlocks:{docstring:s?pu.ofSyntaxNode(s):void 0,decorator:a?pu.ofSyntaxNode(a):void 0,body:pu.ofSyntaxNode(o)}});return}}),Array.from(e.values())}function QS(t,e=["comment"]){let r=[],n=t.previousNamedSibling;for(;n&&e.some(i=>i===n?.type);)r.push(n),n=n.previousNamedSibling;return r.reverse()}function Nke(t){let e=t.parent;return e?.type==="export_statement"?QS(e):QS(t)}function Lke(t){return QS(t,["block_comment","line_comment"])}function Oke(t){let e=t.previousNamedSibling;return e?.type==="decorator"?e:void 0}function Mke(t){let e=t.firstChild;if(!e||e.type!=="expression_statement")return;let r=e.firstChild;return r?.type==="string"?r:void 0}var Fke=Pte.join(__dirname,"worker2.js"),Eb=class{constructor(e,r){this._parser=new z9(V9,Fke,e,r.getLogger("parser proxy"))}dispose(){this._parser.dispose()}getTreeSitterAST(e){let r=xb(e.languageId);if(r)return this.getTreeSitterASTForWASMLanguage(r,e.getText())}getTreeSitterASTForWASMLanguage(e,r){let n=this._parser.proxy;return{getFunctionPositions:()=>n._getFunctionPositions(e,r),getFunctionBodies:()=>n._getFunctionBodies(e,r),getCoarseParentScope:i=>n._getCoarseParentScope(e,r,i),getFixSelectionOfInterest:(i,o)=>n._getFixSelectionOfInterest(e,r,i,o),getCallExpressions:i=>n._getCallExpressions(e,r,i),getFunctionDefinitions:()=>n._getFunctionDefinitions(e,r),getClassReferences:i=>n._getClassReferences(e,r,i),getClassDeclarations:()=>n._getClassDeclarations(e,r),getTypeDeclarations:()=>n._getTypeDeclarations(e,r),getTypeReferences:i=>n._getTypeReferences(e,r,i),getDocumentableNodeIfOnIdentifier:i=>n._getDocumentableNodeIfOnIdentifier(e,r,i),getTestableNode:i=>n._getTestableNode(e,r,i),getNodeToExplain:i=>n._getNodeToExplain(e,r,i),getNodeToDocument:i=>n._getNodeToDocument(e,r,i),getFineScopes:i=>n._getFineScopes(e,r,i),getStructure:()=>n._getStructure(e,r)}}extractDoc(e,r){return this._parser.proxy._extractDoc(e,r)}getSemanticChunkTree(e,r){return this._parser.proxy._getSemanticChunkTree(e,r)}getStructure(e,r){return this._parser.proxy._getStructure(e,r)}};Eb=ze([rt(1,pe)],Eb);var z9=class{constructor(e,r,n,i){this._workerPath=r;this._useWorker=n;this._local=new Proxy(e,{get:(o,s,a)=>{let c=o[s];return typeof c!="function"?c:async(...u)=>{let l=await c.apply(o,Ate(u));return Ate(l)}}}),this._worker=new Ao(()=>new Yf(this._workerPath,i))}get proxy(){return this._useWorker?this._worker.value.proxy:this._local}dispose(){this._worker.hasValue&&this._worker.value.terminate()}};function Ate(t){return typeof t>"u"?t:JSON.parse(JSON.stringify(t))}var TA=require("vscode");var IA=re("IRemoteRepositoriesService"),CA=class{async loadWorkspaceContents(e){return await(await this.getApi()).loadWorkspaceContents?.(e)??!1}getApi(){return this.getRemoteExtension().activate()}getRemoteExtension(){if(this._remoteHub!==void 0)return this._remoteHub;if(this._remoteHub=TA.extensions.getExtension("ms-vscode.remote-repositories")??TA.extensions.getExtension("GitHub.remoteHub")??TA.extensions.getExtension("GitHub.remoteHub-insiders"),this._remoteHub===void 0)throw new Error("No Remote repository extension found.");return this._remoteHub}};var Sb=re("IScopeSelector");var XS=require("vscode");var kte=Object.create(null);function _(t,e){if(AS(e)){let r=kte[e];if(r===void 0)throw new Error(`${t} references an unknown codicon: ${e}`);e=r}return kte[t]=e,{id:t}}var Ar={add:_("add",6e4),plus:_("plus",6e4),gistNew:_("gist-new",6e4),repoCreate:_("repo-create",6e4),lightbulb:_("lightbulb",60001),lightBulb:_("light-bulb",60001),repo:_("repo",60002),repoDelete:_("repo-delete",60002),gistFork:_("gist-fork",60003),repoForked:_("repo-forked",60003),gitPullRequest:_("git-pull-request",60004),gitPullRequestAbandoned:_("git-pull-request-abandoned",60004),recordKeys:_("record-keys",60005),keyboard:_("keyboard",60005),tag:_("tag",60006),tagAdd:_("tag-add",60006),tagRemove:_("tag-remove",60006),gitPullRequestLabel:_("git-pull-request-label",60006),person:_("person",60007),personFollow:_("person-follow",60007),personOutline:_("person-outline",60007),personFilled:_("person-filled",60007),gitBranch:_("git-branch",60008),gitBranchCreate:_("git-branch-create",60008),gitBranchDelete:_("git-branch-delete",60008),sourceControl:_("source-control",60008),mirror:_("mirror",60009),mirrorPublic:_("mirror-public",60009),star:_("star",60010),starAdd:_("star-add",60010),starDelete:_("star-delete",60010),starEmpty:_("star-empty",60010),comment:_("comment",60011),commentAdd:_("comment-add",60011),alert:_("alert",60012),warning:_("warning",60012),search:_("search",60013),searchSave:_("search-save",60013),logOut:_("log-out",60014),signOut:_("sign-out",60014),logIn:_("log-in",60015),signIn:_("sign-in",60015),eye:_("eye",60016),eyeUnwatch:_("eye-unwatch",60016),eyeWatch:_("eye-watch",60016),circleFilled:_("circle-filled",60017),primitiveDot:_("primitive-dot",60017),closeDirty:_("close-dirty",60017),debugBreakpoint:_("debug-breakpoint",60017),debugBreakpointDisabled:_("debug-breakpoint-disabled",60017),debugBreakpointPending:_("debug-breakpoint-pending",60377),debugHint:_("debug-hint",60017),primitiveSquare:_("primitive-square",60018),edit:_("edit",60019),pencil:_("pencil",60019),info:_("info",60020),issueOpened:_("issue-opened",60020),gistPrivate:_("gist-private",60021),gitForkPrivate:_("git-fork-private",60021),lock:_("lock",60021),mirrorPrivate:_("mirror-private",60021),close:_("close",60022),removeClose:_("remove-close",60022),x:_("x",60022),repoSync:_("repo-sync",60023),sync:_("sync",60023),clone:_("clone",60024),desktopDownload:_("desktop-download",60024),beaker:_("beaker",60025),microscope:_("microscope",60025),vm:_("vm",60026),deviceDesktop:_("device-desktop",60026),file:_("file",60027),fileText:_("file-text",60027),more:_("more",60028),ellipsis:_("ellipsis",60028),kebabHorizontal:_("kebab-horizontal",60028),mailReply:_("mail-reply",60029),reply:_("reply",60029),organization:_("organization",60030),organizationFilled:_("organization-filled",60030),organizationOutline:_("organization-outline",60030),newFile:_("new-file",60031),fileAdd:_("file-add",60031),newFolder:_("new-folder",60032),fileDirectoryCreate:_("file-directory-create",60032),trash:_("trash",60033),trashcan:_("trashcan",60033),history:_("history",60034),clock:_("clock",60034),folder:_("folder",60035),fileDirectory:_("file-directory",60035),symbolFolder:_("symbol-folder",60035),logoGithub:_("logo-github",60036),markGithub:_("mark-github",60036),github:_("github",60036),terminal:_("terminal",60037),console:_("console",60037),repl:_("repl",60037),zap:_("zap",60038),symbolEvent:_("symbol-event",60038),error:_("error",60039),stop:_("stop",60039),variable:_("variable",60040),symbolVariable:_("symbol-variable",60040),array:_("array",60042),symbolArray:_("symbol-array",60042),symbolModule:_("symbol-module",60043),symbolPackage:_("symbol-package",60043),symbolNamespace:_("symbol-namespace",60043),symbolObject:_("symbol-object",60043),symbolMethod:_("symbol-method",60044),symbolFunction:_("symbol-function",60044),symbolConstructor:_("symbol-constructor",60044),symbolBoolean:_("symbol-boolean",60047),symbolNull:_("symbol-null",60047),symbolNumeric:_("symbol-numeric",60048),symbolNumber:_("symbol-number",60048),symbolStructure:_("symbol-structure",60049),symbolStruct:_("symbol-struct",60049),symbolParameter:_("symbol-parameter",60050),symbolTypeParameter:_("symbol-type-parameter",60050),symbolKey:_("symbol-key",60051),symbolText:_("symbol-text",60051),symbolReference:_("symbol-reference",60052),goToFile:_("go-to-file",60052),symbolEnum:_("symbol-enum",60053),symbolValue:_("symbol-value",60053),symbolRuler:_("symbol-ruler",60054),symbolUnit:_("symbol-unit",60054),activateBreakpoints:_("activate-breakpoints",60055),archive:_("archive",60056),arrowBoth:_("arrow-both",60057),arrowDown:_("arrow-down",60058),arrowLeft:_("arrow-left",60059),arrowRight:_("arrow-right",60060),arrowSmallDown:_("arrow-small-down",60061),arrowSmallLeft:_("arrow-small-left",60062),arrowSmallRight:_("arrow-small-right",60063),arrowSmallUp:_("arrow-small-up",60064),arrowUp:_("arrow-up",60065),bell:_("bell",60066),bold:_("bold",60067),book:_("book",60068),bookmark:_("bookmark",60069),debugBreakpointConditionalUnverified:_("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:_("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:_("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:_("debug-breakpoint-data-unverified",60072),debugBreakpointData:_("debug-breakpoint-data",60073),debugBreakpointDataDisabled:_("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:_("debug-breakpoint-log-unverified",60074),debugBreakpointLog:_("debug-breakpoint-log",60075),debugBreakpointLogDisabled:_("debug-breakpoint-log-disabled",60075),briefcase:_("briefcase",60076),broadcast:_("broadcast",60077),browser:_("browser",60078),bug:_("bug",60079),calendar:_("calendar",60080),caseSensitive:_("case-sensitive",60081),check:_("check",60082),checklist:_("checklist",60083),chevronDown:_("chevron-down",60084),dropDownButton:_("drop-down-button",60084),chevronLeft:_("chevron-left",60085),chevronRight:_("chevron-right",60086),chevronUp:_("chevron-up",60087),chromeClose:_("chrome-close",60088),chromeMaximize:_("chrome-maximize",60089),chromeMinimize:_("chrome-minimize",60090),chromeRestore:_("chrome-restore",60091),circle:_("circle",60092),circleOutline:_("circle-outline",60092),debugBreakpointUnverified:_("debug-breakpoint-unverified",60092),circleSlash:_("circle-slash",60093),circuitBoard:_("circuit-board",60094),clearAll:_("clear-all",60095),clippy:_("clippy",60096),closeAll:_("close-all",60097),cloudDownload:_("cloud-download",60098),cloudUpload:_("cloud-upload",60099),code:_("code",60100),collapseAll:_("collapse-all",60101),colorMode:_("color-mode",60102),commentDiscussion:_("comment-discussion",60103),compareChanges:_("compare-changes",60157),creditCard:_("credit-card",60105),dash:_("dash",60108),dashboard:_("dashboard",60109),database:_("database",60110),debugContinue:_("debug-continue",60111),debugDisconnect:_("debug-disconnect",60112),debugPause:_("debug-pause",60113),debugRestart:_("debug-restart",60114),debugStart:_("debug-start",60115),debugStepInto:_("debug-step-into",60116),debugStepOut:_("debug-step-out",60117),debugStepOver:_("debug-step-over",60118),debugStop:_("debug-stop",60119),debug:_("debug",60120),deviceCameraVideo:_("device-camera-video",60121),deviceCamera:_("device-camera",60122),deviceMobile:_("device-mobile",60123),diffAdded:_("diff-added",60124),diffIgnored:_("diff-ignored",60125),diffModified:_("diff-modified",60126),diffRemoved:_("diff-removed",60127),diffRenamed:_("diff-renamed",60128),diff:_("diff",60129),discard:_("discard",60130),editorLayout:_("editor-layout",60131),emptyWindow:_("empty-window",60132),exclude:_("exclude",60133),extensions:_("extensions",60134),eyeClosed:_("eye-closed",60135),fileBinary:_("file-binary",60136),fileCode:_("file-code",60137),fileMedia:_("file-media",60138),filePdf:_("file-pdf",60139),fileSubmodule:_("file-submodule",60140),fileSymlinkDirectory:_("file-symlink-directory",60141),fileSymlinkFile:_("file-symlink-file",60142),fileZip:_("file-zip",60143),files:_("files",60144),filter:_("filter",60145),flame:_("flame",60146),foldDown:_("fold-down",60147),foldUp:_("fold-up",60148),fold:_("fold",60149),folderActive:_("folder-active",60150),folderOpened:_("folder-opened",60151),gear:_("gear",60152),gift:_("gift",60153),gistSecret:_("gist-secret",60154),gist:_("gist",60155),gitCommit:_("git-commit",60156),gitCompare:_("git-compare",60157),gitMerge:_("git-merge",60158),githubAction:_("github-action",60159),githubAlt:_("github-alt",60160),globe:_("globe",60161),grabber:_("grabber",60162),graph:_("graph",60163),gripper:_("gripper",60164),heart:_("heart",60165),home:_("home",60166),horizontalRule:_("horizontal-rule",60167),hubot:_("hubot",60168),inbox:_("inbox",60169),issueClosed:_("issue-closed",60324),issueReopened:_("issue-reopened",60171),issues:_("issues",60172),italic:_("italic",60173),jersey:_("jersey",60174),json:_("json",60175),bracket:_("bracket",60175),kebabVertical:_("kebab-vertical",60176),key:_("key",60177),law:_("law",60178),lightbulbAutofix:_("lightbulb-autofix",60179),linkExternal:_("link-external",60180),link:_("link",60181),listOrdered:_("list-ordered",60182),listUnordered:_("list-unordered",60183),liveShare:_("live-share",60184),loading:_("loading",60185),location:_("location",60186),mailRead:_("mail-read",60187),mail:_("mail",60188),markdown:_("markdown",60189),megaphone:_("megaphone",60190),mention:_("mention",60191),milestone:_("milestone",60192),gitPullRequestMilestone:_("git-pull-request-milestone",60192),mortarBoard:_("mortar-board",60193),move:_("move",60194),multipleWindows:_("multiple-windows",60195),mute:_("mute",60196),noNewline:_("no-newline",60197),note:_("note",60198),octoface:_("octoface",60199),openPreview:_("open-preview",60200),package:_("package",60201),paintcan:_("paintcan",60202),pin:_("pin",60203),play:_("play",60204),run:_("run",60204),plug:_("plug",60205),preserveCase:_("preserve-case",60206),preview:_("preview",60207),project:_("project",60208),pulse:_("pulse",60209),question:_("question",60210),quote:_("quote",60211),radioTower:_("radio-tower",60212),reactions:_("reactions",60213),references:_("references",60214),refresh:_("refresh",60215),regex:_("regex",60216),remoteExplorer:_("remote-explorer",60217),remote:_("remote",60218),remove:_("remove",60219),replaceAll:_("replace-all",60220),replace:_("replace",60221),repoClone:_("repo-clone",60222),repoForcePush:_("repo-force-push",60223),repoPull:_("repo-pull",60224),repoPush:_("repo-push",60225),report:_("report",60226),requestChanges:_("request-changes",60227),rocket:_("rocket",60228),rootFolderOpened:_("root-folder-opened",60229),rootFolder:_("root-folder",60230),rss:_("rss",60231),ruby:_("ruby",60232),saveAll:_("save-all",60233),saveAs:_("save-as",60234),save:_("save",60235),screenFull:_("screen-full",60236),screenNormal:_("screen-normal",60237),searchStop:_("search-stop",60238),server:_("server",60240),settingsGear:_("settings-gear",60241),settings:_("settings",60242),shield:_("shield",60243),smiley:_("smiley",60244),sortPrecedence:_("sort-precedence",60245),splitHorizontal:_("split-horizontal",60246),splitVertical:_("split-vertical",60247),squirrel:_("squirrel",60248),starFull:_("star-full",60249),starHalf:_("star-half",60250),symbolClass:_("symbol-class",60251),symbolColor:_("symbol-color",60252),symbolCustomColor:_("symbol-customcolor",60252),symbolConstant:_("symbol-constant",60253),symbolEnumMember:_("symbol-enum-member",60254),symbolField:_("symbol-field",60255),symbolFile:_("symbol-file",60256),symbolInterface:_("symbol-interface",60257),symbolKeyword:_("symbol-keyword",60258),symbolMisc:_("symbol-misc",60259),symbolOperator:_("symbol-operator",60260),symbolProperty:_("symbol-property",60261),wrench:_("wrench",60261),wrenchSubaction:_("wrench-subaction",60261),symbolSnippet:_("symbol-snippet",60262),tasklist:_("tasklist",60263),telescope:_("telescope",60264),textSize:_("text-size",60265),threeBars:_("three-bars",60266),thumbsdown:_("thumbsdown",60267),thumbsup:_("thumbsup",60268),tools:_("tools",60269),triangleDown:_("triangle-down",60270),triangleLeft:_("triangle-left",60271),triangleRight:_("triangle-right",60272),triangleUp:_("triangle-up",60273),twitter:_("twitter",60274),unfold:_("unfold",60275),unlock:_("unlock",60276),unmute:_("unmute",60277),unverified:_("unverified",60278),verified:_("verified",60279),versions:_("versions",60280),vmActive:_("vm-active",60281),vmOutline:_("vm-outline",60282),vmRunning:_("vm-running",60283),watch:_("watch",60284),whitespace:_("whitespace",60285),wholeWord:_("whole-word",60286),window:_("window",60287),wordWrap:_("word-wrap",60288),zoomIn:_("zoom-in",60289),zoomOut:_("zoom-out",60290),listFilter:_("list-filter",60291),listFlat:_("list-flat",60292),listSelection:_("list-selection",60293),selection:_("selection",60293),listTree:_("list-tree",60294),debugBreakpointFunctionUnverified:_("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:_("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:_("debug-breakpoint-function-disabled",60296),debugStackframeActive:_("debug-stackframe-active",60297),circleSmallFilled:_("circle-small-filled",60298),debugStackframeDot:_("debug-stackframe-dot",60298),debugStackframe:_("debug-stackframe",60299),debugStackframeFocused:_("debug-stackframe-focused",60299),debugBreakpointUnsupported:_("debug-breakpoint-unsupported",60300),symbolString:_("symbol-string",60301),debugReverseContinue:_("debug-reverse-continue",60302),debugStepBack:_("debug-step-back",60303),debugRestartFrame:_("debug-restart-frame",60304),callIncoming:_("call-incoming",60306),callOutgoing:_("call-outgoing",60307),menu:_("menu",60308),expandAll:_("expand-all",60309),feedback:_("feedback",60310),gitPullRequestReviewer:_("git-pull-request-reviewer",60310),groupByRefType:_("group-by-ref-type",60311),ungroupByRefType:_("ungroup-by-ref-type",60312),account:_("account",60313),gitPullRequestAssignee:_("git-pull-request-assignee",60313),bellDot:_("bell-dot",60314),debugConsole:_("debug-console",60315),library:_("library",60316),output:_("output",60317),runAll:_("run-all",60318),syncIgnored:_("sync-ignored",60319),pinned:_("pinned",60320),githubInverted:_("github-inverted",60321),debugAlt:_("debug-alt",60305),serverProcess:_("server-process",60322),serverEnvironment:_("server-environment",60323),pass:_("pass",60324),stopCircle:_("stop-circle",60325),playCircle:_("play-circle",60326),record:_("record",60327),debugAltSmall:_("debug-alt-small",60328),vmConnect:_("vm-connect",60329),cloud:_("cloud",60330),merge:_("merge",60331),exportIcon:_("export",60332),graphLeft:_("graph-left",60333),magnet:_("magnet",60334),notebook:_("notebook",60335),redo:_("redo",60336),checkAll:_("check-all",60337),pinnedDirty:_("pinned-dirty",60338),passFilled:_("pass-filled",60339),circleLargeFilled:_("circle-large-filled",60340),circleLarge:_("circle-large",60341),circleLargeOutline:_("circle-large-outline",60341),combine:_("combine",60342),gather:_("gather",60342),table:_("table",60343),variableGroup:_("variable-group",60344),typeHierarchy:_("type-hierarchy",60345),typeHierarchySub:_("type-hierarchy-sub",60346),typeHierarchySuper:_("type-hierarchy-super",60347),gitPullRequestCreate:_("git-pull-request-create",60348),runAbove:_("run-above",60349),runBelow:_("run-below",60350),notebookTemplate:_("notebook-template",60351),debugRerun:_("debug-rerun",60352),workspaceTrusted:_("workspace-trusted",60353),workspaceUntrusted:_("workspace-untrusted",60354),workspaceUnspecified:_("workspace-unspecified",60355),terminalCmd:_("terminal-cmd",60356),terminalDebian:_("terminal-debian",60357),terminalLinux:_("terminal-linux",60358),terminalPowershell:_("terminal-powershell",60359),terminalTmux:_("terminal-tmux",60360),terminalUbuntu:_("terminal-ubuntu",60361),terminalBash:_("terminal-bash",60362),arrowSwap:_("arrow-swap",60363),copy:_("copy",60364),personAdd:_("person-add",60365),filterFilled:_("filter-filled",60366),wand:_("wand",60367),debugLineByLine:_("debug-line-by-line",60368),inspect:_("inspect",60369),layers:_("layers",60370),layersDot:_("layers-dot",60371),layersActive:_("layers-active",60372),compass:_("compass",60373),compassDot:_("compass-dot",60374),compassActive:_("compass-active",60375),azure:_("azure",60376),issueDraft:_("issue-draft",60377),gitPullRequestClosed:_("git-pull-request-closed",60378),gitPullRequestDraft:_("git-pull-request-draft",60379),debugAll:_("debug-all",60380),debugCoverage:_("debug-coverage",60381),runErrors:_("run-errors",60382),folderLibrary:_("folder-library",60383),debugContinueSmall:_("debug-continue-small",60384),beakerStop:_("beaker-stop",60385),graphLine:_("graph-line",60386),graphScatter:_("graph-scatter",60387),pieChart:_("pie-chart",60388),bracketDot:_("bracket-dot",60389),bracketError:_("bracket-error",60390),lockSmall:_("lock-small",60391),azureDevops:_("azure-devops",60392),verifiedFilled:_("verified-filled",60393),newLine:_("newline",60394),layout:_("layout",60395),layoutActivitybarLeft:_("layout-activitybar-left",60396),layoutActivitybarRight:_("layout-activitybar-right",60397),layoutPanelLeft:_("layout-panel-left",60398),layoutPanelCenter:_("layout-panel-center",60399),layoutPanelJustify:_("layout-panel-justify",60400),layoutPanelRight:_("layout-panel-right",60401),layoutPanel:_("layout-panel",60402),layoutSidebarLeft:_("layout-sidebar-left",60403),layoutSidebarRight:_("layout-sidebar-right",60404),layoutStatusbar:_("layout-statusbar",60405),layoutMenubar:_("layout-menubar",60406),layoutCentered:_("layout-centered",60407),layoutSidebarRightOff:_("layout-sidebar-right-off",60416),layoutPanelOff:_("layout-panel-off",60417),layoutSidebarLeftOff:_("layout-sidebar-left-off",60418),target:_("target",60408),indent:_("indent",60409),recordSmall:_("record-small",60410),errorSmall:_("error-small",60411),arrowCircleDown:_("arrow-circle-down",60412),arrowCircleLeft:_("arrow-circle-left",60413),arrowCircleRight:_("arrow-circle-right",60414),arrowCircleUp:_("arrow-circle-up",60415),heartFilled:_("heart-filled",60420),map:_("map",60421),mapFilled:_("map-filled",60422),circleSmall:_("circle-small",60423),bellSlash:_("bell-slash",60424),bellSlashDot:_("bell-slash-dot",60425),commentUnresolved:_("comment-unresolved",60426),gitPullRequestGoToChanges:_("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:_("git-pull-request-new-changes",60428),searchFuzzy:_("search-fuzzy",60429),commentDraft:_("comment-draft",60430),send:_("send",60431),sparkle:_("sparkle",60432),insert:_("insert",60433),mic:_("mic",60434),thumbsDownFilled:_("thumbsdown-filled",60435),thumbsUpFilled:_("thumbsup-filled",60436),coffee:_("coffee",60437),snake:_("snake",60438),game:_("game",60439),vr:_("vr",60440),chip:_("chip",60441),piano:_("piano",60442),music:_("music",60443),micFilled:_("mic-filled",60444),gitFetch:_("git-fetch",60445),copilot:_("copilot",60446),lightbulbSparkle:_("lightbulb-sparkle",60447),lightbulbSparkleAutofix:_("lightbulb-sparkle-autofix",60447),robot:_("robot",60448),sparkleFilled:_("sparkle-filled",60449),diffSingle:_("diff-single",60450),diffMultiple:_("diff-multiple",60451),surroundWith:_("surround-with",60452),gitStash:_("git-stash",60454),gitStashApply:_("git-stash-apply",60455),gitStashPop:_("git-stash-pop",60456),dialogError:_("dialog-error","error"),dialogWarning:_("dialog-warning","warning"),dialogInfo:_("dialog-info","info"),dialogClose:_("dialog-close","close"),treeItemExpanded:_("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:_("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:_("tree-filter-on-type-off","list-selection"),treeFilterClear:_("tree-filter-clear","close"),treeItemLoading:_("tree-item-loading","loading"),menuSelection:_("menu-selection","check"),menuSubmenu:_("menu-submenu","chevron-right"),menuBarMore:_("menubar-more","more"),scrollbarButtonLeft:_("scrollbar-button-left","triangle-left"),scrollbarButtonRight:_("scrollbar-button-right","triangle-right"),scrollbarButtonUp:_("scrollbar-button-up","triangle-up"),scrollbarButtonDown:_("scrollbar-button-down","triangle-down"),toolBarMore:_("toolbar-more","more"),quickInputBack:_("quick-input-back","arrow-left")};var Tb=class{constructor(e){this.accessor=e}async findEnclosingBlocks(e,r){let n=this.accessor.get(Fr).getTreeSitterAST(e);if(n===void 0)return;let i=na(r,e);return(await n.getFineScopes(i))?.map(s=>{let a=cc(e,s);return{kind:"code",name:e.lineAt(a.start).text.trim(),range:a}})}findEnclosingSymbols(e,r){for(let n of e)if(n.range.contains(r)){let i=this.findEnclosingSymbols(n.children,r);return i?[n,...i]:[n]}}async selectEnclosingScope(e,r){let n=await this.accessor.get(oo).getDocumentSymbols(e.document.uri);if(!n||n.length>0&&!n[0].hasOwnProperty("children"))return;let i=e.selection;if(!i.isEmpty)return;let o=this.findEnclosingSymbols(n,e.selection.active);if(r?.includeBlocks&&o?.push(...await this.findEnclosingBlocks(e.document,e.selection)??[]),o||(o=n),o?.length===1){let s=o[0];e.selection=new XS.Selection(s.range.start,s.range.end)}else if(o&&o.length>1||!o&&n.length>1){let s=o.sort((c,u)=>u.range.start.line-c.range.start.line).map(c=>({label:`$(${c.kind==="code"?"code":Dte.toIcon(c.kind).id}) ${c.name}`,description:`:${c.range.start.line+1}-${c.range.end.line+1}`,symbol:c}));if(!await this.accessor.get(zR).showQuickPick(s,{placeHolder:r?.reason??XS.l10n.t("Select an enclosing range"),onDidSelectItem(c){let u=c.symbol;u&&(e.selection=new XS.Selection(u.range.start,u.range.end),e.revealRange(u.range))}}))throw e.selection=i,new Zs}return e.selection}};Tb=ze([rt(0,Yt)],Tb);var Dte;(r=>{let t=new Map;t.set(0,Ar.symbolFile),t.set(1,Ar.symbolModule),t.set(2,Ar.symbolNamespace),t.set(3,Ar.symbolPackage),t.set(4,Ar.symbolClass),t.set(5,Ar.symbolMethod),t.set(6,Ar.symbolProperty),t.set(7,Ar.symbolField),t.set(8,Ar.symbolConstructor),t.set(9,Ar.symbolEnum),t.set(10,Ar.symbolInterface),t.set(11,Ar.symbolFunction),t.set(12,Ar.symbolVariable),t.set(13,Ar.symbolConstant),t.set(14,Ar.symbolString),t.set(15,Ar.symbolNumber),t.set(16,Ar.symbolBoolean),t.set(17,Ar.symbolArray),t.set(18,Ar.symbolObject),t.set(19,Ar.symbolKey),t.set(20,Ar.symbolNull),t.set(21,Ar.symbolEnumMember),t.set(22,Ar.symbolStruct),t.set(23,Ar.symbolEvent),t.set(24,Ar.symbolOperator),t.set(25,Ar.symbolTypeParameter);function e(n){let i=t.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=Ar.symbolProperty),i}r.toIcon=e})(Dte||={});var uc=re("ISearchService"),wA=class{async findFilesWithDefaultExcludes(e,r,n){return this._findFilesWithDefaultExcludesAndExcludes(e,void 0,r,n)}async _findFilesWithDefaultExcludesAndExcludes(e,r,n,i){let o={maxResults:n,exclude:r,useDefaultExcludes:!0,useDefaultSearchExcludes:!0},s=await this.findFiles(e,o,i);return n===1?s[0]:s}};async function Uke(t,e,r){let n=new Nf;try{t.debug(`${e} started`);let i=await r();return t.debug(`${e} finished. Elapsed ${n.elapsed()}`),i}catch(i){throw t.debug(`${e} failed. Elapsed ${n.elapsed()}`),i}}function so(t){return function(e,r,n){let i=n.value,o=0;return n.value=async function(...s){let a=o++,c=t(this);return Uke(c,`${r}#${a}`,()=>i.apply(this,s))},n}}var $9=fe(require("vscode"));var Cb=class extends wA{findTextInFiles(e,r,n,i){return Promise.resolve($9.workspace.findTextInFiles(e,r,o=>n.report(o),i))}findFiles(e,r,n){return $9.workspace.findFiles2(e,r,n)}};var i0=class extends Cb{constructor(r,n){super();this._ignoreService=r;this._logger=n.getLogger("SearchService")}async findFilesWithDefaultExcludes(r,n,i){let o=await this._ignoreService.asMinimatchPattern();return this._findFilesWithDefaultExcludesAndExcludes(r,o,n,i)}async findFiles(r,n,i){let o=await this._ignoreService.asMinimatchPattern();return n?.exclude||(n={...n,exclude:o}),await super.findFiles(r,n,i)}async findTextInFiles(r,n,i,o){return super.findTextInFiles(r,n,i,o)}};ze([so(r=>r._logger)],i0.prototype,"findFiles",1),i0=ze([rt(0,st),rt(1,pe)],i0);var It=re("ITabsAndEditorsService");var Do=fe(require("vscode"));var RA=class{constructor(){this._store=new Vt;this._tabGroupsUseInfo=new Map;this._tabClock=0;this.onDidChangeActiveTextEditor=Do.window.onDidChangeActiveTextEditor;this.onDidChangeTabs=Do.window.tabGroups.onDidChangeTabs;this._store.add(Do.window.tabGroups.onDidChangeTabGroups(e=>{e.closed.forEach(r=>this._tabGroupsUseInfo.delete(r)),this._tabGroupsUseInfo.set(Do.window.tabGroups.activeTabGroup,this._tabClock++)}))}dispose(){this._store.dispose()}get activeTextEditor(){let e=Do.window.activeTextEditor;if(e&&e.document.uri.scheme!=="output")return e;let r=new mn;Do.window.visibleTextEditors.forEach(i=>r.set(i.document.uri,i));let n=[...this._tabGroupsUseInfo];n.sort((i,o)=>o[1]-i[1]);for(let[i]of n)if(i.activeTab){let o=this._asTabInfo(i.activeTab);if(o.uri&&r.has(o.uri))return r.get(o.uri)}}get activeNotebookEditor(){return Do.window.activeNotebookEditor}get tabs(){return Do.window.tabGroups.all.flatMap(e=>e.tabs).map(this._asTabInfo,this)}_asTabInfo(e){let r;return e.input instanceof Do.TabInputText||e.input instanceof Do.TabInputNotebook?r=e.input.uri:(e.input instanceof Do.TabInputTextDiff||e.input instanceof Do.TabInputNotebookDiff)&&(r=e.input.modified),{tab:e,uri:r}}};var Ur=re("IExperimentationService"),AA=class{constructor(){this.initializePromise=Promise.resolve();this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};var PA=class{dispose(){}sendInternalMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryErrorEvent(e,r,n){}sendGHTelemetryEvent(e,r,n){}sendGHTelemetryErrorEvent(e,r,n){}sendGHTelemetryException(e,r){}sendTelemetryEvent(e,r,n,i){}sendTelemetryErrorEvent(e,r,n,i){}setSharedProperty(e,r){}postEvent(e,r){}sendRestrictedGHTelemetryEvent(e,r,n){}sendRestrictedGHTelemetryErrorEvent(e,r,n){}};var qhe=fe(Bhe()),qD=fe(require("os"));var Im=class{constructor(e,r,n){this.namespace=r;this.client=CHe(e,n),Hhe(e,this.client)}separateData(e){if(e.properties!==void 0||e.measurements!==void 0)return e.properties=e.properties||{},e.measurements=e.measurements||{},e;let r={},n={};for(let[i,o]of Object.entries(e))typeof o=="number"?n[i]=o:r[i]=o;return{properties:r,measurements:n}}sendEventData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackEvent({name:this.qualifyEventName(e),properties:n,measurements:i})}sendErrorData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackException({exception:e,properties:n,measurements:i})}flush(){return new Promise(e=>{this.client.flush({callback:()=>{e(void 0)}})})}qualifyEventName(e){return e.includes(this.namespace)?e:`${this.namespace}/${e}`}};function CHe(t,e){let r=new qhe.TelemetryClient(e);return r.config.enableAutoCollectRequests=!1,r.config.enableAutoCollectPerformance=!1,r.config.enableAutoCollectExceptions=!1,r.config.enableAutoCollectConsole=!1,r.config.enableAutoCollectDependencies=!1,r.config.noDiagnosticChannel=!0,Hhe(t,r),r}function Hhe(t,e){e.commonProperties=IHe(e.commonProperties,t),e.context.tags[e.context.keys.cloudRoleInstance]="REDACTED",e.config.endpointUrl=t.get(DR).getUrl()}function IHe(t,e){t=t||{},t.common_os=qD.platform(),t.common_platformversion=qD.release();let r=e.get(ft);return t.common_vscodemachineid=r.machineId,t.common_vscodesessionid=r.sessionId,t.common_uikind="desktop",t.common_remotename="none",t.common_isnewappinstall="",t}var WH="7d7048df-6dd0-4048-bb23-b716c1461f8f",YH="3fdd7f28-937a-48c8-9a21-ba337db23bd1";async function KH(t,e,r){let n=t.get(Gf);if(await n.deactivate(),!r)return;let i=new Im(t,e,WH),o=new Im(t,e,YH);return n.setReporter(i),n.setSecureReporter(o),{dispose(){n.setReporter(void 0),n.setSecureReporter(void 0),i.flush(),o.flush()}}}var wC=fe(ige());function WHe(t){return t?wC.TargetPopulation.Insiders:wC.TargetPopulation.Public}async function oge(t,e,r){let n=t.extension.id,i=t.extension.packageJSON.version,o=WHe(r);return(0,wC.getExperimentationService)(n,i,o,e,t.globalState)}var RC=require("vscode");function JD(t){return t.replace(/([\s|(]|file:\/\/)(\/[^\s]+)/g,"$1[redacted]").replace(/([\s|(]|file:\/\/)([a-zA-Z]:[(\\|/){1,2}][^\s]+)/gi,"$1[redacted]").replace(/([\s|(]|file:\/\/)(\\[^\s]+)/gi,"$1[redacted]")}var ZD=class{constructor(e,r,n,i,o){this._accessor=e;this._restrictedTelemetryEnabled=!1;this._disposables=[];this._nonRestrictedTelemetryLogger=RC.env.createTelemetryLogger(new Im(this._accessor,r,n)),this._disposables.push(o.onCopilotToken(s=>{s.token.getTokenValue("rt")==="1"?(this._restrictedTelemetryEnabled=!0,this._restrictedTelemetryLogger=RC.env.createTelemetryLogger(new Im(this._accessor,r,i))):(this._restrictedTelemetryEnabled=!1,this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose(),this._restrictedTelemetryLogger=void 0)}))}sendTelemetryEvent(e,r,n){this._nonRestrictedTelemetryLogger.logUsage(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendTelemetryErrorEvent(e,r,n){this._nonRestrictedTelemetryLogger.logError(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendRestrictedTelemetryEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logUsage(e,this.markAsIssuedAndMakeReadyForSending(r,n))}sendRestrictedTelemetryErrorEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logError(e,this.markAsIssuedAndMakeReadyForSending(r,n))}async sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=gr.createAndMarkAsIssued({origin:JD(r),reason:this._restrictedTelemetryEnabled?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await i.makeReadyForSending(this._accessor),this.sendTelemetryEvent("exception",i.properties,i.measurements),!this._restrictedTelemetryEnabled||!this._restrictedTelemetryLogger)return;let o=gr.createAndMarkAsIssued({origin:r});await o.makeReadyForSending(this._accessor),this._restrictedTelemetryLogger.logError(n,o)}markAsIssuedAndMakeReadyForSending(e,r){let n=gr.createAndMarkAsIssued(vee(e),r);n.makeReadyForSending(this._accessor);let i={};for(let o in n.properties)i[o]=new RC.TelemetryTrustedValue(n.properties[o]);return{properties:i,measurements:n.measurements}}dispose(){this._nonRestrictedTelemetryLogger.dispose(),this._disposables.forEach(e=>e.dispose()),this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose()}};var s$=fe(z_e());var c3=class{constructor(e,r,n,i){this._isInternal=!1;i.onCopilotToken(async o=>{if(this._username=(await ac(e))?.account?.label,this._sku=o.token.getTokenValue("sku"),this._isInternal=o.token.isInternal,!o.token.organization_list||!o.envelope.chat_enabled){this._internalTelemetryReporter=void 0;return}o.token.isInternal&&(this._internalTelemetryReporter=new s$.default(r))}),this._externalTelemetryReporter=new s$.default(n)}dispose(){this._externalTelemetryReporter.dispose(),this._internalTelemetryReporter?.dispose()}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this._isInternal&&this.sendInternalTelemetryEvent(e,n),this.sendTelemetryEvent(e,n)}sendInternalTelemetryEvent(e,r,n){this._internalTelemetryReporter&&(r={...r,"common.userName":this._username??"undefined"},this._internalTelemetryReporter.sendRawTelemetryEvent(e,r,n))}sendTelemetryEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryEvent(e,r,n)}sendTelemetryErrorEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryErrorEvent(e,r,n)}};var u3=class{constructor(e,r,n,i,o,s){this._sharedProperties={};this._disposables=[];let a=r.get(Re),c=r.get(rs);this._disposables.push(c.onCopilotToken(u=>{this.sendMSFTTelemetryEvent("token",void 0,{chatEnabled:u.envelope.chat_enabled?1:0,snippyEnabled:u.envelope.public_suggestions==="enabled"?1:0,telemetryEnabled:u.envelope.telemetry==="enabled"?1:0})})),this._microsoftTelemetryService=new c3(a,n,i,c),this._ghTelemetryService=new ZD(r,e,o,s,c),this._disposables.push(this._microsoftTelemetryService,this._ghTelemetryService)}dispose(){this._disposables.forEach(e=>e.dispose())}sendMSFTTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!1,microsoft:!0},r,n)}sendMSFTTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!1,microsoft:!0},r,n)}sendGHTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryException(e,r){this._ghTelemetryService.sendExceptionTelemetry(e,r)}sendRestrictedGHTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryEvent(e,r,n)}sendRestrictedGHTelemetryErrorEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryErrorEvent(e,r,n)}sendInternalMSFTTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._microsoftTelemetryService.sendInternalTelemetryEvent(e,r,n)}sendTelemetryEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryEvent(e,n,i)}sendTelemetryErrorEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryErrorEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryErrorEvent(e,n,i)}setSharedProperty(e,r){this._sharedProperties[e]=r}postEvent(e,r){for(let[n,i]of Object.entries(this._sharedProperties))r.set(n,i);this._microsoftTelemetryService.postEvent(e,r)}};var ho=re("ITerminalService");var W_e=require("path"),Y_e=require("process"),Mh=require("vscode"),l3=new Map,c$=new Map;function K_e(){let t=Mh.window.activeTerminal;return t===void 0?"":l3.get(t)?.join(`
`)||""}function Q_e(){let t=Mh.window.activeTerminal;if(t!==void 0)return c$.get(t)?.at(-1)}function X_e(){try{return Mh.window.activeTerminal?.selection??""}catch{return""}}var a$;function J_e(){let t=Mh.window.activeTerminal;if(t&&"shellPath"in t.creationOptions){let e=t.creationOptions.shellPath;if(e){let r,n=(0,W_e.basename)(e);if(n==="bash.exe")r="Git Bash";else{let i=n.replace(/\..+/,"");switch(i){case"pwsh":case"powershell":r="powershell";case"":break;default:r=i}}if(r)return a$=r,r}}return a$||(Y_e.platform==="win32"?"powershell":"bash")}function $_e(t,e){t.push(e),t.length>40&&t.shift()}function KVe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function Z_e(){return[Mh.window.onDidWriteTerminalData(t=>{let e=l3.get(t.terminal);e||(e=[],l3.set(t.terminal,e)),$_e(e,KVe(t.data))}),Mh.window.onDidExecuteTerminalCommand(t=>{let e=c$.get(t.terminal);e||(e=[],c$.set(t.terminal,e)),$_e(e,t)}),Mh.window.onDidCloseTerminal(t=>{l3.delete(t)})]}var d3=class extends Jr{constructor(){super();for(let e of Z_e())this._register(e)}get terminalBuffer(){return K_e()}get terminalLastCommand(){return Q_e()}get terminalSelection(){return X_e()}get terminalShellType(){return J_e()}};var Zv=re("ITestProvider");var js=fe(require("vscode"));function exe(t){if(!t()){debugger;t(),zy(new Ro("Assertion Failed"))}}var QVe;function Fh(){return QVe}var XVe;var JVe;var ZVe;var u$=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return ZVe({owner:n,debugName:()=>{let o=ow(i);if(o!==void 0)return o;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`}},o=>i(this.read(o),o))}recomputeInitiallyAndOnChange(e,r){return e.add(XVe(this,r)),this}keepObserved(e){return e.add(JVe(this)),this}},l$=class extends u${constructor(){super(...arguments);this.observers=new Set}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded()}removeObserver(r){this.observers.delete(r)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};var d$=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Fh()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():ow(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,Fh()?.handleEndTransaction()}},txe=new Map,p$=new WeakMap;function eze(t,e,r,n){let i=p$.get(t);if(i)return i;let o=tze(t,e,r,n);if(o){let s=txe.get(o)??0;s++,txe.set(o,s);let a=s===1?o:`${o}#${s}`;return p$.set(t,a),a}}function tze(t,e,r,n){let i=p$.get(t);if(i)return i;let o=n?rze(n)+".":"",s;if(e!==void 0)if(typeof e=="function"){if(s=e(),s!==void 0)return o+s}else return o+e;if(r!==void 0&&(s=ow(r),s!==void 0))return o+s;if(n!==void 0){for(let a in n)if(n[a]===t)return o+a}}var rxe=new Map,nxe=new WeakMap;function rze(t){let e=nxe.get(t);if(e)return e;let r=nze(t),n=rxe.get(r)??0;n++,rxe.set(r,n);let i=n===1?r:`${r}#${n}`;return nxe.set(t,i),i}function nze(t){let e=t.constructor;return e?e.name:"Object"}function ow(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}function ixe(t,e){return typeof t=="string"?new p3(void 0,t,e):new p3(t,void 0,e)}var p3=class extends l${constructor(r,n,i){super();this._owner=r;this._debugName=n;this._value=i}get debugName(){return eze(this,this._debugName,void 0,this._owner)??"ObservableValue"}get(){return this._value}set(r,n,i){if(this._value===r)return;let o;n||(n=o=new d$(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(r),Fh()?.handleObservableChanged(this,{oldValue:s,newValue:r,change:i,didChange:!0,hadValue:!0});for(let a of this.observers)n.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};function m3(t){return new f3(void 0,t,void 0,void 0)}var f3=class{constructor(e,r,n,i){this._debugName=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=this.createChangeSummary?.(),Fh()?.handleAutorunCreated(this),this._runIfNeeded(),Yy(this)}get debugName(){if(typeof this._debugName=="string")return this._debugName;if(typeof this._debugName=="function"){let r=this._debugName();if(r!==void 0)return r}let e=ow(this._runFn);return e!==void 0?e:"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ky(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let r=this.disposed;try{if(!r){Fh()?.handleAutorunTriggered(this);let n=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}}finally{r||Fh()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,exe(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,r){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:r,didChange:i=>i===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=f3)(m3||={});var h3=class extends Jr{constructor(){super();this.resultsDocs=new mn;this.isEnabled=ixe("TestProvider.isEnabled",this.getIsEnabled());this._register(js.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("github.copilot.chat.fixTestFailures")&&this.isEnabled.set(this.getIsEnabled(),void 0)})),this._register(m3(r=>{js.commands.executeCommand("setContext","github.copilot.chat.fixTestFailures.enabled",this.isEnabled.read(r))}))}getAllFailures(){let r=js.tests.testResults[0];return r?this.dfsFailures(r.results):ES.empty()}getFailureAtPosition(r,n){let i=js.tests.testResults[0];if(this.resultsDocsAreForTestRun!==i&&this.makeResultsDocs(i),!i)return;let o=this.resultsDocs.get(r)||[],s=bZ(o,a=>!a.range?.start.isAfter(n));if(s){for(let a of s.taskStates)if(a.state===js.TestResultState.Failed||a.state===js.TestResultState.Errored)return{snapshot:s,task:a}}}getIsEnabled(){return js.workspace.getConfiguration("github.copilot.chat").get("fixTestFailures",!1)}*dfsFailures(r){for(let n of r){yield*this.dfsFailures(n.children);for(let i of n.taskStates)(i.state===js.TestResultState.Failed||i.state===js.TestResultState.Errored)&&(yield{snapshot:n,task:i})}}makeResultsDocs(r){if(this.resultsDocs.clear(),this.resultsDocsAreForTestRun=r,!r)return;let n=[r.results];for(;n.length;)for(let o of n.pop()){if(n.push(o.children),!o.uri)continue;let s=this.resultsDocs.get(o.uri);s?s.push(o):this.resultsDocs.set(o.uri,[o])}let i=new js.Range(0,0,0,0);for(let o of this.resultsDocs.values())o.sort((s,a)=>(s.range||i).start.compareTo((a.range||i).start)||ize(s.taskStates,a.taskStates))}},ize=(t,e)=>{let r=0,n=0;for(let i of t)r=Math.max(r,i.state);for(let i of e)n=Math.max(n,i.state);return r-n};var it=re("IWorkspaceService"),g3=class{getWorkspaceFolder(e){return this.getWorkspaceFolders().find(r=>r.scheme===e.scheme&&r.authority===e.authority&&e.fsPath.startsWith(r.fsPath))}};function Uh(t,e){let r=t.getWorkspaceFolder(e);return r?mr.relative(r.path,e.path):e.path}var Bh=require("vscode");function oxe(t){return t.scheme==="vscode-vfs"&&t.authority.startsWith("github")}var b1=class extends g3{constructor(r){super();this._accessor=r;this.onDidOpenTextDocument=Bh.workspace.onDidOpenTextDocument;this.onDidChangeTextDocument=Bh.workspace.onDidChangeTextDocument;this.onDidCloseTextDocument=Bh.workspace.onDidCloseTextDocument;this._logger=this._accessor.get(pe).getLogger("ExtensionTextDocumentManager")}get textDocuments(){return Bh.workspace.textDocuments}async openTextDocument(r){return await Bh.workspace.openTextDocument(r)}get notebookDocuments(){return Bh.workspace.notebookDocuments}getWorkspaceFolders(){return Bh.workspace.workspaceFolders?.map(r=>r.uri)??[]}ensureWorkspaceIsFullyLoaded(){return this._fullyLoadedPromise??=(async()=>{let r=this._accessor.get(IA);for(let n of this.getWorkspaceFolders())if(oxe(n)){this._logger.debug(`Preloading virtual workspace contents for ${n}`);try{let i=await r.loadWorkspaceContents(n);this._logger.info(`loading virtual workspace contents resulted in ${i} for: ${n}`)}catch(i){this._logger.error(`Error loading virtual workspace contents for ${n}: ${i}`)}}})(),this._fullyLoadedPromise}};b1=ze([rt(0,Yt)],b1);var x$={};$r(x$,{arrayReplaceAt:()=>_$,assign:()=>E1,escapeHtml:()=>af,escapeRE:()=>Hze,fromCodePoint:()=>cw,has:()=>Pze,isMdAsciiPunct:()=>ry,isPunctChar:()=>ty,isSpace:()=>Qt,isString:()=>w3,isValidEntityCode:()=>R3,isWhiteSpace:()=>ey,lib:()=>jze,normalizeReference:()=>ny,unescapeAll:()=>jh,unescapeMd:()=>Oze});var x3={};$r(x3,{decode:()=>sw,encode:()=>b3,format:()=>_1,parse:()=>aw});var sxe={};function oze(t){let e=sxe[t];if(e)return e;e=sxe[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);e.push(n)}for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function v3(t,e){typeof e!="string"&&(e=v3.defaultChars);let r=oze(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(n){let i="";for(let o=0,s=n.length;o<s;o+=3){let a=parseInt(n.slice(o+1,o+3),16);if(a<128){i+=r[a];continue}if((a&224)===192&&o+3<s){let c=parseInt(n.slice(o+4,o+6),16);if((c&192)===128){let u=a<<6&1984|c&63;u<128?i+="\uFFFD\uFFFD":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){let c=parseInt(n.slice(o+4,o+6),16),u=parseInt(n.slice(o+7,o+9),16);if((c&192)===128&&(u&192)===128){let l=a<<12&61440|c<<6&4032|u&63;l<2048||l>=55296&&l<=57343?i+="\uFFFD\uFFFD\uFFFD":i+=String.fromCharCode(l),o+=6;continue}}if((a&248)===240&&o+9<s){let c=parseInt(n.slice(o+4,o+6),16),u=parseInt(n.slice(o+7,o+9),16),l=parseInt(n.slice(o+10,o+12),16);if((c&192)===128&&(u&192)===128&&(l&192)===128){let d=a<<18&1835008|c<<12&258048|u<<6&4032|l&63;d<65536||d>1114111?i+="\uFFFD\uFFFD\uFFFD\uFFFD":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),o+=9;continue}}i+="\uFFFD"}return i})}v3.defaultChars=";/?:@&=+$,#";v3.componentChars="";var sw=v3;var axe={};function sze(t){let e=axe[t];if(e)return e;e=axe[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<t.length;r++)e[t.charCodeAt(r)]=t[r];return e}function y3(t,e,r){typeof e!="string"&&(r=e,e=y3.defaultChars),typeof r>"u"&&(r=!0);let n=sze(e),i="";for(let o=0,s=t.length;o<s;o++){let a=t.charCodeAt(o);if(r&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3))){i+=t.slice(o,o+3),o+=2;continue}if(a<128){i+=n[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){let c=t.charCodeAt(o+1);if(c>=56320&&c<=57343){i+=encodeURIComponent(t[o]+t[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[o])}return i}y3.defaultChars=";/?:@&=+$,-_.!~*'()#";y3.componentChars="-_.!~*'()";var b3=y3;function _1(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function _3(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var aze=/^([a-z0-9.+-]+:)/i,cze=/:[0-9]*$/,uze=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,lze=["<",">",'"',"`"," ","\r",`
`,"	"],dze=["{","}","|","\\","^","`"].concat(lze),pze=["'"].concat(dze),cxe=["%","/","?",";","#"].concat(pze),uxe=["/","?","#"],fze=255,lxe=/^[+a-z0-9A-Z_-]{0,63}$/,mze=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,dxe={javascript:!0,"javascript:":!0},pxe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function hze(t,e){if(t&&t instanceof _3)return t;let r=new _3;return r.parse(t,e),r}_3.prototype.parse=function(t,e){let r,n,i,o=t;if(o=o.trim(),!e&&t.split("#").length===1){let u=uze.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=aze.exec(o);if(s&&(s=s[0],r=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&dxe[s])&&(o=o.substr(2),this.slashes=!0)),!dxe[s]&&(i||s&&!pxe[s])){let u=-1;for(let m=0;m<uxe.length;m++)n=o.indexOf(uxe[m]),n!==-1&&(u===-1||n<u)&&(u=n);let l,d;u===-1?d=o.lastIndexOf("@"):d=o.lastIndexOf("@",u),d!==-1&&(l=o.slice(0,d),o=o.slice(d+1),this.auth=l),u=-1;for(let m=0;m<cxe.length;m++)n=o.indexOf(cxe[m]),n!==-1&&(u===-1||n<u)&&(u=n);u===-1&&(u=o.length),o[u-1]===":"&&u--;let p=o.slice(0,u);o=o.slice(u),this.parseHost(p),this.hostname=this.hostname||"";let f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){let m=this.hostname.split(/\./);for(let h=0,g=m.length;h<g;h++){let v=m[h];if(v&&!v.match(lxe)){let b="";for(let y=0,E=v.length;y<E;y++)v.charCodeAt(y)>127?b+="x":b+=v[y];if(!b.match(lxe)){let y=m.slice(0,h),E=m.slice(h+1),x=v.match(mze);x&&(y.push(x[1]),E.unshift(x[2])),E.length&&(o=E.join(".")+o),this.hostname=y.join(".");break}}}}this.hostname.length>fze&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));let c=o.indexOf("?");return c!==-1&&(this.search=o.substr(c),o=o.slice(0,c)),o&&(this.pathname=o),pxe[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};_3.prototype.parseHost=function(t){let e=cze.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var aw=hze;var f$={};$r(f$,{Any:()=>E3,Cc:()=>S3,Cf:()=>fxe,P:()=>x1,Z:()=>T3});var E3=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;var S3=/[\0-\x1F\x7F-\x9F]/;var fxe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/;var x1=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/;var T3=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;var mxe=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(t=>t.charCodeAt(0)));var hxe=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(t=>t.charCodeAt(0)));var m$,gze=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),h$=(m$=String.fromCodePoint)!==null&&m$!==void 0?m$:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function g$(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=gze.get(t))!==null&&e!==void 0?e:t}var vo;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(vo||(vo={}));var vze=32,qh;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(qh||(qh={}));function v$(t){return t>=vo.ZERO&&t<=vo.NINE}function yze(t){return t>=vo.UPPER_A&&t<=vo.UPPER_F||t>=vo.LOWER_A&&t<=vo.LOWER_F}function bze(t){return t>=vo.UPPER_A&&t<=vo.UPPER_Z||t>=vo.LOWER_A&&t<=vo.LOWER_Z||v$(t)}function _ze(t){return t===vo.EQUALS||bze(t)}var go;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(go||(go={}));var ld;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(ld||(ld={}));var C3=class{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=go.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ld.Strict}startEntity(e){this.decodeMode=e,this.state=go.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case go.EntityStart:return e.charCodeAt(r)===vo.NUM?(this.state=go.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=go.NamedEntity,this.stateNamedEntity(e,r));case go.NumericStart:return this.stateNumericStart(e,r);case go.NumericDecimal:return this.stateNumericDecimal(e,r);case go.NumericHex:return this.stateNumericHex(e,r);case go.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|vze)===vo.LOWER_X?(this.state=go.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=go.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,i){if(r!==n){let o=n-r;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(r,o),i),this.consumed+=o}}stateNumericHex(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(v$(i)||yze(i))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(v$(i))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===vo.SEMI)this.consumed+=1;else if(this.decodeMode===ld.Strict)return 0;return this.emitCodePoint(g$(this.result),this.consumed),this.errors&&(e!==vo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){let{decodeTree:n}=this,i=n[this.treeIndex],o=(i&qh.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){let s=e.charCodeAt(r);if(this.treeIndex=xze(n,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===ld.Attribute&&(o===0||_ze(s))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],o=(i&qh.VALUE_LENGTH)>>14,o!==0){if(s===vo.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==ld.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;let{result:r,decodeTree:n}=this,i=(n[r]&qh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){let{decodeTree:i}=this;return this.emitCodePoint(r===1?i[e]&~qh.VALUE_LENGTH:i[e+1],n),r===3&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case go.NamedEntity:return this.result!==0&&(this.decodeMode!==ld.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case go.NumericDecimal:return this.emitNumericEntity(0,2);case go.NumericHex:return this.emitNumericEntity(0,3);case go.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case go.EntityStart:return 0}}};function gxe(t){let e="",r=new C3(t,n=>e+=h$(n));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),r.startEntity(o);let u=r.write(i,a+1);if(u<0){s=a+r.end();break}s=a+u,a=u===0?s+1:s}let c=e+i.slice(s);return e="",c}}function xze(t,e,r,n){let i=(e&qh.BRANCH_LENGTH)>>7,o=e&qh.JUMP_TABLE;if(i===0)return o!==0&&n===o?r:-1;if(o){let c=n-o;return c<0||c>=i?-1:t[r+c]-1}let s=r,a=s+i-1;for(;s<=a;){let c=s+a>>>1,u=t[c];if(u<n)s=c+1;else if(u>n)a=c-1;else return t[c+i]}return-1}var Eze=gxe(mxe),jMt=gxe(hxe);function Hh(t,e=ld.Legacy){return Eze(t,e)}function I3(t){for(let e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}var Sze=new Map(I3([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(I3([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(I3([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(I3([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var Tze=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),Cze=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function y$(t,e){return function(n){let i,o=0,s="";for(;i=t.exec(n);)o!==i.index&&(s+=n.substring(o,i.index)),s+=e.get(i[0].charCodeAt(0)),o=i.index+1;return s+n.substring(o)}}var vxe=y$(/[&<>'"]/g,Tze),yxe=y$(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),bxe=y$(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var _xe;(function(t){t[t.XML=0]="XML",t[t.HTML=1]="HTML"})(_xe||(_xe={}));var xxe;(function(t){t[t.UTF8=0]="UTF8",t[t.ASCII=1]="ASCII",t[t.Extensive=2]="Extensive",t[t.Attribute=3]="Attribute",t[t.Text=4]="Text"})(xxe||(xxe={}));function Rze(t){return Object.prototype.toString.call(t)}function w3(t){return Rze(t)==="[object String]"}var Aze=Object.prototype.hasOwnProperty;function Pze(t,e){return Aze.call(t,e)}function E1(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function _$(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function R3(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function cw(t){if(t>65535){t-=65536;let e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var Txe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,kze=/&([a-z#][a-z0-9]{1,31});/gi,Dze=new RegExp(Txe.source+"|"+kze.source,"gi"),Nze=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Lze(t,e){if(e.charCodeAt(0)===35&&Nze.test(e)){let n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return R3(n)?cw(n):t}let r=Hh(t);return r!==t?r:t}function Oze(t){return t.indexOf("\\")<0?t:t.replace(Txe,"$1")}function jh(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Dze,function(e,r,n){return r||Lze(e,n)})}var Mze=/[&<>"]/,Fze=/[&<>"]/g,Uze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Bze(t){return Uze[t]}function af(t){return Mze.test(t)?t.replace(Fze,Bze):t}var qze=/[.?*+^$[\]\\(){}|-]/g;function Hze(t){return t.replace(qze,"\\$&")}function Qt(t){switch(t){case 9:case 32:return!0}return!1}function ey(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ty(t){return x1.test(t)}function ry(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function ny(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(//g,"\xDF")),t.toLowerCase().toUpperCase()}var jze={mdurl:x3,ucmicro:f$};var C$={};$r(C$,{parseLinkDestination:()=>S$,parseLinkLabel:()=>E$,parseLinkTitle:()=>T$});function E$(t,e,r){let n,i,o,s,a=t.posMax,c=t.pos;for(t.pos=e+1,n=1;t.pos<a;){if(o=t.src.charCodeAt(t.pos),o===93&&(n--,n===0)){i=!0;break}if(s=t.pos,t.md.inline.skipToken(t),o===91){if(s===t.pos-1)n++;else if(r)return t.pos=c,-1}}let u=-1;return i&&(u=t.pos),t.pos=c,u}function S$(t,e,r){let n,i=e,o={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<r;){if(n=t.charCodeAt(i),n===10||n===60)return o;if(n===62)return o.pos=i+1,o.str=jh(t.slice(e+1,i)),o.ok=!0,o;if(n===92&&i+1<r){i+=2;continue}i++}return o}let s=0;for(;i<r&&(n=t.charCodeAt(i),!(n===32||n<32||n===127));){if(n===92&&i+1<r){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(n===40&&(s++,s>32))return o;if(n===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=jh(t.slice(e,i)),o.pos=i,o.ok=!0),o}function T$(t,e,r){let n,i,o=0,s=e,a={ok:!1,pos:0,lines:0,str:""};if(s>=r||(i=t.charCodeAt(s),i!==34&&i!==39&&i!==40))return a;for(s++,i===40&&(i=41);s<r;){if(n=t.charCodeAt(s),n===i)return a.pos=s+1,a.lines=o,a.str=jh(t.slice(e+1,s)),a.ok=!0,a;if(n===40&&i===41)return a;n===10?o++:n===92&&s+1<r&&(s++,t.charCodeAt(s)===10&&o++),s++}return a}var dd={};dd.code_inline=function(t,e,r,n,i){let o=t[e];return"<code"+i.renderAttrs(o)+">"+af(o.content)+"</code>"};dd.code_block=function(t,e,r,n,i){let o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+af(t[e].content)+`</code></pre>
`};dd.fence=function(t,e,r,n,i){let o=t[e],s=o.info?jh(o.info).trim():"",a="",c="";if(s){let l=s.split(/(\s+)/g);a=l[0],c=l.slice(2).join("")}let u;if(r.highlight?u=r.highlight(o.content,a,c)||af(o.content):u=af(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){let l=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[];l<0?d.push(["class",r.langPrefix+a]):(d[l]=d[l].slice(),d[l][1]+=" "+r.langPrefix+a);let p={attrs:d};return`<pre><code${i.renderAttrs(p)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};dd.image=function(t,e,r,n,i){let o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};dd.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};dd.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};dd.text=function(t,e){return af(t[e].content)};dd.html_block=function(t,e){return t[e].content};dd.html_inline=function(t,e){return t[e].content};function S1(){this.rules=E1({},dd)}S1.prototype.renderAttrs=function(e){let r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+af(e.attrs[r][0])+'="'+af(e.attrs[r][1])+'"';return i};S1.prototype.renderToken=function(e,r,n){let i=e[r],o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&n.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&r+1<e.length)){let a=e[r+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};S1.prototype.renderInline=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e)}return n};S1.prototype.renderInlineAsText=function(t,e,r){let n="";for(let i=0,o=t.length;i<o;i++)switch(t[i].type){case"text":n+=t[i].content;break;case"image":n+=this.renderInlineAsText(t[i].children,e,r);break;case"html_inline":case"html_block":n+=t[i].content;break;case"softbreak":case"hardbreak":n+=`
`;break;default:}return n};S1.prototype.render=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;a==="inline"?n+=this.renderInline(t[o].children,e,r):typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e,r)}return n};var Cxe=S1;function Hu(){this.__rules__=[],this.__cache__=null}Hu.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Hu.prototype.__compile__=function(){let t=this,e=[""];t.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){n.enabled&&(r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn))})})};Hu.prototype.at=function(t,e,r){let n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Hu.prototype.before=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Hu.prototype.after=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Hu.prototype.push=function(t,e,r){let n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Hu.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};Hu.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};Hu.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};Hu.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var iy=Hu;function T1(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}T1.prototype.attrIndex=function(e){if(!this.attrs)return-1;let r=this.attrs;for(let n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};T1.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};T1.prototype.attrSet=function(e,r){let n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};T1.prototype.attrGet=function(e){let r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};T1.prototype.attrJoin=function(e,r){let n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};var cf=T1;function Ixe(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}Ixe.prototype.Token=cf;var wxe=Ixe;var Gze=/\r\n?|\n/g,Vze=/\0/g;function I$(t){let e;e=t.src.replace(Gze,`
`),e=e.replace(Vze,"\uFFFD"),t.src=e}function w$(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function R$(t){let e=t.tokens;for(let r=0,n=e.length;r<n;r++){let i=e[r];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function zze(t){return/^<a[>\s]/i.test(t)}function $ze(t){return/^<\/a\s*>/i.test(t)}function A$(t){let e=t.tokens;if(t.md.options.linkify)for(let r=0,n=e.length;r<n;r++){if(e[r].type!=="inline"||!t.md.linkify.pretest(e[r].content))continue;let i=e[r].children,o=0;for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(zze(a.content)&&o>0&&o--,$ze(a.content)&&o++),!(o>0)&&a.type==="text"&&t.md.linkify.test(a.content)){let c=a.content,u=t.md.linkify.match(c),l=[],d=a.level,p=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let f=0;f<u.length;f++){let m=u[f].url,h=t.md.normalizeLink(m);if(!t.md.validateLink(h))continue;let g=u[f].text;u[f].schema?u[f].schema==="mailto:"&&!/^mailto:/i.test(g)?g=t.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=t.md.normalizeLinkText(g):g=t.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");let v=u[f].index;if(v>p){let x=new t.Token("text","",0);x.content=c.slice(p,v),x.level=d,l.push(x)}let b=new t.Token("link_open","a",1);b.attrs=[["href",h]],b.level=d++,b.markup="linkify",b.info="auto",l.push(b);let y=new t.Token("text","",0);y.content=g,y.level=d,l.push(y);let E=new t.Token("link_close","a",-1);E.level=--d,E.markup="linkify",E.info="auto",l.push(E),p=u[f].lastIndex}if(p<c.length){let f=new t.Token("text","",0);f.content=c.slice(p),f.level=d,l.push(f)}e[r].children=i=_$(i,s,l)}}}}var Rxe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Wze=/\((c|tm|r)\)/i,Yze=/\((c|tm|r)\)/ig,Kze={c:"\xA9",r:"\xAE",tm:"\u2122"};function Qze(t,e){return Kze[e.toLowerCase()]}function Xze(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&(n.content=n.content.replace(Yze,Qze)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function Jze(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&Rxe.test(n.content)&&(n.content=n.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function P$(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(Wze.test(t.tokens[e].content)&&Xze(t.tokens[e].children),Rxe.test(t.tokens[e].content)&&Jze(t.tokens[e].children))}var Zze=/['"]/,Axe=/['"]/g,Pxe="\u2019";function A3(t,e,r){return t.slice(0,e)+r+t.slice(e+1)}function e$e(t,e){let r,n=[];for(let i=0;i<t.length;i++){let o=t[i],s=t[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=s);r--);if(n.length=r+1,o.type!=="text")continue;let a=o.content,c=0,u=a.length;e:for(;c<u;){Axe.lastIndex=c;let l=Axe.exec(a);if(!l)break;let d=!0,p=!0;c=l.index+1;let f=l[0]==="'",m=32;if(l.index-1>=0)m=a.charCodeAt(l.index-1);else for(r=i-1;r>=0&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r--)if(t[r].content){m=t[r].content.charCodeAt(t[r].content.length-1);break}let h=32;if(c<u)h=a.charCodeAt(c);else for(r=i+1;r<t.length&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r++)if(t[r].content){h=t[r].content.charCodeAt(0);break}let g=ry(m)||ty(String.fromCharCode(m)),v=ry(h)||ty(String.fromCharCode(h)),b=ey(m),y=ey(h);if(y?d=!1:v&&(b||g||(d=!1)),b?p=!1:g&&(y||v||(p=!1)),h===34&&l[0]==='"'&&m>=48&&m<=57&&(p=d=!1),d&&p&&(d=g,p=v),!d&&!p){f&&(o.content=A3(o.content,l.index,Pxe));continue}if(p)for(r=n.length-1;r>=0;r--){let E=n[r];if(n[r].level<s)break;if(E.single===f&&n[r].level===s){E=n[r];let x,R;f?(x=e.md.options.quotes[2],R=e.md.options.quotes[3]):(x=e.md.options.quotes[0],R=e.md.options.quotes[1]),o.content=A3(o.content,l.index,R),t[E.token].content=A3(t[E.token].content,E.pos,x),c+=R.length-1,E.token===i&&(c+=x.length-1),a=o.content,u=a.length,n.length=r;continue e}}d?n.push({token:i,pos:l.index,single:f,level:s}):p&&f&&(o.content=A3(o.content,l.index,Pxe))}}}function k$(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!Zze.test(t.tokens[e].content)||e$e(t.tokens[e].children,t)}function D$(t){let e,r,n=t.tokens,i=n.length;for(let o=0;o<i;o++){if(n[o].type!=="inline")continue;let s=n[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=r=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==r&&(s[r]=s[e]),r++);e!==r&&(s.length=r)}}var N$=[["normalize",I$],["block",w$],["inline",R$],["linkify",A$],["replacements",P$],["smartquotes",k$],["text_join",D$]];function L$(){this.ruler=new iy;for(let t=0;t<N$.length;t++)this.ruler.push(N$[t][0],N$[t][1])}L$.prototype.process=function(t){let e=this.ruler.getRules("");for(let r=0,n=e.length;r<n;r++)e[r](t)};L$.prototype.State=wxe;var kxe=L$;function pd(t,e,r,n){this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let i=this.src;for(let o=0,s=0,a=0,c=0,u=i.length,l=!1;s<u;s++){let d=i.charCodeAt(s);if(!l)if(Qt(d)){a++,d===9?c+=4-c%4:c++;continue}else l=!0;(d===10||s===u-1)&&(d!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(c),this.bsCount.push(0),l=!1,a=0,c=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}pd.prototype.push=function(t,e,r){let n=new cf(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};pd.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};pd.prototype.skipEmptyLines=function(e){for(let r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};pd.prototype.skipSpaces=function(e){for(let r=this.src.length;e<r;e++){let n=this.src.charCodeAt(e);if(!Qt(n))break}return e};pd.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Qt(this.src.charCodeAt(--e)))return e+1;return e};pd.prototype.skipChars=function(e,r){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};pd.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};pd.prototype.getLines=function(e,r,n,i){if(e>=r)return"";let o=new Array(r-e);for(let s=0,a=e;a<r;a++,s++){let c=0,u=this.bMarks[a],l=u,d;for(a+1<r||i?d=this.eMarks[a]+1:d=this.eMarks[a];l<d&&c<n;){let p=this.src.charCodeAt(l);if(Qt(p))p===9?c+=4-(c+this.bsCount[a])%4:c++;else if(l-u<this.tShift[a])c++;else break;l++}c>n?o[s]=new Array(c-n+1).join(" ")+this.src.slice(l,d):o[s]=this.src.slice(l,d)}return o.join("")};pd.prototype.Token=cf;var Dxe=pd;function O$(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.slice(r,n)}function Nxe(t){let e=[],r=t.length,n=0,i=t.charCodeAt(n),o=!1,s=0,a="";for(;n<r;)i===124&&(o?(a+=t.substring(s,n-1),s=n):(e.push(a+t.substring(s,n)),a="",s=n+1)),o=i===92,n++,i=t.charCodeAt(n);return e.push(a+t.substring(s)),e}function M$(t,e,r,n){if(e+2>r)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let o=t.bMarks[i]+t.tShift[i];if(o>=t.eMarks[i])return!1;let s=t.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=t.eMarks[i])return!1;let a=t.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!Qt(a)||s===45&&Qt(a))return!1;for(;o<t.eMarks[i];){let y=t.src.charCodeAt(o);if(y!==124&&y!==45&&y!==58&&!Qt(y))return!1;o++}let c=O$(t,e+1),u=c.split("|"),l=[];for(let y=0;y<u.length;y++){let E=u[y].trim();if(!E){if(y===0||y===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(E))return!1;E.charCodeAt(E.length-1)===58?l.push(E.charCodeAt(0)===58?"center":"right"):E.charCodeAt(0)===58?l.push("left"):l.push("")}if(c=O$(t,e).trim(),c.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=Nxe(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();let d=u.length;if(d===0||d!==l.length)return!1;if(n)return!0;let p=t.parentType;t.parentType="table";let f=t.md.block.ruler.getRules("blockquote"),m=t.push("table_open","table",1),h=[e,0];m.map=h;let g=t.push("thead_open","thead",1);g.map=[e,e+1];let v=t.push("tr_open","tr",1);v.map=[e,e+1];for(let y=0;y<u.length;y++){let E=t.push("th_open","th",1);l[y]&&(E.attrs=[["style","text-align:"+l[y]]]);let x=t.push("inline","",0);x.content=u[y].trim(),x.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let b;for(i=e+2;i<r&&!(t.sCount[i]<t.blkIndent);i++){let y=!1;for(let x=0,R=f.length;x<R;x++)if(f[x](t,i,r,!0)){y=!0;break}if(y||(c=O$(t,i).trim(),!c)||t.sCount[i]-t.blkIndent>=4)break;if(u=Nxe(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),i===e+2){let x=t.push("tbody_open","tbody",1);x.map=b=[e+2,0]}let E=t.push("tr_open","tr",1);E.map=[i,i+1];for(let x=0;x<d;x++){let R=t.push("td_open","td",1);l[x]&&(R.attrs=[["style","text-align:"+l[x]]]);let L=t.push("inline","",0);L.content=u[x]?u[x].trim():"",L.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return b&&(t.push("tbody_close","tbody",-1),b[1]=i),t.push("table_close","table",-1),h[1]=i,t.parentType=p,t.line=i,!0}function F$(t,e,r){if(t.sCount[e]-t.blkIndent<4)return!1;let n=e+1,i=n;for(;n<r;){if(t.isEmpty(n)){n++;continue}if(t.sCount[n]-t.blkIndent>=4){n++,i=n;continue}break}t.line=i;let o=t.push("code_block","code",0);return o.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,o.map=[e,t.line],!0}function U$(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>o)return!1;let s=t.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=t.skipChars(i,s);let c=i-a;if(c<3)return!1;let u=t.src.slice(a,i),l=t.src.slice(i,o);if(s===96&&l.indexOf(String.fromCharCode(s))>=0)return!1;if(n)return!0;let d=e,p=!1;for(;d++,!(d>=r||(i=a=t.bMarks[d]+t.tShift[d],o=t.eMarks[d],i<o&&t.sCount[d]<t.blkIndent));)if(t.src.charCodeAt(i)===s&&!(t.sCount[d]-t.blkIndent>=4)&&(i=t.skipChars(i,s),!(i-a<c)&&(i=t.skipSpaces(i),!(i<o)))){p=!0;break}c=t.sCount[e],t.line=d+(p?1:0);let f=t.push("fence","code",0);return f.info=l,f.content=t.getLines(e+1,d,c,!0),f.markup=u,f.map=[e,t.line],!0}function B$(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],s=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(n)return!0;let a=[],c=[],u=[],l=[],d=t.md.block.ruler.getRules("blockquote"),p=t.parentType;t.parentType="blockquote";let f=!1,m;for(m=e;m<r;m++){let y=t.sCount[m]<t.blkIndent;if(i=t.bMarks[m]+t.tShift[m],o=t.eMarks[m],i>=o)break;if(t.src.charCodeAt(i++)===62&&!y){let x=t.sCount[m]+1,R,L;t.src.charCodeAt(i)===32?(i++,x++,L=!1,R=!0):t.src.charCodeAt(i)===9?(R=!0,(t.bsCount[m]+x)%4===3?(i++,x++,L=!1):L=!0):R=!1;let O=x;for(a.push(t.bMarks[m]),t.bMarks[m]=i;i<o;){let z=t.src.charCodeAt(i);if(Qt(z))z===9?O+=4-(O+t.bsCount[m]+(L?1:0))%4:O++;else break;i++}f=i>=o,c.push(t.bsCount[m]),t.bsCount[m]=t.sCount[m]+1+(R?1:0),u.push(t.sCount[m]),t.sCount[m]=O-x,l.push(t.tShift[m]),t.tShift[m]=i-t.bMarks[m];continue}if(f)break;let E=!1;for(let x=0,R=d.length;x<R;x++)if(d[x](t,m,r,!0)){E=!0;break}if(E){t.lineMax=m,t.blkIndent!==0&&(a.push(t.bMarks[m]),c.push(t.bsCount[m]),l.push(t.tShift[m]),u.push(t.sCount[m]),t.sCount[m]-=t.blkIndent);break}a.push(t.bMarks[m]),c.push(t.bsCount[m]),l.push(t.tShift[m]),u.push(t.sCount[m]),t.sCount[m]=-1}let h=t.blkIndent;t.blkIndent=0;let g=t.push("blockquote_open","blockquote",1);g.markup=">";let v=[e,0];g.map=v,t.md.block.tokenize(t,e,m);let b=t.push("blockquote_close","blockquote",-1);b.markup=">",t.lineMax=s,t.parentType=p,v[1]=t.line;for(let y=0;y<l.length;y++)t.bMarks[y+e]=a[y],t.tShift[y+e]=l[y],t.sCount[y+e]=u[y],t.bsCount[y+e]=c[y];return t.blkIndent=h,!0}function q$(t,e,r,n){let i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.bMarks[e]+t.tShift[e],s=t.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){let u=t.src.charCodeAt(o++);if(u!==s&&!Qt(u))return!1;u===s&&a++}if(a<3)return!1;if(n)return!0;t.line=e+1;let c=t.push("hr","hr",0);return c.map=[e,t.line],c.markup=Array(a+1).join(String.fromCharCode(s)),!0}function Lxe(t,e){let r=t.eMarks[e],n=t.bMarks[e]+t.tShift[e],i=t.src.charCodeAt(n++);if(i!==42&&i!==45&&i!==43)return-1;if(n<r){let o=t.src.charCodeAt(n);if(!Qt(o))return-1}return n}function Oxe(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e],i=r;if(i+1>=n)return-1;let o=t.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=n)return-1;if(o=t.src.charCodeAt(i++),o>=48&&o<=57){if(i-r>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<n&&(o=t.src.charCodeAt(i),!Qt(o))?-1:i}function t$e(t,e){let r=t.level+2;for(let n=e+2,i=t.tokens.length-2;n<i;n++)t.tokens[n].level===r&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}function H$(t,e,r,n){let i,o,s,a,c=e,u=!0;if(t.sCount[c]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[c]-t.listIndent>=4&&t.sCount[c]<t.blkIndent)return!1;let l=!1;n&&t.parentType==="paragraph"&&t.sCount[c]>=t.blkIndent&&(l=!0);let d,p,f;if((f=Oxe(t,c))>=0){if(d=!0,s=t.bMarks[c]+t.tShift[c],p=Number(t.src.slice(s,f-1)),l&&p!==1)return!1}else if((f=Lxe(t,c))>=0)d=!1;else return!1;if(l&&t.skipSpaces(f)>=t.eMarks[c])return!1;if(n)return!0;let m=t.src.charCodeAt(f-1),h=t.tokens.length;d?(a=t.push("ordered_list_open","ol",1),p!==1&&(a.attrs=[["start",p]])):a=t.push("bullet_list_open","ul",1);let g=[c,0];a.map=g,a.markup=String.fromCharCode(m);let v=!1,b=t.md.block.ruler.getRules("list"),y=t.parentType;for(t.parentType="list";c<r;){o=f,i=t.eMarks[c];let E=t.sCount[c]+f-(t.bMarks[c]+t.tShift[c]),x=E;for(;o<i;){let P=t.src.charCodeAt(o);if(P===9)x+=4-(x+t.bsCount[c])%4;else if(P===32)x++;else break;o++}let R=o,L;R>=i?L=1:L=x-E,L>4&&(L=1);let O=E+L;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(m);let z=[c,0];a.map=z,d&&(a.info=t.src.slice(s,f-1));let N=t.tight,ce=t.tShift[c],J=t.sCount[c],D=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=O,t.tight=!0,t.tShift[c]=R-t.bMarks[c],t.sCount[c]=x,R>=i&&t.isEmpty(c+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,c,r,!0),(!t.tight||v)&&(u=!1),v=t.line-c>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=D,t.tShift[c]=ce,t.sCount[c]=J,t.tight=N,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(m),c=t.line,z[1]=c,c>=r||t.sCount[c]<t.blkIndent||t.sCount[c]-t.blkIndent>=4)break;let S=!1;for(let P=0,F=b.length;P<F;P++)if(b[P](t,c,r,!0)){S=!0;break}if(S)break;if(d){if(f=Oxe(t,c),f<0)break;s=t.bMarks[c]+t.tShift[c]}else if(f=Lxe(t,c),f<0)break;if(m!==t.src.charCodeAt(f-1))break}return d?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(m),g[1]=c,t.line=c,t.parentType=y,u&&t$e(t,h),!0}function j$(t,e,r,n){let i=0,o=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],a=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(o)!==91)return!1;for(;++o<s;)if(t.src.charCodeAt(o)===93&&t.src.charCodeAt(o-1)!==92){if(o+1===s||t.src.charCodeAt(o+1)!==58)return!1;break}let c=t.lineMax,u=t.md.block.ruler.getRules("reference"),l=t.parentType;for(t.parentType="reference";a<c&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3||t.sCount[a]<0)continue;let x=!1;for(let R=0,L=u.length;R<L;R++)if(u[R](t,a,c,!0)){x=!0;break}if(x)break}let d=t.getLines(e,a,t.blkIndent,!1).trim();s=d.length;let p=-1;for(o=1;o<s;o++){let x=d.charCodeAt(o);if(x===91)return!1;if(x===93){p=o;break}else x===10?i++:x===92&&(o++,o<s&&d.charCodeAt(o)===10&&i++)}if(p<0||d.charCodeAt(p+1)!==58)return!1;for(o=p+2;o<s;o++){let x=d.charCodeAt(o);if(x===10)i++;else if(!Qt(x))break}let f=t.md.helpers.parseLinkDestination(d,o,s);if(!f.ok)return!1;let m=t.md.normalizeLink(f.str);if(!t.md.validateLink(m))return!1;o=f.pos,i+=f.lines;let h=o,g=i,v=o;for(;o<s;o++){let x=d.charCodeAt(o);if(x===10)i++;else if(!Qt(x))break}let b=t.md.helpers.parseLinkTitle(d,o,s),y;for(o<s&&v!==o&&b.ok?(y=b.str,o=b.pos,i+=b.lines):(y="",o=h,i=g);o<s;){let x=d.charCodeAt(o);if(!Qt(x))break;o++}if(o<s&&d.charCodeAt(o)!==10&&y)for(y="",o=h,i=g;o<s;){let x=d.charCodeAt(o);if(!Qt(x))break;o++}if(o<s&&d.charCodeAt(o)!==10)return!1;let E=ny(d.slice(1,p));return E?(n||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[E]>"u"&&(t.env.references[E]={title:y,href:m}),t.parentType=l,t.line=e+i+1),!0):!1}var Mxe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"];var r$e="[a-zA-Z_:][a-zA-Z0-9:._-]*",n$e="[^\"'=<>`\\x00-\\x20]+",i$e="'[^']*'",o$e='"[^"]*"',s$e="(?:"+n$e+"|"+i$e+"|"+o$e+")",a$e="(?:\\s+"+r$e+"(?:\\s*=\\s*"+s$e+")?)",Fxe="<[A-Za-z][A-Za-z0-9\\-]*"+a$e+"*\\s*\\/?>",Uxe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",c$e="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",u$e="<[?][\\s\\S]*?[?]>",l$e="<![A-Z]+\\s+[^>]*>",d$e="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Bxe=new RegExp("^(?:"+Fxe+"|"+Uxe+"|"+c$e+"|"+u$e+"|"+l$e+"|"+d$e+")"),qxe=new RegExp("^(?:"+Fxe+"|"+Uxe+")");var C1=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Mxe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(qxe.source+"\\s*$"),/^$/,!1]];function G$(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let s=t.src.slice(i,o),a=0;for(;a<C1.length&&!C1[a][0].test(s);a++);if(a===C1.length)return!1;if(n)return C1[a][2];let c=e+1;if(!C1[a][1].test(s)){for(;c<r&&!(t.sCount[c]<t.blkIndent);c++)if(i=t.bMarks[c]+t.tShift[c],o=t.eMarks[c],s=t.src.slice(i,o),C1[a][1].test(s)){s.length!==0&&c++;break}}t.line=c;let u=t.push("html_block","",0);return u.map=[e,c],u.content=t.getLines(e,c,t.blkIndent,!0),!0}function V$(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=t.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=t.src.charCodeAt(++i);if(a>6||i<o&&!Qt(s))return!1;if(n)return!0;o=t.skipSpacesBack(o,i);let c=t.skipCharsBack(o,35,i);c>i&&Qt(t.src.charCodeAt(c-1))&&(o=c),t.line=e+1;let u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];let l=t.push("inline","",0);l.content=t.src.slice(i,o).trim(),l.map=[e,t.line],l.children=[];let d=t.push("heading_close","h"+String(a),-1);return d.markup="########".slice(0,a),!0}function z$(t,e,r){let n=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;let i=t.parentType;t.parentType="paragraph";let o=0,s,a=e+1;for(;a<r&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let f=t.bMarks[a]+t.tShift[a],m=t.eMarks[a];if(f<m&&(s=t.src.charCodeAt(f),(s===45||s===61)&&(f=t.skipChars(f,s),f=t.skipSpaces(f),f>=m))){o=s===61?1:2;break}}if(t.sCount[a]<0)continue;let p=!1;for(let f=0,m=n.length;f<m;f++)if(n[f](t,a,r,!0)){p=!0;break}if(p)break}if(!o)return!1;let c=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;let u=t.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[e,t.line];let l=t.push("inline","",0);l.content=c,l.map=[e,t.line-1],l.children=[];let d=t.push("heading_close","h"+String(o),-1);return d.markup=String.fromCharCode(s),t.parentType=i,!0}function $$(t,e,r){let n=t.md.block.ruler.getRules("paragraph"),i=t.parentType,o=e+1;for(t.parentType="paragraph";o<r&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3||t.sCount[o]<0)continue;let u=!1;for(let l=0,d=n.length;l<d;l++)if(n[l](t,o,r,!0)){u=!0;break}if(u)break}let s=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o;let a=t.push("paragraph_open","p",1);a.map=[e,t.line];let c=t.push("inline","",0);return c.content=s,c.map=[e,t.line],c.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}var P3=[["table",M$,["paragraph","reference"]],["code",F$],["fence",U$,["paragraph","reference","blockquote","list"]],["blockquote",B$,["paragraph","reference","blockquote","list"]],["hr",q$,["paragraph","reference","blockquote","list"]],["list",H$,["paragraph","reference","blockquote"]],["reference",j$],["html_block",G$,["paragraph","reference","blockquote"]],["heading",V$,["paragraph","reference","blockquote"]],["lheading",z$],["paragraph",$$]];function k3(){this.ruler=new iy;for(let t=0;t<P3.length;t++)this.ruler.push(P3[t][0],P3[t][1],{alt:(P3[t][2]||[]).slice()})}k3.prototype.tokenize=function(t,e,r){let n=this.ruler.getRules(""),i=n.length,o=t.md.options.maxNesting,s=e,a=!1;for(;s<r&&(t.line=s=t.skipEmptyLines(s),!(s>=r||t.sCount[s]<t.blkIndent));){if(t.level>=o){t.line=r;break}let c=t.line,u=!1;for(let l=0;l<i;l++)if(u=n[l](t,s,r,!1),u){if(c>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),s=t.line,s<r&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}};k3.prototype.parse=function(t,e,r,n){if(!t)return;let i=new this.State(t,e,r,n);this.tokenize(i,i.line,i.lineMax)};k3.prototype.State=Dxe;var Hxe=k3;function uw(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}uw.prototype.pushPending=function(){let t=new cf("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};uw.prototype.push=function(t,e,r){this.pending&&this.pushPending();let n=new cf(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};uw.prototype.scanDelims=function(t,e){let r,n,i=!0,o=!0,s=this.posMax,a=this.src.charCodeAt(t),c=t>0?this.src.charCodeAt(t-1):32,u=t;for(;u<s&&this.src.charCodeAt(u)===a;)u++;let l=u-t,d=u<s?this.src.charCodeAt(u):32,p=ry(c)||ty(String.fromCharCode(c)),f=ry(d)||ty(String.fromCharCode(d)),m=ey(c),h=ey(d);return h?i=!1:f&&(m||p||(i=!1)),m?o=!1:p&&(h||f||(o=!1)),e?(r=i,n=o):(r=i&&(!o||p),n=o&&(!i||f)),{can_open:r,can_close:n,length:l}};uw.prototype.Token=cf;var jxe=uw;function p$e(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function W$(t,e){let r=t.pos;for(;r<t.posMax&&!p$e(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}var f$e=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Y$(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;let r=t.pos,n=t.posMax;if(r+3>n||t.src.charCodeAt(r)!==58||t.src.charCodeAt(r+1)!==47||t.src.charCodeAt(r+2)!==47)return!1;let i=t.pending.match(f$e);if(!i)return!1;let o=i[1],s=t.md.linkify.matchAtStart(t.src.slice(r-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");let c=t.md.normalizeLink(a);if(!t.md.validateLink(c))return!1;if(!e){t.pending=t.pending.slice(0,-o.length);let u=t.push("link_open","a",1);u.attrs=[["href",c]],u.markup="linkify",u.info="auto";let l=t.push("text","",0);l.content=t.md.normalizeLinkText(a);let d=t.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return t.pos+=a.length-o.length,!0}function K$(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==10)return!1;let n=t.pending.length-1,i=t.posMax;if(!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){let o=n-1;for(;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(r++;r<i&&Qt(t.src.charCodeAt(r));)r++;return t.pos=r,!0}var Q$=[];for(let t=0;t<256;t++)Q$.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){Q$[t.charCodeAt(0)]=1});function X$(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==92||(r++,r>=n))return!1;let i=t.src.charCodeAt(r);if(i===10){for(e||t.push("hardbreak","br",0),r++;r<n&&(i=t.src.charCodeAt(r),!!Qt(i));)r++;return t.pos=r,!0}let o=t.src[r];if(i>=55296&&i<=56319&&r+1<n){let a=t.src.charCodeAt(r+1);a>=56320&&a<=57343&&(o+=t.src[r+1],r++)}let s="\\"+o;if(!e){let a=t.push("text_special","",0);i<256&&Q$[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return t.pos=r+1,!0}function J$(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==96)return!1;let i=r;r++;let o=t.posMax;for(;r<o&&t.src.charCodeAt(r)===96;)r++;let s=t.src.slice(i,r),a=s.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=s),t.pos+=a,!0;let c=r,u;for(;(u=t.src.indexOf("`",c))!==-1;){for(c=u+1;c<o&&t.src.charCodeAt(c)===96;)c++;let l=c-u;if(l===a){if(!e){let d=t.push("code_inline","code",0);d.markup=s,d.content=t.src.slice(r,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=c,!0}t.backticks[l]=u}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=a,!0}function m$e(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==126)return!1;let i=t.scanDelims(t.pos,!0),o=i.length,s=String.fromCharCode(n);if(o<2)return!1;let a;o%2&&(a=t.push("text","",0),a.content=s,o--);for(let c=0;c<o;c+=2)a=t.push("text","",0),a.content=s+s,t.delimiters.push({marker:n,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function Gxe(t,e){let r,n=[],i=e.length;for(let o=0;o<i;o++){let s=e[o];if(s.marker!==126||s.end===-1)continue;let a=e[s.end];r=t.tokens[s.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=t.tokens[a.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&n.push(a.token-1)}for(;n.length;){let o=n.pop(),s=o+1;for(;s<t.tokens.length&&t.tokens[s].type==="s_close";)s++;s--,o!==s&&(r=t.tokens[s],t.tokens[s]=t.tokens[o],t.tokens[o]=r)}}function h$e(t){let e=t.tokens_meta,r=t.tokens_meta.length;Gxe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&Gxe(t,e[n].delimiters)}var Z$={tokenize:m$e,postProcess:h$e};function g$e(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==95&&n!==42)return!1;let i=t.scanDelims(t.pos,n===42);for(let o=0;o<i.length;o++){let s=t.push("text","",0);s.content=String.fromCharCode(n),t.delimiters.push({marker:n,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function Vxe(t,e){let r=e.length;for(let n=r-1;n>=0;n--){let i=e[n];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;let o=e[i.end],s=n>0&&e[n-1].end===i.end+1&&e[n-1].marker===i.marker&&e[n-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),c=t.tokens[i.token];c.type=s?"strong_open":"em_open",c.tag=s?"strong":"em",c.nesting=1,c.markup=s?a+a:a,c.content="";let u=t.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(t.tokens[e[n-1].token].content="",t.tokens[e[i.end+1].token].content="",n--)}}function v$e(t){let e=t.tokens_meta,r=t.tokens_meta.length;Vxe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&Vxe(t,e[n].delimiters)}var eW={tokenize:g$e,postProcess:v$e};function tW(t,e){let r,n,i,o,s="",a="",c=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;let l=t.pos,d=t.posMax,p=t.pos+1,f=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(f<0)return!1;let m=f+1;if(m<d&&t.src.charCodeAt(m)===40){for(u=!1,m++;m<d&&(r=t.src.charCodeAt(m),!(!Qt(r)&&r!==10));m++);if(m>=d)return!1;if(c=m,i=t.md.helpers.parseLinkDestination(t.src,m,t.posMax),i.ok){for(s=t.md.normalizeLink(i.str),t.md.validateLink(s)?m=i.pos:s="",c=m;m<d&&(r=t.src.charCodeAt(m),!(!Qt(r)&&r!==10));m++);if(i=t.md.helpers.parseLinkTitle(t.src,m,t.posMax),m<d&&c!==m&&i.ok)for(a=i.str,m=i.pos;m<d&&(r=t.src.charCodeAt(m),!(!Qt(r)&&r!==10));m++);}(m>=d||t.src.charCodeAt(m)!==41)&&(u=!0),m++}if(u){if(typeof t.env.references>"u")return!1;if(m<d&&t.src.charCodeAt(m)===91?(c=m+1,m=t.md.helpers.parseLinkLabel(t,m),m>=0?n=t.src.slice(c,m++):m=f+1):m=f+1,n||(n=t.src.slice(p,f)),o=t.env.references[ny(n)],!o)return t.pos=l,!1;s=o.href,a=o.title}if(!e){t.pos=p,t.posMax=f;let h=t.push("link_open","a",1),g=[["href",s]];h.attrs=g,a&&g.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=m,t.posMax=d,!0}function rW(t,e){let r,n,i,o,s,a,c,u,l="",d=t.pos,p=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;let f=t.pos+2,m=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(m<0)return!1;if(o=m+1,o<p&&t.src.charCodeAt(o)===40){for(o++;o<p&&(r=t.src.charCodeAt(o),!(!Qt(r)&&r!==10));o++);if(o>=p)return!1;for(u=o,a=t.md.helpers.parseLinkDestination(t.src,o,t.posMax),a.ok&&(l=t.md.normalizeLink(a.str),t.md.validateLink(l)?o=a.pos:l=""),u=o;o<p&&(r=t.src.charCodeAt(o),!(!Qt(r)&&r!==10));o++);if(a=t.md.helpers.parseLinkTitle(t.src,o,t.posMax),o<p&&u!==o&&a.ok)for(c=a.str,o=a.pos;o<p&&(r=t.src.charCodeAt(o),!(!Qt(r)&&r!==10));o++);else c="";if(o>=p||t.src.charCodeAt(o)!==41)return t.pos=d,!1;o++}else{if(typeof t.env.references>"u")return!1;if(o<p&&t.src.charCodeAt(o)===91?(u=o+1,o=t.md.helpers.parseLinkLabel(t,o),o>=0?i=t.src.slice(u,o++):o=m+1):o=m+1,i||(i=t.src.slice(f,m)),s=t.env.references[ny(i)],!s)return t.pos=d,!1;l=s.href,c=s.title}if(!e){n=t.src.slice(f,m);let h=[];t.md.inline.parse(n,t.md,t.env,h);let g=t.push("image","img",0),v=[["src",l],["alt",""]];g.attrs=v,g.children=h,g.content=n,c&&v.push(["title",c])}return t.pos=o,t.posMax=p,!0}var y$e=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,b$e=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function nW(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==60)return!1;let n=t.pos,i=t.posMax;for(;;){if(++r>=i)return!1;let s=t.src.charCodeAt(r);if(s===60)return!1;if(s===62)break}let o=t.src.slice(n+1,r);if(b$e.test(o)){let s=t.md.normalizeLink(o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let c=t.push("text","",0);c.content=t.md.normalizeLinkText(o);let u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}if(y$e.test(o)){let s=t.md.normalizeLink("mailto:"+o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let c=t.push("text","",0);c.content=t.md.normalizeLinkText(o);let u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=o.length+2,!0}return!1}function _$e(t){return/^<a[>\s]/i.test(t)}function x$e(t){return/^<\/a\s*>/i.test(t)}function E$e(t){let e=t|32;return e>=97&&e<=122}function iW(t,e){if(!t.md.options.html)return!1;let r=t.posMax,n=t.pos;if(t.src.charCodeAt(n)!==60||n+2>=r)return!1;let i=t.src.charCodeAt(n+1);if(i!==33&&i!==63&&i!==47&&!E$e(i))return!1;let o=t.src.slice(n).match(Bxe);if(!o)return!1;if(!e){let s=t.push("html_inline","",0);s.content=o[0],_$e(s.content)&&t.linkLevel++,x$e(s.content)&&t.linkLevel--}return t.pos+=o[0].length,!0}var S$e=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,T$e=/^&([a-z][a-z0-9]{1,31});/i;function oW(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==38||r+1>=n)return!1;if(t.src.charCodeAt(r+1)===35){let o=t.src.slice(r).match(S$e);if(o){if(!e){let s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=t.push("text_special","",0);a.content=R3(s)?cw(s):cw(65533),a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}else{let o=t.src.slice(r).match(T$e);if(o){let s=Hh(o[0]);if(s!==o[0]){if(!e){let a=t.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}}return!1}function zxe(t){let e={},r=t.length;if(!r)return;let n=0,i=-2,o=[];for(let s=0;s<r;s++){let a=t[s];if(o.push(0),(t[n].marker!==a.marker||i!==a.token-1)&&(n=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);let c=e[a.marker][(a.open?3:0)+a.length%3],u=n-o[n]-1,l=u;for(;u>c;u-=o[u]+1){let d=t[u];if(d.marker===a.marker&&d.open&&d.end<0){let p=!1;if((d.close||a.open)&&(d.length+a.length)%3===0&&(d.length%3!==0||a.length%3!==0)&&(p=!0),!p){let f=u>0&&!t[u-1].open?o[u-1]+1:0;o[s]=s-u+f,o[u]=f,a.open=!1,d.end=s,d.close=!1,l=-1,i=-2;break}}}l!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=l)}}function sW(t){let e=t.tokens_meta,r=t.tokens_meta.length;zxe(t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&zxe(e[n].delimiters)}function aW(t){let e,r,n=0,i=t.tokens,o=t.tokens.length;for(e=r=0;e<o;e++)i[e].nesting<0&&n--,i[e].level=n,i[e].nesting>0&&n++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==r&&(i[r]=i[e]),r++);e!==r&&(i.length=r)}var cW=[["text",W$],["linkify",Y$],["newline",K$],["escape",X$],["backticks",J$],["strikethrough",Z$.tokenize],["emphasis",eW.tokenize],["link",tW],["image",rW],["autolink",nW],["html_inline",iW],["entity",oW]],uW=[["balance_pairs",sW],["strikethrough",Z$.postProcess],["emphasis",eW.postProcess],["fragments_join",aW]];function lw(){this.ruler=new iy;for(let t=0;t<cW.length;t++)this.ruler.push(cW[t][0],cW[t][1]);this.ruler2=new iy;for(let t=0;t<uW.length;t++)this.ruler2.push(uW[t][0],uW[t][1])}lw.prototype.skipToken=function(t){let e=t.pos,r=this.ruler.getRules(""),n=r.length,i=t.md.options.maxNesting,o=t.cache;if(typeof o[e]<"u"){t.pos=o[e];return}let s=!1;if(t.level<i){for(let a=0;a<n;a++)if(t.level++,s=r[a](t,!0),t.level--,s){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;s||t.pos++,o[e]=t.pos};lw.prototype.tokenize=function(t){let e=this.ruler.getRules(""),r=e.length,n=t.posMax,i=t.md.options.maxNesting;for(;t.pos<n;){let o=t.pos,s=!1;if(t.level<i){for(let a=0;a<r;a++)if(s=e[a](t,!1),s){if(o>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(t.pos>=n)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};lw.prototype.parse=function(t,e,r,n){let i=new this.State(t,e,r,n);this.tokenize(i);let o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};lw.prototype.State=jxe;var $xe=lw;function Wxe(t){let e={};t=t||{},e.src_Any=E3.source,e.src_Cc=S3.source,e.src_Z=T3.source,e.src_P=x1.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");let r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function lW(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function N3(t){return Object.prototype.toString.call(t)}function C$e(t){return N3(t)==="[object String]"}function I$e(t){return N3(t)==="[object Object]"}function w$e(t){return N3(t)==="[object RegExp]"}function Yxe(t){return N3(t)==="[object Function]"}function R$e(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var Qxe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function A$e(t){return Object.keys(t||{}).reduce(function(e,r){return e||Qxe.hasOwnProperty(r)},!1)}var P$e={"http:":{validate:function(t,e,r){let n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){let n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){let n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},k$e="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",D$e="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function N$e(t){t.__index__=-1,t.__text_cache__=""}function L$e(t){return function(e,r){let n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function Kxe(){return function(t,e){e.normalize(t)}}function D3(t){let e=t.re=Wxe(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(k$e),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");let i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){let c=t.__schemas__[a];if(c===null)return;let u={validate:null,link:null};if(t.__compiled__[a]=u,I$e(c)){w$e(c.validate)?u.validate=L$e(c.validate):Yxe(c.validate)?u.validate=c.validate:o(a,c),Yxe(c.normalize)?u.normalize=c.normalize:c.normalize?o(a,c):u.normalize=Kxe();return}if(C$e(c)){i.push(a);return}o(a,c)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:Kxe()};let s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(R$e).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),N$e(t)}function O$e(t,e){let r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function dW(t,e){let r=new O$e(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function Za(t,e){if(!(this instanceof Za))return new Za(t,e);e||A$e(t)&&(e=t,t={}),this.__opts__=lW({},Qxe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=lW({},P$e,t),this.__compiled__={},this.__tlds__=D$e,this.__tlds_replaced__=!1,this.re={},D3(this)}Za.prototype.add=function(e,r){return this.__schemas__[e]=r,D3(this),this};Za.prototype.set=function(e){return this.__opts__=lW(this.__opts__,e),this};Za.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let r,n,i,o,s,a,c,u,l;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=e.indexOf("@"),l>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Za.prototype.pretest=function(e){return this.re.pretest.test(e)};Za.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};Za.prototype.match=function(e){let r=[],n=0;this.__index__>=0&&this.__text_cache__===e&&(r.push(dW(this,n)),n=this.__last_index__);let i=n?e.slice(n):e;for(;this.test(i);)r.push(dW(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Za.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let r=this.re.schema_at_start.exec(e);if(!r)return null;let n=this.testSchemaAt(e,r[2],r[0].length);return n?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n,dW(this,0)):null};Za.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),D3(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,D3(this),this)};Za.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Za.prototype.onCompile=function(){};var Xxe=Za;var Zxe="-",M$e=/^xn--/,F$e=/[^\0-\x7F]/,U$e=/[\x2E\u3002\uFF0E\uFF61]/g,B$e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},pW=35,fd=Math.floor,fW=String.fromCharCode;function Gh(t){throw new RangeError(B$e[t])}function q$e(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function e1e(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(U$e,".");let i=t.split("."),o=q$e(i,e).join(".");return n+o}function t1e(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let o=t.charCodeAt(r++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var H$e=t=>String.fromCodePoint(...t),j$e=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},Jxe=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},r1e=function(t,e,r){let n=0;for(t=r?fd(t/700):t>>1,t+=fd(t/e);t>pW*26>>1;n+=36)t=fd(t/pW);return fd(n+(pW+1)*t/(t+38))},n1e=function(t){let e=[],r=t.length,n=0,i=128,o=72,s=t.lastIndexOf(Zxe);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&Gh("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<r;){let c=n;for(let l=1,d=36;;d+=36){a>=r&&Gh("invalid-input");let p=j$e(t.charCodeAt(a++));p>=36&&Gh("invalid-input"),p>fd((2147483647-n)/l)&&Gh("overflow"),n+=p*l;let f=d<=o?1:d>=o+26?26:d-o;if(p<f)break;let m=36-f;l>fd(2147483647/m)&&Gh("overflow"),l*=m}let u=e.length+1;o=r1e(n-c,u,c==0),fd(n/u)>2147483647-i&&Gh("overflow"),i+=fd(n/u),n%=u,e.splice(n++,0,i)}return String.fromCodePoint(...e)},i1e=function(t){let e=[];t=t1e(t);let r=t.length,n=128,i=0,o=72;for(let c of t)c<128&&e.push(fW(c));let s=e.length,a=s;for(s&&e.push(Zxe);a<r;){let c=2147483647;for(let l of t)l>=n&&l<c&&(c=l);let u=a+1;c-n>fd((2147483647-i)/u)&&Gh("overflow"),i+=(c-n)*u,n=c;for(let l of t)if(l<n&&++i>2147483647&&Gh("overflow"),l===n){let d=i;for(let p=36;;p+=36){let f=p<=o?1:p>=o+26?26:p-o;if(d<f)break;let m=d-f,h=36-f;e.push(fW(Jxe(f+m%h,0))),d=fd(m/h)}e.push(fW(Jxe(d,0))),o=r1e(i,u,a===s),i=0,++a}++i,++n}return e.join("")},G$e=function(t){return e1e(t,function(e){return M$e.test(e)?n1e(e.slice(4).toLowerCase()):e})},V$e=function(t){return e1e(t,function(e){return F$e.test(e)?"xn--"+i1e(e):e})},z$e={version:"2.3.1",ucs2:{decode:t1e,encode:H$e},decode:n1e,encode:i1e,toASCII:V$e,toUnicode:G$e};var mW=z$e;var o1e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}};var s1e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}};var a1e={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}};var $$e={default:o1e,zero:s1e,commonmark:a1e},W$e=/^(vbscript|javascript|file|data):/,Y$e=/^data:image\/(gif|png|jpeg|webp);/;function K$e(t){let e=t.trim().toLowerCase();return W$e.test(e)?Y$e.test(e):!0}var c1e=["http:","https:","mailto:"];function Q$e(t){let e=aw(t,!0);if(e.hostname&&(!e.protocol||c1e.indexOf(e.protocol)>=0))try{e.hostname=mW.toASCII(e.hostname)}catch{}return b3(_1(e))}function X$e(t){let e=aw(t,!0);if(e.hostname&&(!e.protocol||c1e.indexOf(e.protocol)>=0))try{e.hostname=mW.toUnicode(e.hostname)}catch{}return sw(_1(e),sw.defaultChars+"%")}function Vc(t,e){if(!(this instanceof Vc))return new Vc(t,e);e||w3(t)||(e=t||{},t="default"),this.inline=new $xe,this.block=new Hxe,this.core=new kxe,this.renderer=new Cxe,this.linkify=new Xxe,this.validateLink=K$e,this.normalizeLink=Q$e,this.normalizeLinkText=X$e,this.utils=x$,this.helpers=E1({},C$),this.options={},this.configure(t),e&&this.set(e)}Vc.prototype.set=function(t){return E1(this.options,t),this};Vc.prototype.configure=function(t){let e=this;if(w3(t)){let r=t;if(t=$$e[r],!t)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};Vc.prototype.enable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};Vc.prototype.disable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};Vc.prototype.use=function(t){let e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Vc.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");let r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};Vc.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Vc.prototype.parseInline=function(t,e){let r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};Vc.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var hW=Vc;var J$e=Object.freeze({abap:{lineComment:{start:"'"}},bat:{lineComment:{start:"REM"},aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"}},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"]},haskell:{lineComment:{start:"--"}},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"]},ini:{lineComment:{start:";"}},java:{lineComment:{start:"//"},extensions:[".java",".class"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"]},json:{extensions:[".json"],lineComment:{start:"//"}},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"}},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"]},kotlin:{lineComment:{start:"//"}},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"]},markdown:{lineComment:{start:"[]: #"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"]},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"}},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"}}}),dw=new Map(Object.entries(J$e).map(([t,e])=>[t,{languageId:t,...e}]));function zc(t){let e=typeof t=="string"?t:t.languageId,r=dw.get(e.toLowerCase());return r||{languageId:e,lineComment:{start:"//"}}}function Vh(t){let e=Oa(t).toLowerCase();for(let r of dw.values())if(r.extensions?.includes(e))return r;return zc("plaintext")}function u1e(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}function xn(t,e,r=!0){let n=e.matchAll(/^\s*(```+)/gm),i=Math.max(3,...Array.from(n,s=>s[1].length+1)),o="`".repeat(i);return`${o}${zh(t)}
${r?e.trim():e}
${o}`}function zh(t){switch(t.trim().toLowerCase()){case"typescriptreact":return"tsx";case"javascriptreact":return"jsx";default:return t}}function L3(t){let e=Oa(t).toLowerCase(),r=Object.keys(dw).find(n=>dw.get(n)?.extensions?.includes(e))||e.replace(/^\./,"");return zh(r)}function $c(t){let e=[],n=new hW().parse(t,{});for(let i of l1e(n))i.map&&i.type==="fence"&&e.push({startMarkup:i.markup,code:i.content.replace(/\n$/,""),language:i.info.trim(),startLine:i.map[0],endLine:i.map[1]});return e}function*l1e(t){for(let e of t)e.children&&(yield*l1e(e.children)),yield e}var D1e=require("crypto"),N1e=fe(f1e()),L1e=require("util");var R1=fe(R1e()),A1e=require("path");var we=re("ITokenizer"),q3=class{constructor(){}tokenize(e){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encode(e)}encodeTrimSuffix(e,r){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encodeTrimSuffix(e,r,[]).text}tokenLength(e){return e?this.tokenize(e).length:0}initTokenizer(){return(0,R1.createTokenizer)((0,A1e.join)(__dirname,"./cl100k_base.tiktoken"),(0,R1.getSpecialTokensByEncoder)("cl100k_base"),(0,R1.getRegexByEncoder)("cl100k_base"),64e3)}};function P1e(t,e,r){return Math.min(Math.max(t,e),r)}var Ye=re("IEndpointProvider");var hw=250;function Qh(t,e=0,r=0){let n=t.row+e,i=t.column+r;return new Ht(n<0?0:n,i<0?0:i)}function md(t){return new Ge(Qh(t.range.startPosition),Qh(t.range.endPosition))}function Xh(t){return t.replace(/\s+$/,"")}var Jh=class{constructor(e){this._accessor=e}genericWholeFileChunking({text:e,maxTokenLength:r=hw,removeEmptyLines:n=!0}){return e=e.replace(/\r\n/g,`
`),this._processLinesIntoChunks(e,0,r,!0,n).filter(o=>!n||o.text.length&&/[\w\d]{2}/.test(o.text))}genericChunking({lineRangeText:e,maxTokenLength:r=hw,removeEmptyLines:n=!0,extraLineRangeSeparator:i="",numTokensInEllipsis:o=0}){if(r<0)throw Error("Cannot chunk text, not enough chunk room");if(e.length===0)return[];let s=this._accessor.get(we),a=s.tokenLength(i),c=[],u;for(let l=0;l<e.length;l++){let d=e[l];if(u){let f=r-s.tokenLength(u.text)-a;if(f>0&&d.text.length<2e4&&s.tokenLength(d.text)<=f){u={text:u.text+i+d.text,range:new Ge(u.range.start,d.range.end)};continue}c.push(u)}let p=this._processLinesIntoChunks(d.text,d.range.start.line,r,!1,n,o,l===0);u=p.pop(),c.push(...p)}return u&&c.push(u),c.map(l=>({text:Xh(l.text),range:l.range})).filter(l=>!n||l.text.length&&/[^\s]/.test(l.text))}_processLinesIntoChunks(e,r,n,i,o,s=0,a=!1){let c=this._accessor.get(we),u=(o?e.replace(/\n+/gm,`
`):e).split(`
`).map(p=>p.substring(0,n*4)).join(`
`),l=[],d=u;for(;d.length>0;){let p=n-s-(a?0:s),f=c.encodeTrimSuffix(d.substring(0,p*10),p);f.length===0&&(f=d.substring(0,p*3));let m=f.length===d.length||f.lastIndexOf(`
`)<1?f.length:f.lastIndexOf(`
`),h=f.substring(0,m),g=d.substring(h.length).replace(/^\n+/g,""),v=new Ht(r,0),b=h.split(`
`);if(i){let{chunks:O,remainingLines:z}=this._dedentAndAddLinesToChunk(b,g,p,c);b=O,d=z}else d=d.substring(m).replace(/^\n+/g,"");let y=r+b.length,E=b[b.length-1].length,x=new Ht(y,E),R=new Ge(v,x),L=b.join(`
`);l.push({text:L,range:R}),r=y}return l}_dedentAndAddLinesToChunk(e,r,n,i){let o=l=>{let d=l.indexOf(`
`);return l.substring(0,d===-1?l.length:d)},s=gw(e),a=s.shortestLeadingCommonWhitespace,c=s.trimmedLines.map(l=>l??""),u=i.tokenLength(c.join(`
`));if(a.length>0){let l=o(r);for(u+=i.tokenLength(l);r.length>0&&u<n&&(l.length===0||l.startsWith(a));)c.push(l.substring(a.length)),r=r.substring(l.length+1),l=o(r),u+=i.tokenLength(l);return{chunks:c,remainingLines:r}}return{chunks:c.map(l=>l??`
`),remainingLines:r}}};function gw(t){let e=t.map(o=>{if(!o)return;let s=o.match(/^\s+/),a=s?s[0]:"",c=o.substring(a?.length);return[a,c]}),r=e.filter(o=>!!o),n=xWe(r)??"",i=n.length;return{trimmedLines:e.map(o=>o?o[0].substring(i)+o[1]:void 0),shortestLeadingCommonWhitespace:n}}function xWe(t){let e;for(let r of t){if(e===void 0){e=r[0];continue}e=EWe(e,r[0])}return e??""}function EWe(t,e){let r=t.length<e.length?t:e;if(r.length===0)return"";for(let n=1;n<r.length;n++)t.substring(0,n)!==e.substring(0,n)&&r.substring(0,n-1);return r}var A1=class{constructor(e,r,n){this._queryTree=e;this.accessor=r;this._naiveChunker=new Jh(r);let i=this.accessor.get(we);this._inlineComment=n?.blockWrap??{start:"",end:""},this._elipsisPlaceholder=n?.elipsisPlaceholder??"...",this._lookForIndentInHeader=n?.lookForIndentInHeader??!0,this._numTokensInEllipsis=i.tokenLength(this._elipsisPlaceholder)+1}get _summaryPlaceHolder(){return this._inlineComment.start+this._elipsisPlaceholder+this._inlineComment.end}async parse(e,r){let n=await this._queryTree,i=this._parseBlocks(n.roots,"",e,r),o=i.content.flat(),s=i.outline??[],a=this.createOutlineSummary("","",e,{text:n.syntaxTreeRoot.text,range:md(n.syntaxTreeRoot)},s,new Ge(0,0,n.syntaxTreeRoot.range.endPosition.row,n.syntaxTreeRoot.range.endPosition.column),"");return a.length===1&&(a[0]={...a[0],isFullFile:!0}),o.push(...a),o}chunkWholeText(e,r,n){if(e.trim().length===0)return{content:{text:[],isFull:!0}};let i;try{i=this._naiveChunker.genericChunking({lineRangeText:[{range:r,text:e}],maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return{content:{text:[],isFull:!1},outline:[]}}return{content:{text:i,isFull:!0}}}_parseBlocks(e,r,n,i){return this._parseSemanticStructure(e,r,n,i,(o,s,a,c)=>{let u=c+s.text;if(this.accessor.get(we).tokenLength(u)<=a)return{content:{text:[{range:s.range,text:u.replace(/(^\s*\n)|(\n\s*$)/g,"")}],isFull:!0}};if(o.length===0)return this.chunkWholeText(u,s.range,a);let d=this._parseBlocks(o,c,a,i),p=d.content,f=d.outline;return{content:{text:p,isFull:!1},outline:f}})}_createOutlineBody(e,r,n){let i=(n+e.text).split(`
`),o=e.range.start,s=[],a=o,c=p=>{let f=p.line-o.line,m=p.character;return o.line===p.line&&(m=p.character-o.character),new Ht(f,m)},u=p=>{let f=p.line-o.line,m=f>=i.length||p.character===i[f].length-1;return{newPosition:new Ht(p.line,p.character+1),isNewLine:m}},l=(p,f)=>{if(p.line>f.line||p.line===f.line&&p.character>f.character)return;let m=[],h=c(p),g=c(f),v=i[h.line].substring(h.character);if(h.line===g.line){let y=v.substring(0,g.character-h.character),E=u(f);a=E.newPosition,E.isNewLine&&(y+=`
`),m.push(y)}else{let y=i[g.line].substring(0,g.character);y=y.replace(new RegExp(`${n}$`),"");let E=u(f);a=E.newPosition,E.isNewLine&&(y+=`
`),m.push(v+`
`);for(let x=h.line+1;x<g.line;x++)m.push(i[x]+`
`);m.push(y)}let b=m.join("");s.push({text:b.replace(/(^\s+\n)/,""),range:new Ge(p,f)})},d=p=>{s.push({text:p.summary+`

`,range:p.range})};return r.sort((p,f)=>p.range.start.line-f.range.start.line||p.range.end.line-f.range.end.line),r.forEach(p=>{l(a,p.range.start),d(p),a=u(p.range.end).newPosition}),l(a,e.range.end),s}createOutlineSummary(e,r,n,i,o,s,a){let c=this._createOutlineBody(i,o.map(l=>({summary:Xh(l.summary),range:l.range})),a),u;try{u=this._naiveChunker.genericChunking({lineRangeText:c,removeEmptyLines:!1,maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return[]}return this._createSummary(e,r,u,s,a)}_createSummary(e,r,n,i,o){return n.length===0?[]:xr(n.map((s,a)=>{let c=e.length===0?"":`${e}`;a!==0&&(c+=`${o}${this._elipsisPlaceholder}
`);let u="";if(a!==n.length-1&&(u+=`
${o}${this._elipsisPlaceholder}`),r.length>0&&(u+=r),Array.isArray(s))return xr(s.map(l=>{if(l.text.trim().length!==0)return{range:l.range,text:c+l.text+u}}));if(s.text.trim().length!==0)return{range:new Ge(a===0?i.start:s.range.start,s.range.end),text:c+s.text+u}})).flat()}findNewIndent(e,r,n){let o=(this._lookForIndentInHeader?r.text.substring(0,n.startIndex-r.startIndex):n.text).match(new RegExp(`\\n+(\\s*)${e}${this._lookForIndentInHeader?"$":""}`));return o&&o.length>1?o[1]:""}};var Wc=class extends A1{_parseSemanticStructure(e,r,n,i,o){let s=[],a=u=>{let l=[],d=u.info,p=d.mainBlock,f=d.detailBlocks.comments,m=d.detailBlocks.body,h=this._getInnerLineRangeText({text:m.text,range:md(m)}),g=m.startIndex-p.startIndex+h.prefix.length,v=this.findNewIndent(r,p,m),b="";for(let P of f)b+=r+P.text+`
`;let y=r+p.text.substring(0,g),E=b+y,x=md(p);x=x.with(Qh((f.length>0?f[0]:p).range.startPosition,0,-r.length));let R=this.accessor.get(we),L=i*n,O=E.replace(/(\n*)(\n\s*)$/g,`
`),z=R.tokenLength(O);if(z>L&&(O=y,z=R.tokenLength(y),z>L)){O="",z=0;let P=this.chunkWholeText(b+p.text,md(p),n);return l.push(...this._createSummary(O,"",P.content.text,x,r)),l}let N=h.suffix+p.text.substring(m.endIndex-p.startIndex),ce=R.tokenLength(O+`
`+N),J=n-ce,D=o(u.children,h.body,J,r+v);x=new Ge(x.start,Qh(p.range.endPosition)),l.push(...this._createSummary(O,N,D.content.text,x,r+v));let S=Xh(b+r+p.text.substring(0,m.startIndex-p.startIndex));return s.push({summary:S+" "+this._summaryPlaceHolder,range:x}),D.outline!==void 0&&l.push(...this.createOutlineSummary(O,N,J,h.body,D.outline,x,r+v)),l},c=e.map(u=>a(u));return{outline:s,content:c}}_getInnerLineRangeText(e){let r=e.text.replace(/(^\s*\{\s*)|(\s*\}\s*$)/g,""),n=e.text.indexOf(r),i=e.text.substring(0,n),o=e.text.substring(n+r.length),s=(i.match(/\n/g)||[]).length,a=i.match(/\n(.+)$/g)?.length??0,c=(r.match(/\n/g)||[]).length,u=r.match(/\n(.+)$/g)?.length??0,l=new Ht(e.range.start.line+s,s===0?e.range.start.character+a:a),d=new Ht(e.range.start.line+c,c===0?e.range.start.character+u:u),p=i.replace(/\{[^\S\r\n]*/g,"{"),f=o.replace(/\}[^\S\r\n]*/g,"}");return{prefix:p,body:{text:r,range:new Ge(l,d)},suffix:f}}};var H3=class{constructor(e,r){this._text=e;this.accessor=r;this.naiveChunker=new Jh(r)}parse(e){let r=this._getLineRangeText();return this.naiveChunker.genericChunking({lineRangeText:r,maxTokenLength:e,extraLineRangeSeparator:`

`})}_getLineRangeText(){this._text=this._text.replace(/\r\n/g,`
`);let e=this._text.split(`
`),r=[],n=new Ht(0,0),i=[];for(let o=0;o<e.length;o++)if(e[o].trim().length===0){r.length>0&&(i.push({text:r.join(`
`),range:new Ge(n,new Ht(o,e[o].length))}),r.length=0,n=new Ht(o+1,0));continue}else r.push(e[o]);return r.length>0&&i.push({text:r.join(`
`),range:new Ge(n,new Ht(e.length-1,e[e.length-1].length-1))}),i}};var j3=class extends A1{_parseSemanticStructure(e,r,n,i,o){let s=[],a=u=>{let l=[],d=u.info,p=d.mainBlock,f=d.detailBlocks.decorator,m=d.detailBlocks.docstring,h=d.detailBlocks.body,g=p.text.length-1;m?g=m.endIndex-p.startIndex:h&&(g=h.startIndex-p.startIndex);let v=this.findNewIndent(r,p,h),b=f?r+f.text+`
`:"",y=r+p.text.substring(0,g),E=b+y+`
`,x=md(p);f&&(x=x.with(Qh(f.range.startPosition)));let R=this.accessor.get(we),L=i*n,O=E.replace(/\n+\s*$/g,`
`),z=Xh(E),N=R.tokenLength(O);if(N>L&&(O=r+E.substring(0,h.startIndex-p.startIndex),N=R.tokenLength(O),N>L)){O="",N=0;let S=this.chunkWholeText(z+`
`+h.text,md(p),n);return l.push(...this._createSummary(O,"",S.content.text,x,r)),l}x=new Ge(x.start,Qh(p.range.endPosition)),s.push({summary:m?z+`
${v}`+this._summaryPlaceHolder:z+" "+this._summaryPlaceHolder,range:x});let ce={text:h.text,range:md(h)},J=o(u.children,ce,n-N,r+v),D=r+p.text.substring(0,h.startIndex-p.startIndex).replace(/\n+\s*$/g,`
`);return J.content.isFull&&(O=D),l.push(...this._createSummary(O,"",J.content.text,x,r+v)),J.outline!==void 0&&l.push(...this.createOutlineSummary(D,"",n-N,ce,J.outline,x,r+v)),l},c=e.map(u=>a(u));return{outline:s,content:c}}};var SWe=.6;function hd(t){return t!=="python"&&t!=="ruby"?{elipsisPlaceholder:"/*...*/",blockWrap:{start:"{",end:"}"},lookForIndentInHeader:!1}:{}}function k1e(t){switch(Vh(t).languageId){case"typescript":return{parse:(r,n,i)=>new Wc(gd(i,r,"typescript"),i,hd("typescript")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"typescriptreact":return{parse:(r,n,i)=>new Wc(gd(i,r,"tsx"),i,hd("tsx")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"javascript":case"javascriptreact":return{parse:(r,n,i)=>new Wc(gd(i,r,"javascript"),i,hd("javascript")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"python":return{parse:(r,n,i)=>new j3(gd(i,r,"python"),i,hd("python")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"java":return{parse:(r,n,i)=>new Wc(gd(i,r,"java"),i,hd("java")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"cpp":case"c":return{parse:(r,n,i)=>new Wc(gd(i,r,"cpp"),i,hd("cpp")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"csharp":return{parse:(r,n,i)=>new Wc(gd(i,r,"csharp"),i,hd("csharp")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"go":return{parse:(r,n,i)=>new Wc(gd(i,r,"go"),i,hd("go")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"markdown":return{parse:(r,n,i)=>Promise.resolve(new H3(r,i).parse(n.maxTokenLength))};case"ruby":return{parse:(r,n,i)=>new Wc(gd(i,r,"ruby"),i,hd("ruby")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)};case"rust":return{parse:(r,n,i)=>new Wc(gd(i,r,"rust"),i,hd("rust")).parse(n.maxTokenLength,n.maxHeaderLengthFactor)}}}function G3(t){return!!k1e(t)}var PW;async function gd(t,e,r){let n=e.replace(/\r\n/g,`
`),i=t.get(Fr);return PW=PW?.then(()=>i.getSemanticChunkTree(r,n))??i.getSemanticChunkTree(r,n),await PW}async function Zh(t,e,{maxTokenLength:r,uri:n,maxHeaderLengthFactor:i=SWe,shouldSemanticChunk:o=!1}){let s=[];r===void 0&&(r=await TWe(t));try{if(o){let c=await k1e(n)?.parse(e,{maxTokenLength:r,maxHeaderLengthFactor:i},t);c&&s.push(...c.map(u=>({file:n,text:u.text,range:u.range,isFullFile:u.isFullFile})))}}catch(c){let u=t.get(pe).getLogger("WorkspaceChunkSearch");u.error("Error parsing semantic chunks for the following file: "+n.fsPath),u.error(c),s=[]}if(!s.length){let c=new Jh(t).genericWholeFileChunking({text:e,maxTokenLength:r});s.push(...c.map(u=>({file:n,text:u.text,range:u.range,isFullFile:c.length===1})))}let a=t.get(we);for(let c of s){let u=a.tokenLength(c.text);u>r*1.2&&console.warn("Produced chunk that is over length limit",{file:c.file+"",range:c.range,chunkTokenLength:u,maxLength:r})}return s.filter(c=>c.text)}async function TWe(t){return sy(t,{valueFor4096:hw,maxMultiplier:4})}async function sy(t,e){let n=(await t.get(Ye).getNonUserRequestEndpoint()).modelMaxPromptTokens/4096;return P1e(Math.round(e.valueFor4096*n),e.valueFor4096,e.valueFor4096*e.maxMultiplier)}var P1=class{constructor(e,r){this.baseUri=e;this.pattern=r}get base(){throw new Error("Not implemented")}};var CWe=1e5,IWe=1*1024*1024,wWe=new Set(["jpg","jpeg","jpe","png","gif","bmp","tif","tiff","tga","ico","webp","svg","eps","heif","heic","pdf","raw","mp4","m4v","mkv","webm","mov","avi","wmv","flv","mp3","wav","m4a","flac","ogg","wma","weba","aac","7z","bz2","gz","gz","rar","tar","xz","zip","vsix","db","bin","dat","hex","map","wasm","pyc","pdb","sym","git"]),RWe=["node_modules","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],AWe=[".DS_Store","Thumbs.db","package-lock.json","yarn.lock"],PWe=["vscode","vscode-userdata","output","inmemory","private","git"];function ay(t,e){if(PWe.includes(t.scheme)||e&&!["file","untitled"].includes(t.scheme)&&!e.getWorkspaceFolders().some(i=>t.scheme===i.scheme))return!1;let r=Oa(t).replace(/\./,"").toLowerCase();return!(wWe.has(r)||AWe.includes(sc(t).toLowerCase())||t.fsPath.toLowerCase().split(/[/\\]/g).some(i=>RWe.includes(i)))}async function kWe(t,e=CWe,r){let n=t.get(it),i=t.get(uc),o=t.get(st);if(await o.init(),r?.isCancellationRequested)return[];let s=new mn;for(let a of n.getWorkspaceFolders()??[]){if(s.size>=e)break;let c=await i.findFilesWithDefaultExcludes(new P1(a,"**/*"),e-s.size,r);if(r?.isCancellationRequested)return[];for(let u of c){let l=await o.isCopilotIgnored(u);ay(u,n)&&!l&&s.set(u)}}return s.keys()}var V3=class{constructor(e,r){this._uri=e;this._accessor=r;this._isDisposed=!1;this._disposedCts=new Gee}dispose(){this._isDisposed=!0,this._disposedCts.cancel(),this._disposedCts.dispose()}get uri(){return this._uri}async getHash(e){if(this._hash===void 0){let r=await this.getText(e);r!==void 0&&(this._hash=(0,D1e.createHash)("sha256").update(r).digest("hex"))}return this._hash}async getBasicChunks(e){return this._basicChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:Zh(this._accessor,r,{uri:this._uri,shouldSemanticChunk:!1})),await ob(this._basicChunks,e)??[]}async getSemanticChunks(e){return G3(this.uri)?(this._semanticChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:Zh(this._accessor,r,{uri:this._uri,shouldSemanticChunk:!0})),await ob(this._semanticChunks,e)??[]):this.getBasicChunks(e)}},kW=class extends V3{constructor(r,n,i){super(r,n);this._fs=i}async getText(r){return this._text??=this._fs.readFile(this.uri).then(async n=>this._isDisposed||n.byteLength>=IWe||await(0,N1e.isBinaryFile)(Buffer.from(n))||this._isDisposed?"":new L1e.TextDecoder().decode(n),n=>""),await ob(this._text,r)??""}},z3=class extends V3{constructor(r,n){super(r.uri,n);this._textDocument=r}async getText(r){return this._textDocument.getText()}},Yc=re("workspaceChunkIndex"),$3=class{constructor(e){this._textDocumentFiles=new mn;this._fsFiles=new mn;this._disposables=[];this._listeners=new Set;this._accessor=e,this._fileSystem=e.get(Cn)}get size(){return this._fsFiles.size}dispose(){this._disposables.forEach(e=>e.dispose());for(let e of this._fsFiles.values())e.dispose();this._fsFiles.clear();for(let e of this._textDocumentFiles.values())e.dispose();this._textDocumentFiles.clear()}get(e){return this._textDocumentFiles.get(e)||this._fsFiles.get(e)}*entries(){let e=new mn;for(let[r,n]of this._textDocumentFiles.entries())yield[r,n],e.set(r);for(let[r,n]of this._fsFiles.entries())e.has(r)||(e.set(r),yield[r,n])}*keys(){for(let[e]of this.entries())yield e}*values(){for(let[e,r]of this.entries())yield r}addListener(e){return this._listeners.has(e)?{dispose:()=>{}}:(this._listeners.add(e),{dispose:()=>{this._listeners.delete(e)}})}registerListeners(){let e=this._accessor.get(it),r=this._accessor.get(Cn),n=this._accessor.get(it),i=s=>{if(!ay(s.uri,n))return;let a=this._textDocumentFiles.get(s.uri),c=this._fsFiles.get(s.uri);a&&a.dispose(),this._textDocumentFiles.set(s.uri,new z3(s,this._accessor)),!a&&!c?this._listeners.forEach(u=>u.onDidCreateFile?.(s.uri)):this._listeners.forEach(u=>u.onDidChangeFile?.(s.uri))};this._disposables.push(e.onDidOpenTextDocument(i)),this._disposables.push(e.onDidChangeTextDocument(s=>i(s.document))),this._disposables.push(e.onDidCloseTextDocument(s=>{let a=this._textDocumentFiles.get(s.uri);if(!a)return;this._textDocumentFiles.delete(s.uri),a.dispose(),this._fsFiles.get(s.uri)?this._listeners.forEach(u=>u.onDidChangeFile?.(s.uri)):this._listeners.forEach(u=>u.onDidDeleteFile?.(s.uri))}));let o=r.createFileSystemWatcher("**/*");this._disposables.push(o),this._disposables.push(o.onDidChange(s=>{if(!ay(s,n))return;let a=this._fsFiles.has(s);this.createOrUpdateFsEntry(s),a?this._listeners.forEach(c=>c.onDidChangeFile?.(s)):this._listeners.forEach(c=>c.onDidCreateFile?.(s))})),this._disposables.push(o.onDidCreate(s=>{ay(s,n)&&(this._fsFiles.has(s)||(this.createOrUpdateFsEntry(s),this._listeners.forEach(a=>a.onDidCreateFile?.(s))))})),this._disposables.push(o.onDidDelete(s=>{let a=this._fsFiles.get(s);a&&(a.dispose(),this._fsFiles.delete(s),this._listeners.forEach(c=>c.onDidDeleteFile?.(s)))}))}initialize(){return this._initializedWorkspacePromise??=(async()=>{this.registerListeners();let e=this._accessor.get(it);await e.ensureWorkspaceIsFullyLoaded();for(let n of e.textDocuments)ay(n.uri,e)&&this._textDocumentFiles.set(n.uri,new z3(n,this._accessor));let r=await kWe(this._accessor,void 0,Gr.None);for(let n of r)this.createOrUpdateFsEntry(n)})(),this._initializedWorkspacePromise}createOrUpdateFsEntry(e){let r=this._fsFiles.get(e);r&&r.dispose();let n=new kW(e,this._accessor,this._fileSystem);this._fsFiles.set(e,n)}};var DWe="1.0.8",eg=re("IWorkspaceChunkEmbeddingsIndex"),vd=class{constructor(e){this._accessor=e;this._embeddingsMemoryCache=new Map;this.shouldSearchTimeout=!0;this._embeddingsComputer=e.get(Vi),this._workspaceIndex=e.get(Yc),this._embeddingsStorageCache=new pb(e,2,"workspaceEmbeddingsCache",DWe),this._logger=e.get(pe).getLogger("WorkspaceChunkEmbeddingsIndex"),this.loadCacheFromStorage()}static{this._MAX_EMBEDDINGS_COMPUTATION_TIME=1e4}static{this._MAX_CHUNK_LENGTH=2e3}get size(){return this._workspaceIndex.size}workspaceEmbeddingsInitialized(){return this._initializedWorkspacePromise??=this._workspaceIndex.initialize(),this._initializedWorkspacePromise}async triggerIndexing(e){let r=Array.from(this._workspaceIndex.values()),n=new Array;for(let o of r){let s=await o.getSemanticChunks(e);s=s.filter(a=>a.text.length<vd._MAX_CHUNK_LENGTH),n.push(...s)}if(e.isCancellationRequested)return;let i=await this.getEmbeddings(n,e);this._logger.debug(`Indexed ${i.length} chunks`)}async searchFileChunks(e,r,n,i){let o;if(i)o=i;else{o=new Array;let c=(await Promise.all(Array.from(this._workspaceIndex.values(),u=>u.getSemanticChunks(n)))).flat();if(n.isCancellationRequested)return[];o.push(...c)}o=o.filter(c=>c.text.length<vd._MAX_CHUNK_LENGTH);let s=this.shouldSearchTimeout?await Vd(this.getEmbeddings(o,n),vd._MAX_EMBEDDINGS_COMPUTATION_TIME):await this.getEmbeddings(o,n);if(!s)throw new Error("Timeout computing embeddings");return Lee(e,s,r)}async loadCacheFromStorage(){let e=await this._embeddingsStorageCache.getCache();e||await this._embeddingsStorageCache.clearCache(),this._embeddingsMemoryCache.clear();for(let[r,n]of Object.entries(e??{}))this._embeddingsMemoryCache.set(r,n)}async getEmbeddings(e,r){let n=new Array;for(let s of e){let a=this._embeddingsMemoryCache.get(s.text);a?s.embedding=a:n.push(s)}if(n.length===0)return e;let i=n.map(s=>{let a=Uh(this._accessor.get(it),s.file);return NWe(s,a)}),o=await this.computeEmbeddingsWithRetry(i,r);for(let s=0;s<n.length;s++){let a=n[s];a.embedding=o[s],this._embeddingsMemoryCache.set(a.text,a.embedding)}return e}async computeEmbeddingsWithRetry(e,r){let i=0,o;for(;i<3;)try{if(o=await this._embeddingsComputer.computeEmbeddings(e,r),!o)throw new Error("Failed to compute embeddings");return o}catch(s){if(i++,i===3)throw s;if(r.isCancellationRequested)throw new Error("Cancelled computing embeddings");this._logger.warn(`Error computing embeddings. Retrying in ${i} seconds. Error: ${s}`),await new Promise(a=>setTimeout(a,1e3*i))}throw new Error("Failed to compute embeddings")}};vd=ze([rt(0,Yt)],vd);function NWe(t,e){return`File: \`${e}\`
${xn(L3(t.file),t.text)}`}var F1e=fe(fr());var k1=class extends Error{constructor(r,n){super(n);this.repo=r}},vw=class extends k1{constructor(){super(...arguments);this.name="ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG"}},DW=class extends k1{constructor(){super(...arguments);this.name="ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE"}},NW=class extends k1{constructor(){super(...arguments);this.name="ERROR_TYPE_NOT_INDEXED"}},LW=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_MAX_RETRIES_EXCEEDED"}},OW=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_NO_ACCESS_TO_ENDPOINT"}};function O1e({error:t,message:e,repo:r}){switch(t){case"ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG":return new vw(r,e);case"ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE":return new DW(r,e);case"ERROR_TYPE_NOT_INDEXED":return new NW(r,e);default:return new k1(r,e)}}function MW({error:t,message:e}){switch(t){case"ERROR_TYPE_MAX_RETRIES_EXCEEDED":return new LW(e);case"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT":return new OW(e);default:return new Error(e)}}var W3=re("codeSearchClient"),Y3=re("docsSearchClient");var tg=class extends Jr{constructor(r){super();this._accessor=r}async toSemanticChunks(r,n){let i=this._accessor.get(Yc),o=new mn;for(let a of r){let c=o.get(a.file);c?c.push(a):o.set(a.file,[a])}let s=await Promise.all(Array.from(o,async([a,c])=>{let u=i.get(a);if(u&&G3(a)){let l=await u.getSemanticChunks(n);if(n.isCancellationRequested)return[];let d=new Set;for(let p of c){let f=!1;for(let m of l)m.range.intersection(p.range)&&(d.add(m),f=!0);f||d.add(p)}return Array.from(d)}else return c}));return Array.from(new Set(s.flat()))}};var D1=class extends tg{constructor(r){super(r);this.id="codesearch";this.timeout=5e3;this._codeSearchClient=r.get(W3),this._workspaceChunkIndex=r.get(Yc),this._embeddingsIndex=r.get(eg),this._logger=r.get(pe).getLogger("CodeSearchChunkSearch")}async searchFileChunks(r,n,i){if(!r.length||i.isCancellationRequested)return[];if(await this.initialized(),i.isCancellationRequested)return[];this._logger.debug("Fetching related workspace chunks in repository...");let o=await this.getSimilarFilesFromCodeSearch(r);return o?(this._logger.debug("Remapping chunks to semantic chunks..."),await this.toSemanticChunks(o,i)):[]}async isAvailable(){let r=this._accessor.get(Re).getConfig(ke.WorkspaceCodeSearchEnabled);return!(r===!1||r===void 0&&await this._accessor.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.useCodeSearch",!0)!==!0)}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}async getSimilarFilesFromCodeSearch(r){let n=this._accessor.get(it).getWorkspaceFolders(),i=this._accessor.safeGet(ui)?.repositories;if(!i){if(n.length)throw new Error("No repo contexts available for workspace folders");return}let o=[],s=new Map;for(let l=0;l<i.length;l++){let d=i[l];if(!d)continue;let p=iA(d);p&&(o.push(p),s.set(p,n[l]))}let a=[];for(let l of r)a.push(this._codeSearchClient.search(l.fullText,{repo:o}));let c=await Promise.all(a);return this.processResults(s,c).flat().sort((l,d)=>d.score-l.score)}processResults(r,n){let i=[];for(let o of n){if(o.errors.length){let s=!0;for(let a of r.keys()){let c=o.errors.filter(u=>u.repo===a);if(c){this._logger.debug(`[${a}] Errors when searching codesearch: ${c.map(G2)}`);continue}s=!1}if(s)throw o.errors.length===1?o.errors[0]:new AggregateError(o.errors)}for(let s of o.results){let a=r.get(s.repoOwner+"/"+s.repoName);if(!a){this._logger.error("Could not find workspace folder for repo",s.repoOwner+"/"+s.repoName);continue}let c=this._workspaceChunkIndex.get(gt.joinPath(a,s.path));c&&i.push({file:c.uri,score:s.score,text:s.contents,range:new Ge(s.range.start,0,s.range.end+1,0)})}}return i}};ze([so(r=>r._logger)],D1.prototype,"searchFileChunks",1);var Q3=class Q3 extends tg{constructor(r,n=!1){super(r);this._inTests=n;this.id="ada";this.timeout=5e3;this._embeddingsComputer=r.get(Vi),this._embeddingsIndex=r.get(eg),this._logger=r.get(pe).getLogger("EmbeddingsCacheChunkSearch"),n&&(this._embeddingsIndex.shouldSearchTimeout=!1)}static{this.FILE_CAP=200}async searchFileChunks(r,n,i){if(!r.length||i.isCancellationRequested)return[];this._logger.debug("Computing embeddings for query...");let o=await this._embeddingsComputer.computeEmbeddings(r.map(s=>s.fullText),i);if(!o){if(this._inTests)throw new Error("Failed to compute query embeddings");return[]}return i.isCancellationRequested?[]:(await this.initialized(),i.isCancellationRequested?[]:(this._logger.debug("Fetching related workspace chunks in repository..."),await this._embeddingsIndex.searchFileChunks(o,n,i)))}async isAvailable(){return this._isAvailable===void 0&&(this._isAvailable=this.doIsAvailable()),this._isAvailable}async doIsAvailable(){return await this.initialized(),this._embeddingsIndex.size<Q3.FILE_CAP&&this.triggerIndexing(),!1}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}triggerIndexing(){this._initializedWorkspacePromise||(this._logger.debug("Starting indexing"),this._initializedWorkspacePromise=this._embeddingsIndex.triggerIndexing(Gr.None).then(()=>{this._isAvailable=Promise.resolve(!0),this._logger.debug("Workspace Chunk Embeddings Index initialized.")}).catch(r=>{this._logger.warn(`Failed to index workspace: ${r}`),this._initializedWorkspacePromise=void 0}))}};ze([so(r=>r._logger)],Q3.prototype,"searchFileChunks",1);var K3=Q3;var M1e=fe(require("path"));function yw(t,e){if(!t)return t;if(Array.isArray(t))return t.map(r=>yw(r,e));if(typeof t=="object"){let r=e(t);if(r)return r;let n={};for(let i in t)n[i]=yw(t[i],e);return n}return t}var LWe=M1e.default.join(__dirname,"tfidfWorker.js"),X3=class extends Jr{constructor(r){super();this.id="tfidf";this.timeout=500;this._tfIdfWorker=new Ao(()=>new Yf(LWe));let n=i=>{let o=this._workspaceIndex.get(i);o&&this.addOrUpdateTfidfEntries([o])};this._workspaceIndex=r.get(Yc),this._register(this._workspaceIndex.addListener({onDidChangeFile:n,onDidCreateFile:n,onDidDeleteFile:i=>{this._tfIdfWorker.value.proxy.delete(i)}}))}dispose(){super.dispose(),this._tfIdfWorker.hasValue&&this._tfIdfWorker.value.terminate()}initialized(){return this._initializePromise??=this._initializeWorkspaceFiles(),this._initializePromise}async searchFileChunks(r,n,i){if(await ob(this.initialized(),i),i.isCancellationRequested)return[];let o=await this._tfIdfWorker.value.proxy.search(r.map(s=>s.keywords.join(", ")),n,-1/0);return MWe(o)}async isAvailable(){return await this.initialized(),!0}async _initializeWorkspaceFiles(){await this._workspaceIndex.initialize(),await this.addOrUpdateTfidfEntries(this._workspaceIndex.values())}async addOrUpdateTfidfEntries(r){let n=new lR(20);this._tfIdfWorker.value.proxy.addOrUpdate(OWe(await Promise.all(Array.from(r,i=>n.queue(async()=>({uri:i.uri,text:await i.getText(Gr.None),chunks:await i.getBasicChunks(Gr.None)}))))))}};function OWe(t){return yw(t,e=>{if(gt.isUri(e))return{$mid:"uri",...e};if(e instanceof Ge)return{$mid:"range",start:{line:e.start.line,character:e.start.character},end:{line:e.end.line,character:e.end.character}}})}function MWe(t){return yw(t,e=>{if(e.$mid==="range")return new Ge(e.start.line,e.start.character,e.end.line,e.end.character);if(e.$mid==="uri")return gt.revive(e)})}var bw=class extends tg{constructor(r){super(r);this.id="tfidf";this.timeout=500;this._tfidf=this._register(new X3(r)),this._logger=r.get(pe).getLogger("TfIdfWithRerankChunkSearch")}async searchFileChunks(r,n,i){this._logger.debug("Performing full workspace search for chunks...");let s=await this._tfidf.searchFileChunks(r,n*2,i);if(i.isCancellationRequested||!s.length)return[];this._logger.debug("Remapping chunks to semantic chunks...");let a=await this.toSemanticChunks(s,i);return i.isCancellationRequested||!a.length?[]:a}isAvailable(){return this._tfidf.isAvailable()}};ze([so(r=>r._logger)],bw.prototype,"searchFileChunks",1);var rg=re("IWorkspaceChunkSearch"),uf=class{constructor(e,r){this._forcedChunkSearchStrategy=e;this._accessor=r;this._workspaceChunkEmbeddingsIndex=this._accessor.get(eg);this._embeddingsComputer=this._accessor.get(Vi);this._logger=this._accessor.get(pe).getLogger("WorkspaceChunkSearch");this._inTests=!!this._forcedChunkSearchStrategy,this._embeddingsCacheChunkSearch=new K3(r,this._inTests),this._codeSearchChunkSearch=new D1(r),this._tfIdfWithSemanticChunkSearch=new bw(r)}dispose(){this._embeddingsCacheChunkSearch.dispose(),this._codeSearchChunkSearch.dispose(),this._tfIdfWithSemanticChunkSearch.dispose()}async triggerIndexing(){await Promise.allSettled([this._tfIdfWithSemanticChunkSearch.isAvailable(),this._embeddingsCacheChunkSearch.isAvailable()])}async searchFileChunks(e,r,n,i){let o=await this.getStrategies();if(i.isCancellationRequested)return[];let s=new Array,a=new Array;for(let p=0;p<o.length;p++)s.push(new Zy),a.push(o[p].searchFileChunks(r,n,s[p].token));try{await Promise.any(a)}catch(p){let f=p;throw f.errors.length===1?f.errors[0]:p}if(i.isCancellationRequested)return[];o.forEach((p,f)=>Vd(a[f],o[f].timeout,()=>{s[f].cancel(),this._logger.warn(`WorkspaceChunkSearch strategy ${o[f].id} timed out`)}));let c=await Promise.allSettled(a);if(i.isCancellationRequested)return[];let u=new Array,l;for(let p=0;p<c.length;p++){let f=c[p],m=o[p];if(f.status==="fulfilled"){l||(l=m.id),u.push(...f.value);continue}else this._logger.debug(`Strategy, ${m.id}, failed with the following error: ${G2(f.reason)}`);if(f.reason instanceof vw&&m instanceof D1)try{if(await this._accessor.get(kt).getPermissiveGitHubToken({silent:!0}))continue;if(await this._accessor.get(kt).getPermissiveGitHubToken({forceNewSession:{detail:F1e.t("To show you more relevant Copilot Chat results, we need permission to read the contents of your repository on GitHub."),learnMore:gt.parse("https://aka.ms/copilotRepoScope")}})){let g=await m.searchFileChunks(r,n,i);l=m.id,u.unshift(...g)}}catch{}}this.reportTopSuccessfulFlow(l);let d=this._accessor.get(st);return u=xr(await Promise.all(u.map(async p=>await d.isCopilotIgnored(p.file)?null:p))),this.rerankChunks(e,r,u,n,i)}async rerankChunks(e,r,n,i,o){return this._accessor.get(Re).getConfig(ke.WorkspaceRerankStrategy)==="model"?this.sortChunksUsingModel(e,r,n,i,o):await this.getShouldUseAda()?o.isCancellationRequested?[]:this.rerankChunksUsingAda(r,n,i,o):n.slice(0,i)}async rerankChunksUsingAda(e,r,n,i){let o=await this._embeddingsComputer.computeEmbeddings(e.map(s=>s.fullText),i);if(i.isCancellationRequested)return[];if(!o){if(this._inTests){let s=new Error("Failed to compute query embeddings");throw this._logger.exception(s),this._accessor.get(Ne).sendGHTelemetryException(s,"Error"),s}return this._logger.warn("Failed to compute query embeddings"),r.slice(0,n)}try{return await this._workspaceChunkEmbeddingsIndex.searchFileChunks(o,n,i,r)}catch(s){return this._logger.warn("Failed to search chunk embeddings index: ",s),r.slice(0,n)}}async sortChunksUsingModel(e,r,n,i,o){let s=this._accessor.get(sr),a=[];for(let c=0;c<n.length;c+=i){let u=n.slice(c,c+i),l=[...a,...u];z2(l);let d=await s.fetchOne([{role:"system",content:`
The user will provide you with question and a numbered list of code snippets.
You are to sort the code snippets by most to least helpful in answering the question.
If a code snippet is not related to the question in possible any way, you may opt not to include it in the list.
Return an ordered list of snippet numbers.
Only return snippet numbers.
Do not explain.
				`.trim()},{role:"user",content:`
Question: ${r[0].fullText}

${l.map((f,m)=>`# Snippet ${m}
 ${xn("",f.text)}`).join(`

`)}
					`.trim()}],async f=>{},o,2,e,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceChunkRerank"});if(o.isCancellationRequested)return[];if(d.type!=="success"){console.warn("Model re-rank failed");continue}let p=new Set(Array.from(d.value.matchAll(/\d+/g),f=>parseInt(f[0])));a=xr(Array.from(p).map(f=>l.at(f))).slice(0,i)}return a}async getStrategies(){let e=new Array;switch(this._forcedChunkSearchStrategy){case"codesearch":e.push(this._codeSearchChunkSearch);break;case"ada":e.push(this._embeddingsCacheChunkSearch);break;case"tfidf":e.push(this._tfIdfWithSemanticChunkSearch);break;default:await this._codeSearchChunkSearch.isAvailable()&&e.push(this._codeSearchChunkSearch),await this.getShouldUseAda()&&await this._embeddingsCacheChunkSearch.isAvailable()&&e.push(this._embeddingsCacheChunkSearch),e.push(this._tfIdfWithSemanticChunkSearch);break}return this._logger.debug(`Using ${e.map(r=>r.id).join(", ")} for chunk search`),e}async getShouldUseAda(){let e=this._accessor.get(Re).getConfig(ke.WorkspaceUseAdaEnabled);return e!==void 0?e:await this._accessor.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.workspaceUseAda",!0)??!0}reportTopSuccessfulFlow(e){this._logger.debug(`'${e}' was the top working workspace chunk search strategy`),this._accessor.get(Ne).sendMSFTTelemetryEvent("workspaceChunkSearchStrategy",{strategy:e??"none"})}};ze([so(e=>e._logger)],uf.prototype,"triggerIndexing",1),ze([so(e=>e._logger)],uf.prototype,"searchFileChunks",1),ze([so(e=>e._logger)],uf.prototype,"rerankChunksUsingAda",1),uf=ze([rt(1,Yt)],uf);var U1e=require("vscode");var _w=class{static{this.version=1}#t;constructor(e){this.#t=e}async selectScope(e,r){if(e??=U1e.window.activeTextEditor,!!e)return this.#t.get(Sb).selectEnclosingScope(e,r)}};var N1=class{constructor(e){let r=Yd(e.get(ft).getEditorInfo().version);this.embeddingsCache=new ol(e,1,"api",r,"api")}async updateIndex(){this.apiChunks=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this.apiChunks)return[];let i=this.apiChunks.map(o=>{if(!o.embedding)return{text:o.text,similarity:0};let s=il(e,o.embedding);return{text:this.toContextString(o),similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.text)}toContextString(e){return e.type==="code"?`Snippet from vscode.d.ts:
${xn(e.lang,e.text)}`:e.type==="command"?`${e.text}`:e.type==="documentationCodeBlock"?`Example code from documentation:
${xn(e.lang,e.text)}`:""}};N1=ze([rt(0,Yt)],N1);var J3=re("IApiEmbeddingsIndex");var UW=class extends Jr{constructor(){super(...arguments);this._contextCtors=[];this._contextResolvers=new Map;this._initialized=!1}get contextResolvers(){return this._contextResolvers.values()}getContextResolver(r){return this._contextResolvers.get(r)}register(r){if(typeof r=="function"){this._handleCtor(r);return}else return this._contextResolvers.set(r.kind,r),wZ(r)&&this._register(r),r}initialize(r){if(this._initialized)return Jr.None;for(this._initialized=!0,this._accessor=r.get(Vy);this._contextCtors.length;){let n=this._contextCtors.pop();this._handleCtor(n)}return this}_handleCtor(r){if(!this._accessor){this._contextCtors.push(r);return}try{let n=this._accessor.createInstance(r);this.register(n)}catch(n){console.error(n)}}},Tr=new UW;var j1e=fe(fr());var BW=3,qW=3,HW=1;function L1(t,e){let r=0;for(let n of e)r+=Z3(t,n);return r+=BW,r}function Z3(t,e){let r=qW;for(let[n,i]of Object.entries(e))i&&(r+=t.tokenLength(i),n==="name"&&(r+=HW));return r}var xw=fe(fr());var $n=class{constructor(e){this.anchor=e}},ec=class{toString(){return Object.getPrototypeOf(this).constructor.name}},bd=class{constructor(e,r){this.request=e;this.sessionId=r;this.status="in-progress";this.contextParts=[];this.references=[]}addReferences(e){this.references=jW([...this.references,...e])}},ju=class t{constructor(e=[]){this.turns=e}copy(){let e=JSON.parse(JSON.stringify(this.turns));return new t(e)}getLatestTurn(){return this.turns[this.turns.length-1]}addTurn(e){this.turns.forEach(r=>r.chatMessages=[]),this.turns.push(e)}removeTurn(e){let r=this.turns.findIndex(n=>n.requestId===e);if(r!==-1)return this.turns.splice(r,1)[0]}insertBeforeLatestTurn(e){this.turns.splice(this.turns.length-1,0,...e)}getState(){return{turns:this.turns}}};function jW(t){let e=new mn,r=[],n=(o,s)=>{if(o.contains(s))return o;if(s.contains(o))return s;let[a,c]=o.start.line<s.start.line?[o,s]:[s,o];if(a.end.line>=c.start.line-1)return new Ge(a.start,c.end)};return t.forEach(o=>{let s=o.anchor;if("variableName"in s)r.push(o);else if(!B1e(s))e.set(s,o);else{let a=e.get(s.uri);if(!a)e.set(s.uri,[o]);else if(!(a instanceof $n)){let c=[],u=s.range;a.forEach(d=>{if("variableName"in d.anchor||!B1e(d.anchor))return;let p=n(u,d.anchor.range);p?u=p:c.push(d.anchor)});let l={uri:s.uri,range:u};e.set(s.uri,[...c,l].sort((d,p)=>d.range.start.line-p.range.start.line||d.range.end.line-p.range.end.line).map(d=>new $n(d)))}}}),[...Array.from(e.keys()).sort((o,s)=>o.fsPath.localeCompare(s.fsPath)).map(o=>{let s=e.get(o);return s||[]}).flat(),...r]}function B1e(t){return"uri"in t&&"range"in t}function eO(t,e=!0){switch(t){case"snippy":return e?xw.t({message:"Sorry, the response matched public code so it was blocked. Please rephrase your prompt. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):xw.t("Sorry, the response matched public code so it was blocked. Please rephrase your prompt.");default:return e?xw.t({message:"Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):xw.t("Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again.")}}function FWe(t,e,...r){return{ctor:t,props:e,children:r.flat()}}function H1e(){throw new Error("This should not be invoked!")}H1e.isFragment=!0;globalThis.vscpp=FWe;globalThis.vscppf=H1e;var X=class{get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e,r){this.props=e,this.accessor=r}};function tO(t){return t instanceof Ke||t instanceof ee||t instanceof tc}var Ew=class extends X{render(){return vscpp(vscppf,null,this.props.children)}},Ke=class extends Ew{constructor(e,r){e.role="system",super(e,r)}},ee=class extends Ew{constructor(e,r){e.role="user",super(e,r)}},tc=class extends Ew{constructor(e,r){e.role="assistant",super(e,r)}},zo=class extends X{render(){return vscpp(vscppf,null,this.props.children)}};var UWe;(e=>e.empty={get:()=>{}})(UWe||={});var mt=class{constructor(e,r,n,i,o){this._accessor=e;this._endpoint=r;this._ctor=n;this._props=i;this._tokenizer=o;this._meta=new Map;this._usedContext=[];this._references=[];this._ignoredFiles=[];this._replyInterpreterFactory=null;this._queue=[];this._root=new $W(null,0,{tokenBudget:this._endpoint.modelMaxPromptTokens,endpoint:this._endpoint});this._queue.push({node:this._root,ctor:this._ctor,props:this._props,children:[]})}getAllMeta(){let e=this._meta;return{get(r){return e.get(r)}}}getMeta(e){return this._meta.get(e)}getUsedContext(){return this._usedContext}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getReplyInterpreterFactory(){return this._replyInterpreterFactory}async _processPromptPieces(e,r){for(;this._queue.length>0;){let n=[];for(let i of this._queue.values()){if(Array.isArray(i.children)&&(i.props=i.props??{},i.props.children=i.children),!i.ctor)throw new Error("Invalid ChatMessage child! Child must be a TSX component that extends PromptElement.");let o=new i.ctor(i.props,this._accessor);i.node.setObj(o),n.push({element:i,promptElementInstance:o})}this._queue.splice(0,this._queue.length),await Promise.all(n.map(({element:i,promptElementInstance:o})=>o.prepare?.(i.node.sizing,e,r).then(s=>i.node.setState(s))));for(let{element:i,promptElementInstance:o}of n){let s=o.render(i.node.getState(),i.node.sizing);if(!s)continue;let a=G1e(s),{flexChildrenSum:c,parentTokenBudgetWithoutLiterals:u}=BWe(this._tokenizer,i,o,a);for(let l of a)this._handlePromptPiece(i,l,c,u)}}}_prioritize(e,r,n){let i=[],o=[],s=0;for(;s<e.length;){if(!e[s].isImplicitLinebreak){let c=e[s-1]?.isImplicitLinebreak?{index:s,precedingLinebreak:s-1}:{index:s};i.push(c),o[s]=null}s+=1}i.sort((c,u)=>r(e[c.index],e[u.index]));let a=this._endpoint.modelMaxPromptTokens-BW;for(;i.length>0;){let c=i.shift(),u=c.index,l=e[u],d=n(l),p;if(c.precedingLinebreak&&(p=e[c.precedingLinebreak],d+=n(p)),d>a)break;o[u]=l,c.precedingLinebreak&&p&&(o[c.precedingLinebreak]=p),a-=d}return{result:o,tokenCount:this._endpoint.modelMaxPromptTokens-a}}async render(e,r){await this._processPromptPieces(e,r);let{result:n,resultChunks:i}=this._root.materialize(),o=new Set,{result:s}=this._prioritize(i,(p,f)=>cy.cmp(p,f),p=>{let f=this._tokenizer.tokenLength(p.text);return o.has(p.message)||(o.add(p.message),f=Z3(this._tokenizer,p.toChatMessage())),f}),a=new Map;for(let p of xr(s)){let f=a.get(p.message)??[];f[p.childIndex]=p,a.set(p.message,f)}let c=[];for(let p of n){let f=a.get(p);f&&(p.chunks=xr(f),c.push(p))}let{result:u,tokenCount:l}=this._prioritize(c,(p,f)=>nO.cmp(p,f),p=>Z3(this._tokenizer,p.toChatMessage()));u.forEach(p=>{p?.reference&&this._references.push(p.reference)});let d=u.map(p=>p?.toChatMessage());return{messages:this._validate(xr(d)),ignoredSomeFiles:this._ignoredFiles.length>0,tokenCount:l,references:jW(this._references)}}_validate(e){let r=e[e.length-1];return r&&r.role!=="user"&&console.error(j1e.t("Sorry, this message is too long. Please try a shorter question.")),e}_handlePromptPiece(e,r,n,i){if(r.kind==="literal"){e.node.appendStringChild(r.value,e.props.priority??Number.MAX_SAFE_INTEGER);return}if(r.kind==="intrinsic"){this._handleIntrinsic(e.node,r.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...r.props},rO(r.children));return}if(r.ctor===zo){this._handleExtrinsicTextChunk(e.node,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...r.props},rO(r.children));return}let o=e.node.createChild({tokenBudget:Math.floor(i*(r.props?.flex??1)/n),endpoint:this._endpoint});this._queue.push({node:o,ctor:r.ctor,props:{priority:e.props.priority,...r.props},children:r.children})}_handleIntrinsic(e,r,n,i){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"replyInterpreter":return this._handleIntrinsicReplyInterpreter(e,n,i)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");let i=Object.getPrototypeOf(r.value).constructor;if(this._meta.has(i))throw new Error(`Duplicate metadata ${i.name}!`);this._meta.set(i,r.value)}_handleIntrinsicLineBreak(e,r,n,i){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(!0,i??Number.MAX_SAFE_INTEGER)}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");this._references.push(...r.value)}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleIntrinsicReplyInterpreter(e,r,n){if(n.length>0)throw new Error("<replyInterpreter /> must not have children!");this._replyInterpreterFactory=r.value}_handleExtrinsicTextChunk(e,r,n){let i=[];for(let o of n){if(o.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");o.kind==="literal"&&i.push(o.value),o.kind==="intrinsic"&&(o.name==="br"?i.push(`
`):this._handleIntrinsic(e,o.name,o.props,rO(o.children)))}e.appendLineBreak(!1),e.appendStringChild(i.join(""),r?.priority??Number.MAX_SAFE_INTEGER)}};function BWe(t,e,r,n){let i=0,o=e.node.sizing.tokenBudget;tO(r)&&(o-=qW,e.props.name&&(o-=HW),e.props.role&&(o-=t.tokenLength(e.props.role)));for(let s of n)s.kind==="literal"?o-=t.tokenLength(s.value):i+=s.props?.flex??1;return{parentTokenBudgetWithoutLiterals:o,flexChildrenSum:i}}function G1e(t){return typeof t>"u"||typeof t=="boolean"?[]:typeof t=="string"||typeof t=="number"?[new zW(String(t))]:qWe(t)?[...rO(t.children)]:typeof t.ctor=="string"?[new GW(t.ctor,t.props,t.children)]:[new VW(t.ctor,t.props,t.children)]}function rO(t){return(t??[]).reduce((e,r)=>(e.push(...G1e(r)),e),[])}var GW=class{constructor(e,r,n){this.name=e;this.props=r;this.children=n;this.kind="intrinsic"}},VW=class{constructor(e,r,n){this.ctor=e;this.props=r;this.children=n;this.kind="extrinsic"}},zW=class{constructor(e,r){this.value=e;this.priority=r;this.kind="literal"}};async function $o(t,e,r,n,i,o,s){let a=new mt(t,e,r,n,i),{messages:c,tokenCount:u,references:l}=await a.render(o,s),d=a.getAllMeta(),p=a.getUsedContext();return{messages:c,tokenCount:u,metadatas:d,usedContext:p,references:l}}var $W=class t{constructor(e=null,r,n){this.parent=e;this.childIndex=r;this._sizing=n;this.kind=0;this._obj=null;this._state=void 0;this._children=[]}set sizing(e){this._sizing=e}get sizing(){return this._sizing}setObj(e){this._obj=e}setState(e){this._state=e}getState(){return this._state}createChild(e){let r=new t(this,this._children.length,e);return this._children.push(r),r}appendStringChild(e,r){this._children.push(new WW(this,e,r))}appendLineBreak(e=!0,r){this._children.push(new iO(this,e,r))}materialize(){let e=[],r=[];return this._materialize(e,r),{result:e,resultChunks:r}}_materialize(e,r){if(tO(this._obj)){if(!this._obj.props.role)throw new Error("Invalid ChatMessage!");let n=[];for(let a of this._children)a.collectLeafs(n);let i=[],o=new nO(this._obj.props.role,this._obj.props.name,this._obj.props.priority,this.childIndex,i,this._obj.props.reference),s=r.length;n.forEach((a,c)=>{a.kind===1?i.push(new cy(o,a.text,a.priority,s++)):a.isExplicit?i.push(new cy(o,`
`,a.priority,s++)):(i.length>0&&i[i.length-1].text!==`
`||i[c-1]&&i[c-1].text!==`
`)&&i.push(new cy(o,`
`,a.priority,s++,!0))}),r.push(...i),e.push(o)}else for(let n of this._children){if(n.kind===1)throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${n.text}"`);if(n.kind===2)throw new Error("Cannot have a line break node outside a ChatMessage!");n._materialize(e,r)}}collectLeafs(e){if(tO(this._obj))throw new Error("Cannot have a ChatMessage nested inside a ChatMessage!");this._obj?.insertLineBreakBefore&&e.push(new iO(this,!1));for(let r of this._children)r.collectLeafs(e)}},cy=class{constructor(e,r,n,i,o=!1){this.message=e;this.text=r;this.priority=n;this.childIndex=i;this.isImplicitLinebreak=o}static cmp(e,r){return e.priority!==void 0&&r.priority!==void 0&&e.priority===r.priority?e.message===r.message?e.childIndex-r.childIndex:r.childIndex-e.childIndex:e.priority!==void 0&&r.priority!==void 0&&e.priority!==r.priority?r.priority-e.priority:e.childIndex-r.childIndex}toChatMessage(){return{role:this.message.role,content:this.text,...this.message.name?{name:this.message.name}:{}}}},nO=class{constructor(e,r,n,i,o,s){this.role=e;this.name=r;this.priority=n;this.childIndex=i;this._chunks=o;this.reference=s}set chunks(e){this._chunks=e.sort(cy.cmp)}get text(){return this._chunks.reduce((e,r,n)=>((n!==this._chunks.length-1||!r.isImplicitLinebreak)&&(e+=r.text),e),"")}toChatMessage(){return{role:this.role,content:this.text,...this.name?{name:this.name}:{}}}static cmp(e,r){return e.priority!==r.priority?(r.priority||0)-(e.priority||0):r.childIndex-e.childIndex}},WW=class{constructor(e,r,n){this.parent=e;this.text=r;this.priority=n;this.kind=1}collectLeafs(e){e.push(this)}},iO=class{constructor(e,r,n){this.parent=e;this.isExplicit=r;this.priority=n;this.kind=2}collectLeafs(e){e.push(this)}};function qWe(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}var xs=class{async buildPrompt(e,r,n,i,o,s){return await(await this.createRenderer(e,r,n,i,o,s)).render(i,s)}};var V1e=require("util");var sO=re("IPromptWorkspaceLabels"),oO=class{constructor(){this.indicators=new Map;this.contentIndicators=new Map;this._labels=[];this.initIndicators()}get labels(){if(this._labels.includes("javascript")&&this._labels.includes("typescript")){let e=this._labels.indexOf("javascript");this._labels.splice(e,1)}return this._labels}async collectContext(e){let r=e.get(it).getWorkspaceFolders();if(r)for(let n=0;n<r.length;n++)await this.addContextForFolders(e,r[n])}async addContextForFolders(e,r){for(let[n,i]of this.indicators.entries())await this.addLabelIfApplicable(e,r,n,i)}async addLabelIfApplicable(e,r,n,i){let o=Is.joinPath(r,n);if(!await e.get(st).isCopilotIgnored(o))try{await e.get(Cn).stat(o),i.forEach(a=>this._labels.push(a));let s=this.contentIndicators.get(n);if(s){let a=await e.get(Cn).readFile(o);try{s(new V1e.TextDecoder().decode(a)).forEach(u=>this._labels.push(u))}catch{}}}catch{}}initIndicators(){this.addIndicator("package.json","javascript","npm"),this.addIndicator("tsconfig.json","typescript"),this.addIndicator("pom.xml","java","maven"),this.addIndicator("build.gradle","java","gradle"),this.addIndicator("requirements.txt","python","pip"),this.addIndicator("Pipfile","python","pip"),this.addIndicator("Cargo.toml","rust","cargo"),this.addIndicator("go.mod","go","go.mod"),this.addIndicator("pubspec.yaml","dart","pub"),this.addIndicator("build.sbt","scala","sbt"),this.addIndicator("build.boot","clojure","boot"),this.addIndicator("project.clj","clojure","lein"),this.addIndicator("mix.exs","elixir","mix"),this.addIndicator("composer.json","php","composer"),this.addIndicator("Gemfile","ruby","bundler"),this.addIndicator("build.xml","java","ant"),this.addIndicator("build.gradle.kts","java","gradle"),this.addIndicator("yarn.lock","yarn"),this.addIndicator("CMakeLists.txt","c++","cmake"),this.addIndicator("vcpkg.json","c++"),this.addIndicator("Makefile","c++","makefile"),this.addContentIndicator("CMakeLists.txt",this.collectCMakeListsTxtIndicators),this.addContentIndicator("package.json",this.collectPackageJsonIndicators)}addIndicator(e,...r){this.indicators.set(e,r)}addContentIndicator(e,r){this.contentIndicators.set(e,r)}collectCMakeListsTxtIndicators(e){function r(s,a,c){try{let u=Array.from(s.matchAll(a));if(u&&u[0]&&u[0][1]){let l=parseInt(u[0][1]);if(c.includes(l))return l}}catch{}}let n=[],i=r(e,/set\s*\(\s*CMAKE_CXX_STANDARD\s*(\d+)/gmi,[98,11,14,17,20,23,26]);i&&n.push(`C++${i}`);let o=r(e,/set\s*\(\s*CMAKE_C_STANDARD\s*(\d+)/gmi,[90,99,11,17,23]);return o&&n.push(`C${o}`),n}collectPackageJsonIndicators(e){let r=[],n=JSON.parse(e),i=n.dependencies,o=n.devDependencies;i&&(i["@angular/core"]&&r.push("angular"),i.react&&r.push("react"),i.vue&&r.push("vue")),o&&o.typescript&&r.push("typescript");let s=n.engines;return s&&(s.node&&r.push("node"),s.vscode&&r.push("vscode extension")),r}};var Ra=class extends X{async prepare(){let e=this.accessor.get(sO);return await e.collectContext(this.accessor),{labels:[...new Set(e.labels)].sort()}}render(e,r){if(e.labels.length!==0)return vscpp(vscppf,null,vscpp(ee,{priority:this.props.priority},"I am working on a project of the following nature:",vscpp("br",null),e.labels.reduce((n,i)=>`${n}
- ${i}`,"").trim()))}};var YW=class{constructor(){this.kind="project-labels"}async resolveContext(e,r){let{messages:n}=await $o(e,r.endpoint,Ra,{},e.get(we));if(n.length>0)return{kind:this.kind,userMessages:n.map(i=>i.content)}}},njt=Tr.register(new YW);var no=fe(require("vscode"));var vi=new class{constructor(){this.commands=new Set}registerCommand(t){this.commands.add(t)}getCommand(t,e){return this.getCommands(e).find(r=>r.commandId===t)}getCommands(t){return Array.from(this.commands.values()).filter(e=>e.locations.includes(t))}};var ng={workspace:{explain:"explain",tests:"tests",fix:"fix",new:"new",newNotebook:"newNotebook",semanticSearch:"semanticSearch",fixTestFailure:"fixTestFailure"},vscode:{search:"search",api:"api"},terminal:{explain:"terminalExplain"}};function z1e(t){if(Object.keys(ng).includes(t))return{agent:t};for(let[e,r]of Object.entries(ng))if(Object.values(r).includes(t))return{agent:e,command:t}}var ig=re("IConversationStore"),aO=class{constructor(){this.conversationMap=new Map}addConversation(e,r){this.conversationMap.set(e,r)}getConversation(e){return this.conversationMap.get(e)}};var O1=class t{constructor(e,r){this.accessor=e;this.outputChannelProvider=r;this.requestCount=-1;this.logger=e.get(pe).getPromptResponseLogger("chat")}logRequest(e){this.requestCount++,this.logInfo("REQUEST",`User:${this.headerSeparator()}${this.printMessageContent(e.message)}`)}logMessages(e){this.logInfo("PROMPT MESSAGES",e.map(r=>`${this.getDisplayName(r)}:${this.headerSeparator()}${this.printMessageContent(r.content)}`).join(`
`))}logProgress(e,r){let n=typeof e.value=="string"?e.value:e.value.value;n&&(r?this.logInfo("RESPONSE",`Assistant:	${n}`,!1):this.logInfo("",`${n.replaceAll(/\r?\n/g,`
`+this.bodySeparator())}`,!1))}logResponse(e){this.logInfo("",""),e.errorDetails&&this.logInfo("ERROR DETAILS",JSON.stringify(e.errorDetails,void 0,4))}logFollowups(e){this.logInfo("FOLLOWUPS","Followups:	"+e.map((r,n)=>`${r.label??r.prompt}
${this.bodySeparator()}`).join(`
${this.bodySeparator()}`))}logThrownError(e){this.logInfo("THROWN ERROR",e.stack?e.stack:e.message)}logIntent(e,r){this.logInfo("INTENT",e!==void 0?`User intent determined to be '${e}' via the ${r?"user":"model"}`:"Intent could not be determined")}logInfo(e,r,n=!0){if(!this.accessor.get(Re).getConfig(ke.ConversationLoggingEnabled))return;let o=new Date().toISOString();e&&(r=`[${e} ${this.requestCount}]
${r}`,r=`${o} [info] ${r}`),t.outputChannel===void 0&&(t.outputChannel=this.outputChannelProvider()),n?(this.logger.info(r+`
`),t.outputChannel.appendLine(r+`
`)):(this.logger.info(r),t.outputChannel.append(r))}printMessageContent(e){return e.split(`
`).join(`
${this.bodySeparator()}`)}headerSeparator(){return"		"}bodySeparator(){return"			"}getDisplayName(e){let r=this.getDisplayRole(e.role),n=e.name;return n?`${r} (${n})`:r}getDisplayRole(e){switch(e){case"system":return"System";case"user":return"User";case"assistant":return"Assistant"}}};var Ed=fe(fr());function Sw(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function $1e(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}function W1e(t){if(typeof t!="object"||t===null||!("details"in t))return!1;let{details:e}=t;return typeof e=="object"&&e!==null&&"type"in e&&"description"in e&&typeof e.type=="string"&&typeof e.description=="string"}function Y1e(t){let e=(i,o,s)=>{let a="",c=s?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ";if(o===1?a=`${c}${i.name}
`:o>1&&(a=`|   ${"    ".repeat(o-2)}${c}${i.name}
`),i.children){let u=i.children.length-1;i.children.forEach((l,d)=>{a+=e(l,o+1,d===u)})}return a},r=`${t.baseUri.path.replace("/","")}
`,n=t.value.length-1;return t.value.forEach((i,o)=>{r+=e(i,1,o===n)}),`\`\`\`filetree
${r}\`\`\`
`}var HWe="vscode-notebook-cell";function Cr(t){return t.scheme===HWe||t.scheme==="untitled"&&t.fragment.startsWith("notebook-chat-input")}var M1=class{constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},Tw=class{constructor(e){this.lines=e}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.lines[r].trim();return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},og=class{static Assert(e,r){if(!e)throw new Error(r)}},sg=class{static Copy(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}static Copy2(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}};var cO=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new M1(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},uO=class t{constructor(e,r){let[n,i]=t._getElements(e),[o,s]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=s,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let l;return n<=i?(og.Assert(e===r+1,"originalStart should only be one more than originalEnd"),l=[new M1(e,0,n,i-n+1)]):e<=r?(og.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[new M1(e,r-e+1,n,0)]):(og.Assert(e===r+1,"originalStart should only be one more than originalEnd"),og.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[]),l}let o=[0],s=[0],a=this.ComputeRecursionPoint(e,r,n,i,o,s),c=o[0],u=s[0];if(a!==null)return a;{let l=this.ComputeDiffRecursive(e,c,n,u),d=this.ComputeDiffRecursive(c+1,r,u+1,i);return this.ConcatenateChanges(l,d)}}WALKTRACE(e,r,n,i,o,s,a,c,u,l,d,p,f,m,h,g,v){let b=null,y=null,E=new cO,x=r,R=n,L=f[0]-g[0]-i,O=-1073741824,z=this.m_forwardHistory.length-1;do{let N=L+e;N===x||N<R&&u[N-1]<u[N+1]?(d=u[N+1],m=d-L-i,d<O&&E.MarkNextChange(),O=d,E.AddModifiedElement(d+1,m),L=N+1-e):(d=u[N-1]+1,m=d-L-i,d<O&&E.MarkNextChange(),O=d-1,E.AddOriginalElement(d,m+1),L=N-1-e),z>=0&&(u=this.m_forwardHistory[z],e=u[0],x=1,R=u.length-1)}while(--z>=-1);b=E.getReverseChanges(),E=new cO,x=s,R=a,L=f[0]-g[0]-c,O=1073741824,z=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let N=L+o;N===x||N<R&&l[N-1]>=l[N+1]?(d=l[N+1]-1,m=d-L-c,d>O&&E.MarkNextChange(),O=d+1,E.AddOriginalElement(d+1,m+1),L=N+1-o):(d=l[N-1],m=d-L-c,d>O&&E.MarkNextChange(),O=d,E.AddModifiedElement(d+1,m+1),L=N-1-o),z>=0&&(l=this.m_reverseHistory[z],o=l[0],x=1,R=l.length-1)}while(--z>=-1);return y=E.getChanges(),this.ConcatenateChanges(b,y)}ComputeRecursionPoint(e,r,n,i,o,s){let a=0,c=0,u=0,l=0,d=0,p=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=r-e+(i-n),m=f+1,h=new Int32Array(m),g=new Int32Array(m),v=i-n,b=r-e,y=e-n,E=r-i,R=(b-v)%2===0;h[v]=e,g[b]=r;for(let L=1;L<=f/2+1;L++){let O=0,z=0;u=this.ClipDiagonalBound(v-L,L,v,m),l=this.ClipDiagonalBound(v+L,L,v,m);for(let N=u;N<=l;N+=2){N===u||N<l&&h[N-1]<h[N+1]?a=h[N+1]:a=h[N-1]+1,c=a-(N-v)-y;let ce=a;for(;a<r&&c<i&&this.ElementsAreEqual(a+1,c+1);)a++,c++;if(h[N]=a,a+c>O+z&&(O=a,z=c),!R&&Math.abs(N-b)<=L-1&&a>=g[N])return o[0]=a,s[0]=c,ce<=g[N]&&1447>0&&L<=1448?this.WALKTRACE(v,u,l,y,b,d,p,E,h,g,a,r,o,c,i,s,R):null}d=this.ClipDiagonalBound(b-L,L,b,m),p=this.ClipDiagonalBound(b+L,L,b,m);for(let N=d;N<=p;N+=2){N===d||N<p&&g[N-1]>=g[N+1]?a=g[N+1]-1:a=g[N-1],c=a-(N-b)-E;let ce=a;for(;a>e&&c>n&&this.ElementsAreEqual(a,c);)a--,c--;if(g[N]=a,R&&Math.abs(N-v)<=L&&a<=h[N])return o[0]=a,s[0]=c,ce>=h[N]&&1447>0&&L<=1448?this.WALKTRACE(v,u,l,y,b,d,p,E,h,g,a,r,o,c,i,s,R):null}if(L<=1447){let N=new Int32Array(l-u+2);N[0]=v-u+1,sg.Copy2(h,u,N,1,l-u+1),this.m_forwardHistory.push(N),N=new Int32Array(p-d+2),N[0]=b-d+1,sg.Copy2(g,d,N,1,p-d+1),this.m_reverseHistory.push(N)}}return this.WALKTRACE(v,u,l,y,b,d,p,E,h,g,a,r,o,c,i,s,R)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return sg.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],sg.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return sg.Copy(e,0,i,0,e.length),sg.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(og.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),og.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(a=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new M1(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=r%2===0;if(e<0){let c=o%2===0;return a===c?0:1}else{let c=s%2===0;return a===c?i-1:i-2}}};function X1e(t,e){let r=t.getText().split(/\r|\n|\r\n/g),n=e||{tabSize:4},o=GWe({getLineCount:()=>r.length,getLineContent:a=>r[a-1],getOptions:()=>n},t.languageId),[s]=J1e(t,XW(t.languageId),o,void 0);return s}function J1e(t,e,r,n){if(typeof n<"u"&&n>=r.length)throw new Error(`Invalid region index ${n}`);let i,o,s;if(typeof n>"u")i=1,o=t.lineCount,s=1;else{if(i=r.getStartLineNumber(n),o=r.getEndLineNumber(n),e)i++;else if(o<t.lineCount){let c=t.lineAt(o).text.trim();/^[\}\]\)]$/.test(c)&&o++}s=i+1}let a=[];for(n=typeof n>"u"?0:n+1;n<r.length;){let c=r.getStartLineNumber(n),u=r.getEndLineNumber(n);if(c>o||u>o)break;for(let f=s;f<c;f++){let m=K1e(t,f);m&&a.push(m)}let[l,d,p]=J1e(t,XW(t.languageId),r,n);a.push(l),n=d,s=p}for(let c=s;c<o;c++){let u=K1e(t,c);u&&a.push(u)}return[jWe(t,i,o,a),n,o+1]}function K1e(t,e){let r=t.lineAt(e-1);if(r.isEmptyOrWhitespace)return null;let n=t.offsetAt(r.range.start),i=t.offsetAt(r.range.end);return new Kf(n,i,"LINE",[])}function jWe(t,e,r,n){let i=t.offsetAt(new Ht(e-1,0)),o=t.offsetAt(new Ht(r-1,t.lineAt(r-1).text.length));return new Kf(i,o,"FOLD",n)}function GWe(t,e){return VWe(t,XW(e))}function XW(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}function VWe(t,e){let r=t.getOptions().tabSize,n=new KW,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let s=t.getLineCount();s>0;s--){let a=t.getLineContent(s),c=$We(a,r),u=i[i.length-1];if(c===-1){e&&(u.endAbove=s);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let l=u.endAbove-1;l-s>=1&&n.insertFirst(s,l,c)}u.indent===c?u.endAbove=s:i.push({indent:c,endAbove:s,line:s})}return n.toIndentRanges()}var zWe=65535,uy=16777215,Q1e=4278190080,KW=class{constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>uy||r>uy)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new QW(e,r)}};function $We(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}var QW=class{constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=(n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i};for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],s=this._endIndexes[n];if(o>uy||s>uy)throw new Error("startLineNumber or endLineNumber must not exceed "+uy);for(;e.length>0&&!r(o,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&uy}getEndLineNumber(e){return this._endIndexes[e]&uy}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&Q1e)>>>24)+((this._endIndexes[e]&Q1e)>>>16);return r===zWe?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};function eEe(t,e,r){let n=Z1e(t,e,r.start),i=Z1e(t,e,r.end),o=t.offsetAt(r.start),s=t.offsetAt(r.end);return n&&(o=Math.min(o,n.startIndex),s=Math.max(s,n.endIndex)),i&&(o=Math.min(o,i.startIndex),s=Math.max(s,i.endIndex)),cc(t,{startIndex:o,endIndex:s})}async function tEe(t,e,r,n){let i=t.get(Fr),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(oo),a=na(r,e),c=await Kc(t,e,n,()=>o.getCallExpressions(a),[]);async function u(m){let h=e.positionAt(m.startIndex);try{let g=await s.getImplementations(e.uri,h);return g.length?g:await s.getDefinitions(e.uri,h)}catch{return[]}}let l=await Kc(t,e,n*3,()=>Promise.all(c.map(u)),[]),d=[];for(let m=0;m<l.length;m++){let h=c[m],g=l[m];for(let v of g){let{uri:b,range:y}=Jd(v)?{uri:v.targetUri,range:v.targetRange}:v,E=await t.get(it).openTextDocument(b),x=i.getTreeSitterAST(E);if(x){let L=(await x.getFunctionDefinitions()).find(O=>O.identifier===h.identifier);if(L){let O=na(y,E);d.push({uri:b,range:y,version:E.version,identifier:h.identifier,startIndex:O.startIndex,endIndex:O.endIndex,text:L.text})}}}}if(d.length!==0)return d;let p=await Kc(t,e,n,()=>o.getFunctionDefinitions(),[]),f=[];for(let m of p)for(let h of c)m.identifier===h.identifier&&f.push(m);return f.sort((m,h)=>m.startIndex-h.startIndex)}async function rEe(t,e,r,n){let i=t.get(Fr),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(oo),a=na(r,e),c=await Kc(t,e,n,()=>o.getClassReferences(a),[]),u=await Kc(t,e,n*3,async()=>await Promise.all(c.map(async f=>{try{let m=e.positionAt(f.startIndex),h=await s.getImplementations(e.uri,m);return h.length?h:await s.getDefinitions(e.uri,m)}catch{return[]}})),[]),l=[];for(let f=0;f<u.length;f++){let m=c[f],h=u[f];for(let g of h){let{uri:v,range:b}=Jd(g)?{uri:g.targetUri,range:g.targetRange}:g,y=await t.get(it).openTextDocument(v),E=i.getTreeSitterAST(y);if(E){let x=(await E.getClassDeclarations()).find(R=>R.identifier===m.identifier);if(x){let R=na(b,y);l.push({uri:v,range:b,version:y.version,identifier:m.identifier,startIndex:R.startIndex,endIndex:R.endIndex,text:x.text})}}}}if(l.length!==0)return l;let d=await Kc(t,e,n,()=>o.getClassDeclarations(),[]),p=[];for(let f of d)for(let m of c)f.identifier===m.identifier&&p.push(f);return p.sort((f,m)=>f.startIndex-m.startIndex)}async function nEe(t,e,r,n){let o=t.get(Fr).getTreeSitterAST(e);if(!o)return[];let s=na(r,e),a=await Kc(t,e,n,()=>o.getTypeReferences(s),[]),c=await Kc(t,e,n,()=>o.getTypeDeclarations(),[]),u=[];for(let l of c)for(let d of a)l.identifier===d.identifier&&u.push(l);return u.sort((l,d)=>l.startIndex-d.startIndex)}function Z1e(t,e,r){let n=t.offsetAt(r),i=null;for(let o of e)if(!(o.endIndex<n)){if(o.startIndex>n)break;i=o}return i}function WWe(t,e){return e===0?t.then(r=>({type:"success",value:r})):new Promise((r,n)=>{let i=setTimeout(()=>r({type:"timeout"}),e);t.then(o=>{clearTimeout(i),r({type:"success",value:o})}).catch(o=>{clearTimeout(i),n(o)})})}async function YWe(t,e,r){let i=t.get(Fr).getTreeSitterAST(e);if(!i)return[];let o=await Kc(t,e,r,()=>i.getFunctionPositions(),[]);return o.sort((s,a)=>s.startIndex-a.startIndex),o}async function JW(t,e,r){let i=t.get(Fr).getTreeSitterAST(e);if(!i)return[];let o=await Kc(t,e,r,()=>i.getFunctionBodies(),[]);return o.sort((s,a)=>s.startIndex-a.startIndex),KWe(o)}function KWe(t){t.sort((r,n)=>r.startIndex-n.startIndex||n.endIndex-r.endIndex);let e=[];for(let r=0,n=t.length;r<n;){e.push(t[r]);let i=r+1;for(;i<t.length&&ko.doesContain(t[r],t[i]);)++i;r=i}return e}async function Kc(t,e,r,n,i){let o=t.get(pe).getLogger("asyncCompute");try{let s=await WWe(iEe(e,n,i),r);return s.type==="success"?s.value:(o.info(`Computing async parser based result took longer than ${r}ms`),i)}catch(s){return s instanceof xA||(o.exception(s,"Failed to compute async parser based result"),t.get(Ne).sendGHTelemetryException(s,"Failed to compute async parser based result")),i}}async function iEe(t,e,r,n=0){let i=t.version,o=await e();return t.version!==i?n<3?iEe(t,e,r,n+1):r:o}var Ui=class t{static forDocument(e,r){return this.forUri(e,r.uri)}static forUri(e,r){return`${this.forLanguage(e)}: ${r.path}`}static forLanguage(e){return`${e.lineComment.start} FILEPATH`}static testLine(e,r){let n=t.forLanguage(e);return r.trimStart().startsWith(n)}};var Wo=class{static begin(e,r){return typeof r>"u"?`${e.lineComment.start} BEGIN:`:`${e.lineComment.start} BEGIN: ${r}`}static end(e,r){return typeof r>"u"?`${e.lineComment.start} END:`:`${e.lineComment.start} END: ${r}`}};function lf(t){return/```[\s\S]+\n```/m.test(t)}function lO(t){return t.split("```",1)[0].match(/^.+/)?.[0]??""}var QWe={analysisTimeoutMs:100};async function dO(t,e,r){let i=await t.get(Fr).getTreeSitterAST(e)?.getStructure();return i||X1e(e,r)}async function oEe(t,e,r){let n=t.get(Mr).extensionMode===is.Test?0:QWe.analysisTimeoutMs,i=Date.now(),o=await YWe(t,e,n),s=Date.now()-i,a=n===0?0:Math.max(10,n-s),c=await JW(t,e,a);return{wholeRange:e.validateRange(r),functionPositions:o,functionBodies:c}}var Bi=class extends ec{constructor(r,n){super();this.wholeRange=r;this.contextInfo=n}};(e=>{function t(r){return r instanceof e}e.is=t})(Bi||={});var ZW=class{constructor(){this.spacesDiff=0;this.looksLikeAlignment=!1}};function XWe(t,e,r,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=t.charCodeAt(o),f=r.charCodeAt(o);if(p!==f)break}let s=0,a=0;for(let p=o;p<e;p++)t.charCodeAt(p)===32?s++:a++;let c=0,u=0;for(let p=o;p<n;p++)r.charCodeAt(p)===32?c++:u++;if(s>0&&a>0||c>0&&u>0)return;let l=Math.abs(a-u),d=Math.abs(s-c);if(l===0){i.spacesDiff=d,d>0&&0<=c-1&&c-1<t.length&&c<r.length&&r.charCodeAt(c)!==32&&t.charCodeAt(c-1)===32&&t.charCodeAt(t.length-1)===44&&(i.looksLikeAlignment=!0);return}if(d%l===0){i.spacesDiff=d/l;return}}function ly(t,e,r){let n=Math.min(t.length,1e4),i=0,o=0,s="",a=0,c=[2,4,6,8,3,5,7],u=8,l=[0,0,0,0,0,0,0,0,0],d=new ZW;for(let m=0;m<n;m++){let h=t[m],g=h.length,v=!1,b=0,y=0,E=0;for(let R=0,L=g;R<L;R++){let O=h.charCodeAt(R);if(O===9)E++;else if(O===32)y++;else{v=!0,b=R;break}}if(!v||(E>0?i++:y>1&&o++,XWe(s,a,h,b,d),d.looksLikeAlignment&&!(r&&e===d.spacesDiff)))continue;let x=d.spacesDiff;x<=u&&l[x]++,s=h,a=b}let p=r;i!==o&&(p=i<o);let f=e;if(p){let m=p?0:.1*n;c.forEach(h=>{let g=l[h];g>m&&(m=g,f=h)}),f===4&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(f=2)}return{insertSpaces:p,tabSize:f}}function JWe(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?~r:r}function ag(t,e){let r=JWe(t,e);return r<0?Math.floor(~r/e):Math.floor(r/e)}function ZWe(t,e){return t+e-t%e}function eYe(t,e,r){let n=0;for(let o=0;o<t.length;o++)t.charAt(o)==="	"?n=ZWe(n,e):n++;let i="";if(!r){let o=Math.floor(n/e);n=n%e;for(let s=0;s<o;s++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function eY(t,e,r){let n=ZZ(t);return n===-1&&(n=t.length),eYe(t.substring(0,n),e,r)+t.substring(n)}var qi=class{constructor(e,r,n,i="",o=`
`){this.firstLineIndex=e;this.endLineIndex=r;this.lines=n;this.prefix=i;this.suffix=o}toTextEdit(){let e=this.lines.length>0?this.prefix+this.lines.join(`
`)+this.suffix:"";return zi.replace(new Ge(this.firstLineIndex,0,this.endLineIndex,0),e)}},cg;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t;function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e})(cg||={});var dy=class t{constructor(e,r){this.text=e;this.languageId=r}static fromDocumentContext(e){return new t(e.document.getText(),e.language.languageId)}};function py(t,e,r,n,i,o){let s=cg.fromString(r);if(s.length===e.range.lines.length&&e.range.lines.every((d,p)=>d===s[p]))return[];let a=[],c=!1;for(let d of s){let p=pO(e,d);p===null?a.push(d):(p.type==="fakestart"||p.type==="fakend")&&(c=!0)}let u;if(n===4)u=new qi(e.range.lastLineIndex,e.range.lastLineIndex,s);else{let d=nYe(e,s,i),p=lYe(t,e,a,i);if(!d)u=p;else if(!p)u=d;else{let f=sEe(d);sEe(p)<f?u=p:u=d}u||(u=rYe(t,e,n,i,c,a))}o&&(u=tYe(o,u,i));let l=[u];return o&&(l=iYe(o,l)),l.map(d=>d.toTextEdit())}function tYe(t,e,r){let n=t.text.split(/\r\n|\r|\n/g),i=n.slice(0,e.firstLineIndex),o=n.slice(e.endLineIndex),s=e.lines.slice(0),[,a]=cEe(i,s);a>0&&s.splice(0,a),a>0&&(s=ug(s,{whichLine:"bottomMost",lines:i.slice(i.length-a)},r).slice(0));let[c]=cEe(s,o);return c>0&&s.splice(s.length-c,c),new qi(e.firstLineIndex,e.endLineIndex,s)}function rYe(t,e,r,n,i,o){let s=t.get(pe).getLogger("editGeneration");return i?(s.info("(case 6) Appending to selected code"),uEe(e.range,o,n)):r===3?(s.info("(case 7) Appending to selected code"),uEe(e.range,o,n)):r===1?(s.info("(case 8) Prepending to selected code"),mYe(e.range,ug(o,e.range.lines.filter(a=>a.trim()!=="").length>0?{whichLine:"topMost",lines:e.range.lines}:{whichLine:"bottomMost",lines:e.above.lines},n))):(s.info("(Default) Replacing selected code"),_d(e.range,o,n))}function sEe(t){let e=t.endLineIndex-t.firstLineIndex,r=t.lines.length;return e+r}function nYe(t,e,r){let n=null,i=[];for(let o of e){let s=pO(t,o);if(s===null){i.push(o);continue}if(n){if(s.type==="end"&&s.endMarker===n)return _d(n,i,r);if(s.type==="end"&&n===t.above&&s.endMarker===t.range){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),_d(a,i,r)}if(s.type==="end"&&n===t.above&&s.endMarker===t.below){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),a.mergeFromBelow(t.below.clone()),_d(a,i,r)}}else s.type==="start"&&(n=s.startMarker,i=[])}if(i.length>0&&n)return _d(n,i,r)}function iYe(t,e){let r=[],n=t.text.split(/\r\n|\r|\n/g),i=oYe(n,a=>F1(a,t.languageId)),o=[];for(let a of e){if(a.endLineIndex<=i+1)return e;let c=!1,u=[],l=a.lines;for(let d of l)F1(d,t.languageId)?(o.push(rY(d)),c=!0):c&&d.length===0||(u.push(d),c=!1);if(!c&&u.length>0){if(a.firstLineIndex<i+1)return e;r.push(new qi(a.firstLineIndex,a.endLineIndex,u))}}if(o.length===0)return e;let s=i+1;return r.unshift(new qi(s,s,o)),r}function oYe(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}function rY(t){return t.replace(/^\s+/g,"")}function F1(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"javascript":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}var sYe=/^(\t+)/,tY=new Map;function aYe(t){return tY.has(t)||tY.set(t,new RegExp(`^(( {${t}})+)`)),tY.get(t)}function nY(t,e,r){let n=e?aYe(r):sYe,i=t.match(n);return i?[i[0],i[0].length/(e?r:1)]:["",0]}function cYe(t){let{insertSpaces:e,tabSize:r}=ly(t,4,!1),n=Number.MAX_VALUE;for(let i of t){if(/^\s*$/.test(i))continue;let[,o]=nY(i,e,r);n=Math.min(n,o)}return{insertSpaces:e,tabSize:r,minIndentLevel:n}}function aEe(t,e){if(e===0)return"";if(t===" ")switch(e){case 2:return"  ";case 4:return"    ";case 8:return"        ";case 12:return"            "}if(t==="	")switch(e){case 1:return"	";case 2:return"		";case 3:return"			"}return new Array(e).fill(t).join("")}function uYe(t,e){let r=t.lines,n;if(t.whichLine==="topMost")n=r.find(i=>i!=="");else for(let i=r.length-1;i>=0;--i)if(r[i]!==""){n=r[i];break}return n===void 0?0:nY(n,e.insertSpaces,e.tabSize)[1]}function ug(t,e,r){if(r===void 0)return t;let n=uYe(e,r),i=cYe(t),o=r.insertSpaces?aEe(" ",r.tabSize):"	";return t.map(s=>{if(s==="")return"";{let[a,c]=nY(s,i.insertSpaces,i.tabSize),u=s.substring(a.length);return aEe(o,n+(c-i.minIndentLevel))+u}})}function pO(t,e){switch(e){case t.above.startMarker:return{type:"start",startMarker:t.above};case t.above.endMarker:return{type:"end",endMarker:t.above};case t.range.startMarker:return{type:"start",startMarker:t.range};case t.range.endMarker:return{type:"end",endMarker:t.range};case t.below.startMarker:return{type:"start",startMarker:t.below};case t.below.endMarker:return{type:"end",endMarker:t.below}}return e.trimStart().startsWith(Wo.begin(t.language))?{type:"fakestart"}:e.trimStart().startsWith(Wo.end(t.language))?{type:"fakend"}:null}function lYe(t,e,r,n){let i=(f,m,h)=>{let g=0;for(let E of f)for(let x=E.originalStart;x<E.originalStart+E.originalLength;x++){let R=m.lines[x];g+=R.length}let v=m.getCharCount(),b=h.getCharCount(),y=v-g;return{equalCharCount:y,originalCharCount:v,modifiedCharCount:b,originalCharRatio:v>0?y/v:0,modifiedCharRatio:b>0?y/b:0}},o=f=>{let m=new Tw(f.lines),h=new Tw(r),v=new uO(m,h).ComputeDiff();return i(v,m,h)},s=e.range.clone();s.mergeFromAbove(e.above.clone()),s.mergeFromBelow(e.below.clone());let a=o(s),c=o(e.range),u={diffToEntireScore:a,diffToRangeScore:c},l=t.get(pe).getLogger("editGeneration");if(l.info(`Diff metrics: ${JSON.stringify(u,null,"	")}`),a.originalCharCount>30&&a.originalCharRatio>.7)return l.info("(case 1) Replacing entire code"),_d(s,r,n);if(c.originalCharCount>20&&c.originalCharRatio>.7)return l.info("(case 2) Replacing selected code"),_d(e.range,r,n);let d=Math.min(a.originalCharRatio,a.modifiedCharRatio),p=Math.min(c.originalCharRatio,c.modifiedCharRatio);if(d>.2&&d>p)return l.info("(case 3) Replacing entire code"),_d(s,r,n);if(p>.2)return l.info("(case 4) Replacing selected code"),_d(e.range,r,n);if(!e.range.hasContent)return l.info("(case 5) Replacing empty selected code"),_d(e.range,r,n,{whichLine:"bottomMost",lines:e.above.lines})}function _d(t,e,r,n){let o=ug(e,n??{whichLine:"topMost",lines:t.lines},r).slice(0),s=t.lines.slice(0),a=t.firstLineIndex,c=t.lastLineIndex;if(s.length===1&&s[0]==="")return new qi(c,c,o);let u=dYe(s,o);if(a+=u,s.splice(0,u),o.splice(0,u),s.length===0)return new qi(c+1,c+1,o);let l=pYe(s,o);return c-=l,s.splice(s.length-l,l),o.splice(o.length-l,l),s.length===0?new qi(a,a,o):new qi(a,c+1,o)}function dYe(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[n]!==e[n])return n;return r}function pYe(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[t.length-1-n]!==e[e.length-1-n])return n;return r}function cEe(t,e){let r=t.filter(a=>!/^\s*$/.test(a)),n=e.filter(a=>!/^\s*$/.test(a)),i=fYe(r,n);if(i===0)return[0,0];let o=0;for(let a=0;a<i;a++)for(o++;/^\s*$/.test(t[t.length-o]);)o++;let s=0;for(let a=0;a<i;a++)for(s++;/^\s*$/.test(e[s]);)s++;return[o,s]}function fYe(t,e){for(let r=Math.min(t.length,e.length);r>0;r--){let n=t.length-r,i=!0;for(let o=0;o<r;o++)if(t[n+o]!==e[o]){i=!1;break}if(i)return r}return 0}function mYe(t,e){return new qi(t.firstLineIndex,t.firstLineIndex,e)}function uEe(t,e,r){let n=ug(e,{whichLine:"bottomMost",lines:t.lines},r),i=t.lastLineIndex+1;return new qi(i,i,n)}var Yo=fe(fr());var kr=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new Ro(`Invalid range: ${this.toString()}`)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),s=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,s))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Ro(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Ro(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}};function df(t,e,r,n){return{type:"inlineEdit",edits:t,newWholeRange:e,content:r,followUp:n}}function pf(t,e,r){let n=hYe(t,e);if(!n)return null;let{code:i,contentBeforeCode:o,language:s}=n;if(Ui.testLine(r,i)){let a=i.indexOf(`
`);i=i.substring(a).trim()}return{code:i,contentBeforeCode:o,language:s}}function hYe(t,e){e=e.trim();let n=$c(e).at(0);if(n){let c=rb(e);return{code:n.code,contentBeforeCode:c.slice(0,n.startLine).join(`
`).trimEnd(),language:n.language}}let i=e.split(/\r\n|\r|\n/g),o=!1,s=[],a=[];for(let c of i){let u=pO(t,c);if(o){if(u)return a.push(c),{code:a.join(`
`),contentBeforeCode:s.join(`
`),language:""};a.push(c)}else u?(o=!0,a.push(c)):s.push(c)}return null}var B1=class{constructor(e,r,n,i,o=oY){this.myDocument=e;this.initialSelection=r;this.adjustedSelection=n;this.editStrategy=i;this.lineFilter=o;this.replyIndentationTracker=null}async processStream(e){let r=aY(e);r=r.filter(this.lineFilter),r=cY(r,this.myDocument);let n=this.myDocument.firstSentLineIndex;for await(let i of this.findInitialAnchor(r))typeof i!="string"?n=this.handleFirstReplyLine(i.anchor,i.line):n=this.handleSubsequentReplyLine(n,i);return this.myDocument.didReplaceEdits&&n<=this.adjustedSelection.end.line&&this.myDocument.deleteLines(n,this.adjustedSelection.end.line),new Cw(this.myDocument.didEdits,this.myDocument.additionalImports)}handleFirstReplyLine(e,r){if(e){this.replyIndentationTracker=new q1(this.myDocument,e.lineIndex,r);let o=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);return this.myDocument.getLine(e.lineIndex).sentInCodeBlock===2?this.myDocument.replaceLines(this.adjustedSelection.start.line,e.lineIndex,o):this.myDocument.replaceLine(e.lineIndex,o)}let n=this.adjustedSelection.start.line;this.replyIndentationTracker=new q1(this.myDocument,n,r);let i=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(this.initialSelection.isEmpty){let o=this.myDocument.getLine(n).content;if(/^\s*$/.test(o)||i.adjustedContent.startsWith(o))return this.myDocument.replaceLine(n,i,!0)}return this.editStrategy===1?this.myDocument.insertLineBefore(n,i):this.editStrategy===3||this.editStrategy===4?this.myDocument.insertLineAfter(n,i):this.myDocument.replaceLine(n,i)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(n.trimmedContent!==""||this.myDocument.didReplaceEdits){let o=this.matchReplyLine(n,e);if(o)return this.myDocument.replaceLines(e,o.lineIndex,n)}if(e>=this.myDocument.getLineCount())return this.myDocument.appendLineAtEndOfDocument(n);let i=this.myDocument.getLine(e);return!i.isSent||i.content===""||n.trimmedContent===""?this.myDocument.insertLineBefore(e,n):i.indentLevel<n.adjustedIndentLevel?this.myDocument.insertLineBefore(e,n):i.indentLevel===n.adjustedIndentLevel&&!this.myDocument.didReplaceEdits?this.myDocument.insertLineBefore(e,n):this.myDocument.replaceLine(e,n)}matchReplyLine(e,r){let n=e.trimmedContent.length<=3;for(let i=r;i<this.myDocument.getLineCount();i++){let o=this.myDocument.getLine(i);if(o.isSent){if(o.normalizedContent===e.adjustedContent)return new gO(i);if(o.trimmedContent.length>0&&o.indentLevel<e.adjustedIndentLevel||n&&o.trimmedContent.length>0)return null}}return null}findInitialAnchor(e){return new cu(async r=>{let n=[],i=0,o=!1;for await(let s of e)if(o)r.emitOne(s);else if(n.push(s),i+=s.trim().length,i>10){let a=this.searchForEqualSentLines(n);o=!0,r.emitOne(new iY(n[0],a)),r.emitMany(n.slice(1))}})}searchForEqualSentLines(e){let r=e.map(n=>n.trim());for(let n=this.myDocument.firstSentLineIndex,i=this.myDocument.getLineCount()-e.length;n<=i;n++){if(!this.myDocument.getLine(n).isSent)continue;let o=!0;for(let s=0;s<r.length;s++){let a=this.myDocument.getLine(n+s);if(!a.isSent||a.trimmedContent!==r[s]){o=!1;break}}if(o)return new gO(n)}return null}},fO=class{constructor(e,r,n=oY){this._myDocument=e;this._cursorPosition=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=aY(e);r=r.filter(this._lineFilter),r=cY(r,this._myDocument);let n=0;for await(let i of r)this.replyIndentationTracker?n=this.handleSubsequentReplyLine(n,i):n=this.handleFirstReplyLine(i);return new Cw(this._myDocument.didEdits,this._myDocument.additionalImports)}handleFirstReplyLine(e){let r=this._cursorPosition.line;this.replyIndentationTracker=new q1(this._myDocument,r,e);let n=this.replyIndentationTracker.reindent(e,this._myDocument.indentStyle),i=this._myDocument.getLine(r).content;return/^\s*$/.test(i)||n.adjustedContent.startsWith(i)?this._myDocument.replaceLine(r,n,!0):this._myDocument.insertLineAfter(r,n)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this._myDocument.indentStyle);return this._myDocument.insertLineBefore(e,n)}},mO=class{constructor(e,r,n=oY){this._myDocument=e;this._selection=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=aY(e);r=r.filter(this._lineFilter),r=cY(r,this._myDocument);let n=0,i,o="";this._selection.end.line>this._selection.start.line&&this._selection.end.character===0?i=this._selection.end.line-this._selection.start.line:(i=this._selection.end.line-this._selection.start.line+1,o=this._myDocument.getLine(this._selection.end.line).content.substring(this._selection.end.character));for await(let s of r)if(this.replyIndentationTracker){let a=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);i>0?(n=this._myDocument.replaceLine(n,a),i--):n=this._myDocument.insertLineAfter(n-1,a)}else{let a=this._selection.start.line;this.replyIndentationTracker=new q1(this._myDocument,a,s);let c=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);n=this._myDocument.replaceLine(a,c),i--}return this._myDocument.didEdits&&i>0&&this._myDocument.deleteLines(n,n+i-1),this._myDocument.didEdits&&o.length>0&&this._myDocument.replaceLine(n-1,this._myDocument.getLine(n-1).content+o),new Cw(this._myDocument.didEdits,this._myDocument.additionalImports)}},oY=()=>!0,Cw=class{constructor(e,r){this.didEdits=e;this.additionalImports=r}},q1=class{constructor(e,r,n){let i=0;for(let s=r;s>=0;s--){let a=e.getLine(s);if(a.content.length>0){i=a.indentLevel,s!==r&&a.content.endsWith("{")&&(i+=1);break}}this._replyIndentStyle=U1.guessIndentStyleFromLine(n);let o=ag(n,this._replyIndentStyle?.tabSize??4);this.indentDelta=o-i}reindent(e,r){if(e==="")return new hO("",0,"",0);this._replyIndentStyle||(this._replyIndentStyle=U1.guessIndentStyleFromLine(e));let n=0,i=0,o=a=>(n=a,i=Math.max(n-this.indentDelta,0),i),s=U1.reindentLine(e,this._replyIndentStyle??{insertSpaces:!0,tabSize:4},r,o);return new hO(e,n,s,i)}},iY=class{constructor(e,r){this.line=e;this.anchor=r}},H1=class{constructor(e,r){this.lineIndex=e;this.sentInCodeBlock=r}},j1=class{constructor(e,r){this.startLineIndex=e;this.endLineIndex=r}},G1=class{constructor(e,r,n,i,o,s){this.progress=e;this.languageId=o;this._originalLines=[];this.lines=[];this._didEdits=!1;this._didReplaceEdits=!1;this._additionalImports=[];this.indentStyle=U1.getDocumentIndentStyle(r,s),this._originalLines=r.split(/\r\n|\r|\n/g);for(let a=0;a<this._originalLines.length;a++)this.lines[a]=new lg(this._originalLines[a],this.indentStyle);this.firstSentLineIndex=Number.MAX_SAFE_INTEGER;for(let a of n)this.lines[a.lineIndex].markSent(a.sentInCodeBlock),this.firstSentLineIndex=Math.min(this.firstSentLineIndex,a.lineIndex);this.firstSentLineIndex=Math.min(this.firstSentLineIndex,i.startLineIndex)}get didEdits(){return this._didEdits}get didReplaceEdits(){return this._didReplaceEdits}get additionalImports(){return this._additionalImports}getText(){return this.lines.map(e=>e.content).join(`
`)}getLineCount(){return this.lines.length}getLine(e){if(e<0||e>=this.lines.length)throw new Error("Invalid index");return this.lines[e]}addAdditionalImport(e){this._additionalImports.push(e)}replaceLine(e,r,n=!1){let i=typeof r=="string"?r:r.adjustedContent;return this.lines[e]=new lg(i,this.indentStyle),this.progress.report({edits:[new zi(new Ge(e,0,e,1e3),i)]}),this._didEdits=!0,this._didReplaceEdits=this._didReplaceEdits||!n,e+1}replaceLines(e,r,n){if(e>r)throw new Error("Invalid range");return e===r?this.replaceLine(e,n):(this.lines.splice(e,r-e+1,new lg(n.adjustedContent,this.indentStyle)),this.progress.report({edits:[new zi(new Ge(e,0,r,1e3),n.adjustedContent)]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1)}appendLineAtEndOfDocument(e){return this.lines.push(new lg(e.adjustedContent,this.indentStyle)),this.progress.report({edits:[new zi(new Ge(this.lines.length-1,1e3,this.lines.length-1,1e3),`
`+e.adjustedContent)]}),this._didEdits=!0,this.lines.length}insertLineAfter(e,r){return this.lines.splice(e+1,0,new lg(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new zi(new Ge(e,1e3,e,1e3),`
`+r.adjustedContent)]}),this._didEdits=!0,e+2}insertLineBefore(e,r){return e===this.lines.length?this.insertLineAfter(e-1,r):(this.lines.splice(e,0,new lg(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new zi(new Ge(e,0,e,0),r.adjustedContent+`
`)]}),this._didEdits=!0,e+1)}deleteLines(e,r){return this.lines.splice(e,r-e+1),this.progress.report({edits:[new zi(new Ge(e,0,r+1,0),"")]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1}},hO=class{constructor(e,r,n,i){this.originalContent=e;this.originalIndentLevel=r;this.adjustedContent=n;this.adjustedIndentLevel=i;this.trimmedContent=this.originalContent.trim()}},gO=class{constructor(e){this.lineIndex=e}};var lg=class{constructor(e,r){this.content=e;this._indentStyle=r;this._sentInCodeBlock=0;this._trimmedContent=null;this._normalizedContent=null;this._indentLevel=-1}get isSent(){return this._sentInCodeBlock!==0}get sentInCodeBlock(){return this._sentInCodeBlock}get trimmedContent(){return this._trimmedContent===null&&(this._trimmedContent=this.content.trim()),this._trimmedContent}get normalizedContent(){return this._normalizedContent===null&&(this._normalizedContent=eY(this.content,this._indentStyle.tabSize,this._indentStyle.insertSpaces)),this._normalizedContent}get indentLevel(){return this._indentLevel===-1&&(this._indentLevel=ag(this.content,this._indentStyle.tabSize)),this._indentLevel}markSent(e){this._sentInCodeBlock=e}},U1=class t{static getDocumentIndentStyle(e,r){return r||ly(cg.fromString(e),4,!1)}static guessIndentStyleFromLine(e){let r=t._getLeadingWhitespace(e);if(!(r===""||r===" "))return ly([e],4,!1)}static reindentLine(e,r,n,i=o=>o){let o=ag(e,r.tabSize),s=i(o);for(;o>0;)e=this._outdent(e,r),o--;for(;o<s;)e="	"+e,o++;return eY(e,n.tabSize,n.insertSpaces)}static _outdent(e,r){let n=0;for(;n<e.length;){let i=e.charCodeAt(n);if(i===9){n++;break}if(i!==32||n===r.tabSize)break;n++}return e.substring(n)}static _getLeadingWhitespace(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n!==32&&n!==9)return e.substring(0,r)}return e}};function sY(t){return new cu(async e=>{let r;(a=>(a[a.BeforeCodeBlock=0]="BeforeCodeBlock",a[a.InCodeBlock=1]="InCodeBlock",a[a.AfterCodeBlock=2]="AfterCodeBlock"))(r||={});let n=0;for await(let i of t){if(n===0){if(/^```/.test(i)){n=1,e.emitOne({value:i,kind:2});continue}}else n===1&&/^```/.test(i)&&(n=2);e.emitOne({value:i,kind:n===1?1:2})}})}function lEe(t){let e=Wo.begin(t),r=Wo.end(t),n=!0,i=!1;return o=>n&&Ui.testLine(t,o)?(n=!1,!1):!i&&/^\s*$/.test(o)||o.startsWith(e)||o.startsWith(r)?!1:(i=!0,!0)}function aY(t){let e=gYe(t);return sY(e).filter(n=>n.kind===1).map(n=>n.value)}function gYe(t){return new cu(async e=>{let r="";for await(let n of t){r+=n;do{let i=r.indexOf(`
`);if(i===-1)break;let o=r.substring(0,i);r=r.substring(i+1),e.emitOne(o)}while(!0)}r.length>0&&e.emitOne(r)})}function cY(t,e){let r=!1,n=!1;return t.filter(i=>F1(i,e.languageId)?(e.addAdditionalImport(rY(i)),r=!0,!1):i.trim().length===0&&r?n:(n=!0,!0))}var Iw=class extends Error{constructor(r){super(typeof r=="string"?r:r.message);this.errorDetails=typeof r=="string"?{message:r}:r}},xd=class extends ec{constructor(r){super();this.factory=r}create(r,n){return this.factory(r,n)}};var ww=class t{constructor(){this._data=new Map;this._messages={0:t._shuffleArray(t._progressMessages[0]),1:t._shuffleArray(t._progressMessages[1]),2:t._shuffleArray(t._progressMessages[2]),3:t._shuffleArray(t._progressMessages[3])}}static{this._progressMessages={0:[Yo.t("Fetching response, it won't be long now."),Yo.t("Working hard to get your response..."),Yo.t("Request is being processed, sit tight!"),Yo.t("Response is being prepared, please be patient.")],1:[Yo.t("Data is on its way, please wait a moment."),Yo.t("Request is being processed, sit tight!"),Yo.t("Response is being prepared, please be patient.")],2:[Yo.t("Data is on its way, please wait a moment."),Yo.t("Source code arriving..."),Yo.t("Hold on tight, we're almost there!"),Yo.t("Response is being prepared, please be patient."),Yo.t("Code chunks incoming..."),Yo.t("Receiving code, please wait..."),Yo.t("Code is being processed, please wait...")],3:[Yo.t("Almost done, just a few more seconds..."),Yo.t("Processing response, please wait...")]}}next(e){let r=this._data.get(e);if(r){if(Date.now()-r.time<3579)return this._messages[e][r.index];r.index+=1,r.time=Date.now();let n=this._messages[e];return n[Math.min(n.length-1,r.index)]}else return this._data.set(e,{index:0,time:Date.now()}),this._messages[e][0]}static _shuffleArray(e){return z2(e),e}},vO=class{constructor(e){this.progress=e;this._progressMessages=new ww;this._lastText=void 0}_reportProgress(e){let r=this._progressMessages.next(e);this.progress.report({message:r})}update(e){return this._reportProgress(this._lastText?e.includes("```")?2:1:0),this._lastText=e,{shouldFinish:lf(e)}}async finish(){if(!this._lastText)throw new Error("No text");return this._reportProgress(3),await this.interpretReply(this._lastText)}},V1=class t extends vO{constructor(r,n){super(n);this.replyInterpreter=r}static createFactory(r){return n=>new t(r,n)}interpretReply(r){return this.replyInterpreter(r,this.progress)}},z1=class extends vO{constructor(r,n,i,o,s){super(s);this.accessor=r;this.selectionContextMetadata=n;this.context=i;this.editStrategy=o}interpretReply(r){let{contextInfo:n,wholeRange:i}=this.selectionContextMetadata,o=pf(n,r,this.context.language);if(!o)return{type:"conversational",content:r};let{code:s}=o,a=py(this.accessor,n,s,this.editStrategy,this.context.fileIndentInfo,dy.fromDocumentContext(this.context));return df(a,i)}},yO=class t{constructor(e){this._progress=e;this._responseStream=new e0;this._lastLength=0;this._promise=void 0;this._progressMessages=new ww}static createFactory(){return e=>new t(e)}_reportProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}update(e){this._promise||(this._reportProgress(0),this._promise=this.processStream(this._responseStream,this._progress)),this._reportProgress(1);let r=e.slice(this._lastLength);return this._lastLength=e.length,this._responseStream.emitOne(r),{shouldFinish:!1}}async finish(){return this._responseStream.resolve(),{type:"conversational",content:""}}async processStream(e,r){for await(let n of e.asyncIterable)r.report({content:n});return!1}};function yYe(t,e){let r=new pg(t),n=e.map(i=>{let o=r.toOffsetRange(i.range);return{startOffset:o.start,endOffset:o.endExclusive,text:i.newText}});uY(n,(i,o)=>i.startOffset-o.startOffset||i.endOffset-o.endOffset);for(let i=n.length-1;i>=0;i--){let o=n[i];t=t.substring(0,o.startOffset)+o.text+t.substring(o.endOffset)}return t}function uY(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);uY(n,e),uY(i,e);let o=0,s=0,a=0;for(;o<n.length&&s<i.length;)e(n[o],i[s])<=0?t[a++]=n[o++]:t[a++]=i[s++];for(;o<n.length;)t[a++]=n[o++];for(;s<i.length;)t[a++]=i[s++];return t}var pg=class{constructor(e){this.textLength=e.length,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0),this.lineLengthsByLineIdx=[];let r=0;for(let n=0;n<e.length;n++)e.charAt(n)===`
`?(this.lineStartOffsetByLineIdx.push(n+1),this.lineLengthsByLineIdx.push(r),r=0):r++;this.lineLengthsByLineIdx.push(r)}getLineCount(){return this.lineStartOffsetByLineIdx.length}getLineOffset(e){return this.lineStartOffsetByLineIdx[e]}getLineLength(e){return this.lineLengthsByLineIdx[e]}getOffset(e){return e=this.validatePosition(e),this.lineStartOffsetByLineIdx[e.line]+e.character}getPosition(e){e<0&&(e=0),e>this.textLength&&(e=this.textLength);let r=Qg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r,i=e-this.lineStartOffsetByLineIdx[r];return new Ht(n,i)}fromOffsetRange(e){return new Ge(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new kr(this.getOffset(e.start),this.getOffset(e.end))}validatePosition(e){let{line:r,character:n}=e;return r<0?(r=0,n=0):r>=this.lineLengthsByLineIdx.length?(r=this.lineLengthsByLineIdx.length-1,n=this.lineLengthsByLineIdx[r]):n<0?n=0:n>this.lineLengthsByLineIdx[r]&&(n=this.lineLengthsByLineIdx[r]),new Ht(r,n)}validateRange(e){return new Ge(this.validatePosition(e.start),this.validatePosition(e.end))}},bO=class{constructor(e,r,n,i,o){this._accessor=e;this._selectionContextMetadata=r;this._context=n;this._editStrategy=i;this._progress=o;this._lastText=void 0;this._initialDocText=this._context.document.getText();this._documentInfo=dy.fromDocumentContext(this._context);if(!this._selectionContextMetadata)throw new Error("code reply NEEDS a selection context");let s=this._selectionContextMetadata.contextInfo,a=s.range.firstLineIndex,c=s.range.firstLineIndex+s.range.lines.length-1,u;{let l=[],d=(f,m)=>{for(let h=0;h<f.lines.length;h++){let g=f.firstLineIndex+h;l.push(new H1(g,m))}};d(s.above,1),d(s.range,2),d(s.below,3);let p=new j1(a,c);u=new G1(o,this._context.document.getText(),l,p,this._context.document.languageId,this._context.fileIndentInfo)}this.streaming=new Rw(o,new B1(u,this._context.selection,new n0(a,0,c,this._context.document.lineAt(c).text.length),this._editStrategy,lEe(this._context.language)))}update(e){return this.streaming.update(e),this._lastText=e,{shouldFinish:lf(this._lastText)}}async finish(){if(!this._lastText)throw new Error("No text");let{didEdits:e}=await this.streaming.finish(),r=await this._interpretReply(this._lastText);if(r.type==="inlineEdit"){let n=yYe(this._initialDocText,r.edits);return{type:"inlineEdit",edits:[{range:new Ge(new Ht(0,0),new Ht(Number.MAX_SAFE_INTEGER,0)),newText:n}],newWholeRange:r.newWholeRange}}return e&&this._progress.report({edits:[{range:new Ge(new Ht(0,0),new Ht(Number.MAX_SAFE_INTEGER,0)),newText:this._initialDocText}]}),r}_interpretReply(e){let{contextInfo:r,wholeRange:n}=this._selectionContextMetadata,i=pf(r,e,this._context.language);if(!i)return{type:"conversational",content:e};let{code:o}=i,s=py(this._accessor,r,o,this._editStrategy,this._context.fileIndentInfo,this._documentInfo);return df(s,n)}},Rw=class{constructor(e,r){this._progress=e;this._responseStream=new e0;this._lastLength=0;this._lastText=void 0;this._progressMessages=new ww;this._streamingPromise=r.processStream(this._responseStream.asyncIterable)}update(e){this._reportMessageProgress(this._lastText?2:0),this._lastText=e;let r=e.slice(this._lastLength);this._lastLength=e.length,this._responseStream.emitOne(r)}_reportMessageProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}async finish(){return this._responseStream.resolve(),await this._streamingPromise}};var Pt=class extends X{render(){return vscpp(vscppf,null,"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.")}};var _O=class extends X{constructor(r,n){super(r,n);this._contextService=n.get(Mr),this._telemetryService=n.get(Ne),this._logService=n.get(pe),this._ignoreService=n.get(st)}_handleFoulPrompt(){let r=new Error("BAD PROMPT");if(this._logService.defaultLogger.error(r),this._contextService.extensionMode!==is.Production)throw r;this._telemetryService.sendMSFTTelemetryErrorEvent("prompt.invalidreference",{stack:r.stack})}},fy=class extends _O{async prepare(e,r,n){let i=await this._ignoreService.isCopilotIgnored(this.props.uri);return i||r?.report(new sA(this.props.uri)),{isIgnored:i}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r=xn(this.props.languageId??"",this.props.code,this.props.shouldTrim??!0);return vscpp(zo,null,r)}};var my=class extends _O{get insertLineBreakBefore(){return!1}async prepare(){return{isIgnored:await this._ignoreService.isCopilotIgnored(this.props.value)}}render(e){if(e.isIgnored)return this._handleFoulPrompt();let r;return this.props.mode===1?r=this.props.value.path:r=sc(this.props.value),vscpp(vscppf,null,r)}};var hy=class{constructor(e){this._lineStartOffsets=[0];let r=0;for(;;){let n=e.indexOf(`
`,r);if(n===-1)break;this._lineStartOffsets.push(n+1),r=n+1}}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};var Hi=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Error(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{this.empty=new t([])}static fromJson(e){return new t(e.map(yi.fromJson))}static from(e){let r=e.map(i=>new yi(kr.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static async fromDiff(e,r,n){let i=await n.computeDiff(e,r,{maxComputationTimeMs:5e3,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new hy(e),s=new hy(r),a=[];for(let c of i.changes)for(let u of c.innerChanges??[]){let l=s.positionToOffset(u.modifiedRange.getStartPosition()),d=s.positionToOffset(u.modifiedRange.getEndPosition()),p=r.substring(l,d),f=o.positionToOffset(u.originalRange.getStartPosition()),m=o.positionToOffset(u.originalRange.getEndPosition()),h=new kr(f,m);a.push(new yi(h,p))}return new t(a)}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new yi(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return bYe(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new yi(kr.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(kr.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(r.push(new yi(a.replaceRange.delta(o),a.newText)),i++):(n++,o+=s.newText.length-s.replaceRange.length):(r.push(new yi(a.replaceRange.delta(o),a.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}convertOriginalOffsetToPostEditsOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}convertOriginalRangeToPostEditsRange(e){return new kr(this.convertOriginalOffsetToPostEditsOffset(e.start),this.convertOriginalOffsetToPostEditsOffset(e.endExclusive))}convertPostEditsOffsetToOriginalOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},yi=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static fromJson(e){return new t(kr.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=ree(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,nee(r,this.newText)),o=new kr(this.replaceRange.start+n,this.replaceRange.endExclusive-i),s=this.newText.substring(n,this.newText.length-i);return new t(o,s)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function bYe(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let s=i,a,c;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;a||(a=u),c=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!a)n.push(new yi(o.replaceRange.delta(-i),o.newText));else{let u="",l=o.replaceRange.start-(a.replaceRange.start+s);l>0&&(u=a.newText.slice(0,l));let d=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(d>0){let m=new yi(kr.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-d));r.unshift(m),i-=m.newText.length-m.replaceRange.length}let p=u+o.newText,f=new kr(Math.min(a.replaceRange.start,o.replaceRange.start-s),o.replaceRange.endExclusive-i);n.push(new yi(f,p))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Hi(n).normalize()}async function W1(t){return{useScoreFunction:await t.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.summarizedDocument.useScoreFunction")??!1}}function Y1(t,e,r,n,i){let o=e.getText(),s=Aw.convertToLinkedTree(o,e.languageId,n),a=e.offsetAt(r.start),c=e.offsetAt(r.end);return _Ye(t,s,a,c,i)}var lY=class{constructor(e,r,n,i){this.document=e;this.selection=r;this.adjustedSelection=n;this._debugData=i}getDebugData(){return this._debugData}};function _Ye(t,e,r,n,i){let o=xYe(e,r,n),s=[];e.visit(f=>{f.isSurviving||s.push(f)});let a=f=>f.endIndex<o.start?o.start-f.endIndex:f.startIndex>o.endExclusive?3*(f.startIndex-o.endExclusive):0,c=a;i.useScoreFunction?(c=f=>100*f.scopeDistance+f.depth+10*(a(f)/e.text.length),s.sort($2(c,W2))):s.sort((f,m)=>{if(f.scopeDistance===m.scopeDistance){if(f.depth===m.depth){let h=a(f),g=a(m);return h-g}return f.depth-m.depth}return f.scopeDistance-m.scopeDistance});let u=e.getSummarizedDocumentBuilder();for(;s.length>0&&u.textLength<t;){s.shift().markToKeep();let m=e.getSummarizedDocumentBuilder();if(m.textLength<=t)u=m;else break}let l=u.finalize(),d=l.convertOriginalRangeToPostEditsRange(new kr(r,n)),p=l.convertOriginalRangeToPostEditsRange(o);return new lY(l,d,p,{root:e,scoreFn:c})}function xYe(t,e,r){[e,r]=EYe(t,e,r);let[n,i,o]=SYe(t,e,r);{let s;for(n instanceof $1?(s=n.nextLeaf,n.parent.markSelectedGap(n.gapIndex)):(s=n,s.markSelected());s&&s.startIndex<=r;)s.markSelected(),s=s.nextLeaf}return t.setSelection(new kr(i,o)),t.propagateScopeDistancesToChildren(),new kr(i,o)}function EYe(t,e,r){let n=t.text.substring(e,r);if(!/^\s*$/.test(n))return[e,r];let o=e,s=r,a=!0,c=!0;do{if(c&&s>=t.text.length&&(c=!1),c){let u=t.text.charCodeAt(s);if(u===13||u===10)c=!1;else{if(u!==32&&u!==9)return[s,s+1];s++}}if(a&&o===0&&(a=!1),a){let u=t.text.charCodeAt(o-1);if(u===13||u===10)a=!1;else{if(u!==32&&u!==9)return[o-1,o];o--}}}while(a||c);return[e,r]}function SYe(t,e,r){e=dEe(t,e),r=pEe(t,r);let n=t.findLeaf2(e),i=t.findLeaf2(r),o=!1,s=c=>{c<e&&(e=dEe(t,c),o=!0,n=t.findLeaf2(e))},a=c=>{c>r&&(r=pEe(t,c),o=!0,i=t.findLeaf2(r))};do{if(o=!1,n instanceof $1){let c=n.isFirstGapInParent?n.parent.lastGap:null,u=n.hasSelectedContent(e,r),l=c&&c.hasSelectedContent(e,r),d=u||l;d&&s(n.firstNonWhitespaceIndex),d&&c&&a(c.lastNonWhitespaceIndex+1)}if(i instanceof $1){let c=i.isLastGapInParent?i.parent.firstGap:null,u=i.hasSelectedContent(e,r),l=c&&c.hasSelectedContent(e,r),d=u||l;d&&i.lastNonWhitespaceIndex+1>r&&a(i.lastNonWhitespaceIndex+1),d&&c&&s(c.firstNonWhitespaceIndex)}n instanceof Aw&&t.hasContentInRange(new kr(e,r))&&n.startIndex<e&&s(n.startIndex),i instanceof Aw&&t.hasContentInRange(new kr(e,r))&&i.endIndex>r&&a(i.endIndex)}while(o);return[n,e,r]}function dEe(t,e){for(;e>0;){let r=t.text.charCodeAt(e-1);if(r!==32&&r!==9)break;e--}return e}function pEe(t,e){if((e>0?t.text.charCodeAt(e-1):0)===10)return e;for(;e<t.text.length;){let n=t.text.charCodeAt(e);if(n!==32&&n!==9)break;e++}return e}function fEe(t){return t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}var Aw=class t{constructor(e,r,n,i,o,s,a,c,u){this._originalText=e;this._languageId=r;this.parent=n;this.startIndex=i;this.endIndex=o;this.kind=s;this.children=a;this.depth=c;this.myIndex=u;this._scopeDistance=Number.MAX_SAFE_INTEGER;this._isSurviving=!1;this._summarizedDocumentBuilder=null;this._survivingGapBeforeChild=-1;this._hasSurvivingChildren=!1;this._selection=null}static convertToLinkedTree(e,r,n){let i=new t(e,r,null,n.startIndex,n.endIndex,n.kind,[],0,0);return t._convertChildrenToLinkedTree(e,r,n,i,1),i}static _convertChildrenToLinkedTree(e,r,n,i,o){for(let s=0;s<n.children.length;s++){let a=n.children[s],c=new t(e,r,i,a.startIndex,a.endIndex,a.kind,[],o,s);i.children.push(c),t._convertChildrenToLinkedTree(e,r,a,c,o+1)}}get scopeDistance(){return this._scopeDistance}get isSurviving(){return this._isSurviving}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}textAt(e){return e.substring(this._originalText)}hasContentInRange(e){let r=this.textAt(e);return!/^\s*$/s.test(r)}toString(){return`Node (${this.startIndex}-${this.endIndex}) ${fEe(this._originalText.substring(this.startIndex,this.endIndex))}`}setSelection(e){this._selection=e;for(let r of this.children)r.setSelection(e)}_touchesSelection(e){return this._selection?e.start<=this._selection.endExclusive&&this._selection.start<=e.endExclusive:!1}markSelected(){this.markToKeep();{let e=1,r=this.parent;for(this._scopeDistance=0;r&&r._scopeDistance>e;)r._scopeDistance=e,e++,r=r.parent}}gapBeforeChild(e){let r=e===0?this.startIndex:this.children[e-1].endIndex,n=e===this.children.length?this.endIndex:this.children[e].startIndex;return new $1(this._originalText,this,r,n,e)}markSelectedGap(e){this._survivingGapBeforeChild=e,this.markSelected()}childAt(e){return this.children[e]??null}get firstGap(){return this.children.length===0?null:this.gapBeforeChild(0)}get lastGap(){return this.children.length===0?null:this.gapBeforeChild(this.children.length)}markToKeep(){if(!this.isSurviving){this._isSurviving=!0;{let e=this.parent;for(;e;)e._summarizedDocumentBuilder=null,e._hasSurvivingChildren=!0,e._isSurviving=!0,e=e.parent}}}propagateScopeDistancesToChildren(){for(let e of this.children)e._scopeDistance>this._scopeDistance&&(e._scopeDistance=this._scopeDistance),e.propagateScopeDistancesToChildren()}findLeaf(e){if(this.children.length===0)return[this,0];let r=EZ(this.children.length,n=>{let i=this.children[n];return e>=i.startIndex&&e<=i.endIndex?0:e<i.startIndex?1:-1});return r<0?[this,r]:this.children[r].findLeaf(e)}findLeaf2(e){let[r,n]=this.findLeaf(e);return n<0?r.gapBeforeChild(~n):r}get nextLeaf(){let e=this;do{let r=e.nextSibling;if(r)return r.leftMostLeafChild;e=e.parent}while(e);return null}get leftMostLeafChild(){let e=this;for(;e.children.length>0;)e=e.children[0];return e}get prevSibling(){let e=this.parent,r=this.myIndex-1;return e&&r>=0?e.children[r]:null}get nextSibling(){let e=this.parent,r=this.myIndex+1;return e&&r<e.children.length?e.children[r]:null}getSummarizedDocumentBuilder(){return this._summarizedDocumentBuilder===null&&(this._summarizedDocumentBuilder=new pY(this._originalText,this._languageId,this.startIndex,this.endIndex),this._extractSurvivingText(this._summarizedDocumentBuilder)),this._summarizedDocumentBuilder}_extractSurvivingText(e){if(!this.isSurviving)return;if(this.children.length===0)return e.appendText(this.startIndex,this.endIndex);let r=e.createSurvivingStringPiece(this.startIndex,this.children[0].startIndex),n=e.createSurvivingStringPiece(this.children[this.children.length-1].endIndex,this.endIndex);if(!this._hasSurvivingChildren){let i=r.trimEnd(),o=n.trimStart();i.endsWith("{")&&o.startsWith("}")?(e.appendSurvivingStringPiece(i),e.setNextElideText("\u2026"),e.appendSurvivingStringPiece(o)):(e.appendSurvivingStringPiece(r),e.appendSurvivingStringPiece(n));return}for(let i=0;i<this.children.length;i++){let o=this.children[i],s=o.isSurviving,a=i>0?this.children[i-1]:null,c=a?a.isSurviving:!1;this._appendGapIfSurviving(e,this.gapBeforeChild(i),c&&s),s&&e.appendChildBuilder(o.getSummarizedDocumentBuilder())}this._appendGapIfSurviving(e,this.gapBeforeChild(this.children.length),!1)}_appendGapIfSurviving(e,r,n){if(this._touchesSelection(r.range)||this._survivingGapBeforeChild===r.gapIndex){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i)}else if(r.gapIndex===0||r.gapIndex===this.children.length||n){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i.trimDupNewLines())}}visit(e){e(this);for(let r of this.children)r.visit(e)}},$1=class t{constructor(e,r,n,i,o){this._originalText=e;this.parent=r;this.startIndex=n;this.endIndex=i;this.gapIndex=o;if(this.startIndex>this.endIndex)throw new Ro("Invalid gap")}equals(e){return e instanceof t?this.startIndex===e.startIndex&&this.endIndex===e.endIndex:!1}get range(){return new kr(this.startIndex,this.endIndex)}get isFirstGapInParent(){return this.gapIndex===0}get isLastGapInParent(){return this.gapIndex===this.parent.children.length}toString(){return`NodeGap (${this.startIndex}-${this.endIndex}) ${fEe(this._originalText.substring(this.startIndex,this.endIndex))}`}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}hasSelectedContent(e,r){let n=this.range.intersect(new kr(e,r)),i=n?this._originalText.substring(n.start,n.endExclusive):"";return!/^\s*$/s.test(i)}get firstNonWhitespaceIndex(){let e=this.startIndex;for(;e<this.endIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e++}return this.endIndex}get lastNonWhitespaceIndex(){let e=this.endIndex-1;for(;e>=this.startIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e--}return this.startIndex-1}get nextLeaf(){let e=this.parent.childAt(this.gapIndex);return e?e.leftMostLeafChild:this.parent.nextLeaf}},dY=class t{constructor(e,r,n){this.allText=e;this.startIndex=r;this.endIndex=n}get text(){return this.allText.substring(this.startIndex,this.endIndex)}trimStart(){let e=this.text.trimStart();return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimStartDupNewLines(){let e=this.text.replace(/^\n+/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimEnd(){let e=this.text.trimEnd();return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimEndDupNewLines(){let e=this.text.replace(/\n+$/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimDupNewLines(){return this.trimStartDupNewLines().trimEndDupNewLines()}startsWith(e){return this.text.startsWith(e)}endsWith(e){return this.text.endsWith(e)}},fg=class{constructor(e,r,n){this.originalText=e;this.edits=r;this.languageId=n;this._text=new Ao(()=>this.edits.apply(this.originalText));this._transformer=new Ao(()=>new pg(this.text))}get transformer(){return this._transformer.value}get text(){return this._text.value}get lineCount(){return this.transformer.getLineCount()}convertOriginalOffsetToPostEditsOffset(e){return this.edits.convertOriginalOffsetToPostEditsOffset(e)}convertOriginalRangeToPostEditsRange(e){return this.edits.convertOriginalRangeToPostEditsRange(e)}convertPostEditsOffsetToOriginalOffset(e){return this.edits.convertPostEditsOffsetToOriginalOffset(e)}},pY=class{constructor(e,r,n,i){this._allText=e;this._languageId=r;this._scopeStartIndex=n;this._scopeEndIndex=i;this._elidedRanges=[];this._len=0;this._nextElidedRangeReplacementText=null;this._firstStartIndex=-1,this._lastEndIndex=n}createSurvivingStringPiece(e,r){return new dY(this._allText,e,r)}get textLength(){return this._len}finalize(){let e=[];return this._scopeStartIndex<this._firstStartIndex&&e.push(new yi(new kr(this._scopeStartIndex,this._firstStartIndex),"")),e=e.concat(this._elidedRanges),this._lastEndIndex<this._scopeEndIndex&&e.push(new yi(new kr(this._lastEndIndex,this._scopeEndIndex),"")),new fg(this._allText,new Hi(e),this._languageId)}appendSurvivingStringPiece(e){this.appendText(e.startIndex,e.endIndex)}appendText(e,r){this._markSurviving(e,r);let n=this._allText.substring(e,r);this._len+=n.length}appendChildBuilder(e){this._markSurviving(e._firstStartIndex,e._lastEndIndex),this._elidedRanges=this._elidedRanges.concat(e._elidedRanges),this._len+=e._len}_markSurviving(e,r){this._firstStartIndex===-1?this._firstStartIndex=e:e>this._lastEndIndex&&(this._nextElidedRangeReplacementText?(this._len+=this._nextElidedRangeReplacementText.length,this._elidedRanges.push(new yi(new kr(this._lastEndIndex,e),this._nextElidedRangeReplacementText)),this._nextElidedRangeReplacementText=null):this._elidedRanges.push(new yi(new kr(this._lastEndIndex,e),""))),this._lastEndIndex=r}setNextElideText(e){this._nextElidedRangeReplacementText=e}};var K1=class{constructor(e){this._derivedDocument=e;this._workingCopyOriginalDocument=new mY(this._derivedDocument.originalText)}get originalText(){return this._workingCopyOriginalDocument.text}get text(){return this._derivedDocument.text}get languageId(){return this._derivedDocument.languageId}get derivedDocumentTransformer(){return this._derivedDocument.transformer}get originalDocumentTransformer(){return this._workingCopyOriginalDocument.transformer}get allReportedEdits(){return this._workingCopyOriginalDocument.appliedEdits}createDerivedDocumentProgress(e,r){return new fY(e,r,this)}applyAndTransformProgressItem(e){if(!e.edits)return e;let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=mEe(n.transformer,e.edits).tryRebase(i.inverse(r.text)),a=i.tryRebase(s),c={...e,edits:EO(r.transformer,s)};return this._workingCopyOriginalDocument.applyOffsetEdits(s),this._derivedDocument=new fg(this._workingCopyOriginalDocument.text,a,this._derivedDocument.languageId),c}rebaseEdits(e){let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=mEe(n.transformer,e).tryRebase(i.inverse(r.text));return EO(r.transformer,s)}convertPostEditsOffsetToOriginalOffset(e){return this._derivedDocument.convertPostEditsOffsetToOriginalOffset(e)}},fY=class{constructor(e,r,n){this._actual=e;this._streamEdits=r;this._workingCopySummarizedDoc=n}get finalEdits(){return this._streamEdits?new Hi([]):this._workingCopySummarizedDoc.allReportedEdits}report(e){let r=this._workingCopySummarizedDoc.applyAndTransformProgressItem(e);r.edits&&!this._streamEdits||this._actual.report(r)}},mY=class{constructor(e){this._text=e;this._transformer=null;this._appliedEdits=new Hi([])}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new pg(this._text)),this._transformer}get appliedEdits(){return this._appliedEdits}applyOffsetEdits(e){let{edits:r}=e,n=this._text;for(let i=r.length-1;i>=0;i--){let o=r[i];n=n.substring(0,o.replaceRange.start)+o.newText+n.substring(o.replaceRange.endExclusive)}this._text=n,this._transformer=null,this._appliedEdits=this._appliedEdits.compose(e)}},xO=class{constructor(e){this._text=e;this._transformer=null}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new pg(this._text)),this._transformer}};function mEe(t,e){let r=e.map(n=>new zi(t.validateRange(n.range),n.newText));return new Hi(r.map(n=>new yi(t.toOffsetRange(n.range),n.newText)))}function EO(t,{edits:e}){return e.map(r=>new zi(t.fromOffsetRange(r.replaceRange),r.newText))}var SO=class extends X{async prepare(){return{structure:await dO(this.accessor,this.props.documentContext.document,this.props.documentContext.fileIndentInfo),wholeRange:this.props.documentContext.document.validateRange(this.props.documentContext.wholeRange),summarizedDocumentSettings:await W1(this.accessor)}}render(e,r){if(Cr(this.props.documentContext.document.uri))throw ci("InlineChatGenerateCodePrompt should not be used with a notebook!");let i=r.endpoint.modelMaxPromptTokens/3*4,o=Y1(i,this.props.documentContext.document,e.wholeRange,e.structure,e.summarizedDocumentSettings),{language:s,document:a}=this.props.documentContext,{document:c}=o,u=a.offsetAt(e.wholeRange.end),l=c.convertOriginalOffsetToPostEditsOffset(u),d=c.transformer.getPosition(l),p=c.text.length>0,f=c.text.substring(0,l),m=c.text.substring(l),h=`${f}$PLACEHOLDER$${m}`,g;return r.endpoint.model==="gpt-4"?g=b=>new fO(b,d,y=>y.trim()!=="$PLACEHOLDER$"):g=b=>new B1(b,new n0(d,d),new n0(d,d),3,y=>y.trim()!=="$PLACEHOLDER$"),vscpp(vscppf,null,vscpp("replyInterpreter",{value:(b,y)=>new Pw(b,y,c,this.props.documentContext.fileIndentInfo,g)}),vscpp(Ke,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",s.languageId,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to write some new code.",vscpp("br",null),p&&vscpp(vscppf,null,"The user includes existing code and marks with $PLACEHOLDER$ where the new code should go.",vscpp("br",null)),p&&vscpp(vscppf,null,'DO NOT include the text "$PLACEHOLDER$" in your reply.',vscpp("br",null)),p&&vscpp(vscppf,null,"DO NOT repeat any code from the user in your reply.",vscpp("br",null)),!p&&vscpp(vscppf,null,"Your must generate a code block surrounded with ``` that will be used in a new file",vscpp("br",null)),vscpp(Pt,null)),this.props.history&&vscpp(ee,null,this.props.history),p&&vscpp(ee,null,"I have the following code in a file called `",vscpp(my,{value:a.uri,mode:1}),"`:",vscpp(fy,{uri:a.uri,languageId:s.languageId,code:h,shouldTrim:!1})),!p&&vscpp(ee,null,"I am in an empty file `",vscpp(my,{value:a.uri,mode:1}),"`."),vscpp(ee,null,this.props.query,vscpp("br",null),p&&vscpp(vscppf,null,"The code that would fit at $PLACEHOLDER$ with ``` is:")))}},Pw=class{constructor(e,r,n,i,o){this._lastText=void 0;this._initialDocumentSnapshot=new xO(n.originalText),this._workingCopySummarizedDoc=new K1(n),this._progress=this._workingCopySummarizedDoc.createDerivedDocumentProgress(e,r);let s=new G1(this._progress,this._workingCopySummarizedDoc.text,this._workingCopySummarizedDoc.text.split(`
`).map((a,c)=>new H1(c,4)),new j1(0,0),this._workingCopySummarizedDoc.languageId,i);this._streaming=new Rw(this._progress,o(s))}update(e){return this._streaming.update(e),this._lastText=e,{shouldFinish:lf(e)}}async finish(){let{didEdits:e,additionalImports:r}=await this._streaming.finish();if(e){let n=EO(this._initialDocumentSnapshot.transformer,this._progress.finalEdits);n.push(...this._generateAdditionalImportsEdits(r));let i=this._workingCopySummarizedDoc.allReportedEdits.inverse(this._initialDocumentSnapshot.text),o=i.edits.reduce((c,u)=>c.join(u.replaceRange),i.edits[0].replaceRange),s=this._workingCopySummarizedDoc.originalDocumentTransformer.fromOffsetRange(o),a={lastDocumentContent:this._workingCopySummarizedDoc.originalText,lastWholeRange:s};return{type:"inlineEdit",edits:n,newWholeRange:void 0,store:a}}if(!this._lastText)throw new Error("No text");return{type:"conversational",content:this._lastText}}_generateAdditionalImportsEdits(e){if(e.length===0)return[];let r=this._workingCopySummarizedDoc.originalText.split(/\r\n|\r|\n/g),n=UM(r,o=>F1(o,this._workingCopySummarizedDoc.languageId));if(n===-1)return[new zi(new Ge(0,0,0,0),e.join(`
`)+`

`)];let i=r[n].length;return[new zi(new Ge(n,i,n,i),`
`+e.join(`
`))]}};var TO=class extends X{async prepare(){return{structure:await dO(this.accessor,this.props.documentContext.document,this.props.documentContext.fileIndentInfo),wholeRange:this.props.documentContext.document.validateRange(this.props.documentContext.wholeRange),summarizedDocumentSettings:await W1(this.accessor)}}render(e,r){if(Cr(this.props.documentContext.document.uri))throw ci("InlineChatEditCodePrompt should not be used with a notebook!");let i=r.endpoint.modelMaxPromptTokens/3*4,o=Y1(i,this.props.documentContext.document,e.wholeRange,e.structure,e.summarizedDocumentSettings),{language:s,document:a}=this.props.documentContext,{document:c,adjustedSelection:u}=o,l=c.transformer.fromOffsetRange(u),d=c.text.substring(0,u.start),p=c.text.substring(u.endExclusive),f=c.text.substring(u.start,u.endExclusive),m=d.trim().length>0||p.trim().length>0,h=`${d}$SELECTION_PLACEHOLDER$${p}`,g=b=>new mO(b,l,y=>y.trim()!=="$SELECTION_PLACEHOLDER$");return vscpp(vscppf,null,vscpp("replyInterpreter",{value:(b,y)=>new Pw(b,y,c,this.props.documentContext.fileIndentInfo,g)}),vscpp(Ke,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",s.languageId,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to modify some code.",vscpp("br",null),m&&vscpp(vscppf,null,"The user includes existing code and marks with $SELECTION_PLACEHOLDER$ where the selected code should go.",vscpp("br",null)),vscpp(Pt,null)),this.props.history&&vscpp(ee,null,this.props.history),vscpp(ee,null,"I have the following code in a file called `",vscpp(my,{value:a.uri,mode:1}),"`:",m&&vscpp(vscppf,null,vscpp(fy,{uri:a.uri,languageId:s.languageId,code:h,shouldTrim:!1}),vscpp("br",null)),m&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(fy,{uri:a.uri,languageId:s.languageId,code:f,shouldTrim:!1})),vscpp(ee,null,this.props.query,vscpp("br",null),m&&vscpp(vscppf,null,"The modified $SELECTION_PLACEHOLDER$ code with ``` is:")))}};function hEe(t,e){let r=t.notebookDocuments.find(i=>i.uri.fsPath===e.uri.fsPath&&i.getCells().find(o=>o.document===e));return r?r.getCells().findIndex(i=>i.document===e):-1}function X1(t){return Cr(t)?t.path.endsWith(".ipynb"):!1}function gEe(t,e){return t.notebookDocuments.find(n=>n.uri.fsPath===e.fsPath)?.notebookType}var Vs=class{constructor(e){this.charLimit=e;this._totalChars=0}get totalChars(){return this._totalChars}addLine(e){this._totalChars+=e.length+1}lineWouldFit(e){return this._totalChars+e.length+1<this.charLimit}},yo=class t{constructor(e,r,n,i){this.tracker=e;this.document=r;this.language=n;this.kindOrUniqueStr=i;this.lines=[];this.firstLineIndex=this.document.lineCount;this.lastLineIndex=-1;this.isComplete=!1;this.nonTrimWhitespaceCharCount=0;this._startMarker=Wo.begin(n,i),this._endMarker=Wo.end(n,i),this.lines=[],this.firstLineIndex=r.lineCount,this.lastLineIndex=-1}get startMarker(){return this._startMarker}get endMarker(){return this._endMarker}get lineCount(){return this.lines.length}get isVerySmallOrEmpty(){return this.nonTrimWhitespaceCharCount<10}get hasContent(){return this.lines.length===0||this.nonTrimWhitespaceCharCount===0?!1:this.lines.length>0}clone(){let e=new t(this.tracker,this.document,this.language,this.kindOrUniqueStr);return e._startMarker=this.startMarker,e._endMarker=this.endMarker,e.lines.push(...this.lines),e.firstLineIndex=this.firstLineIndex,e.lastLineIndex=this.lastLineIndex,e.nonTrimWhitespaceCharCount=this.nonTrimWhitespaceCharCount,e}clear(){this.lines.length=0,this.firstLineIndex=this.document.lineCount,this.lastLineIndex=-1,this.nonTrimWhitespaceCharCount=0}generatePrompt(e){if(!this.hasContent)return[];let r=[];return r.push("```"+this.language.languageId),r.push(Ui.forDocument(this.language,this.document)),e&&r.push(`${this.startMarker}`),r.push(...this.lines),e&&r.push(`${this.endMarker}`),r.push("```"),r}prependLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.unshift(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}appendLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.push(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}trim(e){let r=e?Math.min(this.lastLineIndex,e.start.line):this.lastLineIndex;for(;this.firstLineIndex<r&&this.lines.length>0&&this.lines[0].trim().length===0;)this.firstLineIndex++,this.lines.shift();let n=e?Math.max(this.firstLineIndex,e.end.line):this.firstLineIndex;for(;n<this.lastLineIndex&&this.lines.length>0&&this.lines[this.lines.length-1].trim().length===0;)this.lastLineIndex--,this.lines.pop()}removeFirstNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(0,e),n=0;for(let i of r)n+=i.trim().length;return this.firstLineIndex+=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}removeLastNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(this.lines.length-e,e),n=0;for(let i of r)n+=i.trim().length;return this.lastLineIndex-=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}takeFromAbove(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeLastNLines(r);this.lines.unshift(...n),this.firstLineIndex-=n.length,this.nonTrimWhitespaceCharCount+=i}takeFromBelow(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeFirstNLines(r);this.lines.push(...n),this.lastLineIndex+=n.length,this.nonTrimWhitespaceCharCount+=i}mergeFromAbove(e){e.hasContent&&(this.lines.unshift(...e.lines),this.firstLineIndex=e.firstLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}mergeFromBelow(e){e.hasContent&&(this.lines.push(...e.lines),this.lastLineIndex=e.lastLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}toRange(){try{let e=this.lastLineIndex===-1?this.document.lineCount-1:this.lastLineIndex,r=new Ge(this.firstLineIndex,0,e,this.document.lineAt(e).text.length);if(this.document.validateRange(r)===r)return r}catch{return}}toString(){return`{${this.firstLineIndex} -> ${this.lastLineIndex}}`}};var Es=class extends X{render(){return vscpp(vscppf,null,"```",this.props.language.languageId,vscpp("br",null),this.props.document&&vscpp(vscppf,null,Ui.forDocument(this.props.language,this.props.document),vscpp("br",null)),this.props.code&&vscpp(vscppf,null,this.props.code,vscpp("br",null)),"```")}};var Wn=class extends X{render(){if(!this.props.codeRegion.hasContent)return;let e=[];return this.props.useMarkers&&e.push(this.props.codeRegion.startMarker),e.push(...this.props.codeRegion.lines),this.props.useMarkers&&e.push(this.props.codeRegion.endMarker),vscpp(Es,{language:this.props.codeRegion.language,document:this.props.codeRegion.document,code:e.join(`
`)})}};var J1=class extends X{async prepare(){return await oEe(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange)}render(e,r){if(Cr(this.props.documentContext.document.uri))throw ci("InlineChatSelection should not be used with a notebook!");let{wholeRange:n,functionPositions:i,functionBodies:o}=e,s=CYe(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n,i,o),a=this.props.documentContext.document,c=this.props.documentContext.language,u=new Bi(n,s),l=[{uri:a.uri,version:a.version,ranges:xr([s.range.toRange(),s.above.toRange(),s.below.toRange()])}],d=s.above.hasContent||s.below.hasContent||s.outlineAbove.length>0||s.outlineBelow.length>0;return vscpp(vscppf,null,vscpp("usedContext",{value:l}),vscpp("meta",{value:u}),s.outlineAbove.length>0&&vscpp(ee,null,"I have the following code above:",vscpp(Es,{language:c,document:a,code:s.outlineAbove})),s.above.hasContent&&vscpp(ee,null,"I have the following code above the selection:",vscpp(Wn,{codeRegion:s.above,useMarkers:d})),s.below.hasContent&&vscpp(ee,null,"I have the following code below the selection:",vscpp(Wn,{codeRegion:s.below,useMarkers:d})),s.outlineBelow.length>0&&vscpp(ee,null,"I have the following code below:",vscpp(Es,{language:c,document:a,code:s.outlineBelow})),s.range.hasContent&&vscpp(ee,null,"I have the following code in the selection:",vscpp(Wn,{codeRegion:s.range,useMarkers:d})),!s.range.hasContent&&!d&&vscpp(ee,null,"I am in an empty file:",vscpp(Es,{language:c,document:a,code:""})))}};function CYe(t,e,r,n,i,o){let s=e*4,a=new Vs(s),c=kw(r.document,r.selection,n,new Ge(0,0,r.document.lineCount,0),r.language,a);if(!(c.above.hasContent&&!c.above.isComplete))return{language:c.language,above:c.above,range:c.range,below:c.below,outlineAbove:"",outlineBelow:""};let l=new Vs(s),d=eEe(r.document,i,n),p=new Ge(d.start.line,0,d.end.line,r.document.lineAt(d.end.line).range.end.character),f=kw(r.document,r.selection,n,p,r.language,l),m="",h="";if(f.above.isComplete&&f.below.isComplete){let g=vEe({document:r.document,functionBodies:o,rangeExpandedToFunctionWholeLines:p}),v=yEe(g,l);m=v.outlineAbove,h=v.outlineBelow}return{language:f.language,above:f.above,range:f.range,below:f.below,outlineAbove:m,outlineBelow:h}}var hY=class{constructor(){this.kind="inline-chat-selection"}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=Cr(i.document.uri)?mg:J1,{messages:s,metadatas:a,usedContext:c}=await $o(e,r.endpoint,o,{documentContext:i},e.get(we)),u=a.get(Bi);return{kind:this.kind,userMessages:s.map(l=>l.content),usedContext:c,metadata:u}}},Nzt=Tr.register(new hY);function kw(t,e,r,n,i,o){if(r.start.line!==r.end.line&&r.end.character===0){let d=t.lineAt(r.end.line-1);r=new Ge(r.start,new Ht(r.end.line-1,d.text.length))}else if(e.end.character===0&&e.end.line!==e.start.line&&(r.start.line===e.start.line&&r.start.character===0&&r.end.line===e.end.line&&r.end.character===t.lineAt(r.end.line).text.length||r.isEqual(e))){let d=t.lineAt(r.end.line-1);r=new Ge(r.start,new Ht(r.end.line-1,d.text.length))}let s=new yo(o,t,i,"ed8c6549bwf9"),a=new yo(o,t,i,"abpxx6d04wxr"),c=new yo(o,t,i,"be15d9bcejpp"),u=()=>(a.trim(),s.trim(e),c.trim(),{language:i,above:a,range:s,below:c});for(let d=r.end.line;d>=r.start.line;d--)if(!s.prependLine(d))return u();let l={aboveLineIndex:r.start.line-1,belowLineIndex:r.end.line+1,minimumLineIndex:Math.max(0,n.start.line),maximumLineIndex:Math.min(t.lineCount-1,n.end.line)};return vY(l,a,c),u()}function vY(t,e,r){let n=t.aboveLineIndex,i=!0,o=t.belowLineIndex,s=!0;for(let a=0;a<100&&(i||s);a++)!i||s&&a%4===3?o<=t.maximumLineIndex&&r.appendLine(o)?o++:s=!1:n>=t.minimumLineIndex&&e.prependLine(n)?n--:i=!1;e.isComplete=n<t.minimumLineIndex,r.isComplete=o>t.maximumLineIndex}function vEe({document:t,functionBodies:e,rangeExpandedToFunctionWholeLines:r}){let n="";t.languageId==="typescript"&&(n=";");let i=d=>{let f=cc(t,d);return f.end.line<r.start.line?r.start.line-f.start.line>50:f.start.line>r.end.line?f.end.line-r.end.line>50:!0},o=e.filter(i),s=t.offsetAt(r.start),a=t.offsetAt(r.end),c={startOffset:s,endOffset:a},{outlineAbove:u,outlineBelow:l}=yY(t.getText(),o,c,n);return{outlineAboveRange:u,outlineBelowRange:l}}function yY(t,e,r,n){let i=0,o="",s=r.endOffset,a="";for(let c of e)if(c.endIndex<r.startOffset)o+=t.substring(i,c.startIndex),o+=n,i=c.endIndex;else if(c.startIndex>r.endOffset)a+=t.substring(s,c.startIndex),a+=n,s=c.endIndex;else continue;return o+=t.substring(i,r.startOffset),a+=t.substring(s,t.length),{outlineAbove:o,outlineBelow:a}}function yEe(t,e){let r=/\r\n|\r|\n/g,n=t.outlineAboveRange===""?[]:t.outlineAboveRange.split(r),i=t.outlineBelowRange===""?[]:t.outlineBelowRange.split(r),o=[],s=[],a=f=>e.lineWouldFit(f)?(e.addLine(f),o.unshift(f),!0):!1,c=f=>e.lineWouldFit(f)?(e.addLine(f),s.push(f),!0):!1,u=n.length-1,l=!0,d=0,p=!0;for(let f=0;f<100&&(l||p);f++)!l||p&&f%4===3?d<i.length&&c(i[d])?d++:p=!1:u>=0&&a(n[u])?u--:l=!1;return{outlineAbove:o.join(`
`),outlineBelow:s.join(`
`)}}function CO(t,e,r,n,i){let o={...n,outlineAbove:"",outlineBelow:"",aboveCells:[],belowCells:[]},s,a,c;if(r.document.uri.scheme==="vscode-notebook-cell"){s=e.notebookDocuments.find(E=>E.uri.fsPath===r.document.uri.fsPath&&E.getCells().find(x=>x.document===r.document));let y=s?.getCells().findIndex(E=>E.document===r.document);if(y===void 0||y===-1)return o;a=y-1,c=y+1}else{if(t.activeNotebookEditor?.notebook.uri.path!==r.document.uri.path)return o;let y=t.activeNotebookEditor;s=y?.notebook;let E=y.selection.start;a=E-1,c=E}if(!s)return o;let{language:u,above:l,range:d,below:p}=n,f=l.lines.length+d.lines.length+p.lines.length,m=[],h=[],g=()=>(m.forEach(y=>y.trim()),h.forEach(y=>y.trim()),{language:u,above:l,range:d,below:p,outlineAbove:"",outlineBelow:"",aboveCells:m,belowCells:h}),v=!0,b=!0;for(let y=f;y<100&&(v||b);y++)if(v)if(a>=0){let x=s.cellAt(a).document,R=new yo(i,x,zc(x),"CELL:"+x.uri.fragment);for(let L=0;L<x.lineCount;L++)R.appendLine(L);m.unshift(R),a--}else v=!1;else if(c<s.cellCount){let x=s.cellAt(c).document,R=new yo(i,x,zc(x),"CELL:"+x.uri.fragment);for(let L=0;L<x.lineCount;L++)R.appendLine(L);h.push(R),c++}else b=!1;return g()}var mg=class extends X{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext;return{wholeRange:e.validateRange(r)}}render(e,r){if(!Cr(this.props.documentContext.document.uri))throw ci("InlineChatNotebookSelection should be used only with a notebook!");let{wholeRange:n}=e,i=IYe(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n),o=this.props.documentContext.document,s=new Bi(n,i),a=[{uri:o.uri,version:o.version,ranges:xr([i.range.toRange(),i.above.toRange(),i.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:a}),vscpp("meta",{value:s}),vscpp(Dw,{documentContext:this.props.documentContext,above:i.above,range:i.range,below:i.below,aboveCells:i.aboveCells,belowCells:i.belowCells}))}},Dw=class extends X{render(e,r){if(!Cr(this.props.documentContext.document.uri))throw ci("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=X1(this.props.documentContext.document.uri),{below:i,above:o,range:s,aboveCells:a,belowCells:c,includeDelimeters:u}=this.props;return vscpp(vscppf,null,n?vscpp(SY,{documentContext:this.props.documentContext,above:o,range:s,below:i,aboveCells:a,belowCells:c,includeDelimeters:u}):vscpp(_Y,{documentContext:this.props.documentContext,above:o,range:s,below:i,aboveCells:a,belowCells:c,includeDelimeters:u}))}},bEe=[{viewType:"polyglot-notebook",exampleCells:[{lan:"markdown",source:"Samples"},{lan:"csharp",source:"using Microsoft.Data.Analysis;"},{lan:"csharp",source:`DateTimeDataFrameColumn dateTimes = new DateTimeDataFrameColumn("DateTimes");
 Int32DataFrameColumn ints = new Int32DataFrameColumn("Ints", 6);
 StringDataFrameColumn strings = new StringDataFrameColumn("Strings", 6);`},{lan:"csharp",source:'dateTimes.Append(DateTime.Parse("2019/01/01"));'}]},{viewType:"sql-notebook",exampleCells:[{lan:"sql",source:"SELECT * FROM users;"}]},{viewType:"node-notebook",exampleCells:[{lan:"javascript",source:'console.log("Hello World");'},{lan:"javascript",source:"const {display} = require('node-kernel');"},{lan:"markdown",source:"# Plain text output"},{lan:"javascript",source:"display.text('Hello World');"}]},{viewType:"sas-notebook",exampleCells:[{lan:"sas",source:"proc print data=sashelp.class; run;"},{lan:"sas",source:`data race;
pr = probnorm(-15/sqrt(325));
run;

proc print data=race;
var pr;
run;
`}]},{viewType:"http-notebook",exampleCells:[{lan:"http",source:"GET https://httpbin.org/get"},{lan:"http",source:"POST https://httpbin.org/post"}]},{viewType:"powerbi-notebook",exampleCells:[{lan:"markdown",source:"# Get Groups"},{lan:"powerbi-api",source:"GET /groups"},{lan:"powerbi-api",source:`%dax /groups/ccce57d1-10af-1234-1234-665f8bbd8458/datasets/51ba6d4b-1234-1234-8635-a7d743a5ea89
EVALUATE INFO.TABLES()
This`}]},{viewType:"wolfram-language-notebook",exampleCells:[{lan:"wolfram",source:"Plot[Sin[x], {x, 0, 2 Pi}]"}]},{viewType:"github-issues",exampleCells:[{lan:"github-issues",source:`$vscode=repo:microsoft/vscode
$milestone=milestone:"May 2020"`},{lan:"github-issues",source:"$vscode $milestone is:closed author:@me -assignee:@me label:bug -label:verified"},{lan:"github-issues",source:"$vscode assignee:@me is:open label:freeze-slow-crash-leak"}]},{viewType:"rest-book",exampleCells:[{lan:"rest-book",source:"GET google.com"},{lan:"rest-book",source:`GET https://www.google.com
    ?query="fun"
    &page=2
    User-Agent: rest-book
    Content-Type: application/json`}]}],bY=class extends X{render(){let e=this.props.viewType,r=bEe.find(i=>i.viewType===this.props.viewType);if(!r)return vscpp(vscppf,null);let{exampleCells:n}=r;return vscpp(ee,null,"Below you will find a set of example cells for a ",e," notebook.",vscpp("br",null),n.map((i,o)=>vscpp(vscppf,null,"CELL INDEX: ",o,":",vscpp("br",null),"```",i.lan,vscpp("br",null),i.source,vscpp("br",null),vscpp("br",null),"```")))}},_Y=class extends X{render(e,r){if(!Cr(this.props.documentContext.document.uri))throw ci("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=this.props.includeDelimeters??!1,{below:i,above:o,range:s,aboveCells:a,belowCells:c}=this.props,u=a||[],l=c||[],d=this.props.documentContext.language,p=gEe(this.accessor.get(it),this.props.documentContext.document.uri),f=bEe.find(h=>h.viewType===p),m=f?p:"custom";return vscpp(vscppf,null,vscpp(ee,null,"I am working on a ",m," notebook in VS Code.",vscpp("br",null),m," notebooks in VS Code are documents that contain a mix of rich Markdown, executable code snippets, ",vscpp("br",null),"and accompanying rich output. These are all separated into distinct cells and can be interleaved in any order ",vscpp("br",null),"A ",m," notebook contains multiple cells.",vscpp("br",null)),f&&vscpp(bY,{viewType:f.viewType}),(u.length>0||l.length>0)&&vscpp(ee,null,"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",d.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),u.length>0&&vscpp(Z1,{cells:u,title:`Here are the cells in this custom notebook:
`}),l.length>0&&vscpp(Z1,{cells:l,cellIndexDelta:u.length+1,title:`Here are the cells below the current cell that I am editing in this custom notebook:
`})),d.languageId==="markdown"?vscpp(xY,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}):vscpp(EY,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}))}},xY=class extends X{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ee,null,"Now I create a new cell in this custom Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describte and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(Wn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Es,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ee,null,"In this new cell, I have the following markdown content above the selection:",vscpp(Wn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ee,null,"In this new cell, I have the following markdown content below the selection:",vscpp(Wn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},EY=class extends X{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ee,null,"Now I create a new cell in this custom Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(Wn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Es,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ee,null,"In this new cell, I have the following code above the selection:",vscpp(Wn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ee,null,"In this new cell, I have the following code below the selection:",vscpp(Wn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},SY=class extends X{render(e,r){if(!Cr(this.props.documentContext.document.uri))throw ci("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=this.props.includeDelimeters??!1,{below:i,above:o,range:s,aboveCells:a,belowCells:c}=this.props,u=a||[],l=c||[],d=this.props.documentContext.language;return vscpp(vscppf,null,(u.length>0||l.length>0)&&vscpp(ee,null,"I am working on a Jupyter notebook.",vscpp("br",null),"This Jupyter Notebook already contains multiple cells.",vscpp("br",null),"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",d.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Since it is Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells as well.",vscpp("br",null),"For the same reason, if a variable is defined in a cell, it can be used in other cells as well.",vscpp("br",null),"We should not repeat the same import or variable definition in multiple cells, unless we want to overwrite the previous definition.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),"## Examples starts here",vscpp("br",null),"Here are the cells in this Jupyter Notebook:",vscpp("br",null),"`CELL INDEX: 0",vscpp("br",null),"```python",vscpp("br",null),"import pandas as pd",vscpp("br",null),vscpp("br",null),"# create a dataframe with sample data",vscpp("br",null),"df = pd.DataFrame({'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35], 'Gender': ['F', 'M', 'M']})",vscpp("br",null),"print(df)",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"Now I create a new cell in this Jupyter Notebook document at index 1.",vscpp("br",null),"In this new cell, I am working with the following code:",vscpp("br",null),"```python",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"plot the data frame",vscpp("br",null),vscpp("br",null),"---------------------------------",vscpp("br",null),"ChatGPT Answer",vscpp("br",null),"---------------------------------",vscpp("br",null),"To plot the dataframe, we can use the `plot()` method of pandas dataframe. Here's the code:",vscpp("br",null),vscpp("br",null),"```python",vscpp("br",null),"df.plot(x='Name', y='Age', kind='bar')",vscpp("br",null),"```",vscpp("br",null),"## Example ends here",vscpp("br",null),u.length>0&&vscpp(Z1,{cells:u,title:`Here are the cells in this Jupyter Notebook:
`}),l.length>0&&vscpp(Z1,{cells:l,cellIndexDelta:u.length+1,title:`Here are the cells below the current cell that I am editing in this Jupyter Notebook:
`})),d.languageId==="markdown"?vscpp(TY,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}):vscpp(CY,{cellIndex:u.length,selected:s,above:o,below:i,includeDelimeters:n}))}},TY=class extends X{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ee,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describte and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(Wn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Es,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ee,null,"In this new cell, I have the following markdown content above the selection:",vscpp(Wn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ee,null,"In this new cell, I have the following markdown content below the selection:",vscpp(Wn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},CY=class extends X{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(ee,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(Wn,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Es,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(ee,null,"In this new cell, I have the following code above the selection:",vscpp(Wn,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(ee,null,"In this new cell, I have the following code below the selection:",vscpp(Wn,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},Z1=class extends X{render(){return vscpp(vscppf,null,this.props.title,vscpp("br",null),this.props.cells.map((e,r)=>vscpp(IY,{index:r+(this.props.cellIndexDelta??0),cell:e})))}},IY=class extends X{render(){return vscpp(vscppf,null,"CELL INDEX: ",this.props.index,vscpp("br",null),"```",this.props.cell.language.languageId,vscpp("br",null),this.props.cell.lines.join(`
`),vscpp("br",null),"```")}};function IYe(t,e,r,n){let i=e*4,o=new Vs(i),s=kw(r.document,r.selection,n,new Ge(0,0,r.document.lineCount,0),r.language,o);return CO(t.get(It),t.get(it),r,s,o)}var eE=class extends X{render(){let e=this.props.language;return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"The user has a ",e.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and ",Ui.forLanguage(e),".",vscpp("br",null),"Answer with a single ",e.languageId," code block.",vscpp("br",null),"If you modify existing code, you will use the ",Wo.begin(e)," and ",Wo.end(e)," markers.")}};var wY=class extends X{async prepare(){let e=this.accessor.get(It);if(e.activeNotebookEditor?.notebook.uri.path!==this.props.documentContext.document.uri.path)return{variables:[],packages:[]};let n=e.activeNotebookEditor?.notebook;if(!n)return{variables:[],packages:[]};let i=this.accessor.get(WS).getVariables(n.uri),o=this.accessor.get(WS).getPipPackages(n.uri),[s,a]=await Promise.all([i,o]);return{variables:s,packages:a}}render(e){return vscpp(vscppf,null,e.variables.length!==0&&vscpp(vscppf,null,vscpp(ee,null,"The following variables are present in this Jupyter Notebook:",e.variables.map(r=>vscpp(vscppf,null,vscpp(zo,null,"Variable Name: ",r.variable.name,vscpp("br",null),r.variable.type&&vscpp(vscppf,null,"Type: ",r.variable.type),vscpp("br",null),"Value: ",r.variable.value,vscpp("br",null),r.indexedChildrenCount>0&&vscpp(vscppf,null,"Length: ",r.indexedChildrenCount),vscpp("br",null),r.variable.summary&&vscpp(vscppf,null,"Summary: ",r.variable.summary),vscpp("br",null),vscpp("br",null)),vscpp("br",null))))),e.packages.length!==0&&vscpp(vscppf,null,vscpp(ee,null,"The following pip packages are available in this Jupyter Notebook:",e.packages.map(r=>vscpp(vscppf,null,vscpp(zo,null,"Package Name: ",r.name,", Version: ",r.version),vscpp("br",null))))))}},IO=class extends X{render(){if(!Cr(this.props.documentContext.document.uri))throw ci("InlineChatNotebookBasePrompt should be used only with a notebook!");let e=this.props.documentContext.language,r=X1(this.props.documentContext.document.uri);return vscpp(vscppf,null,vscpp(Ke,null,vscpp(eE,{language:e}),vscpp("br",null),r&&vscpp(vscppf,null,"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If the Jupyter Notebook already contains variables, you should respect the name and value of the variables, and use them in your code when necessary.",vscpp("br",null)),vscpp(Pt,null)),this.props.history&&vscpp(ee,null,this.props.history),vscpp(mg,{documentContext:this.props.documentContext}),vscpp(wY,{documentContext:this.props.documentContext}),vscpp(ee,null,this.props.query))}};var hg=class t{constructor(e,r,n){this.accessor=e;this.documentContext=r;this.editStrategy=n;this.replyInterpreterFactory=null}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let c=new t(r,a,i);return{intent:e,location:s,endpoint:o,promptCrafter:c,createReplyInterpreter:(u,l)=>c.createReplyInterpreter(u,l)}}async buildPrompt(e,r,n,i,o,s){let c=e.getLatestTurn().request.message,u=e.turns.length>1?e.turns[e.turns.length-2].request.message:void 0,l;Cr(this.documentContext.document.uri)?l=IO:l=this.editStrategy===4?SO:TO;let d=new mt(this.accessor,r,l,{documentContext:this.documentContext,query:c,history:u},this.accessor.get(we)),p=await d.render(i,s);return this.replyInterpreterFactory=d.getReplyInterpreterFactory(),this.selectionContextMetadata=d.getMeta(Bi),p}createReplyInterpreter(e,r){if(this.replyInterpreterFactory)return this.replyInterpreterFactory(e,r);if(!this.selectionContextMetadata)throw new Error("Could not create reply interpreter without selection context metadata");return r?new bO(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,e):new z1(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,e)}};var gg=class extends X{async prepare(){let e=Object.entries(ng).reduce((r,[n,i])=>{let o=vi.getCommand(n,this.props.location)?.intent?.description;r+=`
* ${o}`;for(let s of Object.values(i)){let a=vi.getCommand(s,this.props.location)?.intent?.description;r+=`
* ${a}`}return r},"");return{modelName:this.props.endpoint.model.toUpperCase(),commandDescriptions:e}}render(e){return vscpp(vscppf,null,"You can answer general programming questions and perform the following tasks: ",e.commandDescriptions,vscpp("br",null),"You use the ",e.modelName," version of OpenAI's GPT models.")}};var cn=class extends X{render(){return vscpp(vscppf,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.")}};var RY=["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],Dr=class extends X{render(){let r=this.accessor.get(Re).getConfig(ke.LocaleOverride);if(!RY.find(i=>r===i))return;let n=r!=="auto"?r:this.accessor.get(ft).language;if(n!=="en")return vscpp(vscppf,null,"Respond in the following locale: ",n)}};var vg=class extends X{render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.")}};var wO=class extends X{async prepare(e){let r=await this.accessor.get(it).openTextDocument(this.props.variableValue),n=r.getText().replace(/\r/g,"");return{chunks:await Zh(this.accessor,n,{uri:r.uri,shouldSemanticChunk:!0}),languageId:r.languageId,fullText:n}}async truncateMarkdownContent(e,r,n,i){let o=await Zh(this.accessor,e,{uri:r.uri,shouldSemanticChunk:!0}),s=`

<!-- Content truncated -->`,a=this.accessor.get(we),c=a.tokenize(s).length,u=Math.floor(n.tokenBudget/4)-c,l="",d=0,p=!1;for(let f of o){let m=a.tokenize(f.text);if(m.length+d>u){p=!0;break}l+=`

`+f.text,d+=m.length}return p&&(l+=s),i=l,i}render(e,r){if(!e.chunks.length)return;let n=u1e(e.fullText);return vscpp(ee,{reference:new $n({variableName:this.props.variableName,value:this.props.variableValue}),priority:this.props.priority},"# ",this.props.variableName.toUpperCase()," CONTEXT",vscpp("br",null),n,e.languageId,vscpp("br",null),e.chunks.map(i=>vscpp(zo,null,i.text)),vscpp("br",null),n)}};var ji=class extends X{async prepare(){let{query:e,chatVariables:r}=this.props,n=[];return r.forEach((i,o)=>{let s=i.values.find(a=>a.level===Vee.Full)??i.values[0];if(s?.kind==="github.docset")i.range&&(e=e.slice(0,i.range[0])+s.value+e.slice(i.range[1]));else if(s){let a=this.uniqueFileName(i.name,r.slice(o+1));n.push({variableName:a,variableValue:s.value}),i.range&&(e=e.slice(0,i.range[0])+`[#${a}](#${a}-context)`+e.slice(i.range[1]))}}),n.reverse(),{data:n,rewrittenMessage:e}}render(e,r){let n=[];for(let{variableName:i,variableValue:o}of e.data)o instanceof Is?n.push(vscpp(wO,{variableName:i,variableValue:o})):n.push(vscpp(ee,{reference:new $n({variableName:i}),priority:this.props.priority&&this.props.priority-1},"# ",i.toUpperCase()," CONTEXT",vscpp("br",null),o));return vscpp(vscppf,null,...n,vscpp(ee,{priority:this.props.priority},e.rewrittenMessage))}uniqueFileName(e,r){let n=r.filter(i=>i.name===e).length;return n===0?e:`${e}-${n}`}};var bi=class extends X{render(){return vscpp(zo,null,xn(this.props.languageId||"",this.props.code,!1))}},gy=class extends X{render(){let e=this.props.children;if(e)return vscpp(vscppf,null,e.map((r,n)=>(r.props??={},r.props.priority=this.props.descending?this.props.priority-n:this.props.priority-e.length+n,r)))}};var zr=class extends X{render(e,r){let n=[],i=this.props.history.filter(o=>o.status==="success"||o.status==="in-progress");for(let o of i)o.request.type==="user"&&n.push(vscpp(ee,null,o.request.message)),o.response?.type==="model"&&n.push(vscpp(tc,{name:o.response.name},o.response.message));return vscpp(gy,{priority:this.props.priority,descending:!1},n)}};var EEe=fe(require("path"));var xEe=fe(require("path"));var RO=class extends X{constructor(r,n){super(r,n);this._ignoreService=this.accessor.get(st)}async prepare(r){let n=this.accessor.get(It).activeTextEditor;if(!n)return{isIgnored:!1};let i=n.visibleRanges[0],o=n.document;return{isIgnored:await this._ignoreService.isCopilotIgnored(o.uri),document:o,range:i}}render(r,n){let{document:i,range:o}=r;if(i&&o){let s=[{uri:i.uri,version:i.version,ranges:[o]}],a=[new $n({uri:i.uri,range:o})];return r.isIgnored?vscpp("ignoredFiles",{value:[i.uri]}):vscpp(vscppf,null,vscpp("usedContext",{value:s}),vscpp("references",{value:a}),vscpp(ee,{priority:this.props.priority},"Excerpt from active file ",xEe.basename(i.uri.path),", lines ",o.start.line+1," to ",o.end.line+1,":",vscpp("br",null),vscpp(bi,{code:i.getText(o),languageId:i.languageId}),vscpp("br",null),vscpp("br",null),o.isSingleLine&&vscpp(vscppf,null,"The cursor is on line: ",o.start.line)))}else return}};var un=class t extends X{static{this.variableInfo={name:"selection",description:"The current selection in the active editor",defaultEnablement:!0}}async prepare(e){return this.props.document?{isIgnored:await this.accessor.get(st).isCopilotIgnored(this.props.document.uri)}:{isIgnored:!1}}render(e,r){let n=t.getCurrentSelection(this.accessor.get(It));if(!n)return vscpp(RO,null);let i=[{uri:n.activeDocument.uri,version:n.activeDocument.version,ranges:[n.range]}],o=[new $n(new Wf(n.activeDocument.uri,n.range))],s=[n.activeDocument.uri];return e.isIgnored?vscpp("ignoredFiles",{value:s}):vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp("references",{value:o}),vscpp(ee,{priority:this.props.priority},"Active selection:",vscpp("br",null),vscpp("br",null),vscpp("br",null),n.fileName&&vscpp(vscppf,null,"From the file: ",EEe.basename(n.fileName),vscpp("br",null)),vscpp(bi,{code:n.selectedText,languageId:n.languageId}),vscpp("br",null),vscpp("br",null)))}static getCurrentSelection(e,r=!1){let n=e.activeTextEditor,i=n?.document;if(i){let o=n.selection;if(o&&(!o.isEmpty||o.isEmpty&&r)){let s=i.languageId,a=i.getText(o);return{languageId:s,selectedText:a,activeDocument:i,range:o,fileName:i.fileName}}}}};var AO=class extends X{async prepare(){let e="copilotchat.safetyPromptRewrite";return await this.accessor.get(Ur).getTreatmentVariableAsync("vscode",e,!0)?{systemPromptExperiment:e}:{systemPromptExperiment:void 0}}render(e,r){let n=this.accessor.get(ft).OS,i=this.props.chatVariables.find(o=>o.name===un.variableInfo.name);return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),vscpp(cn,null),e.systemPromptExperiment?vscpp(vg,null):vscpp(Pt,null),vscpp("br",null),vscpp(gg,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",n," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp(Dr,null)),this.props.history&&vscpp(zr,{priority:700,history:this.props.history}),!i&&vscpp(un,{document:this.props.documentContext?.document,range:this.props.documentContext?.selection,priority:800}),vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var tE=class t extends xs{constructor(r,n=AO,i){super();this.accessor=r;this.prompt=n;this.documentContext=i}static async createIntentInvocation(r,n,i,o){let{location:s,documentContext:a}=i,c=new t(n,o,a),u=await n.get(Ye).getUserRequestEndpoint(s,r.id);return{intent:r,location:s,endpoint:u,promptCrafter:c}}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new mt(this.accessor,n,this.prompt,{documentContext:this.documentContext,endpoint:n,query:u,history:l,chatVariables:i},this.accessor.get(we))}};var rc=class t{constructor(){this.id=t.ID;this.locations=[1,2];this.description="Intent of this command is unclear or is not related to information technologies";this.commandInfo={hiddenFromUser:!0};this.intentDetectionInput={sampleQuestion:"Add a dog to this comment."}}static{this.ID="unknown"}static{this.Instance=new t}async invoke(e,r){if(r.location===1){let n=await e.get(Ye).getUserRequestEndpoint(1,this.id);return hg.createIntentInvocation(this,e,r,2,n)}return tE.createIntentInvocation(this,e,r)}};var PO=class extends X{render(){return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},vscpp("br",null),"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with \\"GitHub Copilot\\".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),vscpp("br",null),vscpp("br",null),vscpp(gg,{location:this.props.location,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn."),vscpp(zr,{priority:800,history:this.props.history}),vscpp(ee,{priority:900},"Write a short one-sentence question that the user can ask that naturally follows from the previous few questions and answers. It should not ask a question which is already answered in the conversation. It should be a question that you are capable of answering. Reply with only the text of the question and nothing else.",vscpp("br",null),vscpp(Dr,null)))}};var rE=class{constructor(e,r){this.accessor=e;this.options=r;this.logger=e.get(pe).getLogger("ConversationFollowUp")}async followUp(e,r,n,i){let o=i?{...i}:{};o.requestId=On(),o.messageSource="chat.followup";let s=await this.accessor.get(Ye).getNonUserRequestEndpoint(),{messages:a}=await $o(this.accessor,s,PO,{history:e.copy().turns,endpoint:s,location:r},this.accessor.get(we)),c=await this.accessor.get(sr).fetchOne(a,void 0,n,r,s,{temperature:this.options.temperature,top_p:this.options.topP},o);if(c.type==="success"){let u=[];return c.value&&u.push(c.value.trim()),u}else return this.logger.error(`Failed to fetch followups because of response type (${c.type}) and reason (${c.reason})`,c),[]}};var wYe=["code","doc","edit","search","workspace","tests","fix","explain","terminal","terminalExplain","unknown","api","newNotebook","new"],_i=new class{constructor(){this.intents=new Set}registerIntent(t){t.locations.every(e=>this.getIntent(t.id,e))||(this.intents.add(t),(!t.commandInfo||!t.commandInfo.hiddenFromUser)&&vi.registerCommand({commandId:t.id,intent:t,details:t.description,locations:t.locations}))}getIntents(t){let e=r=>{let n=wYe.indexOf(r);return n===-1?Number.MAX_SAFE_INTEGER:n};return Array.from(this.intents.values()).filter(r=>r.locations.includes(t)).sort((r,n)=>e(r.id)-e(n.id))}getIntent(t,e){return this.getIntents(e).find(r=>r.id===t)}};var nE=class t{constructor(e,r){this.accessor=e;this.location=r;this.logger=e.get(pe).getPromptResponseLogger("intent detection"),this.telemetryService=e.get(Ne),this.options=e.get(ns)}async detectIntent(e,r,n,i,o,s){let a;try{if(e){let m=e.selection,h=new Ge(new Ht(Math.max(m.start.line-5,0),0),new Ht(Math.min(m.end.line+5,e.document.lineCount),e.document.lineAt(m.end.line).text.length));a=e.document.getText(h)}}catch{}let c=e?.document.uri.path,u=this.createIntentDetectionPrompt(r,o,c,a),l=[{role:"system",content:u}];this.logger.logPrompt(l);let d=await this.accessor.get(Ye).getNonUserRequestEndpoint(),p=await this.accessor.get(sr).fetchMany(l,void 0,n,this.location,d,{temperature:this.options.temperature,top_p:this.options.topP,stop:[";"],n:1},{messageSource:"chat.intentprompt"}),f=this.handleResult(p,i,r);return this.sendTelemetry(o,f?.id,e?.language.languageId,s),this.sendInternalTelemetry(r,o,c,a,f?.id,e?.language.languageId,s),f}handleResult(e,r,n){if(this.logger.logResponse(e),e.type!=="success"){this.sendPromptIntentErrorTelemetry(r,e);return}let i=e.value.map(c=>c.trimStart().split(`
`)[0].replace(/function id:|response:/i,"").trim()),o=i.map(c=>_i.getIntent(c,this.location)).filter(c=>c!==void 0&&c.id!==rc.ID),s=t.pickMostFrequent(o);this.logger.info(`picked intent "${s?.id}" from ${JSON.stringify(e.value,null,"	")}`);let a=r.extendedBy({messageText:n,promptContext:i.join(),intent:s?.id||"unknown"});return this.telemetryService.sendRestrictedGHTelemetryEvent("conversation.promptIntent",a.raw.properties,a.raw.measurements),s}sendPromptIntentErrorTelemetry(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason});this.telemetryService.sendRestrictedGHTelemetryErrorEvent("conversation.promptIntentError",n.raw.properties,n.raw.measurements)}static pickMostFrequent(e){if(e.length===0)return;let r=new Map;for(let i of e){let o=r.get(i.id)??[0,i];o[0]+=1,r.set(i.id,o)}let[,n]=[...r.values()].reduce((i,o)=>i[0]>o[0]?i:o);return n}createIntentDetectionPrompt(e,r,n,i){let o=_i.getIntents(this.location),s=n?` in file ${n}`:"",a=i?`Current active file contains following excerpt:
\`\`\`
${i}
\`\`\``:"";return`
When asked for your name, you must respond with "GitHub Copilot".
Follow the user's requirements carefully & to the letter.

A software developer is using an AI chatbot in a code editor${s}.
${a}
The developer added the following request to the chat and your goal is to select a function to perform the request.
${r?`The developer probably wants Function Id '${r}', pick different only if you're certain.`:""}
Request: ${e}

Available functions:
${o.map(c=>`Function Id: ${c.id}
Function Description: ${c.intentDetectionInput.modelDescription||c.description}
`).join(`
`)}

Here are some examples to make the instructions clearer:
${o.map(c=>`Request: ${c.intentDetectionInput.sampleQuestion}
Response: ${c.id}
`).join(`
`)}
Request: ${e}
Response:
`.trim()}sendTelemetry(e,r,n,i){this.accessor.safeGet(Ne)?.sendMSFTTelemetryEvent("intentDetection",{chatLocation:vt.toString(this.location),preferredIntent:e??"<none>",detectedIntent:r??"<none>",languageId:n??"<none>",isRerunWithoutIntentDetection:String(i)??"<none>"})}sendInternalTelemetry(e,r,n,i,o,s,a){i=i&&i.length<5e3?i:void 0,this.accessor.safeGet(Ne)?.sendInternalMSFTTelemetryEvent("intentDetection",{chatLocation:vt.toString(this.location),request:e,preferredIntent:r??"<none>",filePath:n??"<none>",fileExerpt:i??"<none>",detectedIntent:o??"<none>",languageId:s??"<none>",isRerunWithoutIntentDetection:String(a)??"<none>"},{})}};var AY;(e=>{function t(r,n,i){let{options:o,document:s,selection:a,visibleRanges:c}=n,u={insertSpaces:o.insertSpaces,tabSize:o.tabSize},l=zc(s);return i||(c.length===1?i=c[0]:c.length>1?i=c[0].union(c[c.length-1]):i=a),{document:s,fileIndentInfo:u,language:l,selection:a,wholeRange:i}}e.fromEditor=t})(AY||={});var iE=class{constructor(e,r){this.stopStartMappings=e;this.processNonReportedDelta=r;this.stagedDeltasToApply=[];this.currentStartStop=void 0;this._appliedText="";this.nonReportedDeltas=[]}async processResponse(e,r,n,i,o){return this.doProcessResponse(n,i,o)}async doProcessResponse(e,r,n){for await(let{delta:i}of e){if(n.isCancellationRequested)break;this.applyDelta(i,r)}return this._appliedText}applyDeltaToProgress(e,r){let n=e.codeVulnAnnotations?.map(i=>({title:i.details.type,description:i.details.description}));(e.text||n?.length)&&r.report({content:e.text,vulnerabilities:n?.length?n:void 0})}updateStagedDeltasUpToIndex(e,r){let n=[];for(let i=0;i<e+r;){let o=this.stagedDeltasToApply.shift();if(o){if(i+o.text.length<=e)n.push(o);else if(i<e||i<e+r){if(i<e){let a={...o};a.text=o.text.substring(0,e-i),n.push(a)}let s={...o};s.text=o.text.substring(e-i+r),s.text&&this.stagedDeltasToApply.unshift(s)}i+=o.text.length}else break}return n}checkForKeyWords(e,r,n){let i=this.stagedDeltasToApply.map(o=>o.text).join("")+r.text;for(let o of e){let s=i.indexOf(o);if(s===-1)continue;return this.stagedDeltasToApply.push(r),this.updateStagedDeltasUpToIndex(s,o.length).forEach(c=>n(c)),o}for(let o of e)for(let s=o.length-1;s>0;s--){let a=o.substring(0,s);if(i.endsWith(a)){this.stagedDeltasToApply=[...this.stagedDeltasToApply,r];return}}[...this.stagedDeltasToApply,r].forEach(o=>{n(o)}),this.stagedDeltasToApply=[]}postReportRecordProgress(e){this.nonReportedDeltas.push(e)}applyDelta(e,r){if(this._appliedText+=e.text,this.currentStartStop===void 0){let n=this.checkForKeyWords(this.stopStartMappings.map(i=>i.stop),e,i=>this.applyDeltaToProgress(i,r));n&&(this.currentStartStop=this.stopStartMappings.find(i=>i.stop===n));return}else{if(!this.currentStartStop.start)return;this.checkForKeyWords([this.currentStartStop.start],e,this.postReportRecordProgress.bind(this))&&(this.processNonReportedDelta&&this.processNonReportedDelta(this.nonReportedDeltas).forEach(o=>this.applyDeltaToProgress({text:o},r)),this.currentStartStop=void 0,this.stagedDeltasToApply.length>0&&this.applyDelta({text:""},r))}}};function oE(){let t=On(),e=gr.createAndMarkAsIssued({messageId:t});return new PY(e)}var PY=class t{constructor(e){this.raw=e}get properties(){return this.raw.properties}get measurements(){return this.raw.measurements}markAsDisplayed(){this.raw.markAsDisplayed()}extendedBy(e,r){let n=this.raw.extendedBy(e,r);return new t(n)}};function kO(t,e,r,n,i,o,s){let a=t.turns[t.turns.length-1].contextParts.map(l=>l.kind).sort(),c={source:"user",turnIndex:(t.turns.length-1).toString(),conversationId:e,uiKind:r,inputSources:a.join(",")},u={promptTokenLen:i,messageCharLen:n.length};return o&&(c.suggestion=o),s=s.extendedBy(c,u),s}function DO(t,e,r,n,i,o,s){i!==void 0&&(s=s.extendedBy({offTopic:i.toString()})),s=s.extendedBy({headerRequestId:r}),kY(t,o,e,n,{},{},s)}function NO(t,e,r,n,i,o,s,a){let c=DY(i);kY(t,s,n,i,{source:"model",turnIndex:e.turns.length.toString(),conversationId:r,headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:i.length,numCodeBlocks:c.length},a)}function LO(t,e,r,n,i,o,s,a){kY(t,s,n,i,{source:"offTopic",turnIndex:e.turns.length.toString(),conversationId:r,userMessageId:o,uiKind:n},{messageCharLen:i.length},a)}function kY(t,e,r,n,i,o,s){let a={...n?{messageText:n}:{},...i};e&&(i.languageId=e.languageId,o.documentLength=e.getText().length);let c=s.extendedBy(i,o),u=s.extendedBy(a),l=RYe(r),d=t.get(Ne);return d.sendGHTelemetryEvent(`${l}.message`,c.raw.properties,c.raw.measurements),d.sendRestrictedGHTelemetryEvent(`${l}.messageText`,u.raw.properties,u.raw.measurements),c.raw}function OO(t,e,r,n,i){return sE(t,i,{suggestion:e,messageId:r,suggestionId:n},{},"conversation.suggestionShown")}function sE(t,e,r,n,i,o){let s=o??gr.createAndMarkAsIssued();e&&(r.languageId=e.languageId,n.documentLength=e.getText().length);let a=s.extendedBy(r,n);return t.get(Ne).sendGHTelemetryEvent(i,a.properties,a.measurements),a}function MO(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});t.get(Ne).sendRestrictedGHTelemetryEvent("engine.messages",n.properties,n.measurements)}function RYe(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}function DY(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}var Nw={errorDetails:{message:Ed.t("Cancelled")}},aE=class{constructor(e,r,n){this.options=r;this.conversationLogger=n;this.inputPlaceholder=Ed.t("Ask Copilot or type / for commands");this._telemetryService=e.get(Ne),this._configurationService=e.get(Re),this.accessor=e,this.conversation=new ju,this.intentDetector=new nE(e,2),this.conversation=this.initializeConversation(),this._conversationStore=e.get(ig)}addHistory(e){let r;for(let n of e)if(n instanceof $ee)r=new bd({message:n.prompt,type:"user"});else{let i=n.response.map(s=>s instanceof cl?s.value.value:s instanceof $S?Y1e(s):"content"in s?s.content:null).filter(s=>!!s).join("");if(r){let s=n.command||Ree(n.participant),a=vi.getCommand(s,2);r.response={message:i,type:"model",name:a?.commandId||rc.ID},n.result.errorDetails?n.result.errorDetails?.responseIsFiltered?r.status="filtered":n.result.errorDetails.message==="Cancelled"?r.status="cancelled":r.status="error":r.status="success",this.conversation.addTurn(r),r=void 0}let o=n.result;typeof o.metadata?.sessionId=="string"&&(this._sessionId=o.metadata.sessionId)}this._sessionId||(this._sessionId=On())}initializeConversation(){return new ju}async provideResponseWithProgress(e,r,n,i){try{let o=this,s=!0,a=new class{markdown(p){return o.conversationLogger?.logProgress(new cl(p),s),s=!1,r.markdown(p)}button(p){return r.button(p)}filetree(p,f){return r.filetree(p,f)}anchor(p,f){return r.anchor(p,f)}progress(p){return r.progress(p)}reference(p){return r.reference(p)}push(p){return r.push(p),this}report(p){"content"in p&&(o.conversationLogger?.logProgress(new cl(p.content),s),s=!1),r.report(p)}},c=this.newTurn(e),u=oE();u.markAsDisplayed();let l=await this._provideResponseWithProgress(c,e,a,n,u,i),d=await c.intentInvocation?.commands?.(this.accessor,c);return d&&d.forEach(p=>r.button(p)),this.conversationLogger?.logResponse(l),this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{chatLocation:"panel",intent:c.intentInvocation?.intent.id??"",request:e.prompt,response:c.response?.message??"",sessionId:this._sessionId},{turnNumber:this.conversation.turns.length}),this._conversationStore.addConversation(c.requestId,this.conversation),{...l,metadata:{responseId:c.requestId,sessionId:this._sessionId}}}catch(o){throw this.conversationLogger?.logThrownError(o),o}}newTurn(e){let r={message:e.prompt,type:"user"},n=new bd(r,this._sessionId);return this.conversation.addTurn(n),n}async _provideResponseWithProgress(e,r,n,i,o,s){let a=()=>{if(i.isCancellationRequested)return e.status="cancelled",!0};if(a())return Nw;try{let c=this.accessor.get(It).activeTextEditor,u=e.request.message;this.conversationLogger?.logRequest(e.request);let l={command:s.intentId?vi.getCommand(s.intentId,2):void 0,restOfQuery:u};if(l.command?.intent&&!(l.command.intent.commandInfo?.allowsEmptyArgs??!0)&&!l.restOfQuery){let L=z1e(l.command.intent.id),O="";return L&&(O=`@${L.agent} `,L.command&&(O+=` /${L.command}`),O+=` ${l.command.details}`),e.response={message:Ed.t(`Please specify a question when using this command.

Usage: {0}`,O),type:"meta"},e.status="error",{errorDetails:{message:e.response.message,responseIsFiltered:!1,responseIsIncomplete:!1}}}let d=l?.command?.intent,p;if(d&&(e.request={message:l.restOfQuery||d.intentDetectionInput.sampleQuestion,type:"user"},this.conversationLogger?.logIntent(d.id,!0)),!d&&this.accessor.get(Re).getConfig(ke.ConversationIntentDetection)&&(d=p=await this.intentDetector.detectIntent(void 0,u,i,o,void 0,void 0),this.conversationLogger?.logIntent(d?.id,!1),a()))return Nw;d??=rc.Instance;let f=c?AY.fromEditor(this.accessor,c):void 0,m=await d.invoke(this.accessor,{location:2,documentContext:f},void 0);if(a())return Nw;e.intentInvocation=m,r=await this.sanitizeVariables(r,e);let h=m.endpoint,g,v,b=!1,y;try{let L={report(O){n.push(O)}};({messages:g,tokenCount:v,ignoredSomeFiles:b,references:y}=await m.promptCrafter.buildPrompt(this.conversation,h,r.variables,L,o,i));for(let O of y)L.report(new sA(O.anchor));e.addReferences(y)}catch(L){if(Kg(L))return Nw;throw L}if(a())return Nw;if(g.length===0)return{};let E=this.conversation.getLatestTurn()?.contextParts.map(L=>L.kind)??[];if(this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionMessage",{intent:d?.id??"none",detectedIntent:p?.id??"none",contextTypes:E.join(","),query:l.restOfQuery},{}),e.chatMessages=g,this.fixMessageNames(d,g),this.conversationLogger?.logMessages(g),o=kO(this.conversation,this._sessionId,"conversationPanel",u,v,d?.id,o),i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:Ed.t("Cancelled")}};let x=m?.responseProcessor??new iE([{stop:"[COMMANDS START]"}]),R=await this.fetchConversationResponse(e,h,u,g,i,n,x,o,{messageId:o.properties.messageId,messageSource:"chat.user"});return b&&n.markdown(Ed.t(`

**Note:** Some files were excluded from the context due to content exclusion rules. Click [here](https://docs.github.com/en/copilot/managing-github-copilot-in-your-organization/configuring-content-exclusions-for-github-copilot) to learn more.`)),R}catch(c){this.accessor.get(pe).defaultLogger.exception(c),this.accessor.get(Ne).sendGHTelemetryException(c,"Error"),this.conversationLogger?.logThrownError(c);let u=c.message;return e.status="error",e.response={message:u,type:"meta"},{errorDetails:{message:u,responseIsIncomplete:!0}}}}async sanitizeVariables(e,r){let n=e.variables.map(async o=>{let s=!1;for(let a of o.values)a.value instanceof Is&&(s=await this.accessor.get(st).isCopilotIgnored(a.value));return s&&o.range&&(r.request.message=r.request.message.slice(0,o.range[0])+r.request.message.slice(o.range[1])),s?null:o}),i=xr(await Promise.all(n));return{...e,variables:i}}fixMessageNames(e,r){let n=this._configurationService.getConfig(ke.UseMessageNames);r.forEach(i=>{n?i.role!=="system"&&i.name===e?.id&&(i.name=void 0):i.name=void 0})}async fetchConversationResponse(e,r,n,i,o,s,a,c,u){let l=oE();e.requestId=c.properties.messageId;let d=Date.now(),p=0,f=new e0,m=a.processResponse(e,i,f.asyncIterable,s,o),h=new Set,g=await this.accessor.get(sr).fetchOne(i,async(O,z,N)=>{p===0&&(p=Date.now()),N.codeVulnAnnotations&&(!((O.match(/(^|\n)```/g)?.length??0)%2===1)||O.match(/(^|\n)```\w*\s*$/))&&(N.codeVulnAnnotations=void 0),N.codeVulnAnnotations&&(N.codeVulnAnnotations=N.codeVulnAnnotations.filter(ce=>!h.has(ce.details.type)),N.codeVulnAnnotations.forEach(ce=>h.add(ce.details.type))),f.emitOne({text:O,delta:N})},o,2,r,{temperature:this.options.temperature,top_p:this.options.topP},u,{intent:!0});f.resolve();let v=await m,b=v?DY(v):[],y=v?v.match(/\]\(command:_github\.copilot\.open/g):[],E=c.raw.displayedTime??d,x=["programming-related tasks","programming related questions","software development topics","related to programming","expertise is limited","sorry, i can't assist with that"],R=0;g.type==="success"&&!v.trim().includes(`
`)&&x.some(O=>v.toLowerCase().includes(O))&&(R=1);let L=this.accessor.get(we);switch(this._telemetryService.sendMSFTTelemetryEvent("panel.request",{command:e.intentInvocation?.intent.id??"none",contextTypes:e.contextParts.map(O=>O.kind).join(",")??"none",promptTypes:i.map(O=>`${O.role}${O.name?`-${O.name}`:""}:${O.content.length}`).join(","),conversationId:this._sessionId,requestId:e.requestId,responseId:g.requestId,responseType:g.type,codeBlocks:b.join(","),model:r.model},{turn:this.conversation.turns.length,textBlocks:b.length?-1:v.split(/\n{2,}/).length??0,links:y?.length??0,maybeOffTopic:R,messageTokenCount:L.tokenLength(e.request.message),promptTokenCount:L1(this.accessor.get(we),i),userPromptCount:i.filter(O=>O.role==="user").length,responseTokenCount:L.tokenLength(v)??0,timeToRequest:d-E,timeToFirstToken:p?p-E:-1,timeToComplete:Date.now()-E}),DO(this.accessor,"conversationPanel",g.requestId,n,g.type==="offTopic",this.accessor.get(It).activeTextEditor?.document,c),g.type){case"success":return await this.processSuccessfulFetchResult(e,v,g.requestId,l);case"offTopic":return this.processOffTopicFetchResult(s,e,n,c);case"canceled":return e.status="cancelled",e.response={message:"Cancelled",type:"user"},{errorDetails:e.response};case"rateLimited":return e.status="error",{errorDetails:{message:Ed.t("Sorry, your request was rate-limited. Please wait and try sending again later."),responseIsFiltered:!0}};case"badRequest":case"failed":return e.status="error",e.response={message:g.reason,type:"server"},{errorDetails:e.response};case"filtered":return e.status="filtered",{errorDetails:{message:eO(g.category),responseIsFiltered:!0}};case"length":return e.status="error",{errorDetails:{message:Ed.t("Sorry, the response hit the length limit. Please rephrase your prompt.")}};case"unknown":return e.status="error",{errorDetails:{message:Ed.t("Sorry, no response was returned."),responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i){return r.length>0?(e.status="success",e.response={message:r,type:"model"},i.markAsDisplayed(),NO(this.accessor,this.conversation,this._sessionId,"conversationPanel",r,n,this.accessor.get(It).activeTextEditor?.document,i),{}):(e.status="error",e.response={message:Ed.t("The model unexpectedly did not return a response, which may indicate a service issue. Please report a bug."),type:"meta"},{errorDetails:e.response})}processOffTopicFetchResult(e,r,n,i){let o=oE();return e.markdown(this.options.rejectionMessage),r.response={message:this.options.rejectionMessage,type:"offtopic-detection"},r.status="off-topic",o.markAsDisplayed(),LO(this.accessor,this.conversation,this._sessionId,"conversationPanel",n,i.properties.messageId,this.accessor.get(It).activeTextEditor?.document,o),{}}getLatestTurn(){return this.conversation.getLatestTurn()}removeRequest(e){let r=this.conversation.removeTurn(e);this._telemetryService.sendMSFTTelemetryEvent("panel.action.remove",{command:r?.intentInvocation?.intent.id,contextTypes:r?.contextParts.map(n=>n.kind).join(",")??"none",responseType:r?.response?.type,conversationId:this._sessionId,requestId:e})}};async function TEe(t,e,r,n,i){let o=r.getLatestTurn();if(!o)return[];let s={messageId:o.requestId},u=(o.status==="success"?await new rE(t,e).followUp(r,2,i,s):[]).map(f=>AYe(f,t,s));i.isCancellationRequested||n?.logFollowups(u);let l=o,d=[],p=l?.intentInvocation;return p?.followUps&&(d=await p.followUps(t,l)),u.concat(d)}function AYe(t,e,r){let n=r??{};return n.suggestionId=On(),n.suggestionType="Follow-up from model",OO(e,n.suggestionType,n.messageId,n.suggestionId,e.get(It).activeTextEditor?.document),{prompt:t,metadata:n}}var yg=fe(require("vscode"));var cE=re("IFeedbackReporter");function CEe(t,e){let r=yg.window.activeTextEditor?.document,n=yg.window.activeTextEditor?.selection,i=e.result,o=t.get(Ne),s=i.metadata?.responseId&&t.get(ig).getConversation(i.metadata.responseId);switch(e.action.kind){case"copy":o.sendMSFTTelemetryEvent("panel.action.copy",{languageId:r?.languageId,requestId:i.metadata?.responseId},{codeBlockIndex:e.action.codeBlockIndex,copyType:e.action.copyKind,characterCount:e.action.copiedCharacters,lineCount:e.action.copiedText.split(`
`).length});break;case"insert":o.sendMSFTTelemetryEvent("panel.action.insert",{languageId:r?.languageId,requestId:i.metadata?.responseId},{codeBlockIndex:e.action.codeBlockIndex,characterCount:e.action.totalCharacters});break;case"runInTerminal":o.sendMSFTTelemetryEvent("panel.action.runinterminal",{languageId:r?.languageId,requestId:i.metadata?.responseId,blockLanguage:e.action.languageId},{codeBlockIndex:e.action.codeBlockIndex});break;case"followUp":break;case"bug":s&&t.get(cE)?.reportChat(s.getLatestTurn());break}if(e.action.kind==="copy"||e.action.kind==="insert"){let a={};a={totalCharacters:e.action.totalCharacters},e.action.kind==="copy"&&(a={...a,copiedCharacters:e.action.copiedCharacters}),r&&n&&(a={...a,cursorLocation:r.offsetAt(n.active)}),sE(t,yg.window.activeTextEditor?.document,{codeBlockIndex:e.action.codeBlockIndex.toString(),messageId:i.metadata?.responseId??""},a,e.action.kind==="copy"?"conversation.acceptedCopy":"conversation.acceptedInsert")}}function IEe(t,e){let r=yg.window.activeTextEditor?.document,n=e.result;t.get(Ne).sendMSFTTelemetryEvent("panel.action.vote",{languageId:r?.languageId,requestId:n.metadata.responseId},{direction:e.kind===yg.ChatResultFeedbackKind.Helpful?1:2}),sE(t,r,{rating:e.kind===yg.ChatResultFeedbackKind.Helpful?"positive":"negative",messageId:n.metadata.responseId},{},"conversation.messageRating")}var Ko=fe(require("vscode"));var kEe=fe(require("vscode"));var AEe=fe(require("util")),zs=require("vscode");function PYe(t){let e=t.get(Re),r=t.get(Mr),n=e.getConfig(ke.DebugTestOverrideProxyUrl);return r.extensionMode===is.Test&&n.length>0?n:e.getConfig(ke.DebugChatOverrideProxyUrl)??e.getConfig(ke.DebugOverrideProxyUrl)}function kYe(t,e){let r=PYe(t);return r.length===0?(r="https://api.githubcopilot.com",`${r}${e}`):r}function wEe(t){return kYe(t,"/chat/completions")}async function REe(t,e){let n=(await t.get(kt).getCopilotToken(t)).isInternal?t.get(Re).getConfig(ke.DebugOverrideChatMaxTokenNum):0;if(n>0)return n;let o=await t.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.panelGpt4Context",!0);switch(e){case"gpt-3.5-turbo":return 7168;case"gpt-4":return o||3072;default:return 7168}}var uE=class{constructor(e,r,n,i){this.url=e;this.disableSnippy=i;this._maxTokens=n,this.model=r}get modelMaxPromptTokens(){return this._maxTokens}interceptBody(e){e&&this.disableSnippy&&(e.snippy={enabled:!1},Object.keys(e).forEach(r=>{r.startsWith("intent")&&delete e[r]}))}getExtraHeaders(){let e={};return this.disableSnippy&&(e["Editor-Plugin-Version"]="simulation-tests-plugin/2",e["Editor-Version"]="simulation-tests-editor/1.85"),e}};var bg=class{},DYe=30*1e3;function _g(t,e,r,n,i,o,s){let a=t.get(ft),c={Authorization:`Bearer ${r}`,"X-Request-Id":i,"X-GitHub-Api-Version":"2023-07-07","Openai-Organization":"github-copilot","Copilot-Integration-Id":a.isProduction()?"vscode-chat":"vscode-chat-dev","VScode-SessionId":a.sessionId,"VScode-MachineId":a.machineId,...a.getEditorVersionHeaders(),...e.getExtraHeaders?e.getExtraHeaders():{}};e.interceptBody&&e.interceptBody(o),t.get(NY).contributeHeaders(c),n&&(c["OpenAI-Intent"]=n);let u={method:"POST",headers:c,json:o,timeout:DYe},l=t.get(Ne),d=t.get(Zr);if(s){let f=d.makeAbortController();s.onCancellationRequested(()=>{l.sendGHTelemetryEvent("networking.cancelRequest",{headerRequestId:i}),f.abort()}),u.signal=f.signal}return d.fetch(e.url,u).catch(f=>{if(f.code==="ECONNRESET"||f.code==="ETIMEDOUT"||f.code==="ERR_HTTP2_INVALID_SESSION"||f.message==="ERR_HTTP2_GOAWAY_SESSION")return l.sendGHTelemetryEvent("networking.disconnectAll"),d.disconnectAll().then(()=>d.fetch(e.url,u));throw d.isAbortError(f)?new Zs:f})}var NY=re("headerContributors"),FO=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let r=this.contributors.indexOf(e);r!==-1&&this.contributors.splice(r,1)}contributeHeaders(e){for(let r of this.contributors)r.contributeHeaderValues(e)}size(){return this.contributors.length}};var UO=re("IPromptVariablesService");var Lw=new Map;async function PEe(t){t.get(Mr).subscriptions.push(new zs.Disposable(()=>Lw.forEach(r=>r.dispose()))),LY(t)}var NYe=["default","githubissue"],BO;async function LY(t){return BO||(BO=LYe(t)),BO.finally(()=>BO=void 0)}async function LYe(t){let e=t.get(pe).getLogger("RemoteAgents");if(!t.get(Re).getConfig(ke.EnableRemoteAgents))return;let n=t.get(Re).getConfig(ke.AgentsEndpointUrl),i=new Set(Lw.keys());try{let o=await t.get(kt).getAnyGitHubToken(),a=await(await t.get(Zr).fetch(`${n}/agents`,{method:"GET",headers:{Authorization:AEe.format("Bearer %s",o),...t.get(ft).getEditorVersionHeaders()}})).text(),c;try{if(c=JSON.parse(a).agents,!Array.isArray(c))throw new Error("Expected 'agents' to be an array")}catch(u){e.warn(`Invalid remote agent response: ${a} (${u})`);return}for(let u of c)NYe.includes(u.slug.toLowerCase())||i.delete(u.slug)||Lw.set(u.slug,FYe(t,e,u,n))}catch(o){e.warn(`Failed to load remote slash commands: ${o}`)}for(let o of i)Lw.get(o).dispose(),Lw.delete(o)}function OYe(t,e){let r=[];for(let n of e.history)if(n.participant===t&&(n instanceof zs.ChatRequestTurn&&r.push({role:"user",content:n.prompt}),n instanceof zs.ChatResponseTurn)){let i=n.response.map(o=>o instanceof zs.ChatResponseMarkdownPart?o.value.value:"content"in o?o.content:null).filter(o=>!!o).join("");r.push({role:"assistant",content:i})}return r}function MYe(t){let e;for(let r of t.history)if(r instanceof zs.ChatResponseTurn){let n=r.result.metadata?.sessionId;if(typeof n=="string"){e=n;break}}return e??On()}function FYe(t,e,r,n){let i=zs.chat.createDynamicChatParticipant(`github.copilot-dynamic.${r.slug}`,r.slug,r.description,async(o,s,a,c)=>{let u=MYe(s),l="";try{let d=new uE(`${n}/agents/${r.slug}?chat`,"gpt-3.5-turbo",4096),f=await t.get(UO).resolveVariablesInPrompt(o.prompt,o.variables),m=await t.get(sr).fetchMany([...OYe(r.slug,s),{role:"user",content:f.message}],async(h,g,v)=>{a.markdown(v.text)},c,2,d,{secretKey:await t.get(kt).getAnyGitHubToken(),copilot_thread_id:u});return m.type!=="success"?(e.warn(`Bad response from /agents/${r.slug}: ${m.type} ${m.reason}`),m.reason.includes("400 no docs found")?{errorDetails:{message:"No docs found"},metadata:{sessionId:u,responseId:l}}:{errorDetails:{message:m.reason},metadata:{sessionId:u,responseId:l}}):{metadata:{sessionId:u,responseId:l}}}catch(d){return e.warn(`/agents/${r.slug} failed: ${d}`),{metadata:{sessionId:u,responseId:l}}}});return i.fullName=r.name,i.iconPath=Is.parse(r.avatar_url),i.participantVariableProvider={triggerCharacters:["#"],provider:{async provideCompletionItems(o,s){return(await UYe(t,r.slug,o,e,s)).map(c=>{let u="#"+c.replace(/ /g,""),l=new zs.ChatCompletionItem("#"+c,[{value:u,level:zs.ChatVariableLevel.Full,description:"",kind:"github.docset"}]);return l.insertText=u,l})}}},i}async function UYe(t,e,r,n,i){let a={url:`${t.get(Re).getConfig(ke.AgentsEndpointUrl)}/agents/autocomplete`,modelMaxPromptTokens:0};r.startsWith("#")&&(r=r.substring(1));let u=await t.get(kt).getAnyGitHubToken(),d=await(await _g(t,a,u??"",void 0,On(),{agents:[e],query:r},i)).text();try{let p=JSON.parse(d);if(p===null)return[];if(!Array.isArray(p))throw new Error("Expected array");return p.map(f=>f.metadata.display_name)}catch(p){return n.warn(`Invalid autocomplete response (${p.toString()}): ${d}`),[]}}var qO=class{constructor(e,r){this.accessor=e;this.options=r}getLastSession(){return this.lastSession}async prepareSession(e){LY(this.accessor);let r=new O1(this.accessor,()=>kEe.window.createOutputChannel("GitHub Copilot Chat Conversation",{log:!0})),n=new aE(this.accessor,this.options,r);return this.lastSession=n,n}};function HO(){return"https://aka.ms/microsoft/vscode-copilot-release"}var jO=class{constructor(e){this.accessor=e;this.hasShownWelcomeMessage=!1}async provideWelcomeMessage(e){let n=(await ac(this.accessor.get(Re)))?.account?.label,i=HO(),s=this.accessor.get(Re).getConfig(ke.WelcomeMessage),a=Ko.l10n.t({message:"I'm powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and [share feedback]({0}) so that we can learn and improve. Check out the [{1} documentation]({2}) to learn more.",args:[i,"Copilot","https://code.visualstudio.com/docs/copilot/getting-started-chat"],comment:["{Locked=']({'}","the [text](url) is a markdown link syntax. Do not add any additional spaces between ] and ("]}),c=n?" **@"+n+"**":"";if(s==="never"||this.hasShownWelcomeMessage&&s==="first")return[Ko.l10n.t("Hi{0}, how can I help you?",c)];this.hasShownWelcomeMessage=!0;let u="workbench.action.quickchat.launchInlineChat",l=Ko.window.activeNotebookEditor||Ko.window.activeTextEditor?Ko.l10n.t("You can also [start an inline chat session]({0}).",`command:${u}`):"",d=new Ko.MarkdownString(Ko.l10n.t("Welcome,{0}, I'm your {1} and I'm here to help you get things done faster. {2}",c,"Copilot",l));return d.isTrusted={enabledCommands:[u]},[d,a]}provideSampleQuestions(e){let r=Ko.window.activeNotebookEditor||Ko.window.activeTextEditor?BYe():DEe([["","help",Ko.l10n.t("What can you do?")]]);return qYe([...r],this.accessor,"welcome"),r}};function BYe(){let t="workspace";return DEe([[t,"fix",Ko.l10n.t("the problems in my code")],[t,"tests",Ko.l10n.t("add unit tests for my code")],[t,"explain",Ko.l10n.t("how the selected code works")]])}function DEe(t){return t.map(([e,r,n])=>({prompt:"",participant:e,command:r,label:`/${r} ${n}`}))}function qYe(t,e,r){t.map(n=>{OO(e,`@${n.participant} /${n.command} ${n.prompt}`,r,"",Ko.window.activeTextEditor?.document)})}var lE=class{constructor(e){this.accessor=e}register(e){let r=new OY(this.accessor,e);return r.register(),r}};lE=ze([rt(0,Yt)],lE);var OY=class{constructor(e,r){this.accessor=e;this.options=r;this._disposables=new Vt;this._logger=new O1(this.accessor,()=>this._disposables.add(no.window.createOutputChannel("GitHub Copilot Chat Conversation","log")))}dispose(){this._disposables.dispose()}register(){this._disposables.add(this.registerDefaultAgent()),this._disposables.add(this.registerWorkspaceAgent()),this._disposables.add(this.registerVSCodeAgent()),this._disposables.add(this.registerTerminalAgent())}createAgent(e,r){let n=no.chat.createChatParticipant(wee(e),this.getChatParticipantHandler(r));return n.onDidPerformAction(i=>CEe(this.accessor,i)),n.onDidReceiveFeedback(i=>IEe(this.accessor,i)),n.supportIssueReporting=this.accessor.get(Re).getConfig(ke.DebugReportFeedback),n.followupProvider={provideFollowups:async(i,o,s)=>{let a=i.metadata?.responseId&&this.accessor.get(ig).getConversation(i.metadata.responseId);return a?await TEe(this.accessor,this.options,a,this._logger,s):[]}},n}registerWorkspaceAgent(){let e=this.createAgent(Cee,"workspace");return e.iconPath=new no.ThemeIcon("code"),e.isSecondary=!0,e.sampleRequest=vi.getCommand("workspace",2)?.intent?.commandInfo?.sampleRequest,e}registerVSCodeAgent(){let e=this.createAgent(Iee,"vscode"),r=no.env.appName.includes("Insiders")||no.env.appName.includes("OSS");return e.iconPath=gt.joinPath(this.accessor.get(Mr).extensionUri,"assets",r?"vscode-chat-avatar-insiders.svg":"vscode-chat-avatar-stable.svg"),e.sampleRequest=vi.getCommand("vscode",2)?.intent?.commandInfo?.sampleRequest,e}registerTerminalAgent(){let e=this.createAgent(qR,"terminal");return e.iconPath=new no.ThemeIcon("terminal"),e.sampleRequest=vi.getCommand("terminal",2)?.intent?.commandInfo?.sampleRequest,e}async initDefaultAgentRequestorProps(e){let r=async()=>{let n=await ac(this.accessor.get(Re));if(n){let i=n?.account?.label;return e.requester={name:i,icon:gt.parse(`https://avatars.githubusercontent.com/${i}`)},!0}return!1};if(!await r()){let n=no.authentication.onDidChangeSessions(async i=>{r0(i,this.accessor.get(Re))&&await r()&&n.dispose()})}}registerDefaultAgent(){let e=this.createAgent("default","unknown");e.iconPath=new no.ThemeIcon("copilot"),this.initDefaultAgentRequestorProps(e);try{e.helpTextPrefix=no.l10n.t("You can ask me general programming questions, or chat with the following participants which have specialized expertise and can perform actions:");let r=no.l10n.t({message:`To have a great conversation, ask me questions as if I was a real programmer:

* **Show me the code** you want to talk about by having the files open and selecting the most important lines.
* **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
* **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.

You can also ask me questions about your editor selection by [starting an inline chat session](command:inlineChat.start).

Learn more about [GitHub Copilot](https://docs.github.com/copilot/using-github-copilot/getting-started-with-github-copilot?tool=vscode&utm_source=editor&utm_medium=chat-panel&utm_campaign=2024q3-em-MSFT-getstarted) in [Visual Studio Code](https://code.visualstudio.com/docs/copilot/overview).`,comment:"{Locked='](command:inlineChat.start)'}"}),n=new no.MarkdownString(r);n.isTrusted={enabledCommands:["inlineChat.start"]},e.helpTextPostfix=n,e.helpTextVariablesPrefix=no.l10n.t("You can also help me understand your question by using the following variables to give me extra context:")}catch{}return e.fullName="GitHub Copilot",e.welcomeMessageProvider=new jO(this.accessor),e}getChatParticipantHandler(e){return async(r,n,i,o)=>{let s=new aE(this.accessor,this.options,this._logger);s.addHistory(n.history);let a=ng[e],c=r.command&&a?a[r.command]:e;return await s.provideResponseWithProgress(r,i,o,{intentId:c})}}};var le=fe(require("vscode"));var _o=require("vscode");function NEe(t){if(typeof t!="string")throw new TypeError("Argument must be a string.");if(!t)return t;let e=t.startsWith("!"),r=e?t.slice(1):t,n=r,i=!1;switch(r[0]==="/"&&(i=!0,n=r.slice(1)),n[0]){case"*":r[1]!=="*"&&(n="**/"+n);break;default:if((!i&&!n.includes("/")||n.endsWith("/"))&&(n="**/"+n),n.endsWith("*")||n.endsWith("?"))break;/\.[a-z\d_-]+$/.test(n)||(n.endsWith("/")||(n+="/"),n+="**")}return e?"!"+n:n}var zEe=fe(GEe()),$s=require("path");var VO=class{constructor(){this._ignoreMap=new Map;this._ignoreCache=new Map;this._searchRankCache=null}setIgnoreFile(e,r,n){let i="";e&&(i=(0,$s.relative)(e.fsPath,(0,$s.dirname)(r.fsPath)),i.startsWith("..")&&(i="")),this._ignoreMap.set(r.fsPath,{ignore:(0,zEe.default)().add(n),patterns:rb(n).filter(o=>o.trim()&&!o.startsWith("#")).map(NEe).map(o=>i?$s.posix.join(i,o):o)}),this._searchRankCache=null,this._ignoreCache.clear()}removeIgnoreFile(e){this._ignoreMap.delete(e.fsPath),this._searchRankCache=null,this._ignoreCache.clear()}removeWorkspace(e){let r=0;for(let n of this._ignoreMap.keys())VEe(e.fsPath,n)&&(this._ignoreMap.delete(n),r+=1);r>0&&(this._searchRankCache=null,this._ignoreCache.clear())}asMinimatchPatterns(){return[...this._ignoreMap.values()].flatMap(e=>e.patterns)}isIgnored(e){if(this._ignoreMap.size===0)return!1;let r=e.fsPath;if(this._ignoreCache.has(r))return this._ignoreCache.get(r);let n=0,i={ignored:!1,unignored:!1};try{let o=this._searchRank;for(let s of o){n+=1;let a=(0,$s.dirname)(s),c=(0,$s.relative)(a,r);if(!c.startsWith("..")&&a!==r&&VEe(a,r)){let u=this._ignoreMap.get(s);if(!u)throw new Error(`No ignore patterns found for ${s}`);if(i=u.ignore.test(c),i.ignored||i.unignored)break}}return this._ignoreCache.set(r,i.ignored),i.ignored}catch{return!1}}get _searchRank(){if(this._searchRankCache!==null)return this._searchRankCache;let e={},r=n=>n.split($s.sep).length;return this._searchRankCache=[...this._ignoreMap.keys()].sort((n,i)=>(e[i]||=r(i))-(e[n]||=r(n)))}};function VEe(t,e){return t===e?!0:(t.charAt(t.length-1)!==$s.sep&&(t+=$s.sep),(0,$s.normalize)(e).startsWith((0,$s.normalize)(t)))}var pSe=fe(iSe(),1);var Mw=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var dKe={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Fw=t=>t.replace(/[[\]\\-]/g,"\\$&"),pKe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),oSe=t=>t.join(""),sSe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,a=!1,c=!1,u=!1,l=r,d="";e:for(;o<t.length;){let h=t.charAt(o);if((h==="!"||h==="^")&&o===r+1){u=!0,o++;continue}if(h==="]"&&s&&!c){l=o+1;break}if(s=!0,h==="\\"&&!c){c=!0,o++;continue}if(h==="["&&!c){for(let[g,[v,b,y]]of Object.entries(dKe))if(t.startsWith(g,o)){if(d)return["$.",!1,t.length-r,!0];o+=g.length,y?i.push(v):n.push(v),a=a||b;continue e}}if(c=!1,d){h>d?n.push(Fw(d)+"-"+Fw(h)):h===d&&n.push(Fw(h)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(Fw(h+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=h,o+=2;continue}n.push(Fw(h)),o++}if(l<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let h=n[0].length===2?n[0].slice(-1):n[0];return[pKe(h),!1,l-r,!1]}let p="["+(u?"^":"")+oSe(n)+"]",f="["+(u?"":"^")+oSe(i)+"]";return[n.length&&i.length?"("+p+"|"+f+")":n.length?p:f,a,l-r,!0]};var xg=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var fKe=new Set(["!","?","+","*","@"]),aSe=t=>fKe.has(t),mKe="(?!(?:^|/)\\.\\.?(?:$|/))",zO="(?!\\.)",hKe=new Set(["[","."]),gKe=new Set(["..","."]),vKe=new Set("().*{}+?[]^$\\!"),yKe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),GY="[^/]",cSe=GY+"*?",uSe=GY+"+?",dE=class t{type;#t;#i;#p=!1;#r=[];#c;#s;#m;#a=!1;#n;#e;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#i=!0),this.#c=r,this.#t=this.#c?this.#c.#t:this,this.#n=this.#t===this?n:this.#t.#n,this.#m=this.#t===this?[]:this.#t.#m,e==="!"&&!this.#t.#a&&this.#m.push(this),this.#s=this.#c?this.#c.#r.length:0}get hasMagic(){if(this.#i!==void 0)return this.#i;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#i=!0;return this.#i}toString(){return this.#e!==void 0?this.#e:this.type?this.#e=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#e=this.#r.map(e=>String(e)).join("")}#h(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#m.pop();){if(e.type!=="!")continue;let r=e,n=r.#c;for(;n;){for(let i=r.#s+1;!n.type&&i<n.#r.length;i++)for(let o of e.#r){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#r[i])}r=n,n=r.#c}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#c===this))throw new Error("invalid part: "+r);this.#r.push(r)}}toJSON(){let e=this.type===null?this.#r.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#r.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#a&&this.#c?.type==="!")&&e.push({}),e}isStart(){if(this.#t===this)return!0;if(!this.#c?.isStart())return!1;if(this.#s===0)return!0;let e=this.#c;for(let r=0;r<this.#s;r++){let n=e.#r[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#c?.type==="!")return!0;if(!this.#c?.isEnd())return!1;if(!this.type)return this.#c?.isEnd();let e=this.#c?this.#c.#r.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#r)r.copyIn(n);return r}static#l(e,r,n,i){let o=!1,s=!1,a=-1,c=!1;if(r.type===null){let f=n,m="";for(;f<e.length;){let h=e.charAt(f++);if(o||h==="\\"){o=!o,m+=h;continue}if(s){f===a+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(f===a+2&&c)&&(s=!1),m+=h;continue}else if(h==="["){s=!0,a=f,c=!1,m+=h;continue}if(!i.noext&&aSe(h)&&e.charAt(f)==="("){r.push(m),m="";let g=new t(h,r);f=t.#l(e,g,f,i),r.push(g);continue}m+=h}return r.push(m),f}let u=n+1,l=new t(null,r),d=[],p="";for(;u<e.length;){let f=e.charAt(u++);if(o||f==="\\"){o=!o,p+=f;continue}if(s){u===a+1?(f==="^"||f==="!")&&(c=!0):f==="]"&&!(u===a+2&&c)&&(s=!1),p+=f;continue}else if(f==="["){s=!0,a=u,c=!1,p+=f;continue}if(aSe(f)&&e.charAt(u)==="("){l.push(p),p="";let m=new t(f,l);l.push(m),u=t.#l(e,m,u,i);continue}if(f==="|"){l.push(p),p="",d.push(l),l=new t(null,r);continue}if(f===")")return p===""&&r.#r.length===0&&(r.#d=!0),l.push(p),p="",r.push(...d,l),u;p+=f}return r.type=null,r.#i=void 0,r.#r=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#l(e,n,0,r),n}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#i||this.#n.nocase&&!this.#n.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#n.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#n.dot;if(this.#t===this&&this.#h(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#r.map(f=>{let[m,h,g,v]=typeof f=="string"?t.#v(f,this.#i,c):f.toRegExpSource(e);return this.#i=this.#i||g,this.#p=this.#p||v,m}).join(""),l="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&gKe.has(this.#r[0]))){let m=hKe,h=r&&m.has(u.charAt(0))||u.startsWith("\\.")&&m.has(u.charAt(2))||u.startsWith("\\.\\.")&&m.has(u.charAt(4)),g=!r&&!e&&m.has(u.charAt(0));l=h?mKe:g?zO:""}let d="";return this.isEnd()&&this.#t.#a&&this.#c?.type==="!"&&(d="(?:$|\\/)"),[l+u+d,xg(u),this.#i=!!this.#i,this.#p]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#u(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#r=[c],this.type=null,this.#i=void 0,[c,xg(this.toString()),!1,!1]}let s=!n||e||r||!zO?"":this.#u(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#d)a=(this.isStart()&&!r?zO:"")+uSe;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?zO:"")+cSe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+c}return[a,xg(o),this.#i=!!this.#i,this.#p]}#u(e){return this.#r.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#p=this.#p||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#v(e,r,n=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,o+=(vKe.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,l,d,p]=sSe(e,a);if(d){o+=u,s=s||l,a+=d-1,r=r||p;continue}}if(c==="*"){n&&e==="*"?o+=uSe:o+=cSe,r=!0;continue}if(c==="?"){o+=GY,r=!0;continue}o+=yKe(c)}return[o,xg(e),!!r,s]}};var VY=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var Qo=(t,e,r={})=>(Mw(e),!r.nocomment&&e.charAt(0)==="#"?!1:new pE(e,r).match(t)),bKe=/^\*+([^+@!?\*\[\(]*)$/,_Ke=t=>e=>!e.startsWith(".")&&e.endsWith(t),xKe=t=>e=>e.endsWith(t),EKe=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),SKe=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),TKe=/^\*+\.\*+$/,CKe=t=>!t.startsWith(".")&&t.includes("."),IKe=t=>t!=="."&&t!==".."&&t.includes("."),wKe=/^\.\*+$/,RKe=t=>t!=="."&&t!==".."&&t.startsWith("."),AKe=/^\*+$/,PKe=t=>t.length!==0&&!t.startsWith("."),kKe=t=>t.length!==0&&t!=="."&&t!=="..",DKe=/^\?+([^+@!?\*\[\(]*)?$/,NKe=([t,e=""])=>{let r=fSe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},LKe=([t,e=""])=>{let r=mSe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},OKe=([t,e=""])=>{let r=mSe([t]);return e?n=>r(n)&&n.endsWith(e):r},MKe=([t,e=""])=>{let r=fSe([t]);return e?n=>r(n)&&n.endsWith(e):r},fSe=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},mSe=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},hSe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",lSe={win32:{sep:"\\"},posix:{sep:"/"}},FKe=hSe==="win32"?lSe.win32.sep:lSe.posix.sep;Qo.sep=FKe;var Xc=Symbol("globstar **");Qo.GLOBSTAR=Xc;var UKe="[^/]",BKe=UKe+"*?",qKe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",HKe="(?:(?!(?:\\/|^)\\.).)*?",jKe=(t,e={})=>r=>Qo(r,t,e);Qo.filter=jKe;var Qc=(t,e={})=>Object.assign({},t,e),GKe=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Qo;let e=Qo;return Object.assign((n,i,o={})=>e(n,i,Qc(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Qc(t,o))}static defaults(i){return e.defaults(Qc(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Qc(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Qc(t,o))}},unescape:(n,i={})=>e.unescape(n,Qc(t,i)),escape:(n,i={})=>e.escape(n,Qc(t,i)),filter:(n,i={})=>e.filter(n,Qc(t,i)),defaults:n=>e.defaults(Qc(t,n)),makeRe:(n,i={})=>e.makeRe(n,Qc(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Qc(t,i)),match:(n,i,o={})=>e.match(n,i,Qc(t,o)),sep:e.sep,GLOBSTAR:Xc})};Qo.defaults=GKe;var gSe=(t,e={})=>(Mw(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,pSe.default)(t));Qo.braceExpand=gSe;var VKe=(t,e={})=>new pE(t,e).makeRe();Qo.makeRe=VKe;var zKe=(t,e,r={})=>{let n=new pE(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};Qo.match=zKe;var dSe=/[?*]|[+@!]\(.*?\)|\[|\]/,$Ke=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),pE=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){Mw(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||hSe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!dSe.test(o[2]))&&!dSe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(l=>this.parse(l))];if(u)return[o[0],...o.slice(1).map(l=>this.parse(l))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let a=n[i+1],c=n[i+2],u=n[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let l=n.slice(0);l[i]="**",e.push(l),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let a=n[s];s===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let c=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...c),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(a==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),g=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),v=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!v&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),y=g?3:h?0:void 0,E=b?3:v?0:void 0;if(typeof y=="number"&&typeof E=="number"){let[x,R]=[e[y],r[E]];x.toLowerCase()===R.toLowerCase()&&(r[E]=x,E>y?r=r.slice(E):y>E&&(e=e.slice(y)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,a=0,c=e.length,u=r.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var l=r[a],d=e[s];if(this.debug(r,l,d),l===!1)return!1;if(l===Xc){this.debug("GLOBSTAR",[r,l,d]);var p=s,f=a+1;if(f===u){for(this.debug("** at the end");s<c;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;p<c;){var m=e[p];if(this.debug(`
globstar while`,e,p,r,f,m),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,c,m),!0;if(m==="."||m===".."||!i.dot&&m.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===c))}let h;if(typeof l=="string"?(h=d===l,this.debug("string match",l,d,h)):(h=l.test(d),this.debug("pattern match",l,d,h)),!h)return!1}if(s===c&&a===u)return!0;if(s===c)return n;if(a===u)return s===c-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return gSe(this.pattern,this.options)}parse(e){Mw(e);let r=this.options;if(e==="**")return Xc;if(e==="")return"";let n,i=null;(n=e.match(AKe))?i=r.dot?kKe:PKe:(n=e.match(bKe))?i=(r.nocase?r.dot?SKe:EKe:r.dot?xKe:_Ke)(n[1]):(n=e.match(DKe))?i=(r.nocase?r.dot?LKe:NKe:r.dot?OKe:MKe)(n):(n=e.match(TKe))?i=r.dot?IKe:CKe:(n=e.match(wKe))&&(i=RKe);let o=dE.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?BKe:r.dot?qKe:HKe,i=new Set(r.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(l=>{if(l instanceof RegExp)for(let d of l.flags.split(""))i.add(d);return typeof l=="string"?$Ke(l):l===Xc?Xc:l._src});return u.forEach((l,d)=>{let p=u[d+1],f=u[d-1];l!==Xc||f===Xc||(f===void 0?p!==void 0&&p!==Xc?u[d+1]="(?:\\/|"+n+"\\/)?"+p:u[d]=n:p===void 0?u[d-1]=f+"(?:\\/|"+n+")?":p!==Xc&&(u[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+p,u[d+1]=Xc))}),u.filter(l=>l!==Xc).join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let c=o[a],u=i;if(n.matchBase&&c.length===1&&(u=[s]),this.matchOne(u,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Qo.defaults(e).Minimatch}};Qo.AST=dE;Qo.Minimatch=pE;Qo.escape=VY;Qo.unescape=xg;var $O=class t{constructor(e){this.accessor=e;this._contentExclusionCache=new Map;this._contentExclusionFetchPromise=void 0;this._repositoryDiscoveryComplete=!1;this._disposables=[];let r=new pR;this._disposables.push(r),r.cancelAndSet(async()=>{await this.makeContentExclusionRequest()},30*60*1e3),this.accessor.get(ui).repositories.map(n=>this.shouldFetchContentExclusionRules(n)),this.makeContentExclusionRequest(),this._disposables.push(this.accessor.get(ui).onDidOpenRepository(async n=>{this.shouldFetchContentExclusionRules(n)&&await this.makeContentExclusionRequest()})),this._disposables.push(this.accessor.get(ui).onDidCloseRepository(async n=>{let i=this.getRepositoryInfo(n);if(i)for(let o of i.fetchUrls)this._contentExclusionCache.delete(o)})),this.accessor.get(zf).extensionAvaiable||(this._repositoryDiscoveryComplete=!0),this.accessor.get(ui).isInitialized?this._repositoryDiscoveryComplete=!0:this._disposables.push(this.accessor.get(ui).onDidFinishInitialization(()=>{this._repositoryDiscoveryComplete=!0}))}static{this.CONTENT_EXCLUSION_ENDPOINT="https://api.github.com/copilot_internal/content_exclusion"}async isIgnored(e){await this._contentExclusionFetchPromise,this.shouldFetchContentExclusionRules(e)&&await this.makeContentExclusionRequest();for(let{patterns:r}of this._contentExclusionCache.values())for(let n of r)if(Qo(e.path,n,{nocase:!0,matchBase:!0,nonegate:!0}))return this.accessor.get(pe).defaultLogger.debug(`File ${e.path} is ignored by content exclusion rule ${n}`),!0;return this._repositoryDiscoveryComplete?!1:(this.accessor.get(pe).defaultLogger.debug(`File ${e.path} is automatically ignored by content exclusion rules as repository discovery is not complete`),!0)}async asMinimatchPatterns(){return await this._contentExclusionFetchPromise,Array.from(this._contentExclusionCache.values()).flatMap(({patterns:r})=>r)}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[],this._contentExclusionCache.clear()}shouldFetchContentExclusionRules(e){let r=this.getRepositoryInfo(e);if(!r)return!1;let n=!1;for(let i of r?.fetchUrls??[])this._contentExclusionCache.has(i)||(n=!0,this._contentExclusionCache.set(i,{patterns:[],repoRoot:r.repoRoot}));return n}async makeContentExclusionRequest(){return this._contentExclusionFetchPromise=this._contentExclusionRequest(),this._contentExclusionFetchPromise}async _contentExclusionRequest(){let e=this.accessor.get(Zr),r=await this.accessor.get(kt).getAnyGitHubToken(),n=Array.from(this._contentExclusionCache.keys());for(let i=0;i<n.length;i+=10){let o=n.slice(i,i+10),s=o.join(","),a=new URL(t.CONTENT_EXCLUSION_ENDPOINT);a.searchParams.set("repos",s);let c=await e.fetch(a.toString(),{headers:{Authorization:`token ${r}`}});if(!c.ok)continue;let u=await c.json();for(let l=0;l<u.length;l++){let d=u[l].rules.map(m=>m.paths).flat(),p=o[l],f=this._contentExclusionCache.get(p)?.repoRoot;f&&this._contentExclusionCache.set(p,{patterns:WKe(d,f),repoRoot:f})}this._contentExclusionFetchPromise=void 0}}getRepositoryInfo(e){let r=gt.isUri(e)?this.accessor.get(ui).getRepository(e):e;if(!r||!r.remoteFetchUrls)return;let n=xr(r.remoteFetchUrls).map(i=>qee(i));return{repoRoot:r.rootUri,fetchUrls:n}}};function WKe(t,e){return t.map(r=>r.startsWith("/")?`${e.path}${r}`:r)}var WO=".copilotignore";var YO=class{constructor(e,r,n){this.accessor=e;this.searchService=r;this.fs=n;this._copilotIgnoreFiles=new VO;this._copilotIgnoreEnabled=!1;this._onDidChangeCopilotIgnoreEnablement=new Kn;this._disposables=[];this.onDidChangeCopilotIgnoreEnablement=this._onDidChangeCopilotIgnoreEnablement.event;this._filesIgnoredThisSession={"Remote Content Exclusions":new Set,"Copilot Ignore File":new Set},this._disposables.push(this._onDidChangeCopilotIgnoreEnablement),this._disposables.push(e.get(rs).onCopilotToken(async i=>{if(!e.get(ft).isPreRelease())return;let o=i.envelope.copilotignore_enabled??!1;this._copilotIgnoreEnabled!==o&&this._onDidChangeCopilotIgnoreEnablement.fire(o),this._copilotIgnoreEnabled=o,this._copilotIgnoreEnabled===!1&&this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._copilotIgnoreEnabled===!0&&!this._remoteContentExclusions&&(this._remoteContentExclusions=new $O(e))}))}dispose(){this._disposables.forEach(e=>e.dispose()),this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._disposables=[]}async isCopilotIgnored(e){let r=!1;if(this._copilotIgnoreEnabled){let n=this._copilotIgnoreFiles.isIgnored(e);r=n||await(this._remoteContentExclusions?.isIgnored(e)??!1),r&&(n?this._filesIgnoredThisSession["Copilot Ignore File"].add(e.toString()):this._filesIgnoredThisSession["Remote Content Exclusions"].add(e.toString()))}return r}async asMinimatchPattern(){let e=[];e.push(await this._remoteContentExclusions?.asMinimatchPatterns()??[]),e.push(this._copilotIgnoreFiles.asMinimatchPatterns());let r=e.flat();if(r.length!==0)return r.length===1?r[0]:`{${r.join(",")}}`}init(){return this._init??=(async()=>{for(let e of this.accessor.get(it).getWorkspaceFolders())await this.addWorkspace(e)})(),this._init}async sessionInfo(){let e=`# Content Exclusion Session Info

`;for(let n in this._filesIgnoredThisSession){let i=this._filesIgnoredThisSession[n];i.size>0&&(e+=`## Files ignored this session from ${n}:

${Array.from(i).join(`
`)}`,e+=`

`)}let r=await this.asMinimatchPattern();return r&&(e+=`## Exclude glob used during search:
`+r),e}trackIgnoreFile(e,r,n){r.path.endsWith(WO)&&this._copilotIgnoreFiles.setIgnoreFile(e,r,n)}removeIgnoreFile(e){e.path.endsWith(WO)&&this._copilotIgnoreFiles.removeIgnoreFile(e)}removeWorkspace(e){this._copilotIgnoreFiles.removeWorkspace(e)}isIgnoreFile(e){return!!e.path.endsWith(WO)}async addWorkspace(e){if(e.scheme!=="file")return;let r=await this.searchService.findFilesWithDefaultExcludes(new P1(e,`${WO}`),void 0,Gr.None);for(let n of r){let i=(await this.fs.readFile(n)).toString();this.trackIgnoreFile(e,n,i)}}};var KO=class{constructor(e){this.contentProvider=e}async provideTextDocumentContent(e,r){return this.contentProvider()}};var vSe="copilot-ignore",Uw=class extends YO{constructor(e,r,n){super(e,r,n),this.installListeners(),this._disposables.push(_o.workspace.registerTextDocumentContentProvider(vSe,new KO(this.sessionInfo.bind(this))))}installListeners(){this._disposables.push(_o.workspace.onDidChangeWorkspaceFolders(e=>{for(let r of e.removed)this.removeWorkspace(r.uri);for(let r of e.added)this.addWorkspace(r.uri)})),this._disposables.push(_o.workspace.onDidSaveTextDocument(async e=>{if(this.isIgnoreFile(e.uri)){let r=(await _o.workspace.fs.readFile(e.uri)).toString(),n=_o.workspace.getWorkspaceFolder(e.uri);this.trackIgnoreFile(n?.uri,e.uri,r)}}),_o.workspace.onDidDeleteFiles(e=>{for(let r of e.files)this.removeIgnoreFile(r)}),_o.workspace.onDidRenameFiles(async e=>{for(let r of e.files)if(this.isIgnoreFile(r.newUri)){let n=(await _o.workspace.fs.readFile(r.newUri)).toString();this.removeIgnoreFile(r.oldUri);let i=_o.workspace.getWorkspaceFolder(r.newUri);this.trackIgnoreFile(i?.uri,r.newUri,n)}})),this._disposables.push(this.onDidChangeCopilotIgnoreEnablement(e=>{_o.commands.executeCommand("setContext","github.copilot.copilotIgnoreEnabled",e)}))}async dispalyContentExclusionSessionInfo(){let e=gt.from({scheme:vSe,authority:On(),path:"/Content Exclusion Session Info"}),r=await _o.workspace.openTextDocument(e);await _o.languages.setTextDocumentLanguage(r,"markdown"),await _o.window.showTextDocument(r)}};function ySe(t){let e=t.get(st);return e instanceof Uw?_o.commands.registerCommand("github.copilot.debug.contentExclusions",e.dispalyContentExclusionSessionInfo.bind(e)):{dispose:()=>{}}}function bSe(t){return gt.isUri(t)}var mf=fe(fr());var fE=re("IDiffService");var QO=class extends Jr{constructor(r,n,i){super();this._initialText=r;this._document=n;this._serviceAccessor=i;this._additionalEdits=Hi.empty;this._documentText=this._document.getText();let o=i.get(it);this._register(o.onDidChangeTextDocument(s=>{if(s.document.uri.toString()!==this._document.uri.toString())return;let a=Hi.from(s.contentChanges);this._additionalEdits=this._additionalEdits.compose(a)}))}async compute(){let r=this._serviceAccessor.get(fE),n=await Hi.fromDiff(this._initialText,this._documentText,r);return{getEditsSinceInitial:()=>{if(this._store.isDisposed)throw new Ro("EditComputer has been disposed");return n.compose(this._additionalEdits)}}}};var vy=class t{constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,s=r.column|0;return o-s}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var XO=class{constructor(e,r){this.initialText=e;this._accessor=r;this._document=new zY(e)}addEdits(e){let r=YKe(e,this._document);this._document.apply(r)}getText(){return this._document.getValue()}async getEdits(){let e=this.getText(),r=this._accessor.get(fE);return await Hi.fromDiff(this.initialText,e,r)}};function YKe(t,e){return new Hi(t.map(r=>{let n=e.positionToOffset(r.range.start),i=e.positionToOffset(r.range.end);return new yi(new kr(n,i),r.newText)}))}var zY=class{constructor(e=""){this._converter=void 0;this._value="";this._value=e}getValue(){return this._value}apply(e){this._value=e.apply(this._value),this._converter=void 0}positionToOffset(e){return this._converter||(this._converter=new hy(this._value)),this._converter.positionToOffset(new vy(e.line+1,e.character+1))}};var _Se=fe(fr());var Eg=class t{constructor(){this.id=t.ID;this.description=_Se.t("Make changes to existing code");this.intentDetectionInput={sampleQuestion:"Change this method to use async/await",modelDescription:"Make changes to existing code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="edit"}async invoke(e,r){let n=await e.get(Ye).getUserRequestEndpoint(this.locations[0],this.id);return hg.createIntentInvocation(this,e,r,2,n)}};var xSe=fe(fr());var Sg=class t{constructor(){this.id=t.ID;this.description=xSe.t("Generate new code");this.intentDetectionInput={sampleQuestion:"Add a function that returns the sum of two numbers",modelDescription:"Generate new code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="generate"}async invoke(e,r){let n=await e.get(Ye).getUserRequestEndpoint(this.locations[0],this.id);return hg.createIntentInvocation(this,e,r,4,n)}};var JO=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Hi.empty;this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r}handleEdits(e){let r=e.apply(this._text),n=this._combinedEditsSinceStart.compose(e);n=n.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=n,this._text=r}computeTrackedEditsSurvivalScore(){let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewTextRanges(),s=KKe(o,this._combinedEditsSinceStart);for(let a=0;a<o.length;a++){let c=this._originalEdits.edits[a],u=this.originalText.substring(c.replaceRange.start,c.replaceRange.endExclusive),l=c.newText,d=s[a],p=this._text.substring(d.start,d.endExclusive),f=Bw(p,l),m=Bw(l,u),h=Bw(p,u);if(m!==1){let b=1-Math.max(h-m,0)/(1-m);n+=c.replaceRange.length*b,i+=c.replaceRange.length}let g=c.newText.length*f,v=c.newText.length;e+=g,r+=v}return{fourGram:r===0?1:e/r,noRevert:i===0?1:n/i}}};function Bw(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let a=0;a<=t.length-4;a++){let c=t.substring(a,a+4),u=n.get(c)||0;n.set(c,u+1)}for(let a=0;a<=e.length-4;a++){let c=e.substring(a,a+4),u=n.get(c)||0;n.set(c,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let a of n.values())o+=Math.abs(a);return(i-o)/i}function KKe(t,e){t=t.slice();let r=[],n=0;for(let i of e.edits){for(;;){let s=t[0];if(!s||s.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(s.delta(n))}let o=[];for(;;){let s=t[0];if(!s||!s.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(s)}for(let s=o.length-1;s>=0;s--){let a=o[s],c=a.intersect(i.replaceRange).length;a=a.deltaEnd(-c+(s===0?i.newText.length:0));let u=a.start-i.replaceRange.start;u>0&&(a=a.delta(-u)),s!==0&&(a=a.delta(i.newText.length)),a=a.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(a)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}var ZO=class{constructor(e,r,n,i,o,s,a){this._accessor=e;this._document=r;this._originalDocumentText=n;this._edits=i;this._sharedProps=s;this._sharedMeasures=a;this._editSurvivalTracker=new JO(this._originalDocumentText,this._edits);this._store=new Vt;let c=this._accessor.get(it);this._store.add(c.onDidChangeTextDocument(u=>{if(u.document!==this._document)return;let l=Hi.from(u.contentChanges);this._editSurvivalTracker.handleEdits(l)})),this._editSurvivalTracker.handleEdits(o),this._initialBranchName=this._getCurrentBranchName(),this._reportAfter(30*1e3),this._reportAfter(120*1e3),this._reportAfter(300*1e3),this._reportAfter(600*1e3,()=>{this._store.dispose()})}_getCurrentBranchName(){return this._accessor.get(ui).getRepository(this._document.uri)?.headBranchName}_reportAfter(e,r){let n=new dR(()=>{this._report(e),n.dispose(),r&&r()},e);this._store.add(n)}_report(e){let r=this._editSurvivalTracker.computeTrackedEditsSurvivalScore(),n=this._accessor.get(Ne),o=this._getCurrentBranchName()!==this._initialBranchName;n.sendMSFTTelemetryEvent("inline.trackEditSurvival",this._sharedProps,{...this._sharedMeasures,survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:e,didBranchChange:o?1:0})}};var e5={top_p:1,temperature:.1};var r5=re("ICommandService"),t5=class{constructor(e){this.accessor=e;this.commandPrefix="/";this.readConfig()}readConfig(){this._enabledCommands=this.accessor.get(Re).getConfigMixedWithDefaults(ke.ConversationSlashCommandEnablements)}isCommandEnabled(e,r){if(this._enabledCommands===void 0)return!1;if(this._enabledCommands[e]===void 0){if(this._enabledCommands["*"])return!0;let n=vi.getCommand(e,r)?.intent?.commandInfo?.defaultEnablement;return typeof n=="boolean"?n:!0}return!!this._enabledCommands[e]}parse(e,r){if(e=e.trimStart(),e.startsWith(this.commandPrefix)){let n=/\/(?<intentId>\w+)(?::(?<intentArgument>\w*))?(?<restOfQuery>\s.*)?/s.exec(e)?.groups,i=n?.intentId??"",o=n?.intentArgument??"",s=(n?.restOfQuery??"").trim(),a=vi.getCommand(i,r);if(this.readConfig(),a&&this.isCommandEnabled(i,r))return{command:a,intentArgument:o,restOfQuery:s}}return{restOfQuery:e}}getCommand(e,r){return this.allCommands(r).find(n=>n.commandId===e)}allCommands(e){return this.readConfig(),vi.getCommands(e).filter(r=>this.isCommandEnabled(r.commandId,e))}};async function ESe(t,e,r,n,i,o,s){let a=t.get(r5),c,u,l="",d=a.parse(e,1);if(d.command)u=d.command.intent,l=d.restOfQuery,c=d.intentArgument;else{let m=t.get(Re),h=new nE(t,1),g=r===void 0?!1:!r,v=h.detectIntent(n,e,s,o,i?.preferredIntent,g);(r===void 0||r)&&(m.isDefaultSettingOverwritten(ke.ConversationIntentDetection)?m.getConfig(ke.ConversationIntentDetection):!0)&&(u=await v),l=e}let p;u&&i&&(p=i.slashCommands.find(m=>m.command===u.id)),u??=rc.Instance;let f=await u.invoke(t,{location:1,documentContext:n,intentArgument:c},p);return{queryWithoutCommand:l,intentInvocation:f,slashCommand:p}}async function SSe(t,e,r,n){let i=new ju;if(e&&e.length>0){let s=`The current code is a result of a previous interaction with you. Here are my previous messages: 
- ${e.join(`
- `)}`,a=new bd({message:s,type:"user"});i.addTurn(a)}let o=new bd({message:t.queryWithoutCommand,type:"user"});return o.intentInvocation=t.intentInvocation,i.addTurn(o),await t.intentInvocation.promptCrafter.buildPrompt(i,t.intentInvocation.endpoint,[],{report(){}},r,n)}var $Y=class{constructor(e,r,n,i,o,s,a,c){this.placeholder=e;this.slashCommands=r;this.wholeRange=n;this.document=i;this.formattingOptions=o;this.message=s;this.input=a;this.preferredIntent=c;this._requests=[];this.aiEditCollector=void 0;this.store=void 0;this.sessionId=On(),this.conversation=void 0}addRequest(e){this._requests.push(e)}getRequests(){return this._requests}},n5=class t{constructor(e,r){this.accessor=e;this.rejectionMessage=r;this.logger=e.get(pe).getPromptResponseLogger("interactiveEditor"),this.tabAndEditorsService=e.get(It),this.languageDiagnosticService=e.get(Po),this._telemetryService=e.get(Ne),this.logger.info(`CopilotInteractiveEditorSessionProvider created, with rejection message: ${this.rejectionMessage}`)}async prepareInteractiveEditorSession(e){if(await this.accessor.get(st).isCopilotIgnored(e.document.uri))throw new Error(mf.t("Inline chat is disabled for this file due to content exclusion policies."));let n;if(this.tabAndEditorsService.activeTextEditor?.document.uri.toString()===e.document.uri.toString()){let f=this.tabAndEditorsService.activeTextEditor.options;n={insertSpaces:f.insertSpaces,tabSize:f.tabSize}}let i,o=this.languageDiagnosticService.getDiagnostics(e.document.uri).find(f=>f.range.contains(e.selection));o&&(o.severity===zS.Warning||o.severity===zS.Error)&&(i=`/fix ${o.message}`);let s={document:e.document,fileIndentInfo:n,language:zc(e.document),selection:e.selection,wholeRange:e.selection},a=[];for(let f of vi.getCommands(1))if(f.intent?.asSlashCommand){let m=await f.intent.asSlashCommand(this.accessor,s);m&&a.push(m)}else a.push({command:f.commandId,detail:f.details,executeImmediately:f.executeImmediately});let c=[mf.t({message:"{0} Copilot generated code may be incorrect",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})],u=mf.t({message:"{0} You can also type / for commands",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]}),l,d;e.selection.isEmpty&&e.document.lineAt(e.selection.start.line).text.trim()===""?(c.push(u,mf.t({message:"{0} You can also select code to make an edit",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})),d=mf.t("Ask Copilot to generate code..."),l=Sg.ID):!e.selection.isEmpty&&e.selection.start.line!==e.selection.end.line?(c.push(u),d=mf.t("Ask Copilot to edit code..."),l=Eg.ID):d=mf.t("Ask Copilot or type / for commands");let p=c[Math.floor(Math.random()*c.length)];return new $Y(d,a,e.selection,e.document,n,p,i,l)}async provideInteractiveEditorResponse(e,r,n,i){this.logger.info(`CopilotInteractiveEditorSessionProvider query: ${r.prompt}`),n.report({message:mf.t("Fetching response..."),edits:[]}),r.attempt===0&&e.addRequest(r.prompt);let o=this.accessor.get(Re).getConfig(ke.InlineChatStreaming),s=r.live;if(o==="off")s=!1;else if(o==="instant"){let l=n;n={report:d=>{l.report({...d,editsShouldBeInstant:!0})}}}let a=e.aiEditCollector=new XO(e.document.getText(),this.accessor),c=n;n={report(l){l.edits&&a.addEdits(l.edits),c.report(l)}};let u=await this.fetchResponse(e,r,n,s,i);if(u)return"edits"in u?.parsedReply&&a.addEdits(u.parsedReply.edits),QKe(e,u,s)}async provideFollowups(e,r,n){if(!X1(e.document.uri)||!e.conversation||!e.wholeRange?.isEmpty)return;let i=0,o=hEe(this.accessor.get(it),e.document);if(o>=0)i=o+1;else if(this.tabAndEditorsService.activeNotebookEditor?.selection.end!==void 0)i=this.tabAndEditorsService.activeNotebookEditor.selection.end;else return;let s=this.accessor.get(ns);return(await new rE(this.accessor,s).followUp(e.conversation,1,n)).map(u=>({commandId:"notebook.cell.chat.start",title:`$(sparkle) ${u}`,args:[{index:i,input:u,autoSend:!0}]}))}handleInteractiveEditorResponseFeedback(e,r,n){if(this.logger.debug("CopilotInteractiveEditorSessionProvider feedback received"),n===ra.Bug&&e.conversation){this.accessor.get(cE)?.reportInline(e.conversation,r.promptQuery,r.reply);return}let i={messageId:r.messageId},o,{selection:s,wholeRange:a,intent:c,query:u}=r.promptQuery,l=e.conversation?.getLatestTurn()?.requestId??"",d=e.sessionId,p=c?.id,f=e.document.languageId,m=r.reply.type,h=m==="inlineEdit"?r.reply.edits:null,g=p==="fix"?TSe(s,this.languageDiagnosticService.getDiagnostics(e.document.uri)):void 0,v=Cr(e.document.uri)?1:0,b={languageId:f,replyType:m,conversationId:d,requestId:l,command:p},y={selectionLineCount:s?Math.abs(s.end.line-s.start.line):-1,wholeRangeLineCount:a?Math.abs(a.end.line-a.start.line):-1,editCount:h?.length??-1,editLineCount:h?.reduce((x,R)=>x+R.newText.split(`
`).length,0)??-1,isNotebook:v,problemsCount:g?.fileDiagnosticsTelemetry.problemsCount??0,selectionProblemsCount:g?.selectionDiagnosticsTelemetry.problemsCount??0,diagnosticsCount:g?.fileDiagnosticsTelemetry.diagnosticsCount??0,selectionDiagnosticsCount:g?.selectionDiagnosticsTelemetry.diagnosticsCount??0},E=(x,R)=>{this._telemetryService.sendInternalMSFTTelemetryEvent(x,{language:f,intent:p,query:u,conversationId:d,requestId:l,replyType:m,problems:g?.fileDiagnosticsTelemetry.problems??"",selectionProblems:g?.selectionDiagnosticsTelemetry.problems??"",diagnosticCodes:g?.fileDiagnosticsTelemetry.diagnosticCodes??"",selectionDiagnosticCodes:g?.selectionDiagnosticsTelemetry.diagnosticCodes??""},{isNotebook:v,...R})};if(n===ra.Accepted&&e.aiEditCollector){let x=e.aiEditCollector,R=new QO(e.aiEditCollector.getText(),e.document,this.accessor);(async()=>{try{let[L,O]=await Promise.all([x.getEdits(),R.compute()]),z=O.getEditsSinceInitial();new ZO(this.accessor,e.document,x.initialText,L,z,b,y)}finally{R.dispose()}})()}if(e.aiEditCollector=void 0,n===ra.Helpful||n===ra.Unhelpful){let x=n===ra.Helpful?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.action.vote",b,{...y,vote:x}),E("interactiveSessionVote",{vote:x})}else if(n===ra.Undone||n===ra.Accepted){let x=n===ra.Accepted?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.done",b,{...y,accepted:x}),E("interactiveSessionDone",{accepted:x})}switch(n){case ra.Helpful:i.rating="positive",o="inlineConversation.messageRating";break;case ra.Unhelpful:i.rating="negative",o="inlineConversation.messageRating";break;case ra.Undone:i.action="undo",o="inlineConversation.undo";break;case ra.Accepted:i.action="accept",o="inlineConversation.accept";break;case ra.Bug:o="";break}o&&sE(this.accessor,e.document,i,{},o)}async fetchResponse(e,r,n,i,o){let s=oE(),a=Date.now(),c;e.getRequests().length>1&&r.attempt===0&&e.store&&e.document.getText()===e.store.lastDocumentContent&&(c=e.store.lastWholeRange,this.logger.debug("Ignoring passed in whole range and using the whole range from the previous turn"));let u={document:e.document,fileIndentInfo:e.formattingOptions,language:zc(e.document),selection:r.selection,wholeRange:c??r.wholeRange};(e.getRequests().length>1||r.attempt>0)&&(e.preferredIntent=void 0);let l=await ESe(this.accessor,r.prompt,r.withIntentDetection,u,e,s,o),d=l.intentInvocation;n.report({slashCommand:l.slashCommand});let p={query:l.queryWithoutCommand,...u,intent:d.intent},{messages:f}=await SSe(l,e.getRequests().slice(0,-1),s,o);if(o.isCancellationRequested)return;let m=e.conversation,h=m===void 0;m||(m=e.conversation=new ju);let g=f.map(V=>V.content).join(`
`),v=new bd({message:g,type:"user"});v.chatMessages=f,m.addTurn(v),s=kO(m,e.sessionId,"conversationInline",r.prompt,XKe(this.accessor,f),d.intent.id,s);let b=s.properties.messageId;v.requestId=b,this.logger.logPrompt(f);let y,E,x=d.createReplyInterpreter(n,i);if(f.length===0)return{promptQuery:p,parsedReply:await x.finish(),messageId:s.properties.messageId};let L=Cr(e.document.uri)?1:0,O=TSe(r.selection,this.languageDiagnosticService.getDiagnostics(e.document.uri));this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionRequest",{conversationId:e.sessionId,requestId:b,chatLocation:"inline",intent:d.intent.id,language:e.document.languageId,prompt:f.map(V=>`${V.role.toUpperCase()}:
${V.content}`).join(`
---
`),model:d.endpoint.model},{isNotebook:L});let z=0,N=async V=>(z===0&&(z=Date.now()),x.update(V).shouldFinish?V.length:void 0),ce=Date.now(),J=d.endpoint;try{y=await this.accessor.get(sr).fetchOne(f,N,o,1,J,{temperature:t.pickTemperature(r),top_p:e5.top_p},{messageId:b,messageSource:"inline.user"},{intent:!0})}catch(V){throw this.logger.exception(V,"Fetching failed: "),this.accessor.get(Ne).sendGHTelemetryException(V,"Fetching failed: "),v.status="error",v.response={message:V.message,type:"server"},new Error("Failed to make request")}y&&(this.logger.logResponse(y),DO(this.accessor,"conversationInline",y.requestId,r.prompt,y.type==="offTopic",this.tabAndEditorsService.activeTextEditor?.document,s));let D=this.accessor.get(we),S=V=>{this._telemetryService.sendMSFTTelemetryEvent("inline.request",{command:d.intent.id??"",contextTypes:"none",promptTypes:f.map(de=>`${de.role}${de.name?`-${de.name}`:""}:${de.content.length}`).join(","),conversationId:e.sessionId,requestId:b,languageId:this.tabAndEditorsService.activeTextEditor?.document?.languageId,responseType:y.type,replyType:V?.type,model:J.model,diagnosticsProvider:O.diagnosticsProvider,diagnosticCodes:O.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:O.selectionDiagnosticsTelemetry.diagnosticCodes},{firstTurn:h?1:0,isNotebook:L,withIntentDetection:r.withIntentDetection===void 0?void 0:r.withIntentDetection?1:0,messageTokenCount:D.tokenLength(l.queryWithoutCommand),promptTokenCount:L1(this.accessor.get(we),f),responseTokenCount:y.type==="success"?D.tokenLength(y.value):-1,implicitCommand:r.prompt.trim().startsWith(`/${d.intent.id}`)?0:1,attemptCount:r.attempt||0,selectionLineCount:r.selection?Math.abs(r.selection.end.line-r.selection.start.line)+1:-1,wholeRangeLineCount:r.wholeRange?Math.abs(r.wholeRange.end.line-r.wholeRange.start.line)+1:-1,editCount:V?.type==="inlineEdit"?V.edits.length:-1,editLineCount:V?.type==="inlineEdit"?V.edits.reduce((de,te)=>de+te.newText.split(`
`).length,0):-1,problemsCount:O.fileDiagnosticsTelemetry.problemsCount,selectionProblemsCount:O.selectionDiagnosticsTelemetry.problemsCount,diagnosticsCount:O.fileDiagnosticsTelemetry.diagnosticsCount,selectionDiagnosticsCount:O.selectionDiagnosticsTelemetry.diagnosticsCount,timeToRequest:ce-a,timeToFirstToken:z?z-a:-1,timeToComplete:Date.now()-a})},P=(V,de)=>{this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{conversationId:e.sessionId,requestId:b,chatLocation:"inline",intent:d.intent.id??"",problems:O.fileDiagnosticsTelemetry.problems,selectionProblems:O.selectionDiagnosticsTelemetry.problems,diagnosticCodes:O.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:O.selectionDiagnosticsTelemetry.diagnosticCodes,diagnosticsProvider:O.diagnosticsProvider,language:this.tabAndEditorsService.activeTextEditor?.document?.languageId,request:r.prompt,responseType:V,response:de},{isNotebook:L})};switch(y.type){case"rateLimited":{let V=`Response failed ${y.type}: ${y.reason}`;throw v.status="error",v.response={message:V,type:"server"},S(),P(y.type,V),new Error("Oops, your request failed due to a rate limit. Please try again later.")}case"badRequest":{let V=`Response failed ${y.type}: ${y.reason}`;throw v.status="error",v.response={message:V,type:"server"},S(),P(y.type,V),new Error("Failed to make request")}case"failed":{this.logger.error(`Response failed: ${y.reason}`),v.status="error";let V=y.reason;throw v.response={message:V,type:"server"},S(),P(y.type,V),new Error("Failed to make request")}case"canceled":{this.logger.debug(`Response canceled: ${y.reason}`),v.status="error";let V="Cancelled";v.response={message:V,type:"user"},S(),P(y.type,V);return}case"unknown":{let V=`Response is empty: ${y.reason}`;this.logger.info(V),v.status="error",v.response={message:V,type:"server"},S(),P(y.type,V);return}case"filtered":{let V=`Response got filtered: ${y.reason}`;throw this.logger.info(V),v.status="filtered",v.response={message:V,type:"server"},S(),P(y.type,V),new Error(eO(y.category,!1))}case"offTopic":{this.logger.info(`Response marked as offtopic: ${y.reason}`),v.status="off-topic";let V=this.rejectionMessage;v.response={message:V,type:"offtopic-detection"},S(),P(y.type,V),LO(this.accessor,m,e.sessionId,"conversationInline",r.prompt,b,e.document,s);return}case"length":{let V=`Response was too long: ${y.reason}`;this.logger.info(V),v.status="error",v.response={message:V,type:"server"},S(),P(y.type,V);return}case"success":break;default:{this.logger.error("Unexpected response type"),this.logger.info(JSON.stringify(y)),v.status="error";let V=`Unexpected response type: ${JSON.stringify(y)}`;v.response={message:V,type:"server"},S(),P("unknown",V);return}}if(E=y.value,E.length===0){this.logger.info("Response is empty."),S(),P("unknown","Empty response");return}x.update(E);let F=await x.finish();v.status="success";let M=E;return v.response={message:M,type:"model"},S(F),P("success",M),s=s.extendedBy({replyType:F.type}),NO(this.accessor,m,e.sessionId,"conversationInline",E,b,e.document,s),this.logger.info(`Parsed response: ${JSON.stringify(F,null,"	")}`),{promptQuery:p,parsedReply:F,messageId:s.properties.messageId}}static pickTemperature(e){return"attempt"in e&&typeof e.attempt=="number"?Math.min(e5.temperature*(e.attempt+1),2):e5.temperature}};function QKe(t,e,r){let{promptQuery:n,parsedReply:i,messageId:o}=e;if(i.type==="conversational")return{contents:new Xd(i.content),promptQuery:n,reply:i,messageId:o};let s=i.content!==void 0?new Xd(i.content):void 0;return i.type==="workspaceEdit"?{edits:i.workspaceEdit,promptQuery:n,reply:i,messageId:o,contents:s}:(t.store=i.store,{edits:i.edits,wholeRange:i.newWholeRange,reply:i,promptQuery:n,messageId:o,contents:i.content!==void 0?new Xd(i.content):void 0})}function XKe(t,e){let r=t.get(we),n=0;for(let i of e)n+=r.tokenLength(i.content);return n}function TSe(t,e){let r=e.filter(u=>t.intersection(u.range)),n={problems:e.map(u=>u.message).join(", "),problemsCount:e.length,diagnosticCodes:"",diagnosticsCount:0},i={problems:r.map(u=>u.message).join(", "),problemsCount:r.length,diagnosticCodes:"",diagnosticsCount:0},o=new Map,s=new Map;e.forEach(u=>{let l=u.code,d=typeof l=="string"||typeof l=="number"?l.toString():l?l.value.toString():"",p=u.source?`${u.source}@${d}`:d;o.set(p,(o.get(p)||0)+1),t.intersection(u.range)&&s.set(p,(s.get(p)||0)+1)});let a=u=>{let l="";return u.forEach((d,p)=>{l+=`${p}:${d},`}),l};n.diagnosticCodes=a(o),n.diagnosticsCount=o.size,i.diagnosticCodes=a(s),i.diagnosticsCount=s.size;let c=e.length>0?e[0].source??"":"";return{fileDiagnosticsTelemetry:n,selectionDiagnosticsTelemetry:i,diagnosticsProvider:c}}var Dn=fe(require("vscode"));var CSe=fe(require("path"));var mE=class{constructor(){this.kind="current-selection";this.variableInfo=un.variableInfo;this.metaContextResolverInfo={description:"Active selection."}}async resolveContext(e,r){let{messages:n,references:i,usedContext:o}=await $o(e,r.endpoint,un,{},e.get(we));if(n.length>0)return{kind:this.kind,userMessages:n.map(s=>s.content),usedContext:o,references:i}}static formatSelection(e){let r=e.fileName?`From the file: ${CSe.basename(e.fileName)}
`:"",{trimmedLines:n}=gw(e.selectedText.split(/\r?\n/g));return`

${r}${xn(e.languageId,xr(n).join(`
`))}

`}},cer=Tr.register(new mE);var i5=fe(fr());var hE=class extends X{async prepare(e,r,n){if(await this.accessor.get(st).isCopilotIgnored(this.props.documentContext.document.uri))return{k:"ignored"};let i=this.props.nodeToDocument??await gE(this.accessor,this.props.documentContext),o=JKe(this.props.endpointInfo,this.props.documentContext,i.range);return{k:"found",nodeToDocument:i,codeExcerptToDocument:o.range,metadata:new Bi(this.props.documentContext.wholeRange,o)}}render(e,r){if(e.k==="ignored")return vscpp("ignoredFiles",{value:[this.props.documentContext.document.uri]});let n=e.codeExcerptToDocument.generatePrompt(!1).join(`
`);return vscpp(ee,null,vscpp("meta",{value:e.metadata}),"I have the following code in the selection:",n!==""?vscpp("br",null):"",e.codeExcerptToDocument.generatePrompt(!1).join(`
`))}};async function gE(t,e){let r=t.get(Fr),n=na(e.selection,e.document),i=r.getTreeSitterAST(e.document);if(i===void 0)return{range:e.wholeRange};let o=Date.now(),s=await i.getNodeToDocument(n),a=Date.now()-o,c=na(e.wholeRange,e.document);ZKe(t,n,c,s,e.document.languageId,a);let u=cc(e.document,s.nodeToDocument);return{identifier:s.nodeIdentifier,range:u}}function JKe(t,e,r){let n=new Vs(t.modelMaxPromptTokens*4/3),i=new yo(n,e.document,e.language,"ed8c6549bwf9"),o=new yo(new Vs(0),e.document,e.language,"abpxx6d04wxr"),s=new yo(new Vs(0),e.document,e.language,"be15d9bcejpp");for(let a=r.start.line,c=r.end.line;a<=c&&!(a===c&&r.end.character===0||!i.appendLine(a));++a);return i.trim(e.selection),{language:e.language,above:o,range:i,below:s,outlineAbove:"",outlineBelow:""}}function ZKe(t,e,r,n,i,o){t.get(Ne).sendMSFTTelemetryEvent("getNodeToDocument",{languageId:i,typeOfNodeToDocument:n.nodeToDocument.type,nodeToDocumentStart:n.nodeToDocument.startIndex.toString(),nodeToDocumentEnd:n.nodeToDocument.endIndex.toString(),selectionOffsetRangeStart:e.startIndex.toString(),selectionOffsetRangeEnd:e.endIndex.toString(),wholeRangeOffsetRangeStart:r.startIndex.toString(),wholeRangeOffsetRangeEnd:r.endIndex.toString()},{timeSpentMs:o})}var eQe=6e4,tQe=1500,yy=class t{constructor(){this.id=t.ID;this.description=i5.t("Add documentation comment for this symbol");this.intentDetectionInput={sampleQuestion:"Add jsdoc to this method"};this.locations=[1];this.commandInfo={executeImmediately:!0}}static{this.ID="doc"}async asSlashCommand(e,r){if(r.document.lineCount>tQe||r.document.getText().length>eQe)return new qw("Add documentation comment for this symbol");let n=await gE(e,r),i=n.identifier?i5.t("Add documentation comment for '{0}'",n.identifier):i5.t("Add documentation comment for this symbol");return new qw(i,n)}async invoke(e,r,n){let i=r.documentContext;if(!i)throw new Error("Open a file to add documentation.");let o;n instanceof qw?o=n.nodeToDocument:e.get(pe).getLogger("InlineDocIntent#invoke").warn("Unexpected: SlashCommand given to intent invocation is not a DocSlashCommand");let s=await e.get(Ye).getUserRequestEndpoint(r.location,this.id);return new WY(e,s,i,this,o)}},qw=class{constructor(e,r=void 0){this.detail=e;this.nodeToDocument=r;this.command=yy.ID;this.executeImmediately=!0}},WY=class t{constructor(e,r,n,i,o=void 0){this.accessor=e;this.endpoint=r;this.context=n;this.intent=i;this.nodeToDocument=o;this.location=1;this.createReplyInterpreter=V1.createFactory(async e=>{if(!this.contextInfo||!this.wholeRange)throw new Error("doc intent NEEDS a selection context");let r=pf(this.contextInfo,e,this.context.language);if(!r)return{type:"conversational",content:e};let n=xb(this.context.document.languageId),i=r.code;if(n){let s=Date.now(),a=await this.accessor.get(Fr).extractDoc(n,i),c=Date.now()-s;t._sendExtractDocTelemetry(this.accessor.get(Ne),this.context.document.languageId,i.length,a,c),a&&(i=a)}let o=py(this.accessor,this.contextInfo,i,1,this.context.fileIndentInfo);return df(o,this.wholeRange)});let s=this;this.promptCrafter=new class{constructor(){}async buildPrompt(a,c,u,l,d,p){let f=s.nodeToDocument??await gE(s.accessor,s.context),m=new mt(s.accessor,s.endpoint,YY,{userQuery:a.getLatestTurn()?.request?.message??"",documentContext:s.context,nodeToDocument:f,endpointInfo:c,history:a.turns.at(-2)?.request.message},s.accessor.get(we)),h=await m.render(l,p),g=m.getMeta(Bi);return Jg(g!==void 0,"not undefined"),s.contextInfo=g.contextInfo,s.wholeRange=g.wholeRange,h}}}static _sendExtractDocTelemetry(e,r,n,i,o){e.sendMSFTTelemetryEvent("extractDoc",{languageId:r,couldExtractDoc:i===void 0?"false":"true"},{codeBlockLen:n,timeSpentMs:o})}},YY=class extends X{render(e,r){let n=zh(this.props.documentContext.language.languageId);return vscpp(vscppf,null,vscpp(Ke,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You must follow user's requirements carefully.",vscpp("br",null),"You must follow Microsoft content policies.",vscpp("br",null),"You must avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, you should give a reminder that you are an AI programming assistant.",vscpp("br",null),"Each code block starts with ``` and ",this.props.documentContext.language.lineComment.start," FILEPATH.",vscpp("br",null),"When user asks you to document something, you must answer in the form of a ",n," markdown code block.",vscpp("br",null)),vscpp(hE,{documentContext:this.props.documentContext,nodeToDocument:this.props.nodeToDocument,endpointInfo:this.props.endpointInfo}),this.props.history&&vscpp(ee,null,this.props.history),vscpp(ee,null,`${this.getQueryPrefix()} ${this.props.userQuery}`.trim()))}getQueryPrefix(){let e=this.props.nodeToDocument?.identifier,r=e!==void 0&&e!=="",n=r?e:"the selection",i;switch(this.props.documentContext.language.languageId){case"typescript":case"typescriptreact":i=r?"a TSDoc comment":"TSDoc comment";break;case"javascript":case"javascriptreact":i=r?"a JSDoc comment":"JSDoc comment";break;case"python":i="docstring";break;default:i="documentation comment"}return`Please add ${i} for ${n}.`}};var kSe=fe(fr());var Hw="_github.copilot.openRelativePath",jw="_github.copilot.openSymbolInFile";function ISe(t,e){return`[\`${t}\`](${RSe(Hw,[{scheme:e.scheme,authority:e.authority,path:e.path,query:e.query,fragment:e.fragment}])} "${ASe(e.fsPath)}")`}function QY(t,e){return`[\`${t}\`](${RSe(jw,[e.replace(/\\/g,"/"),t])} "${ASe(e)}")`}function RSe(t,e){return`command:${t}?${encodeURIComponent(JSON.stringify(e))}`}function ASe(t){return t.replace(/"/g,'\\"')}var KY=new Set;function PSe(t){return KY.add(t),{dispose:()=>KY.delete(t)}}var o5=class{constructor(e,r,n){this.references=e;this.workspaceFolders=r;this.fileSystem=n;this._isInCodeBlock=!1;this.additionalLinkifiers=Array.from(KY,i=>i(e,r,n))}async linkify(e,r){if(e.startsWith("```")&&(this._isInCodeBlock=!this._isInCodeBlock),this._isInCodeBlock)return e;if(e=await oR(e,/\[`([^`\[\]]+?)`]\((\S+?\.\w+)\)/g,async(i,o,s)=>{let a=Is.joinPath(this.workspaceFolders[0],s);return await wSe(this.fileSystem,a)?QY(o,s):"`"+o+"`"}),r?.isCancellationRequested)return"";let n=async(i,o,s)=>{if(/^\w+:/.test(s)||!this.workspaceFolders.length)return i;for(let u of this.workspaceFolders){let l=Is.joinPath(u,s);if(await wSe(this.fileSystem,l))return ISe(o,l)}let a=nR(s),c=this.references.map(u=>"variableName"in u.anchor?n9(u.anchor.value)?u.anchor.value:u.anchor.value?.uri:n9(u.anchor)?u.anchor:u.anchor.uri).filter(u=>!!u).find(u=>sc(u)===a);return c?ISe(o,c):o};if(e=await oR(e,/\[([^`\s]+)\]\((\1)\)/g,n),r?.isCancellationRequested)return"";e=await oR(e,/(?<!\[)(`([^`\s]+)`)(?!\])/g,n);for(let i of this.additionalLinkifiers)if(e=await i.linkify(e,r),r?.isCancellationRequested)return"";return e=e.replace(/\[([^\[\]]+)]\((\S+?\.\w+)\)/g,(i,o,s)=>/^\w+:/.test(s)?i:o),e}};async function wSe(t,e){try{return await t.stat(e),!0}catch{return!1}}var vE=class{constructor(e){this.accessor=e}async processResponse(e,r,n,i,o){let s=this.accessor.get(Cn),a=this.accessor.get(it),c=e.references,u=new o5(c,a.getWorkspaceFolders(),s),l="",d="",p=async f=>{let m=await u.linkify(f,o),h=new Xd(m);h.isTrusted={enabledCommands:[Hw,jw]},d+=m,i.markdown(h)};for await(let{delta:f}of n){l+=f.text;let m=l.split(`
`);for(let h=0;h<m.length-1;h++)await p(m[h]+`
`);l=m[m.length-1]}return await p(l),d}};var xi=class extends X{render(){return vscpp(vscppf,null,"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.")}};var s5=fe(fr());var yE=class t extends X{static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){let e={implementations:[],activeDocument:void 0,isIgnored:!1},{document:r,range:n}=this.props;if(!r){let a=this.accessor.get(It).activeTextEditor;if(!a)return e;r??=a.document,n??=a.selection}if(!n||n.isEmpty)return e;if(await this.accessor.get(st).isCopilotIgnored(r.uri))return{...e,isIgnored:!0};let i=this.accessor.get(Mr).extensionMode===is.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,o=[{header:"Relevant function implementations",findImpls:tEe},{header:"Relevant class declarations",findImpls:rEe},{header:"Relevant type declarations",findImpls:nEe}],s=[];for(let{header:a,findImpls:c}of o){let u=await c(this.accessor,r,n,i);s.push([a,u])}return{implementations:s,activeDocument:r,isIgnored:!1}}render(e,r){if(!e.implementations.length||!e.activeDocument)return;if(e.isIgnored)return vscpp("ignoredFiles",{value:[e.activeDocument.uri]});let n=[],i=[],o=[];for(let[s,a]of e.implementations){let{references:c,usedContext:u,text:l}=XY(e.activeDocument,a);if(l.length===0)continue;let d=vscpp(ee,{priority:this.props.priority},s,":",vscpp("br",null),vscpp("br",null),l.map(p=>vscpp(vscppf,null,vscpp(bi,{code:p,languageId:e.activeDocument?.languageId}),vscpp("br",null))));n.push(d),i.push(...c),o.push(...u)}return vscpp(vscppf,null,vscpp("usedContext",{value:o}),vscpp("references",{value:i}),...n)}};function XY(t,e){let r=[],n=new Map,i=new Set,o=[];for(let s of e){let a=s.uri??t.uri,c=s.range??cc(t,s),u=`${a.toString()}-${c.start.line}-${c.start.character}-${c.end.line}-${c.end.character}`;if(i.has(u))continue;i.add(u),r.push(new $n(new Wf(a,c))),o.push(s.text);let[l,d]=n.get(a)??[s.version??t.version,[]];d.push(c),n.set(a,[l,d])}return{references:r,usedContext:[...n.entries()].map(([s,[a,c]])=>({uri:s,version:a,ranges:c})),text:o}}var bE=class t extends X{static getSymbolAtCursor(e,r){let{selection:n,document:i}=r;if(!n||!i){let a=e.get(It).activeTextEditor;if(!a)return;({selection:n,document:i}=a)}if(!n.isEmpty)return;let o=i.getWordRangeAtPosition(n.active)??n;return{selectedText:i.getText(o),document:i,range:o}}static async getDefinitionAtRange(e,r,n,i){if(await e.get(st).isCopilotIgnored(r.uri))return;let s=e.get(Fr).getTreeSitterAST(r);if(s===void 0)return;let a=na(n,r),c;i&&(c=await s.getNodeToExplain(a)),c??=await s.getNodeToDocument(a);let{startIndex:u,endIndex:l}="nodeToDocument"in c?c.nodeToDocument:c.nodeToExplain,d=cc(r,{startIndex:u,endIndex:l});return{identifier:c.nodeIdentifier,text:r.getText(d),range:d,uri:r.uri,startIndex:u,endIndex:l}}static async getSelectedScope(e,r){let n=e.get(st);if(!r.document||await n.isCopilotIgnored(r.document.uri))return;let i=t.getSymbolAtCursor(e,r),o,s=i?await t.getDefinitionAtRange(e,i.document,i.range,!1):void 0;if(e.get(Re).getConfig(ke.ExplainScopeSelection)||i&&(s?.identifier!==i.selectedText||!i.selectedText)){let c=e.get(It).activeTextEditor;if(!c)return;let u=await e.get(Sb).selectEnclosingScope(c,{reason:s5.t("Select an enclosing range to explain"),includeBlocks:!0});if(u){let l=c.document,d=l.getText(u);if(!d)return;o={codeAtCursor:d,document:l,range:u,definitions:[],references:[]}}}return{symbolAtCursorState:o,definition:s,symbolAtCursor:i}}async prepare(e,r,n){let i=await t.getSelectedScope(this.accessor,this.props).catch(()=>{});if(!i)return;let{symbolAtCursorState:o,definition:s,symbolAtCursor:a}=i;if(a){s?.identifier===a?.selectedText?o??={codeAtCursor:s.text,document:a.document,range:s.range,definitions:[],references:[]}:o??={codeAtCursor:a.document.lineAt(a.range.start).text,document:a.document,range:a.document.lineAt(a.range.start).range,definitions:[],references:[]},r.report(new ws(s5.t("Searching for relevant definitions...")));try{for(let c of await this.accessor.get(oo).getDefinitions(a.document.uri,a.range.start)){let{uri:u,range:l}=Jd(c)?{uri:c.targetUri,range:c.targetRange}:c;if(l.isEqual(a.range))continue;let d=await this.accessor.get(it).openTextDocument(u),p=await t.getDefinitionAtRange(this.accessor,d,l,!0);p&&o.definitions.push(p)}}catch{}r.report(new ws(s5.t("Searching for relevant references...")));try{let c=new Set;for(let u of await this.accessor.get(oo).getReferences(a.document.uri,a.range.start)){let{uri:l,range:d}=Jd(u)?{uri:u.targetUri,range:u.targetRange}:u;if(d.isEqual(a.range))continue;let p=`${l.toString()}-${d.start.line}-${d.start.character}-${d.end.line}-${d.end.character}`;if(c.has(p))continue;c.add(p);let f=await this.accessor.get(it).openTextDocument(l),m=await t.getDefinitionAtRange(this.accessor,f,d,!1);m&&o.references.push(m)}}catch{}return o}}render(e,r){if(!e)return;let n=[...e.definitions,...e.references];if(e.codeAtCursor){let{startIndex:s,endIndex:a}=na(e.range,e.document);n.push({version:e.document.version,uri:e.document.uri,range:e.range,text:e.codeAtCursor,startIndex:s,endIndex:a})}let{usedContext:i,references:o}=XY(e.document,n);return vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp("references",{value:o}),vscpp(ee,null,"I have the following code in the active editor:",vscpp("br",null),vscpp(bi,{languageId:e.document.languageId,code:e.codeAtCursor}),vscpp("br",null),!!e.definitions.length&&vscpp(vscppf,null,"Here are some relevant definitions for the symbols in my code:",vscpp("br",null)),!!e.definitions.length&&vscpp(gy,{priority:this.props.priority,descending:!0},e.definitions.map(s=>vscpp(bi,{languageId:e.document.languageId,code:s.text}))),!!e.references.length&&vscpp(vscppf,null,vscpp("br",null),"Here are some places where the the symbols in my code are referenced:",vscpp("br",null)),!!e.references.length&&vscpp(gy,{priority:this.props.priority-e.definitions.length,descending:!0},e.references.map(s=>vscpp(vscppf,null,!!s.uri&&vscpp(vscppf,null,"From the file ",nR(s.uri.toString()),":",vscpp("br",null)),vscpp(bi,{languageId:e.document.languageId,code:s.text}),vscpp("br",null))))))}};var a5=class extends X{render(e,r){let n=this.props.chatVariables.find(i=>i.name===un.variableInfo.name);return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a world-class coding tutor. Your code explanations perfectly balance high-level concepts and granular details. Your approach ensures that students not only understand how to write code, but also grasp the underlying principles that guide effective programming.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Examine the provided code selection and any other context like user question, related errors, project details, class definitions, etc.",vscpp("br",null),"2. If you are unsure about the code, concepts, or the user's question, ask clarifying questions.",vscpp("br",null),"3. If the user provided a specific question or error, answer it based on the selected code and additional provided context. Otherwise focus on explaining the selected code.",vscpp("br",null),"4. Provide suggestions if you see opportunities to improve code readability, performance, etc.",vscpp("br",null),vscpp("br",null),"Focus on being clear, helpful, and thorough without assuming extensive prior knowledge.",vscpp("br",null),"Use developer-friendly terms and analogies in your explanations.",vscpp("br",null),"Identify 'gotchas' or less obvious parts of the code that might trip up someone new.",vscpp("br",null),"Provide clear and relevant examples aligned with any provided context."),this.props.history&&vscpp(vscppf,null,vscpp(zr,{priority:600,history:this.props.history})),vscpp(Ra,{priority:700}),!n&&vscpp(un,{document:this.props.document,range:this.props.selection,priority:900}),vscpp(yE,{document:this.props.document,range:this.props.selection,priority:800}),vscpp(bE,{document:this.props.document,selection:this.props.selection,priority:800}),vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var l5="Write an explanation for the active selection as paragraphs of text.",c5=class extends xs{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(It).activeTextEditor;return new mt(this.accessor,n,a5,{query:u,history:l,chatVariables:i,document:d?.document,selection:d?.selection},this.accessor.get(we))}},u5=class{constructor(){this.id="explain";this.locations=[2,1];this.description=kSe.t("Explain how the code in your active editor works");this.intentDetectionInput={sampleQuestion:"Write an explanation for the code above as paragraphs of text."}}static{this.ID="explain"}async invoke(e,r,n){let i=new vE(e),o=r.location,s=await e.get(Ye).getUserRequestEndpoint(o,this.id);if(o===1){let a=r.documentContext,c=new class extends c5{async buildPrompt(l,d,p,f,m,h){let g=l.getLatestTurn();return g?.request.message===""&&(g.request={message:l5,type:"user"}),super.buildPrompt(l,d,p,f,m,h)}}(e),u=a&&yO.createFactory();return{intent:this,location:o,endpoint:s,promptCrafter:c,createReplyInterpreter:u,responseProcessor:i}}return{intent:this,location:o,endpoint:s,promptCrafter:new c5(e),responseProcessor:i}}async asSlashCommand(e,r){return{command:this.id,detail:this.description,refer:e.get(Re).getConfig(ke.ExplainIntentRefer)}}};var rK=fe(fr());var Gw=fe(fr());var JY=class extends X{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(zr,{priority:500,history:this.props.history}),vscpp(Ke,{priority:1e3},"You are a coding assistant who help the user answer questions about code in their workspace by providing a list of relevant keywords they can search for to answer the question.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT try to answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),"2. If the question contains pronouns such as 'it' or 'that', try to understand what the pronoun refers to by looking at the rest of the question and the conversation history.",vscpp("br",null),"3. If the question contains an ambiguous word such as 'this', try to understand what is refers to by looking at the rest of the question, the user's active selection, and the conversation history.",vscpp("br",null),"4. Output a precise version of question that resolves all pronouns and ambiguous words like 'this' to the specific nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns and words like 'this'.",vscpp("br",null),"5. Then output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),"6. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),vscpp("br",null),"User: Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders"),vscpp(un,{priority:600,document:this.props.document,range:this.props.selection}),this.props.fileTree&&vscpp(ee,{priority:700},this.props.fileTree),vscpp(ji,{priority:1e3,chatVariables:this.props.chatVariables,query:this.props.query}))}};async function DSe(t,e,r,n,i,o){let s=e.turns.length>1?e.turns.slice(0,-1):[],a=t.get(It).activeTextEditor;return new mt(t,r,JY,{chatVariables:n,query:i,history:s,fileTree:o,document:a?.document,selection:a?.selection},t.get(we)).render()}var rQe=/^[\*\-]\s*(.+)/m;function _E(t,e){let r=e.trim().split(`
`),n=0,i=[];for(let s of Array.from(r).reverse()){let a=s.match(rQe);if(a){let c=a[1].split(/,/g).map(u=>u.trim());c.length&&i.unshift({keyword:c[0],variations:c.slice(1)})}else if(i.length)break;n++}return{rephrasedQuestion:r.slice(0,-n).join(`
`).trim()||t.trim(),keywords:i}}function NSe(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}async function iQe(t,e=1/0,r){let n=LSe(0,t,e),i=e-NSe(n);for(;;){let o=!1,s=[];for(let a of n)if(a.type==="text")s.push(a);else if(a.type==="dir"){s.push({type:"text",value:a.value});let c=await a.getChildren();if(r?.isCancellationRequested)return"";let u=LSe(a.level+1,c,i-1);u.length&&(o=!0,i-=NSe(u)+1,s.push(...u))}if(n=s,!o)break}return n.map(o=>o.value).join(`
`)}function LSe(t,e,r){let n="	".repeat(t),i=[],o=r;for(let s=0;s<e.length;++s){let a=e[s],c=n+a.name+(a.type===2?"/":"");if(c.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",value:u});break}a.type===2?i.push({type:"dir",level:t,value:c,getChildren:a.getChildren}):i.push({type:"text",value:c}),o-=c.length,s!==e.length-1&&(o-=1)}return i}async function ZY(t,e,r,n){let i=t.get(Cn),o=t.get(st);async function s(c){let u;try{u=await i.readDirectory(c)}catch(l){return console.error(l),[]}return n.isCancellationRequested?[]:(u.sort((l,d)=>l[0].localeCompare(d[0])),Promise.all(u.map(async l=>{let d=gt.joinPath(c,l[0]);return ay(d)&&!await o.isCopilotIgnored(d)?l:null})).then(l=>l.filter(d=>d!==null).map(d=>d[1]===2?{type:2,name:d[0],getChildren:()=>s(gt.joinPath(c,d[0]))}:{type:1,name:d[0]})))}if(await o.init(),n.isCancellationRequested)return"";let a=await s(e);return n.isCancellationRequested?"":iQe(a,r,n)}async function Vw(t,e=500,r){let n=t.get(it).getWorkspaceFolders().at(0);if(!n)return;let i=await ZY(t,n,e,r);return oQe("I am working in a workspace that has the following structure:","",xn("",i))}var d5=class extends X{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(pe).getLogger("<WorkspaceSymbols>")}async prepare(r,n,i){let o=this.accessor.get(it),s=await sy(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.getSymbols();return!a.length||i.isCancellationRequested?[]:OSe(a.map(c=>`- ${c.name} \u2014 ${Uh(o,c.location.uri)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(ee,{priority:this.props.priority},"Here are some potentially relevant symbols from the current workspace:",vscpp("br",null),r.join(`
`))}async getSymbols(){let r=this.accessor.get(st),n=await Promise.all(this.props.keywords.flatMap(o=>[o.keyword,...o.variations]).map(o=>Vd(this.accessor.get(oo).getWorkspaceSymbols(o),this.timeout))),i=await Promise.all(n.flat().map(async o=>(o?await r.isCopilotIgnored(o.location.uri):!1)?null:o));return xr(i).filter(Boolean)}};ze([so(r=>r.logger)],d5.prototype,"prepare",1);var p5=class extends X{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(pe).getLogger("<WorkspaceFiles>")}async prepare(r,n,i){let o=this.accessor.get(it),s=await sy(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.findFiles(s,i);return!a.length||i.isCancellationRequested?[]:OSe(a.map(c=>`- ${Uh(o,c)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(ee,{priority:this.props.priority},"Here are some potentially relevant file names from the workspace:",vscpp("br",null),r.join(`
`))}async findFiles(r,n){let i=this.accessor.get(uc),o=await Vd(i.findFilesWithDefaultExcludes(`{${this.props.keywords.flatMap(s=>[s.keyword,...s.variations]).map(s=>`**/*${s}*`).join(",")}}`,r,n),this.timeout);return o?o.sort((s,a)=>s.toString().localeCompare(a.toString())):[]}};ze([so(r=>r.logger)],p5.prototype,"prepare",1);var by=class extends X{constructor(r,n){super(r,n);this.logger=n.get(pe).getLogger("<WorkspaceChunks>")}async prepare(r,n,i=Gr.None){let o=this.accessor.get(rg),s=await sy(this.accessor,{valueFor4096:4,maxMultiplier:4});if(i.isCancellationRequested)return;let a={fullText:this.props.fullQuestionText,keywords:this.props.keywords.flatMap(d=>[d.keyword,...d.variations])},c=(await o.searchFileChunks(r.endpoint,[a],s,i)).slice(0,s);if(i.isCancellationRequested||!c.length)return;this.props.resultFilter&&(c=this.props.resultFilter(c));let u=new mn;for(let d of c){let p=u.get(d.file)??[];d.isFullFile?p=[d]:p.some(f=>f.isFullFile||f.range.contains(d.range))||(p=[...p.filter(f=>!d.range.contains(f.range)),d]),u.set(d.file,p)}let l=Array.from(u.values()).flatMap(d=>d.sort((p,f)=>p.range.start.compareTo(f.range.start)||p.range.end.compareTo(f.range.end)).map(p=>new $n(p.isFullFile?p.file:new Wf(p.file,p.range))));return{chunks:c,references:l}}render(r,n){if(!r)return;let i=this.accessor.get(it);return vscpp(vscppf,null,vscpp("references",{value:r.references}),r.chunks.map((o,s)=>{let a=typeof this.props.priority<"u"?this.props.priority+(1-(s+1)/r.chunks.length):void 0;return{chunk:o,priority:a}}).reverse().map(({chunk:o,priority:s})=>{let a=Uh(i,o.file);return vscpp(ee,{priority:s},"Here is a potentially relevant code excerpt from `",a,"`:",vscpp("br",null),xn(L3(o.file),o.text))}))}};ze([so(r=>r.logger)],by.prototype,"prepare",1);function OSe(t){return[...new Set(t)]}function oQe(...t){return t.join(`
`)}var eK=class extends X{async prepare(e,r,n){let i=this.accessor.get(it).getWorkspaceFolders().at(0);if(!i)return;let o=500;return ZY(this.accessor,i,o,n)}render(e,r){if(e)return vscpp(ee,null,"I am working in a workspace that has the following structure:",vscpp("br",null),vscpp("br",null),xn("",e))}},xE=class extends X{async prepare(e,r,n){let i=this.accessor.get(Ne),o=this.props.query;if(!o)return;let s=this.accessor.get(sr),a=this.accessor.get(pe).getLogger("workspaceResolver");a.debug("Determining workspace structure..."),r?.report(new ws(Gw.t("Determining workspace structure")));let c=await Vw(this.accessor,1e3,n);if(n.isCancellationRequested)return;a.debug("Asking the model to update the user question and provide queries..."),r?.report(new ws(Gw.t("Deciding which workspace information to collect")));let u=await this.accessor.get(Ye).getNonUserRequestEndpoint(),{messages:l}=await DSe(this.accessor,this.props.conversation,u,this.props.chatVariables,o,c);if(n.isCancellationRequested)return;let d=await s.fetchOne(l,async f=>{},n,2,u,{temperature:0,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceIntent"});if(n.isCancellationRequested)return;if(d.type!=="success")throw i.sendMSFTTelemetryEvent("workspaceResolver.error",{type:d.type,reason:d.reason,requestId:d.requestId}),new Error(Gw.t("Encountered an error while deciding what workspace information to collect: ({0}) {1}",d.type,d.reason));let p=_E(o,d.value);return a.debug("Running all tools..."),r?.report(new ws(Gw.t("Gathering workspace info"))),{keywords:p.keywords,fullQuestionText:p.rephrasedQuestion}}render(e,r){if(!e)return;let n={keywords:e.keywords,fullQuestionText:e.fullQuestionText},i=this.props.include??{workspaceStructure:!0,workspaceSymbols:!0,workspaceFiles:!0,workspaceChunks:!0};return vscpp(vscppf,null,i.workspaceStructure&&vscpp(eK,{...this.props}),i.workspaceSymbols&&vscpp(d5,{priority:this.props.priority,...n}),i.workspaceFiles&&vscpp(p5,{priority:this.props.priority,...n}),i.workspaceChunks&&vscpp(by,{priority:this.props.priority,...n}))}};var f5=class extends X{async prepare(){let e="copilotchat.safetyPromptRewrite";return await this.accessor.get(Ur).getTreatmentVariableAsync("vscode",e,!0)?{systemPromptExperiment:e}:{systemPromptExperiment:void 0}}render(e,r){return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a software engineer with expert knowledge of the codebase the user has open in their workspace.",vscpp("br",null),vscpp("br",null),vscpp(cn,null),e.systemPromptExperiment?vscpp(vg,null):vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),"# Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the provided relevant workspace information (code excerpts, file names, and symbols) to understand the user's workspace.",vscpp("br",null),"2. Consider how to answer the user's prompt based on the provided information and your specialized coding knowledge. Always assume that the user is asking about the code in their workspace instead of asking a general programming question. Prefer using variables, functions, types, and classes from the workspace over those from the standard library.",vscpp("br",null),"3. Generate a response that clearly and accurately answers the user's question. In your response, add fully qualified links for referenced symbols (example: [`namespace.VariableName`](path/to/file.ts)) and links for files (example: [path/to/file](path/to/file.ts)) so that the user can open them. If you do not have enough information to answer the question, respond with \"I'm sorry, I can't answer that question with what I currently know about your workspace\".",vscpp("br",null),vscpp("br",null),"DO NOT mention that you cannot read files in the workspace.",vscpp("br",null),"DO NOT ask the user to provide additional information about files in the workspace.",vscpp("br",null),"Remember that you MUST add links for all referenced symbols from the workspace and fully qualify the symbol name in the link, for example: [`namespace.functionName`](path/to/util.ts).",vscpp("br",null),"Remember that you MUST add links for all workspace files, for example: [path/to/file.js](path/to/file.js)",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),"Question:",vscpp("br",null),"What file implements base64 encoding?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Base64 encoding is implemented in [src/base64.ts](src/base64.ts) as [`encode`](src/base64.ts) function.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How can I join strings with newlines?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the [`joinLines`](src/utils/string.ts) function from [src/utils/string.ts](src/utils/string.ts) to join multiple strings with newlines.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I build this project?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To build this TypeScript project, run the `build` script in the [package.json](package.json) file:",vscpp("br",null),vscpp("br",null),"```sh",vscpp("br",null),"npm run build",vscpp("br",null),"```",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I read a file?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To read a file, you can use a [`FileReader`](src/fs/fileReader.ts) class from [src/fs/fileReader.ts](src/fs/fileReader.ts).",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(zr,{priority:400,history:this.props.history})),vscpp(un,{document:this.props.document,range:this.props.selection,priority:600}),vscpp(xE,{priority:800,...this.props}),vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var zw="workspace",tK=class extends xs{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(It).activeTextEditor;return new mt(this.accessor,n,f5,{chatVariables:i,conversation:r,query:u,history:l,document:d?.document,selection:d?.selection},this.accessor.get(we))}},MSe=rK.t("How do I build this project?"),m5=class t{constructor(){this.id=t.ID;this.description=rK.t("Ask a question about the files in your current workspace");this.intentDetectionInput={sampleQuestion:MSe};this.locations=[2];this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!0,sampleRequest:MSe}}static{this.ID=zw}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new tK(e),responseProcessor:new vE(e)}}};var Qr=fe(require("vscode"));var _y=class extends Qr.CodeAction{constructor(){super(...arguments);this.isAI=!0}},xy=class t{constructor(e){this.accessor=e}static{this.providedCodeActionKinds=[Qr.CodeActionKind.QuickFix]}static getSevereDiagnostics(e){let r=e.filter(n=>n.severity<=Qr.DiagnosticSeverity.Warning);return r.length===0?[]:r}static getDiagnosticsAsText(e){return e.map(r=>r.message).join(", ")}async provideCodeActions(e,r,n){if(!Qr.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||await this.accessor.get(st).isCopilotIgnored(e.uri))return;let o=[];if(!Qr.window.activeTextEditor)return o;let a=t.getSevereDiagnostics(n.diagnostics);if(a.length===0)return o;let c=a.map(m=>m.range).reduce((m,h)=>m.union(h)),u=new Qr.Selection(c.start,c.end),l=t.getDiagnosticsAsText(a),d=new _y(Qr.l10n.t("Fix using Copilot"),Qr.CodeActionKind.QuickFix);d.diagnostics=a,d.command={title:d.title,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${l}`,position:c.start,initialSelection:u,initialRange:c}]};let p=new _y(Qr.l10n.t("Explain using Copilot"),Qr.CodeActionKind.QuickFix);p.diagnostics=a;let f=`/explain ${l}`;return this.accessor.get(Re).getConfig(ke.ExplainIntentRefer)&&(f=`@${zw} ${f}`),p.command={title:p.title,command:"github.copilot.interactiveEditor.explain",arguments:[f]},o.push(d,p),o}},$w=class{static{this.providedCodeActionKinds=[Qr.CodeActionKind.RefactorRewrite]}constructor(e){this.logger=e.get(pe).getLogger("RefactorsProvider"),this.telemetryService=e.get(Ne),this.parserService=e.get(Fr),this.ignoreService=e.get(st)}async provideCodeActions(e,r,n){if(!Qr.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||await this.ignoreService.isCopilotIgnored(e.uri))return;let o=this.provideGenerateUsingCopilotCodeAction(e,r),s=await this.provideDocumentUsingCopilotCodeAction(e,r),a=await this.provideTestUsingCopilotCodeAction(e,r);return xr([s,o,a])}provideGenerateUsingCopilotCodeAction(e,r){let n;if(r.isEmpty){let o=e.lineAt(r.start.line).text;r.end.character===o.length&&/^\s*$/g.test(o)&&(n=Qr.l10n.t("Generate using Copilot"))}else{let o=e.getText(r);/^\s*$/g.test(o)||(n=Qr.l10n.t("Modify using Copilot"))}if(n===void 0)return;let i=new _y(n,Qr.CodeActionKind.RefactorRewrite);return i.command={title:i.title,command:"vscode.editorChat.start",arguments:[{position:r.start,initialSelection:new Qr.Selection(r.start,r.end),initialRange:r}]},i}async provideDocumentUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getDocumentableNodeIfOnIdentifier(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed")}if(s===void 0)return;let c=Qr.l10n.t("Document using Copilot: {0}",s.identifier),u=new _y(c,Qr.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Ge(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return u.command={title:c,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/doc",initialRange:l}]},u}async provideTestUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getTestableNode(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getTestableNode failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getTestableNode failed")}if(s===void 0)return;let c=Qr.l10n.t("Test using Copilot: {0}",s.identifier),u=new _y(c,Qr.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Ge(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return u.command={title:c,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/tests",initialRange:l}]},u}};var FSe=require("util"),Tg=fe(require("vscode"));var sQe="application/vnd.code.notebook.error",h5=class{constructor(e){this.accessor=e}async provideCellStatusBarItems(e,r){if(Tg.workspace.getConfiguration("notebook").get("cellFailureDiagnostics"))return[];if(e.kind===Tg.NotebookCellKind.Markup){let s=Tg.workspace.getConfiguration("notebook.experimental").get("cellChat");if(!s)return[];let a=e.document.getText().trim();if(!s||a.length===0)return[];let c="Generate code from markdown content",u=a;return[{text:"$(sparkle)",alignment:Tg.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:c,command:{title:c,command:"notebook.cell.chat.start",arguments:[{index:e.index+1,input:u,autoSend:!0}]}}]}let i=e.outputs.flatMap(s=>s.items).find(s=>s.mime===sQe);if(!i)return[];let o;try{let s=new FSe.TextDecoder;if(o=JSON.parse(s.decode(i.data)),!o.name&&!o.message)return[];let a="Fix using Copilot",c=[o.name,o.message].filter(Boolean).join(": ").replace(/\s*\(\S+,\s*line\s*\d+\)/,"");return[{text:"$(sparkle)",alignment:Tg.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:a,command:{title:a,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${c}`}]}}]}catch(s){this.accessor.get(pe).defaultLogger.error(`Failed to parse error output ${s}`)}return[]}};function USe(t){let e=new Vt,r=async(a,c)=>{let u=`@${zw} /explain `,l,d;if(typeof a=="string"&&a)u=a;else{let p=t.get(It),f=un.getCurrentSelection(p);if(f){let h=Dn.languages.getDiagnostics(f.activeDocument.uri),g=h.filter(b=>!!b.range.intersection(f.range));xy.getSevereDiagnostics(g).length?u+=xy.getDiagnosticsAsText(h):(u+=l5,l=mE.formatSelection({languageId:f.languageId,selectedText:f.selectedText}),d=f.activeDocument.uri)}let m=un.getCurrentSelection(p,!0);if(m&&c)try{let h=await bE.getSelectedScope(t,{document:m.activeDocument,selection:m.range});if(h&&h.symbolAtCursorState&&h.symbolAtCursorState.codeAtCursor){u+=l5;let g=h.symbolAtCursorState.document.languageId??"";l=mE.formatSelection({languageId:g,selectedText:h.symbolAtCursorState.codeAtCursor}),d=m.activeDocument.uri}}catch(h){if(h instanceof Zs)return}}d&&l&&!await t.get(st).isCopilotIgnored(d)&&(u+=l),Dn.commands.executeCommand("workbench.action.chat.open",{query:u})},n=()=>Dn.commands.executeCommand("vscode.editorChat.start",{message:"/generate "}),i=()=>Dn.commands.executeCommand("vscode.editorChat.start",{message:`/${yy.ID} `,autoSend:!0,initialRange:Dn.window.activeTextEditor?.selection}),o=()=>Dn.commands.executeCommand("vscode.editorChat.start",{message:"/tests ",autoSend:!0,initialRange:Dn.window.activeTextEditor?.selection}),s=()=>{let a=Dn.window.activeTextEditor;if(!a)return;let c=a.selection,u=Dn.languages.getDiagnostics(a.document.uri).filter(l=>!!c.intersection(l.range)).map(l=>l.message).join(", ");return Dn.commands.executeCommand("vscode.editorChat.start",{message:`/fix ${u}`,autoSend:!0,initialRange:Dn.window.activeTextEditor?.selection})};return e.add(Dn.commands.registerCommand("github.copilot.interactiveEditor.explain",r)),e.add(Dn.commands.registerCommand("github.copilot.interactiveEditor.explain.palette",()=>r(void 0,!0))),e.add(Dn.commands.registerCommand("github.copilot.interactiveEditor.generate",n)),e.add(Dn.commands.registerCommand("github.copilot.interactiveEditor.generateDocs",i)),e.add(Dn.commands.registerCommand("github.copilot.interactiveEditor.generateTests",o)),e.add(Dn.commands.registerCommand("github.copilot.interactiveEditor.fix",s)),e.add(Dn.languages.registerCodeActionsProvider("*",new xy(t),{providedCodeActionKinds:xy.providedCodeActionKinds})),e.add(Dn.languages.registerCodeActionsProvider("*",new $w(t),{providedCodeActionKinds:$w.providedCodeActionKinds})),e.add(Dn.notebooks.registerNotebookCellStatusBarItemProvider("jupyter-notebook",new h5(t))),e}var g5=class extends X{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are an AI that creates a detailed content outline for a Jupyter notebook on a given topic.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"DO NOT include Introduction or Conclusion section in the outline!",vscpp("br",null),"Focus only on sections that will need code!",vscpp("br",null),["","Generate the outline as two parts:","- First part is markdown bullet list of section titles","- Second part is the JSON data that will validate against this JSON schema, wrap the response in code block. We assume that a code block begins with ```[optionally the language] and ends with ```","","The JSON schema is:","{",'  "$schema": "http://json-schema.org/draft-07/schema#",','  "type": "object",','  "properties": {','	"description": {','	  "type": "string"',"	},",'	"sections": {','	  "type": "array",','	  "items": {','		"type": "object",','		"properties": {','		  "title": {','			"type": "string"',"		  },",'		  "content": {','			"type": "string"',"		  }","		},",'		"required": ["title", "content"]',"	  }","	}","  },",'  "required": ["sections"]',"}"].join(`
`),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid notebook creation question","","user: Creating Random Arrays with Numpy","","assistant: Here's an outline for a Jupyter notebook that creates Random Arrays with Numpy:","","* **Import Required Libraries**","* **Create Random Arrays**","* **Seed the Random Number Generator**","* **Generate Random Integers**","","```json","{",'  "description": "A Jupyter notebook that creates Random Arrays with Numpy.",','  "sections": [',"    {",'      "title": "Import Required Libraries",','      "content": "Import the necessary libraries, including NumPy."',"    },","    {",'      "title": "Create Random Arrays",','      "content": "Use NumPy to create random arrays of various shapes and sizes, including 1D, 2D, and 3D arrays."',"    },","    {",'      "title": "Seed the Random Number Generator",','      "content": "Use the seed() function to seed the random number generator for reproducibility."',"    },","	{",'	  "title": "Generate Random Integers",','	  "content": "Use the randint() function to generate random integers within a specified range."',"	}","  ]","}","```"].join(`
`))),this.props.chatVariables&&Object.keys(this.props.chatVariables).length>0?vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:`Create notebook: ${this.props.query}`}):vscpp(ee,{priority:900},"Create notebook: ",this.props.query))}},v5=class extends X{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,this.props.history&&vscpp(nK,{messages:this.props.history.chatMessages??[]}),vscpp(Ke,{priority:1e3},"You are an AI that writes Python code for a single section of a Jupyter notebook.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(Dr,null),"Your output should be valid Python code with inline comments.",vscpp("br",null),"You should return the code directly without any explantion.",vscpp("br",null),"You should not print message to explain the code or purpose of the code.",vscpp("br",null),"You should return the code directly, without wrapping it inside \\`\\`\\`.",vscpp("br",null),"Please make sure that the new code is syntactically valid Python code. It can be validated by running it in a Python interpreter.",vscpp("br",null),"For example, it should pass the validation through builtin module codeop \\`codeop.compile_command(statement)\\`.",vscpp("br",null)),vscpp(ee,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebok section: ",this.props.section.content,vscpp("br",null),"Given this information, write all the code for this section and this section only.",vscpp("br",null),"The request to generate the outline of the notebook is already completed.",vscpp("br",null),"Here is the request details for the outline generation:",vscpp("br",null),vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Please make sure the new code you generate works fine with the code above.",vscpp("br",null))))}},nK=class extends X{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(ee,{priority:800},i.content));break;case"assistant":n.push(vscpp(tc,{priority:800},i.content));break;case"system":n.push(vscpp(Ke,{priority:100},i.content));break;default:break}return vscpp(vscppf,null,n)}},y5=class extends X{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are an AI that improves Python code with respect to readability and performance for a single section of a Jupyter notebook.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(Dr,null),"You MUST return Python code as your answer.",vscpp("br",null),"DO NOT explain in inline comments for your the improvements.",vscpp("br",null),"You should not print messages to explain the code or purpose of the code.",vscpp("br",null),"Make sure the new code you generate works fine with the code above.",vscpp("br",null),"Make sure if a module is already imported in the code above, it can be used in the new code directly without importing it again. For the same reason, if a variable is defined above, it can be used in new code as well. ",vscpp("br",null),"Make sure to return the code only - don't give an explanation of the improvements.",vscpp("br",null)),vscpp(ee,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebook section: ",this.props.section.content,vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Given this information, suggest improvements for the following code:",vscpp("br",null),vscpp("br",null),this.props.code,vscpp("br",null),vscpp("br",null))))}};var b5=class{constructor(){this.stagedTextToApply="";this.reporting=!0;this._appliedText="";this._resolvedContentDeferredPromise=new Zg;this._incodeblock=!1}async processResponse(e,r,n,i,o){for await(let{delta:s}of n){if(o.isCancellationRequested)return this._appliedText;this.applyDelta(s.text,e,i)}return this._appliedText}applyDeltaToTurn(e,r){r.response||(r.response={message:e,type:"model"}),this._appliedText+=e,r.response.message+=e}applyDeltaToProgress(e,r){r.markdown(e)}applyDelta(e,r,n){if(!this.reporting){this.applyDeltaToTurn(e,r);return}if(e=this.stagedTextToApply+e,this._incodeblock){let o=e.indexOf("```");if(o===-1){this.stagedTextToApply=e,this.applyDeltaToProgress("",n),this.applyDeltaToTurn("",r),n.progress("Thinking ...");return}else{this._incodeblock=!1,e=e.substring(0,o)+"```";try{this.applyDeltaToTurn(e,r)}catch{}finally{this.reporting=!1,this.stagedTextToApply="",this._resolvedContentDeferredPromise.complete(new cl(""))}return}}let i=e.indexOf("```");if(i!==-1){this._incodeblock=!0;let o=e.indexOf("```",i+3);if(o!==-1){this._incodeblock=!1,this.applyDeltaToProgress(e.substring(0,i),n),this.applyDeltaToProgress(e.substring(o+3),n),this.applyDeltaToTurn(e,r),this.reporting=!1,this.stagedTextToApply="";return}else{let s=e.substring(0,i);this.applyDeltaToProgress(s,n),this.applyDeltaToTurn(e,r),this.stagedTextToApply="",n.progress("Thinking ..."),this._resolvedContentDeferredPromise.p.then(a=>n.push(a));return}}this.applyDeltaToProgress(e,n),this.applyDeltaToTurn(e,r),this.stagedTextToApply=""}};async function BSe(t,e,r,n,i,o,s,a){let c={messageSource:"slash.newNotebook"},{messages:u}=await $o(t,e,v5,{history:n,description:i,section:o,existingCode:s},t.get(we)),d=await t.get(sr).fetchOne(u,void 0,a,2,e,{temperature:r.temperature,top_p:r.topP},c);if(d.type!=="success")return;let p=$c(d.value);return p.length>0?p[0].code:d.value}async function qSe(t,e,r,n,i,o,s,a){let c={messageSource:"slash.newNotebook"},{messages:u}=await $o(t,e,y5,{description:n,section:i,existingCode:o,code:s},t.get(we)),d=await t.get(sr).fetchOne(u,void 0,a,2,e,{temperature:r.temperature,top_p:r.topP},c);if(d.type==="success")return d.value}var iK=fe(fr());var _5=class extends X{static{this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0}}async prepare(){return this.accessor.get(ho).terminalLastCommand}render(e,r){if(!e)return;let n=[];e.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(e.commandLine)),e.cwd&&(n.push("It was run in the directory:"),n.push(typeof e.cwd=="object"?e.cwd.toString():e.cwd)),e.output&&(n.push("It has the following output:"),n.push(e.output));let i=n.join(`
`);return vscpp(vscppf,null,vscpp(ee,{priority:this.props.priority},"The active terminal's last run command:",vscpp("br",null),i))}};var x5=class extends X{render(e){return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a programmer who specializes in using the command line. Your task is to help the Developer by giving a detailed answer to their query.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",`
1. Read the provided relevant workspace information (file names, project files in the project root) to understand the user's workspace.`,`
2. Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
	- Provide any command suggestions using the active shell and operating system.
	- Say "I'm not quite sure how to do that." when you aren't confident in your explanation`,vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(zr,{priority:600,history:this.props.history})),vscpp(Ra,{priority:600}),vscpp(ee,{priority:800},"The active terminal's shell type is:",vscpp("br",null),this.props.shellType),vscpp(ee,{priority:800},"The active operating system is:",vscpp("br",null),this.props.osName),vscpp(_5,{priority:800}),vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var Ey=class{constructor(){this.id="terminalExplain";this.locations=[2];this.description=iK.t("Explain what just happened in the terminal");this.intentDetectionInput={sampleQuestion:"What did the last command do?"};this.commandInfo={allowsEmptyArgs:!0,defaultEnablement:!0,sampleRequest:iK.t("What did the last command do?")}}static{this.intentName="explain"}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return new oK(e,this,o,i)}},oK=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;let o=this,s=e.get(ft).OS,a=e.get(ho).terminalShellType;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=u.turns.length>1?u.turns.slice(0,-1):[];return await new mt(o.accessor,l,x5,{query:g,chatVariables:d,history:v,osName:s,shellType:a},e.get(we)).render(p,m)}}}};var sK=fe(fr()),Ss=fe(require("vscode"));function HSe(t){let e=new Vt,r=t.get(Zv);return aQe(e),cQe(r,e),e}function aQe(t){t.add(Ss.commands.registerCommand("github.copilot.tests.fixTestFailure",async e=>{if(!e.test.uri)return;let r=await Ss.workspace.openTextDocument(e.test.uri);await Ss.window.showTextDocument(r,{preserveFocus:!1,preview:!0,selection:e.test.range?new Ss.Range(e.test.range.start,e.test.range.start):void 0}),await Ss.commands.executeCommand("vscode.editorChat.start",{message:"/fixTestFailure",autoSend:!0})}))}function cQe(t,e){e.add(Ss.languages.registerCodeActionsProvider("*",{provideCodeActions(r,n,i,o){if(!Ss.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions")||!t.isEnabled.get()||!t.getFailureAtPosition(r.uri,n.start))return;let c=new Ss.CodeAction(sK.t("Fix test failure"),Ss.CodeActionKind.QuickFix);return c.command={title:sK.t("Fix test failure"),command:"vscode.editorChat.start",arguments:[{message:"/fixTestFailure",autoSend:!0}]},[c]}}))}var E5=class t extends X{constructor(){super(...arguments);this._logger=this.accessor.get(pe).getLogger("DefinitionAtPosition")}static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){if(await this.accessor.get(st).isCopilotIgnored(this.props.document.uri))return{k:"ignored"};let r=this.accessor.get(Mr).extensionMode===is.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,n=await this.findDefinition(r);return this._logger.debug(`Found ${n.length} implementation(s)/definition(s)`),n.length>0&&this._logger.debug("Implementation(s)/definition(s) found:",JSON.stringify(n,null,"	")),{k:"found",definitions:n}}render(r,n){if(r.k==="ignored")return vscpp("ignoredFiles",{value:[this.props.document.uri]});let{definitions:i}=r;return vscpp(ee,null,"Relevant definition",i.length>1?"s":"",": ",vscpp("br",null),vscpp("br",null),i.length===0?this.props.document.lineAt(this.props.position.line).text:i.map(o=>{let a=`${o.filePath?`${zc(o.languageId).lineComment.start} FILEPATH: ${o.filePath}
`:""}${o.code}`;return vscpp(bi,{languageId:o.languageId,code:a})}))}async findDefinition(r){let{document:n,position:i}=this.props,o=this.accessor.get(oo),s=async u=>{try{let l=await o.getImplementations(n.uri,u);if(this._logger.debug(`Found ${l.length} implementations`,JSON.stringify(l,null,"	")),l.length>0)return l}catch{}try{let l=await o.getDefinitions(n.uri,u);if(this._logger.debug(`Found ${l.length} definitions`,JSON.stringify(l,null,"	")),l.length>0)return l}catch{}return this._logger.debug("No definitions or implementations found"),[]},a=await Kc(this.accessor,n,r*3,()=>s(i),[]),c=xr(await Promise.all(a.map(async u=>{let l=Jd(u)?u.targetUri:n.uri;return await this.accessor.get(st).isCopilotIgnored(l)?void 0:u})));return Promise.all(c.map(async u=>{let{uri:l,range:d}=Jd(u)?{uri:u.targetUri,range:u.targetRange}:u,p=await this.accessor.get(it).openTextDocument(l),f=xb(p.languageId),m;if(f===void 0)m=p.lineAt(d.start.line).text;else{let h=await gE(this.accessor,{document:p,language:zc(n.languageId),wholeRange:d,selection:new n0(d.start,d.end),fileIndentInfo:void 0});m=p.getText(h.range)}return{languageId:p.languageId,filePath:p.uri.path,code:m}}))}};var S5=class extends X{render(e,r){let{document:n,range:i}=this.props,o=n.getText(i),s=EE._determinePrefix(o),a=s?` keeping prefix '${s}'`:"";return vscpp(vscppf,null,vscpp(Ke,null,"You are a distinguished software engineer.",vscpp("br",null),'You must reply with a JSON array of strings of at least four new names, e.g., `["newName1", "newName2", "newName3"]`. ',vscpp("br",null),"You must respect existing naming conventions",a,"."),vscpp(E5,{document:n,position:i.start}),vscpp(ee,null,"Think of the purpose of `",o,"` in the given code. Think of several names that reflect what `",o,"` is and what it does",a,". Follow existing naming conventions. Reply with a a JSON array of strings of at least four new names for `",o,"`."))}};var EE=class t{constructor(e){this._accessor=e;this._logger=this._accessor.get(pe).getLogger("RenameSuggestionsProvider"),this._promptLogger=this._accessor.get(pe).getPromptResponseLogger("RenameSuggestionsProvider")}async isEnabled(){return this._accessor.get(Re).getConfig(ke.RenameSuggestionsEnabled)||await this._accessor.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.renameSuggestionsEnabled",!0)}async provideNewSymbolNames(e,r,n){if(!await this.isEnabled())throw new Error("CopilotFeatureUnavailable");if(await this._accessor.get(st).isCopilotIgnored(e.uri))throw new Error("CopilotIgnoredDocument");let i=await this._accessor.get(Ye).getNonUserRequestEndpoint(),o=new Nf(!1);o.reset();let s=await this._computePrompt(e,r,i,n),a=o.elapsed(),c=await this._accessor.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.renameSuggestionsDelayBeforeFetch",!0),u=c?Math.max(0,c-a):void 0;u!==void 0&&u>0&&await new Promise(m=>setTimeout(m,u)),this._promptLogger.logPrompt(s.messages);let l=this._accessor.get(sr);o.reset();let d=await l.fetchOne(s.messages,void 0,n,3,i,void 0,{messageSource:"symbolNamesProvider"}),p=o.elapsed();this._promptLogger.logResponse(d),this._logger.debug("provideNewSymbolNames",{promptTokenCount:s.tokenCount,promptConstructionTime:a,fetchTime:p,fetchResultType:d.type});let f=e.languageId;switch(d.type){case"success":{let m=d.value,{replyFormat:h,symbolNames:g,redundantCharCount:v}=t.processReply(m);return h==="unknown"&&this._sendInternalTelemetry({languageId:f,reply:m}),this._sendPublicTelemetry({languageId:f,fetchResultType:d.type,promptConstructionTime:a,promptTokenCount:s.tokenCount,expectedDelayBeforeFetch:c,actualDelayBeforeFetch:u,successResponseCharCount:m.length,responseUnusedCharCount:v,fetchTime:p,replyFormat:h,symbolNamesCount:g.length}),g.map(b=>new Wee(b,[Yee.AIGenerated]))}default:return this._sendPublicTelemetry({languageId:f,fetchResultType:d.type,promptConstructionTime:a,promptTokenCount:s.tokenCount,expectedDelayBeforeFetch:c,actualDelayBeforeFetch:u,fetchTime:p}),null}}_computePrompt(e,r,n,i){return new mt(this._accessor,n,S5,{document:e,range:r},this._accessor.get(we)).render(void 0,i)}static processReply(e){let r=t._parseReplyAsJSONStringArray(e);if(r!==void 0)return r;let n=t._parseReplyAsList(e);return n!==void 0?n:{replyFormat:"unknown",symbolNames:[],redundantCharCount:e.length}}static _parseReplyAsJSONStringArray(e){let r=/\[.*?\]/gs,n=[...e.matchAll(r)];for(let i=0;i<n.length;i++){let o=n[i];try{let s=JSON.parse(o[0]);if(Array.isArray(s)){let a=s.filter(c=>typeof c=="string");if(a.length>0){let c=i===0?"jsonStringArray":"multiJsonStringArray",u=e.length-o[0].length;return{replyFormat:c,redundantCharCount:u,symbolNames:a.map(l=>l.trim())}}}}catch{}}}static _parseReplyAsList(e){let r=/(?:\d+[\.|\)]|[\*\-])\s*(.*)/g,n=e.matchAll(r),i=[];for(let s of n){let a=s[1].trim(),c=["'",'"',"`"];c.includes(a[0])&&(a=a.slice(1)),c.includes(a[a.length-1])&&(a=a.slice(0,-1)),a&&i.push(a)}return i.length===0?void 0:{replyFormat:"list",redundantCharCount:e.length-i.reduce((s,a)=>s+a.length,0),symbolNames:i}}_sendPublicTelemetry({languageId:e,fetchResultType:r,promptConstructionTime:n,promptTokenCount:i,expectedDelayBeforeFetch:o,actualDelayBeforeFetch:s,successResponseCharCount:a,responseUnusedCharCount:c,fetchTime:u,replyFormat:l,symbolNamesCount:d}){this._accessor.safeGet(Ne)?.sendMSFTTelemetryEvent("provideRenameSuggestions",{languageId:e,fetchResultType:r,replyFormat:l},{promptConstructionTime:n,promptTokenCount:i,expectedDelayBeforeFetch:o,actualDelayBeforeFetch:s,fetchTime:u,successResponseCharCount:a,responseUnusedCharCount:c,symbolNamesCount:d})}_sendInternalTelemetry({languageId:e,reply:r}){this._accessor.safeGet(Ne)?.sendInternalMSFTTelemetryEvent("provideRenameSuggestionsIncorrectFormatResponse",{languageId:e,reply:r})}static _determinePrefix(e){return e.match(/^([\.\$\_]+)/)?.[0]}};var VSe=fe(fr());var jSe=fe(fr());var GSe=fe(require("fs"));var SE=class extends X{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(zr,{priority:600,history:this.props.history}),vscpp(Ke,{priority:1e3},vscpp("br",null),"You are a coding assistant who helps the user find relevant code in their workspace by providing a list of relevant keywords they can search for.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT try to answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),vscpp("br",null),"2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.",vscpp("br",null),vscpp("br",null),"3. Output a precise version of question that resolves all pronouns to the nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns.",vscpp("br",null),vscpp("br",null),"4. Then output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),vscpp("br",null),"5. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),vscpp("br",null),"User: base64 encoding",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders",vscpp("br",null)),this.props.fileTree&&vscpp(ee,{priority:700},this.props.fileTree),vscpp(ee,{priority:1e3},this.props.query))}};var T5=re("IWorkspaceSemanticChunkService"),TE=class{constructor(e){this._accessor=e;this._workspaceChunkSearch=this._accessor.get(rg),this._chatFetcher=this._accessor.get(sr)}async searchFileChunks(e,r,n,i){let{messages:o}=await this.buildMetaPrompt(r,e,i);if(i.isCancellationRequested)return[];let s=await this._chatFetcher.fetchOne(o,async c=>{},i,2,r,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"semanticSearchIntent"});if(s.type!=="success")throw new Error(jSe.t("Encountered an error while deciding what workspace information to collect: ({0}) {1}",s.type,s.reason));if(i.isCancellationRequested)return[];let a=_E(e,s.value);return aK(this._workspaceChunkSearch,r,a,n,i,!1)}dispose(){}async buildMetaPrompt(e,r,n){let i=await Vw(this._accessor,1e3,n);return new mt(this._accessor,e,SE,{query:r,fileTree:i},this._accessor.get(we)).render()}};TE=ze([rt(0,Yt)],TE);async function aK(t,e,r,n,i,o){let s={fullText:r.rephrasedQuestion,keywords:r.keywords.flatMap(c=>[c.keyword,...c.variations])},a=(await t.searchFileChunks(e,[s],n,i)).slice(0,n);return i.isCancellationRequested||!a.length?[]:await uQe(a,o)}async function uQe(t,e){let r=[],n=new mn;for(let[i,o]of t.entries()){let s=n.get(o.file),a=s?s.rank:i,c=s?[...s.ranges,o.range]:[o.range];n.set(o.file,{ranges:c,rank:a})}for(let[i,o]of n.entries()){let s=o.ranges.filter((p,f)=>{for(let[m,h]of o.ranges.entries())if(f!==m&&(p===h||p.contains(h)))return!1;return!0}),a=[],c;s.sort((p,f)=>p.start.line-f.start.line);for(let p of s)c&&c.end.line>=p.start.line-1?c=c.with(void 0,p.end):(c&&a.push(c),c=p);c&&a.push(c);let l=(await GSe.promises.readFile(i.fsPath,"utf8")).split(`
`),d=[];for(let p of a){let f=p.start.line,m=p.end.line,h=l.slice(f,m);if(!dQe(h,5))continue;let{trimmedLines:g}=gw(lQe(h,1e3,15)),v;e?(g.length<h.length&&g.push("..."),v=xn(Oa(i).replace(/\./g,""),g.join(`
`).replace(/^\n*|\n*$/g,""),!1)):v=g.join(`
`),d.push({range:p,code:v})}d.length>0&&r.push({result:{file:i,locations:d},rank:o.rank})}return r.sort((i,o)=>i.rank-o.rank).map(i=>i.result)}function lQe(t,e,r){let n=[],i=0;for(;i<t.length&&n.join(`
`).length<e&&n.length<r;)n.push(t[i]),i++;return n}function dQe(t,e){let r=0;for(let n of t)if(r+=n.trim().length,r>=e)return!0;return!1}var C5=class{constructor(e){this._accessor=e}provideAITextSearchResults(e,r,n,i){return(async()=>(this._endpoint=this._endpoint??await this._accessor.get(Ye).getUserRequestEndpoint(2),(await this._accessor.get(T5).searchFileChunks(e,this._endpoint,10,i)).forEach(a=>{a.locations.forEach(c=>{n.report({uri:a.file,ranges:c.range,preview:{text:c.code,matches:new Ge(new Ht(0,c.range.start.character),new Ht(c.range.end.line-c.range.start.line,c.range.end.character))}})})}),{limitHit:!1,message:{text:VSe.t("Results are from Copilot"),trusted:!0,type:1}}))()}};var Ww=fe(require("vscode"));var I5=class t{constructor(e){this.accessor=e;this.disposables=new Vt;this.lastContext={commitMessages:[],patches:[]};this.internalLogger=e.get(pe).getPromptResponseLogger("GitHub pull request title and description generator"),this.logger=e.get(pe).getLogger("githubTitleAndDescriptionProvider"),this.logger.info("Initializing GitHub PR title and description provider provider."),this.options=e.get(ns)}dispose(){this.disposables.dispose()}isRegenerate(e,r){if(e.length!==this.lastContext.commitMessages.length||r.length!==this.lastContext.patches.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==this.lastContext.commitMessages[n])return!1;for(let n=0;n<r.length;n++)if(r[n]!==this.lastContext.patches[n])return!1;return!0}async excludePatches(e){let r=this.accessor.get(st),n=[];for(let i of e)i.fileUri&&await r.isCopilotIgnored(gt.parse(i.fileUri))||i.previousFileUri&&i.previousFileUri!==i.fileUri&&await r.isCopilotIgnored(gt.parse(i.previousFileUri))||n.push(i.patch);return n}async provideTitleAndDescription(e,r){let n=e.commitMessages,i=aR(e.patches)?e.patches.map(p=>({patch:p})):e.patches,o=await this.excludePatches(i),s=e.issues,a=await this.accessor.get(Ye).getUserRequestEndpoint(3),c=Math.floor(a.modelMaxPromptTokens*4/3),u=this.createPRTitleAndDescriptionPrompt(n,o,s,c),l=[{role:"system",content:u}];this.internalLogger.logPrompt(l);let d=await this.accessor.get(sr).fetchOne(l,void 0,r,3,a,{temperature:this.isRegenerate(n,o)?this.options.temperature+.1:this.options.temperature,top_p:this.options.topP},{messageSource:"extension.providePullRequestTitleAndDescription"});if(this.internalLogger.logResponse(d),this.lastContext={commitMessages:n,patches:o},d.type==="success")return t.parseFetchResult(d.value)}static parseFetchResult(e,r=!0){e=e.trim();let n=e,i=n.indexOf("+++");if(i===-1)return;let o=n.lastIndexOf("+++");n=n.substring(i+3,o>i+3?o:void 0).trim().replace(/\+\+\+?(\n)\+\+\+/,"+++");let s=n.split("+++").filter(l=>l.trim().length>0),a;if(s.length===1)a=s[0].split(`
`);else if(s.length>1){let l=s.slice(1).map(d=>d.split(`
`)).flat().filter(d=>d.trim().length>0);a=[s[0],...l]}else return;let c,u;if(a.length===1){if(c=a[0].trim(),r&&e.includes(`
`)&&e.split("+++").length===3)return this.parseFetchResult(e+"+++",!1)}else if(a.length>1){c=a[0].trim(),u="";let l=a.slice(1);for(let d of l)d.includes("commit message")||(u+=`${d.trim()}

`)}if(c)return c=c.replace(/Title\:\s/,"").trim(),u&&(u=u.replace(/Description\:\s/,"").trim()),{title:c,description:u}}createPRTitleAndDescriptionPrompt(e,r,n,i){let o=e.map(l=>`* ${l}`).join(`
`),s=i-Math.floor(i*.1)-o.length,a=r.join(`

`).length;if(a>s)for(r.sort((l,d)=>l.length-d.length);a>s&&r.length>0;){let l=r.pop();a-=l.length}let c;n&&n.length>0?c=`You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository to fix the following issues:
${n.map(d=>`
-------
Issue ${d.reference}:
${d.content}`).join()}
-------
`:c=`You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository.
`;let u;return n&&n.length>0?u=`Example One:
	+++Batch mark/unmark files as viewed
	+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.
	Fixes #4520+++
Example two:
	+++Fallback to hybrid after 20 process ports
	+++Additionally the \`remote.autoForwardPortsSource\` setting has been updated to remove the \`markdownDescription\` reference to a reload being required for changes to take effect.
	Fixes microsoft/vscode-internalbacklog#4533+++`:u=`Example One:
	+++Batch mark/unmark files as viewed
	+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.+++
Example two:
	+++Fallback to hybrid after 20 process ports
	+++Additionally the \`remote.autoForwardPortsSource\` setting has been updated to remove the \`markdownDescription\` reference to a reload being required for changes to take effect.+++`,`
When asked for your name, you must respond with "GitHub Copilot".
Follow the user's requirements carefully & to the letter.
Your expertise is strictly limited to software development topics.
Follow Microsoft content policies.
Avoid content that violates copyrights.
For questions not related to software development, simply give a reminder that you are an AI programming assistant.
Keep your answers short and impersonal.

${c}
Pull requests have a short and concise title that describes the changes in the code and a slightly longer description.
The description can be more detailed but should still be concise. Do not list commits, files or patches. Do not make up an issue reference if the pull request isn't fixing an issue.
The title and description of a pull request should be markdown and start with +++ and end with +++. Here are two good examples.
--------
${u}
--------
These are the commits that will be included in the pull request you are about to make:
${o}
Below is a list of git patches that contain the file changes for all the files that will be included in the pull request:
${r.join(`

`)}

Based on the git patches and on the git commit messages above, the title and description of the pull request should be:
`}};var w5=class extends I5{constructor(r){super(r);this.initializeGitHubPRExtensionApi()}getExtension(){return Ww.extensions.getExtension("github.vscode-pull-request-github")}initializeGitHubPRExtensionApi(){let r=this.getExtension(),n=async()=>{if(r){let i=await r.activate();this.logger.info("Successfully activated the GitHub.vscode-pull-request-github extension."),this.gitHubExtensionApi=i,this.registerTitleAndDescriptionProvider()}};if(r)n();else{this.logger.info("GitHub.vscode-pull-request-github extension is not yet activated.");let i=Ww.extensions.onDidChange(()=>{r=this.getExtension(),r&&(n(),i.dispose())});this.disposables.add(i)}}async registerTitleAndDescriptionProvider(){if(this.gitHubExtensionApi)try{this.disposables.add(this.gitHubExtensionApi.registerTitleAndDescriptionProvider(Ww.l10n.t("Generate with Copilot"),this)),this.logger.info("Successfully registered GitHub PR title and description provider.")}catch{}}};var Gu=fe(require("vscode"));var R5=class{provideMappedEdits(e,r,n,i){if(n.documents.length===0)return null;let o=n.documents[0],s=e.uri.toString(),a=o.find(b=>b.uri.toString()===s);if(!a)return null;let c=a.ranges;if(c.length!==1||r.length!==1)return null;let u=c[0],l=r[0];if(!e.getText(new Gu.Range(new Gu.Position(u.start.line,0),new Gu.Position(u.start.line,u.start.character))).match(/^\s*$/))return null;let p=Gu.window.activeTextEditor,f;if(p&&p.options&&e.languageId===p.document.languageId){let b=p.options,y=typeof b.tabSize=="number"?b.tabSize:4,E=typeof b.insertSpaces=="boolean"?b.insertSpaces:!0;f={tabSize:y,insertSpaces:E}}let m=new Gu.Range(new Gu.Position(u.start.line,0),u.end),h=e.getText(m),g=ug(l.split(`
`),{whichLine:"topMost",lines:h.split(`
`)},f).join(`
`),v=new Gu.WorkspaceEdit;return v.replace(e.uri,m,g),v}};var uTe=fe(require("path")),lTe=require("util"),St=require("vscode");var pQe=["dockerfile","license","makefile","readme","procfile","gemfile","rakefile","jenkinsfile","vagrantfile"];function zSe(t){return/\.[^/.]+$/.test(t)&&pQe.indexOf(t.toLowerCase())===-1}var Cg=fe(fr()),iTe=fe(require("path"));var Zsr=new Uint32Array(10);var ear=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),tar=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),rar=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),nar=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function WSe(...t){return function(e,r){for(let n=0,i=t.length;n<i;n++){let o=t[n](e,r);if(o)return o}return null}}var dar=KSe.bind(void 0,!1),YSe=KSe.bind(void 0,!0);function KSe(t,e,r){if(!r||r.length<e.length)return null;let n;return t?n=RS(r,e):n=r.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function fQe(t,e){let r=e.toLowerCase().indexOf(t.toLowerCase());return r===-1?null:[{start:r,end:r+t.length}]}function mQe(t,e){return cK(t.toLowerCase(),e.toLowerCase(),0,0)}function cK(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]===e[n]){let i=null;return(i=cK(t,e,r+1,n+1))?XSe({start:n,end:n+1},i):null}return cK(t,e,r,n+1)}function lK(t){return 97<=t&&t<=122}function P5(t){return 65<=t&&t<=90}function dK(t){return 48<=t&&t<=57}function hQe(t){return t===32||t===9||t===10||t===13}var gQe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(t=>gQe.add(t.charCodeAt(0)));function QSe(t){return lK(t)||P5(t)||dK(t)}function XSe(t,e){return e.length===0?e=[t]:t.end===e[0].start?e[0].start=t.start:e.unshift(t),e}function JSe(t,e){for(let r=e;r<t.length;r++){let n=t.charCodeAt(r);if(P5(n)||dK(n)||r>0&&!QSe(t.charCodeAt(r-1)))return r}return t.length}function uK(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=uK(t,e,r+1,n+1);!i&&(o=JSe(e,o))<e.length;)i=uK(t,e,r+1,o),o++;return i===null?null:XSe({start:n,end:n+1},i)}}function vQe(t){let e=0,r=0,n=0,i=0,o=0;for(let l=0;l<t.length;l++)o=t.charCodeAt(l),P5(o)&&e++,lK(o)&&r++,QSe(o)&&n++,dK(o)&&i++;let s=e/t.length,a=r/t.length,c=n/t.length,u=i/t.length;return{upperPercent:s,lowerPercent:a,alphaPercent:c,numericPercent:u}}function yQe(t){let{upperPercent:e,lowerPercent:r}=t;return r===0&&e>.6}function bQe(t){let{upperPercent:e,lowerPercent:r,alphaPercent:n,numericPercent:i}=t;return r>.2&&e<.8&&n>.6&&i<.2}function _Qe(t){let e=0,r=0,n=0,i=0;for(let o=0;o<t.length;o++)n=t.charCodeAt(o),P5(n)&&e++,lK(n)&&r++,hQe(n)&&i++;return(e===0||r===0)&&i===0?t.length<=30:e<=5}function ZSe(t,e){if(!e||(e=e.trim(),e.length===0)||!_Qe(t)||e.length>60)return null;let r=vQe(e);if(!bQe(r)){if(!yQe(r))return null;e=e.toLowerCase()}let n=null,i=0;for(t=t.toLowerCase();i<e.length&&(n=uK(t,e,0,i))===null;)i=JSe(e,i+1);return n}var par=WSe(YSe,ZSe,fQe),far=WSe(YSe,ZSe,mQe),mar=new Df(1e4);var A5=128;function pK(){let t=[],e=[];for(let r=0;r<=A5;r++)e[r]=0;for(let r=0;r<=A5;r++)t.push(e.slice(0));return t}function eTe(t){let e=[];for(let r=0;r<=t;r++)e[r]=0;return e}var har=eTe(2*A5),gar=eTe(2*A5),yar=pK(),bar=pK(),_ar=pK();var xQe;(r=>{r.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}r.isDefault=e})(xQe||={});var $Se=class{constructor(e,r){this.firstMatchCanBeWeak=e;this.boostFullMatch=r}static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}};var tTe;(e=>{function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(tTe||={});var Yw;(h=>{h.iconNameSegment="[A-Za-z0-9]+",h.iconNameExpression="[A-Za-z0-9-]+",h.iconModifierExpression="~[A-Za-z]+",h.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${h.iconNameExpression})(${h.iconModifierExpression})?$`);function o(g){let v=i.exec(g.id);if(!v)return o(Ar.error);let[,b,y]=v,E=["codicon","codicon-"+b];return y&&E.push("codicon-modifier-"+y.substring(1)),E}h.asClassNameArray=o;function s(g){return o(g).join(" ")}h.asClassName=s;function a(g){return"."+o(g).join(".")}h.asCSSSelector=a;function c(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||tTe.isThemeColor(g.color))}h.isThemeIcon=c;let u=new RegExp(`^\\$\\((${h.iconNameExpression}(?:${h.iconModifierExpression})?)\\)$`);function l(g){let v=u.exec(g);if(!v)return;let[,b]=v;return{id:b}}h.fromString=l;function d(g){return{id:g}}h.fromId=d;function p(g,v){let b=g.id,y=b.lastIndexOf("~");return y!==-1&&(b=b.substring(0,y)),v&&(b=`${b}~${v}`),{id:b}}h.modify=p;function f(g){let v=g.id.lastIndexOf("~");if(v!==-1)return g.id.substring(v+1)}h.getModifier=f;function m(g,v){return g.id===v.id&&g.color?.id===v.color?.id}h.isEqual=m})(Yw||={});var fK=new RegExp(`\\$\\(${Yw.iconNameExpression}(?:${Yw.iconModifierExpression})?\\)`,"g"),EQe=new RegExp(`(\\\\)?${fK.source}`,"g");function rTe(t){return t.replace(EQe,(e,r)=>r?e:`\\${e}`)}var Par=new RegExp(`\\\\${fK.source}`,"g");var kar=new RegExp(`(\\s)?(\\\\)?${fK.source}(\\s)?`,"g");var Dar=new RegExp(`\\$\\(${Yw.iconNameCharacter}+\\)`,"g");var CE=class{constructor(e="",r=!1){if(this.value=e,typeof this.value!="string")throw ci("value");typeof r=="boolean"?(this.isTrusted=r,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=r.isTrusted??void 0,this.supportThemeIcons=r.supportThemeIcons??!1,this.supportHtml=r.supportHtml??!1)}appendText(e,r=0){return this.value+=SQe(this.supportThemeIcons?rTe(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,r===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,r){return this.value+=`
${TQe(r,e)}
`,this}appendLink(e,r,n){return this.value+="[",this.value+=this._escape(r,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,r){let n=new RegExp(wS(r),"g");return e.replace(n,(i,o)=>e.charAt(o-1)!=="\\"?`\\${i}`:i)}};function SQe(t){return t.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function TQe(t,e){let r=t.match(/^`+/gm)?.reduce((i,o)=>i.length>o.length?i:o).length??0,n=r>=3?r+1:3;return[`${"`".repeat(n)}${e}`,t,`${"`".repeat(n)}`].join(`
`)}var mK=fe(fr()),nTe=fe(require("path"));async function Kw(t,e,r,n){let i=null,o=!1;i=setTimeout(()=>{o||t.report(e)},n);try{let s=await r;return o=!0,s}finally{i&&clearTimeout(i)}}var k5=class extends X{async prepare(r,n,i){if(!this.props.useTemplates)return{};if(!n)throw new Error("Progress is required");this._embeddingCompute??=this.accessor.get(Vi);let o=await this._embeddingCompute?.computeEmbeddings([this.props.query],void 0);if(!o)return{};let s=this.accessor.get(KR);n.report(new ws(mK.t("Searching project template index...")));let a=await s.nClosestValues(o[0],1,.8);if(a.length===0)return{};{let c=a[0]?.split(":"),u=c[0].trim(),l=c[1].trim(),d=c[2].trim()===""?".":c[2].trim();if(!u||!l||!d)return{};let p=this.accessor.get(al),f=await Kw(n,new ws(mK.t("Fetching project contents...")),p.getRepositoryItems(u,l,d),500),m;return d==="."?m=`httpx://github.com/${u}/${l}`:m=nTe.default.dirname(f[0]?.html_url),this._metadata=new Sy(u,l,d,f),{url:m}}}render(r){return vscpp(vscppf,null,this.props.history&&vscpp(vscppf,null,vscpp(zr,{priority:600,history:this.props.history.filter(n=>n.response?.name===hK&&n.request.type==="user")})),!this._metadata&&vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a VS Code assistant. Your job is to suggest a filetree directory structure for a project that a user wants to create. If a step does not relate to filetree directory structures, do not respond. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You should generate a markdown file tree structure for the same project and include it in your response.",vscpp("br",null),"You should only list common files for the user's desired project type.",vscpp("br",null),"You should always include a README.md file which describes the project.",vscpp("br",null),"Do not include folders and files generated after compiling, building or running the project such as node_modules, dist, build, out",vscpp("br",null),"Do not include image files such as png, jpg, ico, etc",vscpp("br",null),"Do not include any descriptions or explanations in your response.",vscpp("br",null),"If the user asks for a file content to be modified, respond with the same file tree structure and ask them to open the file to view the modifications.",vscpp("br",null),"Do not attempt to modify the file content your self and simply respond with the same file tree structure.",vscpp("br",null),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid setup question","","User: Create a TypeScript express app","Assistant:","","Sure, here's a proposed directory structure for a TypeScript Express app:","","```filetree","my-express-app","\u251C\u2500\u2500 src","\u2502   \u251C\u2500\u2500 app.ts","\u2502   \u251C\u2500\u2500 controllers","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u251C\u2500\u2500 routes","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u2514\u2500\u2500 types","\u2502       \u2514\u2500\u2500 index.ts","\u251C\u2500\u2500 package.json","\u251C\u2500\u2500 tsconfig.json","\u2514\u2500\u2500 README.md","```","","## Invalid setup question","","User: Create a horse project","Assistant: Sorry, I don't know how to set up a horse project."].join(`
`))),this._metadata&&vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a VS Code assistant. Your job is to format the given information as shown in the example below.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),"The current question is related to sample GitHub repositories.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"Use the URL provided to create the markdown link in your response",vscpp("br",null),"Please respond as shown below only if URL is provided in the context.",vscpp("br",null),"[Valid Example]:",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample",vscpp("br",null),"[Output]",vscpp("br",null),"Sure, here's a GitHub sample project to help you get started on creating a VSCode extension with a walkthrough contribution: [Walkthrough Sample](https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample)",vscpp("br",null),vscpp("br",null),"Please respond with NA as shown below if no URL is provided in the context.",vscpp("br",null),"[Invalid Example Input]: ",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: ",vscpp("br",null),"[Output] NA ",vscpp("br",null),vscpp("br",null),r.url&&vscpp(vscppf,null,"Below is the URL you should use as input",vscpp("br",null),"URL: ",r.url,vscpp("br",null)))),vscpp(ee,{priority:900},this.props.query),this._metadata&&vscpp(vscppf,null,vscpp("meta",{value:this._metadata})))}},Sy=class extends ec{constructor(r,n,i,o){super();this.org=r;this.repo=n;this.path=i;this.githubRepoItems=o}};(e=>{function t(r){return r instanceof e}e.is=t})(Sy||={});var D5=class extends X{render(){return vscpp(vscppf,null,this.props.history&&vscpp(L5,{messages:this.props.history}),vscpp(Ke,{priority:1e3},"You are a VS Code assistant. Your job is to generate the contents of a file in a project when given the user description, specification and tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and give me contents for just the file ",this.props.filePath," within this project. The code should not contain bugs.",vscpp("br",null),"If the user has asked for modifications to an existing file, please use the File path and File contents provided below if applicable.",vscpp("br",null),"If the file is supposed to be empty, please respond with a code comment saying that this file is intentionally left blank.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null)),this.props.relavantFiles&&this.props.relavantFiles.size>0&&vscpp(vscppf,null,vscpp(ee,{priority:500},"Below, you will find a list of file paths and their contents previously used",vscpp("br",null),Array.from(this.props.relavantFiles).map(([e,r])=>`File path: ${e}
File contents: ${r}
`).join(`
`))),vscpp(ee,{priority:900},"Generate the contents of the file: ",this.props.filePath," ",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`filetree' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"The project should adhere to the following specification:",vscpp("br",null),this.props.projectSpecification,vscpp("br",null)))}},N5=class extends X{render(){return vscpp(vscppf,null,this.props.history&&vscpp(L5,{messages:this.props.history}),vscpp(Ke,{priority:1e3},"You are a VS Code assistant. Your job is to generate the project specification when given the user description and file tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and respond with a text description that lists and summarizes each file inside this project.",vscpp("br",null),"List the classes, types, interfaces, functions, and constants it exports and imports if it is a code file.",vscpp("br",null),"Consider filenames and file extensions when determining the programming languages used in the project. List any special configurations or settings required for configuration files such as package.json or tsconfig.json to help compile the project successfully",vscpp("br",null),"You should be as specific as possible when listing the public properties and methods for each exported class.",vscpp("br",null),"Do not use code blocks or backticks. Do not include any text before or after the file contents.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Valid question",vscpp("br",null),"User: I want to set up the following project: Create a TypeScript Express app",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown ",vscpp("br",null),"my-express-app",vscpp("br",null),"\u251C\u2500\u2500 src",vscpp("br",null),"\u2502   \u251C\u2500\u2500 app.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 controllers",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 routes",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u2514\u2500\u2500 types",vscpp("br",null),"\u2502       \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u251C\u2500\u2500 package.json",vscpp("br",null),"\u251C\u2500\u2500 tsconfig.json",vscpp("br",null),"\u2514\u2500\u2500 README.md",vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"## Valid response",vscpp("br",null),"Assistant: The project has the following files:",vscpp("br",null),"\\`src/app.ts\\`: This file is the entry point of the application. It creates an instance of the express app and sets up middleware and routes.",vscpp("br",null),"\\`src/controllers/index.ts\\`: This file exports a class \\`IndexController\\` which has a method \\`getIndex\\` that handles the root route of the application.",vscpp("br",null),"\\`src/routes/index.ts\\`: This file exports a function \\`setRoutes\\` which sets up the routes for the application. It uses the \\`IndexController\\` to handle the root route.",vscpp("br",null),"\\`src/types/index.ts\\`: This file exports interfaces \\`Request\\` and \\`Response\\` which extend the interfaces from the \\`express\\` library.",vscpp("br",null),"\\`tsconfig.json\\`: This file is the configuration file for TypeScript. It specifies the compiler options and the files to include in the compilation.",vscpp("br",null),"\\`package.json\\`: This file is the configuration file for npm. It lists the dependencies and scripts for the project.",vscpp("br",null),"\\`README.md\\`: This file contains the documentation for the project.",vscpp("br",null)),vscpp(ee,{priority:900},"I want to set up the following project: ",this.props.query,vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null)))}},L5=class extends X{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(ee,{priority:600},i.content));break;case"assistant":n.push(vscpp(tc,{priority:800},i.content));break;default:break}return vscpp(vscppf,null,n)}};var O5=class{constructor(e,r){this.accessor=e;this.promptType=r;this.logger=e.get(pe).getPromptResponseLogger(this.constructor.name),this.options=e.get(ns)}async generate(e,r){let n=await this.accessor.get(Ye).getUserRequestEndpoint(3),o=await new mt(this.accessor,n,this.promptType,e,this.accessor.get(we)).render(),s=await this.accessor.get(sr).fetchOne(o.messages,void 0,r,3,n,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:typeof this.promptType});return this.logger.logResponse(s),s.type==="success"?e.filePath?this.parseContents(e.filePath,s.value):s.value:""}},M5=class extends O5{constructor(e){super(e,N5)}parseContents(e,r){throw new Error("Method not implemented.")}},F5=class extends O5{constructor(e){super(e,D5)}parseContents(e,r){function n(i,o){try{let s=o.exec(i.trim());if(s&&s.length>2)return s[2]}catch(s){console.error(s)}return i}if(e.endsWith(".md")){let i=n(r,/^```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/),[o,...s]=i.split("#");return o.length?["",...s].join("#"):i}else return n(r,/```([^\n]+)?\s*\n([\s\S]+?)\s*```/g)}};var Sd=re("INewWorkspacePreviewContentManager"),IE=class{constructor(e){this.responseScopedData=new Map;this.prevFileContents=new Map;this.copilotContentManager=new gK(e),this.githubContentManager=new vK(e)}set(e,r,n,i){this.responseScopedData.set(e,n),_K(n.baseUri)?this.githubContentManager.set(e,r,n,i):this.copilotContentManager.set(e,r,n,i)}get(e){this.prevResponseId!==e.authority&&(this.prevFileContents.clear(),this.prevResponseId=e.authority);let r;return _K(e)?r=this.githubContentManager.get(e.authority,e.path):r=this.copilotContentManager.get(e.authority,e.path),r?.content?.then(n=>{if(this.prevFileContents.has(e.path))return;let o=new TextDecoder().decode(n);this.prevFileContents.set(e.path,o)}),r}getFileTree(e){return this.responseScopedData.get(e)}getFileContentsFromPrevHistory(){return this.prevFileContents}};IE=ze([rt(0,Yt)],IE);var gK=class{constructor(e){this.accessor=e;this.promises=[];this.responseScopedData=new Map;this.generatePlanPrompt=new M5(this.accessor);this.generateFilePrompt=new F5(this.accessor)}set(e,r,n,i){let{userPrompt:o,projectStructure:s,chatMessages:a}=i,c={query:o,fileTreeStr:s,history:a},u=this.generatePlanPrompt.generate(c,Gr.None);this.promises.push(u);let l=this._getResponseScopedData(e),d={userPrompt:o,projectSpecification:u,projectStructure:s,fileTree:n,chatMessages:a};l.set(r,d)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,c=oTe(a,i);if(c&&!c?.content){let u=c;u.content=this._getFileContent(s.userPrompt,s.projectStructure,s.projectSpecification,r,s.chatMessages).catch(()=>u.content=void 0)}return c}_prefetch(e,r,n,i,o){let s=Date.now();return i.children?{...i,type:2,children:i.children.map(a=>this._prefetch(e,r,n,a,o)),ctime:s}:{...i,type:1,content:void 0,ctime:s}}async _getFileContent(e,r,n,i,o){let s=this.accessor.get(Sd).getFileContentsFromPrevHistory(),a={query:e,fileTreeStr:r,filePath:i,projectSpecification:await n,history:o,relavantFiles:s.has(i)?new Map([[i,s.get(i)]]):void 0};return this.generateFilePrompt.generate(a,Gr.None).then(c=>Buffer.from(c))}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}},vK=class{constructor(e){this.responseScopedData=new Map;this.repositoryService=e.get(al)}set(e,r,n,i){let o=i,s=this._getResponseScopedData(e),a={...o,fileTree:n};s.set(r,a)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,c=oTe(a,i);if(c&&!c?.content&&!c?.children){let u=c,l=s.path==="."?iTe.relative(s.repo,r):r.slice(1);u.content=this.repositoryService.getRepositoryItemContent(s.org,s.repo,l).catch(()=>u.content=void 0)}return c}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}};function oTe(t,e){let r;for(let n of e)r?r.children&&(r=r.children.find(i=>i.name===n)??r):r=t.find(i=>i.name===n);return r}var hK="new",U5=class{constructor(){this.id="new";this.locations=[2];this.description=Cg.t("Scaffold code for a new workspace");this.intentDetectionInput={modelDescription:"Scaffolds a new project from scratch based on requirements from the user.",sampleQuestion:"Create a RESTful API server using typescript"};this.commandInfo={followupPlaceholder:"Provide additional instructions to refine the proposed workspace",shouldRepopulate:!0,allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:Cg.t("Create a RESTful API server using typescript")}}static{this.ID="new"}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return new yK(e,this,o,i)}async asSlashCommand(e,r){return{command:this.id,detail:this.description}}};function sTe(t){return{command:"github.copilot.createProject",arguments:[t],title:Cg.t("Create Workspace")}}var yK=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.commands=async(e,r)=>{let n=e.get(pe).getPromptResponseLogger("new");if(!r.response?.message||!r.requestId)return[];let i=e.get(Sd).getFileTree(r.requestId);return i?_K(i.baseUri)?[]:[sTe(i)]:(n.info("[workspaceIntent] Failed to fetch project items."),[])};let o=this;this.promptCrafter=new class{async getShouldUseProjectTemplate(a){let c=a.get(Re).getConfig(ke.UseProjectTemplates);return c!==void 0?c:await a.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.useProjectTemplates",!0)?(await a.get(kt).getCopilotToken(a)).public_suggestions!=="enabled":!1}async buildPrompt(a,c,u,l,d,p){let f=a.getLatestTurn(),m=f.request.message,h=a.turns.length>1?a.turns.slice(0,-1):[],g=h[h.length-1]?.request?.message!==f.request.message&&await this.getShouldUseProjectTemplate(e),v=new mt(e,c,k5,{useTemplates:g,query:m,history:h},e.get(we)),b=await v.render(l,p),y=v.getMeta(Sy);return y&&(o.githubContentMetadata=y),b}}}get responseProcessor(){return new bK(this.accessor,this.githubContentMetadata)}};function CQe(t){let e=(t.match(/   /g)||[]).length;return e+=(t.match(/\|   /g)||[]).length,e+=(t.match(/    /g)||[]).length,e+=(t.match(/ /g)||[]).length,e+=(t.match(/ /g)||[]).length,e}var IQe=["node_modules","out","bin","debug","obj","lib",".dll",".pdb",".lib",".jpg",".png",".ico",".gif",".svg",".jpeg",".tiff",".bmp",".webp",".jpeg",".gitignore","LICENSE.txt","yarn.lock","package-lock.json"];function aTe(t){let e=[];for(let r of t)wQe(r)||(r.children&&(r.children=aTe(r.children)),e.push(r));return e}function wQe(t){return!!IQe.includes(t.name)}function RQe(t,e){let r=e.trim().split(`
`),n=[],i,o={name:"",children:[]};n[0]=o;for(let a of r){let c=CQe(a),u=a.lastIndexOf("\u2500\u2500 "),l=u>=0?a.substring(u+3):a,d={name:l};if(c===0){i=cTe(t,l),o.name=l;continue}else{for(;c>0&&n[c-1]===void 0;)c--;n[c-1].children===void 0?n[c-1].children=[d]:n[c-1].children?.push(d),n[c]=d}}if(i===void 0)throw new Error("Base URI is undefined");let s=aTe(o.children);return s=s.sort((a,c)=>a.children&&!c.children?-1:1),{chatResponseTree:new $S(s,i),projectName:o.name}}function AQe(t,e,r){let n;r?n=t.map(u=>[e.path,u.path].join("/")):n=t.map(u=>u.path);let i=n[0].split("/")[0],o={name:i,children:[]},s={rootName:o};for(let u of n){let l=u.split("/"),d=i,p=o;for(let f=1;f<l.length;f++){let m=l[f];if(d+=`/${m}`,!s[d]){let h={name:m};p.children===void 0&&(p.children=[]),p.children.push(h),s[d]=h}p=s[d]}}let a;r?a=o.children?.[0].children??[]:a=o.children??[];let c=a?.sort((u,l)=>u.children&&!l.children?-1:1)??[];return new $S(c,e)}var xK="vscode-copilot-workspace",EK="vscode-copilot-github-workspace";function cTe(t,e,r=!1){return Is.from({scheme:r?EK:xK,authority:t??"",path:e?`/${e}`:void 0})}var bK=class{constructor(e,r){this.accessor=e;this.githubContentMetadata=r;this._appliedText="";this._p=Promise.resolve("")}async processResponse(e,r,n,i,o){let s=!1,a="",c=/```filetree\n/,u=r.filter(d=>d.role!=="system"),l=!1;for await(let{delta:d}of n){if(o.isCancellationRequested)break;let p=d.text;this._p=this._p.then(async()=>{let f=e.requestId??"";if(e.response||(e.response={message:this._appliedText,type:"model"}),!p)return this._appliedText;if(e.response.message+=p,this._appliedText+=p,this.githubContentMetadata)this._appliedText.split(`
`).length<3&&i.markdown(p);else{let m=e.request.message,h=this._appliedText.match(/```filetree\n([\s\S]+?)\n```/);if(h&&(s||!l)){s=!1;let[g,v]=this._appliedText.split(h[0]);l||i.markdown(g),a=h[1];let{chatResponseTree:b,projectName:y}=RQe(f,a);i.progress(Cg.t("Generating workspace preview...")),i.push(b),i.markdown(v),this.accessor.get(Sd).set(f,y,b,{userPrompt:m,projectStructure:a,chatMessages:u})}else if(this._appliedText.match(c)&&!s&&!h){s=!0;let[g,v]=this._appliedText.split(c);a+=v,i.progress(Cg.t("Generating workspace preview..."))}else s?a+=p:!s&&!this._appliedText.match(/```/)&&(l=!0,i.markdown(p))}return this._appliedText})}if(await this._p,e.requestId&&this.githubContentMetadata&&this.githubContentMetadata.org&&this.githubContentMetadata.repo&&this.githubContentMetadata.path&&this.githubContentMetadata.githubRepoItems&&!this.accessor.get(Sd).getFileTree(e.requestId)){i.progress(Cg.t("Generating workspace preview..."));let d=this.githubContentMetadata.path===".",p=d?this.githubContentMetadata.repo:this.githubContentMetadata.path.split("/")[0],f=AQe(this.githubContentMetadata.githubRepoItems,cTe(e.requestId,p,!0),d);i.push(f),i.button(sTe(f)),this.accessor.get(Sd).set(e.requestId,p,f,this.githubContentMetadata);let m=encodeURIComponent(`["@workspace /${hK} ${e.request.message}"]`),h=new CE(Cg.t("Hint: You can [regenerate this project without using this sample](command:workbench.action.chat.open?{0}) or use this [setting](command:workbench.action.openSettings?%5B%22github.copilot.chat.useProjectTemplates%22%5D) to configure the behavior.",m));h.isTrusted={enabledCommands:["workbench.action.openSettings","workbench.action.chat.open"]},i.markdown(h)}return this._appliedText}};function _K(t){return t.scheme==="vscode-copilot-github-workspace"}var xo=require("vscode"),Qw=class{constructor(e){this.contentManager=e;this._onDidChangeFile=new xo.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event}async stat(e){let r=this.contentManager.get(e);if(!r)throw xo.FileSystemError.FileNotFound(e);let n=await r.content?.then(i=>i?.length)??0;return{ctime:r.ctime??0,mtime:r.ctime??0,size:n,type:r.children?xo.FileType.Directory:xo.FileType.File,permissions:xo.FilePermission.Readonly}}readDirectory(e){let r=this.contentManager.get(e);if(!r)throw xo.FileSystemError.FileNotFound(e);return r.children?.map(n=>[n.name,n.children?xo.FileType.Directory:xo.FileType.File])??[]}async readFile(e){let r=this.contentManager.get(e);if(!r)throw xo.FileSystemError.FileNotFound(e);let n;try{n=await r.content}catch{}return n??new Uint8Array}watch(e,r){return{dispose(){}}}createDirectory(e){throw xo.FileSystemError.NoPermissions(e)}writeFile(e,r,n){throw xo.FileSystemError.NoPermissions(e)}delete(e,r){throw xo.FileSystemError.NoPermissions(e)}rename(e,r,n){throw xo.FileSystemError.NoPermissions(r)}copy(e,r,n){throw xo.FileSystemError.NoPermissions(r)}};function dTe(t,e){return St.Disposable.from(St.workspace.registerFileSystemProvider(xK,new Qw(t.get(Sd)),{isReadonly:new St.MarkdownString(St.l10n.t(`This file preview was generated by Copilot and may contain surprises or mistakes.

Ask followup questions to refine it, then press Create Workspace.`))}),St.workspace.registerFileSystemProvider(EK,new Qw(t.get(Sd)),{isReadonly:!0}),St.commands.registerCommand("github.copilot.createProject",async r=>{let n=t.get(B5).getLastInteractiveSession(),i=(await St.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select as Parent Folder"}))?.[0];if(!i)return;let o=r.baseUri.path,s=await PQe(i,o),a=[];St.window.tabGroups.all.forEach(u=>{u.tabs.forEach(l=>{l.input instanceof St.TabInputText&&l.input.uri.scheme==="vscode-copilot-workspace"&&a.push(l)})}),St.window.tabGroups.close(a,!0);let c=St.Uri.joinPath(i,s);try{await St.window.withProgress({location:St.ProgressLocation.Notification,cancellable:!0},async(u,l)=>{await St.workspace.fs.createDirectory(c);async function d(p,f,m){let h=St.Uri.joinPath(c,p,f.name);if(f.children?.length||!zSe(f.name)){u.report({message:St.l10n.t("Creating folder {0}...",h.path)}),await St.workspace.fs.createDirectory(h);for(let g of f.children??[])await d(uTe.posix.join(p,f.name),g,m)}else{u.report({message:St.l10n.t("Creating file {0}...",h.path)});let g=await St.workspace.fs.readFile(St.Uri.joinPath(m,p,f.name));await St.workspace.fs.writeFile(h,Buffer.from(g))}}for(let p of r.value)await d("",p,r.baseUri);n!==void 0&&St.interactive.transferChatSession(n,c),t.get(pe).getLogger("newIntent").info("Opening folder: "+c.fsPath),await DQe(c),await St.commands.executeCommand("vscode.openFolder",c)})}catch(u){let l=`Failed to create workspace: ${s}`;t.get(pe).getLogger("newIntent").error(`${l}
${u.message}`),St.window.showErrorMessage(l),await St.workspace.fs.delete(c,{recursive:!0})}}))}async function PQe(t,e){let r=0,n=!0,i=e;for(;n;)try{await St.workspace.fs.stat(St.Uri.joinPath(t,i)),i=e+"-"+ ++r}catch{n=!1}return i}async function kQe(t){try{return await St.workspace.fs.stat(t),!0}catch{return!1}}async function DQe(t){let e=NQe();if(e)if(await kQe(e)){let r=await St.workspace.fs.readFile(e).then(i=>new lTe.TextDecoder().decode(i)),n=JSON.parse(r);n.push(t.toString()),await St.workspace.fs.writeFile(e,Buffer.from(JSON.stringify(n,null,2)))}else await St.workspace.fs.writeFile(e,Buffer.from(JSON.stringify([t.toString()],null,2)))}function NQe(){let t=St.env.appName.indexOf("Insider")>0||St.env.appName.indexOf("Code - OSS Dev")>=0?"Code - Insiders":"Code",e=St.Uri.file(process.env.HOME||(process.env.USERPROFILE?process.env.USERPROFILE:""));switch(process.platform){case"darwin":return St.Uri.joinPath(e,"Library","Application Support",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"linux":return St.Uri.joinPath(e,".config",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"win32":return process.env.APPDATA?St.Uri.joinPath(St.Uri.file(process.env.APPDATA),t,"User","workspaceStorage","aiGeneratedWorkspaces.json"):void 0;default:return}}async function pTe(t,e){let r=t.get(It),n=t.get(Po),i=t.get(oo),o=t.get(it),s=t.get(ho),a=t.get(db),c=t.get(ui),u=o.getWorkspaceFolders().map(v=>v.fsPath+"/"),l=o.notebookDocuments.map(v=>v.uri.fsPath),p=(await Promise.all(e.map(v=>i.getWorkspaceSymbols(v)))).flat().map(v=>({name:v.name,kind:v.kind,containerName:v.containerName,filePath:v.location.uri.fsPath,start:v.location.range.start,end:v.location.range.end})),f=r.activeTextEditor?n.getDiagnostics(r.activeTextEditor.document.uri).map(v=>({start:v.range.start,end:v.range.end,message:v.message,severity:v.severity,relatedInformation:v.relatedInformation?.map(LQe)})):[],m=r.activeTextEditor?{selections:r.activeTextEditor?.selections.map(v=>({anchor:v.anchor,active:v.active,isReversed:v.isReversed}))??[],documentFilePath:r.activeTextEditor?.document.uri.fsPath??"",visibleRanges:r.activeTextEditor?.visibleRanges.map(v=>({start:v.start,end:v.end}))??[],languageId:r.activeTextEditor?.document.languageId??"javascript"}:void 0,h=s.terminalLastCommand?{commandLine:s.terminalLastCommand.commandLine,cwd:typeof s.terminalLastCommand.cwd=="object"?s.terminalLastCommand.cwd.toString():s.terminalLastCommand.cwd,exitCode:s.terminalLastCommand.exitCode,output:s.terminalLastCommand.output}:void 0;return{workspaceFoldersFilePaths:u,symbols:p,activeFileDiagnostics:f,activeTextEditor:m,debugConsoleOutput:a.consoleOutput,terminalBuffer:s.terminalBuffer,terminalLastCommand:h,terminalSelection:s.terminalSelection,terminalShellType:s.terminalShellType,repoContexts:c.repositories,notebookDocumentFilePaths:l}}function LQe(t){return{filePath:t.location.uri.fsPath,start:t.location.range.start,end:t.location.range.end,message:t.message}}var B5=re("IConversationFeature"),wE=class{constructor(e){this.accessor=e;this._disposables=new Vt;this._activatedDisposables=new Vt;if(this.logger=e.get(pe).getLogger("chat"),this._enabled=!1,this._activated=!1,le.interactive?._version!==1){this.logger.warn("Not activating ConversationFeature- api version mismatch");return}this.registerCopilotTokenListener(e),this._disposables.add(le.authentication.onDidChangeSessions(async r=>{if(!r0(r,this.accessor.get(Re)))return;let i=await FR(r,this.accessor);this.logger.debug("onDidChangeSessionsHandler",i),i?this.activated=!0:this.activated=!1}))}get enabled(){return this._enabled}set enabled(e){e&&!this.activated&&(this.activated=!0),this._enabled=e,le.commands.executeCommand("setContext","github.copilot.interactiveSession.disabled",!e)}get activated(){return this._activated}set activated(e){if(this._activated!==e)if(this._activated=e,le.commands.executeCommand("setContext","github.copilot.activated",e),!e)this._activatedDisposables.clear();else{let r=this.accessor.get(ns);this._activatedDisposables.add(this.registerProviders(r)),this._activatedDisposables.add(this.registerCommands(r)),this._activatedDisposables.add(this.registerRelatedInformationProviders()),this.checkVSCodeVersion()&&this._activatedDisposables.add(this.registerParticipants(r))}}checkVSCodeVersion(){return!le.chat.createChatParticipant||!le.chat.registerChatVariableResolver?(le.window.showErrorMessage("VS Code MUST be updated to use Copilot Chat!"),!1):!0}getLastInteractiveSession(){return this.interactiveSessionProvider?.getLastSession()}dispose(){this._activated=!1,this._activatedDisposables.dispose(),this._disposables?.dispose()}[Symbol.dispose](){this.dispose()}registerParticipants(e){return this.accessor.get(BR).register(e)}registerProviders(e){let r=new Vt;try{this.interactiveSessionProvider=new qO(this.accessor,e),r.add(le.interactive.registerInteractiveSessionProvider("copilot",this.interactiveSessionProvider)),this.interactiveEditorSessionProvider=new n5(this.accessor,e.rejectionMessage),r.add(le.interactive.registerInteractiveEditorSessionProvider(this.interactiveEditorSessionProvider,{supportReportIssue:this.accessor.get(Re).getConfig(ke.DebugReportFeedback)})),r.add({dispose:()=>{this.interactiveEditorSessionProvider=void 0,this.interactiveSessionProvider=void 0}}),"registerMappedEditsProvider"in le.chat&&r.add(le.chat.registerMappedEditsProvider("*",new R5)),"registerNewSymbolNamesProvider"in le.languages&&r.add(le.languages.registerNewSymbolNamesProvider({language:"*"},new EE(this.accessor))),r.add(le.workspace.registerAITextSearchProvider("file",new C5(this.accessor)))}catch(n){this.logger.error("Registration of interactive providers failed:",n.toString())}return r}registerCommands(e){let r=new Vt,n=o=>"body"in o&&(o.body instanceof le.MarkdownString||typeof o.body=="string"),i=o=>"range"in o&&o.range instanceof le.Range;return[le.commands.registerCommand("github.copilot.interactiveSession.feedback",async()=>le.env.openExternal(le.Uri.parse(HO()))),le.commands.registerCommand("github.copilot.ghpr.applySuggestion",async(o,s)=>{if(!n(o)||!i(s))return;let a=o.body instanceof le.MarkdownString?o.body.value:o.body;await le.commands.executeCommand("vscode.editorChat.start",{initialRange:s.range,message:a,autoSend:!0})}),le.commands.registerCommand("github.copilot.debug.workbenchState",async()=>{let o=await le.window.showInputBox({prompt:"Enter a comma-separated list of symbol queries. Can be left blank if not using WorkspaceSymbols"}),s=await le.window.showInputBox({prompt:"Enter a file name - .state.json will be appended as the extension",value:"workspaceState"});if(!s)return;let a=await pTe(this.accessor,o?.split(",")??[]),c=le.workspace.workspaceFolders?.[0].uri;if(!c)return;let u=le.Uri.joinPath(c,`${s}.state.json`),l=JSON.stringify(a,null,2);l=l.replace(new RegExp(`${c.fsPath}/`,"g"),"./"),le.workspace.fs.writeFile(u,Buffer.from(l))}),le.commands.registerCommand("github.copilot.terminal.explainTerminalSelection",async()=>this.triggerTerminalChat({query:`/${Ey.intentName} #terminalSelection`})),le.commands.registerCommand("github.copilot.terminal.explainTerminalSelectionContextMenu",()=>le.commands.executeCommand("github.copilot.terminal.explainTerminalSelection")),le.commands.registerCommand("github.copilot.terminal.explainTerminalLastCommand",async()=>this.triggerTerminalChat({query:`/${Ey.intentName} #terminalLastCommand`})),le.commands.registerCommand("github.copilot.terminal.suggestCommand",async()=>this.triggerTerminalChat({query:"",isPartialQuery:!0})),le.commands.registerCommand("github.copilot.terminal.generateCommitMessage",async()=>{let o=le.workspace.workspaceFolders;if(!o?.length)return;let s=o.length===1?o[0].uri:await le.window.showWorkspaceFolderPick().then(l=>l?.uri);if(!s)return;let a=this.accessor.get(VS),c=a.getRepository(s);if(!c)return;let u=await a.generateCommitMessage(c,Gr.None);if(u){let d=`git commit -m "${u.replace(/"/g,'\\"').replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}"`;le.window.activeTerminal?.sendText(d,!1)}}),le.commands.registerCommand("github.copilot.git.generateCommitMessage",async(o,s,a)=>{let c=this.accessor.get(VS),u=c.getRepository(o);if(!u)return;let l=await c.generateCommitMessage(u,a);l&&(u.inputBox.value=l)}),le.commands.registerCommand("github.copilot.devcontainer.generateDevContainerConfig",async(o,s=new le.CancellationTokenSource().token)=>this.accessor.get(VR).generateConfiguration(o,s)),le.commands.registerCommand(Hw,async o=>{this.accessor.get(Ne).sendMSFTTelemetryEvent("panel.action.filelink");let s=le.workspace.workspaceFolders?.[0].uri;if(!s)return;let a=typeof o=="string"?le.Uri.joinPath(s,o):le.Uri.from(o);if(await c(a))await le.commands.executeCommand("revealInExplorer",a);else return le.commands.executeCommand("vscode.open",a);async function c(u){if(u.path.endsWith("/"))return!0;try{return(await le.workspace.fs.stat(u)).type===le.FileType.Directory}catch{return!1}}}),le.commands.registerCommand(jw,async(o,s,a)=>{if(a??=le.workspace.workspaceFolders?.[0].uri,!a)return;let c=le.Uri.joinPath(a,o),u=await le.commands.executeCommand("vscode.executeDocumentSymbolProvider",c);if(u){let l=fTe(u,s);if(this.accessor.get(Ne).sendMSFTTelemetryEvent("panel.action.symbollink",{},{hadMatch:l?1:0}),l){let d=l instanceof le.SymbolInformation?l.location.range:l.selectionRange;return le.commands.executeCommand("vscode.open",c,{selection:new le.Range(d.start,d.start)})}}return le.commands.executeCommand("vscode.open",c)}),PSe((o,s,a)=>{let c=/(?<!\[)`([^`\s]+)`(?!\])/g;return new class{constructor(){this.fileSymbols=new Ao(async()=>{let l=new Y2;for(let p of o){let f;if("variableName"in p.anchor){if(!p.anchor.value)continue;f=p.anchor.value}else f=p.anchor;l.add(bSe(f)?f:f.uri)}let d=new mn;return await Promise.all(Array.from(l,async p=>{let f=await Vd(Promise.resolve(le.commands.executeCommand("vscode.executeDocumentSymbolProvider",p)),5e3);f&&d.set(p,f)})),d});this.resolvedSymbols=new Map}async linkify(l,d){if(!s.length)return l;let p=new Set;for(let[f,m]of l.matchAll(c))this.resolvedSymbols.has(m)||p.add(m);if(p.size){let f=await this.fileSymbols.value;if(d?.isCancellationRequested)return l;for(let m of p){let h;for(let[g,v]of f){let b=v&&fTe(v,m);if(b){h=b instanceof le.SymbolInformation?b.location:new le.Location(g,b.range);break}}this.resolvedSymbols.set(m,h)}}return l.replace(c,(f,m)=>{let h=this.resolvedSymbols.get(m);if(h){let g=fee(s[0],h.uri);if(g)return QY(m,g)}return f})}}}),USe(this.accessor),this.registerTerminalQuickFixProviders(),OQe(this.accessor,e),dTe(this.accessor,e),FQe(this.accessor),ySe(this.accessor),MQe(),HSe(this.accessor)].forEach(o=>r.add(o)),r}async triggerTerminalChat(e){let i=this.accessor.get(Re).getConfig(ke.TerminalChatLocation)==="quickChat"?"workbench.action.quickchat.toggle":"workbench.action.chat.open";e.query=`@${qR} `+e.query,await le.commands.executeCommand(i,e)}registerRelatedInformationProviders(){let e=new Vt;return[le.ai.registerRelatedInformationProvider(le.RelatedInformationType.CommandInformation,this.accessor.get(Kd).commandIdIndex),le.ai.registerRelatedInformationProvider(le.RelatedInformationType.SettingInformation,this.accessor.get(Kd).settingsIndex)].forEach(r=>e.add(r)),e}registerCopilotTokenListener(e){this._disposables.add(e.get(rs).onCopilotToken(r=>{this.logger.info(`copilot token chat_enabled: ${r.envelope.chat_enabled}`),this.enabled=r.envelope.chat_enabled??!1}))}registerTerminalQuickFixProviders(){let e=new Vt;return e.add(le.window.registerTerminalQuickFixProvider("copilot-chat.fixWithCopilot",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.explainTerminalLastCommand",title:le.l10n.t("Explain using Copilot")}]:[]})),e.add(le.window.registerTerminalQuickFixProvider("copilot-chat.generateCommitMessage",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.generateCommitMessage",title:le.l10n.t("Generate Commit Message")}]:[]})),e}};wE=ze([rt(0,Yt)],wE);function OQe(t,e){let r=t.get(Re);return le.commands.registerCommand("github.copilot.newNotebook",async n=>{let i=r.getConfig(ke.NotebookIterativeImproving);await le.window.withProgress({location:le.ProgressLocation.Notification},async o=>{let s=new le.NotebookData([]);s.metadata={custom:{cells:[],metadata:{orig_nbformat:4},nbformat:4,nbformat_minor:2}};let a=await le.workspace.openNotebookDocument("jupyter-notebook",s),c=await le.window.showNotebookDocument(a);o.report({message:le.l10n.t("Generating notebook...")});let u=n.outline.description,l=n.outline.sections,d=await t.get(Ye).getUserRequestEndpoint(2);for(let p of l){let f=c.notebook.getCells().filter(x=>x.kind===le.NotebookCellKind.Code).map(x=>x.document.getText()).join(`
`),m=new le.CancellationTokenSource;o.report({message:le.l10n.t('Generating section "{0}"...',p.title)});let h=await BSe(t,d,e,n.turn,u,p,f,m.token);if(!h)return;h=h.trim();let g=/```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/.exec(h);if(g&&g.length>2&&(h=g[2]),i){o.report({message:le.l10n.t('Improving code for section "{0}"...',p.title)});let x=await qSe(t,d,e,u,p,f,h,m.token);if(!x)return;h=x}let v=new le.NotebookCellData(le.NotebookCellKind.Markup,`# ${p.title}
${p.content}`,"markdown"),b=new le.NotebookCellData(le.NotebookCellKind.Code,h,"python"),y=le.NotebookEdit.insertCells(a.cellCount,[v,b]),E=new le.WorkspaceEdit;E.set(a.uri,[y]),await le.workspace.applyEdit(E),c.revealRange(new le.NotebookRange(a.cellCount-1,a.cellCount),le.NotebookEditorRevealType.Default),c.selection=new le.NotebookRange(a.cellCount-1,a.cellCount)}o.report({increment:100})})})}function MQe(){return le.commands.registerCommand("github.copilot.executeSearch",async t=>{let e=t.filesToExclude.length>0||t.filesToInclude.length>0;le.commands.executeCommand("workbench.view.search.focus").then(()=>le.commands.executeCommand("workbench.action.search.toggleQueryDetails",{show:e})),le.commands.executeCommand("workbench.action.findInFiles",t)})}function FQe(t){return new w5(t)}function q5(t,e){if(!e.length)return;let r;for(let n of t)if(n.children){let i=n.name===e[0]?{symbol:n,matchCount:1}:void 0;if(i){let a=q5(n.children,e.slice(1));a&&(i={symbol:a.symbol,matchCount:i.matchCount+a.matchCount})}let o=q5(n.children,e),s;i&&o?s=i.matchCount>=o.matchCount?i:o:s=i??o,s&&(!r||s.matchCount>r?.matchCount)&&(r=s)}else n.name===e[0]&&(r??={symbol:n,matchCount:1});return r}function fTe(t,e){function r(n){return Array.from(n.matchAll(/[#\w$][\w\d$]*/g),i=>i[0])}return(q5(t,[e])??q5(t,r(e)))?.symbol}var H5=fe(require("vscode"));var SK="---------------------------------",RE=class{constructor(e){this.accessor=e}async _canReport(){return!(!this.accessor.get(Re).getConfig(ke.DebugReportFeedback)||!(await this.accessor.get(kt).getCopilotToken(this.accessor))?.isInternal)}async reportInline(e,r,n){if(!await this._canReport())return;let i=e.getLatestTurn();if(!i)return;let o=r.intent?this._embedCodeblock("INTENT",JSON.stringify(r.intent,null,"	")):"",s=this._embedCodeblock("CONTEXT",JSON.stringify({document:r.document.uri.toString(),fileIndentInfo:r.fileIndentInfo,language:r.language,wholeRange:r.wholeRange,selection:r.selection},null,"	")),a="",c=i.chatMessages;if(c&&c.length>0){let f=c.map(m=>this._embedCodeblock(m.role.toUpperCase(),m.content)).join(`
`);a=`	${SK}
${this._headerSeparator()}PROMPT MESSAGES:
${f}`}else a=this._embedCodeblock(i.request.type.toUpperCase(),i.request.message);let u=this._embedCodeblock("ASSISTANT",i.response?.message||""),l=this._embedCodeblock("Parsed response",JSON.stringify(n,null,"	")),p=`
<details><summary>Prompt Details</summary>
<p>

${`${o}
${s}
${a}
${u}
${l}
`}

</p>
</details>
`;await this._reportIssue("Feedback for inline chat",p)}async reportChat(e){if(!await this._canReport())return;let r="",n=e.chatMessages;if(n&&n.length>0){let c=n.map(u=>this._embedCodeblock(u.role.toUpperCase(),u.content)).join(`
`);r=`	${SK}
${this._headerSeparator()}PROMPT MESSAGES:
${c}`}else r=this._embedCodeblock(e.request.type.toUpperCase(),e.request.message);let i=e.intentInvocation?.intent?this._embedCodeblock("INTENT",`[${e.intentInvocation.intent.id}] ${e.intentInvocation.intent.description}`):"",o=this._embedCodeblock("ASSISTANT",e.response?.message||""),a=`
<details><summary>Prompt Details</summary>
<p>

${`${i}
${r}
${o}
`}

</p>
</details>`;await this._reportIssue("Feedback for sidebar chat",a)}_embedCodeblock(e,r){let n=this._bodySeparator()+r.split(`
`).join(`
${this._bodySeparator()}`);return`	${SK}
${this._headerSeparator()}${e}:
${n}`}_headerSeparator(){return"	"}_bodySeparator(){return"		"}async _reportIssue(e,r){await H5.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:"GitHub.copilot-chat",issueTitle:e,data:r,issueBody:"",uri:H5.Uri.parse("https://github.com/microsoft/vscode-copilot")})}};RE=ze([rt(0,Yt)],RE);var G5=fe(require("vscode"));var AE=fe(require("vscode"));var j5=class extends X{render(){let e=[],r=[];for(let n of this.props.messages)n instanceof AE.LanguageModelSystemMessage?e.push(n.content):n instanceof AE.LanguageModelAssistantMessage?r.push(vscpp(tc,null,n.content)):n instanceof AE.LanguageModelUserMessage&&r.push(vscpp(ee,{name:n.name},n.content));return vscpp(vscppf,null,vscpp(Ke,null,this.props.noSafety?e:vscpp(vscppf,null,vscpp(vg,null),vscpp(xi,null),vscpp("br",null),e.join(`
`))),r)}};async function mTe(t){let e=t.get(Vy),r=t.get(Re),n=t.get(Ye),i=t.get(pe).getLogger("registerChatResponseProvider"),{extensionMode:o,subscriptions:s}=t.get(Mr),a=new Vt;if(s.push(a),o===is.Test){i.warn("Chat response providers are not available in test mode");return}let c=["gpt-3.5-turbo","gpt-4"];function u(d){return`copilot-${d}`}let l=await ac(r);if(!l){i.error("Auth token not present when we expected it to be");return}for(let d of c){let p=await n.getUserRequestEndpoint(3,void 0,d);if(a.isDisposed)return;let f=u(d),m=e.createInstance(Xw,p);a.add(G5.chat.registerChatResponseProvider(f,m,{name:d,auth:{label:l.account.label}}))}}var Xw=class{constructor(e,r,n,i,o){this._endpoint=e;this._accessor=r;this._expService=n;this._telemetryService=i;this._chatMLFetcher=o}async provideLanguageModelResponse2(e,r,n,i,o){let s=G5.extensions.getExtension(n,!0);if(!s||typeof s.packageJSON.version!="string")throw new Error("Invalid extension information");let a=s.packageJSON.version,c=await this._expService.getTreatmentVariableAsync("vscode","copilotchat.languageModelControlList"),u=hTe.extractCustomTokenLimit(c??"",n),{messages:l,tokenCount:d}=await new mt(this._accessor,this._endpoint,j5,{noSafety:!1,messages:e},this._accessor.get(we)).render();if(this._telemetryService.sendMSFTTelemetryEvent("languagemodelrequest",{extensionId:n,extensionVersion:a,model:this._endpoint.model},{tokenCount:d,tokenLimit:u}),d>Math.min(this._endpoint.modelMaxPromptTokens,u))throw new Error("Message exceeds token limit.");let p={...this._endpoint,getExtraHeaders:()=>({...this._endpoint.getExtraHeaders?.()??{},"x-onbehalf-extension-id":`${n}/${a}`})},f=async(h,g,v)=>{i.report({part:v.text,index:g})},m=TK.options[this._endpoint.model].convert(r);await this._chatMLFetcher.fetchMany(l,f,o,3,p,m)}};Xw=ze([rt(1,Yt),rt(2,Ur),rt(3,Ne),rt(4,sr)],Xw);var hTe;(r=>{function e(n,i){let o=n.indexOf(i);if(o<0)return 4e3;let s=o+i.length,a=n.indexOf(",",s);a<0&&(a=n.length);let c=Number(n.substring(s,a));return isNaN(c)?4e3:c*1e3}r.extractCustomTokenLimit=e})(hTe||={});function UQe(...t){return e=>t.some(r=>r(e))}var TK=class t{constructor(e){this._description=e}static{this._defaultDesc={stop:UQe(aR,AS),temperature:nb,max_tokens:nb,frequency_penalty:nb,presence_penalty:nb}}static{this.options={"gpt-3.5-turbo":new t({...this._defaultDesc}),"gpt-4":new t({...this._defaultDesc}),"gpt-3.5-turbo-1106":new t({...this._defaultDesc}),"gpt-3.5-turbo-nc":new t({...this._defaultDesc}),"gpt4-turbo":new t({...this._defaultDesc}),"code-llama":new t({})}}convert(e){let r={};for(let n in this._description){let i=this._description[n],o=e[n];o!=null&&i(o)&&(r[n]=o)}return r}};var z5=fe(fr());var V5=class extends X{render(e,r){let n=this.props.chatVariables.find(i=>i.name===un.variableInfo.name);return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are an expert in VS Code extension development. You know how to use the VS Code API to extend the editor. Your task is to help the Developer with their VS Code extension development.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Assume the question is about VS Code extension development.",vscpp("br",null),"Politely decline to answer if the question is not about VS Code extension development.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the API related context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"The user cannot see the API context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),"Do not talk about initial setup of creating an extension unless the user asks about it.",vscpp("br",null),"Only provide information to related VS Code extension development."),this.props.history&&vscpp(vscppf,null,vscpp(zr,{priority:600,history:this.props.history})),vscpp(Ra,{priority:700}),!n&&vscpp(un,{priority:900}),vscpp(un,{priority:800}),vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}),vscpp(CK,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}},CK=class extends X{async prepare(e,r,n){let i=this.accessor.get(Vi),o=this.accessor.get(J3);if(await o.updateIndex(),n.isCancellationRequested)return;let s=await i.computeEmbeddings([this.props.query],n);if(!n.isCancellationRequested&&s&&s.length>0){let a=o.nClosestValues(s[0],5,.7);if(a.length)return{snippets:a}}}render(e,r){return vscpp(vscppf,null,e&&e.snippets.length>0&&vscpp(ee,{priority:900},"Below are some potentially relevant code samples related to VS Code extension development. You may use information from these samples to help you answer the question if you believe it is relevant."),e&&e.snippets.map(n=>vscpp(ee,{priority:900},n,vscpp("br",null))))}};var gTe=z5.t("How do I add text to the status bar?"),IK=class extends xs{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=this.accessor.get(It).activeTextEditor;return new mt(this.accessor,n,V5,{chatVariables:i,query:u,history:l,document:d?.document,selection:d?.selection},this.accessor.get(we))}},$5=class{constructor(){this.id="api";this.locations=[2];this.description=z5.t("Ask about VS Code extension development");this.intentDetectionInput={sampleQuestion:gTe,modelDescription:z5.t("Ask about VS Code extension development")};this.commandInfo={sampleRequest:gTe,defaultEnablement:!0,allowsEmptyArgs:!1}}static{this.ID="api"}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new IK(e)}}};var DK=fe(fr());var W5=class t{constructor(e,r,n){this.accessor=e;this.prompt=r;this.documentContext=n}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let c=new t(r,i,a);return{intent:e,location:s,endpoint:o,promptCrafter:c,createReplyInterpreter:c.createReplyInterpreter.bind(c)}}async buildPrompt(e,r,n,i,o,s){let c=e.getLatestTurn().request.message,u=e.turns.length>1?e.turns[e.turns.length-2].request.message:void 0,l=new mt(this.accessor,r,this.prompt,{documentContext:this.documentContext,query:c,history:u},this.accessor.get(we)),d=await l.render();return this.replyInterpreterFactory=l.getMeta(xd),d}createReplyInterpreter(e,r){if(!this.replyInterpreterFactory)throw new Error("No reply interpreter factory available.");return this.replyInterpreterFactory.create(e,r)}};function vTe(t,e){let r=t;for(let n of e){let i=n.range.start,o=n.range.end,s=r.start,a=r.end,c=n.newText.split(`
`).length,u=c-(o.line-i.line)-1,l=s.line,d=s.line;o.isBefore(s)?(l=s.line+u,d=a.line+u):i.isBefore(s)&&o.isAfterOrEqual(s)&&o.isBeforeOrEqual(a)?(l=i.line,d=a.line+u):i.isAfterOrEqual(s)&&i.isBeforeOrEqual(a)&&o.isAfter(a)?(l=s.line,d=o.line+u):i.isAfter(a)?(l=s.line,d=a.line):r.contains(n.range)?(l=s.line,d=a.line+u):n.range.contains(r)&&(l=i.line,d=i.line+c-1),r=new Ge(l,0,d,0)}return r}function Y5(t,e,r,n){let i=t.modelMaxPromptTokens*4/3,o=new Vs(i),s=e.document,a=e.language,c=new yo(o,s,a,"ed8c6549bwf9"),u=new yo(o,s,a,"abpxx6d04wxr"),l=new yo(o,s,a,"be15d9bcejpp"),d=()=>(u.trim(),c.trim(),l.trim(),{contextInfo:{language:a,above:u,range:c,below:l,outlineAbove:"",outlineBelow:""},tracker:o});if(!BQe(c,r,n))return d();let f={aboveLineIndex:n.start.line-1,belowLineIndex:n.end.line+1,minimumLineIndex:0,maximumLineIndex:s.lineCount-1};return vY(f,u,l),d()}function BQe(t,e,r){let n=Math.floor((e.start.line+e.end.line)/2),i=Math.max(n-r.start.line,r.end.line-n);t.appendLine(n);for(let o=1;o<=i;o++){let s=n-o,a=n+o;if(s>=r.start.line&&!t.prependLine(s)||a<=r.end.line&&!t.appendLine(a))return!1}return!0}function Td(t,e,r,n){let i=t.getDiagnostics(e).filter(o=>!!o.range.intersection(r));if(n){let o=i.filter(s=>n.includes(s.message));if(o.length>0)return o}return i}async function K5(t,e,r){let n=gA(e),i=Math.max(r,e.end.line-e.start.line+r),o=await t.getFixSelectionOfInterest(n,i);return vA(o)}var qQe=["typescript"],HQe=["eslint"];function RK(t,e,r){if(!qQe.includes(t)||!HQe.includes(e))return[];let n=`${t}:${e}`;if(!wK[n]||!r||!wK[n][r])return[];let i=wK[n][r];return Array.isArray(i)?i:[i]}function PE(t,e){return e.some(r=>{let n=typeof r.code=="object"?r.code.value:r.code;return RK(t,r.source,n).some(o=>typeof o=="object"&&o.replaceError)})}var wK={"typescript:eslint":{"class-methods-use-this":["Make the method static.","Move the method outside of the class.","Rewrite the method to use properties of the class."],"consistent-this":["Use the alias for this required by eslint consistent-this rule.","Use this directly instead of an alias."],"constructor-super":{title:"Add missing super call and pass through new arguments.",message:"The code is missing a super call in the constructor. Copy base class parameters to this constructor and pass them to super.",replaceError:!0},"func-names":["Give the function expression the same name as the variable it is assigned to.","Convert the function to an arrow function."],"func-style":[{title:"Convert the function declaration to an expression.",message:"The function expression should be assigned to a variable with the name of the original function declaration."}],"max-lines-per-function":["Split into multiple functions."],"max-nested-callbacks":["Rewrite to avoid at least one callback."],"max-params":[{title:"Rewrite the signature to use an object parameter.",message:"Preserve all the parameters of the original signature."}],"max-statements":["Split into multiple functions."],"no-case-declarations":["Surround the case block with braces.","Move the declaration outside the case block."],"no-dupe-else-if":["Fix the duplicate condition to be different from the first.","Remove the duplicate condition"],"no-duplicate-case":[{title:"Change the duplicate condition to be different.",message:"Do not delete the duplicate case, just fix it.",replaceError:!0},"Remove the duplicate condition"],"no-duplicate-imports":"Merge the duplicated import lines.","no-fallthrough":[{title:"Rewrite to avoid fallthrough.",message:"Use the return value of the following cases and copy it to the preceding fallthrough case.",replaceError:!0},"Add a // fallthrough comment.","Add a break statement."],"no-inner-declarations":["Move the inner declaration to the top of its containing function.","Move the inner declaration to the bottom of its containing function.","Change the inner function declaration to an expression."],"no-multi-assign":"Assign each variable in separate statements.","no-negated-condition":"Invert the branches of the conditional.","no-new":["Convert the class to functions.","Assign the resulting object to a variable."],"no-sequences":[{title:"Wrap the whole comma sequence in parentheses.",message:"",replaceError:!0},{title:"Rewrite, preserving the original behavior.",message:"The last element of the comma sequence is the one returned."},{title:"Delete the non-final elements of the sequence.",message:"They are unused unless it is for side effects."}],"no-sparse-arrays":["Remove duplicated commas.","Add default values for the missing elements."],"require-await":["Removed the unused async keyword.",{title:"Rewrite the function to use await.",message:"The code should change to call asynchronous functions where appropriate."}],"sort-keys":{title:"Sort the properties of the entire object literal.",message:"",replaceError:!0}}};var jQe=200,yTe=300,Cd=class extends X{async prepare(e,r,n){return{isIgnored:await this.accessor.get(st).isCopilotIgnored(this.props.documentContext.document.uri)}}render(e,r){if(e.isIgnored)return;let{diagnostics:n,documentContext:i}=this.props,o,s=(c,u)=>{let l=i.document.getText(new Ge(c.start.line,0,c.end.line+1,0)).trim();return l.length>0&&l.length<u?l:""},a=!PE(i.language.languageId,n);return n.length>0&&vscpp(ee,null,"The code has the following ",n[0].source," problems",n.map((c,u)=>vscpp(vscppf,null,vscpp("br",null),"Problem ",u+1,":",vscpp("br",null),(o=s(c.range,jQe))&&vscpp(vscppf,null,"This code",vscpp("br",null),vscpp(bi,{code:o}),vscpp("br",null),a&&vscpp(vscppf,null,"has the problem reported:",vscpp("br",null))),a&&vscpp(bi,{code:c.message}),vscpp(Jw,{diagnostic:c}),vscpp(Zw,{diagnostic:c,languageId:i.language.languageId}))))}},Jw=class extends X{async prepare(){let e=this.accessor.get(it),r=this.accessor.get(Fr);return{info:await GQe(e,r,this.props.diagnostic.relatedInformation)}}render(e,r){return e.info?vscpp(vscppf,null,"This diagnostic has some related code:",vscpp("br",null),e.info):void 0}};async function GQe(t,e,r){let n=[];if(r)for(let i of r)try{let o=i.location,s=await t.openTextDocument(o.uri),a=o.range,c=e.getTreeSitterAST(s),u;if(c){let l=gA(a),d=await c.getCoarseParentScope(l);u=s.getText(vA(d))}(!u||u.length>yTe)&&(u=s.getText(a)),u.length<=yTe&&n.push(xn("",u))}catch{}return n.join(`
`)}var Zw=class extends X{render(e,r){let{diagnostic:n,languageId:i}=this.props,o=typeof n.code=="object"?n.code.value:n.code,s=RK(i,n.source,o);if(s.length){let a=s[0];return vscpp(vscppf,null,"Suggested fix:",vscpp("br",null),typeof a=="string"?a:a.title+a.message)}return null}};var kE=class extends X{async prepare(){let e=this.accessor.get(Ur),r=this.accessor.get(Re),n=async(i,o)=>r.getConfig(i)||!!await e.getTreatmentVariableAsync("vscode",o,!0);return{useWorkspaceChunksFromSelection:await n(ke.FixUseWorkspaceChunksFromSelection,"copilotchat.useWorkspaceChunksFromSelection"),useWorkspaceChunksFromDiagnostics:await n(ke.FixUseWorkspaceChunksFromDiagnostics,"copilotchat.useWorkspaceChunksFromDiagnostics")}}render(e,r){if(!e.useWorkspaceChunksFromSelection&&!e.useWorkspaceChunksFromDiagnostics)return null;let n=r.tokenBudget;return e.useWorkspaceChunksFromSelection&&e.useWorkspaceChunksFromDiagnostics&&(n=n/2),vscpp(vscppf,null,e.useWorkspaceChunksFromSelection&&vscpp(by,{...this.getChunkSearchPropsForSelection(n)}),e.useWorkspaceChunksFromDiagnostics&&vscpp(by,{...this.getChunkSearchPropsForDiagnostics(n)}))}getChunkSearchPropsForSelection(e){let{document:r,wholeRange:n}=this.props.documentContext,i=r.validateRange(n);this.props.diagnostics.forEach(s=>{i=i.union(s.range)});let o=r.getText(i);return{fullQuestionText:[`Please find code that is similar to the following code block:
`,"```",o,"```"].join(`
`),keywords:bTe(o),resultFilter:s=>s.filter(a=>!ib(a.file,r.uri)).slice(0,3)}}getChunkSearchPropsForDiagnostics(e){let r=this.props.documentContext.document,n=this.props.diagnostics.map(i=>i.message).join(" ");return{fullQuestionText:`Please find code that can help me fix the following problems: ${n}`,keywords:bTe(n),resultFilter:i=>i.filter(o=>!ib(o.file,r.uri)).slice(0,3)}}};function bTe(t){return[...new Set(...t.matchAll(/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g)).values()].map(r=>({keyword:r,variations:[]}))}var VQe=15,Q5=class extends X{async prepare(){let{document:e,selection:r}=this.props.documentContext,n=Td(this.accessor.get(Po),e.uri,r,this.props.query),i=n.length>0?aA(n):r,o=this.accessor.get(Fr).getTreeSitterAST(e),s=o?await K5(o,i,VQe):i;return{range:i,rangeOfInterest:s,diagnostics:n}}render({range:e,rangeOfInterest:r,diagnostics:n},i){let o=this.props.documentContext;if(Cr(this.props.documentContext.document.uri))throw ci("InlineFix3Prompt should not be used with a notebook!");let{contextInfo:s}=Y5(i.endpoint,o,e,r),a=o.document,c=[{uri:a.uri,version:a.version,ranges:xr([s.range.toRange(),s.above.toRange(),s.below.toRange()])}],u=!PE(o.language.languageId,n);return vscpp(vscppf,null,vscpp("usedContext",{value:c}),vscpp("meta",{value:new xd(l=>new e2(this.accessor,e,s,o,l))}),vscpp(Ke,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"First think step-by-step how you would fix the issue.",vscpp("br",null),"You are expected to either edit the selected code or propose a bash command to install missing packages.",vscpp("br",null),"If you propose a code change, use a single code block that starts with ``` and ",Ui.forLanguage(o.language),".",vscpp("br",null),"If you propose to run a bash command, use a code block that starts with ```bash.",vscpp("br",null),"When adding missing imports, always insert them inside of the selected code at the top, do not replace the rest of the selected code.",vscpp("br",null),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),vscpp(Pt,null)),this.props.history&&vscpp(ee,null,this.props.history),s.above.hasContent&&vscpp(ee,null,"I have the following code above the selection:",vscpp("br",null),vscpp(Wn,{codeRegion:s.above,useMarkers:!0})),s.below.hasContent&&vscpp(ee,null,"I have the following code below the selection:",vscpp("br",null),vscpp(Wn,{codeRegion:s.below,useMarkers:!0})),s.range.hasContent&&vscpp(ee,null,"I have the following code in the selection:",vscpp("br",null),vscpp(Wn,{codeRegion:s.range,useMarkers:!0}))||vscpp(ee,null,"There is no code in the selection.",vscpp("br",null)),vscpp(ee,null,"Only change the code inside of the selection, delimited by markers '",s.range.startMarker,"' and '",s.range.endMarker,"'. The code block with the suggested changes should also contain the markers."),vscpp(Cd,{documentContext:o,diagnostics:n}),vscpp(kE,{diagnostics:n,documentContext:this.props.documentContext}),u&&vscpp(ee,null,"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),this.props.query,vscpp("br",null)))}},e2=class{constructor(e,r,n,i,o){this.accessor=e;this.wholeRange=r;this.contextInfo=n;this.documentContext=i;this.progress=o;this._lastText=void 0;this._lastLength=0}update(e){if(this._lastText=e,this._firstSentence===void 0){let r=lO(e);r.length<e.length&&(this._firstSentence=r),this.progress.report({content:r.substring(this._lastLength)}),this._lastLength=r.length}return{shouldFinish:lf(e)}}async finish(){if(!this._lastText)throw new Error("No text");let e=pf(this.contextInfo,this._lastText,this.documentContext.language);if(!e||e.language==="bash"||e.language==="ps1")return{type:"conversational",content:this._lastText.substring(this._lastLength)};let r=this.generateEdits(e.code),n=this.documentContext.document.version,i=o=>this.generateFollowUps(r,this.wholeRange,n,o);return df(r,this.wholeRange,void 0,i)}generateEdits(e){return py(this.accessor,this.contextInfo,e,2,this.documentContext.fileIndentInfo,dy.fromDocumentContext(this.documentContext))}async generateFollowUps(e,r,n,i){let s=await this.accessor.get(Po).waitForNewDiagnostics(this.documentContext.document.uri,i);if(!i.isCancellationRequested&&s.length&&this.documentContext.document.version!==n){let a=vTe(r,e),c=s.filter(u=>Kee(u)&&u.range.intersection(a));if(c.length)return c.length===1?[{title:w9.t("An error remains after applying the change, click here to iterate."),message:`/fix ${c[0].message}`}]:[{title:w9.t("{0} errors remain after applying the change, click here to iterate.",c.length),message:"/fix Fix the remaining errors"}]}}};function _Te(t,e,r){let n=KQe(e),i=ly(t,4,!1),o=XQe(n),s;function a(f,m){let h=f.content,g=$Qe(m),v=f.indentLength,b=g,y=0;for(;v<h.length&&b<m.length&&h.charCodeAt(v)===m.charCodeAt(b);)v++,b++,y++;if(v<h.length||b<m.length)return(m.length-g)*3/4<y&&(h.length-f.indentLength)*3/4<y?2:0;if(s===void 0){let E=ag(h,o);E>=0&&(s=ag(m,i.tabSize)-E)}return 1}function c(f,m,h){for(let g=h;g<m.length;g++)if(a(f,m[g])===1)return r?.recovery(h,g),g;return r?.warning("Unable to find a matching line for the diff line: "+f.content),-1}function u(f,m){for(let h=0;h<m.length;h++)if(a(f,m[h])===1)return h;return 0}let l=[],d=0,p=0;for(n.length>0&&(p=u(n[0],t));d<n.length&&p<t.length;){let f=n[d];switch(f.op){case 1:{let m=AK(f,o,s??0,i);l.push(new qi(p,p,[m]));break}case-1:{let m=t[p];if(a(f,m)===0){let v=c(f,t,p);if(v!==-1)p=v;else break}let g=n[d+1];if(g?.op===1&&g.indentLength===f.indentLength){let v=WQe(m)+g.content.substring(g.indentLength);l.push(new qi(p,p+1,[v])),d++,p++;break}l.push(new qi(p,p+1,[])),p++;break}default:{let m=a(f,t[p]);if(m===0){let h=c(f,t,p);h!==-1&&(p=h);break}else if(m===2){let h=AK(f,o,s??0,i);l.push(new qi(p,p+1,[h]))}p++;break}}d++}if(p===t.length&&d<n.length)for(;d<n.length;d++){let f=n[d];if(f.op===1){let m=AK(f,o,s??0,i);l.push(new qi(p,p,[m],`
`,""))}}return l}function X5(t){return t===32||t===9}function zQe(t){return t===45||t===43}function $Qe(t){let e=0;for(;e<t.length&&X5(t.charCodeAt(e));)e++;return e}function WQe(t){let e=0;for(;e<t.length&&X5(t.charCodeAt(e));)e++;return t.substring(0,e)}function AK(t,e,r,n){if(r===0&&(!n.insertSpaces&&t.indentKind===1||n.insertSpaces&&t.indentKind===2))return t.content;let i=ag(t.content,e);return(n.insertSpaces?" ".repeat(n.tabSize*(i+r)):"	".repeat(i+r))+t.content.substring(t.indentLength)}function YQe(t){let e=0,r=0,n=t.content;if(n.length>0){let i=n.charCodeAt(0);if(X5(i))for(r++,e=i===32?2:1;r<n.length;){let o=n.charCodeAt(r);if(!X5(o))break;r++,o!==i&&(e=3)}}t.indentKind=e,t.indentLength=r}function KQe(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r],i={content:n,op:0,indentKind:0,indentLength:0};n.length>0&&(zQe(n.charCodeAt(0))&&(i.op=n.charCodeAt(0)===45?-1:1,n.length>1&&n.charCodeAt(1)===32?i.content=" "+n.substring(1):i.content=n.substring(1)),YQe(i)),e.push(i)}return QQe(e),e}function QQe(t){let e=Number.MAX_VALUE;for(let r of t){if(r.indentKind!==2||r.indentLength===0)return;r.indentLength<e&&(e=r.indentLength)}if(e>0)for(let r of t)r.indentLength-=e,r.content=r.content.substring(e)}function XQe(t){return 4}var J5=class extends X{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext,n=e.validateRange(r),o=this.accessor.get(Fr).getTreeSitterAST(e),s=o?await o.getStructure():void 0;return{wholeRange:n,structure:s,summarizedDocumentSettings:await W1(this.accessor)}}render(e,r){let{document:n,language:i,selection:o}=this.props.documentContext;if(Cr(n.uri))throw ci("InlineFix4Prompt should not be used with a notebook!");let s=e.wholeRange,c=r.endpoint.modelMaxPromptTokens/3*4,u=s,l,d,p;if(e.structure&&n.getText().length>c){let v=Y1(c,n,s,e.structure,e.summarizedDocumentSettings);u=v.document.transformer.fromOffsetRange(v.selection),l=v.document,p=v.document.text,d={firstLineIndex:0,endLineIndex:v.document.lineCount}}else{let v=JQe(r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,e.wholeRange);d=v.lineRange,p=v.code,l=n}let f=p.length>0,m=[{uri:n.uri,version:n.version,ranges:[new Ge(d.firstLineIndex,0,d.endLineIndex,0)]}],h=Td(this.accessor.get(Po),n.uri,o,this.props.query),g=!PE(i.languageId,h);return vscpp(vscppf,null,vscpp("usedContext",{value:m}),vscpp("meta",{value:new xd(v=>new PK(u,d,l,v))}),vscpp(Ke,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"The user has a ",i.languageId," file opened in a code editor.",vscpp("br",null),"The user expects you to propose a fix for one or more problems in that file.",vscpp("br",null),"For the response always follow these instructions:",vscpp("br",null),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),"When proposing a change in the code, use a single code block that starts with ```diff and that describes the changes in the diff format. In the diff, always use tab to indent, never spaces. Make sure that the diff format is valid and contains all changes: Removed and unchanged lines must match exactly the original code line. Keep the changes minimal and the diff short.",vscpp("br",null),"When proposing to fix the problem by running a terminal command, provide the terminal script in a code block that starts with ```bash.",vscpp("br",null),vscpp(Pt,null)),this.props.history&&vscpp(ee,null,this.props.history),vscpp(ee,{priority:100},"I have the following code open in the editor.",vscpp("br",null),"```csharp",vscpp("br",null),"// This is my class",vscpp("br",null),"class C { }",vscpp("br",null),vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```"),vscpp(tc,{priority:100},"The problem is that the class 'C' does not have a field or property named 'Field'. To fix this, you need to add a 'Field' property to the 'C' class.",vscpp("br",null),vscpp("br",null),"```diff",vscpp("br",null),"// This is my class",vscpp("br",null),"-class C { }",vscpp("br",null),"+class C {",vscpp("br",null),"+   public int Field { get; set; }",vscpp("br",null),"+}",vscpp("br",null),vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```",vscpp("br",null)),vscpp(ee,{priority:600},f&&vscpp(vscppf,null,"I have the following code open in the editor, starting from line ",d.firstLineIndex+1," to line ",d.endLineIndex,":",vscpp(Es,{language:i,code:p}),vscpp("br",null),"The user has currently selected from line ",u.start.line+1,", column ",u.start.character+1," to line ",u.end.line+1," column ",u.end.character+1,".",vscpp("br",null)),!f&&vscpp(vscppf,null,"I am in an empty file:",vscpp(Es,{language:i,code:""}))),vscpp(ee,{priority:500},h.length>0&&vscpp(vscppf,null,"We have ",h.length," ",h[0].source," ",h.length===1?"problem":"problems"," in this file:",vscpp("br",null),h.map(v=>vscpp(vscppf,null,"At line ",v.range.start.line+1," column ",v.range.start.character+1,": ",vscpp("br",null),g&&vscpp(vscppf,null,v.message," ",vscpp("br",null)),vscpp(Jw,{diagnostic:v}),vscpp(Zw,{diagnostic:v,languageId:i.languageId}))))),vscpp(kE,{priority:200,diagnostics:h,documentContext:this.props.documentContext}),g&&vscpp(ee,{priority:700},"Please find a fix for my code so that the result is without any errors.",vscpp("br",null),this.props.query))}};function JQe(t,e,r){let n=t*4,i=new Vs(n),o=new yo(i,e.document,e.language,"ed8c6549bwf9"),s=!1,a=p=>{o.prependLine(p)||(s=!0)},c=p=>{o.appendLine(p)||(s=!0)},u=e.document.lineCount,l=r.end.line;for(l=r.end.line;!s&&l>=r.start.line;l--)a(l);let d=r.end.line+1;for(;!s&&(l>=0||d<u);)l>=0&&a(l--),l>=0&&a(l--),d<u&&c(d++);return o.trim(e.selection),{code:o.lines.join(`
`),lineRange:{firstLineIndex:o.firstLineIndex,endLineIndex:o.lastLineIndex+1}}}var PK=class{constructor(e,r,n,i){this.wholeRange=e;this.lineRange=r;this.targetDocument=n;this.progress=i;this._lastText=void 0;this._lastLength=0}update(e){if(this._lastText=e,this._firstSentence===void 0){let r=lO(e);r.length<e.length&&(this._firstSentence=r),this.progress.report({content:r.substring(this._lastLength)}),this._lastLength=r.length}return{shouldFinish:lf(e)}}async finish(){if(!this._lastText)throw new Error("No text");let e=ZQe(this._lastText);if(!e||e.language==="bash"||e.language==="ps1")return{type:"conversational",content:this._lastText.substring(this._lastLength)};let r=[];if(e.language==="diff"){let i=cg.fromString(e.code),o=cg.fromString(this.targetDocument instanceof fg?this.targetDocument.text:this.targetDocument.getText());r=_Te(o,i)}else r=[new qi(this.lineRange.firstLineIndex,this.lineRange.endLineIndex,cg.fromString(e.code))];let n=r.map(i=>i.toTextEdit());return this.targetDocument instanceof fg&&(n=new K1(this.targetDocument).rebaseEdits(n)),df(n,this.wholeRange,void 0)}};function ZQe(t){let r=$c(t).at(0);if(r){let n=rb(t);return{code:r.code,contentBeforeCode:n.slice(0,r.startLine).join(`
`).trimEnd(),language:r.language}}}var eXe=15,Z5=class extends X{async prepare(){let{document:e,selection:r}=this.props.documentContext,n=Td(this.accessor.get(Po),e.uri,r,this.props.query),i=n.length>0?aA(n):r,o=this.accessor.get(Fr).getTreeSitterAST(e),s=o?await K5(o,i,eXe):i;return{range:i,rangeOfInterest:s,diagnostics:n}}render({range:e,rangeOfInterest:r,diagnostics:n},i){let o=this.props.documentContext;if(!Cr(this.props.documentContext.document.uri))throw ci("InlineFix4Prompt should not be used with a non-notebook!");let s=Y5(i.endpoint,o,e,r),a=CO(this.accessor.get(It),this.accessor.get(it),o,s.contextInfo,s.tracker),c=o.document,u=[{uri:c.uri,version:c.version,ranges:xr([a.range.toRange(),a.above.toRange(),a.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:u}),vscpp("meta",{value:new xd(l=>new kK(this.accessor,e,a,o,l))}),vscpp(Ke,null,vscpp(eE,{language:o.language}),vscpp("br",null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If you suggest to run a terminal command, use a code block that starts with ```bash.",vscpp("br",null),'When fixing "ModuleNotFoundError" or "Import could not be resolved" errors, always use magic command "%pip install" to add the missing packages. The imports MUST be inserted at the top of the code block and it should not replace existing code.',vscpp("br",null),"You should not import the same module twice.",vscpp("br",null),vscpp(Pt,null)),this.props.history&&vscpp(ee,null,this.props.history),vscpp(Dw,{documentContext:o,above:a.above,range:a.range,below:a.below,aboveCells:a.aboveCells,belowCells:a.belowCells,includeDelimeters:!0}),vscpp(Cd,{documentContext:o,diagnostics:n}),vscpp(ee,null,"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),this.props.query,vscpp("br",null)))}},kK=class extends e2{generateEdits(e){let r=e.split(`
`),n=[],i=[];for(let a of r)a.match(/^[%\!]pip/)?n.push(a):i.push(a);if(!n.length)return super.generateEdits(e);let o=[],s=ug(n,{whichLine:"topMost",lines:this.contextInfo.range.lines},this.documentContext.fileIndentInfo).join(`
`)+`
`;return o.push(new zi(new Ge(this.wholeRange.start,this.wholeRange.start),s)),i.length&&o.push(...super.generateEdits(i.join(`
`))),o}};var e6=class extends X{render(e,r){let n=this.props.documentContext,i=({document:o,selection:s})=>Td(this.accessor.get(Po),o.uri,s,this.props.query);return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),vscpp(Pt,null),vscpp("br",null),vscpp("br",null),vscpp(gg,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You specialize in being a highly skilled code generator. Your task is to help the Developer fix an issue.",vscpp("br",null),"If context is provided, try to match the style of the provided code as best as possible.",vscpp("br",null),"Generated code is readable and properly indented.",vscpp("br",null),"Markdown blocks are used to denote code.",vscpp("br",null),"Preserve user's code comment blocks, do not exclude them when refactoring code.",vscpp("br",null),"Pay especially close attention to the selection or exception context.",vscpp("br",null),"Given a description of what to do you can refactor, fix or enhance the existing code.",vscpp(Dr,null)),this.props.history&&vscpp(zr,{priority:700,history:this.props.history}),vscpp(un,{priority:800,document:this.props.documentContext?.document,range:this.props.documentContext?.selection}),n&&vscpp(Cd,{priority:800,documentContext:n,diagnostics:i(n)}),vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var tXe={3:"gpt-3.5-turbo",4:"gpt-4",cl:"code-llama"},DE=class{constructor(){this.id="fix";this.locations=[1,2];this.description=DK.t("Propose a fix for the problems in the selected code");this.intentDetectionInput={sampleQuestion:"There is a problem in this code. Rewrite the code to show it with the bug fixed."};this.commandInfo={sampleRequest:DK.t("There is a problem in this code. Rewrite the code to show it with the bug fixed.")}}static{this.ID="fix"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to fix an issue");let i=r.location;if(i===2)return tE.createIntentInvocation(this,e,r,e6);let o=r.intentArgument?tXe[r.intentArgument]:void 0,s=await e.get(Ye).getUserRequestEndpoint(i,this.id,o),a=Q5;return Cr(n.document.uri)&&n.document.languageId==="python"?a=Z5:(s.model==="gpt-4"||s.model==="gpt4-turbo")&&(a=J5),W5.createIntentInvocation(this,e,r,a,s)}};var Ig=fe(fr());var NK=fe(fr());var t6=class extends X{render(){let{chunk:e,failure:r,priority:n}=this.props,i=zh(Vh(e.file).languageId),o=r.task.messages.filter(s=>s.location?.uri.toString()===e.file.toString()&&e.range.contains(s.location.range.start));return vscpp(ee,{priority:n},o.length?vscpp(vscppf,null,'This is the source code of the test that failed. The error message is shown after the text "FAILURE_MESSAGE" on the line where it occurred:'):vscpp(vscppf,null,"The test failed with the message: ",r.task.messages.map(s=>typeof s.message=="object"?s.message.value:s.message).join(`
`),". The source code of the test is:"),vscpp("br",null),"```",i,vscpp("br",null),"// File URI: ",e.file.toString(),vscpp("br",null),e.text.split(`
`).map((s,a)=>{let c=o.find(u=>u.location?.range.start.line===a+e.range.start.line);return vscpp(vscppf,null,s,c&&vscpp(vscppf,null," ","FAILURE_MESSAGE: ",c.message),vscpp("br",null))}),"```",vscpp("br",null))}};var rXe=/^[\*\-]\s*([^<([\s]+).*? +in +(.+)/gm,xTe=(t,e)=>[...t.matchAll(rXe)].flatMap(([,r,n])=>r.split(",").map(i=>({keyword:i,fileUri:n,interest:"IMPLEMENTATION"}))).map(({keyword:r,fileUri:n,interest:i})=>{let o=e.find(l=>l.file.toString().toLowerCase()===n.toLowerCase())||e[e.length-1],s=o.text.indexOf(r);if(s===-1)return;let a=0,c=o.range.start.line,u=o.range.start.character;for(;;){let l=o.text.indexOf(`
`,a);if(l>s||l===-1)return{keyword:r,interest:i,location:{uri:o.file,position:new Ht(c,u+s-a)}};a=l+1,u=0,c++}}).filter(PS),ETe=async(t,e,r)=>{let n=e.get(Yc).get(t);if(n)return n.getSemanticChunks(r);try{let i=await e.get(Cn).readFile(t),o=new TextDecoder().decode(i);return await Zh(e,o,{uri:t,shouldSemanticChunk:!0})}catch{return[]}};var r6=class extends X{render(){let e=this.props.symbolChunks;return vscpp(vscppf,null,vscpp(ee,{priority:this.props.priority},"Here are some potentially relevant symbols we have found before:",vscpp("br",null)),e.map(r=>{let n=zh(Vh(r.chunk.file).languageId);return vscpp(ee,{priority:this.props.priority-1},"**",r.interest==="DEFINITION"?"Definition of":"Implementation of"," `",r.keywords.join(", "),"`:**",vscpp("br",null),"```",n,vscpp("br",null),"// ",r.chunk.file.toString(),vscpp("br",null),r.chunk.text.split(`
`).map(i=>vscpp(vscppf,null,i,vscpp("br",null))),"```",vscpp("br",null),vscpp("br",null))}))}};var n6=class extends X{render(){let{chunk:e,testFailure:r,symbolChunks:n,turnsLeft:i}=this.props;return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are an assistant who specializes in diagnosing and fixing failing tests. The user will provide you with the source code of the test that failed, and the location where the failure happened. They will also provide you with relevant related code. This information may be incomplete.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),`- Read the test's source code and the line containing "FAILURE_MESSAGE". The text after "FAILURE_MESSAGE" is the error returned from running tests.`,vscpp("br",null),"- Assume that the test code and test fixtures are correct. It's more likely the problem is code called by the test.",vscpp("br",null),!!n.length&&vscpp(vscppf,null,"- The provided implementations are incomplete. DO NOT assume that something isn't implemented if it doesn't appear here.",vscpp("br",null)),i===0?vscpp(vscppf,null,'- Respond with "SOLUTION", followed by the file URI, and then the corrected code and a brief explanation of the change.',vscpp("br",null)):vscpp(vscppf,null,n.length?vscpp(vscppf,null,'- If you believe you have found a bug in one of the "implementations" the user provided, respond with "SOLUTION", followed by the file URI, and then the corrected code and a brief explanation of the change.',vscpp("br",null),"- Otherwise, print a list of up to five keywords, classes, or function calls from the last implementation snippet that you need more information about to diagnose the failure. Make sure the most relevant keywords are written first. ",i===0&&"You won't get another chance to ask for more info.",' Write your response in a list in the form "- [keyword] in [file where keyword is used]". Do not include any extra text.',vscpp("br",null)):vscpp(vscppf,null,"- Don't try to fix the failure yet. Instead, print a list of keywords, classes, or function calls that you need more information about to diagnose the failure!",vscpp("br",null),'- Write your response in a list in the form "- [keyword] in [file where keyword is used]". Do not include any extra text.',vscpp("br",null)),`- If there is no more relevant information to request and you don't see a change to make WITHOUT CHANGING THE TEST CODE, respond with "NO MORE INFO".`,vscpp("br",null)),vscpp("br",null),"# Example",vscpp("br",null),i>0&&vscpp(vscppf,null,"# Example",vscpp("br",null),iXe,vscpp("br",null),vscpp("br",null)),!!n.length&&vscpp(vscppf,null,"# Example",vscpp("br",null),oXe,vscpp("br",null))),vscpp(t6,{chunk:e,failure:r,priority:800}),!!n.length&&vscpp(r6,{symbolChunks:n,priority:700}))}},iXe=vscpp(vscppf,null,"User:",vscpp("br",null),`\`\`\`typescript
// File URI: file:///project/my.test.ts
test('reverseString test', () => {'{'}
	const value = 'hello';
	const value2 = doReverseString(value);
	assert.deepStrictEquals(value2, 'olleh'); FAILURE_MESSAGE: Expected undefinedolleh to equal olleh
{'}'});
\`\`\`

Implementation of \`doReverseString\` in file:///project/my.test.ts:

\`\`\`typescript
// File URI: file:///project/strings.ts
function doReverseString(str: string): number {
	return stringUtils.reverseString(str);
}
\`\`\`
`,vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"I need more information about:",vscpp("br",null),"- stringUtils.reverseString",vscpp("br",null)),oXe=vscpp(vscppf,null,"User:",vscpp("br",null),`\`\`\`typescript
test('reverseString test', () => {'{'}
	const value = 'hello';
	const value2 = doReverseString(value);
	assert.deepStrictEquals(value2, 'olleh'); FAILURE_MESSAGE: Expected undefinedolleh to equal olleh
{'}'});
\`\`\`

Implementation of \`doReverseString\` in file:///project/my.test.ts:

\`\`\`typescript
function doReverseString(str: string): number {
	return stringUtils.reverseString(str);
}

Implementation of \`stringUtils.reverseString\` in file:///project/strings.ts:

\`\`\`typescript
function reverseString(str) {
	let out = '';
	for (let i = str.length; i >= 0; i--) {
		out += str[i];
	}
	return out;
}
\`\`\`
`,vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"SOLUTION: file:///project/stringUtils.ts",vscpp("br",null),`\`\`\`typescript
function reverseString(str) {
	let out = '';
	for (let i = str.length - 1; i >= 0; i--) {
		out += str[i];
	}
	return out;
}
\`\`\`
`,vscpp("br",null),"`reverseString` had an off-by-one error which started past the end of the string. I fixed your code by making `i` begin at `str.length - 1` instead of `str.length`.",vscpp("br",null));var sXe=1e3,aXe=/^\s*SOLUTION:\s*(.+)\s((?:.|\n)+)$/im,i6=class{constructor(e){this.chunkCache=new mn;this.globallySeen=new Set;this._promise=new Zg;this.turnsUsed=0;this.tokensUsed=0;this.endpoint=e.endpoint,this.progress=e.progress,this.token=e.token,this.accessor=e.accessor,this.turnsBudget=e.turnsBudget,this.timeBudget=e.timeBudget,this.tokenBudget=e.tokenBudget,this.deadline=Date.now()+this.timeBudget}get promise(){return this._promise.p}get hasFoundSolution(){return this._promise.isResolved}foundSolution(e){this._promise.complete(e)}takeTurn(){return this.turnsUsed++,Date.now()+sXe>=this.deadline?0:Math.max(0,this.turnsBudget-this.turnsUsed)}async getSemanticChunkForLocation({uri:e,range:r}){let n=this.chunkCache.get(e);return n||(n=ETe(e,this.accessor,this.token),this.chunkCache.set(e,n)),n.then(i=>i.find(o=>o.range.intersection(r)))}throwIfCancelled(){if(this.token.isCancellationRequested||this.hasFoundSolution)throw new Zs}async getSymbols(e){let r=this.accessor.get(st),n=new Map,i=await this.getDefinitionLocations(e);this.throwIfCancelled();for(let{keyword:o,links:s}of i)for(let{interest:a,link:c}of s){if(await r.isCopilotIgnored(c.uri))continue;let u=[a,c.uri.toString(),c.range.start.line].join("\0");if(this.globallySeen.has(u))continue;let l=n.get(u);if(l){l.keywords.push(o);continue}n.set(u,{keywords:[o],interest:a,link:c})}for(let o of n.keys())this.globallySeen.add(o);return this.symbolsToChunks([...n.values()])}async symbolsToChunks(e){return(await Promise.all(e.map(async n=>{let i=await this.getSemanticChunkForLocation(n.link);if(i)return{keywords:n.keywords,interest:n.interest,chunk:i}}))).filter(PS)}async getDefinitionLocations(e){let r=this.accessor.get(oo);return Promise.all(e.map(async({keyword:n,interest:i,location:o})=>{let s=o.position.translate(0,n.length-1),a=o.uri,c=()=>r.getDefinitions(a,s).then(p=>p.length?{interest:"DEFINITION",link:p[0]}:void 0),u=()=>r.getDefinitions(a,s).then(p=>p.length?{interest:"IMPLEMENTATION",link:p[0]}:void 0),l=[];(i==="DEFINITION"||i==="BOTH")&&l.push(c()),(i==="IMPLEMENTATION"||i==="BOTH")&&l.push(u());let d=(await Promise.all(l)).filter(PS);return{keyword:n,links:d.map(p=>"targetUri"in p.link?{interest:p.interest,link:new Wf(p.link.targetUri,p.link.targetRange)}:p)}}))}};var o6=class t{constructor(e,r,n){this.context=e;this.testFailure=r;this.testLocation=n}static create(e,r,n){let i=_Z(r.task.messages,o=>o.location);return(!i||n.uri.toString()!==i.uri.toString())&&(i=n),new t(new i6(e),r,i)}async climb(){let e=new i6(this.context),r=await e.getSemanticChunkForLocation(this.testLocation);if(!r)throw new Error("Could not find semantic information for the test location");let n=await Promise.race([e.promise.then(o=>({type:0,solution:o})),this.climbInner(e,r,{chunks:[],name:`"${this.testFailure.snapshot.label}"`,tokens:0}).then(()=>({type:2}),o=>{if(Kg(o))return{type:1};throw o})]);return this.context.accessor.get(Ne).sendMSFTTelemetryEvent("intent.fixTestFailure.outcome",{outcome:n.type===0?"solution":n.type===1?"cancelled":"nosolution",languageId:Vh(this.testLocation.uri).languageId},{requestsMade:e.turnsUsed,tokenCount:e.tokensUsed}),n}async climbInner(e,r,n){let{endpoint:i,progress:o,token:s,accessor:a}=this.context,c=a.get(Ne),u=a.get(sr),l=n.name,d=e.takeTurn(),p=a.get(we),{messages:f,tokenCount:m}=await new mt(a,i,n6,{testFailure:this.testFailure,chunk:r,symbolChunks:n.chunks,turnsLeft:d},p).render();if(e.tokensUsed+=m,e.throwIfCancelled(),n.tokens===0){for(let b of f)n.tokens+=p.tokenLength(b.content);n.tokens*=1.2}o.report(new ws(NK.t("Investigating the code around {0}",l)));let h=await u.fetchOne(f,async b=>{},s,2,i,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"failingTestMeta"});if(e.throwIfCancelled(),h.type!=="success")throw c.sendMSFTTelemetryEvent("failingTestResolver.error",{type:h.type,reason:h.reason,requestId:h.requestId}),new Error(NK.t("Encountered an error while deciding what test information to collect: ({0}) {1}",h.type,h.reason));let g=n.chunks.map(b=>b.chunk);g.unshift(r);let v=aXe.exec(h.value);if(v){let b;try{b=gt.parse(v[1])}catch{}e.foundSolution({text:v[2],uri:b,chunk:b&&g.find(y=>y.file.toString().toLowerCase()===b.toString().toLowerCase())})}else if(d>0){let b=await e.getSymbols(xTe(h.value,g));await this.chunkAndSendFollowups(e,r,b,n)}}async chunkAndSendFollowups(e,r,n,i){let o=[],s=e.accessor.get(we);for(let a of n){let c=o[o.length-1],u=s.tokenLength(a.chunk.text)+s.tokenLength(a.chunk.file.toString());!c||u+c.tokens>e.tokenBudget?o.push({chunks:[...i.chunks,a],tokens:i.tokens+u,name:i.name+" \u279C "+a.keywords[0]}):(c.chunks.push(a),c.tokens+=u)}for(let a of o)await this.climbInner(e,r,a)}};var s6=class{constructor(){this.id="fixTestFailure";this.locations=[1,2];this.description=Ig.t("Propose a fix for the a test failure");this.intentDetectionInput={sampleQuestion:"This test failed, suggest how to fix it."};this.commandInfo={sampleRequest:Ig.t("This test failed, suggest how to fix it."),defaultEnablement:!0,allowsEmptyArgs:!0,shouldRepopulate:!0}}static{this.ID="fixTestFailure"}async asSlashCommand(e){if(e.get(Zv).isEnabled.get())return{command:this.id,detail:this.description,executeImmediately:!0}}async invoke(e,r){let n=e.get(Zv),i;(g=>(g[g.Any=0]="Any",g[g.SameDocument=1]="SameDocument",g[g.InViewRange=2]="InViewRange",g[g.InSelection=3]="InSelection"))(i||={});let o,s=0,a=r.documentContext?.document.uri.toString();for(let p of n.getAllFailures())if(!o||!o.snapshot.uri||!o.snapshot.range)o=p;else if(p.snapshot.range&&p.snapshot.uri?.toString()===a&&(s<1&&(o=p,s=1),p.snapshot.range.intersection(r.documentContext.wholeRange)&&(o=p,s=2),p.snapshot.range.intersection(r.documentContext.selection))){o=p,s=3;break}if(!o)throw new Iw(Ig.t("No test failures found."));let{range:c,uri:u}=o.snapshot;if(!u||!c)throw new Iw(Ig.t("Tests have no associated editor location."));let l=r.location,d=await e.get(Ye).getUserRequestEndpoint(l,this.id,"gpt-4");return new LK(e,this,d,l,o,{uri:u,range:c})}},LK=class{constructor(e,r,n,i,o,s){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.createReplyInterpreter=e=>new MK(this.lastSolutionForInterpreter);let a=this;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=new mt(e,l,OK,{testFailure:o,chatVariables:d,query:g,endpoint:l,chatLocation:i,location:s,history:u.turns},e.get(we)),b=await v.render(p,m);return i===1&&(a.lastSolutionForInterpreter=v.getMeta(a6)?.value),b}}}},OK=class extends X{async prepare(e,r,n=Gr.None){if(!r)throw new Error("The failing test reports data directly to progress, thus it is required.");let o=await o6.create({accessor:this.accessor,endpoint:this.props.endpoint,progress:r,token:n,tokenBudget:e.tokenBudget,timeBudget:1/0,turnsBudget:6},this.props.testFailure,this.props.location).climb();if(this.props.chatLocation===1)return{outcome:o};o.type===0?r.report(new cl(new CE(o.solution.text))):o.type===1?(r.report(new cl(STe())),r.report(new zee({command:"workbench.action.openSettings",title:Ig.t("Go to Settings"),arguments:[{query:"github.copilot.config.testFixLimits"}]}))):r.report(new cl(TTe()))}render(e,r){return vscpp(vscppf,null,vscpp("meta",{value:new a6(e?.outcome)}))}},STe=()=>Ig.t("Unfortunately I was unable to find a solution to this test failure in the time alloted. My time limit can be configured in your settings."),TTe=()=>Ig.t("Unfortunately I was unable to find a solution to this test failure. Please try providing more context."),a6=class extends ec{constructor(r){super();this.value=r}},MK=class{constructor(e){this.solution=e}update(e){return{shouldFinish:!0}}finish(){let e=this.solution;return Promise.resolve({type:"conversational",content:!e||e.type===1?STe():e.type===0?e.solution.text:TTe()})}};var FK=fe(fr());var c6=class{constructor(){this.id="newNotebook";this.description=FK.t("Create a new Jupyter Notebook");this.locations=[2];this.intentDetectionInput={modelDescription:"Creates a new Jupyter Notebook for tasks such as data analysis, scientific computing, and machine learning.",sampleQuestion:"How do I create a notebook to load data from a csv file?"};this.commandInfo={allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:FK.t("How do I create a notebook to load data from a csv file?")}}static{this.ID="newNotebook"}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return new UK(e,this,o,i)}async asSlashCommand(e,r){return{command:this.id,detail:this.description}}},UK=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.commands=async(e,r)=>{let n=(r.response?.message??"").replace(/\n/g,""),o=/```(?:json)?(.+)/g.exec(n);if(o)try{let s=o[1],a=s.indexOf("```"),c=a===-1?s:s.substring(0,a),u=JSON.parse(c);return Promise.resolve([{command:"github.copilot.newNotebook",arguments:[{turn:r,outline:u}],title:"Create Notebook"}])}catch{}return[]};this.responseProcessor=new b5;this.promptCrafter=new class{async buildPrompt(s,a,c,u,l,d){let f=s.getLatestTurn().request.message,m=s.turns.length>1?s.turns.slice(0,-1):[];return await new mt(e,a,g5,{query:f,history:m,chatVariables:c},e.get(we)).render(u,d)}}}};var NTe=fe(fr());function u6(t,e=!1){let r=t.length,n=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,d=0;function p(y,E){let x=0,R=0;for(;x<y||!E;){let L=t.charCodeAt(n);if(L>=48&&L<=57)R=R*16+L-48;else if(L>=65&&L<=70)R=R*16+L-65+10;else if(L>=97&&L<=102)R=R*16+L-97+10;else break;n++,x++}return x<y&&(R=-1),R}function f(y){n=y,i="",o=0,s=16,d=0}function m(){let y=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&NE(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&NE(t.charCodeAt(n)))for(n++;n<t.length&&NE(t.charCodeAt(n));)n++;else return d=3,t.substring(y,n);let E=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&NE(t.charCodeAt(n))){for(n++;n<t.length&&NE(t.charCodeAt(n));)n++;E=n}else d=3;return t.substring(y,E)}function h(){let y="",E=n;for(;;){if(n>=r){y+=t.substring(E,n),d=2;break}let x=t.charCodeAt(n);if(x===34){y+=t.substring(E,n),n++;break}if(x===92){if(y+=t.substring(E,n),n++,n>=r){d=2;break}switch(t.charCodeAt(n++)){case 34:y+='"';break;case 92:y+="\\";break;case 47:y+="/";break;case 98:y+="\b";break;case 102:y+="\f";break;case 110:y+=`
`;break;case 114:y+="\r";break;case 116:y+="	";break;case 117:let L=p(4,!0);L>=0?y+=String.fromCharCode(L):d=4;break;default:d=5}E=n;continue}if(x>=0&&x<=31)if(t2(x)){y+=t.substring(E,n),d=2;break}else d=6;n++}return y}function g(){if(i="",d=0,o=n,c=a,l=u,n>=r)return o=r,s=17;let y=t.charCodeAt(n);if(BK(y)){do n++,i+=String.fromCharCode(y),y=t.charCodeAt(n);while(BK(y));return s=15}if(t2(y))return n++,i+=String.fromCharCode(y),y===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,u=n,s=14;switch(y){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=h(),s=10;case 47:let E=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!t2(t.charCodeAt(n));)n++;return i=t.substring(E,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;let x=r-1,R=!1;for(;n<x;){let L=t.charCodeAt(n);if(L===42&&t.charCodeAt(n+1)===47){n+=2,R=!0;break}n++,t2(L)&&(L===13&&t.charCodeAt(n)===10&&n++,a++,u=n)}return R||(n++,d=1),i=t.substring(E,n),s=13}return i+=String.fromCharCode(y),n++,s=16;case 45:if(i+=String.fromCharCode(y),n++,n===r||!NE(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;n<r&&v(y);)n++,y=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(y),n++,s=16}}function v(y){if(BK(y)||t2(y))return!1;switch(y){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function b(){let y;do y=g();while(y>=12&&y<=15);return y}return{setPosition:f,getPosition:()=>n,scan:e?b:g,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenStartLine:()=>c,getTokenStartCharacter:()=>o-l,getTokenError:()=>d}}function BK(t){return t===32||t===9}function t2(t){return t===10||t===13}function NE(t){return t>=48&&t<=57}var CTe;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(CTe||(CTe={}));var l6;(function(t){t.DEFAULT={allowTrailingComma:!1}})(l6||(l6={}));function ITe(t,e=[],r=l6.DEFAULT){let n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}return wTe(t,{onObjectBegin:()=>{let c={};s(c),o.push(i),i=c,n=null},onObjectProperty:c=>{n=c},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(c,u,l)=>{e.push({error:c,offset:u,length:l})}},r),i[0]}function wTe(t,e,r=l6.DEFAULT){let n=u6(t,!1),i=[];function o(J){return J?()=>J(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(J){return J?()=>J(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(J){return J?D=>J(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function c(J){return J?D=>J(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let u=s(e.onObjectBegin),l=c(e.onObjectProperty),d=o(e.onObjectEnd),p=s(e.onArrayBegin),f=o(e.onArrayEnd),m=c(e.onLiteralValue),h=a(e.onSeparator),g=o(e.onComment),v=a(e.onError),b=r&&r.disallowComments,y=r&&r.allowTrailingComma;function E(){for(;;){let J=n.scan();switch(n.getTokenError()){case 4:x(14);break;case 5:x(15);break;case 3:x(13);break;case 1:b||x(11);break;case 2:x(12);break;case 6:x(16);break}switch(J){case 12:case 13:b?x(10):g();break;case 16:x(1);break;case 15:case 14:break;default:return J}}}function x(J,D=[],S=[]){if(v(J),D.length+S.length>0){let P=n.getToken();for(;P!==17;){if(D.indexOf(P)!==-1){E();break}else if(S.indexOf(P)!==-1)break;P=E()}}}function R(J){let D=n.getTokenValue();return J?m(D):(l(D),i.push(D)),E(),!0}function L(){switch(n.getToken()){case 11:let J=n.getTokenValue(),D=Number(J);isNaN(D)&&(x(2),D=0),m(D);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return E(),!0}function O(){return n.getToken()!==10?(x(3,[],[2,5]),!1):(R(!1),n.getToken()===6?(h(":"),E(),ce()||x(4,[],[2,5])):x(5,[],[2,5]),i.pop(),!0)}function z(){u(),E();let J=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(J||x(4,[],[]),h(","),E(),n.getToken()===2&&y)break}else J&&x(6,[],[]);O()||x(4,[],[2,5]),J=!0}return d(),n.getToken()!==2?x(7,[2],[]):E(),!0}function N(){p(),E();let J=!0,D=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(D||x(4,[],[]),h(","),E(),n.getToken()===4&&y)break}else D&&x(6,[],[]);J?(i.push(0),J=!1):i[i.length-1]++,ce()||x(4,[],[4,5]),D=!0}return f(),J||i.pop(),n.getToken()!==4?x(8,[4],[]):E(),!0}function ce(){switch(n.getToken()){case 3:return N();case 1:return z();case 10:return R(!0);default:return L()}}return E(),n.getToken()===17?r.allowEmptyContent?!0:(x(4,[],[]),!1):ce()?(n.getToken()!==17&&x(9,[],[]),!0):(x(4,[],[]),!1)}var RTe;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(RTe||(RTe={}));var ATe;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(ATe||(ATe={}));var r2=ITe;var PTe;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(PTe||(PTe={}));var d6=class extends X{render(e,r){return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a VS Code search expert who helps to write search queries for text in a workspace. Users want to search across a whole workspace. Your response will contain parameters to use in the search that targets what the user wants.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"The user's question is ALWAYS related to search or replace. When the user's question does not seem to be related to searching or replacing, you MUST assume that they're searching for or replacing what they are describing.",vscpp("br",null),`For example, if the user says "emojis", try appending "I'm looking for _____" to the beginning (e.g. I'm looking for emojis) to make more sense of it.`,vscpp("br",null),vscpp("br",null),"For all valid questions, you MUST respond with a JSON object with search parameters to use.",vscpp("br",null),'- Your answer MUST wrap the JSON object in "[ARGS START]" and "[ARGS END]". "[ARGS START]" must be on a new line.',vscpp("br",null),'- Your answer MUST have an explanation in full, human-readable sentences. This goes before the "[ARGS START]" line.',vscpp("br",null),vscpp("br",null),'If you put a regex in the "query" parameter, make sure to set "isRegex" to true.',vscpp("br",null),'If you put a regex in the "query" parameter, do not start and/or end with forward slashes to denote a regex literal.',vscpp("br",null),"You MUST NOT give an answer with an empty-string query parameter.",vscpp("br",null),vscpp("br",null),'The "replace" string will be used to replace the query-matched search results.',vscpp("br",null),vscpp("br",null),'If you want to target certain files, set "filesToInclude" to a glob pattern. DO NOT assume the "filesToInclude" and "filesToExclude" without being very sure that the user wants to target these files!',vscpp("br",null),vscpp("br",null),'If the query is case sensitive, set "isCaseSensitive" to true.',vscpp("br",null),vscpp("br",null),"By default, all string fields are the empty string, and all boolean fields are false. Only list the fields you want to change.",vscpp("br",null),vscpp("br",null),"You should write the JSON object of the search parameters in the following format:",vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": ...,',vscpp("br",null),'	"replace": ...,',vscpp("br",null),'	"filesToInclude": ...,',vscpp("br",null),'	"filesToExclude": ...,',vscpp("br",null),'	"isRegex": ...,',vscpp("br",null),'	"isCaseSensitive": ...,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Search for 'foo' in all files under my 'src' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Populate the query field with 'foo' and specify the files to include as 'src/'.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "foo",',vscpp("br",null),'	"filesToInclude": "src" ,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all CamelCase words in all files under the 'src/extensions' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a regex search for camelCase variables by checking for any word that has a lowercase letter followed by an uppercase letter, followed by any number of lowercase letters. You can use `\\b[a-z]+[A-Z][a-z]+\\b` to acheive this.",vscpp("br",null),"This must be case-sensitive since the capitalization of the letters in our regex matters.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "\\\\b[a-z]+[A-Z][a-z]+\\\\b",',vscpp("br",null),'	"filesToInclude": "src/extensions" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all hex color codes in css files",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a search for 6-digit or 3-digit hex color codes using the regex `#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\b`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\\\b",',vscpp("br",null),'	"filesToInclude": "*.css" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all HTTPS links in markdown.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Search all URLs that have the HTTPS protocol in a markdown file. Make sure to include all valid URL characters in their respective places. This regex should achieve this: `https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#()?&//=]*)`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#()?&//=]*)",',vscpp("br",null),'	"filesToInclude": "*.md" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all YYYY-MM-DD dates with MM/DD/YYYY dates. Don't do this in typescript files.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"You will need to use the regex `\\b(\\d{4})-(\\d{2})-(\\d{2})\\b` to match the YYYY-MM-DD date format. Then, you will need to use the replace string `$2/$3/$1` to replace the date with the MM/DD/YYYY format.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "\\\\b(\\\\d{4})-(\\\\d{2})-(\\\\d{2})\\\\b",',vscpp("br",null),'	"replace: "$2/$3/$1",',vscpp("br",null),'	"filesToExclude": "*.ts",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all camel case variable names with snake case variable names.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To replace all camel case variables with snake case, we will need to:",vscpp("br",null),"1. Find all sequences of lowercase letters succeeded by uppercase letters. Use `([a-z]+)([A-Z])` to capture these sequences.",vscpp("br",null),"2. Separate them with an underscore character. `$1_$2` does this.",vscpp("br",null),"3. Convert both characters to lowercase. Adjust the previous replace text to be `\\l$1_\\l$2`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "([a-z]+)([A-Z])",',vscpp("br",null),'	"replace: "\\\\l$1_\\\\l$2",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"alphanumeric",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all alphanumeric characters, you can use the regex `[a-zA-Z0-9]`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "[a-zA-Z0-9]",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"link",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all web links, use the regex `https?:\\/\\/\\S+`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/\\\\S+",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),'Search for actionbar files outside of my "extensions" directoy',vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To do this, use the query `actionbar` in all files except the ones in `extensions`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "actionbar",',vscpp("br",null),'	"filesToExclude": "extensions",',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"typescript for loop",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),'To look for "for" loops in most languages, use the query `for\\s*\\(`.',vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "for\\s*\\(",',vscpp("br",null),'	"isRegex: true,',vscpp("br",null),'	"filesToInclude: "*.ts"',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(zr,{priority:600,history:this.props.history})),vscpp(Ra,{priority:700}),vscpp(un,{priority:800,document:this.props.document,range:this.props.selection}),vscpp(ee,{priority:900},this.props.query))}};function hXe(t){if(!t)return[];let e=[],r={query:t.query??"",replace:t.replace??"",filesToInclude:t.filesToInclude??"",filesToExclude:t.filesToExclude??"",isRegex:t.isRegex??!1,isCaseSensitive:t.isRegex??!1};return e.push({command:"github.copilot.executeSearch",arguments:[r],title:"Search"}),e}function kTe(t){let e=$c(t).at(0),r;if(e){let n;try{n=r2(e.code)}catch{}n&&(r=n)}return r}function gXe(t){if(!t)return[];let e=[`| Parameter  | Value |
`,`| ------ | ----- |
`];for(let[r,n]of Object.entries(t)){if(n==="")continue;let i=n;(typeof n=="string"||n instanceof String)&&(i=n.replace(/\|/g,"\\|")),e.push(`| ${r} | \`${i}\` |
`)}return e.push(`
`),e}var DTe="Search for 'foo' in all files under my 'src' directory",qK=class extends xs{constructor(r){super();this.accessor=r}createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new mt(this.accessor,n,d6,{query:u,history:l},this.accessor.get(we))}},p6=class{constructor(){this.id="search";this.locations=[2];this.description=NTe.t("Generate query parameters for workspace search");this.intentDetectionInput={sampleQuestion:DTe};this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:zd,sampleRequest:DTe}}static{this.ID="search"}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new qK(e),responseProcessor:new iE([{start:"[ARGS END]",stop:"[ARGS START]"}],s=>gXe(kTe(s.join("")))),commands:async(s,a)=>{let c=kTe(a.response?.message??"");return hXe(c)}}}};var n2=fe(fr());var HK=class extends xs{constructor(r){super();this.accessor=r}async createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[],d=await Vw(this.accessor,1e3,a);return new mt(this.accessor,n,SE,{query:u,history:l,fileTree:d},this.accessor.get(we))}},LTe="Where is the toolbar code?",f6=class{constructor(){this.id="semanticSearch";this.locations=[2];this.description=n2.t("Find relevant code to your query");this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!1,sampleRequest:LTe};this.intentDetectionInput={sampleQuestion:LTe}}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new HK(e),responseProcessor:new jK(e,o)}}},jK=class{constructor(e,r){this.accessor=e;this.endpoint=r}async processResponse(e,r,n,i,o){let s=r[r.length-1].content,a=0,c="";for await(let{delta:l}of n)a+=l.text.length,c+=l.text;i.progress(n2.t("Looking for relevant code"));let u=_E(s,c);return vXe(this.accessor,this.endpoint,u,o).then(l=>yXe(this.accessor,l,i))}};async function vXe(t,e,r,n){let i=t.get(rg),o=await sy(t,{valueFor4096:8,maxMultiplier:4});return aK(i,e,r,o,n,!0)}function yXe(t,e,r){if(e.length===0){let o=n2.t(`No relevant code found. Please be more specific.
`);return r.markdown(o),o}r.markdown(n2.t(`Here is some relevant code:

`));let n=t.get(it),i="";for(let o of e)i+=bXe(o,r,n);return i}function bXe(t,e,r){let n=[],o=`## ${Uh(r,t.file)}

`;return e.markdown(o),n.push(o),t.locations.forEach(s=>{let a={uri:t.file,range:s.range},c=s.range.start.line,u=s.range.end.line,l=c+1===u?`Line ${c+1}`:`Lines ${c+1}-${u}`;e.markdown("- "),e.anchor(a,l),e.markdown(`

`),n.push(l+`

`),e.markdown(s.code+`
`),n.push(s.code+`
`)}),n.join("")}var GK=fe(fr());var m6=class extends X{render(e){return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a programmer who specializes in using the command line. Your task is to help the Developer craft a command to run on the command line.",vscpp("br",null),vscpp(cn,null),vscpp(Pt,null),vscpp(xi,null),vscpp(Dr,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",`
1. Read the provided relevant workspace information (file names, project files in the project root) to understand the user's workspace.`,`
2. Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
    - Prefer single line commands.
    - Omit an explanation unless the suggestion is complex, if an explanation is included then be concise.
    - Provide the command suggestions using the active shell and operating system.
    - When there is text that needs to be replaced in the suggestion, prefix the text with '{', suffix the text with '}' and use underscores instead of whitespace. Only do this when the replacement text is NOT provided.
    - Say "I'm not quite sure how to do that." when you aren't confident in your explanation`,OTe(this.props.shellType)?"\n    - Prefer idiomatic PowerShell over aliases for other shells or system utilities. For example use `Stop-Process` or `Get-NetTCPConnection` instead of `kill` or `lsof` respectively.\n	- Only use unix utilities when there is no PowerShell equivalent.\n    - Prefer cross-platform PowerShell scripting that works on any operating system.":`
    - Only use a tool like python or perl when it is not possible with the shell.`,`
3. At the end of the response, list all text that needs to be replaced with associated descriptions in the form of a markdown list
`.trim(),vscpp("br",null)),vscpp(Ke,{priority:700},"Examples:",vscpp("br",null),_Xe(this.props.shellType)),this.props.history&&vscpp(vscppf,null,vscpp(zr,{priority:600,history:this.props.history})),vscpp(Ra,{priority:600}),vscpp(ee,{priority:800},"The active terminal's shell type is:",vscpp("br",null),this.props.shellType),vscpp(ee,{priority:800},"The active operating system is:",vscpp("br",null),this.props.osName),vscpp(ji,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};function _Xe(t){let e=['User: How do I revert a specific commit?\nAssistant:\n```sh\ngit revert {commit_id}\n```\n\nUser: How do I commit in git?\nAssistant:\n```sh\ngit commit -m "{message}"\n```'];switch(OTe(t)||e.push("User: go to the foo dir\nAssistant:\n```sh\ncd foo\n```"),t){case"ps1":case"pwsh":case"powershell":{e.push("User: go to the foo dir\nAssistant:\n```pwsh\ncd .\\foo\\\n```\n\nUser: How do I delete a directory?\nAssistant:\n```pwsh\nRemove-Item {dir_name}\n```\n\nUser: create a file called foo\nAssistant:\n```pwsh\nNew-Item -ItemType File -Name foo\n```");break}case"bash":{e.push("User: Print all files starting with \"pre\"\n```bash\nfind . -type f -name 'pre*'\n```");break}default:{e.push("\nUser: How do I print all files recursively within a directory?\nAssistant:\n```sh\nls -lR\n```");break}}return e.join(`

`)}function OTe(t){return t==="ps1"||t==="pwsh"||t==="powershell"}var h6=class{constructor(){this.locations=[2];this.id="terminal";this.description=GK.t("Ask how to do something in the terminal");this.intentDetectionInput={sampleQuestion:"How do I list files in the terminal"};this.commandInfo={sampleRequest:GK.t("How do I view all files within a directory including sub-directories")}}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return new VK(e,this,o,i)}},VK=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;let o=this,s=e.get(ft).OS,a=e.get(ho).terminalShellType;this.promptCrafter=new class{async buildPrompt(u,l,d,p,f,m){let g=u.getLatestTurn().request.message,v=u.turns.length>1?u.turns.slice(0,-1):[];return await new mt(o.accessor,l,m6,{query:g,chatVariables:d,history:v,osName:s,shellType:a},e.get(we)).render(p,m)}}}async followUps(e,r){let n="Explain the suggested command",i=!1,o=r.response?.message;if(o){let a=$c(o);if(a.length===0)return[];a.length===1?n=`Explain this command:

${s(a[0])}`:(i=!0,n=`Explain these commands:${a.map(c=>`

${s(c)}`).join("")}`)}return[{prompt:n,label:i?"Explain the suggested commands":"Explain the suggested command"}];function s(a){return`${a.startMarkup}${a.language}
${a.code.trim()}
${a.startMarkup}`}}};var aCe=fe(fr());var eQ=fe(tCe());function rCe(t,e){return typeof e=="string"?eQ.default.isMatch(t.fsPath,e,{dot:!0,windows:process.platform==="win32"}):eQ.default.isMatch(t.fsPath,e.pattern,{dot:!0,windows:process.platform==="win32"})}var OE={location:"sameFolder",prefix:"test_",suffixes:[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"]},ME={csharp:{suffixes:["Test"],location:"testFolder"},dart:{suffixes:["_test"],location:"testFolder"},go:{suffixes:["_test"],location:"sameFolder"},java:{suffixes:["Test"],location:"testFolder"},javascript:{suffixes:[".test",".spec"],location:"sameFolder"},javascriptreact:{suffixes:[".test",".spec"],location:"sameFolder"},kotlin:{suffixes:["Test"],location:"testFolder"},php:{suffixes:["Test"],location:"testFolder"},powershell:{suffixes:[".Tests"],location:"testFolder"},python:{prefix:"test_",location:"testFolder"},ruby:{suffixes:["_test","_spec"],location:"testFolder"},rust:{suffixes:[""],location:"testFolder"},swift:{suffixes:["Tests"],location:"testFolder"},typescript:{suffixes:[".test",".spec"],location:"sameFolder"},typescriptreact:{suffixes:[".test",".spec"],location:"sameFolder"}},eJe={cs:"csharp",dart:"dart",go:"go",java:"java",js:"javascriptreact",kt:"kotlin",php:"php",ps1:"powershell",py:"python",rb:"ruby",rs:"rust",swift:"swift",ts:"typescript",tsx:"typescriptreact"},tJe=function(){let t={};for(let[e,r]of Object.entries(eJe))t[e]=ME[r];return t}(),FE=class{constructor(e,r){this._search=e;this._tabs=r}_findTabMatchingPattern(e){return this._tabs.tabs.find(n=>n.uri&&n.uri.scheme!==Ln.untitled&&rCe(n.uri,e))?.uri}async findTestFileForSourceFile(e,r){if(e.isUntitled)return;let n=sc(e.uri),i=Oa(e.uri),o=ME[e.languageId]??OE,s=[];if(o.prefix&&s.push(o.prefix+n),o.suffixes)for(let u of o.suffixes??[]){let l=n.replace(`${i}`,`${u}${i}`);s.push(l)}let a=`**/{${s.join(",")}}`,c=this._findTabMatchingPattern(a);return c||(c=await this._search.findFilesWithDefaultExcludes(a,1,r)),c}async findAnyTestFileForSourceFile(e,r){let n=ME[e.languageId]??OE,i=[];if(n.prefix&&i.push(`${n.prefix}*`),n.suffixes){let a=Oa(e.uri);for(let c of n.suffixes??[])i.push(`*${c}${a}`)}let o=`**/{${i.join(",")}}`,s=this._findTabMatchingPattern(o);return s||(s=await this._search.findFilesWithDefaultExcludes(o,1,r)),s}async findFileForTestFile(e,r){let n=ME[e.languageId]??OE,i=sc(e.uri),o=[];n.suffixes&&o.splice(0,0,...n.suffixes),n.prefix&&o.splice(0,0,n.prefix);for(let s of o){let a=i.replace(s,"");if(a!==i){let c=`**/${a}`,u=this._findTabMatchingPattern(c);if(u||(u=await this._search.findFilesWithDefaultExcludes(c,1,r)),u)return u}}}};function UE(t){let e;gt.isUri(t)||(e=ME[t.languageId],t=t.uri);let r=sc(t),n=Oa(t);return e??=tJe[n.replace(".","")],e?!(e.suffixes&&!e.suffixes.some(o=>r.endsWith(o+n))||e.prefix&&!r.startsWith(e.prefix)):!!(OE.suffixes.some(o=>r.endsWith(o+n))||r.startsWith(OE.prefix))}function nCe(t){let e=ME[t.languageId]??OE,r=sc(t.uri);if(e.prefix)return e.prefix+r;let n=Oa(t.uri),i=e.suffixes&&e.suffixes.length>0?e.suffixes[0]:".test";return r.replace(`${n}`,`${i}${n}`)}var _6=class extends X{async prepare(e,r,n){let i=Object.entries(ng).reduce((o,[s,a])=>{let c=vi.getCommand(s,this.props.chatLocation)?.intent?.description;o+=`
* ${c}`;for(let u of Object.values(a)){let l=vi.getCommand(u,this.props.chatLocation)?.intent?.description;o+=`
* ${l}`}return o},"You can answer general programming questions and perform the following tasks:");try{i+=`
You use the ${e.endpoint.model.toUpperCase()} version of OpenAI's GPT models.`}catch{}return{capabilitiesPromptPiece:i}}render(e,r){return vscpp(vscppf,null,e.capabilitiesPromptPiece)}};var iCe=require("util");var s2=class extends ec{constructor(r){super();this.uri=r}},x6=class extends X{constructor(){super(...arguments);this._decoder=new iCe.TextDecoder}async prepare(r,n,i){let{documentContext:o,endpointInfo:s}=this.props;if(UE(o.document))return;let a=this.accessor.get(Cn),c=new FE(this.accessor.get(uc),this.accessor.get(It)),u=s.modelMaxPromptTokens*4/3,l=async(p,f=u)=>{let h=this._decoder.decode(await a.readFile(p)).substring(0,f);return`${Ui.forUri(o.language,p)}

${h}`},d=await c.findTestFileForSourceFile(o.document,i??Gr.None);if(d)return{kind:"candidateTestFile",codeExcerpt:await l(d),promptReferences:[new $n(d)],candidateTestFile:d};{let p=await c.findAnyTestFileForSourceFile(o.document,i??Gr.None);return p?{kind:"anyTestFile",codeExcerpt:await l(p),promptReferences:[new $n(p)]}:void 0}}render(r,n){if(r!==void 0)switch(r.kind){case"candidateTestFile":return vscpp(ee,null,vscpp("meta",{value:new s2(r.candidateTestFile)}),vscpp("references",{value:r.promptReferences}),vscpp("br",null),vscpp("br",null),"Excerpt of the existing test file:",vscpp("br",null),vscpp("br",null),vscpp("br",null),"```",this.props.documentContext.document.languageId,vscpp("br",null),r.codeExcerpt,vscpp("br",null),"```",vscpp("br",null),vscpp("br",null),"Because a test file exists: ",vscpp("br",null),"- Do not generate preambles, like imports, copyright headers etc.",vscpp("br",null),"- Do generate code that can be appended to the existing test file.");case"anyTestFile":return vscpp(ee,null,"This is sample test file: ",vscpp("br",null),vscpp("br",null),"```",this.props.documentContext.document.languageId,vscpp("br",null),r.codeExcerpt,"``` ",vscpp("br",null))}}};var oCe=require("util");var E6=re("ITestDepsResolver"),BE=class{constructor(e,r){this._searchService=e;this._fileSystemService=r;this._jsTsTestDeps=new Set(["mocha","jest","chai","ava","jasmine","qunit","tape","cypress","puppeteer","enzyme","testing-library","sinon","supertest","happy-dom"]);this._cachedResults=new Map,this._textDecoder=new oCe.TextDecoder}async getTestDeps(e){if(this._cachedResults.has(e))return this._cachedResults.get(e);let r=[];switch(e){case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":{r=await this._findTestDepInPackageJSON();break}default:r=[];break}return this._cachedResults.set(e,r),r}async _findTestDepInPackageJSON(){let e=await this._searchService.findFiles("**/package.json",{exclude:"**/node_modules/**",useDefaultExcludes:!0});return(await Promise.allSettled(e.map(async n=>{let i=await this._fileSystemService.readFile(n),o=JSON.parse(this._textDecoder.decode(i)),s=o.dependencies||{},a=o.devDependencies||{};return[s,a].flatMap(u=>Object.keys(u).filter(l=>this._jsTsTestDeps.has(l)))}))).flatMap(n=>n.status==="fulfilled"?n.value:[])}};BE=ze([rt(0,uc),rt(1,Cn)],BE);var S6=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.documentContext=o;this.createReplyInterpreter=V1.createFactory(async(e,r)=>{Jg(this.promptCrafter.selectionContextMetadata,"FileInvocation#createReplyInterpreter: Non-test file prompt crafter must have selection context metadata after prompt is built.");let n=pf(this.promptCrafter.selectionContextMetadata.contextInfo,e,this.documentContext.language);if(!n)return{type:"conversational",content:e};r.report({content:n.contentBeforeCode});let i=n.code,o=this.documentContext.document,s=this.promptCrafter.existingTestFile;if(s){let l=await this.accessor.get(it).openTextDocument(s),d=new I9;return d.set(s,[zi.insert(new Ht(l.lineCount,0),i)]),{type:"workspaceEdit",workspaceEdit:d}}let a=nCe(o),c=Is.joinPath(o.uri,`../${a}`).with({scheme:Ln.untitled}),u=new I9;return u.createFile(c,{ignoreIfExists:!0}),u.replace(c,new Ge(0,0,0,0),i),{type:"workspaceEdit",workspaceEdit:u}});this.promptCrafter=new tQ(i,r,o,n)}},tQ=class{constructor(e,r,n,i){this._accessor=e;this._endpoint=r;this._docContext=n;this._location=i}get selectionContextMetadata(){return Jg(this._selectionContextMetadata!==void 0,"not undefined"),this._selectionContextMetadata}get existingTestFile(){return this._existingTestFile}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn()?.request.message,c=e.turns.at(-2)?.request.message,u=new mt(this._accessor,this._endpoint,rQ,{history:c,context:this._docContext,endpoint:this._endpoint,userQuery:a??"",location:this._location},this._accessor.get(we)),l=await u.render(i,s),d=u.getMeta(s2);return d&&(this._existingTestFile=d.uri),this._selectionContextMetadata=u.getMeta(Bi),l}},rQ=class extends X{async prepare(e,r,n){return{testFrameworks:await this.accessor.get(E6).getTestDeps(this.props.context.document.languageId)}}render(e,r){let{history:n,context:i,endpoint:o,userQuery:s,location:a}=this.props,c=i.language.languageId,u=i.language.lineComment.start;return vscpp(vscppf,null,vscpp(Ke,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),a===1&&vscpp(vscppf,null,"The user has a ",c," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and ",u," FILEPATH.",vscpp("br",null),"Answer with a single ",c," code block.",vscpp("br",null),"If you modify existing code, you will use the ",u," BEGIN: and ",u," END: markers.",vscpp("br",null)),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",a===2&&vscpp(vscppf,null,vscpp(_6,{chatLocation:a,endpointInfo:o}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn."),e.testFrameworks.length>0&&vscpp(vscppf,null,vscpp("br",null),"The project has following testing dependencies: ",e.testFrameworks.join(", "),".")),n&&vscpp(ee,null,n),vscpp(x6,{documentContext:i,endpointInfo:o}),vscpp(hE,{documentContext:i,endpointInfo:o}),vscpp(ee,null,`Please generate tests for my code. ${s}`.trim()))}};var sCe=require("util");var T6=class extends X{async prepare(e,r,n){let{documentContext:i,endpointInfo:o}=this.props;if(!UE(i.document))return;let a=await new FE(this.accessor.get(uc),this.accessor.get(It)).findFileForTestFile(i.document,n??Gr.None);if(!a)return;let c=o.modelMaxPromptTokens*4/3;function u(d,p,f=c){return`${Ui.forUri(i.language,d)}

${p.substring(0,f)}`}let l;try{let d=await this.accessor.get(it).openTextDocument(a),p=d.getText(),f=await JW(this.accessor,d,100),{outlineAbove:m,outlineBelow:h}=yY(p,f,{startOffset:p.length,endOffset:p.length},""),g=`${m}
${h}`;l=new Xd(`
This is an excerpt of the file that this test is covering:

`),l.appendCodeblock(u(a,g),i.document.languageId)}catch{}if(!l){l=new Xd(`
This is an excerpt of the file that this test is covering:

`);let p=await this.accessor.get(Cn).readFile(a),f=new sCe.TextDecoder().decode(p),m=u(a,f);l.appendCodeblock(m,i.document.languageId)}return{message:l,references:[new $n(a)]}}render(e,r){if(e!==void 0)return vscpp(ee,null,vscpp("references",{value:e.references}),e.message.value)}};var C6=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.context=o;this.responseProcessor={processResponse:async(e,r,n,i)=>{try{let o=[Wo.begin(this.context.language),Wo.end(this.context.language),Ui.forLanguage(this.context.language)];for await(let s of sY(cu.map(n,a=>a.text)))s.kind===1&&o.some(a=>s.value.startsWith(a))||i.markdown(s.value)}catch(o){console.error(o)}return""}};this.createReplyInterpreter=e=>(Jg(this.promptCrafter.selectionContextMetadata!==void 0,"not undefined"),new z1(this.accessor,this.promptCrafter.selectionContextMetadata,this.context,2,e));this.promptCrafter=new nQ(i,r,o)}},nQ=class{constructor(e,r,n){this._accessor=e;this._endpoint=r;this._docContext=n}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn()?.request.message,c=e.turns.at(-2)?.request.message,u=this._docContext,l=new mt(this._accessor,this._endpoint,iQ,{history:c,context:u,endpoint:this._endpoint,userQuery:a??""},this._accessor.get(we)),d=await l.render(i,s);return this.selectionContextMetadata=l.getMeta(Bi),d}},iQ=class extends X{render(e,r){let{history:n,context:i,endpoint:o,userQuery:s}=this.props;return vscpp(vscppf,null,vscpp(Ke,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"The user has a ",i.language.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and // FILEPATH.",vscpp("br",null),"Answer with a single ",i.language.languageId," code block.",vscpp("br",null),"If you modify existing code, you will use the // BEGIN: and // END: markers.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal."),n&&vscpp(ee,null,n),Cr(i.document.uri)?vscpp(mg,{documentContext:i}):vscpp(J1,{documentContext:i}),vscpp(T6,{documentContext:i,endpointInfo:o}),vscpp(ee,null,`Please generate tests for my code. ${s}`.trim()))}};var I6=class{constructor(){this.id="tests";this.locations=[2,1];this.description=aCe.t("Generate unit tests for the selected code");this.intentDetectionInput={sampleQuestion:"Write a set of detailed unit test functions for the code above."};this.commandInfo=void 0}static{this.ID="tests"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to generate tests.");let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return UE(n.document)?new C6(this,o,i,e,n):new S6(this,o,i,e,n)}};var oQ=fe(fr());async function cCe(t,e){let r=t.get(Kd);await r.loadIndexes();let n=rJe(r,e.response?.message??"");return nJe(r,n.settings,n.commands)}function rJe(t,e){let r=[];e=e.replace(/\n/g,"");for(let c of $c(e)){if(c.language!=="json"&&c.language!=="")continue;let u;try{u=r2(c.code)}catch{}u&&!Array.isArray(u)&&r.push(u)}let n=[],i=/\[COMMANDS START\]```(?:json)?(.+)\[COMMANDS END\]/g,o;for(o of e.matchAll(i)){let c=o[1].trim(),u;try{u=r2(c)}catch{}u&&Array.isArray(u)&&n.push(...u)}let s=r.map(c=>{for(let u of Object.keys(c))if(!t.hasSetting(u))return!1;return!0}).some(c=>c===!1),a=n.map(c=>{if(c.command&&!t.hasCommand(c.command))return!1}).some(c=>c===!1);return{settings:r,commands:n,validationFailed:s||a}}async function nJe(t,e,r){let n=[],i=r.length;for(let o of e){let s="";for(let a of Object.keys(o))n.some(c=>c.arguments&&c.arguments[0].includes(`@id:${a}`))||t.hasSetting(a)&&(s+=`@id:${a} `);s=s.trimEnd(),s&&n.push({command:"workbench.action.openSettings",arguments:[s],title:"Show in Settings Editor"})}for(let o of r)if(o.command==="workbench.extensions.search"||o.command==="workbench.extensions.installExtension"){let s=(Array.isArray(o.args)?o.args:[o.args]).filter(a=>typeof a=="string");if(s.length===1){let a=["featured","popular","recentlyPublished","recommended","updates","builtin","enabled","disabled","installed","workspaceUnsupported"];s[0].includes(":")&&!s[0].startsWith("@")?s[0]=`@${s[0]}`:a.includes(s[0])&&(s[0]=`@${s[0]}`)}n.push({command:"workbench.extensions.search",arguments:s,title:"Search Extension Marketplace"})}else{let s=t.getCommand(o.command);if(!s)continue;n.push({command:"workbench.action.quickOpen",arguments:[`>${s.originalLabel}`],title:i>1?`Show "${s.originalLabel}"`:"Show in Command Palette"})}return n}var uCe=fe(fr());var w6=class extends X{async prepare(r,n,i){let o=n?await Kw(n,new ws(uCe.t("Searching doc index....")),this.searchDocsSearchForContext(this.props.query,10,i),1e3):await this.searchDocsSearchForContext(this.props.query,10,i),s=this.accessor.get(Kd);this._embeddingCompute??=this.accessor.get(Vi);let a=await this._embeddingCompute?.computeEmbeddings([this.props.query],void 0);if(!a)return{docSearchResults:o,settings:[],commands:[]};let{commands:c,settings:u}=n?await Kw(n,new ws("Searching command and setting index...."),s.nClosestValues(a[0],5),500):await s.nClosestValues(a[0],5);return{docSearchResults:o,settings:u,commands:c}}async searchDocsSearchForContext(r,n,i){return this._docsSearchClient||(this._docsSearchClient=this.accessor.get(Y3)),this._docsSearchClient.search(r,{repo:"microsoft/vscode-docs"},n,.75,i)}render(r){let n=this.accessor.get(ft).OS;return vscpp(vscppf,null,vscpp(Ke,{priority:1e3},"You are a VS Code assistant. Your job is to assist users in using VS Code by providing knowledge to accomplish their task. This knowledge should focus on settings and commands, but also includes documentation. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",n," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You must respond with either a setting to set or a command to execute when applicable.",vscpp("br",null),"When referring to a command, you must use the command name in markdown bold syntax.",vscpp("br",null),"When referring to any commands, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] at the end of your response which lists all commands you referenced in your response in the order they were referenced in a JSON code block containing a JSON array.",vscpp("br",null),"If a command or setting references another command or setting, you must respond with the original setting or command and the referenced setting or command.",vscpp("br",null),"All referenced settings must be properly formatted in a JSON markdown code block to allow copying them into the user's settings.json file.",vscpp("br",null),"You must not respond with a setting that is not in a properly formatted JSON markdown code block.",vscpp("br",null),"If a setting and command will accomplish the same thing, you must suggest the command instead.",vscpp("br",null),"You must not suggest opening the settings editor.",vscpp("br",null),"If answering with a keybinding, please still include the command bound to the keybinding.",vscpp("br",null),"If a keybinding contains a backtick you must escape it. For example the keybinding Ctrl + backtick would be written as ``ctrl + ` ``",vscpp("br",null),"You must not suggest opening the command palette to execute commands.",vscpp("br",null),"You must not suggest commands or settings identifiers that do not exist.",vscpp("br",null),"If you believe the context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),'If an extension might help the user, you may suggest a search query for the extension marketplace. You must also include the command **Search marketplace** (`workbench.extensions.search`) with args set to the suggested query in the commands section at the end of your response. The query can also contain the tags "@popular", "@recommended", or "@featured" to filter the results.',vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"[EXAMPLES START]",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Settings response",vscpp("br",null),"Question: How do I disable telemetry?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp(bi,{code:`{
	"telemetry.telemetryLevel": "off"
}`,languageId:"json"}),"is a setting which can be used to disable telemetry.",vscpp("br",null),vscpp("br",null),"## Command response",vscpp("br",null),"Question: How do I close all editors?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Close All Editors** command to close all editors.",vscpp("br",null),vscpp("br",null),"[COMMANDS START]",vscpp("br",null),vscpp(bi,{code:`[
	{"command": "workbench.action.closeAllEditors" }
]`,languageId:"json"}),"[COMMANDS END]",vscpp("br",null),vscpp("br",null),"## No such command",vscpp("br",null),"Question: How do I move the terminal to a new window?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"There is no such command.",vscpp("br",null),vscpp("br",null),"## Invalid Question",vscpp("br",null),"Question: How do I bake a potato?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Sorry this question isn't related to VS Code.",vscpp("br",null),vscpp("br",null),"## Marketplace search",vscpp("br",null),"Question: How do I add PHP support?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Search marketplace** command to search for extensions that add PHP support.",vscpp("br",null),vscpp("br",null),"[COMMANDS START]",vscpp("br",null),vscpp(bi,{code:`[
	{"command": "workbench.extensions.search", "args": "php" }
]`,languageId:"json"}),"[COMMANDS END]"),vscpp(zr,{priority:700,history:this.props.history}),vscpp(ee,{priority:800},"Relevant information about VS Code:",vscpp("br",null),"The current question is related to VS Code. The application is currently open.",vscpp("br",null),"If a command or setting is not a valid answer, but it still relates to VS Code, please still respond.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"At the end of your response, if you reference a command, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all commands you referenced in your response.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),'Below is a list of commands and settings we found which might be relevant to the question. For view related commands "Toggle" often means Show or Hide. A setting may reference another setting, that will appear as \\`#setting.id#\\`, you must return the referenced setting as well. You may use this context to help you formulate your response, but are not required to.',vscpp("br",null),r.commands.length>0&&vscpp(vscppf,null,"Here are some possible commands:",vscpp("br",null)),r.commands.length>0&&r.commands.map(i=>vscpp(zo,null,"- ",i.label,' ("',i.key,'") (Keybinding: "',i.keybinding,'")')),r.settings.length>0&&vscpp(vscppf,null,"Here are some possible settings:",vscpp("br",null)),r.settings.length>0&&r.settings.map(i=>vscpp(zo,null,"settingItemToContext(c)")),r.docSearchResults.length>0&&vscpp(vscppf,null,"Below is a list of information from the VS Code documentation which might be relevant to the question. Feel free to use this context to help you formulate your response, but you are not required to.",vscpp("br",null)),r.docSearchResults.map(i=>vscpp(zo,null,"##",i?.title?.trim()," - ",i.path,vscpp("br",null),i.contents))),vscpp(ee,{priority:900},this.props.query))}};var sQ=class extends xs{constructor(r){super();this.accessor=r}async createRenderer(r,n,i,o,s,a){let u=r.getLatestTurn().request.message,l=r.turns.length>1?r.turns.slice(0,-1):[];return new mt(this.accessor,n,w6,{query:u,history:l},this.accessor.get(we))}},R6=class{constructor(){this.id="vscode";this.locations=[2];this.description=oQ.t("Ask questions about VS Code");this.intentDetectionInput={sampleQuestion:"What is the command to open the integrated terminal?",modelDescription:"Looks up information about VS Code via commands, settings, and documentation to accomplish the given editor-specific task."};this.commandInfo={allowsEmptyArgs:!1,sampleRequest:oQ.t("What is the command to open the integrated terminal?")}}async invoke(e,r,n){let i=r.location,o=await e.get(Ye).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new sQ(e),commands:cCe}}};_i.registerIntent(new Sg);_i.registerIntent(new yy);_i.registerIntent(new Eg);_i.registerIntent(new I6);_i.registerIntent(new DE);_i.registerIntent(new u5);_i.registerIntent(new p6);_i.registerIntent(new f6);_i.registerIntent(new h6);_i.registerIntent(new Ey);_i.registerIntent(rc.Instance);_i.registerIntent(new $5);_i.registerIntent(new U5);_i.registerIntent(new R6);_i.registerIntent(new m5);_i.registerIntent(new c6);_i.registerIntent(new s6);var iJe=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function dCe(t,e="client"){if(e==="proxy")return!1;let r=t.slice();return r.reverse(),lCe(r)||lCe(r.filter(n=>n.trim().length>0))}function lCe(t){let e=oJe(t);for(let r of iJe){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function oJe(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}var aQ=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.newText=[];this.tokens=[];this.text_offset=[]}append(e){e.text&&(this.text.push(e.text),this.newText.push(e.text)),e.delta?.content&&(this.text.push(e.delta.content),this.newText.push(e.delta.content)),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[]))}flush(){let e=this.newText.join("");return this.newText=[],e}};function aJe(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var A6=class t{constructor(e,r,n,i,o,s,a,c,u){this.expectedNumChoices=r;this.ourRequestId=n;this.response=i;this.body=o;this.telemetryData=s;this.dropCompletionReasons=a;this.fastCancellation=c;this.cancellationToken=u;this.requestId=Sw(this.response);this.stats=new cQ(this.expectedNumChoices);this.solutions={};this.logger=e.get(pe).getLogger("streamChoices"),this.telemetryService=e.get(Ne)}static async create(e,r,n,i,o,s,a){let c=await i.body();c.setEncoding("utf8");let u=await e.get(sl).fastCancellation();return new t(e,r,n,i,c,o,s??["content_filter"],u,a)}async*processSSE(e=async()=>{}){try{yield*this.processSSEInner(e)}finally{this.fastCancellation&&this.cancel(),this.logger.info(`request done: requestId: [${this.ourRequestId}] responseId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),this.logger.debug(`request stats: ${this.stats}`)}}async*processSSEInner(e){let r="",n=!1;e:for await(let i of this.body){if(this.maybeCancel("after awaiting body chunk"))return;this.logger.debug("chunk",i.toString());let[o,s]=aJe(r+i.toString());r=s;for(let a of o){let c=a.slice(5).trim();if(c==="[DONE]"){yield*this.finishSolutions();return}let u;try{u=JSON.parse(c)}catch{this.logger.error(`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,a),vf(this.telemetryService,`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,a);continue}if(!u.choices){u.copilot_references||(u.error!==void 0?(this.logger.error(`Error in response for request id ${this.requestId.headerRequestId}:`,u.error.message),vf(this.telemetryService,`Error in response for request id ${this.requestId.headerRequestId}:`,u.error.message)):(this.logger.error(`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`),vf(this.telemetryService,`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`)));continue}if(this.requestId.created===0&&(this.requestId=Sw(this.response,u),this.requestId.created===0&&u.choices?.length&&(this.logger.error(`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId),vf(this.telemetryService,`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId))),this.allSolutionsDone()&&this.fastCancellation)break e;for(let l=0;l<u.choices.length;l++){let d=u.choices[l];this.logger.debug("choice",d),this.stats.add(d.index),d.index in this.solutions||(this.solutions[d.index]=new aQ);let p=this.solutions[d.index];if(p===null)continue;let f,m=async b=>(b&&(!Array.isArray(b)||!b.every(y=>W1e(y)))&&(b=void 0),f=await e(p.text.join(""),d.index,{text:p.flush(),codeVulnAnnotations:b}),f!==void 0&&(n=!0),this.maybeCancel("after awaiting finishedCb"));if(d.delta?.annotations?.CodeVulnerability){if(await m()||!n&&(p.append(d),await m(d.delta.annotations.CodeVulnerability)))continue}else if(p.append(d),await m())continue;if(!(!!d.finish_reason||f!==void 0))continue;let g=d.finish_reason??"client-trimmed",v=this.telemetryData.extendedBy({completionChoiceFinishReason:g});if(this.telemetryService.sendGHTelemetryEvent("completion.finishReason",v.properties,v.measurements),this.dropCompletionReasons.includes(d.finish_reason)?this.solutions[d.index]=null:(this.stats.markYielded(d.index),yield{solution:p,finishOffset:f,reason:d.finish_reason??"client-trimmed",filterReason:cJe(d),requestId:this.requestId,index:d.index}),this.maybeCancel("after yielding finished choice"))return;this.solutions[d.index]=null}}}for(let[i,o]of Object.entries(this.solutions)){let s=Number(i);if(o!==null&&(this.stats.markYielded(s),yield{solution:o,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0&&!n)try{let i=JSON.parse(r);i.error!==void 0&&(this.logger.error(`Error in response: ${i.error.message}`,i.error),vf(this.telemetryService,`Error in response: ${i.error.message}`,i.error))}catch{this.logger.error(`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`),vf(this.telemetryService,`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`)}}async*finishSolutions(){for(let[e,r]of Object.entries(this.solutions)){let n=Number(e);if(r!==null&&(this.stats.markYielded(n),yield{solution:r,finishOffset:void 0,reason:"DONE",requestId:this.requestId,index:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(this.logger.debug("Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body.destroy()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length===this.expectedNumChoices&&e.every(r=>r===null)}};function pCe(t,e){let n={text:e.text.join(""),tokens:e.text};if(e.logprobs.length===0)return n;let i=e.logprobs.reduce((c,u)=>c.concat(u),[]),o=e.top_logprobs.reduce((c,u)=>c.concat(u),[]),s=e.text_offset.reduce((c,u)=>c.concat(u),[]),a=e.tokens.reduce((c,u)=>c.concat(u),[]);return{...n,logprobs:{token_logprobs:i,top_logprobs:o,text_offset:s,tokens:a}}}function cJe(t){if(t.finish_reason!=="content_filter")return;if(!!t.delta?.annotations?.TextCopyright)return"snippy";if(t.content_filter_results){for(let r of Object.keys(t.content_filter_results))if(t.content_filter_results[r]?.filtered)return r}}var cQ=class{constructor(e){this.choices=new Map;for(let r=0;r<e;r++)this.choices.set(r,new uQ)}add(e){this.choices.get(e).increment()}markYielded(e){this.choices.get(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},uQ=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};function vf(t,e,r){let n=[e,r],i=n.length>0?JSON.stringify(n):"no msg",o=gr.createAndMarkAsIssued({context:"fetch",level:MS[3],message:i});t.sendRestrictedGHTelemetryErrorEvent("log",o.properties,o.measurements);let s=gr.createAndMarkAsIssued({context:"fetch",level:MS[3],message:"[redacted]"});t.sendGHTelemetryErrorEvent("log",s.properties,s.measurements)}function fCe(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}function uJe(t,e,r,n,i,o,s,a,c){return MO(t,[e],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:s,filterReason:a,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:c}}function mCe(t,e,r){let n=t.get(pe).getLogger("streamMessages"),i=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(n.debug(`message ${e.index}: early finish at offset ${e.finishOffset}`),i=i.substring(0,e.finishOffset),o=!0),n.info(`message ${e.index} returned. finish reason: [${e.reason}]`),n.debug(`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let s=pCe(t,e.solution),a={role:"assistant",content:i};return uJe(t,a,s,e.index,e.requestId,o,e.reason,e.filterReason,r)}async function hCe(t,e,r,n,i,o,s){let a=t.get(pe).getLogger("chat fetch"),c=dJe(t,r);if(o?.isCancellationRequested)return{type:"canceled",reason:"before fetch request"};a.info(`url ${e.url}`),a.info(`modelMaxPromptTokens ${e.modelMaxPromptTokens}`),a.info(`modelMaxResponseTokens ${c.max_tokens??2048}`),a.info(`chat model ${r.model}`),r.intent_model&&a.info(`intent model ${r.intent_model}`),r.intent_tokenizer&&a.info(`intent tokenizer ${r.intent_tokenizer}`),r.intent_threshold&&a.info(`intent threshold ${r.intent_threshold}`);let u=r.secretKey??(await t.get(kt).getCopilotToken(t)).token;if(!u)return a.error(`Failed to send request to ${e.url} due to missing key`),vf(t.get(Ne),`Failed to send request to ${e.url} due to missing key`),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:"key is missing"};let l=await fJe(t,e,r.ourRequestId,c,u,r.location,o,s);if(o?.isCancellationRequested){let h=await l.body();try{h.destroy()}catch(g){a.exception(g,"Error destroying stream"),t.get(Ne).sendGHTelemetryException(g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(l.status!==200){let h=lJe(e,t,r.location,r.ourRequestId);return a.info("Request ID for failed request: ",r.ourRequestId),pJe(t,h,l)}let d=r.postOptions?.n??1,f=(await A6.create(t,d,r.ourRequestId,l,n,[],o)).processSSE(i);return{type:"success",chatCompletions:cu.map(f,h=>mCe(t,h,n)),getProcessingTime:()=>$1e(l)}}function lJe(t,e,r,n){return gr.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:vt.toString(r),headerRequestId:n})}function dJe(t,e){let r={messages:e.messages,model:e.model};e.postOptions&&Object.assign(r,e.postOptions);let n=fCe(e.repoInfo);return n!==void 0&&(r.nwo=n),e.intent&&(r.intent=e.intent,e.intent_model&&(r.intent_model=e.intent_model),e.intent_tokenizer&&(r.intent_tokenizer=e.intent_tokenizer),e.intent_threshold&&(r.intent_threshold=e.intent_threshold)),r}async function pJe(t,e,r){let n=t.get(pe).getLogger("chat fetch"),i=t.get(Ne);if(e.properties.error=`Response status was ${r.status}`,e.properties.status=String(r.status),i.sendGHTelemetryEvent("request.shownWarning",e.properties,e.measurements),r.status===401||r.status===403)return t.get(kt).resetCopilotToken(t,r.status),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:`token expired or invalid: ${r.status}`};if(r.status===499)return n.info("Cancelled by server"),{type:"failed",failKind:"serverCanceled",reason:"canceled by server"};let o=await r.text();return r.status===466?(n.info(o),{type:"failed",failKind:"clientNotSupported",reason:`client not supported: ${o}`}):r.status===400&&o.includes("off_topic")?{type:"failed",failKind:"offTopic",reason:"filtered as off_topic by intent classifier: message was not programming related"}:r.status===429?{type:"failed",failKind:"rateLimited",reason:o}:r.status>=500&&r.status<600?{type:"failed",failKind:"serverError",reason:`${r.status} ${o}`}:r.status===422?{type:"failed",failKind:"contentFilter",reason:"Filtered by Responsible AI Service"}:(n.error("Unhandled status from server:",r.status,o),vf(t.get(Ne),"Unhandled status from server: "+r.status,o),{type:"failed",failKind:"unknown",reason:`unhandled status from server: ${r.status} ${o}`})}function fJe(t,e,r,n,i,o,s,a){let c=t.get(pe).getLogger("chat fetch"),u=t.get(Ne),l=gr.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:vt.toString(o),...a},{maxTokenWindow:e.modelMaxPromptTokens});for(let[f,m]of Object.entries(n))f!=="messages"&&(l.properties[`request.option.${f}`]=JSON.stringify(m)??"undefined");l.properties.headerRequestId=r,u.sendGHTelemetryEvent("request.sent",l.properties,l.measurements);let d=Date.now(),p=mJe(o);return _g(t,e,i,p,r,n,s).then(f=>{let m=Sw(f,void 0);l.extendWithRequestId(m);let h=Date.now()-d;return l.measurements.totalTimeMs=h,c.info(`request.response: [${e.url}], took ${h} ms`),c.debug("request.response properties",l.properties),c.debug("request.response measurements",l.measurements),c.debug(`messages: ${JSON.stringify(n.messages)}`),u.sendGHTelemetryEvent("request.response",l.properties,l.measurements),f}).catch(f=>{if(t.get(Zr).isAbortError(f))throw f;let h=l.extendedBy({error:"Network exception"});u.sendGHTelemetryEvent("request.shownWarning",h.properties,h.measurements),l.properties.code=String(f.code??""),l.properties.errno=String(f.errno??""),l.properties.message=String(f.message??""),l.properties.type=String(f.type??"");let g=Date.now()-d;throw l.measurements.totalTimeMs=g,c.debug(`request.response: [${e.url}] took ${g} ms`),c.debug("request.error properties",l.properties),c.debug("request.error measurements",l.measurements),u.sendGHTelemetryEvent("request.error",l.properties,l.measurements),f}).finally(()=>{MO(t,n.messages,l)})}function mJe(t){switch(t){case 2:return"conversation-panel";case 1:return"conversation-inline"}}var lQ=class{async fetchOne(e,r,n,i,o,s,a,c){let u=await this.fetchMany(e,r,n,i,o,{...s,n:1},a,c);return u.type==="success"?{...u,value:u.value[0]}:u}},wg=class extends lQ{constructor(r){super();this.accessor=r;this.logger=r.get(pe).getPromptResponseLogger("ChatMLFetcher")}async fetchMany(r,n,i,o,s,a,c,u){let l=c?.requestId??c?.messageId??On(),d=L1(this.accessor.get(we),r),p=Math.min(s.modelMaxPromptTokens-d+2048,4096);a={max_tokens:p,...a};let f=wg.preparePostOptions(a),m=s.model;u&&(u.intent_model=await this.getOffTopicModelName(),u.intent_tokenizer=await this.getOffTopicModelTokenizer(),u.intent_threshold=await this.getOffTopicModelThreshold());let h={messages:r.filter(v=>v.content&&v.content!==""),model:m,repoInfo:void 0,ourRequestId:l,location:o,postOptions:f,secretKey:a.secretKey,...u},g=gr.createAndMarkAsIssued({...c,uiKind:vt.toString(o)});try{let v=await hCe(this.accessor,s,h,g,n||(async()=>{}),i,c),b=Date.now()-g.issuedTime,y;switch(v.type){case"success":return await this.processSuccessfulResponse(v,h.ourRequestId,p,d,b,g,s);case"canceled":return this.accessor.get(Ne).sendMSFTTelemetryEvent("response.cancelled",{source:c?.messageSource??"unknown",requestId:h.ourRequestId,model:s.model},{totalTokenMax:s.modelMaxPromptTokens??-1,promptTokenCount:d,tokenCountMax:p,timeToFirstToken:b,timeToCancelled:g?Date.now()-g.issuedTime:-1}),this.processCanceledResponse(v,h.ourRequestId);case"failed":return y=this.processFailedResponse(v,h.ourRequestId),this._sendResponseErrorTelemetry(y,c,h,s,d,p,b),y}}catch(v){let b=Date.now()-g.issuedTime,y=this.processError(v,h.ourRequestId);return this._sendResponseErrorTelemetry(y,c,h,s,d,p,b),y}}_sendResponseErrorTelemetry(r,n,i,o,s,a,c){this.accessor.get(Ne).sendMSFTTelemetryEvent("response.error",{type:r.type,reason:r.reason,source:n?.messageSource??"unknown",requestId:i.ourRequestId,model:o.model},{totalTokenMax:o.modelMaxPromptTokens??-1,promptTokenCount:s,tokenCountMax:a,timeToFirstToken:c})}static preparePostOptions(r){return{...r,stream:!0}}async processSuccessfulResponse(r,n,i,o,s,a,c){let u=[];for await(let p of r.chatCompletions)this.accessor.get(Ne).sendMSFTTelemetryEvent("response.success",{reason:p.finishReason,filterReason:p.filterReason,source:a?.properties.messageSource??"unknown",model:c?.model,requestId:n},{totalTokenMax:c?.modelMaxPromptTokens??-1,tokenCountMax:i,promptTokenCount:o,tokenCount:p.numTokens,timeToFirstToken:s,timeToComplete:a?Date.now()-a.issuedTime:-1}),this.isRepetitive(p,a?.properties)||u.push(p);this.logger.debug(`Received choices: ${JSON.stringify(u,null,2)}`);let l=u.filter(p=>p.finishReason==="stop"||p.finishReason==="client-trimmed");if(l.length>=1)return{type:"success",value:l.map(p=>p.message.content),requestId:n};let d=u[0];switch(d?.finishReason){case"content_filter":return{type:"filtered",category:d.filterReason??"snippy",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n}}return{type:"unknown",reason:"Response contained no choices.",requestId:n}}async getOffTopicModelName(){let r=this.accessor.get(Re).getConfig(ke.DebugOverrideChatOffTopicModel);if(r)return r;let n=await this.accessor.get(sl).chatOffTopicModel();return n||""}async getOffTopicModelTokenizer(){let r=this.accessor.get(Re).getConfig(ke.DebugOverrideChatOffTopicModelTokenizer);if(r)return r;let n=await this.accessor.get(sl).chatOffTopicModelTokenizer();return n||""}async getOffTopicModelThreshold(){let r=this.accessor.get(Re).getConfig(ke.DebugOverrideChatOffTopicModelThreshold);if(r!==0)return r;let n=await this.accessor.get(sl).chatOffTopicModelThreshold();return n!==0?n:0}isRepetitive(r,n){let i=dCe(r.tokens);if(i){let o=gr.createAndMarkAsIssued();o.extendWithRequestId(r.requestId);let s=o.extendedBy(n);this.accessor.get(Ne).sendRestrictedGHTelemetryEvent("conversation.repetition.detected",s.properties,s.measurements),this.logger.info("Filtered out repetitive conversation result")}return i}processCanceledResponse(r,n){return this.logger.debug("Cancelled after awaiting fetchConversation"),{type:"canceled",reason:r.reason,requestId:n}}processFailedResponse(r,n){return r.failKind==="rateLimited"?{type:"rateLimited",reason:r.reason,requestId:n}:r.failKind==="offTopic"?{type:"offTopic",reason:r.reason,requestId:n}:r.failKind==="tokenExpiredOrInvalid"||r.failKind==="clientNotSupported"||r.reason.includes("Bad request: ")?{type:"badRequest",reason:r.reason,requestId:n}:r.failKind==="serverError"?{type:"failed",reason:r.reason,requestId:n}:r.failKind==="contentFilter"?{type:"filtered",reason:r.reason,category:"prompt",requestId:n}:{type:"failed",reason:r.reason,requestId:n}}processError(r,n){let i=this.accessor.get(Zr);return i.isAbortError(r)?{type:"canceled",reason:"network request aborted",requestId:n}:Kg(r)?{type:"canceled",reason:"Got a cancellation error",requestId:n}:(this.accessor.get(pe).defaultLogger.exception(r,"Error on conversation request"),this.accessor.get(Ne).sendGHTelemetryException(r,"Error on conversation request"),i.isDNSLookupFailedError(r)?{type:"failed",reason:"It appears you're not connected to the internet, please check your network connection and try again.",requestId:n}:i.isFetcherError(r)?{type:"failed",reason:`Please check your firewall rules and network connection then try again. Error Code: ${r.code}.`,requestId:n}:{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};wg=ze([rt(0,Yt)],wg);var gCe=fe(require("path")),D6=fe(require("vscode"));var P6=class extends X{render(){return vscpp(vscppf,null,vscpp(Ke,null,vscpp(dQ,null),vscpp(Pt,null)),vscpp(ee,null,vscpp(pQ,{templates:this.props.templates,features:this.props.features,filenames:this.props.filenames})))}},dQ=class extends X{render(){return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),"You are helping a software developer to configure a Dev Container by picking a configuration template and features.")}},pQ=class extends X{render(){return vscpp(vscppf,null,"This is a partial list of workspace files:",vscpp("br",null),this.props.filenames.map(e=>`- ${e}
`).join(""),vscpp("br",null),"Based on the workspace files, please suggest the best template from the list of templates below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick the best template and reply with the best template's id.",vscpp("br",null),"This is the list of available templates:",vscpp("br",null),this.props.templates.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null),"Also based on the workspace files, please suggest all relevant features from the list of features below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick all relevant features and reply with the relevant features' ids.",vscpp("br",null),"This is the list of available features:",vscpp("br",null),this.props.features.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null))}};var hJe=["alpine","debian","docker-existing-docker-compose","docker-existing-dockerfile","docker-in-docker","docker-outside-of-docker","docker-outside-of-docker-compose","ubuntu","universal"].map(t=>`ghcr.io/devcontainers/templates/${t}`),gJe=["common-utils","git"].map(t=>`ghcr.io/devcontainers/features/${t}`),k6=class{constructor(e){this.accessor=e;this.telemetryService=e.get(Ne),this.logger=e.get(pe).getPromptResponseLogger("Dev Container Configuration Generator"),this.options=e.get(ns)}async generate(e,r,n){if(!r.length)return{type:"success",template:void 0,features:[]};let i=Date.now(),o=await this.accessor.get(Ye).getUserRequestEndpoint(3),s=Math.floor(o.modelMaxPromptTokens*4/3),a=this.processFilenames(r,s),c=e.templates.filter(h=>!hJe.includes(h.id)),u=(e.features||[]).filter(h=>!gJe.includes(h.id)),d=await new mt(this.accessor,o,P6,{filenames:a,templates:c,features:u},this.accessor.get(we)).render(),p=Date.now(),f=await this.accessor.get(sr).fetchOne(d.messages,void 0,n,3,o,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:"command.generateDevContainerConfigPrompt"});this.logger.logResponse(f);let m=f.type==="success"?this.processGeneratedConfig(f.value,c,u):void 0;return this.telemetryService.sendMSFTTelemetryEvent("devcontainer.generateConfig",{model:o.model,requestId:f.requestId,responseType:f.type,templateId:m?.template,featureIds:m?.features.join(",")},{originalFilenameCount:r.length,originalFilenameLength:r.join("").length,processedFilenameCount:a.length,processedFilenameLength:a.join("").length,timeToRequest:p-i,timeToComplete:Date.now()-i}),{type:"success",template:m?.template,features:m?.features||[]}}processFilenames(e,r){let n=[...e],i=Math.floor(r*.9),o=n.join(`
`).length;if(o>i)for(;o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedConfig(e,r,n){let i=r.find(o=>new RegExp(`\\b${wS(o.id)}\\b`).test(e))?.id;return i==="ghcr.io/devcontainers/templates/javascript-node"&&(i="ghcr.io/devcontainers/templates/typescript-node"),{template:i,features:n.filter(o=>new RegExp(`\\b${wS(o.id)}\\b`).test(e)).map(o=>o.id)}}};var qE=class{constructor(e){this.accessor=e}async generateConfiguration(e,r){if(r.isCancellationRequested)return{type:"cancelled"};let n=(await Promise.all(["*","*/*","*/*/*"].map(o=>D6.workspace.findFiles(new D6.RelativePattern(e.rootUri,o),void 0,1e3,r)))).flat().map(o=>gCe.posix.relative(e.rootUri.path,o.path));return new k6(this.accessor).generate(e.index,n,r)}};qE=ze([rt(0,Yt)],qE);var gQ=fe(require("path")),zu=require("vscode");var N6=class extends X{render(){return vscpp(vscppf,null,vscpp(Ke,null,vscpp(fQ,null),vscpp(Pt,null)),vscpp(ee,null,vscpp(hQ,{...this.props}),vscpp(mQ,null)))}},fQ=class extends X{render(){return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),"You are helping a software developer to commit some changes to a Git repository.")}},mQ=class extends X{render(){let e=this.accessor.get(ft),n=this.accessor.get(Re).getConfig(ke.LocaleOverride),i=n!=="auto"?n:e.language,o=RY.find(s=>i===s);return vscpp(vscppf,null,"For the response always follow these instructions:",vscpp("br",null),"* The response should only contain a single ```text code block with the suggested commit message.",vscpp("br",null),"Here is an example of an incorrectly formatted response:",vscpp("br",null),"Refactor print_hello_world function to greet in main.py",vscpp("br",null),"Here is an example of a correctly formatted response:",vscpp("br",null),"```text",vscpp("br",null),"Refactor print_hello_world function to greet in main.py",vscpp("br",null),"```",vscpp("br",null),"* The commit message in the ```text code block should be short and concise that describes the changes in the code.",vscpp("br",null),o&&i!=="en"&&vscpp(vscppf,null,"* The commit message in the ```text code block should be translated into the following locale: ",i))}},hQ=class extends X{render(){return vscpp(vscppf,null,"Here is a list of code blocks in diff format containing the changes that the developer is trying to commit to the repository:",vscpp("br",null),this.props.diff.map(e=>vscpp(vscppf,null,"```diff",vscpp("br",null),e,vscpp("br",null),"```",vscpp("br",null))),vscpp("br",null),this.props.recentCommitMessages.user.length>0&&vscpp(vscppf,null,vscpp("br",null),"Here is a list of code blocks in text format with my most recent commit messages in this repository:",vscpp("br",null),this.props.recentCommitMessages.user.map(e=>vscpp(vscppf,null,"```text",vscpp("br",null),e,vscpp("br",null),"```",vscpp("br",null)))),this.props.recentCommitMessages.repository.length>0&&vscpp(vscppf,null,vscpp("br",null),"Here is a list of code blocks in text format with the most recent commit messages in this repository:",vscpp("br",null),this.props.recentCommitMessages.repository.map(e=>vscpp(vscppf,null,"```text",vscpp("br",null),e,vscpp("br",null),"```",vscpp("br",null)))),"Use the code blocks containing the changes and the recent commit messages as a reference to suggest a new commit message.")}};var L6=class{constructor(e){this.accessor=e;this.telemetryService=e.get(Ne),this.logger=e.get(pe).getPromptResponseLogger("git commit message generator"),this.options=e.get(ns)}async generateGitCommitMessage(e,r,n,i){let o=Date.now(),s=await this.accessor.get(Ye).getUserRequestEndpoint(3),a=Math.floor(s.modelMaxPromptTokens*4/3),c=this.processDiff(e,a),l=await new mt(this.accessor,s,N6,{diff:c,recentCommitMessages:r},this.accessor.get(we)).render(void 0,void 0),d=Math.min(this.options.temperature*(1+n),2),p=Date.now(),f=await this.accessor.get(sr).fetchOne(l.messages,void 0,i,3,s,{temperature:d,top_p:this.options.topP},{messageSource:"command.generateGitCommitMessagePrompt"});if(this.logger.logResponse(f),this.telemetryService.sendMSFTTelemetryEvent("git.generateCommitMessage",{model:s.model,requestId:f.requestId,responseType:f.type},{attemptCount:n+1,originalDiffFileCount:e.length,originalDiffLength:e.join("").length,processedDiffFileCount:c.length,processedDiffLength:c.join("").length,timeToRequest:p-o,timeToComplete:Date.now()-o}),f.type!=="success")return;let[m,h]=this.processGeneratedCommitMessage(f.value);return m!=="oneTextCodeBlock"&&this.telemetryService.sendMSFTTelemetryEvent("git.generateCommitMessageIncorrectResponseFormat",{requestId:f.requestId,responseFormat:m}),h}processDiff(e,r){let n=[...e],i=r-Math.floor(r*.2),o=n.join(`

`).length;if(o>i)for(n.sort((s,a)=>s.length-a.length);o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedCommitMessage(e){let n=/^```text\s*([\s\S]+?)\s*```$/m.exec(e);return n===null?["noTextCodeBlock",e]:n.length!==2?["multipleTextCodeBlocks",e]:["oneTextCodeBlock",n[1]]}};var HE=class{constructor(e){this.accessor=e;this._commitMessages=new Map;this._disposables=new Vt;this._repositoryDisposables=new Wy;let r=()=>{this._disposables.add(this._gitExtensionApi.onDidOpenRepository(this._onDidOpenRepository,this)),this._disposables.add(this._gitExtensionApi.onDidCloseRepository(this._onDidCloseRepository,this));for(let i of this._gitExtensionApi.repositories)this._onDidOpenRepository(i)},n=this.accessor.get(zf);this._gitExtensionApi=n.getExtensionApi(),this._gitExtensionApi?r():this._disposables.add(n.onDidChange(i=>{i.enabled&&(this._gitExtensionApi=n.getExtensionApi(),r())}))}async generateCommitMessage(e,r=Gr.None){if(!r.isCancellationRequested)return zu.window.withProgress({location:zu.ProgressLocation.SourceControl},async()=>{let n=await this._getChanges(e),i=await this._applyContentExclusion(n);if(i.length===0){zu.window.showInformationMessage(zu.l10n.t("Cannot generate a commit message because the changes were excluded from the context due to content exclusion rules."));return}let o=this._getAttemptCount(e,i),s=await this._getRecentCommitMessages(e),c=await new L6(this.accessor).generateGitCommitMessage(i,s,o,r);if(c&&e.state.HEAD&&e.state.HEAD.commit){let u=this._commitMessages.get(e.rootUri.toString())??new Map;u.set(e.state.HEAD.commit,{attemptCount:o,changes:i,message:c}),this._commitMessages.set(e.rootUri.toString(),u)}return c})}getRepository(e){return this._gitExtensionApi?this._gitExtensionApi.repositories.length===1?this._gitExtensionApi.repositories[0]:(e=e??zu.window.activeTextEditor?.document.uri,e?this._gitExtensionApi.getRepository(e):null):null}async _applyContentExclusion(e){let r=[],n=this.accessor.get(st);for(let i of e)i.originalUri===void 0&&i.modifiedUri===void 0||i.originalUri&&await n.isCopilotIgnored(i.originalUri)||i.modifiedUri&&i.modifiedUri!==i.originalUri&&await n.isCopilotIgnored(i.modifiedUri)||r.push(i.diff);return r}_getAttemptCount(e,r){let i=this._commitMessages.get(e.rootUri.toString())?.get(e.state.HEAD?.commit??"");if(!i||i.changes.length!==r.length)return 0;for(let o=0;o<r.length;o++)if(i.changes[o]!==r[o])return 0;return i.attemptCount+1}async _getChanges(e){let r=await e.diff(!0);if(r!=="")return this._parseGitDiff(e,r);let n=await e.diff();return this._parseGitDiff(e,n)}async _getRecentCommitMessages(e){let r=[],n=[];try{let i=await e.log({maxEntries:10});r.push(...i.map(a=>a.message));let o=await e.getConfig("user.name")??await e.getGlobalConfig("user.name"),s=await e.log({maxEntries:10,author:o});n.push(...s.map(a=>a.message))}catch{}return{repository:r,user:n}}_parseGitDiff(e,r){let n=[],i=c=>{let u=/^---\s(.*)\n\+\+\+\s(.*)$/m.exec(c);if(!u||u.length!==3)return{originalUri:void 0,modifiedUri:void 0};let l=u[1]==="/dev/null"?void 0:zu.Uri.file(gQ.join(e.rootUri.fsPath,u[1].substring(2))),d=u[2]==="/dev/null"?void 0:zu.Uri.file(gQ.join(e.rootUri.fsPath,u[2].substring(2)));return{originalUri:l,modifiedUri:d}},o=0,s,a=/^diff --git a\/(.+?) b\/(.+?)$/gm;do{if(s=a.exec(r),s===null)break;if(o<s.index){let c=r.substring(o,s.index),{originalUri:u,modifiedUri:l}=i(c);n.push({diff:c,originalUri:u,modifiedUri:l})}o=s.index}while(!0);if(o<r.length){let c=r.substring(o),{originalUri:u,modifiedUri:l}=i(c);n.push({diff:c,originalUri:u,modifiedUri:l})}return n}_onDidOpenRepository(e){typeof e.onDidCommit!==void 0&&this._repositoryDisposables.set(e,e.onDidCommit(()=>this._onDidCommit(e),this))}_onDidCloseRepository(e){this._repositoryDisposables.deleteAndDispose(e),this._commitMessages.delete(e.rootUri.toString())}async _onDidCommit(e){let r=e.state.HEAD;if(!r?.commit)return;let n=this._commitMessages.get(e.rootUri.toString());if(!n)return;let i=await e.getCommit(r.commit),o=i.parents.length>0?i.parents[0]:"",s=n.get(o);if(!s)return;let a=Bw(i.message,s.message);this.accessor.get(Ne).sendMSFTTelemetryEvent("git.generateCommitMessageSurvival",void 0,{attemptCount:s.attemptCount,survivalRateFourGram:a}),n.delete(o),this._commitMessages.set(e.rootUri.toString(),n)}dispose(){this._repositoryDisposables.dispose(),this._disposables.dispose()}};HE=ze([rt(0,Yt)],HE);var M6=require("vscode");var jE=re("ChatVariableService"),O6=class{constructor(e){this._variableEnablements=e.get(Re).getConfigMixedWithDefaults(ke.ConversationVariablesEnablements)}isVariableEnabled(e){return typeof this._variableEnablements[e.name]=="boolean"?this._variableEnablements[e.name]:typeof e.defaultEnablement=="boolean"?e.defaultEnablement:!!this._variableEnablements["*"]}getVariables(){let e=[];for(let r of Tr.contextResolvers)r.variableInfo&&this.isVariableEnabled(r.variableInfo)&&e.push({name:r.variableInfo.name,kind:r.kind,description:r.variableInfo.description,resolve:r.resolveContext.bind(r)});return e}getVariable(e){return this.getVariables().find(r=>r.name===e)}};var GE=class{constructor(e,r){this._chatVariableService=e,this._fsService=r}async resolveVariablesInPrompt(e,r){let n=[];for(let i of r){let o=i.values.find(s=>s.level===M6.ChatVariableLevel.Full)??i.values[0];if(o.value instanceof M6.Uri){let s=(await this._fsService.readFile(o.value)).toString().replace(/\r/g,"");o={...o,value:xn("",s)}}if(o.kind==="github.docset")i.range&&(e=e.slice(0,i.range[0])+o.value+e.slice(i.range[1]));else{let s=this._chatVariableService.getVariable(i.name);n.push({kind:s?.kind??"variable",userMessages:[vJe(i.name)+o.value]}),i.range&&(e=e.slice(0,i.range[0])+`[#${i.name}](#${i.name}-context)`+e.slice(i.range[1]))}}return{parts:n,message:e}}};GE=ze([rt(0,jE),rt(1,Cn)],GE);function vJe(t){return`# ${t.toUpperCase()} CONTEXT
`}var yJe=[],vCe=yJe;var AQ={};$r(AQ,{create:()=>xJe});var vQ=fe(fr());var a2=class{constructor(e){this.kind="workspace";let r,n;e.getConfig(ke.WorkspaceUseFilesVariable)?(r="files",n=vQ.t("Searches through the files in the workspace and pulls out relevant information for the query.")):(r="codebase",n=vQ.t("Searches through the codebase and pulls out relevant information for the query.")),this.variableInfo={name:r,description:n,defaultEnablement:zd||void 0}}async resolveContext(e,r,n,i){if(!r.message)return;let{messages:o,references:s,usedContext:a}=await $o(e,r.endpoint,xE,{chatVariables:[],conversation:r.conversation??new ju,query:this.turnQueryIntoWorkspaceQuery(r.message),include:{workspaceChunks:!0}},e.get(we),i,n);if(o.length>0)return{kind:this.kind,userMessages:o.map(c=>c.content),usedContext:a,references:s}}turnQueryIntoWorkspaceQuery(e){let r=e;return r.startsWith("@")&&(r=r.replace(/@\w+\s*/,"")),r=r.replaceAll(/\#files/gi,"files"),r}};a2=ze([rt(0,Re)],a2);Tr.register(a2);var bJe=require("path"),yQ=class{constructor(){this.kind="current-editor";this.variableInfo={name:"editor",description:"The visible source code in the active editor",defaultEnablement:!0};this.metaContextResolverInfo={description:"Source code in the active document."}}async resolveContext(e,r){let n=e.get(It).activeTextEditor,i=n?.visibleRanges[0];if(i){let o="";n.selection.isSingleLine&&(o=`The cursor is on line: ${n.selection.start.line}`);let s=[`Excerpt from active file ${bJe.basename(n.document.uri.path)}, lines ${i.start.line+1} to ${i.end.line+1}:`,xn(n.document.languageId,n.document.getText(i),!1),"",o].join(`
`),a=[{uri:n.document.uri,version:n.document.version,ranges:[i]}];return{kind:this.kind,userMessages:[s],usedContext:a,references:[new $n({uri:n.document.uri,range:i})]}}}},Yxr=Tr.register(new yQ);var bQ=class{constructor(){this.kind="current-selection-implementations";this.metaContextResolverInfo={description:"Relevant implementations referenced in active selection."}}async resolveContext(e,r,n,i){let{references:o,messages:s,usedContext:a}=await $o(e,r.endpoint,yE,{},e.get(we));return{kind:this.kind,references:o,userMessages:s.map(c=>c.content),usedContext:a}}},t1r=Tr.register(new bQ);var _Q=class{constructor(){this.kind="debug-console-output";this.variableInfo={name:"debugConsole",description:"The output in the debug console",defaultEnablement:!1};this.metaContextResolverInfo={description:"Debug console output."}}async resolveContext(e){return{kind:this.kind,userMessages:[`Debug console output:
`+e.get(db).consoleOutput]}}},s1r=Tr.register(new _Q);var xQ=class{constructor(){this.kind="diagnostics";this.metaContextResolverInfo={description:"Diagnostics in the active editor."}}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=Td(e.get(Po),i.document.uri,i.selection,r.message),{messages:s,usedContext:a}=await $o(e,r.endpoint,Cd,{documentContext:i,diagnostics:o},e.get(we));return{kind:this.kind,userMessages:s.map(c=>c.content),usedContext:a}}},h1r=Tr.register(new xQ);var EQ=class{constructor(e){let r=Yd(e.get(ft).getEditorInfo().version);this.embeddingsCache=new ol(e,1,"extensionEmbeddings",r,"extensions")}async updateIndex(){this._embeddings=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[1].name}(${o[0]})`,similarity:0};let s=il(e,o[1].embedding);return{key:`${o[1].name}(${o[0]})`,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}},_Je=`
The current question is related to VS Code extensions. The application is currently open.
If an extension is not a valid answer, but it still relates to VS Code, please still respond.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the given context given to you is incorrect or not relevant you may ignore it.
At the end of your response, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all extension IDs you referenced in your response.
The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
`.trimStart(),SQ=class{constructor(){this.kind="extensions"}async resolveContext(e,r,n){let i=_Je+`

`;this._embeddingCompute??=e.get(Vi);let o=r.message;if(!o||(this._extensionsIndex||(this._extensionsIndex=new EQ(e),await this._extensionsIndex.updateIndex()),n.isCancellationRequested))return;let s=await this._embeddingCompute?.computeEmbeddings([o],n);if(!(!s||n.isCancellationRequested)&&s&&s.length>0){let a=this._extensionsIndex.nClosestValues(s[0],5);if(a.length)return i+=`Here are some possible extensions:
`,i+=a.join(`

`),{kind:this.kind,userMessages:[`Relevant information about extensions for VS Code:
`+i]}}}},S1r=Tr.register(new SQ);var yCe=fe(require("path"));var TQ=class{constructor(){this.kind="git-metadata";this.variableInfo={name:"git",description:"Information about the current git repository"};this.metaContextResolverInfo={description:"Metadata about the current git repository."}}async resolveContext(e,r,n){let i=e.get(it),s=e.get(ui).repositories,a=i.getWorkspaceFolders();if(s.length===0||!a)return;if(a.length>1){let u=r.documentContext?.document.uri??e.get(It).activeTextEditor?.document.uri;if(u){let l=i.getWorkspaceFolder(u);if(l){let d=a.findIndex(p=>p.toString()===l.toString());d!==-1&&(s=[s[d]],a=[a[d]])}}}let c=[];for(let u=0;u<s.length;u++){if(n.isCancellationRequested)return;let l=s[u],d=a[u];if(!l)continue;let p=[];p.push(`Workspace Folder: ${yCe.basename(d.path)}`),p.push("```"),l.headBranchName?(p.push(`Current Branch name: ${l.headBranchName}`),p.push(`Upstream: ${l.upstreamBranchName?l.upstreamBranchName:"none"}`)):p.push("Detached HEAD?: yes"),p.push(`Is currently rebasing?: ${l.isRebasing?"yes":"no"}`),p.push(`Remotes: ${(l.remotes??[]).join(", ")}`),p.push("```"),c.push(p.join(`
`))}return{kind:this.kind,userMessages:[`Metadata about the current git repository:
`+c.join(`
`)]}}},P1r=Tr.register(new TQ);var CQ=class{constructor(){this.kind="terminal-buffer";this.variableInfo={name:"terminalBuffer",description:"The active terminal's buffer",defaultEnablement:!1};this.metaContextResolverInfo={description:"The active terminal's buffer."}}async resolveContext(e){let r=e.get(ho).terminalBuffer;return{kind:this.kind,userMessages:[`The active terminal's buffer:
`+r]}}},O1r=Tr.register(new CQ);var IQ=class{constructor(){this.kind="terminal-last-command";this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's last run command."}}async resolveContext(e){let r=e.get(ho).terminalLastCommand;if(!r)return;let n=[];r.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(r.commandLine)),r.cwd&&(n.push("It was run in the directory:"),n.push(typeof r.cwd=="object"?r.cwd.toString():r.cwd)),r.output&&(n.push("It has the following output:"),n.push(r.output));let i=n.join(`
`);return{kind:this.kind,userMessages:[`The active terminal's last run command:
`+i]}}},q1r=Tr.register(new IQ);var wQ=class{constructor(){this.kind="terminal-selection";this.variableInfo={name:"terminalSelection",description:"The active terminal's selection",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's selection."}}async resolveContext(e){let r=e.get(ho).terminalSelection;return{kind:this.kind,userMessages:[`The active terminal's selection:
`+r]}}},z1r=Tr.register(new wQ);var RQ=class{constructor(){this.kind="terminal-shell-type"}async resolveContext(e){let r=e.get(ho).terminalShellType;return{kind:this.kind,userMessages:[`The active terminal's shell type:
`+r]}}},Q1r=Tr.register(new RQ);function xJe(){}var PQ={};$r(PQ,{create:()=>EJe});function EJe(t){let e=new Vt;return e.add(Tr.initialize(t)),e}var kQ={};$r(kQ,{create:()=>SJe});async function SJe(t){await t.get(it).ensureWorkspaceIsFullyLoaded()}var TJe=[...vCe,kQ,AQ,PQ],bCe=TJe;var NQ={};$r(NQ,{create:()=>CJe});var U6=require("vscode");var VE=require("vscode");async function F6(t,e,r){let n=t?.repositories;if(!n)return r.debug("No git repositories found"),!1;let i=n.map(iA).filter(s=>s);return(await Promise.all(i.map(s=>{let[a,c]=s.split("/");return e.isAvailable(a,c)}))).every(s=>s)}async function _Ce(t){let e=new DQ(t);return await e.run(),e}var DQ=class{constructor(e){this.accessor=e;this.tokenManager=this.accessor.get(kt);this.logger=this.accessor.get(pe).getLogger("auth");this.configurationService=this.accessor.get(Re);this.ghRepoService=this.accessor.get(al);this.gitService=this.accessor.safeGet(ui);this.vscodeExtensionContext=this.accessor.get(Mr);this.disposables=new Vt}async run(){await this.waitForChatEnabled(),!(!this.gitService||await F6(this.gitService,this.ghRepoService,this.logger)||(this.registerListeners(),await this.tokenManager.getPermissiveGitHubToken({silent:!0})))&&await this.showPrompt()}async waitForChatEnabled(){try{if((await this.tokenManager.getCopilotToken(this.accessor)).getTokenValue("chat")==="1")return}catch(e){this.logger.debug("Failed to get copilot token",e)}await new Promise(e=>{let r=this.accessor.get(rs).onCopilotToken(async n=>{n.envelope.chat_enabled!==!1&&(r.dispose(),e())})})}registerListeners(){this.disposables.add(VE.authentication.onDidChangeSessions(async e=>{if(e.provider.id!==qS(this.configurationService)||await this.tokenManager.getPermissiveGitHubToken({silent:!0}))return;if(await this.tokenManager.getAnyGitHubToken())await this.showPrompt();else{this.vscodeExtensionContext.globalState.update("copilot.shownPermissiveTokenModal",!1);return}}))}async showPrompt(){try{let e=this.vscodeExtensionContext.globalState.get("copilot.shownPermissiveTokenModal",!1),r={};e||(r.forceNewSession={detail:VE.l10n.t("To show you more relevant Copilot Chat results, we need permission to read the contents of your repository on GitHub."),learnMore:VE.Uri.parse("https://aka.ms/copilotRepoScope")},this.vscodeExtensionContext.globalState.update("copilot.shownPermissiveTokenModal",!0)),await this.tokenManager.getPermissiveGitHubToken(r)&&this.logger.debug("Got permissive GitHub token")}catch(e){this.logger.debug("Failed to get permissive GitHub token",e),await this.tokenManager.getPermissiveGitHubToken({})}}dispose(){this.disposables.dispose()}};var xCe="github.copilotChat.signIn";async function ECe(t){let e=t.get(ui),r=t.get(al),n=t.get(kt),i=t.get(pe).getLogger("authSignInCommand");if(await F6(e,r,i)){await n.getAnyGitHubToken({prompt:!0});return}await n.getPermissiveGitHubToken({forceNewSession:{learnMore:gt.parse("https://aka.ms/copilotRepoScope")}})}async function CJe(t){return U6.Disposable.from(U6.commands.registerCommand(xCe,()=>ECe(t)),await _Ce(t))}var LQ={};$r(LQ,{create:()=>IJe});var B6=require("vscode");function IJe(t){let e=new Vt;for(let r of t.get(jE).getVariables())e.add(B6.chat.registerChatVariableResolver(r.name,r.description??"",{async resolve(n,i,o){return[]},resolve2:async(n,i,o,s)=>{let a={endpoint:await t.get(Ye).getUserRequestEndpoint(3),message:i.prompt},c={report(l){o.push(l)}},u=await r.resolve(t,a,s,c);return u?(u.references?.forEach(l=>{"variableName"in l.anchor||o.reference(l.anchor)}),[{level:B6.ChatVariableLevel.Full,value:u.userMessages.join(`

`),description:""}]):[]}}));return e}var wJe=[...bCe,NQ,LQ],SCe=wJe;var TCe=fe(require("path"));var Rg=class t{constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,s;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,s=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,s=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new t(n,i,o,s)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=r.startLineNumber,c=r.startColumn,u=r.endLineNumber,l=r.endColumn;return n<a?(n=a,i=c):n===a&&(i=Math.max(i,c)),o>u?(o=u,s=l):o===u&&(s=Math.min(s,l)),n>o||n===o&&i>s?null:new t(n,i,o,s)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new vy(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new vy(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,s=r.startLineNumber|0;if(o===s){let a=e.startColumn|0,c=r.startColumn|0;if(a===c){let u=e.endLineNumber|0,l=r.endLineNumber|0;if(u===l){let d=e.endColumn|0,p=r.endColumn|0;return d-p}return u-l}return a-c}return o-s}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var Ws=class t{static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new q6(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new q6(e[n].slice()));return r.ranges}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new Ro(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new Rg(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new Rg(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new kr(this.startLineNumber-1,this.endLineNumberExclusive-1)}},q6=class t{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=V2(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=Qg(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=BM(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=BM(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],c=e._normalizedRanges[i];a.startLineNumber<c.startLineNumber?(s=a,n++):(s=c,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new Ws(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(r.push(o),o=s)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=V2(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=Qg(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let s=r;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new Ws(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Ws(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&r.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var H6=class t{constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};var c2=class t{static inverse(e,r,n){let i=[],o=1,s=1;for(let c of e){let u=new t(new Ws(o,c.original.startLineNumber),new Ws(s,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,s=c.modified.endLineNumberExclusive}let a=new t(new Ws(o,r+1),new Ws(s,n+1));return a.modified.isEmpty||i.push(a),i}static clip(e,r,n){let i=[];for(let o of e){let s=o.original.intersect(r),a=o.modified.intersect(n);s&&!s.isEmpty&&a&&!a.isEmpty&&i.push(new t(s,a))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}},j6=class t extends c2{constructor(r,n,i){super(r,n);this.innerChanges=i}flip(){return new t(this.modified,this.original,this.innerChanges?.map(r=>r.flip()))}},G6=class t{constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}};var RJe=TCe.join(__dirname,"diffWorker.js"),V6=class{constructor(){this._worker=new Ao(()=>new Yf(RJe))}dispose(){this._worker.hasValue&&this._worker.value.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:s(i.changes),moves:i.moves.map(a=>new H6(new c2(new Ws(a[0],a[1]),new Ws(a[2],a[3])),s(a[4])))};function s(a){return a.map(c=>new j6(new Ws(c[0],c[1]),new Ws(c[2],c[3]),c[4]?.map(u=>new G6(new Rg(u[0],u[1],u[2],u[3]),new Rg(u[4],u[5],u[6],u[7])))))}}};var z6=class{constructor(e){this.accessor=e}async getEmbeddingEndpoint(){return this._embeddingEndpoint?this._embeddingEndpoint:await this.accessor.get(Ye).getEmbeddingsEndpointInfo()}async computeEmbeddings(e,r){this._embeddingEndpoint=await this.getEmbeddingEndpoint();let n=this._embeddingEndpoint.maxBatchSize,i=this._embeddingEndpoint.modelMaxPromptTokens-1;return this.fetchResponseWithBatches(e,r,i,n)}async fetchResponseWithBatches(e,r,n,i){let o=[],s=this.accessor.get(we),a=[];for(let c of e)if(s.tokenLength(c)>n)return;for(let c of e){if(a.length>=i){let u=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,On(),a,r);if(u.type==="failed")return;o.push(...u.embeddings),a=[]}a.push(c)}if(a.length>0){let c=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,On(),a,r);if(c.type==="failed")return;o.push(...c.embeddings)}return o.length===0?void 0:o}async rawEmbeddingsFetchWithTelemetry(e,r,n,i){let o=Date.now(),s=this.accessor.get(Ne),a=await this.rawEmbeddingsFetch(e,r,n,i);return a.type==="failed"?(s.sendMSFTTelemetryErrorEvent("embedding.error",{type:a.type,reason:a.reason}),a):(s.sendMSFTTelemetryEvent("embedding.success",{},{batchSize:n.length,inputTokenCount:n.reduce((c,u)=>c+this.accessor.get(we).tokenLength(u),0),timeToComplete:Date.now()-o}),a)}async rawEmbeddingsFetch(e,r,n,i){this._embeddingEndpoint||(this._embeddingEndpoint=await this.accessor.get(Ye).getEmbeddingsEndpointInfo());try{let o=e.get(kt),s=o instanceof US?await o.getEmbeddingsToken(e):await o.getCopilotToken(e),a={input:n,model:this._embeddingEndpoint.model};this._embeddingEndpoint.interceptBody?.(a);let c=await _g(e,this._embeddingEndpoint,s.token,"copilot-panel",r,a,i),u=c.status===200?await c.json():await c.text();return c.status===200&&u.data?{type:"success",embeddings:u.data.map(l=>l.embedding)}:{type:"failed",reason:u.error}}catch(o){let s=o?.message??"Unknown error";return s.match(/Unexpected.*JSON/i)&&(s="timeout"),{type:"failed",reason:s}}}};var $u=fe(require("vscode"));var $6=class{get sessionId(){return $u.env.sessionId}get machineId(){return $u.env.machineId}get OS(){switch(HZ){case 3:return"Windows";case 1:return"Mac";case 2:return"Linux";default:return"Linux"}}get language(){return $u.env.language}getAllExtensions(){return $u.extensions.all}async getAllCommands(){return $u.commands.executeCommand("_getAllCommands")}async getAllSettings(){return $u.commands.executeCommand("_getAllSettings")}isProduction(){return vR}isPreRelease(){return zd}getBuildType(){return Ma.buildType}getVersion(){return Ma.version}getBuild(){return Ma.build}getName(){return Ma.name}getEditorInfo(){return new OS("vscode",$u.version)}getEditorPluginInfo(){return new OS("copilot-chat",Ma.version)}getEditorVersionHeaders(){return{"Editor-Version":this.getEditorInfo().format(),"Editor-Plugin-Version":this.getEditorPluginInfo().format()}}};var Wu=fe(require("vscode")),zE=class{async stat(e){return Wu.workspace.fs.stat(e)}async readDirectory(e){return Wu.workspace.fs.readDirectory(e)}async createDirectory(e){return Wu.workspace.fs.createDirectory(e)}async readFile(e){return Wu.workspace.fs.readFile(e)}async writeFile(e,r){return Wu.workspace.fs.writeFile(e,r)}async delete(e,r){return Wu.workspace.fs.delete(e,r)}async rename(e,r,n){return Wu.workspace.fs.rename(e,r,n)}async copy(e,r,n){return Wu.workspace.fs.copy(e,r,n)}isWritableFileSystem(e){return!!Wu.workspace.fs.isWritableFileSystem(e)}createFileSystemWatcher(e){return Wu.workspace.createFileSystemWatcher(e)}};var W6=class extends zE{constructor(){super()}async readFile(e){return super.readFile(e)}};var u2=re("ICertificateReaderCache"),Y6=class{constructor(){this.cache=new Map}get(e){return this.cache.get(e)}set(e,r){this.cache.set(e,r)}};var $we=fe(require("fs"));var A8=re("IRootCertificateReader"),Wwe=(t,e=process.platform)=>new HX(t.get(rs),grt(e,t),new KX),HX=class{constructor(e,r,n){this.realReader=r;this.noopReader=n;this.delegate=r,e.onCopilotToken(i=>{this.delegate=i.token.getTokenValue("ssc")==="1"?this.realReader:this.noopReader})}getAllRootCAs(){return this.delegate.getAllRootCAs()}},grt=(t,e)=>{let r=e.get(u2).get(t);if(r)return r;let n=vrt(t,e),i=new VX(n),o=new GX(i),s=new jX(e,o);return e.get(u2).set(t,s),s},vrt=(t,e)=>{switch(t){case"linux":return new zX;case"darwin":return new $X;case"win32":return new WX(e);default:return new YX}},jX=class{constructor(e,r){this.accessor=e;this.delegate=r}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(e){return this.accessor.get(pe).getLogger("certificates").warn(`Failed to read root certificates: ${e}`),[]}}},GX=class{constructor(e){this.delegate=e}async getAllRootCAs(){return this.certificates||(this.certificates=await this.delegate.getAllRootCAs()),this.certificates}},VX=class{constructor(e){this.delegate=e}async getAllRootCAs(){let e=await this.delegate.getAllRootCAs(),r=process.env.NODE_EXTRA_CA_CERTS;if(!r)return e;let n=await Ywe(r);return e.concat(n)}},zX=class{async getAllRootCAs(){let e=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let n=await Ywe(r);e=e.concat(n)}return e}},$X=class{async getAllRootCAs(){let e=zwe();return e.all(e.der2.pem).filter(r=>r!==void 0)}},WX=class{constructor(e){this.accessor=e}async getAllRootCAs(){return await this.accessor.get(dA).loadCaCerts()||[]}},YX=class{async getAllRootCAs(){throw new Error("No certificate reader available for unsupported platform")}},KX=class{async getAllRootCAs(){return[]}};async function Ywe(t){try{let n=(await $we.promises.readFile(t,{encoding:"utf8"})).split(/(?=-----BEGIN CERTIFICATE-----)/g).filter(o=>o.length>0),i=new Set(n);return Array.from(i)}catch(e){if(e?.code!=="ENOENT")throw e}return[]}var Kwe=fe(require("http"));var yrt=407,P8=re("IProxySocketFactory"),Ef=class extends Error{constructor(r,n,i){super(r);this.cause=n;this.responseStatus=i}};function Qwe(t){return new QX(t,new XX(t))}var QX=class{constructor(e,r,n=process.platform){this.accessor=e;this.delegate=r;this.platform=n;this.successfullyAuthorized=new Df(20);this.logger=e.get(pe).getLogger("proxy-socket-factory")}async createSocket(e,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(this.logger.debug("Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(e,r));try{return await this.delegate.createSocket(e,r)}catch(n){if(n instanceof Ef&&n.responseStatus===yrt){this.logger.debug("Proxy authorization required, trying to authorize first time");let i=await this.authorizeAndCreateSocket(e,r);if(i)return this.logger.debug("Proxy authorization successful, caching result"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),i}throw n}}async reauthorize(e,r){let n=await this.authorize(r);n&&(this.logger.debug("Proxy re-authorization successful, received token"),e.headers["Proxy-Authorization"]="Negotiate "+n)}async authorizeAndCreateSocket(e,r){let n=await this.authorize(r);if(this.logger.debug("Proxy authorization successful, received token"),n)return this.logger.debug("Trying to create socket with proxy authorization"),e.headers["Proxy-Authorization"]="Negotiate "+n,await this.delegate.createSocket(e,r)}async authorize(e){this.logger.debug("Loading kerberos module");let r=await brt(this.accessor);if(!r){this.logger.debug("Could not load kerberos module");return}let n=this.computeSpn(e);this.logger.debug("Initializing kerberos client using spn",n);let i=await r.initializeClient(n);this.logger.debug("Perform client side kerberos step");let o=await i.step("");return this.logger.debug("Received kerberos server response"),o}computeSpn(e){let r=this.accessor.get(Re),n=r.isDefaultSettingOverwritten(ke.KerberosServicePrincipal)?r.getConfig(ke.KerberosServicePrincipal):e.kerberosServicePrincipal;if(n)return this.logger.debug("Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${e.host}`:`HTTP@${e.host}`;return this.logger.debug("Using default kerberos spn",i),i}getProxyCacheKey(e){return e.host+":"+e.port}},XX=class{constructor(e){this.logger=e.get(pe).getLogger("proxy-socket-factory")}async createSocket(e,r){let n=this.createConnectRequestOptions(e,r);return new Promise((i,o)=>{this.logger.debug("Attempting to establish connection to proxy");let s=Kwe.request(n);s.useChunkedEncodingByDefault=!1,s.once("connect",(a,c,u)=>{this.logger.debug("Socket Connect returned status code",a.statusCode),s.removeAllListeners(),c.removeAllListeners(),a.statusCode!==200?(c.destroy(),o(new Ef("tunneling socket could not be established",void 0,a.statusCode))):u.length>0?(c.destroy(),o(new Ef("got illegal response body from proxy"))):(this.logger.debug("Successfully established tunneling connection to proxy"),i(c))}),s.once("error",a=>{this.logger.debug("Proxy socket connection error",a.message),s.removeAllListeners(),o(new Ef("tunneling socket could not be established",a))}),s.on("timeout",()=>{this.logger.debug("Proxy socket connection timeout"),o(new Ef(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${n.host}:${n.port}`))}),s.end()})}createConnectRequestOptions(e,r){let n={...r,method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port,"Proxy-Connection":"keep-alive"},timeout:e.timeout};return e.localAddress&&(n.localAddress=e.localAddress),this.configureProxyAuthorization(n,e),n}configureProxyAuthorization(e,r){e.headers["Proxy-Authorization"]=[],e.proxyAuth&&e.headers["Proxy-Authorization"].push("Basic "+Buffer.from(e.proxyAuth).toString("base64")),r.headers&&r.headers["Proxy-Authorization"]&&e.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}};async function brt(t){try{return t.get(lA).loadKerberos()}catch{return}}var _rt=fe(require("http")),xrt=fe(require("https"));var k8=class extends bg{constructor(r){super();this._envService=r}fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}_fetch(r,n,i,o,s){return new Promise((a,c)=>{let l=(r.startsWith("https:")?xrt:_rt).request(r,{method:n,headers:i},d=>{if(s.aborted){d.destroy(),l.destroy(),c(JX(s));return}let p=new ZX(l,d,s);a(new jf(d.statusCode||0,d.statusMessage||"",p.headers,async()=>p.text(),async()=>p.json(),async()=>p.body()))});l.setTimeout(60*1e3),l.on("error",c),o&&l.write(o),l.end()})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return Ert(r)}isDNSLookupFailedError(r){return r&&r.code==="ENOTFOUND"}isFetcherError(r){return r&&["EADDRINUSE","ECONNREFUSED","ECONNRESET","ENOTFOUND","EPIPE","ETIMEDOUT"].includes(r.code)}};function JX(t){return t.reason}function Ert(t){return t&&t.name==="AbortError"}var ZX=class{constructor(e,r,n){this.req=e;this.res=r;this.signal=n;this.headers=new class{get(i){let o=r.headers[i];return Array.isArray(o)?o[0]:o??null}[Symbol.iterator](){let i=Object.keys(r.headers),o=0;return{next:()=>{if(o>=i.length)return{done:!0,value:void 0};let s=i[o++];return{done:!1,value:[s,this.get(s)]}}}}}}text(){return new Promise((e,r)=>{let n=[];this.res.on("data",i=>n.push(i)),this.res.on("end",()=>e(Buffer.concat(n).toString())),this.res.on("error",r),this.signal.addEventListener("abort",()=>{this.res.destroy(),this.req.destroy(),r(JX(this.signal))})})}async json(){let e=await this.text();return JSON.parse(e)}async body(){return this.signal.addEventListener("abort",()=>{this.res.emit("error",JX(this.signal)),this.res.destroy(),this.req.destroy()}),this.res}};var eJ=require("stream");var D8=class t extends bg{constructor(r,n){super();this._net=r;this._envService=n}static create(r){let n=Srt();return n?new t(n,r):null}async fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}async _fetch(r,n,i,o,s){let a=await this._net.fetch(r,{method:n,headers:i,body:o,signal:s});return new jf(a.status,a.statusText,a.headers,()=>a.text(),()=>a.json(),async()=>{if(!a.body)return eJ.Readable.from([]);let c=a.body[Symbol.asyncIterator]();return eJ.Readable.from(c)})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return r&&r.name==="AbortError"}isDNSLookupFailedError(r){return r.message==="net::ERR_INTERNET_DISCONNECTED"}isFetcherError(r){return r&&r.message&&r.message.startsWith("net::")}};function Srt(){try{return require("electron").net}catch{}}var pS=fe(eRe(),1),RCr={ALPN_HTTP2:pS.default.ALPN_HTTP2,ALPN_HTTP2C:pS.default.ALPN_HTTP2C,ALPN_HTTP1_1:pS.default.ALPN_HTTP1_1,ALPN_HTTP1_0:pS.default.ALPN_HTTP1_0},{fetch:ACr,context:tRe,reset:PCr,noCache:kCr,h1:DCr,keepAlive:NCr,h1NoCache:LCr,keepAliveNoCache:OCr,cacheStats:MCr,clearCache:FCr,offPush:UCr,onPush:BCr,createUrl:qCr,timeoutSignal:HCr,Body:jCr,Headers:GCr,Request:VCr,Response:zCr,AbortController:rRe,AbortError:nRe,AbortSignal:$Cr,FetchBaseError:WCr,FetchError:AJ,ALPN_HTTP2:YCr,ALPN_HTTP2C:KCr,ALPN_HTTP1_1:QCr,ALPN_HTTP1_0:XCr}=pS.default;var iRe=fe(require("tls"));var K8=class{constructor(e){this._certificateReader=e.get(A8)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async applyToRequestOptions(e){let r=await this._certificateReader.getAllRootCAs(),n={_vscodeAdditionalCaCerts:r};e.secureContext=iRe.createSecureContext(n),e.ca=r,e.cert=r,r.map(i=>{e.secureContext.context.addCACert(i)})}};var Q8=class extends bg{constructor(r){super();this.accessor=r;this.createSocketFactory=(r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);try{return await this.proxySocketFactory.createSocket(i,o)}catch(s){throw s instanceof Ef&&s.cause?new Error(`${s.message}, cause=${s.cause.message}`):new Error(s.message)}};this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new K8(r),this.proxySocketFactory=r.get(P8)}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.accessor)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){this._rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.accessor)}get rejectUnauthorized(){return this._rejectUnauthorized}createFetchApi(r){let n=r.get(ft);return tRe({userAgent:`GitHubCopilotChat/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,this.rejectUnauthorized):void 0,rejectUnauthorized:this.rejectUnauthorized})}async fetch(r,n){let i={...n,body:n.body?n.body:n.json,signal:n.signal};await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(o);let s=await this.fetchApi.fetch(r,i);return new jf(s.status,s.statusText,s.headers,()=>s.text(),()=>s.json(),async()=>s.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new rRe}isAbortError(r){return r instanceof nRe}isDNSLookupFailedError(r){return r instanceof AJ&&r.code==="ENOTFOUND"}isFetcherError(r){return r instanceof AJ}};var sRe=require("net"),aRe=require("url"),fS=require("vscode");function Wit(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy||null}function cRe(t,e){let r=fS.workspace.onDidChangeConfiguration(n=>{let i=n.affectsConfiguration("http.proxy");(n.affectsConfiguration("http.proxyStrictSSL")||n.affectsConfiguration("http.proxyAuthorization")||n.affectsConfiguration("http.proxyKerberosServicePrincipal")||i)&&oRe(t,e,i)});return oRe(t,e),r}var oRe=(t,e,r)=>{let i=fS.workspace.getConfiguration("http").get("proxy")||Wit(e);if(i){let o={},s=fS.workspace.getConfiguration("http").get("proxyAuthorization"),a=fS.workspace.getConfiguration("http").get("proxyStrictSSL",!0);s&&(o["Proxy-Authorization"]=s);let c=i,u=i.split(":");if(u.length>2){if(i.includes("[")){let v=i.indexOf("["),b=i.indexOf("]");c=i.substring(v+1,b)}}else c=u[0];let l=(0,sRe.isIP)(c);l===4?i=`https://${i}`:l===6&&(i.includes("[")?i.startsWith("https://")||(i=`https://${i}`):i=`https://[${i}]`);let{hostname:d,port:p,username:f,password:m}=Yit(i),h=f&&m&&`${decodeURIComponent(f)}:${decodeURIComponent(m)}`;t.proxySettings={host:d,port:parseInt(p),proxyAuth:h,headers:o};let g=fS.workspace.getConfiguration("http").get("proxyKerberosServicePrincipal");g&&(t.proxySettings.kerberosServicePrincipal=g),t.rejectUnauthorized=a}else r&&!i&&(t.proxySettings=void 0)};function Yit(t){try{return new aRe.URL(t)}catch{throw new Error(`Invalid proxy URL: '${t}'`)}}var X8=class extends Q8{constructor(r){super(r);this._store=new Vt;this._store.add(cRe(this,process.env))}dispose(){this._store.dispose()}};var J8=class{get fetchStrategy(){return this._fetchStrategy}set fetchStrategy(e){e===2&&!this._electronFetcher&&(this._logger.warn("Cannot use Electron fetcher: Electron net module is not available!"),e=0),this._logger.info(`Using ${SR[e]} fetcher`),this._fetchStrategy=e}get _fetcher(){switch(this.fetchStrategy){case 1:return this._nodeFetcher;case 0:return this._helixFetcher;case 2:return this._electronFetcher??this._helixFetcher}}constructor(e){this._logger=e.get(pe).getLogger("FetcherService"),this._nodeFetcher=new k8(e.get(ft)),this._helixFetcher=new X8(e),this._electronFetcher=D8.create(e.get(ft)),this._fetchStrategy=0;let r=e.get(Re).getConfig(ke.DebugUseElectronFetcher),n=e.get(Re).getConfig(ke.DebugUseNodeFetcher);this.fetchStrategy=r?2:n?1:0}fetch(e,r){return this._fetcher.fetch(e,r)}disconnectAll(){return this._fetcher.disconnectAll()}makeAbortController(){return this._fetcher.makeAbortController()}isAbortError(e){return this._fetcher.isAbortError(e)}isDNSLookupFailedError(e){return this._fetcher.isDNSLookupFailedError(e)}isFetcherError(e){return this._fetcher.isFetcherError(e)}};var eM=fe(require("vscode")),Z8=class{async open(e){await eM.commands.executeCommand("vscode.open",eM.Uri.parse(e))}};function uRe(t){let r=[`(repo:${(Array.isArray(t.repo)?t.repo:[t.repo]).join(" OR repo:")})`];return t.lang&&r.push(`(lang:${t.lang.join(" OR lang:")})`),t.notLang&&r.push(`NOT (lang:${t.notLang.join(" OR lang:")})`),t.path&&r.push(`(path:${t.path.join(" OR path:")})`),t.notPath&&r.push(`NOT (path:${t.notPath.join(" OR path:")})`),r.join(" ")}var tM=class extends Error{constructor(r,n){super(n);this.status=r}},D2=class{constructor(e){this._accessor=e;this._logger=this._accessor.get(pe).getLogger("CodeOrDocsSearchClient");this._configurationService=this._accessor.get(Re)}async search(e,r,n=6,i=.766,o){let s;try{s=await this.postCodeOrDocsSearchRequestWithRetry(e,r,i,n,o)}catch(c){throw this._accessor.get(Ne).sendGHTelemetryException(c,`${this.slug} search failed`),c}let a=s.errors?.map(O1e)??[];if(!Array.isArray(r.repo)){if(a.length)throw a.length>1?new AggregateError(a):a[0];return s.results}return{results:s.results,errors:a}}async postCodeOrDocsSearchRequestWithRetry(e,r,n,i,o){let s=this._accessor.get(kt),a=await s.getPermissiveGitHubToken({silent:!0})??await s.getAnyGitHubToken(),c=`${this._configurationService.getConfig(ke.AgentsEndpointUrl)}/search/${this.slug}`,u=5,l=0,d=new Set,p;for(;l<u;)try{let f;try{return f=await this.postCodeOrDocsSearchRequest(c,a,e,r,n,i,o),f}catch(m){if(m instanceof tM)throw m;p=m;break}}catch(f){l++;let m=l*1e3;d.add(`Error fetching ${this.slug} search. ${f.message??f}`),this._logger.warn(`[repo:${r.repo}] Error fetching ${this.slug} search. Retrying in ${l} seconds. Query: ${e}`),await new Promise(h=>setTimeout(h,m))}throw l>=u&&(this._logger.warn(`[repo:${r.repo}] Max Retry Error thrown while querying '${e}'`),p=MW({error:"ERROR_TYPE_MAX_RETRIES_EXCEEDED",message:`${this.slug} search timed out after ${u} retries. ${Array.from(d).join(`
`)}`})),p}async postCodeOrDocsSearchRequest(e,r,n,i,o,s,a){let c={url:e,modelMaxPromptTokens:0,getExtraHeaders(){return{Accept:"application/json","X-GitHub-Api-Version":"2023-12-12-preview"}}},u=await _g(this._accessor,c,r??"",void 0,On(),{query:n,scopingQuery:uRe(i),similarity:o,limit:s},a),l=await u.text();if(u.status===404||u.status===400&&l.includes("unknown integration"))throw this._logger.debug(`${this.slug} search endpoint not available for this user.`),MW({error:"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT",message:`${this.slug}: ${l}`});let d;try{d=JSON.parse(l)}catch{throw new tM(u.status,l)}return d}};ze([so(e=>e._logger)],D2.prototype,"search",1);var rM=class extends D2{constructor(){super(...arguments);this.slug="code"}},nM=class extends D2{constructor(){super(...arguments);this.slug="docs"}};var iM=class{sendEventData(e,r){throw new Error("Telemetry disabled")}sendErrorData(e,r){throw new Error("Telemetry disabled")}flush(){return Promise.resolve()}};var PJ=class{getReporter(e,r){if(!r)return this.reporter;if(oM(e))return this.reporterSecure;if(e.get(Mr).extensionMode===is.Test)return new iM}setReporter(e){this.reporter=e}setSecureReporter(e){this.reporterSecure=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.flush?this.reporter.flush():void 0,this.reporter=void 0);let r=Promise.resolve();this.reporterSecure&&(r=this.reporterSecure.flush?this.reporterSecure.flush():void 0,this.reporterSecure=void 0),await Promise.all([e,r])}},sM=class{constructor(e){this.accessor=e;this.reporters=new PJ;this.openPromises=void 0}withPromise(e){return this.openPromises?(this.openPromises.add(e),e.then(r=>{this.openPromises?.delete(e)})):e}async enablePromiseTracking(e){e?this.openPromises||(this.openPromises=new Set):await this.awaitOpenPromises(void 0)}setSecureReporter(e){this.reporters.setSecureReporter(e)}setReporter(e){this.reporters.setReporter(e)}async sendTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!1))}async sendRestrictedTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!0))}async sendErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!1))}async sendRestrictedErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!0))}async sendExpProblemTelemetry(e){await this.withPromise(this._sendExpProblemTelemetry(e))}async sendExceptionTelemetry(e,r){await this.withPromise(this._sendExceptionTelemetry(e,r))}async deactivate(){await this.awaitOpenPromises(new Set),await this.reporters.deactivate()}async awaitOpenPromises(e){if(this.openPromises){let r=[...this.openPromises.values()];this.openPromises=e,await Promise.all(r)}}async _sendTelemetry(e,r,n){if(n&&!oM(this.accessor))return;let i=r||gr.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor),this.sendTelemetryEvent(n??!1,e,i)}async _sendExpProblemTelemetry(e){let r="expProblem",n=gr.createAndMarkAsIssued(e,{});await n.makeReadyForSending(this.accessor),this.sendTelemetryEvent(!1,r,n)}async _sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=oM(this.accessor),o=gr.createAndMarkAsIssued({origin:JD(r),reason:i?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await o.makeReadyForSending(this.accessor),this.sendTelemetryEvent(!1,"exception",o),!i)return;let s=gr.createAndMarkAsIssued({origin:r});await s.makeReadyForSending(this.accessor),this.sendTelemetryException(!0,n,s)}async _sendErrorTelemetry(e,r,n){if(n&&!oM(this.accessor))return;let i=r||gr.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor),this.sendTelemetryErrorEvent(n??!1,e,i)}sendTelemetryEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}sendTelemetryException(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendErrorData(r,{...o,...n.measurements})}}sendTelemetryErrorEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}};function oM(t){return t.get(cb).optedIn}function Qit(t){switch(t){case"text-embedding-ada-002":return{maxBatchSize:16,maxTokens:8192};default:throw new Error(`Unknown model ${t}`)}}var aM=class{constructor(e){this.model=e;this.url="https://api.githubcopilot.com/embeddings";let r=Qit(e);this.maxBatchSize=r.maxBatchSize,this.modelMaxPromptTokens=r.maxTokens}};var cM=class{constructor(e){this.accessor=e;this._chatEndpoints=new Map;this._defaultUserRequestModel=void 0}async defaultUserRequestModel(){if(!this._defaultUserRequestModel){let e=(await this.accessor.get(kt).getCopilotToken(this.accessor)).isInternal;this._defaultUserRequestModel??=e?this.accessor.get(Re).getConfig(ke.DebugOverrideChatEngine):"gpt-3.5-turbo"}return this._defaultUserRequestModel}async getChatEndpointInfo(e){let r=this._chatEndpoints.get(e);if(!r){let n=wEe(this.accessor),i=await REe(this.accessor,e),o=await this.shouldDisableSnippy();r=new uE(n,e,i,o),this._chatEndpoints.set(e,r)}return r}async shouldDisableSnippy(){let e=await this.accessor.get(kt).getCopilotToken(this.accessor),r=this.accessor.get(Mr).extensionMode===is.Development;return e.isInternal&&r}async getEmbeddingsEndpointInfo(){return this._embeddingsEndpoint??=new aM("text-embedding-ada-002"),this._embeddingsEndpoint}async getNonUserRequestEndpoint(){return this.getChatEndpointInfo("gpt-3.5-turbo")}async getUserRequestEndpoint(e,r,n){if(n)return this.getChatEndpointInfo(n);let i=this.accessor.get(Ur),o=this.accessor.get(Re),s;if(e===2)await i.getTreatmentVariableAsync("vscode","copilotchat.panelGpt4",!0)!==!1&&(s="gpt-4");else if(e===1)switch(r){case DE.ID:{let a=o.getConfig(ke.FixUseGPT4InInlineChat);(await i.getTreatmentVariableAsync("vscode","copilotchat.fixInlineGpt4",!0)||a)&&(s="gpt-4");break}case Sg.ID:case Eg.ID:case rc.ID:{o.isDefaultSettingOverwritten(ke.DebugOverrideChatEngine)?s=o.getConfig(ke.DebugOverrideChatEngine):await this.accessor.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.inlineChatGpt4",!0)&&(s="gpt-4");break}}return s||(s=await this.defaultUserRequestModel()),this.getChatEndpointInfo(s)}};function lRe(t){t.define(Ye,new cM(t)),t.define(ft,new $6),t.define(fE,new V6),t.define(Gf,new sM(t)),t.define(rs,new AR),t.define(u2,new Y6),t.define(A8,Wwe(t)),t.define(P8,Qwe(t)),t.define(Zr,new J8(t));let e=new Uw(t,new Cb,new zE);t.define(st,e),t.define(cb,new PR(t)),t.define(DR,new kR),t.define(NY,new FO),t.define(RR,new wR(t)),t.define(ab,new Z8),t.define(hb,new JR),t.define(Cn,new W6),t.define(Vi,new z6(t)),t.define(Yc,new $3(t)),t.define(r5,new t5(t)),t.define(jE,new O6(t)),t.define(W3,new rM(t)),t.define(Y3,new nM(t))}var Xit=Lr.window.createOutputChannel("GitHub Copilot Chat",{log:!0});async function Jit(t,e){if(t.extensionMode===Lr.ExtensionMode.Test&&!e)return t;Lr.l10n.bundle&&uM.config({contents:Lr.l10n.bundle});let r=await fRe(t);t.subscriptions.push(mRe(r));let n=r.get(Gf),i=r.get(Ne);return r.get(ft).isProduction||pRe.install(),await(async()=>{let a=c=>{let u=c.message||c,l=gr.createAndMarkAsIssued({reason:u});i.sendGHTelemetryErrorEvent("activationFailed",l.properties,l.measurements),n.deactivate();let d=u==="GitHubLoginFailed"?p9:`GitHub Copilot could not connect to server. Extension activation failed: "${u}"`;r.get(pe).defaultLogger.error(d),Lr.commands.executeCommand("setContext","github.copilot.activated",!1);let p=Lr.authentication.onDidChangeSessions(async f=>{try{r0(f,r.get(Re))&&await FR(f,r)&&(Lr.commands.executeCommand("setContext","github.copilot.activated",!0),L2(r),p.dispose())}catch(m){L2(r,m),a(m)}})};try{await r.get(kt).getCopilotToken(r),Lr.commands.executeCommand("setContext","github.copilot.activated",!0),await mTe(r)}catch(c){r.get(Zr).isDNSLookupFailedError(c)&&t.subscriptions.push(eot(r,a)),L2(r,c),a(c)}t.subscriptions.push(Lr.workspace.onDidChangeConfiguration(c=>ete(c,r))),PEe(r),tot(r,t),i.sendGHTelemetryEvent("extension.activate")})(),Lr.ExtensionMode.Test===t.extensionMode?r:{getAPI(a){if(a>_w.version)throw new Error("Invalid Copilot Chat extension API version. Please upgrade Copilot Chat.");return new _w(r)}}}async function fRe(t){let e=new gR;e.define(Re,new zt(jR)),e.define(pe,new zt($d,[[new _R,new xR(Xit)]])),e.define(IA,new zt(CA)),e.define(Fr,new zt(Eb,[!0])),lRe(e),e.define(Mr,t),e.define(eg,new zt(vd)),e.define(uc,new zt(i0)),e.define(E6,new zt(BE)),e.define(It,new zt(RA)),e.define(Sb,new zt(Tb)),e.define(zf,new oA(e)),e.define(VS,new zt(HE)),e.define(ui,new zt(lu)),e.define(al,new zt(gb)),e.define(VR,new zt(qE)),e.define(Po,new zt(cA)),e.define(oo,new zt(uA)),e.define(zR,new $R),e.define(lA,new pA),e.define(dA,new fA),e.define(ho,new d3),e.define(db,new GR),e.define(Zv,new h3),e.define(sl,new zt(uu)),e.define(BR,new zt(lE)),e.define(ig,new aO);let r=t.extension.packageJSON.internalAIKey??"",n=t.extension.packageJSON.ariaKey??"";if(t.extensionMode===Lr.ExtensionMode.Test)e.define(kt,xee()),e.define(ab,new CR),await dRe(e,t,r,n,"copilot-test",!0);else{let o=new UR(e.get(Re));t.subscriptions.push(o),e.define(kt,o),e.define(hb,new XR),await dRe(e,t,r,n,t.extension.packageJSON.name,Lr.env.isTelemetryEnabled),await e.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.useElectronFetcher",!0)?e.get(Zr).fetchStrategy=2:await e.get(Ur).getTreatmentVariableAsync("vscode","copilotchat.useNodeFetcher",!0)&&(e.get(Zr).fetchStrategy=1)}e.define(sr,new zt(wg)),e.define(we,new q3),e.define(cE,new zt(RE)),e.define(IR,new hA),e.define(S9,new nA),e.define(sb,new zt(bb)),e.define(ns,{_serviceBrand:void 0,maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:e.get(Re).getConfig(ke.ConversationAdditionalPromptContext),rejectionMessage:uM.t("Sorry, but I can only assist with programming related questions.")}),e.define(WS,new mA),Bee(e),e.define(it,new zt(b1)),e.define(Kd,new zt(mb)),e.define(J3,new zt(N1)),e.define(rg,new zt(uf,[void 0])),e.define(T5,new zt(TE)),e.define(Sd,new zt(IE));let i=new wE(e);return e.define(B5,i),t.subscriptions.push(i),e.define(UO,new zt(GE)),e.define(sO,new oO),e.define(KR,new zt(fb)),t.subscriptions.push(e.get(st)),e.get(st).init(),e.seal(),e}async function Zit(t,e){if(Lr.ExtensionMode.Production===e.extensionMode){let r=t.get(Ne),n=await oge(e,r,t.get(ft).isPreRelease());t.define(Ur,n)}else t.define(Ur,new AA)}async function dRe(t,e,r,n,i,o){let s=await KH(t,i,o),a=Lr.env.onDidChangeTelemetryEnabled(async c=>{s?.dispose(),s=await KH(t,e.extension.packageJSON.name,c&&Lr.env.isTelemetryEnabled)});if(e.subscriptions.push(a),e.subscriptions.push(new Lr.Disposable(()=>s?.dispose())),Lr.ExtensionMode.Production===e.extensionMode){let c=new u3(e.extension.packageJSON.name,t,r,n,WH,YH);t.define(Ne,c),e.subscriptions.push(c)}else t.define(Ne,new PA);Zit(t,e)}function mRe(t){return{dispose:async()=>{t.get(Ne).sendGHTelemetryEvent("extension.deactivate")}}}var N2={Offline:"github.copilot.offline",IndividualDisabled:"github.copilot.interactiveSession.individual.disabled",IndividualExpired:"github.copilot.interactiveSession.individual.expired",EnterpriseDisabled:"github.copilot.interactiveSession.enterprise.disabled"};function L2(t,e){let r=Object.values(N2),n;t.get(Zr).isDNSLookupFailedError(e)?n=N2.Offline:e instanceof HS?n=N2.IndividualDisabled:e instanceof jS?n=N2.IndividualExpired:e instanceof GS&&(n=N2.EnterpriseDisabled),n&&Lr.commands.executeCommand("setContext",n,!0);for(let o of r)o!==n&&Lr.commands.executeCommand("setContext",o,!1)}function eot(t,e){return Lr.commands.registerCommand("github.copilot.offline",async()=>{try{await t.get(kt).getCopilotToken(t),Lr.commands.executeCommand("setContext","github.copilot.activated",!0),L2(t)}catch(r){if(t.get(Zr).isDNSLookupFailedError(r))return;L2(t,r),e(r)}})}async function tot(t,e){let r=t.get(pe).getLogger("contributions"),n=o=>{r.error(`Error while loading contribution: ${o} ${o.stack}`)},i=o=>{o instanceof Lr.Disposable&&e.subscriptions.push(o)};for(let o of SCe){let s;try{s=o.create(t)}catch(a){n(a)}i(s),s instanceof Promise&&s.then(i).catch(n)}}0&&(module.exports={activate,createExtensionContext,onDeactivate});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
